import{a as Y}from"./chunk-2W3WU5BW.js";import{a as U}from"./chunk-Z7P27EYM.js";import{a as Q}from"./chunk-AEGG3O7Y.js";import"./chunk-P7ZXRJB5.js";import{d as D}from"./chunk-AICMW4LS.js";import"./chunk-ER4RSQOA.js";import{b as W,c as A,f as N,h as L,i as R,j as z,k as B,o as j}from"./chunk-XHTFFY4H.js";import{j as V,k as F,r as q}from"./chunk-SIBEU5US.js";import{Ca as P,Ha as k,Ma as h,T as _,U as C,Ua as m,Va as r,Wa as o,Xa as T,ab as y,ba as O,db as c,eb as d,hb as x,ib as l,jb as M,kb as S,lb as H,mb as u,nb as g,ob as f,qa as E,ta as s}from"./chunk-2JCYUYSE.js";import{a as w,b as I}from"./chunk-KAT7YFEL.js";function X(p,i){p&1&&(r(0,"span",37),l(1," Out of Stock "),o())}function G(p,i){if(p&1){let t=y();r(0,"div",26)(1,"div",27)(2,"div",28)(3,"img",29),c("error",function(a){_(t);let n=d();return C(n.onImageError(a))}),o(),h(4,X,2,0,"span",30),o(),r(5,"div",31)(6,"h6",32),l(7),o(),r(8,"p",33),l(9),o(),r(10,"div",34)(11,"button",35),c("click",function(){let a=_(t).$implicit,n=d();return C(n.decreaseQuantity(a))}),l(12,"\u2013"),o(),r(13,"span"),l(14),o(),r(15,"button",36),c("click",function(){let a=_(t).$implicit,n=d();return C(n.increaseQuantity(a))}),l(16,"+"),o()()()()()}if(p&2){let t=i.$implicit;s(3),m("src",t.imageUrl||"assets/default.jpg",E),s(),m("ngIf",t.quantityAvailable===0),s(3),M(t.name),s(2),S("\u20B9",t.price),s(2),m("disabled",t.quantityAvailable===0),s(3),M(t.quantity||0),s(),m("disabled",t.quantityAvailable===0)}}function J(p,i){if(p&1){let t=y();r(0,"div",38)(1,"span",32),l(2),o(),r(3,"button",39),c("click",function(){_(t);let a=d();return C(a.viewCart())}),l(4,"View Cart \u2192"),o()()}if(p&2){let t=d();s(2),S("\u{1F6D2} ",t.cartItemCount," item(s) in cart")}}var b=class p{constructor(i,t,e,a){this.router=i;this.cartService=t;this.firebaseService=e;this.restaurantContext=a}companyId="";isLoading=!0;menuItems=O([]);cartItems=[];cartItemCount=0;searchText="";selectedCategory="";minPrice=null;maxPrice=null;sortOrder="";availabilityFilter="";currentPage=1;itemsPerPage=8;async ngOnInit(){this.restaurantContext.userDetail$.subscribe(async i=>{if(!i)return;this.companyId=i.companyId;let t=await this.firebaseService.getMenuItems(this.companyId);this.menuItems.set(t),this.initializeCartSync(t)})}ngAfterViewInit(){this.setupRipples()}setupRipples(){document.querySelectorAll(".ripple-target").forEach(t=>{t.addEventListener("click",e=>{let a=t.getBoundingClientRect(),n=e.clientX-a.left,v=e.clientY-a.top;t.style.setProperty("--x",`${n}px`),t.style.setProperty("--y",`${v}px`)})})}initializeCartSync(i){this.cartService.cartItems$.subscribe(t=>{this.cartItems=t,this.cartItemCount=t.reduce((a,n)=>a+n.quantity,0);let e=i.map(a=>{let n=t.find(v=>v.menuItem.id===a.id);return I(w({},a),{quantity:n?n.quantity:0})});this.menuItems.set(e),this.isLoading=!1})}filteredMenuItems(){let i=[...this.menuItems()];if(this.searchText.trim()){let t=this.searchText.toLowerCase();i=i.filter(e=>e.name.toLowerCase().includes(t))}return this.selectedCategory&&(i=i.filter(t=>t.category===this.selectedCategory)),this.minPrice!==null&&(i=i.filter(t=>t.price>=this.minPrice)),this.maxPrice!==null&&(i=i.filter(t=>t.price<=this.maxPrice)),this.availabilityFilter==="in"?i=i.filter(t=>t.quantityAvailable>0):this.availabilityFilter==="out"&&(i=i.filter(t=>t.quantityAvailable===0)),this.sortOrder==="asc"?i.sort((t,e)=>t.price-e.price):this.sortOrder==="desc"&&i.sort((t,e)=>e.price-t.price),i}get totalPages(){return Math.ceil(this.filteredMenuItems().length/this.itemsPerPage)}paginatedItems(){let i=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenuItems().slice(i,i+this.itemsPerPage)}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}prevPage(){this.currentPage>1&&this.currentPage--}increaseQuantity(i){i.quantity=(i.quantity||0)+1,this.cartService.addToCart(i,1)}decreaseQuantity(i){(i.quantity||0)<=0||(i.quantity-=1,this.cartService.addToCart(i,-1))}viewCart(){this.router.navigate(["/dashboard/cart"])}onImageError(i){i.target.src="assets/default.jpg"}static \u0275fac=function(t){return new(t||p)(P(D),P(Y),P(U),P(Q))};static \u0275cmp=k({type:p,selectors:[["app-pos-home"]],decls:47,vars:17,consts:[[1,"filter-panel","shadow-sm","fade-slide"],[1,"input-group","search-box","mb-3"],[1,"input-group-text","bg-light","ripple-target"],[1,"bi","bi-search"],["type","text","placeholder","Search items...",1,"form-control",3,"ngModelChange","ngModel"],[1,"chips-wrapper","mb-3"],[1,"chip","ripple-target",3,"click"],[1,"row","g-3","fade-in"],[1,"col-md-3"],["type","number","placeholder","Min Price",1,"form-control",3,"ngModelChange","ngModel"],["type","number","placeholder","Max Price",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-select",3,"ngModelChange","ngModel"],["value",""],["value","asc"],["value","desc"],["value","in"],["value","out"],[1,"pos-container"],[1,"menu-section"],[1,"fw-bold","mt-3","fade-in"],[1,"row","g-4","mt-1"],["class","col-lg-3 col-md-4 col-sm-6 fade-up",4,"ngFor","ngForOf"],[1,"pagination-container","fade-in"],[1,"page-btn","ripple-target",3,"click","disabled"],[1,"page-info"],["class","cart-float pop-in",4,"ngIf"],[1,"col-lg-3","col-md-4","col-sm-6","fade-up"],[1,"card","item-card","shadow-sm"],[1,"image-container"],[1,"menu-img",3,"error","src"],["class","stock-badge",4,"ngIf"],[1,"card-body"],[1,"fw-bold"],[1,"price"],[1,"qty-box"],[1,"btn","minus","ripple-target",3,"click","disabled"],[1,"btn","plus","ripple-target",3,"click","disabled"],[1,"stock-badge"],[1,"cart-float","pop-in"],[1,"btn","btn-success","ripple-target",3,"click"]],template:function(t,e){t&1&&(r(0,"div",0)(1,"div",1)(2,"span",2),T(3,"i",3),o(),r(4,"input",4),f("ngModelChange",function(n){return g(e.searchText,n)||(e.searchText=n),n}),c("ngModelChange",function(){return e.currentPage=1}),o()(),r(5,"div",5)(6,"span",6),c("click",function(){return e.selectedCategory="",e.currentPage=1}),l(7," All "),o(),r(8,"span",6),c("click",function(){return e.selectedCategory="Veg",e.currentPage=1}),l(9," \u{1F331} Veg "),o(),r(10,"span",6),c("click",function(){return e.selectedCategory="Non-Veg",e.currentPage=1}),l(11," \u{1F357} Non-Veg "),o()(),r(12,"div",7)(13,"div",8)(14,"input",9),f("ngModelChange",function(n){return g(e.minPrice,n)||(e.minPrice=n),n}),o()(),r(15,"div",8)(16,"input",10),f("ngModelChange",function(n){return g(e.maxPrice,n)||(e.maxPrice=n),n}),o()(),r(17,"div",8)(18,"select",11),f("ngModelChange",function(n){return g(e.sortOrder,n)||(e.sortOrder=n),n}),r(19,"option",12),l(20,"Sort By"),o(),r(21,"option",13),l(22,"Low \u2192 High"),o(),r(23,"option",14),l(24,"High \u2192 Low"),o()()(),r(25,"div",8)(26,"select",11),f("ngModelChange",function(n){return g(e.availabilityFilter,n)||(e.availabilityFilter=n),n}),r(27,"option",12),l(28,"All Items"),o(),r(29,"option",15),l(30,"In Stock"),o(),r(31,"option",16),l(32,"Out of Stock"),o()()()()(),r(33,"div",17)(34,"div",18)(35,"h3",19),l(36,"\u{1F37D}\uFE0F Menu Items"),o(),r(37,"div",20),h(38,G,17,7,"div",21),o(),r(39,"div",22)(40,"button",23),c("click",function(){return e.prevPage()}),l(41,"\u2190 Previous"),o(),r(42,"span",24),l(43),o(),r(44,"button",23),c("click",function(){return e.nextPage()}),l(45,"Next \u2192"),o()()(),h(46,J,5,1,"div",25),o()),t&2&&(s(4),u("ngModel",e.searchText),s(2),x("active",e.selectedCategory==""),s(2),x("active",e.selectedCategory=="Veg"),s(2),x("active",e.selectedCategory=="Non-Veg"),s(4),u("ngModel",e.minPrice),s(2),u("ngModel",e.maxPrice),s(2),u("ngModel",e.sortOrder),s(8),u("ngModel",e.availabilityFilter),s(12),m("ngForOf",e.paginatedItems()),s(2),m("disabled",e.currentPage===1),s(3),H("Page ",e.currentPage," of ",e.totalPages),s(),m("disabled",e.currentPage===e.totalPages),s(2),m("ngIf",e.cartItemCount>0))},dependencies:[q,V,F,j,z,B,W,L,R,A,N],styles:[".filter-panel[_ngcontent-%COMP%]{background:#fff;padding:16px;border-radius:12px;border:1px solid #eee;top:70px;z-index:100}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:8px}.chips-wrapper[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}.chip[_ngcontent-%COMP%]{padding:6px 14px;background:#f5f5f5;border-radius:50px;cursor:pointer;border:1px solid #ddd;font-size:14px;transition:.2s}.chip.active[_ngcontent-%COMP%]{background:#0d6efd;color:#fff;border-color:#0d6efd}.pos-container[_ngcontent-%COMP%]{display:flex;gap:20px;margin-top:20px}.menu-section[_ngcontent-%COMP%]{flex:3}.item-card[_ngcontent-%COMP%]{border-radius:12px;overflow:hidden;transition:.2s}.item-card[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 6px 16px #00000026}.image-container[_ngcontent-%COMP%]{position:relative}.menu-img[_ngcontent-%COMP%]{height:170px;width:100%;object-fit:cover}.stock-badge[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;background:#ff0000d9;padding:4px 10px;font-size:13px;color:#fff;border-radius:3px}.price[_ngcontent-%COMP%]{font-size:15px;font-weight:700;color:#444}.qty-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.qty-box[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:26px;height:26px;border-radius:50%;padding:0;font-weight:700}.qty-box[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]{background:#eee}.qty-box[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]{background:#0d6efd;color:#fff}.pagination-container[_ngcontent-%COMP%]{text-align:center;margin:25px 0}.page-btn[_ngcontent-%COMP%]{background:#0d6efd;color:#fff;border:none;padding:6px 16px;border-radius:6px;margin:0 8px}.page-btn[_ngcontent-%COMP%]:disabled{background:#ccc}.cart-float[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;background:#fff;padding:12px 18px;border-radius:50px;box-shadow:0 4px 12px #00000026;display:flex;align-items:center;gap:15px;z-index:200}@media(max-width:768px){.pos-container[_ngcontent-%COMP%]{flex-direction:column}}@media(max-width:576px){.menu-img[_ngcontent-%COMP%]{height:150px}.filter-panel[_ngcontent-%COMP%]{top:60px}}"]})};var ge=[{path:"",component:b}];export{ge as POS_ROUTES};
