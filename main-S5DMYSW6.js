import{a as or}from"./chunk-FK6H3RFT.js";import{a as Le,b as Ht}from"./chunk-KAT7YFEL.js";var ws=null,U_=!1,mT=1,iH=null,Gs=Symbol("SIGNAL");function ln(n){let e=ws;return ws=n,e}function z_(){return ws}var om={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function am(n){if(U_)throw new Error("");if(ws===null)return;ws.consumerOnSignalRead(n);let e=ws.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=ws.recomputing;if(r&&(t=e!==void 0?e.nextProducer:ws.producers,t!==void 0&&t.producer===n)){ws.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===ws&&(!r||oH(i,ws)))return;let s=Ef(ws),o={producer:n,consumer:ws,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};ws.producersTail=o,e!==void 0?e.nextProducer=o:ws.producers=o,s&&EM(n,o)}function _M(){mT++}function yT(n){if(!(Ef(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===mT)){if(!n.producerMustRecompute(n)&&!H_(n)){gT(n);return}n.producerRecomputeValue(n),gT(n)}}function vT(n){if(n.consumers===void 0)return;let e=U_;U_=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||sH(r)}}finally{U_=e}}function _T(){return ws?.consumerAllowSignalWrites!==!1}function sH(n){n.dirty=!0,vT(n),n.consumerMarkedDirty?.(n)}function gT(n){n.dirty=!1,n.lastCleanEpoch=mT}function cm(n){return n&&wM(n),ln(n)}function wM(n){n.producersTail=void 0,n.recomputing=!0}function $_(n,e){ln(e),n&&bM(n)}function bM(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Ef(n))do t=wT(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function H_(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(yT(t),r!==t.version))return!0}return!1}function um(n){if(Ef(n)){let e=n.producers;for(;e!==void 0;)e=wT(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function EM(n,e){let t=n.consumersTail,r=Ef(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)EM(i.producer,i)}function wT(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Ef(e)){let s=e.producers;for(;s!==void 0;)s=wT(s)}return t}function Ef(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function bT(n){iH?.(n)}function oH(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function ET(n,e){return Object.is(n,e)}function G_(n,e){let t=Object.create(aH);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(yT(t),am(t),t.value===q_)throw t.error;return t.value};return r[Gs]=t,bT(t),r}var fT=Symbol("UNSET"),pT=Symbol("COMPUTING"),q_=Symbol("ERRORED"),aH=Ht(Le({},om),{value:fT,dirty:!0,error:null,equal:ET,kind:"computed",producerMustRecompute(n){return n.value===fT||n.value===pT},producerRecomputeValue(n){if(n.value===pT)throw new Error("");let e=n.value;n.value=pT;let t=cm(n),r,i=!1;try{r=n.computation(),ln(null),i=e!==fT&&e!==q_&&r!==q_&&n.equal(e,r)}catch(s){r=q_,n.error=s}finally{$_(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function cH(){throw new Error}var IM=cH;function TM(n){IM(n)}function IT(n){IM=n}var uH=null;function TT(n,e){let t=Object.create(W_);t.value=n,e!==void 0&&(t.equal=e);let r=()=>AM(t);return r[Gs]=t,bT(t),[r,o=>lm(t,o),o=>SM(t,o)]}function AM(n){return am(n),n.value}function lm(n,e){_T()||TM(n),n.equal(n.value,e)||(n.value=e,lH(n))}function SM(n,e){_T()||TM(n),lm(n,e(n.value))}var W_=Ht(Le({},om),{equal:ET,value:void 0,kind:"signal"});function lH(n){n.version++,_M(),vT(n),uH?.(n)}function AT(n){let e=ln(null);try{return n()}finally{ln(e)}}function nn(n){return typeof n=="function"}function If(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var K_=If(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Bd(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Mi=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(nn(r))try{r()}catch(s){e=s instanceof K_?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{CM(s)}catch(o){e=e??[],o instanceof K_?e=[...e,...o.errors]:e.push(o)}}if(e)throw new K_(e)}}add(e){var t;if(e&&e!==this)if(this.closed)CM(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Bd(t,e)}remove(e){let{_finalizers:t}=this;t&&Bd(t,e),e instanceof n&&e._removeParent(this)}};Mi.EMPTY=(()=>{let n=new Mi;return n.closed=!0,n})();var ST=Mi.EMPTY;function Q_(n){return n instanceof Mi||n&&"closed"in n&&nn(n.remove)&&nn(n.add)&&nn(n.unsubscribe)}function CM(n){nn(n)?n():n.unsubscribe()}var za={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Tf={setTimeout(n,e,...t){let{delegate:r}=Tf;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Tf;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Y_(n){Tf.setTimeout(()=>{let{onUnhandledError:e}=za;if(e)e(n);else throw n})}function dm(){}var DM=CT("C",void 0,void 0);function xM(n){return CT("E",void 0,n)}function NM(n){return CT("N",n,void 0)}function CT(n,e,t){return{kind:n,value:e,error:t}}var jd=null;function Af(n){if(za.useDeprecatedSynchronousErrorHandling){let e=!jd;if(e&&(jd={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=jd;if(jd=null,t)throw r}}else n()}function RM(n){za.useDeprecatedSynchronousErrorHandling&&jd&&(jd.errorThrown=!0,jd.error=n)}var Ud=class extends Mi{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Q_(e)&&e.add(this)):this.destination=fH}static create(e,t,r){return new Sf(e,t,r)}next(e){this.isStopped?xT(NM(e),this):this._next(e)}error(e){this.isStopped?xT(xM(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?xT(DM,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},dH=Function.prototype.bind;function DT(n,e){return dH.call(n,e)}var NT=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){J_(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){J_(r)}else J_(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){J_(t)}}},Sf=class extends Ud{constructor(e,t,r){super();let i;if(nn(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&za.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&DT(e.next,s),error:e.error&&DT(e.error,s),complete:e.complete&&DT(e.complete,s)}):i=e}this.destination=new NT(i)}};function J_(n){za.useDeprecatedSynchronousErrorHandling?RM(n):Y_(n)}function hH(n){throw n}function xT(n,e){let{onStoppedNotification:t}=za;t&&Tf.setTimeout(()=>t(n,e))}var fH={closed:!0,next:dm,error:hH,complete:dm};var Cf=typeof Symbol=="function"&&Symbol.observable||"@@observable";function $a(n){return n}function Z_(...n){return RT(n)}function RT(n){return n.length===0?$a:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var dn=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=gH(t)?t:new Sf(t,r,i);return Af(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=PM(r),new r((i,s)=>{let o=new Sf({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Cf](){return this}pipe(...t){return RT(t)(this)}toPromise(t){return t=PM(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function PM(n){var e;return(e=n??za.Promise)!==null&&e!==void 0?e:Promise}function pH(n){return n&&nn(n.next)&&nn(n.error)&&nn(n.complete)}function gH(n){return n&&n instanceof Ud||pH(n)&&Q_(n)}function mH(n){return nn(n?.lift)}function Qn(n){return e=>{if(mH(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Yn(n,e,t,r,i){return new PT(n,e,t,r,i)}var PT=class extends Ud{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var kM=If(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var li=(()=>{class n extends dn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new X_(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new kM}next(t){Af(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Af(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Af(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?ST:(this.currentObservers=null,s.push(t),new Mi(()=>{this.currentObservers=null,Bd(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new dn;return t.source=this,t}}return n.create=(e,t)=>new X_(e,t),n})(),X_=class extends li{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:ST}};var di=class extends li{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var kT={now(){return(kT.delegate||Date).now()},delegate:void 0};var e0=class extends Mi{constructor(e,t){super()}schedule(e,t=0){return this}};var hm={setInterval(n,e,...t){let{delegate:r}=hm;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=hm;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Df=class extends e0{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return hm.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&hm.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Bd(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var xf=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};xf.now=kT.now;var Nf=class extends xf{constructor(e,t=xf.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var MT=new Nf(Df);var t0=class extends Df{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var n0=class extends Nf{};var OT=new n0(t0);var ho=new dn(n=>n.complete());function MM(n){return n&&nn(n.schedule)}function OM(n){return n[n.length-1]}function r0(n){return nn(OM(n))?n.pop():void 0}function xl(n){return MM(OM(n))?n.pop():void 0}function LT(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function FM(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(p){o(p)}}function c(l){try{u(r.throw(l))}catch(p){o(p)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function LM(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qd(n){return this instanceof qd?(this.v=n,this):new qd(n)}function VM(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(D){return Promise.resolve(D).then(g,p)}}function a(g,D){r[g]&&(i[g]=function(M){return new Promise(function(k,O){s.push([g,M,k,O])>1||c(g,M)})},D&&(i[g]=D(i[g])))}function c(g,D){try{u(r[g](D))}catch(M){y(s[0][3],M)}}function u(g){g.value instanceof qd?Promise.resolve(g.value.v).then(l,p):y(s[0][2],g)}function l(g){c("next",g)}function p(g){c("throw",g)}function y(g,D){g(D),s.shift(),s.length&&c(s[0][0],s[0][1])}}function BM(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof LM=="function"?LM(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}var i0=n=>n&&typeof n.length=="number"&&typeof n!="function";function s0(n){return nn(n?.then)}function o0(n){return nn(n[Cf])}function a0(n){return Symbol.asyncIterator&&nn(n?.[Symbol.asyncIterator])}function c0(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function yH(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var u0=yH();function l0(n){return nn(n?.[u0])}function d0(n){return VM(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield qd(t.read());if(i)return yield qd(void 0);yield yield qd(r)}}finally{t.releaseLock()}})}function h0(n){return nn(n?.getReader)}function hi(n){if(n instanceof dn)return n;if(n!=null){if(o0(n))return vH(n);if(i0(n))return _H(n);if(s0(n))return wH(n);if(a0(n))return jM(n);if(l0(n))return bH(n);if(h0(n))return EH(n)}throw c0(n)}function vH(n){return new dn(e=>{let t=n[Cf]();if(nn(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function _H(n){return new dn(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function wH(n){return new dn(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Y_)})}function bH(n){return new dn(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function jM(n){return new dn(e=>{IH(n,e).catch(t=>e.error(t))})}function EH(n){return jM(d0(n))}function IH(n,e){var t,r,i,s;return FM(this,void 0,void 0,function*(){try{for(t=BM(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function fo(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Nl(n,e=0){return Qn((t,r)=>{t.subscribe(Yn(r,i=>fo(r,n,()=>r.next(i),e),()=>fo(r,n,()=>r.complete(),e),i=>fo(r,n,()=>r.error(i),e)))})}function Rl(n,e=0){return Qn((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function UM(n,e){return hi(n).pipe(Rl(e),Nl(e))}function qM(n,e){return hi(n).pipe(Rl(e),Nl(e))}function zM(n,e){return new dn(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function $M(n,e){return new dn(t=>{let r;return fo(t,e,()=>{r=n[u0](),fo(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>nn(r?.return)&&r.return()})}function f0(n,e){if(!n)throw new Error("Iterable cannot be null");return new dn(t=>{fo(t,e,()=>{let r=n[Symbol.asyncIterator]();fo(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function HM(n,e){return f0(d0(n),e)}function GM(n,e){if(n!=null){if(o0(n))return UM(n,e);if(i0(n))return zM(n,e);if(s0(n))return qM(n,e);if(a0(n))return f0(n,e);if(l0(n))return $M(n,e);if(h0(n))return HM(n,e)}throw c0(n)}function Br(n,e){return e?GM(n,e):hi(n)}function vn(...n){let e=xl(n);return Br(n,e)}function FT(n,e){let t=nn(n)?n:()=>n,r=i=>i.error(t());return new dn(e?i=>e.schedule(r,0,i):r)}function p0(n){return!!n&&(n instanceof dn||nn(n.lift)&&nn(n.subscribe))}var zd=If(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function nr(n,e){return Qn((t,r)=>{let i=0;t.subscribe(Yn(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:TH}=Array;function AH(n,e){return TH(e)?n(...e):n(e)}function g0(n){return nr(e=>AH(n,e))}var{isArray:SH}=Array,{getPrototypeOf:CH,prototype:DH,keys:xH}=Object;function m0(n){if(n.length===1){let e=n[0];if(SH(e))return{args:e,keys:null};if(NH(e)){let t=xH(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function NH(n){return n&&typeof n=="object"&&CH(n)===DH}function y0(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function VT(...n){let e=xl(n),t=r0(n),{args:r,keys:i}=m0(n);if(r.length===0)return Br([],e);let s=new dn(RH(r,e,i?o=>y0(i,o):$a));return t?s.pipe(g0(t)):s}function RH(n,e,t=$a){return r=>{WM(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)WM(e,()=>{let u=Br(n[c],e),l=!1;u.subscribe(Yn(r,p=>{s[c]=p,l||(l=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function WM(n,e,t){n?fo(t,n,e):e()}function KM(n,e,t,r,i,s,o,a){let c=[],u=0,l=0,p=!1,y=()=>{p&&!c.length&&!u&&e.complete()},g=M=>u<r?D(M):c.push(M),D=M=>{s&&e.next(M),u++;let k=!1;hi(t(M,l++)).subscribe(Yn(e,O=>{i?.(O),s?g(O):e.next(O)},()=>{k=!0},void 0,()=>{if(k)try{for(u--;c.length&&u<r;){let O=c.shift();o?fo(e,o,()=>D(O)):D(O)}y()}catch(O){e.error(O)}}))};return n.subscribe(Yn(e,g,()=>{p=!0,y()})),()=>{a?.()}}function bs(n,e,t=1/0){return nn(e)?bs((r,i)=>nr((s,o)=>e(r,s,i,o))(hi(n(r,i))),t):(typeof e=="number"&&(t=e),Qn((r,i)=>KM(r,i,n,t)))}function Rf(n=1/0){return bs($a,n)}function QM(){return Rf(1)}function Pf(...n){return QM()(Br(n,xl(n)))}function fm(n){return new dn(e=>{hi(n()).subscribe(e)})}function BT(...n){let e=r0(n),{args:t,keys:r}=m0(n),i=new dn(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,u=o;for(let l=0;l<o;l++){let p=!1;hi(t[l]).subscribe(Yn(s,y=>{p||(p=!0,u--),a[l]=y},()=>c--,void 0,()=>{(!c||!p)&&(u||s.next(r?y0(r,a):a),s.complete())}))}});return e?i.pipe(g0(e)):i}function ha(n,e){return Qn((t,r)=>{let i=0;t.subscribe(Yn(r,s=>n.call(e,s,i++)&&r.next(s)))})}function kf(n){return Qn((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Yn(t,void 0,void 0,o=>{s=hi(n(o,kf(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function pm(n,e){return nn(e)?bs(n,e,1):bs(n,1)}function jT(n){return Qn((e,t)=>{let r=!1;e.subscribe(Yn(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Au(n){return n<=0?()=>ho:Qn((e,t)=>{let r=0;e.subscribe(Yn(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function YM(n=PH){return Qn((e,t)=>{let r=!1;e.subscribe(Yn(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function PH(){return new zd}function UT(n){return Qn((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Su(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ha((i,s)=>n(i,s,r)):$a,Au(1),t?jT(e):YM(()=>new zd))}function v0(n){return n<=0?()=>ho:Qn((e,t)=>{let r=[];e.subscribe(Yn(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function _0(...n){let e=xl(n);return Qn((t,r)=>{(e?Pf(n,t,e):Pf(n,t)).subscribe(r)})}function Nc(n,e){return Qn((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Yn(r,c=>{i?.unsubscribe();let u=0,l=s++;hi(n(c,l)).subscribe(i=Yn(r,p=>r.next(e?e(c,p,l,u++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function gm(n){return Qn((e,t)=>{hi(n).subscribe(Yn(t,()=>t.complete(),dm)),!t.closed&&e.subscribe(t)})}function Ws(n,e,t){let r=nn(n)||e||t?{next:n,error:e,complete:t}:n;return r?Qn((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Yn(s,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),s.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):$a}var qT;function w0(){return qT}function Rc(n){let e=qT;return qT=n,e}var JM=Symbol("NotFound");function Mf(n){return n===JM||n?.name==="\u0275NotFound"}var Hd=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},iA=new Hd("21.0.0");var A0="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",at=class extends Error{code;constructor(e,t){super(Lf(e,t)),this.code=e}};function OH(n){return`NG0${Math.abs(n)}`}function Lf(n,e){return`${OH(n)}${e?": "+e:""}`}var Es=globalThis;function Jn(n){for(let e in n)if(n[e]===Jn)return e;throw Error("")}function nO(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Du(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Du).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function sA(n,e){return n?e?`${n} ${e}`:n:e||""}var LH=Jn({__forward_ref__:Jn});function fa(n){return n.__forward_ref__=fa,n.toString=function(){return Du(this())},n}function cs(n){return oA(n)?n():n}function oA(n){return typeof n=="function"&&n.hasOwnProperty(LH)&&n.__forward_ref__===fa}function gt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function pa(n){return{providers:n.providers||[],imports:n.imports||[]}}function bm(n){return FH(n,S0)}function aA(n){return bm(n)!==null}function FH(n,e){return n.hasOwnProperty(e)&&n[e]||null}function VH(n){let e=n?.[S0]??null;return e||null}function $T(n){return n&&n.hasOwnProperty(E0)?n[E0]:null}var S0=Jn({\u0275prov:Jn}),E0=Jn({\u0275inj:Jn}),wt=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=gt({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function cA(n){return n&&!!n.\u0275providers}var uA=Jn({\u0275cmp:Jn}),lA=Jn({\u0275dir:Jn}),dA=Jn({\u0275pipe:Jn}),hA=Jn({\u0275mod:Jn}),ym=Jn({\u0275fac:Jn}),Qd=Jn({__NG_ELEMENT_ID__:Jn}),ZM=Jn({__NG_ENV_ID__:Jn});function Ol(n){return typeof n=="string"?n:n==null?"":String(n)}function rO(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ol(n)}var iO=Jn({ngErrorCode:Jn}),BH=Jn({ngErrorMessage:Jn}),jH=Jn({ngTokenPath:Jn});function fA(n,e){return sO("",-200,e)}function C0(n,e){throw new at(-201,!1)}function sO(n,e,t){let r=new at(e,n);return r[iO]=e,r[BH]=n,t&&(r[jH]=t),r}function UH(n){return n[iO]}var HT;function oO(){return HT}function Ks(n){let e=HT;return HT=n,e}function pA(n,e,t){let r=bm(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;C0(n,"Injector")}var qH={},$d=qH,GT="__NG_DI_FLAG__",WT=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Gd(t)||0;try{return this.injector.get(e,r&8?null:$d,r)}catch(i){if(Mf(i))return i;throw i}}};function zH(n,e=0){let t=w0();if(t===void 0)throw new at(-203,!1);if(t===null)return pA(n,void 0,e);{let r=$H(e),i=t.retrieve(n,r);if(Mf(i)){if(r.optional)return null;throw i}return i}}function Bt(n,e=0){return(oO()||zH)(cs(n),e)}function ze(n,e){return Bt(n,Gd(e))}function Gd(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function $H(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function KT(n){let e=[];for(let t=0;t<n.length;t++){let r=cs(n[t]);if(Array.isArray(r)){if(r.length===0)throw new at(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],c=HH(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(Bt(i,s))}else e.push(Bt(r))}return e}function aO(n,e){return n[GT]=e,n.prototype[GT]=e,n}function HH(n){return n[GT]}function Pl(n,e){let t=n.hasOwnProperty(ym);return t?n[ym]:null}function cO(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function uO(n){return n.flat(Number.POSITIVE_INFINITY)}function D0(n,e){n.forEach(t=>Array.isArray(t)?D0(t,e):e(t))}function gA(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Em(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function lO(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function dO(n,e,t){let r=Ff(n,e);return r>=0?n[r|1]=t:(r=~r,lO(n,r,e,t)),r}function x0(n,e){let t=Ff(n,e);if(t>=0)return n[t|1]}function Ff(n,e){return GH(n,e,1)}function GH(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Ll={},Oo=[],Vf=new wt(""),mA=new wt("",-1),yA=new wt(""),vm=class{get(e,t=$d){if(t===$d){let i=sO("",-201);throw i.name="\u0275NotFound",i}return t}};function vA(n){return n[hA]||null}function Fl(n){return n[uA]||null}function _A(n){return n[lA]||null}function hO(n){return n[dA]||null}function xu(n){return{\u0275providers:n}}function N0(...n){return{\u0275providers:wA(!0,n),\u0275fromNgModule:!0}}function wA(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return D0(e,o=>{let a=o;I0(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&fO(i,s),t}function fO(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];bA(i,s=>{e(s,r)})}}function I0(n,e,t,r){if(n=cs(n),!n)return!1;let i=null,s=$T(n),o=!s&&Fl(n);if(!s&&!o){let c=n.ngModule;if(s=$T(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of c)I0(u,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{D0(s.imports,l=>{I0(l,e,t,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&fO(u,e)}if(!a){let u=Pl(i)||(()=>new i);e({provide:i,useFactory:u,deps:Oo},i),e({provide:yA,useValue:i,multi:!0},i),e({provide:Vf,useValue:()=>Bt(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let u=n;bA(c,l=>{e(l,u)})}}else return!1;return i!==n&&n.providers!==void 0}function bA(n,e){for(let t of n)cA(t)&&(t=t.\u0275providers),Array.isArray(t)?bA(t,e):e(t)}var WH=Jn({provide:String,useValue:Jn});function pO(n){return n!==null&&typeof n=="object"&&WH in n}function KH(n){return!!(n&&n.useExisting)}function QH(n){return!!(n&&n.useFactory)}function Wd(n){return typeof n=="function"}function gO(n){return!!n.useClass}var Im=new wt(""),b0={},XM={},zT;function Tm(){return zT===void 0&&(zT=new vm),zT}var Oi=class{},Kd=class extends Oi{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,YT(e,o=>this.processProvider(o)),this.records.set(mA,Of(void 0,this)),i.has("environment")&&this.records.set(Oi,Of(void 0,this));let s=this.records.get(Im);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(yA,Oo,{self:!0}))}retrieve(e,t){let r=Gd(t)||0;try{return this.get(e,$d,r)}catch(i){if(Mf(i))return i;throw i}}destroy(){mm(this),this._destroyed=!0;let e=ln(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ln(e)}}onDestroy(e){return mm(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){mm(this);let t=Rc(this),r=Ks(void 0),i;try{return e()}finally{Rc(t),Ks(r)}}get(e,t=$d,r){if(mm(this),e.hasOwnProperty(ZM))return e[ZM](this);let i=Gd(r),s,o=Rc(this),a=Ks(void 0);try{if(!(i&4)){let u=this.records.get(e);if(u===void 0){let l=eG(e)&&bm(e);l&&this.injectableDefInScope(l)?u=Of(QT(e),b0):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,i)}let c=i&2?Tm():this.parent;return t=i&8&&t===$d?null:t,c.get(e,t)}catch(c){let u=UH(c);throw u===-200||u===-201?new at(u,null):c}finally{Ks(a),Rc(o)}}resolveInjectorInitializers(){let e=ln(null),t=Rc(this),r=Ks(void 0),i;try{let s=this.get(Vf,Oo,{self:!0});for(let o of s)o()}finally{Rc(t),Ks(r),ln(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Du(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=cs(e);let t=Wd(e)?e:cs(e&&e.provide),r=JH(e);if(!Wd(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Of(void 0,b0,!0),i.factory=()=>KT(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=ln(null);try{if(t.value===XM)throw fA(Du(e));return t.value===b0&&(t.value=XM,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&XH(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ln(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=cs(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function QT(n){let e=bm(n),t=e!==null?e.factory:Pl(n);if(t!==null)return t;if(n instanceof wt)throw new at(204,!1);if(n instanceof Function)return YH(n);throw new at(204,!1)}function YH(n){if(n.length>0)throw new at(204,!1);let t=VH(n);return t!==null?()=>t.factory(n):()=>new n}function JH(n){if(pO(n))return Of(void 0,n.useValue);{let e=EA(n);return Of(e,b0)}}function EA(n,e,t){let r;if(Wd(n)){let i=cs(n);return Pl(i)||QT(i)}else if(pO(n))r=()=>cs(n.useValue);else if(QH(n))r=()=>n.useFactory(...KT(n.deps||[]));else if(KH(n))r=(i,s)=>Bt(cs(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=cs(n&&(n.useClass||n.provide));if(ZH(n))r=()=>new i(...KT(n.deps));else return Pl(i)||QT(i)}return r}function mm(n){if(n.destroyed)throw new at(205,!1)}function Of(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function ZH(n){return!!n.deps}function XH(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function eG(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function YT(n,e){for(let t of n)Array.isArray(t)?YT(t,e):t&&cA(t)?YT(t.\u0275providers,e):e(t)}function Li(n,e){let t;n instanceof Kd?(mm(n),t=n):t=new WT(n);let r,i=Rc(t),s=Ks(void 0);try{return e()}finally{Rc(i),Ks(s)}}function IA(){return oO()!==void 0||w0()!=null}var Ha=0,Qt=1,Jt=2,Wi=3,ga=4,ma=5,Am=6,Bf=7,Is=8,Vl=9,kc=10,jr=11,jf=12,TA=13,Yd=14,ya=15,Bl=16,Jd=17,Mc=18,Sm=19,AA=20,Cu=21,R0=22,Cm=23,Lo=24,Zd=25,Dm=26,Qs=27,mO=1;var jl=7,xm=8,Xd=9,Ys=10;function Oc(n){return Array.isArray(n)&&typeof n[mO]=="object"}function Ga(n){return Array.isArray(n)&&n[mO]===!0}function SA(n){return(n.flags&4)!==0}function Ul(n){return n.componentOffset>-1}function Nm(n){return(n.flags&1)===1}function Lc(n){return!!n.template}function Uf(n){return(n[Jt]&512)!==0}function eh(n){return(n[Jt]&256)===256}var yO="svg",vO="math";function va(n){for(;Array.isArray(n);)n=n[Ha];return n}function CA(n,e){return va(e[n])}function Wa(n,e){return va(e[n.index])}function P0(n,e){return n.data[e]}function _O(n,e){return n[e]}function DA(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function _a(n,e){let t=e[n];return Oc(t)?t:t[Ha]}function wO(n){return(n[Jt]&4)===4}function k0(n){return(n[Jt]&128)===128}function bO(n){return Ga(n[Wi])}function Rm(n,e){return e==null?null:n[e]}function xA(n){n[Jd]=0}function NA(n){n[Jt]&1024||(n[Jt]|=1024,k0(n)&&qf(n))}function EO(n,e){for(;n>0;)e=e[Yd],n--;return e}function Pm(n){return!!(n[Jt]&9216||n[Lo]?.dirty)}function M0(n){n[kc].changeDetectionScheduler?.notify(8),n[Jt]&64&&(n[Jt]|=1024),Pm(n)&&qf(n)}function qf(n){n[kc].changeDetectionScheduler?.notify(0);let e=kl(n);for(;e!==null&&!(e[Jt]&8192||(e[Jt]|=8192,!k0(e)));)e=kl(e)}function RA(n,e){if(eh(n))throw new at(911,!1);n[Cu]===null&&(n[Cu]=[]),n[Cu].push(e)}function IO(n,e){if(n[Cu]===null)return;let t=n[Cu].indexOf(e);t!==-1&&n[Cu].splice(t,1)}function kl(n){let e=n[Wi];return Ga(e)?e[Wi]:e}function PA(n){return n[Bf]??=[]}function kA(n){return n.cleanup??=[]}function TO(n,e,t,r){let i=PA(e);i.push(t),n.firstCreatePass&&kA(n).push(r,i.length-1)}var hn={lFrame:UO(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var JT=!1;function AO(){return hn.lFrame.elementDepthCount}function SO(){hn.lFrame.elementDepthCount++}function CO(){hn.lFrame.elementDepthCount--}function MA(){return hn.bindingsEnabled}function DO(){return hn.skipHydrationRootTNode!==null}function xO(n){return hn.skipHydrationRootTNode===n}function NO(){hn.skipHydrationRootTNode=null}function Rn(){return hn.lFrame.lView}function Ts(){return hn.lFrame.tView}function rr(n){return hn.lFrame.contextLView=n,n[Is]}function ir(n){return hn.lFrame.contextLView=null,n}function As(){let n=OA();for(;n!==null&&n.type===64;)n=n.parent;return n}function OA(){return hn.lFrame.currentTNode}function RO(){let n=hn.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function zf(n,e){let t=hn.lFrame;t.currentTNode=n,t.isParent=e}function LA(){return hn.lFrame.isParent}function PO(){hn.lFrame.isParent=!1}function FA(){return JT}function VA(n){let e=JT;return JT=n,e}function kO(){let n=hn.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function MO(){return hn.lFrame.bindingIndex}function OO(n){return hn.lFrame.bindingIndex=n}function $f(){return hn.lFrame.bindingIndex++}function BA(n){let e=hn.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function LO(){return hn.lFrame.inI18n}function FO(n,e){let t=hn.lFrame;t.bindingIndex=t.bindingRootIndex=n,O0(e)}function VO(){return hn.lFrame.currentDirectiveIndex}function O0(n){hn.lFrame.currentDirectiveIndex=n}function BO(n){let e=hn.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function jA(){return hn.lFrame.currentQueryIndex}function L0(n){hn.lFrame.currentQueryIndex=n}function tG(n){let e=n[Qt];return e.type===2?e.declTNode:e.type===1?n[ma]:null}function UA(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=tG(s),i===null||(s=s[Yd],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=hn.lFrame=jO();return r.currentTNode=e,r.lView=n,!0}function F0(n){let e=jO(),t=n[Qt];hn.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function jO(){let n=hn.lFrame,e=n===null?null:n.child;return e===null?UO(n):e}function UO(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function qO(){let n=hn.lFrame;return hn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var qA=qO;function V0(){let n=qO();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function zO(n){return(hn.lFrame.contextLView=EO(n,hn.lFrame.contextLView))[Is]}function ql(){return hn.lFrame.selectedIndex}function zl(n){hn.lFrame.selectedIndex=n}function B0(){let n=hn.lFrame;return P0(n.tView,n.selectedIndex)}function $O(){return hn.lFrame.currentNamespace}var HO=!0;function j0(){return HO}function U0(n){HO=n}function ZT(n,e=null,t=null,r){let i=zA(n,e,t,r);return i.resolveInjectorInitializers(),i}function zA(n,e=null,t=null,r,i=new Set){let s=[t||Oo,N0(n)];return r=r||(typeof n=="object"?void 0:Du(n)),new Kd(s,e||Tm(),r||null,i)}var Ki=class n{static THROW_IF_NOT_FOUND=$d;static NULL=new vm;static create(e,t){if(Array.isArray(e))return ZT({name:""},t,e,"");{let r=e.name??"";return ZT({name:r},e.parent,e.providers,r)}}static \u0275prov=gt({token:n,providedIn:"any",factory:()=>Bt(mA)});static __NG_ELEMENT_ID__=-1},Js=new wt(""),Ka=(()=>{class n{static __NG_ELEMENT_ID__=nG;static __NG_ENV_ID__=t=>t}return n})(),XT=class extends Ka{_lView;constructor(e){super(),this._lView=e}get destroyed(){return eh(this._lView)}onDestroy(e){let t=this._lView;return RA(t,e),()=>IO(t,e)}};function nG(){return new XT(Rn())}var GO=!1,Nu=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new di(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new dn(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=gt({token:n,providedIn:"root",factory:()=>new n})}return n})(),eA=class extends li{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,IA()&&(this.destroyRef=ze(Ka,{optional:!0})??void 0,this.pendingTasks=ze(Nu,{optional:!0})??void 0)}emit(e){let t=ln(null);try{super.next(e)}finally{ln(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Mi&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},fi=eA;function T0(...n){}function $A(n){let e,t;function r(){n=T0;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function HA(n){return queueMicrotask(()=>n()),()=>{n=T0}}var GA="isAngularZone",_m=GA+"_ID",rG=0,Ar=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new fi(!1);onMicrotaskEmpty=new fi(!1);onStable=new fi(!1);onError=new fi(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=GO}=e;if(typeof Zone>"u")throw new at(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,oG(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(GA)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new at(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new at(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,iG,T0,T0);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},iG={};function WA(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function sG(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){$A(()=>{n.callbackScheduled=!1,tA(n),n.isCheckStableRunning=!0,WA(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),tA(n)}function oG(n){let e=()=>{sG(n)},t=rG++;n._inner=n._inner.fork({name:"angular",properties:{[GA]:!0,[_m]:t,[_m+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(aG(c))return r.invokeTask(s,o,a,c);try{return eO(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),tO(n)}},onInvoke:(r,i,s,o,a,c,u)=>{try{return eO(n),r.invoke(s,o,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!cG(c)&&e(),tO(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,tA(n),WA(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function tA(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function eO(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function tO(n){n._nesting--,WA(n)}var wm=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new fi;onMicrotaskEmpty=new fi;onStable=new fi;onError=new fi;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function aG(n){return WO(n,"__ignore_ng_zone__")}function cG(n){return WO(n,"__scheduler_tick__")}function WO(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Pc=class{_console=console;handleError(e){this._console.error("ERROR",e)}},wa=new wt("",{factory:()=>{let n=ze(Ar),e=ze(Oi),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(Pc),t.handleError(r))})}}}),KO={provide:Vf,useValue:()=>{let n=ze(Pc,{optional:!0})},multi:!0};function us(n,e){let[t,r,i]=TT(n,e?.equal),s=t,o=s[Gs];return s.set=r,s.update=i,s.asReadonly=QO.bind(s),s}function QO(){let n=this[Gs];if(n.readonlyFn===void 0){let e=()=>this();e[Gs]=n,n.readonlyFn=e}return n.readonlyFn}var q0=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=uG}return n})();function uG(){return new q0(Rn(),As())}var Ml=class{},km=new wt("",{factory:()=>!0});var KA=new wt(""),Hf=(()=>{class n{internalPendingTasks=ze(Nu);scheduler=ze(Ml);errorHandler=ze(wa);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=gt({token:n,providedIn:"root",factory:()=>new n})}return n})(),QA=(()=>{class n{static \u0275prov=gt({token:n,providedIn:"root",factory:()=>new nA})}return n})(),nA=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},rA=class{[Gs];constructor(e){this[Gs]=e}destroy(){this[Gs].destroy()}};function Fi(n){return AT(n)}function Zf(n){return{toString:n}.toString()}var z0="__parameters__";function yG(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function vG(n,e,t){return Zf(()=>{let r=yG(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,u,l){let p=c.hasOwnProperty(z0)?c[z0]:Object.defineProperty(c,z0,{value:[]})[z0];for(;p.length<=l;)p.push(null);return(p[l]=p[l]||[]).push(o),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Ru=aO(vG("Optional"),8);function _G(n){return typeof n=="function"}function AL(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Y0=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},Bc=(()=>{let n=()=>SL;return n.ngInherit=!0,n})();function SL(n){return n.type.prototype.ngOnChanges&&(n.setInput=bG),wG}function wG(){let n=DL(this),e=n?.current;if(e){let t=n.previous;if(t===Ll)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function bG(n,e,t,r,i){let s=this.declaredInputs[r],o=DL(n)||EG(n,{previous:Ll,current:null}),a=o.current||(o.current={}),c=o.previous,u=c[s];a[s]=new Y0(u&&u.currentValue,t,c===Ll),AL(n,e,i,t)}var CL="__ngSimpleChanges__";function DL(n){return n[CL]||null}function EG(n,e){return n[CL]=e}var YO=[];var sr=function(n,e=null,t){for(let r=0;r<YO.length;r++){let i=YO[r];i(n,e,t)}};function IG(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=SL(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function xL(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),l!=null&&(n.destroyHooks??=[]).push(t,l)}}function G0(n,e,t){NL(n,e,3,t)}function W0(n,e,t,r){(n[Jt]&3)===t&&NL(n,e,t,r)}function YA(n,e){let t=n[Jt];(t&3)===e&&(t&=16383,t+=1,n[Jt]=t)}function NL(n,e,t,r){let i=r!==void 0?n[Jd]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Jd]+=65536),(a<s||s==-1)&&(TG(n,t,e,c),n[Jd]=(n[Jd]&4294901760)+c+2),c++}function JO(n,e){sr(4,n,e);let t=ln(null);try{e.call(n)}finally{ln(t),sr(5,n,e)}}function TG(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[Jt]>>14<n[Jd]>>16&&(n[Jt]&3)===e&&(n[Jt]+=16384,JO(a,s)):JO(a,s)}var Wf=-1,nh=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function AG(n){return(n.flags&8)!==0}function SG(n){return(n.flags&16)!==0}function CG(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];DG(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function RL(n){return n===3||n===4||n===6}function DG(n){return n.charCodeAt(0)===64}function Fm(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?ZO(n,t,i,null,e[++r]):ZO(n,t,i,null,null))}}return n}function ZO(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function PL(n){return n!==Wf}function J0(n){return n&32767}function xG(n){return n>>16}function Z0(n,e){let t=xG(n),r=e;for(;t>0;)r=r[Yd],t--;return r}var aS=!0;function X0(n){let e=aS;return aS=n,e}var NG=256,kL=NG-1,ML=5,RG=0,Fc={};function PG(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Qd)&&(r=t[Qd]),r==null&&(r=t[Qd]=RG++);let i=r&kL,s=1<<i;e.data[n+(i>>ML)]|=s}function ew(n,e){let t=OL(n,e);if(t!==-1)return t;let r=e[Qt];r.firstCreatePass&&(n.injectorIndex=e.length,JA(r.data,n),JA(e,null),JA(r.blueprint,null));let i=NS(n,e),s=n.injectorIndex;if(PL(i)){let o=J0(i),a=Z0(i,e),c=a[Qt].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function JA(n,e){n.push(0,0,0,0,0,0,0,0,e)}function OL(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function NS(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=jL(i),r===null)return Wf;if(t++,i=i[Yd],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Wf}function cS(n,e,t){PG(n,e,t)}function kG(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(RL(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function LL(n,e,t){if(t&8||n!==void 0)return n;C0(e,"NodeInjector")}function FL(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Vl],s=Ks(void 0);try{return i?i.get(e,r,t&8):pA(e,r,t&8)}finally{Ks(s)}}return LL(r,e,t)}function VL(n,e,t,r=0,i){if(n!==null){if(e[Jt]&2048&&!(r&2)){let o=FG(n,e,t,r,Fc);if(o!==Fc)return o}let s=BL(n,e,t,r,Fc);if(s!==Fc)return s}return FL(e,t,r,i)}function BL(n,e,t,r,i){let s=OG(t);if(typeof s=="function"){if(!UA(e,n,r))return r&1?LL(i,t,r):FL(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&8))C0(t);else return o}finally{qA()}}else if(typeof s=="number"){let o=null,a=OL(n,e),c=Wf,u=r&1?e[ya][ma]:null;for((a===-1||r&4)&&(c=a===-1?NS(n,e):e[a+8],c===Wf||!eL(r,!1)?a=-1:(o=e[Qt],a=J0(c),e=Z0(c,e)));a!==-1;){let l=e[Qt];if(XO(s,a,l.data)){let p=MG(a,e,t,o,r,u);if(p!==Fc)return p}c=e[a+8],c!==Wf&&eL(r,e[Qt].data[a+8]===u)&&XO(s,a,e)?(o=l,a=J0(c),e=Z0(c,e)):a=-1}}return i}function MG(n,e,t,r,i,s){let o=e[Qt],a=o.data[n+8],c=r==null?Ul(a)&&aS:r!=o&&(a.type&3)!==0,u=i&1&&s===a,l=K0(a,o,t,c,u);return l!==null?Vm(e,o,l,a,i):Fc}function K0(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,u=n.directiveEnd,l=s>>20,p=r?a:a+l,y=i?a+l:u;for(let g=p;g<y;g++){let D=o[g];if(g<c&&t===D||g>=c&&D.type===t)return g}if(i){let g=o[c];if(g&&Lc(g)&&g.type===t)return c}return null}function Vm(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof nh){let a=s;if(a.resolving){let g=rO(o[t]);throw fA(g)}let c=X0(a.canSeeViewProviders);a.resolving=!0;let u=o[t].type||o[t],l,p=a.injectImpl?Ks(a.injectImpl):null,y=UA(n,r,0);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&IG(t,o[t],e)}finally{p!==null&&Ks(p),X0(c),a.resolving=!1,qA()}}return s}function OG(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Qd)?n[Qd]:void 0;return typeof e=="number"?e>=0?e&kL:LG:e}function XO(n,e,t){let r=1<<n;return!!(t[e+(n>>ML)]&r)}function eL(n,e){return!(n&2)&&!(n&1&&e)}var th=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return VL(this._tNode,this._lView,e,Gd(r),t)}};function LG(){return new th(As(),Rn())}function ba(n){return Zf(()=>{let e=n.prototype.constructor,t=e[ym]||uS(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[ym]||uS(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function uS(n){return oA(n)?()=>{let e=uS(cs(n));return e&&e()}:Pl(n)}function FG(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[Jt]&2048&&!Uf(o);){let a=BL(s,o,t,r|2,Fc);if(a!==Fc)return a;let c=s.parent;if(!c){let u=o[AA];if(u){let l=u.get(t,Fc,r);if(l!==Fc)return l}c=jL(o),o=o[Yd]}s=c}return i}function jL(n){let e=n[Qt],t=e.type;return t===2?e.declTNode:t===1?n[ma]:null}function qm(n){return kG(As(),n)}function VG(){return Xf(As(),Rn())}function Xf(n,e){return new po(Wa(n,e))}var po=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=VG}return n})();function BG(n){return n instanceof po?n.nativeElement:n}function jG(){return this._results[Symbol.iterator]()}var tw=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new li}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=uO(e);(this._changesDetected=!cO(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=jG};function UL(n){return(n.flags&128)===128}var RS=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(RS||{}),qL=new Map,UG=0;function qG(){return UG++}function zG(n){qL.set(n[Sm],n)}function lS(n){qL.delete(n[Sm])}var tL="__ngContext__";function Kf(n,e){Oc(e)?(n[tL]=e[Sm],zG(e)):n[tL]=e}function zL(n){return HL(n[jf])}function $L(n){return HL(n[ga])}function HL(n){for(;n!==null&&!Ga(n);)n=n[ga];return n}var dS;function PS(n){dS=n}function GL(){if(dS!==void 0)return dS;if(typeof document<"u")return document;throw new at(210,!1)}var dw=new wt("",{factory:()=>$G}),$G="ng";var hw=new wt(""),oh=new wt("",{providedIn:"platform",factory:()=>"unknown"});var fw=new wt("",{factory:()=>GL().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var WL=!1,KL=new wt("",{factory:()=>WL});var HG=(n,e,t,r)=>{};function GG(n,e,t,r){HG(n,e,t,r)}function kS(n){return(n.flags&32)===32}var WG=()=>null;function QL(n,e,t=!1){return WG(n,e,t)}function YL(n,e){let t=n.contentQueries;if(t!==null){let r=ln(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];L0(s),a.contentQueries(2,e[o],o)}}}finally{ln(r)}}}function hS(n,e,t){L0(0);let r=ln(null);try{e(n,t)}finally{ln(r)}}function JL(n,e,t){if(SA(e)){let r=ln(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{ln(r)}}}var Ya=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(Ya||{});var $0;function KG(){if($0===void 0&&($0=null,Es.trustedTypes))try{$0=Es.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return $0}function nL(n){return KG()?.createScriptURL(n)||n}var nw=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${A0})`}};function pw(n){return n instanceof nw?n.changingThisBreaksApplicationSecurity:n}function MS(n,e){let t=ZL(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${A0})`)}return t===e}function ZL(n){return n instanceof nw&&n.getTypeName()||null}var QG=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function XL(n){return n=String(n),n.match(QG)?n:"unsafe:"+n}var gw=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(gw||{});function Wl(n){let e=tF();return e?e.sanitize(gw.URL,n)||"":MS(n,"URL")?pw(n):XL(Ol(n))}function eF(n){let e=tF();if(e)return nL(e.sanitize(gw.RESOURCE_URL,n)||"");if(MS(n,"ResourceURL"))return nL(pw(n));throw new at(904,!1)}function YG(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?eF:Wl}function OS(n,e,t){return YG(e,t)(n)}function tF(){let n=Rn();return n&&n[kc].sanitizer}function nF(n){return n instanceof Function?n():n}function JG(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var rF="ng-template";function ZG(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&JG(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(LS(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function LS(n){return n.type===4&&n.value!==rF}function XG(n,e,t){let r=n.type===4&&!t?rF:n.value;return e===r}function eW(n,e,t){let r=4,i=n.attrs,s=i!==null?rW(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Qa(r)&&!Qa(c))return!1;if(o&&Qa(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!XG(n,c,t)||c===""&&e.length===1){if(Qa(r))return!1;o=!0}}else if(r&8){if(i===null||!ZG(n,i,c,t)){if(Qa(r))return!1;o=!0}}else{let u=e[++a],l=tW(c,i,LS(n),t);if(l===-1){if(Qa(r))return!1;o=!0;continue}if(u!==""){let p;if(l>s?p="":p=i[l+1].toLowerCase(),r&2&&u!==p){if(Qa(r))return!1;o=!0}}}}return Qa(r)||o}function Qa(n){return(n&1)===0}function tW(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return iW(e,n)}function nW(n,e,t=!1){for(let r=0;r<e.length;r++)if(eW(n,e[r],t))return!0;return!1}function rW(n){for(let e=0;e<n.length;e++){let t=n[e];if(RL(t))return e}return n.length}function iW(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function rL(n,e){return n?":not("+e.trim()+")":e}function sW(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Qa(o)&&(e+=rL(s,i),i=""),r=o,s=s||!Qa(r);t++}return i!==""&&(e+=rL(s,i)),e}function oW(n){return n.map(sW).join(",")}function aW(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Qa(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var Ea={};function cW(n,e){return n.createText(e)}function uW(n,e,t){n.setValue(e,t)}function iF(n,e,t){return n.createElement(e,t)}function rw(n,e,t,r,i){n.insertBefore(e,t,r,i)}function sF(n,e,t){n.appendChild(e,t)}function iL(n,e,t,r,i){r!==null?rw(n,e,t,r,i):sF(n,e,t)}function lW(n,e,t,r){n.removeChild(null,e,t,r)}function dW(n,e,t){n.setAttribute(e,"style",t)}function hW(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function oF(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&CG(n,e,r),i!==null&&hW(n,e,i),s!==null&&dW(n,e,s)}function FS(n,e,t,r,i,s,o,a,c,u,l){let p=Qs+r,y=p+i,g=fW(p,y),D=typeof u=="function"?u():u;return g[Qt]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:D,incompleteFirstPass:!1,ssrId:l}}function fW(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ea);return t}function pW(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=FS(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function VS(n,e,t,r,i,s,o,a,c,u,l){let p=e.blueprint.slice();return p[Ha]=i,p[Jt]=r|4|128|8|64|1024,(u!==null||n&&n[Jt]&2048)&&(p[Jt]|=2048),xA(p),p[Wi]=p[Yd]=n,p[Is]=t,p[kc]=o||n&&n[kc],p[jr]=a||n&&n[jr],p[Vl]=c||n&&n[Vl]||null,p[ma]=s,p[Sm]=qG(),p[Am]=l,p[AA]=u,p[ya]=e.type==2?n[ya]:p,p}function gW(n,e,t){let r=Wa(e,n),i=pW(t),s=n[kc].rendererFactory,o=BS(n,VS(n,i,null,aF(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function aF(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function cF(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function BS(n,e){return n[jf]?n[TA][ga]=e:n[jf]=e,n[TA]=e,e}function We(n=1){uF(Ts(),Rn(),ql()+n,!1)}function uF(n,e,t,r){if(!r)if((e[Jt]&3)===3){let s=n.preOrderCheckHooks;s!==null&&G0(e,s,t)}else{let s=n.preOrderHooks;s!==null&&W0(e,s,0,t)}zl(t)}var mw=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(mw||{});function fS(n,e,t,r){let i=ln(null);try{let[s,o,a]=n.inputs[t],c=null;(o&mw.SignalBased)!==0&&(c=e[s][Gs]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,s):AL(e,c,s,r)}finally{ln(i)}}var Vc=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Vc||{}),mW;function jS(n,e){return mW(n,e)}var Qf=new Set,yw=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(yw||{}),ah=new wt(""),sL=new Set;function vw(n){sL.has(n)||(sL.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var US=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=gt({token:n,providedIn:"root",factory:()=>new n})}return n})(),lF=[0,1,2,3],dF=(()=>{class n{ngZone=ze(Ar);scheduler=ze(Ml);errorHandler=ze(Pc,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){ze(ah,{optional:!0})}execute(){let t=this.sequences.size>0;t&&sr(16),this.executing=!0;for(let r of lF)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&sr(17)}register(t){let{view:r}=t;r!==void 0?((r[Zd]??=[]).push(t),qf(r),r[Jt]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(yw.AFTER_NEXT_RENDER,t):t()}static \u0275prov=gt({token:n,providedIn:"root",factory:()=>new n})}return n})(),iw=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,s,o=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Zd];e&&(this.view[Zd]=e.filter(t=>t!==this))}};function _w(n,e){let t=e?.injector??ze(Ki);return vw("NgAfterNextRender"),vW(n,t,e,!0)}function yW(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function vW(n,e,t,r){let i=e.get(US);i.impl??=e.get(dF);let s=e.get(ah,null,{optional:!0}),o=t?.manualCleanup!==!0?e.get(Ka):null,a=e.get(q0,null,{optional:!0}),c=new iw(i.impl,yW(n),a?.view,r,o,s?.snapshot(null));return i.impl.register(c),c}var _W=new wt("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function hF(n,e,t){let r=n.get(_W);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function wW(n,e){for(let[t,r]of e)hF(n,r.animateFns)}function oL(n,e,t,r){let i=n?.[Dm]?.enter;e!==null&&i&&i.has(t.index)&&wW(r,i)}function Gf(n,e,t,r,i,s,o,a){if(i!=null){let c,u=!1;Ga(i)?c=i:Oc(i)&&(u=!0,i=i[Ha]);let l=va(i);n===0&&r!==null?(oL(a,r,s,t),o==null?sF(e,r,l):rw(e,r,l,o||null,!0)):n===1&&r!==null?(oL(a,r,s,t),rw(e,r,l,o||null,!0)):n===2?aL(a,s,t,p=>{lW(e,l,u,p)}):n===3&&aL(a,s,t,()=>{e.destroyNode(l)}),c!=null&&kW(e,n,t,c,s,r,o)}}function bW(n,e){fF(n,e),e[Ha]=null,e[ma]=null}function EW(n,e,t,r,i,s){r[Ha]=i,r[ma]=e,ww(n,r,t,1,i,s)}function fF(n,e){e[kc].changeDetectionScheduler?.notify(9),ww(n,e,e[jr],2,null,null)}function IW(n){let e=n[jf];if(!e)return ZA(n[Qt],n);for(;e;){let t=null;if(Oc(e))t=e[jf];else{let r=e[Ys];r&&(t=r)}if(!t){for(;e&&!e[ga]&&e!==n;)Oc(e)&&ZA(e[Qt],e),e=e[Wi];e===null&&(e=n),Oc(e)&&ZA(e[Qt],e),t=e&&e[ga]}e=t}}function qS(n,e){let t=n[Xd],r=t.indexOf(e);t.splice(r,1)}function pF(n,e){if(eh(e))return;let t=e[jr];t.destroyNode&&ww(n,e,t,3,null,null),IW(e)}function ZA(n,e){if(eh(e))return;let t=ln(null);try{e[Jt]&=-129,e[Jt]|=256,e[Lo]&&um(e[Lo]),SW(n,e),AW(n,e),e[Qt].type===1&&e[jr].destroy();let r=e[Bl];if(r!==null&&Ga(e[Wi])){r!==e[Wi]&&qS(r,e);let i=e[Mc];i!==null&&i.detachView(n)}lS(e)}finally{ln(t)}}function aL(n,e,t,r){let i=n?.[Dm];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Qf.add(n),hF(t,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),a=[];if(o){for(let c=0;c<o.animateFns.length;c++){let u=o.animateFns[c],{promise:l}=u();a.push(l)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),TW(n,r)}else n&&Qf.delete(n),r(!1)},i)}function TW(n,e){let t=n[Dm]?.running;if(t){t.then(()=>{n[Dm].running=void 0,Qf.delete(n),e(!0)});return}e(!1)}function AW(n,e){let t=n.cleanup,r=e[Bf];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[Bf]=null);let i=e[Cu];if(i!==null){e[Cu]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[Cm];if(s!==null){e[Cm]=null;for(let o of s)o.destroy()}}function SW(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof nh)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];sr(4,a,c);try{c.call(a)}finally{sr(5,a,c)}}else{sr(4,i,s);try{s.call(i)}finally{sr(5,i,s)}}}}}function CW(n,e,t){return DW(n,e.parent,t)}function DW(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Ha];if(Ul(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Ya.None||i===Ya.Emulated)return null}return Wa(r,t)}function xW(n,e,t){return RW(n,e,t)}function NW(n,e,t){return n.type&40?Wa(n,t):null}var RW=NW,cL;function zS(n,e,t,r){let i=CW(n,r,e),s=e[jr],o=r.parent||e[ma],a=xW(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)iL(s,i,t[c],a,!1);else iL(s,i,t,a,!1);cL!==void 0&&cL(s,r,e,t,i)}function Om(n,e){if(e!==null){let t=e.type;if(t&3)return Wa(e,n);if(t&4)return pS(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Om(n,r);{let i=n[e.index];return Ga(i)?pS(-1,i):va(i)}}else{if(t&128)return Om(n,e.next);if(t&32)return jS(e,n)()||va(n[e.index]);{let r=gF(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=kl(n[ya]);return Om(i,r)}else return Om(n,e.next)}}}return null}function gF(n,e){if(e!==null){let r=n[ya][ma],i=e.projection;return r.projection[i]}return null}function pS(n,e){let t=Ys+n+1;if(t<e.length){let r=e[t],i=r[Qt].firstChild;if(i!==null)return Om(r,i)}return e[jl]}function $S(n,e,t,r,i,s,o){for(;t!=null;){let a=r[Vl];if(t.type===128){t=t.next;continue}let c=r[t.index],u=t.type;if(o&&e===0&&(c&&Kf(va(c),r),t.flags|=2),!kS(t))if(u&8)$S(n,e,t.child,r,i,s,!1),Gf(e,n,a,i,c,t,s,r);else if(u&32){let l=jS(t,r),p;for(;p=l();)Gf(e,n,a,i,p,t,s,r);Gf(e,n,a,i,c,t,s,r)}else u&16?PW(n,e,r,t,i,s):Gf(e,n,a,i,c,t,s,r);t=o?t.projectionNext:t.next}}function ww(n,e,t,r,i,s){$S(t,r,n.firstChild,e,i,s,!1)}function PW(n,e,t,r,i,s){let o=t[ya],c=o[ma].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];Gf(e,n,t[Vl],i,l,r,s,t)}else{let u=c,l=o[Wi];UL(r)&&(u.flags|=128),$S(n,e,u,l,i,s,!0)}}function kW(n,e,t,r,i,s,o){let a=r[jl],c=va(r);a!==c&&Gf(e,n,t,s,a,i,o);for(let u=Ys;u<r.length;u++){let l=r[u];ww(l[Qt],l,n,e,s,a)}}function MW(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Vc.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Vc.Important),n.setStyle(t,r,i,s))}}function mF(n,e,t,r,i){let s=ql(),o=r&2;try{zl(-1),o&&e.length>Qs&&uF(n,e,Qs,!1),sr(o?2:0,i,t),t(r,i)}finally{zl(s),sr(o?3:1,i,t)}}function HS(n,e,t){UW(n,e,t),(t.flags&64)===64&&qW(n,e,t)}function yF(n,e,t=Wa){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function OW(n,e,t,r){let s=r.get(KL,WL)||t===Ya.ShadowDom||t===Ya.ExperimentalIsolatedShadowDom,o=n.selectRootElement(e,s);return LW(o),o}function LW(n){FW(n)}var FW=()=>null;function VW(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function vF(n,e,t,r,i,s){let o=e[Qt];if(GS(n,o,e,t,r)){Ul(n)&&jW(e,n.index);return}n.type&3&&(t=VW(t)),BW(n,e,t,r,i,s)}function BW(n,e,t,r,i,s){if(n.type&3){let o=Wa(n,e);r=s!=null?s(r,n.value||"",t):r,i.setProperty(o,t,r)}else n.type&12}function jW(n,e){let t=_a(e,n);t[Jt]&16||(t[Jt]|=64)}function UW(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Ul(t)&&gW(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||ew(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],c=Vm(e,n,o,t);if(Kf(c,e),s!==null&&GW(e,o-r,c,a,t,s),Lc(a)){let u=_a(t.index,e);u[Is]=Vm(e,n,o,t)}}}function qW(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=VO();try{zl(s);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];O0(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&zW(c,u)}}finally{zl(-1),O0(o)}}function zW(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function _F(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];nW(e,s.selectors,!1)&&(r??=[],Lc(s)?r.unshift(s):r.push(s))}return r}function $W(n,e,t,r,i,s){let o=Wa(n,e);HW(e[jr],o,s,n.value,t,r,i)}function HW(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?Ol(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function GW(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],u=o[a+1];fS(r,t,c,u)}}function WW(n,e,t,r,i){let s=Qs+t,o=e[Qt],a=i(o,e,n,r,t);e[s]=a,zf(n,!0);let c=n.type===2;return c?(oF(e[jr],a,n),(AO()===0||Nm(n))&&Kf(a,e),SO()):Kf(a,e),j0()&&(!c||!kS(n))&&zS(o,e,a,n),n}function KW(n){let e=n;return LA()?PO():(e=e.parent,zf(e,!1)),e}function QW(n,e){let t=n[Vl];if(!t)return;let r;try{r=t.get(wa,null)}catch{r=null}r?.(e)}function GS(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let u=o[c],l=o[c+1],p=e.data[u];fS(p,t[u],l,i),a=!0}if(s)for(let c of s){let u=t[c],l=e.data[c];fS(l,u,r,i),a=!0}return a}function YW(n,e){let t=_a(e,n),r=t[Qt];JW(r,t);let i=t[Ha];i!==null&&t[Am]===null&&(t[Am]=QL(i,t[Vl])),sr(18),WS(r,t,t[Is]),sr(19,t[Is])}function JW(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function WS(n,e,t){F0(e);try{let r=n.viewQuery;r!==null&&hS(1,r,t);let i=n.template;i!==null&&mF(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Mc]?.finishViewCreation(n),n.staticContentQueries&&YL(n,e),n.staticViewQueries&&hS(2,n.viewQuery,t);let s=n.components;s!==null&&ZW(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Jt]&=-5,V0()}}function ZW(n,e){for(let t=0;t<e.length;t++)YW(n,e[t])}function XW(n,e,t,r){let i=ln(null);try{let s=e.tView,a=n[Jt]&4096?4096:16,c=VS(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[Bl]=u;let l=n[Mc];return l!==null&&(c[Mc]=l.createEmbeddedView(s)),WS(s,c,t),c}finally{ln(i)}}function uL(n,e){return!e||e.firstChild===null||UL(n)}function Bm(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(va(s)),Ga(s)&&wF(s,r);let o=t.type;if(o&8)Bm(n,e,t.child,r);else if(o&32){let a=jS(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=gF(e,t);if(Array.isArray(a))r.push(...a);else{let c=kl(e[ya]);Bm(c[Qt],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function wF(n,e){for(let t=Ys;t<n.length;t++){let r=n[t],i=r[Qt].firstChild;i!==null&&Bm(r[Qt],r,i,e)}n[jl]!==n[Ha]&&e.push(n[jl])}function bF(n){if(n[Zd]!==null){for(let e of n[Zd])e.impl.addSequence(e);n[Zd].length=0}}var EF=[];function eK(n){return n[Lo]??tK(n)}function tK(n){let e=EF.pop()??Object.create(rK);return e.lView=n,e}function nK(n){n.lView[Lo]!==n&&(n.lView=null,EF.push(n))}var rK=Ht(Le({},om),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{qf(n.lView)},consumerOnSignalRead(){this.lView[Lo]=this}});function iK(n){let e=n[Lo]??Object.create(sK);return e.lView=n,e}var sK=Ht(Le({},om),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=kl(n.lView);for(;e&&!IF(e[Qt]);)e=kl(e);e&&NA(e)},consumerOnSignalRead(){this.lView[Lo]=this}});function IF(n){return n.type!==2}function TF(n){if(n[Cm]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Cm])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Jt]&8192)}}var oK=100;function AF(n,e=0){let r=n[kc].rendererFactory,i=!1;i||r.begin?.();try{aK(n,e)}finally{i||r.end?.()}}function aK(n,e){let t=FA();try{VA(!0),gS(n,e);let r=0;for(;Pm(n);){if(r===oK)throw new at(103,!1);r++,gS(n,1)}}finally{VA(t)}}function cK(n,e,t,r){if(eh(e))return;let i=e[Jt],s=!1,o=!1;F0(e);let a=!0,c=null,u=null;s||(IF(n)?(u=eK(e),c=cm(u)):z_()===null?(a=!1,u=iK(e),c=cm(u)):e[Lo]&&(um(e[Lo]),e[Lo]=null));try{xA(e),OO(n.bindingStartIndex),t!==null&&mF(n,e,t,2,r);let l=(i&3)===3;if(!s)if(l){let g=n.preOrderCheckHooks;g!==null&&G0(e,g,null)}else{let g=n.preOrderHooks;g!==null&&W0(e,g,0,null),YA(e,0)}if(o||uK(e),TF(e),SF(e,0),n.contentQueries!==null&&YL(n,e),!s)if(l){let g=n.contentCheckHooks;g!==null&&G0(e,g)}else{let g=n.contentHooks;g!==null&&W0(e,g,1),YA(e,1)}dK(n,e);let p=n.components;p!==null&&DF(e,p,0);let y=n.viewQuery;if(y!==null&&hS(2,y,r),!s)if(l){let g=n.viewCheckHooks;g!==null&&G0(e,g)}else{let g=n.viewHooks;g!==null&&W0(e,g,2),YA(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[R0]){for(let g of e[R0])g();e[R0]=null}s||(bF(e),e[Jt]&=-73)}catch(l){throw s||qf(e),l}finally{u!==null&&($_(u,c),a&&nK(u)),V0()}}function SF(n,e){for(let t=zL(n);t!==null;t=$L(t))for(let r=Ys;r<t.length;r++){let i=t[r];CF(i,e)}}function uK(n){for(let e=zL(n);e!==null;e=$L(e)){if(!(e[Jt]&2))continue;let t=e[Xd];for(let r=0;r<t.length;r++){let i=t[r];NA(i)}}}function lK(n,e,t){sr(18);let r=_a(e,n);CF(r,t),sr(19,r[Is])}function CF(n,e){k0(n)&&gS(n,e)}function gS(n,e){let r=n[Qt],i=n[Jt],s=n[Lo],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&H_(s)),o||=!1,s&&(s.dirty=!1),n[Jt]&=-9217,o)cK(r,n,r.template,n[Is]);else if(i&8192){let a=ln(null);try{TF(n),SF(n,1);let c=r.components;c!==null&&DF(n,c,1),bF(n)}finally{ln(a)}}}function DF(n,e,t){for(let r=0;r<e.length;r++)lK(n,e[r],t)}function dK(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)zl(~i);else{let s=i,o=t[++r],a=t[++r];FO(o,s);let c=e[s];sr(24,c),a(2,c),sr(25,c)}}}finally{zl(-1)}}function KS(n,e){let t=FA()?64:1088;for(n[kc].changeDetectionScheduler?.notify(e);n;){n[Jt]|=t;let r=kl(n);if(Uf(n)&&!r)return n;n=r}return null}function xF(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function hK(n,e,t,r=!0){let i=e[Qt];if(fK(i,e,n,t),r){let o=pS(t,n),a=e[jr],c=a.parentNode(n[jl]);c!==null&&EW(i,n[ma],a,e,c,o)}let s=e[Am];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function mS(n,e){if(n.length<=Ys)return;let t=Ys+e,r=n[t];if(r){let i=r[Bl];i!==null&&i!==n&&qS(i,r),e>0&&(n[t-1][ga]=r[ga]);let s=Em(n,Ys+e);bW(r[Qt],r);let o=s[Mc];o!==null&&o.detachView(s[Qt]),r[Wi]=null,r[ga]=null,r[Jt]&=-129}return r}function fK(n,e,t,r){let i=Ys+r,s=t.length;r>0&&(t[i-1][ga]=e),r<s-Ys?(e[ga]=t[i],gA(t,Ys+r,e)):(t.push(e),e[ga]=null),e[Wi]=t;let o=e[Bl];o!==null&&t!==o&&NF(o,e);let a=e[Mc];a!==null&&a.insertView(n),M0(e),e[Jt]|=128}function NF(n,e){let t=n[Xd],r=e[Wi];if(Oc(r))n[Jt]|=2;else{let i=r[Wi][ya];e[ya]!==i&&(n[Jt]|=2)}t===null?n[Xd]=[e]:t.push(e)}var $l=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Qt];return Bm(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Is]}set context(e){this._lView[Is]=e}get destroyed(){return eh(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Wi];if(Ga(e)){let t=e[xm],r=t?t.indexOf(this):-1;r>-1&&(mS(e,r),Em(t,r))}this._attachedToViewContainer=!1}pF(this._lView[Qt],this._lView)}onDestroy(e){RA(this._lView,e)}markForCheck(){KS(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Jt]&=-129}reattach(){M0(this._lView),this._lView[Jt]|=128}detectChanges(){this._lView[Jt]|=1024,AF(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new at(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Uf(this._lView),t=this._lView[Bl];t!==null&&!e&&qS(t,this._lView),fF(this._lView[Qt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new at(902,!1);this._appRef=e;let t=Uf(this._lView),r=this._lView[Bl];r!==null&&!t&&NF(r,this._lView),M0(this._lView)}};var Hl=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=pK;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let s=XW(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new $l(s)}}return n})();function pK(){return QS(As(),Rn())}function QS(n,e){return n.type&4?new Hl(e,n,Xf(n,e)):null}function YS(n,e,t,r,i){let s=n.data[e];if(s===null)s=gK(n,e,t,r,i),LO()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=RO();s.injectorIndex=o===null?-1:o.injectorIndex}return zf(s,!0),s}function gK(n,e,t,r,i){let s=OA(),o=LA(),a=o?s:s&&s.parent,c=n.data[e]=yK(n,a,t,e,r,i);return mK(n,c,s,o),c}function mK(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function yK(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return DO()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var vK=()=>null;function lL(n,e){return vK(n,e)}var RF=class{},bw=class{},yS=class{resolveComponentFactory(e){throw new at(917,!1)}},zm=class{static NULL=new yS},rh=class{},jc=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>_K()}return n})();function _K(){let n=Rn(),e=As(),t=_a(e.index,n);return(Oc(t)?t:n)[jr]}var PF=(()=>{class n{static \u0275prov=gt({token:n,providedIn:"root",factory:()=>null})}return n})();var Q0={},vS=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Q0,r);return i!==Q0||t===Q0?i:this.parentInjector.get(e,t,r)}};function dL(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=sA(i,a);else if(s==2){let c=a,u=e[++o];r=sA(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function _t(n,e=0){let t=Rn();if(t===null)return Bt(n,e);let r=As();return VL(r,t,cs(n),e)}function kF(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a=o,c=null,u=null;for(let l of o)if(l.resolveHostDirectives!==null){[a,c,u]=l.resolveHostDirectives(o);break}EK(n,e,t,a,s,c,u)}s!==null&&r!==null&&wK(t,r,s)}function wK(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new at(-301,!1);r.push(e[i],s)}}function bK(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function EK(n,e,t,r,i,s,o){let a=r.length,c=!1;for(let y=0;y<a;y++){let g=r[y];!c&&Lc(g)&&(c=!0,bK(n,t,y)),cS(ew(t,e),n,g.type)}DK(t,n.data.length,a);for(let y=0;y<a;y++){let g=r[y];g.providersResolver&&g.providersResolver(g)}let u=!1,l=!1,p=cF(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let y=0;y<a;y++){let g=r[y];if(t.mergedAttrs=Fm(t.mergedAttrs,g.hostAttrs),TK(n,t,e,p,g),CK(p,g,i),o!==null&&o.has(g)){let[M,k]=o.get(g);t.directiveToIndex.set(g.type,[p,M+t.directiveStart,k+t.directiveStart])}else(s===null||!s.has(g))&&t.directiveToIndex.set(g.type,p);g.contentQueries!==null&&(t.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(t.flags|=64);let D=g.type.prototype;!u&&(D.ngOnChanges||D.ngOnInit||D.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!l&&(D.ngOnChanges||D.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),l=!0),p++}IK(n,t,s)}function IK(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))hL(0,e,i,r),hL(1,e,i,r),pL(e,r,!1);else{let s=t.get(i);fL(0,e,s,r),fL(1,e,s,r),pL(e,r,!0)}}}function hL(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),MF(e,s)}}function fL(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),MF(e,o)}}function MF(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function pL(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||LS(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let u=i[c];for(let l of u)if(l===e){o??=[],o.push(c,r[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let u=s[c];for(let l=0;l<u.length;l+=2)if(u[l]===e){o??=[],o.push(u[l+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function TK(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Pl(i.type,!0)),o=new nh(s,Lc(i),_t,null);n.blueprint[r]=o,t[r]=o,AK(n,e,r,cF(n,t,i.hostVars,Ea),i)}function AK(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;SK(o)!=a&&o.push(a),o.push(t,r,s)}}function SK(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function CK(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Lc(e)&&(t[""]=n)}}function DK(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function OF(n,e,t,r,i,s,o,a){let c=e[Qt],u=c.consts,l=Rm(u,o),p=YS(c,n,t,r,l);return s&&kF(c,e,p,Rm(u,a),i),p.mergedAttrs=Fm(p.mergedAttrs,p.attrs),p.attrs!==null&&dL(p,p.attrs,!1),p.mergedAttrs!==null&&dL(p,p.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,p),p}function LF(n,e){xL(n,e),SA(e)&&n.queries.elementEnd(e)}function JS(n){return VF(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function FF(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function VF(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function xK(n,e,t){return n[e]=t}function Gl(n,e,t){if(t===Ea)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function BF(n,e,t,r){let i=Gl(n,e,t);return Gl(n,e+1,r)||i}function XA(n,e,t){return function r(i){let s=Ul(n)?_a(n.index,e):e;KS(s,5);let o=e[Is],a=gL(e,o,t,i),c=r.__ngNextListenerFn__;for(;c;)a=gL(e,o,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function gL(n,e,t,r){let i=ln(null);try{return sr(6,e,t),t(r)!==!1}catch(s){return QW(n,s),!1}finally{sr(7,e,t),ln(i)}}function NK(n,e,t,r,i,s,o,a){let c=Nm(n),u=!1,l=null;if(!r&&c&&(l=PK(e,t,s,n.index)),l!==null){let p=l.__ngLastListenerFn__||l;p.__ngNextListenerFn__=o,l.__ngLastListenerFn__=o,u=!0}else{let p=Wa(n,t),y=r?r(p):p;GG(t,y,s,a);let g=i.listen(y,s,a);if(!RK(s)){let D=r?M=>r(va(M[n.index])):n.index;jF(D,e,t,s,a,g,!1)}}return u}function RK(n){return n.startsWith("animation")||n.startsWith("transition")}function PK(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Bf],c=i[s+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function jF(n,e,t,r,i,s,o){let a=e.firstCreatePass?kA(e):null,c=PA(t),u=c.length;c.push(i,s),a&&a.push(r,n,u,(u+1)*(o?-1:1))}function mL(n,e,t,r,i,s){let o=e[t],a=e[Qt],u=a.data[t].outputs[r],p=o[u].subscribe(s);jF(n.index,a,e,i,s,p,!0)}var _S=Symbol("BINDING");var sw=class extends zm{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Fl(e);return new Yf(t,this.ngModule)}};function kK(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&mw.SignalBased)!==0};return i&&(s.transform=i),s})}function MK(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function OK(n,e,t){let r=e instanceof Oi?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new vS(t,r):t}function LK(n){let e=n.get(rh,null);if(e===null)throw new at(407,!1);let t=n.get(PF,null),r=n.get(Ml,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function FK(n,e){let t=UF(n);return iF(e,t,t==="svg"?yO:t==="math"?vO:null)}function UF(n){return(n.selectors[0][0]||"div").toLowerCase()}var Yf=class extends bw{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=kK(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=MK(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=oW(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,o){sr(22);let a=ln(null);try{let c=this.componentDef,u=VK(r,c,o,s),l=OK(c,i||this.ngModule,e),p=LK(l),y=p.rendererFactory.createRenderer(null,c),g=r?OW(y,r,c.encapsulation,l):FK(c,y),D=o?.some(yL)||s?.some(O=>typeof O!="function"&&O.bindings.some(yL)),M=VS(null,u,null,512|aF(c),null,null,p,y,l,null,QL(g,l,!0));M[Qs]=g,F0(M);let k=null;try{let O=OF(Qs,M,2,"#host",()=>u.directiveRegistry,!0,0);oF(y,g,O),Kf(g,M),HS(u,M,O),JL(u,O,M),LF(u,O),t!==void 0&&jK(O,this.ngContentSelectors,t),k=_a(O.index,M),M[Is]=k[Is],WS(u,M,null)}catch(O){throw k!==null&&lS(k),lS(M),O}finally{sr(23),V0()}return new ow(this.componentType,M,!!D)}finally{ln(a)}}};function VK(n,e,t,r){let i=n?["ng-version","21.0.0"]:aW(e.selectors[0]),s=null,o=null,a=0;if(t)for(let l of t)a+=l[_S].requiredVars,l.create&&(l.targetIdx=0,(s??=[]).push(l)),l.update&&(l.targetIdx=0,(o??=[]).push(l));if(r)for(let l=0;l<r.length;l++){let p=r[l];if(typeof p!="function")for(let y of p.bindings){a+=y[_S].requiredVars;let g=l+1;y.create&&(y.targetIdx=g,(s??=[]).push(y)),y.update&&(y.targetIdx=g,(o??=[]).push(y))}}let c=[e];if(r)for(let l of r){let p=typeof l=="function"?l:l.type,y=_A(p);c.push(y)}return FS(0,null,BK(s,o),1,a,c,null,null,null,[i],null)}function BK(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function yL(n){let e=n[_S].kind;return e==="input"||e==="twoWay"}var ow=class extends RF{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=P0(t[Qt],Qs),this.location=Xf(this._tNode,t),this.instance=_a(this._tNode.index,t)[Is],this.hostView=this.changeDetectorRef=new $l(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=GS(r,i[Qt],i,e,t);this.previousInputValues.set(e,t);let o=_a(r.index,i);KS(o,1)}get injector(){return new th(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function jK(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var Pu=(()=>{class n{static __NG_ELEMENT_ID__=UK}return n})();function UK(){let n=As();return zF(n,Rn())}var qK=Pu,qF=class extends qK{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Xf(this._hostTNode,this._hostLView)}get injector(){return new th(this._hostTNode,this._hostLView)}get parentInjector(){let e=NS(this._hostTNode,this._hostLView);if(PL(e)){let t=Z0(e,this._hostLView),r=J0(e),i=t[Qt].data[r+8];return new th(i,t)}else return new th(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=vL(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ys}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=lL(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,uL(this._hostTNode,o)),a}createComponent(e,t,r,i,s,o,a){let c=e&&!_G(e),u;if(c)u=t;else{let k=t||{};u=k.index,r=k.injector,i=k.projectableNodes,s=k.environmentInjector||k.ngModuleRef,o=k.directives,a=k.bindings}let l=c?e:new Yf(Fl(e)),p=r||this.parentInjector;if(!s&&l.ngModule==null){let O=(c?p:this.parentInjector).get(Oi,null);O&&(s=O)}let y=Fl(l.componentType??{}),g=lL(this._lContainer,y?.id??null),D=g?.firstChild??null,M=l.create(p,i,D,s,o,a);return this.insertImpl(M.hostView,u,uL(this._hostTNode,g)),M}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(bO(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Wi],u=new qF(c,c[ma],c[Wi]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return hK(o,i,s,r),e.attachToViewContainerRef(),gA(eS(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=vL(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=mS(this._lContainer,t);r&&(Em(eS(this._lContainer),t),pF(r[Qt],r))}detach(e){let t=this._adjustIndex(e,-1),r=mS(this._lContainer,t);return r&&Em(eS(this._lContainer),t)!=null?new $l(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function vL(n){return n[xm]}function eS(n){return n[xm]||(n[xm]=[])}function zF(n,e){let t,r=e[n.index];return Ga(r)?t=r:(t=xF(r,e,null,n),e[n.index]=t,BS(e,t)),$K(t,e,n,r),new qF(t,n,e)}function zK(n,e){let t=n[jr],r=t.createComment(""),i=Wa(e,n),s=t.parentNode(i);return rw(t,s,r,t.nextSibling(i),!1),r}var $K=WK,HK=()=>!1;function GK(n,e,t){return HK(n,e,t)}function WK(n,e,t,r){if(n[jl])return;let i;t.type&8?i=va(r):i=zK(e,t),n[jl]=i}var wS=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},bS=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)ZS(e,t).matches!==null&&this.queries[t].setDirty()}},ES=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=tQ(e):this.predicate=e}},IS=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},TS=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,KK(t,s)),this.matchTNodeWithReadOption(e,t,K0(t,e,s,!1,!1))}else r===Hl?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,K0(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===po||i===Pu||i===Hl&&t.type&4)this.addMatch(t.index,-2);else{let s=K0(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function KK(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function QK(n,e){return n.type&11?Xf(n,e):n.type&4?QS(n,e):null}function YK(n,e,t,r){return t===-1?QK(e,n):t===-2?JK(n,e,r):Vm(n,n[Qt],t,e)}function JK(n,e,t){if(t===po)return Xf(e,n);if(t===Hl)return QS(e,n);if(t===Pu)return zF(e,n)}function $F(n,e,t,r){let i=e[Mc].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let u=o[c];if(u<0)a.push(null);else{let l=s[u];a.push(YK(e,l,o[c+1],t.metadata.read))}}i.matches=a}return i.matches}function AS(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=$F(n,e,i,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let u=s[a+1],l=e[-c];for(let p=Ys;p<l.length;p++){let y=l[p];y[Bl]===y[Wi]&&AS(y[Qt],y,u,r)}if(l[Xd]!==null){let p=l[Xd];for(let y=0;y<p.length;y++){let g=p[y];AS(g[Qt],g,u,r)}}}}}return r}function ZK(n,e){return n[Mc].queries[e].queryList}function XK(n,e,t){let r=new tw((t&4)===4);return TO(n,e,r,r.destroy),(e[Mc]??=new bS).queries.push(new wS(r))-1}function eQ(n,e,t,r){let i=Ts();if(i.firstCreatePass){let s=As();nQ(i,new ES(e,t,r),s.index),rQ(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return XK(i,Rn(),t)}function tQ(n){return n.split(",").map(e=>e.trim())}function nQ(n,e,t){n.queries===null&&(n.queries=new IS),n.queries.track(new TS(e,t))}function rQ(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function ZS(n,e){return n.queries.getByIndex(e)}function iQ(n,e){let t=n[Qt],r=ZS(t,e);return r.crossesNgTemplate?AS(t,n,e,[]):$F(t,n,r,e)}var ih=class{},Ew=class{};var aw=class extends ih{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new sw(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=vA(e);this._bootstrapComponents=nF(s.bootstrap),this._r3Injector=zA(e,t,[{provide:ih,useValue:this},{provide:zm,useValue:this.componentFactoryResolver},...r],Du(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},cw=class extends Ew{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new aw(this.moduleType,e,[])}};var jm=class extends ih{injector;componentFactoryResolver=new sw(this);instance=null;constructor(e){super();let t=new Kd([...e.providers,{provide:ih,useValue:this},{provide:zm,useValue:this.componentFactoryResolver}],e.parent||Tm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function $m(n,e,t=null){return new jm({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var sQ=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=wA(!1,t.type),i=r.length>0?$m([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=gt({token:n,providedIn:"environment",factory:()=>new n(Bt(Oi))})}return n})();function Zs(n){return Zf(()=>{let e=HF(n),t=Ht(Le({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===RS.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(sQ).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ya.Emulated,styles:n.styles||Oo,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&vw("NgStandalone"),GF(t);let r=n.dependencies;return t.directiveDefs=_L(r,oQ),t.pipeDefs=_L(r,hO),t.id=uQ(t),t})}function oQ(n){return Fl(n)||_A(n)}function Ja(n){return Zf(()=>({type:n.type,bootstrap:n.bootstrap||Oo,declarations:n.declarations||Oo,imports:n.imports||Oo,exports:n.exports||Oo,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function aQ(n,e){if(n==null)return Ll;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=mw.None,c=null),t[s]=[r,a,c],e[s]=o}return t}function cQ(n){if(n==null)return Ll;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Or(n){return Zf(()=>{let e=HF(n);return GF(e),e})}function XS(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function HF(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Ll,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Oo,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:aQ(n.inputs,e),outputs:cQ(n.outputs),debugInfo:null}}function GF(n){n.features?.forEach(e=>e(n))}function _L(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let s=e(i);s!==null&&r.push(s)}return r}:null}function uQ(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function lQ(n){return Object.getPrototypeOf(n.prototype).constructor}function Ia(n){let e=lQ(n.type),t=!0,r=[n];for(;e;){let i;if(Lc(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new at(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=tS(n.inputs),o.declaredInputs=tS(n.declaredInputs),o.outputs=tS(n.outputs);let a=i.hostBindings;a&&gQ(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&fQ(n,c),u&&pQ(n,u),dQ(n,i),nO(n.outputs,i.outputs),Lc(i)&&i.data.animation){let l=n.data;l.animation=(l.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Ia&&(t=!1)}}e=Object.getPrototypeOf(e)}hQ(r)}function dQ(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function hQ(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Fm(i.hostAttrs,t=Fm(t,i.hostAttrs))}}function tS(n){return n===Ll?{}:n===Oo?[]:n}function fQ(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function pQ(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function gQ(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function mQ(n,e,t,r,i,s,o,a){if(t.firstCreatePass){n.mergedAttrs=Fm(n.mergedAttrs,n.attrs);let l=n.tView=FS(2,n,i,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),l.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),zf(n,!1);let c=vQ(t,e,n,r);j0()&&zS(t,e,c,n),Kf(c,e);let u=xF(c,e,c,n);e[r+Qs]=u,BS(e,u),GK(u,n,e)}function yQ(n,e,t,r,i,s,o,a,c,u,l){let p=t+Qs,y;return e.firstCreatePass?(y=YS(e,p,4,o||null,a||null),MA()&&kF(e,n,y,Rm(e.consts,u),_F),xL(e,y)):y=e.data[p],mQ(y,n,e,t,r,i,s,c),Nm(y)&&HS(e,n,y),u!=null&&yF(n,y,l),y}function pi(n,e,t,r,i,s,o,a){let c=Rn(),u=Ts(),l=Rm(u.consts,s);return yQ(c,u,n,e,t,r,i,l,void 0,o,a),pi}var vQ=_Q;function _Q(n,e,t,r){return U0(!0),e[jr].createComment("")}var e2=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function WF(n){return typeof n=="function"&&n[Gs]!==void 0}function t2(n){return WF(n)&&typeof n.set=="function"}var Iw=new wt(""),Tw=new wt(""),Hm=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(t,r,i){this._ngZone=t,this.registry=r,IA()&&(this._destroyRef=ze(Ka,{optional:!0})??void 0),n2||(QF(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){let t=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),r=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{Ar.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{t.unsubscribe(),r.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t()},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static \u0275fac=function(r){return new(r||n)(Bt(Ar),Bt(KF),Bt(Tw))};static \u0275prov=gt({token:n,factory:n.\u0275fac})}return n})(),KF=(()=>{class n{_applications=new Map;registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return n2?.findTestabilityInTree(this,t,r)??null}static \u0275fac=function(r){return new(r||n)};static \u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function QF(n){n2=n}var n2;function Kl(n){return!!n&&typeof n.then=="function"}function r2(n){return!!n&&typeof n.subscribe=="function"}var YF=new wt("");var i2=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=ze(YF,{optional:!0})??[];injector=ze(Ki);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=Li(this.injector,i);if(Kl(s))t.push(s);else if(r2(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Aw=new wt("");function JF(){IT(()=>{let n="";throw new at(600,n)})}function ZF(n){return n.isBoundToModule}var wQ=10;var ku=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=ze(wa);afterRenderManager=ze(US);zonelessEnabled=ze(km);rootEffectScheduler=ze(QA);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new li;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=ze(Nu);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(nr(t=>!t))}constructor(){ze(ah,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=ze(Oi);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Ki.NULL){return this._injector.get(Ar).run(()=>{sr(10);let o=t instanceof bw;if(!this._injector.get(i2).done){let D="";throw new at(405,D)}let c;o?c=t:c=this._injector.get(zm).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let u=ZF(c)?void 0:this._injector.get(ih),l=r||c.selector,p=c.create(i,[],l,u),y=p.location.nativeElement,g=p.injector.get(Iw,null);return g?.registerApplication(y),p.onDestroy(()=>{this.detachView(p.hostView),Lm(this.components,p),g?.unregisterApplication(y)}),this._loadComponent(p),sr(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){sr(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(yw.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new at(101,!1);let t=ln(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ln(t),this.afterTick.next(),sr(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(rh,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<wQ;)sr(14),this.synchronizeOnce(),sr(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Pm(i))continue;let s=r&&!this.zonelessEnabled?0:1;AF(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Pm(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Lm(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Aw,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Lm(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new at(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Lm(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function ch(n,e,t,r){let i=Rn(),s=$f();if(Gl(i,s,e)){let o=Ts(),a=B0();$W(a,i,n,e,t,r)}return ch}var Qwe=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function Sn(n,e,t){let r=Rn(),i=$f();if(Gl(r,i,e)){let s=Ts(),o=B0();vF(o,r,n,e,r[jr],t)}return Sn}function wL(n,e,t,r,i){GS(e,n,t,i?"class":"style",r)}function we(n,e,t,r){let i=Rn(),s=i[Qt],o=n+Qs,a=s.firstCreatePass?OF(o,i,2,e,_F,MA(),t,r):s.data[o];if(WW(a,i,n,e,bQ),Nm(a)){let c=i[Qt];HS(c,i,a),JL(c,a,i)}return r!=null&&yF(i,a),we}function _e(){let n=Ts(),e=As(),t=KW(e);return n.firstCreatePass&&LF(n,t),xO(t)&&NO(),CO(),t.classesWithoutHost!=null&&AG(t)&&wL(n,t,Rn(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&SG(t)&&wL(n,t,Rn(),t.stylesWithoutHost,!1),_e}function Za(n,e,t,r){return we(n,e,t,r),_e(),Za}var bQ=(n,e,t,r,i)=>(U0(!0),iF(e[jr],r,$O()));function Ta(){return Rn()}var Mm=void 0;function EQ(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var IQ=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Mm,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Mm,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",Mm,Mm,Mm],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",EQ],nS={};function Fo(n){let e=TQ(n),t=bL(e);if(t)return t;let r=e.split("-")[0];if(t=bL(r),t)return t;if(r==="en")return IQ;throw new at(701,!1)}function bL(n){return n in nS||(nS[n]=Es.ng&&Es.ng.common&&Es.ng.common.locales&&Es.ng.common.locales[n]),nS[n]}var ei=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(ei||{});function TQ(n){return n.toLowerCase().replace(/_/g,"-")}var Gm="en-US";var AQ=Gm;function XF(n){typeof n=="string"&&(AQ=n.toLowerCase().replace(/_/g,"-"))}function rn(n,e,t){let r=Rn(),i=Ts(),s=As();return e4(i,r,r[jr],s,n,e,t),rn}function e4(n,e,t,r,i,s,o){let a=!0,c=null;if((r.type&3||o)&&(c??=XA(r,e,s),NK(r,n,e,o,t,i,s,c)&&(a=!1)),a){let u=r.outputs?.[i],l=r.hostDirectiveOutputs?.[i];if(l&&l.length)for(let p=0;p<l.length;p+=2){let y=l[p],g=l[p+1];c??=XA(r,e,s),mL(r,e,y,g,i,c)}if(u&&u.length)for(let p of u)c??=XA(r,e,s),mL(r,e,p,i,i,c)}}function Cn(n=1){return zO(n)}function s2(n,e,t,r){eQ(n,e,t,r)}function o2(n){let e=Rn(),t=Ts(),r=jA();L0(r+1);let i=ZS(t,r);if(n.dirty&&wO(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=iQ(e,r);n.reset(s,BG),n.notifyOnChanges()}return!0}return!1}function a2(){return ZK(Rn(),jA())}function H0(n,e){return n<<17|e<<2}function sh(n){return n>>17&32767}function SQ(n){return(n&2)==2}function CQ(n,e){return n&131071|e<<17}function SS(n){return n|2}function Jf(n){return(n&131068)>>2}function rS(n,e){return n&-131069|e<<2}function DQ(n){return(n&1)===1}function CS(n){return n|1}function xQ(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=sh(o),c=Jf(o);n[r]=t;let u=!1,l;if(Array.isArray(t)){let p=t;l=p[1],(l===null||Ff(p,l)>0)&&(u=!0)}else l=t;if(i)if(c!==0){let y=sh(n[a+1]);n[r+1]=H0(y,a),y!==0&&(n[y+1]=rS(n[y+1],r)),n[a+1]=CQ(n[a+1],r)}else n[r+1]=H0(a,0),a!==0&&(n[a+1]=rS(n[a+1],r)),a=r;else n[r+1]=H0(c,0),a===0?a=r:n[c+1]=rS(n[c+1],r),c=r;u&&(n[r+1]=SS(n[r+1])),EL(n,l,r,!0),EL(n,l,r,!1),NQ(e,l,n,r,s),o=H0(a,c),s?e.classBindings=o:e.styleBindings=o}function NQ(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Ff(s,e)>=0&&(t[r+1]=CS(t[r+1]))}function EL(n,e,t,r){let i=n[t+1],s=e===null,o=r?sh(i):Jf(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],u=n[o+1];RQ(c,e)&&(a=!0,n[o+1]=r?CS(u):SS(u)),o=r?sh(u):Jf(u)}a&&(n[t+1]=r?SS(i):CS(i))}function RQ(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ff(n,e)>=0:!1}function Sw(n,e){return PQ(n,e,null,!0),Sw}function PQ(n,e,t,r){let i=Rn(),s=Ts(),o=BA(2);if(s.firstUpdatePass&&MQ(s,n,o,r),e!==Ea&&Gl(i,o,e)){let a=s.data[ql()];BQ(s,a,i,i[jr],n,i[o+1]=jQ(e,t),r,o)}}function kQ(n,e){return e>=n.expandoStartIndex}function MQ(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[ql()],o=kQ(n,t);UQ(s,r)&&e===null&&!o&&(e=!1),e=OQ(i,s,e,r),xQ(i,s,e,t,o,r)}}function OQ(n,e,t,r){let i=BO(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=iS(null,n,e,t,r),t=Um(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=iS(i,n,e,t,r),s===null){let c=LQ(n,e,r);c!==void 0&&Array.isArray(c)&&(c=iS(null,n,e,c[1],r),c=Um(c,e.attrs,r),FQ(n,e,r,c))}else s=VQ(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function LQ(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Jf(r)!==0)return n[sh(r)]}function FQ(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[sh(i)]=r}function VQ(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Um(r,o,t)}return Um(r,e.attrs,t)}function iS(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Um(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Um(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),dO(n,o,t?!0:e[++s]))}return n===void 0?null:n}function BQ(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],l=DQ(u)?IL(c,e,t,i,Jf(u),o):void 0;if(!uw(l)){uw(s)||SQ(u)&&(s=IL(c,null,t,i,a,o));let p=CA(ql(),t);MW(r,o,p,i,s)}}function IL(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),l=u?c[1]:c,p=l===null,y=t[i+1];y===Ea&&(y=p?Oo:void 0);let g=p?x0(y,r):l===r?y:void 0;if(u&&!uw(g)&&(g=x0(c,r)),uw(g)&&(a=g,o))return a;let D=n[i+1];i=o?sh(D):Jf(D)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=x0(c,r))}return a}function uw(n){return n!==void 0}function jQ(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Du(pw(n)))),n}function UQ(n,e){return(n.flags&(e?8:16))!==0}function Pe(n,e=""){let t=Rn(),r=Ts(),i=n+Qs,s=r.firstCreatePass?YS(r,i,1,e,null):r.data[i],o=qQ(r,t,s,e,n);t[i]=o,j0()&&zS(r,t,o,s),zf(s,!1)}var qQ=(n,e,t,r,i)=>(U0(!0),cW(e[jr],r));function zQ(n,e,t,r=""){return Gl(n,$f(),t)?e+Ol(t)+r:Ea}function $Q(n,e,t,r,i,s=""){let o=MO(),a=BF(n,o,t,i);return BA(2),a?e+Ol(t)+r+Ol(i)+s:Ea}function Sr(n){return Ur("",n),Sr}function Ur(n,e,t){let r=Rn(),i=zQ(r,n,e,t);return i!==Ea&&t4(r,ql(),i),Ur}function Wm(n,e,t,r,i){let s=Rn(),o=$Q(s,n,e,t,r,i);return o!==Ea&&t4(s,ql(),o),Wm}function t4(n,e,t){let r=CA(e,n);uW(n[jr],r,t)}function Cr(n,e,t){t2(e)&&(e=e());let r=Rn(),i=$f();if(Gl(r,i,e)){let s=Ts(),o=B0();vF(o,r,n,e,r[jr],t)}return Cr}function Lr(n,e){let t=t2(n);return t&&n.set(e),t}function Dr(n,e){let t=Rn(),r=Ts(),i=As();return e4(r,t,t[jr],i,n,e),Dr}function c2(n){return Gl(Rn(),$f(),n)?Ol(n):Ea}function HQ(n,e,t){let r=Ts();if(r.firstCreatePass){let i=Lc(n);DS(t,r.data,r.blueprint,i,!0),DS(e,r.data,r.blueprint,i,!1)}}function DS(n,e,t,r,i){if(n=cs(n),Array.isArray(n))for(let s=0;s<n.length;s++)DS(n[s],e,t,r,i);else{let s=Ts(),o=Rn(),a=As(),c=Wd(n)?n:cs(n.provide),u=EA(n),l=a.providerIndexes&1048575,p=a.directiveStart,y=a.providerIndexes>>20;if(Wd(n)||!n.multi){let g=new nh(u,i,_t,null),D=oS(c,e,i?l:l+y,p);D===-1?(cS(ew(a,o),s,c),sS(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(g),o.push(g)):(t[D]=g,o[D]=g)}else{let g=oS(c,e,l+y,p),D=oS(c,e,l,l+y),M=g>=0&&t[g],k=D>=0&&t[D];if(i&&!k||!i&&!M){cS(ew(a,o),s,c);let O=KQ(i?WQ:GQ,t.length,i,r,u,n);!i&&k&&(t[D].providerFactory=O),sS(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(O),o.push(O)}else{let O=n4(t[i?D:g],u,!i&&r);sS(s,n,g>-1?g:D,O)}!i&&r&&k&&t[D].componentProviders++}}}function sS(n,e,t,r){let i=Wd(e),s=gO(e);if(i||s){let c=(s?cs(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let l=u.indexOf(t);l===-1?u.push(t,[r,c]):u[l+1].push(r,c)}else u.push(t,c)}}}function n4(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function oS(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function GQ(n,e,t,r,i){return xS(this.multi,[])}function WQ(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Vm(r,r[Qt],this.providerFactory.index,i);o=c.slice(0,a),xS(s,o);for(let u=a;u<c.length;u++)o.push(c[u])}else o=[],xS(s,o);return o}function xS(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function KQ(n,e,t,r,i,s){let o=new nh(n,t,_t,null);return o.multi=[],o.index=e,o.componentProviders=0,n4(o,i,r&&!t),o}function Mu(n,e=[]){return t=>{t.providersResolver=(r,i)=>HQ(r,i?i(n):n,e)}}function QQ(n,e){let t=n[e];return t===Ea?void 0:t}function YQ(n,e,t,r,i,s,o){let a=e+t;return BF(n,a,i,s)?xK(n,a+2,o?r.call(o,i,s):r(i,s)):QQ(n,a+2)}function Km(n,e){let t=Ts(),r,i=n+Qs;t.firstCreatePass?(r=JQ(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Pl(r.type,!0)),o,a=Ks(_t);try{let c=X0(!1),u=s();return X0(c),DA(t,Rn(),i,u),u}finally{Ks(a)}}function JQ(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Qm(n,e,t,r){let i=n+Qs,s=Rn(),o=_O(s,i);return ZQ(s,i)?YQ(s,kO(),e,o.transform,t,r,o):o.transform(t,r)}function ZQ(n,e){return n[Qt].data[e].pure}var lw=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},u2=(()=>{class n{compileModuleSync(t){return new cw(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=vA(t),s=nF(i.declarations).reduce((o,a)=>{let c=Fl(a);return c&&o.push(new Yf(c)),o},[]);return new lw(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var r4=(()=>{class n{applicationErrorHandler=ze(wa);appRef=ze(ku);taskService=ze(Nu);ngZone=ze(Ar);zonelessEnabled=ze(km);tracing=ze(ah,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Mi;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(_m):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(ze(KA,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?HA:$A;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(_m+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,HA(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function i4(){return[{provide:Ml,useExisting:r4},{provide:Ar,useClass:wm},{provide:km,useValue:!0}]}function XQ(){return typeof $localize<"u"&&$localize.locale||Gm}var Ym=new wt("",{factory:()=>ze(Ym,{optional:!0,skipSelf:!0})||XQ()});function Jm(n,e){return G_(n,e?.equal)}var c4=Symbol("InputSignalNode#UNSET"),dY=Ht(Le({},W_),{transformFn:void 0,applyValueToInputSignal(n,e){lm(n,e)}});function u4(n,e){let t=Object.create(dY);t.value=n,t.transformFn=e?.transform;function r(){if(am(t),t.value===c4){let i=null;throw new at(-950,i)}return t.value}return r[Gs]=t,r}var Dw=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>qm(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function s4(n,e){return u4(n,e)}function hY(n){return u4(c4,n)}var l4=(s4.required=hY,s4);var l2=new wt(""),fY=new wt("");function Zm(n){return!n.moduleRef}function pY(n){let e=Zm(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ar);return t.run(()=>{Zm(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(wa),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Zm(n)){let s=()=>e.destroy(),o=n.platformInjector.get(l2);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(l2);o.add(s),n.moduleRef.onDestroy(()=>{Lm(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return mY(r,t,()=>{let s=e.get(Nu),o=s.add(),a=e.get(i2);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Ym,Gm);if(XF(c||Gm),!e.get(fY,!0))return Zm(n)?e.get(ku):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Zm(n)){let l=e.get(ku);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return gY?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(o))})})}var gY;function mY(n,e,t){try{let r=t();return Kl(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Cw=null;function yY(n=[],e){return Ki.create({name:e,providers:[{provide:Im,useValue:"platform"},{provide:l2,useValue:new Set([()=>Cw=null])},...n]})}function vY(n=[]){if(Cw)return Cw;let e=yY(n);return Cw=e,JF(),_Y(e),e}function _Y(n){let e=n.get(hw,null);Li(n,()=>{e?.forEach(t=>t())})}function g2(){return!1}var Ql=(()=>{class n{static __NG_ELEMENT_ID__=wY}return n})();function wY(n){return bY(As(),Rn(),(n&16)===16)}function bY(n,e,t){if(Ul(n)&&!t){let r=_a(n.index,e);return new $l(r,r)}else if(n.type&175){let r=e[ya];return new $l(r,e)}return null}var d2=class{constructor(){}supports(e){return JS(e)}create(e){return new h2(e)}},EY=(n,e)=>e,h2=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||EY}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<o4(r,i,s)?t:r,a=o4(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,l=c-i;if(u!=l){for(let y=0;y<u;y++){let g=y<s.length?s[y]:s[y]=0,D=g+y;l<=D&&D<u&&(s[y]=g+1)}let p=o.previousIndex;s[p]=l-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!JS(e))throw new at(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,FF(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new f2(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new xw),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new xw),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},f2=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},p2=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},xw=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new p2,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function o4(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function a4(){return new m2([new d2])}var m2=(()=>{class n{factories;static \u0275prov=gt({token:n,providedIn:"root",factory:a4});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=ze(n,{optional:!0,skipSelf:!0});return n.create(t,r||a4())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new at(901,!1)}}return n})();var d4=(()=>{class n{constructor(t){}static \u0275fac=function(r){return new(r||n)(Bt(ku))};static \u0275mod=Ja({type:n});static \u0275inj=pa({})}return n})();function h4(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;sr(8);try{let s=i?.injector??vY(r),o=[i4(),KO,...t||[]],a=new jm({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return pY({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{sr(9)}}function tp(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var g4=null;function Vo(){return g4}function y2(n){g4??=n}var Xm=class{},v2=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=gt({token:n,factory:()=>ze(m4),providedIn:"platform"})}return n})();var m4=(()=>{class n extends v2{_location;_history;_doc=ze(Js);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Vo().getBaseHref(this._doc)}onPopState(t){let r=Vo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Vo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=gt({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function y4(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function f4(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Yl(n){return n&&n[0]!=="?"?`?${n}`:n}var np=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=gt({token:n,factory:()=>ze(_4),providedIn:"root"})}return n})(),v4=new wt(""),_4=(()=>{class n extends np{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??ze(Js).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return y4(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Yl(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Yl(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Yl(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Bt(v2),Bt(v4,8))};static \u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rp=(()=>{class n{_subject=new li;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=AY(f4(p4(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Yl(r))}normalize(t){return n.stripTrailingSlash(TY(this._basePath,p4(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Yl(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Yl(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Yl;static joinWithSlash=y4;static stripTrailingSlash=f4;static \u0275fac=function(r){return new(r||n)(Bt(np))};static \u0275prov=gt({token:n,factory:()=>IY(),providedIn:"root"})}return n})();function IY(){return new rp(Bt(np))}function TY(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function p4(n){return n.replace(/\/index.html$/,"")}function AY(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Ss=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(Ss||{}),ar=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(ar||{}),go=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(go||{}),Lu={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function I4(n){return Fo(n)[ei.LocaleId]}function T4(n,e,t){let r=Fo(n),i=[r[ei.DayPeriodsFormat],r[ei.DayPeriodsStandalone]],s=Aa(i,e);return Aa(s,t)}function A4(n,e,t){let r=Fo(n),i=[r[ei.DaysFormat],r[ei.DaysStandalone]],s=Aa(i,e);return Aa(s,t)}function S4(n,e,t){let r=Fo(n),i=[r[ei.MonthsFormat],r[ei.MonthsStandalone]],s=Aa(i,e);return Aa(s,t)}function C4(n,e){let r=Fo(n)[ei.Eras];return Aa(r,e)}function ey(n,e){let t=Fo(n);return Aa(t[ei.DateFormat],e)}function ty(n,e){let t=Fo(n);return Aa(t[ei.TimeFormat],e)}function ny(n,e){let r=Fo(n)[ei.DateTimeFormat];return Aa(r,e)}function ry(n,e){let t=Fo(n),r=t[ei.NumberSymbols][e];if(typeof r>"u"){if(e===Lu.CurrencyDecimal)return t[ei.NumberSymbols][Lu.Decimal];if(e===Lu.CurrencyGroup)return t[ei.NumberSymbols][Lu.Group]}return r}function D4(n){if(!n[ei.ExtraData])throw new at(2303,!1)}function x4(n){let e=Fo(n);return D4(e),(e[ei.ExtraData][2]||[]).map(r=>typeof r=="string"?_2(r):[_2(r[0]),_2(r[1])])}function N4(n,e,t){let r=Fo(n);D4(r);let i=[r[ei.ExtraData][0],r[ei.ExtraData][1]],s=Aa(i,e)||[];return Aa(s,t)||[]}function Aa(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new at(2304,!1)}function _2(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var SY=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Nw={},CY=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function R4(n,e,t,r){let i=LY(n);e=Ou(t,e)||e;let o=[],a;for(;e;)if(a=CY.exec(e),a){o=o.concat(a.slice(1));let l=o.pop();if(!l)break;e=l}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=k4(r,c),i=OY(i,r));let u="";return o.forEach(l=>{let p=kY(l);u+=p?p(i,t,c):l==="''"?"'":l.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function Ow(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Ou(n,e){let t=I4(n);if(Nw[t]??={},Nw[t][e])return Nw[t][e];let r="";switch(e){case"shortDate":r=ey(n,go.Short);break;case"mediumDate":r=ey(n,go.Medium);break;case"longDate":r=ey(n,go.Long);break;case"fullDate":r=ey(n,go.Full);break;case"shortTime":r=ty(n,go.Short);break;case"mediumTime":r=ty(n,go.Medium);break;case"longTime":r=ty(n,go.Long);break;case"fullTime":r=ty(n,go.Full);break;case"short":let i=Ou(n,"shortTime"),s=Ou(n,"shortDate");r=Rw(ny(n,go.Short),[i,s]);break;case"medium":let o=Ou(n,"mediumTime"),a=Ou(n,"mediumDate");r=Rw(ny(n,go.Medium),[o,a]);break;case"long":let c=Ou(n,"longTime"),u=Ou(n,"longDate");r=Rw(ny(n,go.Long),[c,u]);break;case"full":let l=Ou(n,"fullTime"),p=Ou(n,"fullDate");r=Rw(ny(n,go.Full),[l,p]);break}return r&&(Nw[t][e]=r),r}function Rw(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Xa(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function DY(n,e){return Xa(n,3).substring(0,e)}function gi(n,e,t=0,r=!1,i=!1){return function(s,o){let a=xY(n,s);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return DY(a,e);let c=ry(o,Lu.MinusSign);return Xa(a,e,c,r,i)}}function xY(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new at(2301,!1)}}function yr(n,e,t=Ss.Format,r=!1){return function(i,s){return NY(i,s,n,e,t,r)}}function NY(n,e,t,r,i,s){switch(t){case 2:return S4(e,i,r)[n.getMonth()];case 1:return A4(e,i,r)[n.getDay()];case 0:let o=n.getHours(),a=n.getMinutes();if(s){let u=x4(e),l=N4(e,i,r),p=u.findIndex(y=>{if(Array.isArray(y)){let[g,D]=y,M=o>=g.hours&&a>=g.minutes,k=o<D.hours||o===D.hours&&a<D.minutes;if(g.hours<D.hours){if(M&&k)return!0}else if(M||k)return!0}else if(y.hours===o&&y.minutes===a)return!0;return!1});if(p!==-1)return l[p]}return T4(e,i,r)[o<12?0:1];case 3:return C4(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new at(2302,!1)}}function Pw(n){return function(e,t,r){let i=-1*r,s=ry(t,Lu.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Xa(o,2,s)+Xa(Math.abs(i%60),2,s);case 1:return"GMT"+(i>=0?"+":"")+Xa(o,1,s);case 2:return"GMT"+(i>=0?"+":"")+Xa(o,2,s)+":"+Xa(Math.abs(i%60),2,s);case 3:return r===0?"Z":(i>=0?"+":"")+Xa(o,2,s)+":"+Xa(Math.abs(i%60),2,s);default:throw new at(2310,!1)}}}var RY=0,Mw=4;function PY(n){let e=Ow(n,RY,1).getDay();return Ow(n,0,1+(e<=Mw?Mw:Mw+7)-e)}function P4(n){let e=n.getDay(),t=e===0?-3:Mw-e;return Ow(n.getFullYear(),n.getMonth(),n.getDate()+t)}function w2(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=P4(t),o=PY(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Xa(i,n,ry(r,Lu.MinusSign))}}function kw(n,e=!1){return function(t,r){let s=P4(t).getFullYear();return Xa(s,n,ry(r,Lu.MinusSign),e)}}var b2={};function kY(n){if(b2[n])return b2[n];let e;switch(n){case"G":case"GG":case"GGG":e=yr(3,ar.Abbreviated);break;case"GGGG":e=yr(3,ar.Wide);break;case"GGGGG":e=yr(3,ar.Narrow);break;case"y":e=gi(0,1,0,!1,!0);break;case"yy":e=gi(0,2,0,!0,!0);break;case"yyy":e=gi(0,3,0,!1,!0);break;case"yyyy":e=gi(0,4,0,!1,!0);break;case"Y":e=kw(1);break;case"YY":e=kw(2,!0);break;case"YYY":e=kw(3);break;case"YYYY":e=kw(4);break;case"M":case"L":e=gi(1,1,1);break;case"MM":case"LL":e=gi(1,2,1);break;case"MMM":e=yr(2,ar.Abbreviated);break;case"MMMM":e=yr(2,ar.Wide);break;case"MMMMM":e=yr(2,ar.Narrow);break;case"LLL":e=yr(2,ar.Abbreviated,Ss.Standalone);break;case"LLLL":e=yr(2,ar.Wide,Ss.Standalone);break;case"LLLLL":e=yr(2,ar.Narrow,Ss.Standalone);break;case"w":e=w2(1);break;case"ww":e=w2(2);break;case"W":e=w2(1,!0);break;case"d":e=gi(2,1);break;case"dd":e=gi(2,2);break;case"c":case"cc":e=gi(7,1);break;case"ccc":e=yr(1,ar.Abbreviated,Ss.Standalone);break;case"cccc":e=yr(1,ar.Wide,Ss.Standalone);break;case"ccccc":e=yr(1,ar.Narrow,Ss.Standalone);break;case"cccccc":e=yr(1,ar.Short,Ss.Standalone);break;case"E":case"EE":case"EEE":e=yr(1,ar.Abbreviated);break;case"EEEE":e=yr(1,ar.Wide);break;case"EEEEE":e=yr(1,ar.Narrow);break;case"EEEEEE":e=yr(1,ar.Short);break;case"a":case"aa":case"aaa":e=yr(0,ar.Abbreviated);break;case"aaaa":e=yr(0,ar.Wide);break;case"aaaaa":e=yr(0,ar.Narrow);break;case"b":case"bb":case"bbb":e=yr(0,ar.Abbreviated,Ss.Standalone,!0);break;case"bbbb":e=yr(0,ar.Wide,Ss.Standalone,!0);break;case"bbbbb":e=yr(0,ar.Narrow,Ss.Standalone,!0);break;case"B":case"BB":case"BBB":e=yr(0,ar.Abbreviated,Ss.Format,!0);break;case"BBBB":e=yr(0,ar.Wide,Ss.Format,!0);break;case"BBBBB":e=yr(0,ar.Narrow,Ss.Format,!0);break;case"h":e=gi(3,1,-12);break;case"hh":e=gi(3,2,-12);break;case"H":e=gi(3,1);break;case"HH":e=gi(3,2);break;case"m":e=gi(4,1);break;case"mm":e=gi(4,2);break;case"s":e=gi(5,1);break;case"ss":e=gi(5,2);break;case"S":e=gi(6,1);break;case"SS":e=gi(6,2);break;case"SSS":e=gi(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Pw(0);break;case"ZZZZZ":e=Pw(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Pw(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Pw(2);break;default:return null}return b2[n]=e,e}function k4(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function MY(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function OY(n,e,t){let i=n.getTimezoneOffset(),s=k4(e,i);return MY(n,-1*(s-i))}function LY(n){if(w4(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(a=>+a);return Ow(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(SY))return FY(r)}let e=new Date(n);if(!w4(e))throw new at(2311,!1);return e}function FY(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,c,u),e}function w4(n){return n instanceof Date&&!isNaN(n.valueOf())}var Lw=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Uc=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Lw(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),b4(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);b4(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(_t(Pu),_t(Hl),_t(m2))};static \u0275dir=Or({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function b4(n,e){n.context.$implicit=e.item}var uh=(()=>{class n{_viewContainer;_context=new Fw;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){E4(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){E4(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(_t(Pu),_t(Hl))};static \u0275dir=Or({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Fw=class{$implicit=null;ngIf=null};function E4(n,e){if(n&&!n.createEmbeddedView)throw new at(2020,!1)}function VY(n,e){return new at(2100,!1)}var BY="mediumDate",M4=new wt(""),O4=new wt(""),iy=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let o=r??this.defaultOptions?.dateFormat??BY,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return R4(t,o,s||this.locale,a)}catch(o){throw VY(n,o.message)}}static \u0275fac=function(r){return new(r||n)(_t(Ym,16),_t(M4,24),_t(O4,24))};static \u0275pipe=XS({name:"date",type:n,pure:!0})}return n})();var Bo=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ja({type:n});static \u0275inj=pa({})}return n})();function E2(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var sy=class{};var L4="browser";var ay=class{_doc;constructor(e){this._doc=e}manager},Vw=(()=>{class n extends ay{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(Bt(Js))};static \u0275prov=gt({token:n,factory:n.\u0275fac})}return n})(),Uw=new wt(""),S2=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this});let i=t.filter(o=>!(o instanceof Vw));this._plugins=i.slice().reverse();let s=t.find(o=>o instanceof Vw);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new at(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Bt(Uw),Bt(Ar))};static \u0275prov=gt({token:n,factory:n.\u0275fac})}return n})(),I2="ng-app-id";function F4(n){for(let e of n)e.remove()}function V4(n,e){let t=e.createElement("style");return t.textContent=n,t}function jY(n,e,t,r){let i=n.head?.querySelectorAll(`style[${I2}="${e}"],link[${I2}="${e}"]`);if(i)for(let s of i)s.removeAttribute(I2),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function A2(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var C2=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,jY(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,V4);r?.forEach(i=>this.addUsage(i,this.external,A2))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(F4(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])F4(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,V4(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,A2(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Bt(Js),Bt(dw),Bt(fw,8),Bt(oh))};static \u0275prov=gt({token:n,factory:n.\u0275fac})}return n})(),T2={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},D2=/%COMP%/g;var j4="%COMP%",UY=`_nghost-${j4}`,qY=`_ngcontent-${j4}`,zY=!0,$Y=new wt("",{factory:()=>zY});function HY(n){return qY.replace(D2,n)}function GY(n){return UY.replace(D2,n)}function U4(n,e){return e.map(t=>t.replace(D2,n))}var x2=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,c=null,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new cy(t,o,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof jw?i.applyToHost(t):i instanceof uy&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,p=this.platformIsServer,y=this.tracingService;switch(r.encapsulation){case Ya.Emulated:s=new jw(c,u,r,this.appId,l,o,a,p,y);break;case Ya.ShadowDom:return new Bw(c,t,r,o,a,this.nonce,p,y,u);case Ya.ExperimentalIsolatedShadowDom:return new Bw(c,t,r,o,a,this.nonce,p,y);default:s=new uy(c,u,r,l,o,a,p,y);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Bt(S2),Bt(C2),Bt(dw),Bt($Y),Bt(Js),Bt(Ar),Bt(fw),Bt(ah,8))};static \u0275prov=gt({token:n,factory:n.\u0275fac})}return n})(),cy=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(T2[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(B4(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(B4(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new at(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=T2[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=T2[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Vc.DashCase|Vc.Important)?e.style.setProperty(t,r,i&Vc.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Vc.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Vo().getGlobalEventTarget(this.doc,e),!e))throw new at(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function B4(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Bw=class extends cy{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,s,o,a,c,u){super(e,i,s,a,c),this.hostEl=t,this.sharedStylesHost=u,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let l=r.styles;l=U4(r.id,l);for(let y of l){let g=document.createElement("style");o&&g.setAttribute("nonce",o),g.textContent=y,this.shadowRoot.appendChild(g)}let p=r.getExternalStyles?.();if(p)for(let y of p){let g=A2(y,i);o&&g.setAttribute("nonce",o),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},uy=class extends cy{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c,u){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=u?U4(u,l):l,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Qf.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},jw=class extends uy{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c,u){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,u,l),this.contentAttr=HY(l),this.hostAttr=GY(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var qw=class n extends Xm{supportsDOMEvents=!0;static makeCurrent(){y2(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=WY();return t==null?null:KY(t)}resetBaseElement(){ly=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return E2(document.cookie,e)}},ly=null;function WY(){return ly=ly||document.head.querySelector("base"),ly?ly.getAttribute("href"):null}function KY(n){return new URL(n,document.baseURI).pathname}var zw=class{addToWindow(e){Es.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new at(5103,!1);return s},Es.getAllAngularTestabilities=()=>e.getAllTestabilities(),Es.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Es.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(a=>{a.whenStable(o)})};Es.frameworkStabilizers||(Es.frameworkStabilizers=[]),Es.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Vo().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},QY=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=gt({token:n,factory:n.\u0275fac})}return n})(),q4=["alt","control","meta","shift"],YY={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},JY={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},z4=(()=>{class n extends ay{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Vo().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),q4.forEach(u=>{let l=r.indexOf(u);l>-1&&(r.splice(l,1),o+=u+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=YY[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),q4.forEach(o=>{if(o!==i){let a=JY[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Bt(Js))};static \u0275prov=gt({token:n,factory:n.\u0275fac})}return n})();function N2(n,e,t){let r=Le({rootComponent:n,platformRef:t?.platformRef},ZY(e));return h4(r)}function ZY(n){return{appProviders:[...$4,...n?.providers??[]],platformProviders:nJ}}function XY(){qw.makeCurrent()}function eJ(){return new Pc}function tJ(){return PS(document),document}var nJ=[{provide:oh,useValue:L4},{provide:hw,useValue:XY,multi:!0},{provide:Js,useFactory:tJ}];var rJ=[{provide:Tw,useClass:zw},{provide:Iw,useClass:Hm},{provide:Hm,useClass:Hm}],$4=[{provide:Im,useValue:"root"},{provide:Pc,useFactory:eJ},{provide:Uw,useClass:Vw,multi:!0},{provide:Uw,useClass:z4,multi:!0},x2,C2,S2,{provide:rh,useExisting:x2},{provide:sy,useClass:QY},[]],R2=(()=>{class n{constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ja({type:n});static \u0275inj=pa({providers:[...$4,...rJ],imports:[Bo,d4]})}return n})();var H4=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Bt(Js))};static \u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Zt="primary",Iy=Symbol("RouteTitle"),L2=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function fh(n){return new L2(n)}function e3(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Qw(n){return new Promise((e,t)=>{n.pipe(Su()).subscribe({next:r=>e(r),error:r=>t(r)})})}function oJ(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!qc(n[t],e[t]))return!1;return!0}function qc(n,e){let t=n?F2(n):void 0,r=e?F2(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!t3(n[i],e[i]))return!1;return!0}function F2(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function t3(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function n3(n){return n.length>0?n[n.length-1]:null}function gh(n){return p0(n)?n:Kl(n)?Br(Promise.resolve(n)):vn(n)}function r3(n){return p0(n)?Qw(n):Promise.resolve(n)}var aJ={exact:s3,subset:o3},i3={exact:cJ,subset:uJ,ignored:()=>!0};function G4(n,e,t){return aJ[t.paths](n.root,e.root,t.matrixParams)&&i3[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function cJ(n,e){return qc(n,e)}function s3(n,e,t){if(!dh(n.segments,e.segments)||!Gw(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!s3(n.children[r],e.children[r],t))return!1;return!0}function uJ(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>t3(n[t],e[t]))}function o3(n,e,t){return a3(n,e,e.segments,t)}function a3(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!dh(i,t)||e.hasChildren()||!Gw(i,t,r))}else if(n.segments.length===t.length){if(!dh(n.segments,t)||!Gw(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!o3(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!dh(n.segments,i)||!Gw(n.segments,i,r)||!n.children[Zt]?!1:a3(n.children[Zt],e,s,r)}}function Gw(n,e,t){return e.every((r,i)=>i3[t](n[i].parameters,r.parameters))}var tc=class{root;queryParams;fragment;_queryParamMap;constructor(e=new $n([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=fh(this.queryParams),this._queryParamMap}toString(){return hJ.serialize(this)}},$n=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ww(this)}},Jl=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=fh(this.parameters),this._parameterMap}toString(){return u3(this)}};function lJ(n,e){return dh(n,e)&&n.every((t,r)=>qc(t.parameters,e[r].parameters))}function dh(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function dJ(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Zt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Zt&&(t=t.concat(e(i,r)))}),t}var Ty=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=gt({token:n,factory:()=>new Zl,providedIn:"root"})}return n})(),Zl=class{parse(e){let t=new B2(e);return new tc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${dy(e.root,!0)}`,r=gJ(e.queryParams),i=typeof e.fragment=="string"?`#${fJ(e.fragment)}`:"";return`${t}${r}${i}`}},hJ=new Zl;function Ww(n){return n.segments.map(e=>u3(e)).join("/")}function dy(n,e){if(!n.hasChildren())return Ww(n);if(e){let t=n.children[Zt]?dy(n.children[Zt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Zt&&r.push(`${i}:${dy(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=dJ(n,(r,i)=>i===Zt?[dy(n.children[Zt],!1)]:[`${i}:${dy(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Zt]!=null?`${Ww(n)}/${t[0]}`:`${Ww(n)}/(${t.join("//")})`}}function c3(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $w(n){return c3(n).replace(/%3B/gi,";")}function fJ(n){return encodeURI(n)}function V2(n){return c3(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Kw(n){return decodeURIComponent(n)}function W4(n){return Kw(n.replace(/\+/g,"%20"))}function u3(n){return`${V2(n.path)}${pJ(n.parameters)}`}function pJ(n){return Object.entries(n).map(([e,t])=>`;${V2(e)}=${V2(t)}`).join("")}function gJ(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${$w(t)}=${$w(i)}`).join("&"):`${$w(t)}=${$w(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var mJ=/^[^\/()?;#]+/;function P2(n){let e=n.match(mJ);return e?e[0]:""}var yJ=/^[^\/()?;=#]+/;function vJ(n){let e=n.match(yJ);return e?e[0]:""}var _J=/^[^=?&#]+/;function wJ(n){let e=n.match(_J);return e?e[0]:""}var bJ=/^[^&#]+/;function EJ(n){let e=n.match(bJ);return e?e[0]:""}var B2=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new $n([],{}):new $n([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Zt]=new $n(e,t)),r}parseSegment(){let e=P2(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new at(4009,!1);return this.capture(e),new Jl(Kw(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=vJ(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=P2(this.remaining);i&&(r=i,this.capture(r))}e[Kw(t)]=Kw(r)}parseQueryParam(e){let t=wJ(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=EJ(this.remaining);o&&(r=o,this.capture(r))}let i=W4(t),s=W4(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=P2(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new at(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Zt);let o=this.parseChildren();t[s??Zt]=Object.keys(o).length===1&&o[Zt]?o[Zt]:new $n([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new at(4011,!1)}};function l3(n){return n.segments.length>0?new $n([],{[Zt]:n}):n}function d3(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=d3(i);if(r===Zt&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new $n(n.segments,e);return IJ(t)}function IJ(n){if(n.numberOfChildren===1&&n.children[Zt]){let e=n.children[Zt];return new $n(n.segments.concat(e.segments),e.children)}return n}function Xl(n){return n instanceof tc}function h3(n,e,t=null,r=null,i=new Zl){let s=f3(n);return p3(s,e,t,r,i)}function f3(n){let e;function t(s){let o={};for(let c of s.children){let u=t(c);o[c.outlet]=u}let a=new $n(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=l3(r);return e??i}function p3(n,e,t,r,i){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return k2(s,s,s,t,r,i);let o=TJ(e);if(o.toRoot())return k2(s,s,new $n([],{}),t,r,i);let a=AJ(o,s,n),c=a.processChildren?fy(a.segmentGroup,a.index,o.commands):m3(a.segmentGroup,a.index,o.commands);return k2(s,a.segmentGroup,c,t,r,i)}function Yw(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function my(n){return typeof n=="object"&&n!=null&&n.outlets}function K4(n,e,t){n||="\u0275";let r=new tc;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function k2(n,e,t,r,i,s){let o={};for(let[u,l]of Object.entries(r??{}))o[u]=Array.isArray(l)?l.map(p=>K4(u,p,s)):K4(u,l,s);let a;n===e?a=t:a=g3(n,e,t);let c=l3(d3(a));return new tc(c,o,i)}function g3(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=g3(s,e,t)}),new $n(n.segments,r)}var Jw=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Yw(r[0]))throw new at(4003,!1);let i=r.find(my);if(i&&i!==n3(r))throw new at(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function TJ(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Jw(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Jw(t,e,r)}var sp=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function AJ(n,e,t){if(n.isAbsolute)return new sp(e,!0,0);if(!t)return new sp(e,!1,NaN);if(t.parent===null)return new sp(t,!0,0);let r=Yw(n.commands[0])?0:1,i=t.segments.length-1+r;return SJ(t,i,n.numberOfDoubleDots)}function SJ(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new at(4005,!1);i=r.segments.length}return new sp(r,!1,i-s)}function CJ(n){return my(n[0])?n[0].outlets:{[Zt]:n}}function m3(n,e,t){if(n??=new $n([],{}),n.segments.length===0&&n.hasChildren())return fy(n,e,t);let r=DJ(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new $n(n.segments.slice(0,r.pathIndex),{});return s.children[Zt]=new $n(n.segments.slice(r.pathIndex),n.children),fy(s,0,i)}else return r.match&&i.length===0?new $n(n.segments,{}):r.match&&!n.hasChildren()?j2(n,e,t):r.match?fy(n,0,i):j2(n,e,t)}function fy(n,e,t){if(t.length===0)return new $n(n.segments,{});{let r=CJ(t),i={};if(Object.keys(r).some(s=>s!==Zt)&&n.children[Zt]&&n.numberOfChildren===1&&n.children[Zt].segments.length===0){let s=fy(n.children[Zt],e,t);return new $n(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=m3(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new $n(n.segments,i)}}function DJ(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(my(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!Y4(c,u,o))return s;r+=2}else{if(!Y4(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function j2(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(my(s)){let c=xJ(s.outlets);return new $n(r,c)}if(i===0&&Yw(t[0])){let c=n.segments[e];r.push(new Jl(c.path,Q4(t[0]))),i++;continue}let o=my(s)?s.outlets[Zt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Yw(a)?(r.push(new Jl(o,Q4(a))),i+=2):(r.push(new Jl(o,{})),i++)}return new $n(r,{})}function xJ(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=j2(new $n([],{}),0,r))}),e}function Q4(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Y4(n,e,t){return n==t.path&&qc(e,t.parameters)}var py="imperative",Qi=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Qi||{}),Uo=class{id;url;constructor(e,t){this.id=e,this.url=t}},ph=class extends Uo{type=Qi.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},nc=class extends Uo{urlAfterRedirects;type=Qi.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Xs=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Xs||{}),yy=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(yy||{}),zc=class extends Uo{reason;code;type=Qi.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Fu=class extends Uo{reason;code;type=Qi.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},ap=class extends Uo{error;target;type=Qi.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},vy=class extends Uo{urlAfterRedirects;state;type=Qi.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zw=class extends Uo{urlAfterRedirects;state;type=Qi.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xw=class extends Uo{urlAfterRedirects;state;shouldActivate;type=Qi.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},e1=class extends Uo{urlAfterRedirects;state;type=Qi.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},t1=class extends Uo{urlAfterRedirects;state;type=Qi.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},n1=class{route;type=Qi.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},r1=class{route;type=Qi.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},i1=class{snapshot;type=Qi.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},s1=class{snapshot;type=Qi.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},o1=class{snapshot;type=Qi.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},a1=class{snapshot;type=Qi.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var _y=class{},cp=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function NJ(n){return!(n instanceof _y)&&!(n instanceof cp)}function RJ(n,e){return n.providers&&!n._injector&&(n._injector=$m(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ec(n){return n.outlet||Zt}function PJ(n,e){let t=n.filter(r=>ec(r)===e);return t.push(...n.filter(r=>ec(r)!==e)),t}function dp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var c1=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return dp(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new hp(this.rootInjector)}},hp=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new c1(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Bt(Oi))};static \u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),u1=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=U2(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=U2(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=q2(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return q2(e,this._root).map(t=>t.value)}};function U2(n,e){if(n===e.value)return e;for(let t of e.children){let r=U2(n,t);if(r)return r}return null}function q2(n,e){if(n===e.value)return[e];for(let t of e.children){let r=q2(n,t);if(r.length)return r.unshift(e),r}return[]}var jo=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ip(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var wy=class extends u1{snapshot;constructor(e,t){super(e),this.snapshot=t,K2(this,e)}toString(){return this.snapshot.toString()}};function y3(n){let e=kJ(n),t=new di([new Jl("",{})]),r=new di({}),i=new di({}),s=new di({}),o=new di(""),a=new Vu(t,r,s,o,i,Zt,n,e.root);return a.snapshot=e.root,new wy(new jo(a,[]),e)}function kJ(n){let e={},t={},r={},s=new hh([],e,r,"",t,Zt,n,null,{});return new by("",new jo(s,[]))}var Vu=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(nr(u=>u[Iy]))??vn(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(nr(e=>fh(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(nr(e=>fh(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function l1(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:Le(Le({},e.params),n.params),data:Le(Le({},e.data),n.data),resolve:Le(Le(Le(Le({},n.data),e.data),i?.data),n._resolvedData)}:r={params:Le({},n.params),data:Le({},n.data),resolve:Le(Le({},n.data),n._resolvedData??{})},i&&_3(i)&&(r.resolve[Iy]=i.title),r}var hh=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Iy]}constructor(e,t,r,i,s,o,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=fh(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=fh(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},by=class extends u1{url;constructor(e,t){super(t),this.url=e,K2(this,t)}toString(){return v3(this._root)}};function K2(n,e){e.value._routerState=n,e.children.forEach(t=>K2(n,t))}function v3(n){let e=n.children.length>0?` { ${n.children.map(v3).join(", ")} } `:"";return`${n.value}${e}`}function M2(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,qc(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),qc(e.params,t.params)||n.paramsSubject.next(t.params),oJ(e.url,t.url)||n.urlSubject.next(t.url),qc(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function z2(n,e){let t=qc(n.params,e.params)&&lJ(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||z2(n.parent,e.parent))}function _3(n){return typeof n.title=="string"||n.title===null}var w3=new wt(""),Ay=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Zt;activateEvents=new fi;deactivateEvents=new fi;attachEvents=new fi;detachEvents=new fi;routerOutletData=l4();parentContexts=ze(hp);location=ze(Pu);changeDetector=ze(Ql);inputBinder=ze(p1,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new at(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new at(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new at(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new at(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new $2(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Or({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Bc]})}return n})(),$2=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Vu?this.route:e===hp?this.childContexts:e===w3?this.outletData:this.parent.get(e,t)}},p1=new wt("");var Q2=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Zs({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Za(0,"router-outlet")},dependencies:[Ay],encapsulation:2})}return n})();function Y2(n){let e=n.children&&n.children.map(Y2),t=e?Ht(Le({},n),{children:e}):Le({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Zt&&(t.component=Q2),t}function MJ(n,e,t){let r=Ey(n,e._root,t?t._root:void 0);return new wy(r,e)}function Ey(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=OJ(n,e,t);return new jo(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ey(n,a)),o}}let r=LJ(e.value),i=e.children.map(s=>Ey(n,s));return new jo(r,i)}}function OJ(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ey(n,r,i);return Ey(n,r)})}function LJ(n){return new Vu(new di(n.url),new di(n.params),new di(n.queryParams),new di(n.fragment),new di(n.data),n.outlet,n.component,n)}var up=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},b3="ngNavigationCancelingError";function d1(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Xl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=E3(!1,Xs.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function E3(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[b3]=!0,t.cancellationCode=e,t}function FJ(n){return I3(n)&&Xl(n.url)}function I3(n){return!!n&&n[b3]}var VJ=(n,e,t,r)=>nr(i=>(new H2(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),H2=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),M2(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ip(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ip(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ip(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ip(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new a1(s.value.snapshot))}),e.children.length&&this.forwardEvent(new s1(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(M2(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),M2(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},h1=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},op=class{component;route;constructor(e,t){this.component=e,this.route=t}};function BJ(n,e,t){let r=n._root,i=e?e._root:null;return hy(r,i,t,[r.value])}function jJ(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function fp(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!aA(n)?n:e.get(n):r}function hy(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ip(e);return n.children.forEach(o=>{UJ(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>gy(a,t.getContext(o),i)),i}function UJ(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=qJ(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new h1(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?hy(n,e,a?a.children:null,r,i):hy(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new op(a.outlet.component,o))}else o&&gy(e,a,i),i.canActivateChecks.push(new h1(r)),s.component?hy(n,null,a?a.children:null,r,i):hy(n,null,t,r,i);return i}function qJ(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!dh(n.url,e.url);case"pathParamsOrQueryParamsChange":return!dh(n.url,e.url)||!qc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!z2(n,e)||!qc(n.queryParams,e.queryParams);case"paramsChange":default:return!z2(n,e)}}function gy(n,e,t){let r=ip(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?gy(o,e.children.getContext(s),t):gy(o,null,t):gy(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new op(e.outlet.component,i)):t.canDeactivateChecks.push(new op(null,i)):t.canDeactivateChecks.push(new op(null,i))}function Sy(n){return typeof n=="function"}function zJ(n){return typeof n=="boolean"}function $J(n){return n&&Sy(n.canLoad)}function HJ(n){return n&&Sy(n.canActivate)}function GJ(n){return n&&Sy(n.canActivateChild)}function WJ(n){return n&&Sy(n.canDeactivate)}function KJ(n){return n&&Sy(n.canMatch)}function T3(n){return n instanceof zd||n?.name==="EmptyError"}var Hw=Symbol("INITIAL_VALUE");function lp(){return Nc(n=>VT(n.map(e=>e.pipe(Au(1),_0(Hw)))).pipe(nr(e=>{for(let t of e)if(t!==!0){if(t===Hw)return Hw;if(t===!1||QJ(t))return t}return!0}),ha(e=>e!==Hw),Au(1)))}function QJ(n){return Xl(n)||n instanceof up}function A3(n){return n.aborted?vn(void 0).pipe(Au(1)):new dn(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function S3(n){return gm(A3(n))}function YJ(n,e){return bs(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?vn(Ht(Le({},t),{guardsResult:!0})):JJ(o,r,i,n).pipe(bs(a=>a&&zJ(a)?ZJ(r,s,n,e):vn(a)),nr(a=>Ht(Le({},t),{guardsResult:a})))})}function JJ(n,e,t,r){return Br(n).pipe(bs(i=>rZ(i.component,i.route,t,e,r)),Su(i=>i!==!0,!0))}function ZJ(n,e,t,r){return Br(e).pipe(pm(i=>Pf(eZ(i.route.parent,r),XJ(i.route,r),nZ(n,i.path,t),tZ(n,i.route,t))),Su(i=>i!==!0,!0))}function XJ(n,e){return n!==null&&e&&e(new o1(n)),vn(!0)}function eZ(n,e){return n!==null&&e&&e(new i1(n)),vn(!0)}function tZ(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return vn(!0);let i=r.map(s=>fm(()=>{let o=dp(e)??t,a=fp(s,o),c=HJ(a)?a.canActivate(e,n):Li(o,()=>a(e,n));return gh(c).pipe(Su())}));return vn(i).pipe(lp())}function nZ(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>jJ(o)).filter(o=>o!==null).map(o=>fm(()=>{let a=o.guards.map(c=>{let u=dp(o.node)??t,l=fp(c,u),p=GJ(l)?l.canActivateChild(r,n):Li(u,()=>l(r,n));return gh(p).pipe(Su())});return vn(a).pipe(lp())}));return vn(s).pipe(lp())}function rZ(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return vn(!0);let o=s.map(a=>{let c=dp(e)??i,u=fp(a,c),l=WJ(u)?u.canDeactivate(n,e,t,r):Li(c,()=>u(n,e,t,r));return gh(l).pipe(Su())});return vn(o).pipe(lp())}function iZ(n,e,t,r,i){let s=e.canLoad;if(s===void 0||s.length===0)return vn(!0);let o=s.map(a=>{let c=fp(a,n),u=$J(c)?c.canLoad(e,t):Li(n,()=>c(e,t)),l=gh(u);return i?l.pipe(S3(i)):l});return vn(o).pipe(lp(),C3(r))}function C3(n){return Z_(Ws(e=>{if(typeof e!="boolean")throw d1(n,e)}),nr(e=>e===!0))}function sZ(n,e,t,r,i){let s=e.canMatch;if(!s||s.length===0)return vn(!0);let o=s.map(a=>{let c=fp(a,n),u=KJ(c)?c.canMatch(e,t):Li(n,()=>c(e,t)),l=gh(u);return i?l.pipe(S3(i)):l});return vn(o).pipe(lp(),C3(r))}var lh=class D3 extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,D3.prototype)}},G2=class x3 extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,x3.prototype)}};function oZ(n){throw new at(4e3,!1)}function aZ(n){throw E3(!1,Xs.GuardRejected)}var cZ=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[Zt])throw oZ(`${e.redirectTo}`);i=i.children[Zt]}}async applyRedirectCommands(e,t,r,i,s){let o=await uZ(t,i,s);if(o instanceof tc)throw new G2(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new G2(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new tc(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new $n(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new at(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function uZ(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,params:u,data:l,title:p}=e;return Qw(gh(Li(t,()=>r({params:u,data:l,queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,title:p}))))}var W2={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function lZ(n,e,t,r,i,s){let o=N3(n,e,t);return o.matched?(r=RJ(e,r),sZ(r,e,t,i,s).pipe(nr(a=>a===!0?o:Le({},W2)))):vn(o)}function N3(n,e,t){if(e.path==="**")return dZ(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?Le({},W2):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||e3)(t,n,e);if(!i)return Le({},W2);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?Le(Le({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function dZ(n){return{matched:!0,parameters:n.length>0?n3(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function J4(n,e,t,r){return t.length>0&&pZ(n,t,r)?{segmentGroup:new $n(e,fZ(r,new $n(t,n.children))),slicedSegments:[]}:t.length===0&&gZ(n,t,r)?{segmentGroup:new $n(n.segments,hZ(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new $n(n.segments,n.children),slicedSegments:t}}function hZ(n,e,t,r){let i={};for(let s of t)if(g1(n,e,s)&&!r[ec(s)]){let o=new $n([],{});i[ec(s)]=o}return Le(Le({},r),i)}function fZ(n,e){let t={};t[Zt]=e;for(let r of n)if(r.path===""&&ec(r)!==Zt){let i=new $n([],{});t[ec(r)]=i}return t}function pZ(n,e,t){return t.some(r=>g1(n,e,r)&&ec(r)!==Zt)}function gZ(n,e,t){return t.some(r=>g1(n,e,r))}function g1(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function mZ(n,e,t){return e.length===0&&!n.children[t]}var yZ=class{};async function vZ(n,e,t,r,i,s,o="emptyOnly",a){return new wZ(n,e,t,r,i,o,s,a).recognize()}var _Z=31,wZ=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new cZ(this.urlSerializer,this.urlTree)}noMatchError(e){return new at(4002,`'${e.segmentGroup}'`)}async recognize(){let e=J4(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new jo(r,t),s=new by("",i),o=h3(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}async match(e){let t=new hh([],Object.freeze({}),Object.freeze(Le({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Zt,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,Zt,t),rootSnapshot:t}}catch(r){if(r instanceof G2)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof lh?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,s){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,s);let o=await this.processSegment(e,t,r,r.segments,i,!0,s);return o instanceof jo?[o]:[]}async processChildren(e,t,r,i){let s=[];for(let c of Object.keys(r.children))c==="primary"?s.unshift(c):s.push(c);let o=[];for(let c of s){let u=r.children[c],l=PJ(t,c),p=await this.processSegmentGroup(e,l,u,c,i);o.push(...p)}let a=R3(o);return bZ(a),a}async processSegment(e,t,r,i,s,o,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a)}catch(u){if(u instanceof lh||T3(u))continue;throw u}if(mZ(r,i,s))return new yZ;throw new lh(r)}async processSegmentAgainstRoute(e,t,r,i,s,o,a,c){if(ec(r)!==o&&(o===Zt||!g1(i,s,r)))throw new lh(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,s,o,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c);throw new lh(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:u,consumedSegments:l,positionalParamSegments:p,remainingSegments:y}=N3(t,i,s);if(!c)throw new lh(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>_Z&&(this.allowRedirects=!1));let g=new hh(s,u,Object.freeze(Le({},this.urlTree.queryParams)),this.urlTree.fragment,Z4(i),ec(i),i.component??i._loadedComponent??null,i,X4(i)),D=l1(g,a,this.paramsInheritanceStrategy);if(g.params=Object.freeze(D.params),g.data=Object.freeze(D.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let M=await this.applyRedirects.applyRedirectCommands(l,i.redirectTo,p,g,e),k=await this.applyRedirects.lineralizeSegments(i,M);return this.processSegment(e,r,t,k.concat(y),o,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,s,o){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await Qw(lZ(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new lh(t);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),u=r._loadedInjector??e,{parameters:l,consumedSegments:p,remainingSegments:y}=a,g=new hh(p,l,Object.freeze(Le({},this.urlTree.queryParams)),this.urlTree.fragment,Z4(r),ec(r),r.component??r._loadedComponent??null,r,X4(r)),D=l1(g,o,this.paramsInheritanceStrategy);g.params=Object.freeze(D.params),g.data=Object.freeze(D.data);let{segmentGroup:M,slicedSegments:k}=J4(t,p,y,c);if(k.length===0&&M.hasChildren()){let W=await this.processChildren(u,c,M,g);return new jo(g,W)}if(c.length===0&&k.length===0)return new jo(g,[]);let O=ec(r)===s,G=await this.processSegment(u,c,M,k,O?Zt:s,!0,g);return new jo(g,G instanceof jo?[G]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await Qw(iZ(e,t,r,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=s.routes,t._loadedInjector=s.injector,s}throw aZ(t)}return{routes:[],injector:e}}};function bZ(n){n.sort((e,t)=>e.value.outlet===Zt?-1:t.value.outlet===Zt?1:e.value.outlet.localeCompare(t.value.outlet))}function EZ(n){let e=n.value.routeConfig;return e&&e.path===""}function R3(n){let e=[],t=new Set;for(let r of n){if(!EZ(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=R3(r.children);e.push(new jo(r.value,i))}return e.filter(r=>!t.has(r))}function Z4(n){return n.data||{}}function X4(n){return n.resolve||{}}var IZ=new wt("",{factory:()=>vZ});function TZ(n,e,t,r,i,s,o){let a=n.get(IZ);return bs(c=>vn(c).pipe(Nc(u=>a(n,e,t,r,u.extractedUrl,i,s,o)),nr(({state:u,tree:l})=>Ht(Le({},c),{targetSnapshot:u,urlAfterRedirects:l}))))}function AZ(n,e){return bs(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return vn(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let u of P3(c))o.add(u);let a=0;return Br(o).pipe(pm(c=>s.has(c)?SZ(c,r,n,e):(c.data=l1(c,c.parent,n).resolve,vn(void 0))),Ws(()=>a++),v0(1),bs(c=>a===o.size?vn(t):ho))})}function P3(n){let e=n.children.map(t=>P3(t)).flat();return[n,...e]}function SZ(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!_3(i)&&(s[Iy]=i.title),fm(()=>(n.data=l1(n,n.parent,t).resolve,CZ(s,n,e,r).pipe(nr(o=>(n._resolvedData=o,n.data=Le(Le({},n.data),o),null)))))}function CZ(n,e,t,r){let i=F2(n);if(i.length===0)return vn({});let s={};return Br(i).pipe(bs(o=>DZ(n[o],e,t,r).pipe(Su(),Ws(a=>{if(a instanceof up)throw d1(new Zl,a);s[o]=a}))),v0(1),nr(()=>s),kf(o=>T3(o)?ho:FT(o)))}function DZ(n,e,t,r){let i=dp(e)??r,s=fp(n,i),o=s.resolve?s.resolve(e,t):Li(i,()=>s(e,t));return gh(o)}function O2(n){return Nc(e=>{let t=n(e);return t?Br(t).pipe(nr(()=>e)):vn(e)})}var J2=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Zt);return r}getResolvedTitleForRoute(t){return t.data[Iy]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=gt({token:n,factory:()=>ze(k3),providedIn:"root"})}return n})(),k3=(()=>{class n extends J2{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Bt(H4))};static \u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pp=new wt("",{factory:()=>({})}),Cy=new wt(""),M3=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=ze(u2);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await r3(Li(t,()=>r.loadComponent())),o=await F3(L3(s));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o,o}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await O3(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=s.routes,r._loadedInjector=s.injector,s}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function O3(n,e,t,r){let i=await r3(Li(t,()=>n.loadChildren())),s=await F3(L3(i)),o;s instanceof Ew||Array.isArray(s)?o=s:o=await e.compileModuleAsync(s),r&&r(n);let a,c,u=!1;return Array.isArray(o)?(c=o,u=!0):(a=o.create(t).injector,c=a.get(Cy,[],{optional:!0,self:!0}).flat()),{routes:c.map(Y2),injector:a}}function xZ(n){return n&&typeof n=="object"&&"default"in n}function L3(n){return xZ(n)?n.default:n}async function F3(n){return n}var m1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=gt({token:n,factory:()=>ze(NZ),providedIn:"root"})}return n})(),NZ=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),V3=new wt("");var RZ=()=>{},B3=new wt(""),j3=(()=>{class n{currentNavigation=us(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=us(null);events=new li;transitionAbortWithErrorSubject=new li;configLoader=ze(M3);environmentInjector=ze(Oi);destroyRef=ze(Ka);urlSerializer=ze(Ty);rootContexts=ze(hp);location=ze(rp);inputBindingEnabled=ze(p1,{optional:!0})!==null;titleStrategy=ze(J2);options=ze(pp,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=ze(m1);createViewTransition=ze(V3,{optional:!0});navigationErrorHandler=ze(B3,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>vn(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new n1(i)),r=i=>this.events.next(new r1(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Fi(()=>{this.transitions?.next(Ht(Le({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new di(null),this.transitions.pipe(ha(r=>r!==null),Nc(r=>{let i=!1,s=new AbortController;return vn(r).pipe(Nc(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Xs.SupersededByNewNavigation),ho;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:a?Ht(Le({},a),{previousNavigation:null}):null,abort:()=>s.abort()});let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&u!=="reload")return this.events.next(new Fu(o.id,this.urlSerializer.serialize(o.rawUrl),"",yy.IgnoredSameUrlNavigation)),o.resolve(!1),ho;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return vn(o).pipe(Nc(l=>(this.events.next(new ph(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?ho:Promise.resolve(l))),TZ(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),Ws(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation.update(y=>(y.finalUrl=l.urlAfterRedirects,y));let p=new vy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(p)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:l,extractedUrl:p,source:y,restoredState:g,extras:D}=o,M=new ph(l,this.urlSerializer.serialize(p),y,g);this.events.next(M);let k=y3(this.rootComponentType).snapshot;return this.currentTransition=r=Ht(Le({},o),{targetSnapshot:k,urlAfterRedirects:p,extras:Ht(Le({},D),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(O=>(O.finalUrl=p,O)),vn(r)}else return this.events.next(new Fu(o.id,this.urlSerializer.serialize(o.extractedUrl),"",yy.IgnoredByUrlHandlingStrategy)),o.resolve(!1),ho}),Ws(o=>{let a=new Zw(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),nr(o=>(this.currentTransition=r=Ht(Le({},o),{guards:BJ(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),YJ(this.environmentInjector,o=>this.events.next(o)),Ws(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw d1(this.urlSerializer,o.guardsResult);let a=new Xw(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),ha(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Xs.GuardRejected),!1)),O2(o=>{if(o.guards.canActivateChecks.length!==0)return vn(o).pipe(Ws(a=>{let c=new e1(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Nc(a=>{let c=!1;return vn(a).pipe(AZ(this.paramsInheritanceStrategy,this.environmentInjector),Ws({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Xs.NoDataFromResolver)}}))}),Ws(a=>{let c=new t1(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),O2(o=>{let a=u=>{let l=[];if(u.routeConfig?._loadedComponent)u.component=u.routeConfig?._loadedComponent;else if(u.routeConfig?.loadComponent){let p=dp(u)??this.environmentInjector;l.push(this.configLoader.loadComponent(p,u.routeConfig).then(y=>{u.component=y}))}for(let p of u.children)l.push(...a(p));return l},c=a(o.targetSnapshot.root);return c.length===0?vn(o):Br(Promise.all(c).then(()=>o))}),O2(()=>this.afterPreactivation()),Nc(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return c?Br(c).pipe(nr(()=>r)):vn(r)}),nr(o=>{let a=MJ(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=Ht(Le({},o),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),Ws(()=>{this.events.next(new _y)}),VJ(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Au(1),gm(A3(s.signal).pipe(ha(()=>!i&&!r.targetRouterState),Ws(()=>{this.cancelNavigationTransition(r,s.signal.reason+"",Xs.Aborted)}))),Ws({next:o=>{i=!0,this.currentNavigation.update(a=>(a.abort=RZ,a)),this.lastSuccessfulNavigation.set(Fi(this.currentNavigation)),this.events.next(new nc(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),gm(this.transitionAbortWithErrorSubject.pipe(Ws(o=>{throw o}))),UT(()=>{s.abort(),i||this.cancelNavigationTransition(r,"",Xs.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),kf(o=>{if(this.destroyed)return r.resolve(!1),ho;if(i=!0,I3(o))this.events.next(new zc(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),FJ(o)?this.events.next(new cp(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new ap(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=Li(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof up){let{message:u,cancellationCode:l}=d1(this.urlSerializer,c);this.events.next(new zc(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new cp(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return ho}))}))}cancelNavigationTransition(t,r,i){let s=new zc(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Fi(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function PZ(n){return n!==py}var U3=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=gt({token:n,factory:()=>ze(kZ),providedIn:"root"})}return n})(),f1=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},kZ=(()=>{class n extends f1{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ba(n)))(i||n)}})();static \u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Z2=(()=>{class n{urlSerializer=ze(Ty);options=ze(pp,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=ze(rp);urlHandlingStrategy=ze(m1);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new tc;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof tc?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=y3(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=gt({token:n,factory:()=>ze(q3),providedIn:"root"})}return n})(),q3=(()=>{class n extends Z2{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof ph?this.updateStateMemento():t instanceof Fu?this.commitTransition(r):t instanceof vy?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof _y?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof zc&&t.code!==Xs.SupersededByNewNavigation&&t.code!==Xs.Redirect?this.restoreHistory(r):t instanceof ap?this.restoreHistory(r,!0):t instanceof nc&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=Le(Le({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=Le(Le({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ba(n)))(i||n)}})();static \u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function X2(n,e){n.events.pipe(ha(t=>t instanceof nc||t instanceof zc||t instanceof ap||t instanceof Fu),nr(t=>t instanceof nc||t instanceof Fu?0:(t instanceof zc?t.code===Xs.Redirect||t.code===Xs.SupersededByNewNavigation:!1)?2:1),ha(t=>t!==2),Au(1)).subscribe(()=>{e()})}var MZ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},OZ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},$c=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=ze(e2);stateManager=ze(Z2);options=ze(pp,{optional:!0})||{};pendingTasks=ze(Nu);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=ze(j3);urlSerializer=ze(Ty);location=ze(rp);urlHandlingStrategy=ze(m1);injector=ze(Oi);_events=new li;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=ze(U3);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=ze(Cy,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!ze(p1,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Mi;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=Fi(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof zc&&r.code!==Xs.Redirect&&r.code!==Xs.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof nc)this.navigated=!0;else if(r instanceof cp){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=Le({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||PZ(i.source)},o);this.scheduleNavigation(a,py,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}NJ(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),py,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=Le({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s).catch(c=>{this.disposed||this.injector.get(wa)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Fi(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Y2),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:o,l=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":l=Le(Le({},this.currentUrlTree.queryParams),s);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=s||null}l!==null&&(l=this.removeEmptyProps(l));let p;try{let y=i?i.snapshot:this.routerState.snapshot.root;p=f3(y)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return p3(p,t,l,u??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Xl(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,py,null,r)}navigate(t,r={skipLocationChange:!1}){return LZ(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Lf(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=Le({},MZ):r===!1?i=Le({},OZ):i=r,Xl(t))return G4(this.currentUrlTree,t,i);let s=this.parseUrl(t);return G4(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,u;o?(a=o.resolve,c=o.reject,u=o.promise):u=new Promise((p,y)=>{a=p,c=y});let l=this.pendingTasks.add();return X2(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(l))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function LZ(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new at(4008,!1)}var gp=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=us(null);get href(){return Fi(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new li;applicationErrorHandler=ze(wa);options=ze(pp,{optional:!0});constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.reactiveHref.set(ze(new Dw("href"),{optional:!0}));let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof nc&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Xl(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(u=>{this.applicationErrorHandler(u)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:Xl(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(_t($c),_t(Vu),qm("tabindex"),_t(jc),_t(po),_t(np))};static \u0275dir=Or({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&rn("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&ch("href",i.reactiveHref(),OS)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",tp],skipLocationChange:[2,"skipLocationChange","skipLocationChange",tp],replaceUrl:[2,"replaceUrl","replaceUrl",tp],routerLink:"routerLink"},features:[Bc]})}return n})(),eC=(()=>{class n{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new fi;link=ze(gp,{optional:!0});constructor(t,r,i,s){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.routerEventsSubscription=t.events.subscribe(o=>{o instanceof nc&&this.update()})}ngAfterContentInit(){vn(this.links.changes,vn(null)).pipe(Rf()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Br(t).pipe(Rf()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=VZ(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let s=i.urlTree;return s?t.isActive(s,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(_t($c),_t(po),_t(jc),_t(Ql))};static \u0275dir=Or({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(r&1&&s2(s,gp,5),r&2){let o;o2(o=a2())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Bc]})}return n})();function VZ(n){return!!n.paths}var BZ=new wt("");function tC(n,...e){return xu([{provide:Cy,multi:!0,useValue:n},[],{provide:Vu,useFactory:jZ},{provide:Aw,multi:!0,useFactory:UZ},e.map(t=>t.\u0275providers)])}function jZ(){return ze($c).routerState.root}function UZ(){let n=ze(Ki);return e=>{let t=n.get(ku);if(e!==t.components[0])return;let r=n.get($c),i=n.get(qZ);n.get(zZ)===1&&r.initialNavigation(),n.get($Z,null,{optional:!0})?.setUpPreloading(),n.get(BZ,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var qZ=new wt("",{factory:()=>new li}),zZ=new wt("",{factory:()=>1});var $Z=new wt("");var Z3=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(_t(jc),_t(po))};static \u0275dir=Or({type:n})}return n})(),b1=(()=>{class n extends Z3{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ba(n)))(i||n)}})();static \u0275dir=Or({type:n,features:[Ia]})}return n})(),ky=new wt("");var HZ={provide:ky,useExisting:fa(()=>Hc),multi:!0};function GZ(){let n=Vo()?Vo().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var WZ=new wt(""),Hc=(()=>{class n extends Z3{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!GZ())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(_t(jc),_t(po),_t(WZ,8))};static \u0275dir=Or({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&rn("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[Mu([HZ]),Ia]})}return n})();function KZ(n){return n==null||X3(n)===0}function X3(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var cC=new wt(""),QZ=new wt("");function YZ(n){return e=>{let t=e.value?.length??X3(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function JZ(n){if(!n)return nC;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(KZ(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function nC(n){return null}function eV(n){return n!=null}function tV(n){return Kl(n)?Br(n):n}function nV(n){let e={};return n.forEach(t=>{e=t!=null?Le(Le({},e),t):e}),Object.keys(e).length===0?null:e}function rV(n,e){return e.map(t=>t(n))}function ZZ(n){return!n.validate}function iV(n){return n.map(e=>ZZ(e)?e:t=>e.validate(t))}function XZ(n){if(!n)return null;let e=n.filter(eV);return e.length==0?null:function(t){return nV(rV(t,e))}}function sV(n){return n!=null?XZ(iV(n)):null}function eX(n){if(!n)return null;let e=n.filter(eV);return e.length==0?null:function(t){let r=rV(t,e).map(tV);return BT(r).pipe(nr(nV))}}function oV(n){return n!=null?eX(iV(n)):null}function $3(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function tX(n){return n._rawValidators}function nX(n){return n._rawAsyncValidators}function rC(n){return n?Array.isArray(n)?n:[n]:[]}function v1(n,e){return Array.isArray(n)?n.includes(e):n===e}function H3(n,e){let t=rC(e);return rC(n).forEach(i=>{v1(t,i)||t.push(i)}),t}function G3(n,e){return rC(e).filter(t=>!v1(n,t))}var _1=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=sV(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=oV(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},iC=class extends _1{name;get formDirective(){return null}get path(){return null}},Py=class extends _1{_parent=null;name=null;valueAccessor=null},sC=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var ed=(()=>{class n extends sC{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(_t(Py,2))};static \u0275dir=Or({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Sw("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Ia]})}return n})();var Dy="VALID",y1="INVALID",mp="PENDING",xy="DISABLED",mh=class{},w1=class extends mh{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Ny=class extends mh{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Ry=class extends mh{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},yp=class extends mh{status;source;constructor(e,t){super(),this.status=e,this.source=t}};var oC=class extends mh{source;constructor(e){super(),this.source=e}};function rX(n){return(E1(n)?n.validators:n)||null}function iX(n){return Array.isArray(n)?sV(n):n||null}function sX(n,e){return(E1(e)?e.asyncValidators:n)||null}function oX(n){return Array.isArray(n)?oV(n):n||null}function E1(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var aC=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Fi(this.statusReactive)}set status(e){Fi(()=>this.statusReactive.set(e))}_status=Jm(()=>this.statusReactive());statusReactive=us(void 0);get valid(){return this.status===Dy}get invalid(){return this.status===y1}get pending(){return this.status==mp}get disabled(){return this.status===xy}get enabled(){return this.status!==xy}errors;get pristine(){return Fi(this.pristineReactive)}set pristine(e){Fi(()=>this.pristineReactive.set(e))}_pristine=Jm(()=>this.pristineReactive());pristineReactive=us(!0);get dirty(){return!this.pristine}get touched(){return Fi(this.touchedReactive)}set touched(e){Fi(()=>this.touchedReactive.set(e))}_touched=Jm(()=>this.touchedReactive());touchedReactive=us(!1);get untouched(){return!this.touched}_events=new li;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(H3(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(H3(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(G3(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(G3(e,this._rawAsyncValidators))}hasValidator(e){return v1(this._rawValidators,e)}hasAsyncValidator(e){return v1(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Ht(Le({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ry(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ry(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Ht(Le({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ny(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ny(!0,r))}markAsPending(e={}){this.status=mp;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new yp(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Ht(Le({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=xy,this.errors=null,this._forEachChild(i=>{i.disable(Ht(Le({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new w1(this.value,r)),this._events.next(new yp(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ht(Le({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Dy,this._forEachChild(r=>{r.enable(Ht(Le({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ht(Le({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Dy||this.status===mp)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new w1(this.value,t)),this._events.next(new yp(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Ht(Le({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xy:Dy}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=mp,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=tV(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new yp(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new fi,this.statusChanges=new fi}_calculateStatus(){return this._allControlsDisabled()?xy:this.errors?y1:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(mp)?mp:this._anyControlsHaveStatus(y1)?y1:Dy}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Ny(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ry(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){E1(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=iX(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=oX(this._rawAsyncValidators)}};var aV=new wt("",{factory:()=>uC}),uC="always";function aX(n,e){return[...e.path,n]}function cX(n,e,t=uC){lX(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),dX(n,e),fX(n,e),hX(n,e),uX(n,e)}function W3(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function uX(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function lX(n,e){let t=tX(n);e.validator!==null?n.setValidators($3(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=nX(n);e.asyncValidator!==null?n.setAsyncValidators($3(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();W3(e._rawValidators,i),W3(e._rawAsyncValidators,i)}function dX(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&cV(n,e)})}function hX(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&cV(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function cV(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function fX(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function pX(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function gX(n){return Object.getPrototypeOf(n.constructor)===b1}function mX(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Hc?t=s:gX(s)?r=s:i=s}),i||r||t||null}function K3(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Q3(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var yX=class extends aC{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(rX(t),sX(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),E1(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Q3(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new oC(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){K3(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){K3(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Q3(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var vX={provide:Py,useExisting:fa(()=>Bu)},Y3=Promise.resolve(),Bu=(()=>{class n extends Py{_changeDetectorRef;callSetDisabledState;control=new yX;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new fi;constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=mX(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),pX(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){cX(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Y3.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&tp(r);Y3.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?aX(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(_t(iC,9),_t(cC,10),_t(QZ,10),_t(ky,10),_t(Ql,8),_t(aV,8))};static \u0275dir=Or({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Mu([vX]),Ia,Bc]})}return n})();var _X={provide:ky,useExisting:fa(()=>yh),multi:!0},yh=(()=>{class n extends b1{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ba(n)))(i||n)}})();static \u0275dir=Or({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&rn("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Mu([_X]),Ia]})}return n})();var wX={provide:ky,useExisting:fa(()=>vp),multi:!0};function uV(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function bX(n){return n.split(":")[0]}var vp=(()=>{class n extends b1{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=ze(ku).injector;destroyRef=ze(Ka);cdr=ze(Ql);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,_w({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=uV(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=bX(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ba(n)))(i||n)}})();static \u0275dir=Or({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&rn("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Mu([wX]),Ia]})}return n})(),I1=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(uV(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(_t(po),_t(jc),_t(vp,9))};static \u0275dir=Or({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),EX={provide:ky,useExisting:fa(()=>lV),multi:!0};function J3(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function IX(n){return n.split(":")[0]}var lV=(()=>{class n extends b1{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],u=this._getOptionValue(c.value);i.push(u)}}else{let o=r.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=IX(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ba(n)))(i||n)}})();static \u0275dir=Or({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&rn("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Mu([EX]),Ia]})}return n})(),T1=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(J3(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(J3(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(_t(po),_t(jc),_t(lV,9))};static \u0275dir=Or({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function TX(n){return typeof n=="number"?n:parseInt(n,10)}var dV=(()=>{class n{_validator=nC;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):nC,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Or({type:n,features:[Bc]})}return n})();var AX={provide:cC,useExisting:fa(()=>lC),multi:!0},lC=(()=>{class n extends dV{maxlength;inputName="maxlength";normalizeInput=t=>TX(t);createValidator=t=>YZ(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=ba(n)))(i||n)}})();static \u0275dir=Or({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ch("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[Mu([AX]),Ia]})}return n})(),SX={provide:cC,useExisting:fa(()=>dC),multi:!0},dC=(()=>{class n extends dV{pattern;inputName="pattern";normalizeInput=t=>t;createValidator=t=>JZ(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=ba(n)))(i||n)}})();static \u0275dir=Or({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ch("pattern",i._enabled?i.pattern:null)},inputs:{pattern:"pattern"},standalone:!1,features:[Mu([SX]),Ia]})}return n})();var CX=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ja({type:n});static \u0275inj=pa({})}return n})();var Sa=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:aV,useValue:t.callSetDisabledState??uC}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ja({type:n});static \u0275inj=pa({imports:[CX]})}return n})();var Ca=class n{cartItems=new di([]);cartCount=new di(0);cartItems$=this.cartItems.asObservable();cartCount$=this.cartCount.asObservable();addToCart(e,t=1){let r=this.cartItems.value,i=r.find(s=>s.menuItem.id===e.id);if(i){if(i.quantity+=t,i.quantity<=0){this.removeFromCart(e.id);return}i.totalPrice=i.quantity*i.menuItem.price}else t>0&&(r.push({menuItem:e,quantity:t,totalPrice:e.price*t}),this.updateCartCount());this.cartItems.next([...r])}updateCartCount(){let t=this.cartItems.value.reduce((r,i)=>r+(i.quantity||0),0);this.cartCount.next(t)}removeFromCart(e){let t=this.cartItems.value.filter(r=>r.menuItem.id!==e);this.updateCartCount(),this.cartItems.next([...t])}clearCart(){this.cartItems.next([]),this.updateCartCount()}getTotalAmount(){return this.cartItems.value.reduce((e,t)=>e+t.totalPrice,0)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"})};var hV=()=>{};var gV=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},DX=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},mV={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,l=s>>2,p=(s&3)<<4|a>>4,y=(a&15)<<2|u>>6,g=u&63;c||(g=64,o||(y=64)),r.push(t[l],t[p],t[y],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(gV(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):DX(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||u==null||p==null)throw new hC;let y=s<<2|a>>4;if(r.push(y),u!==64){let g=a<<4&240|u>>2;if(r.push(g),p!==64){let D=u<<6&192|p;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},hC=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},xX=function(n){let e=gV(n);return mV.encodeByteArray(e,!0)},Ly=function(n){return xX(n).replace(/\./g,"")},yV=function(n){try{return mV.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function vV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var NX=()=>vV().__FIREBASE_DEFAULTS__,RX=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},PX=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&yV(n[1]);return e&&JSON.parse(e)},fC=()=>{try{return hV()||NX()||RX()||PX()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},kX=n=>fC()?.emulatorHosts?.[n],C1=n=>{let e=kX(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},pC=()=>fC()?.config;var S1=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function vh(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function D1(n){return(await fetch(n,{credentials:"include"})).ok}function x1(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Le({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ly(JSON.stringify(t)),Ly(JSON.stringify(o)),""].join(".")}var Oy={};function MX(){let n={prod:[],emulator:[]};for(let e of Object.keys(Oy))Oy[e]?n.emulator.push(e):n.prod.push(e);return n}function OX(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var fV=!1;function N1(n,e){if(typeof window>"u"||typeof document>"u"||!vh(window.location.host)||Oy[n]===e||Oy[n]||fV)return;Oy[n]=e;function t(y){return`__firebase__banner__${y}`}let r="__firebase__banner",s=MX().prod.length>0;function o(){let y=document.getElementById(r);y&&y.remove()}function a(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function c(y,g){y.setAttribute("width","24"),y.setAttribute("id",g),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function u(){let y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{fV=!0,o()},y}function l(y,g){y.setAttribute("id",g),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function p(){let y=OX(r),g=t("text"),D=document.getElementById(g)||document.createElement("span"),M=t("learnmore"),k=document.getElementById(M)||document.createElement("a"),O=t("preprendIcon"),G=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){let W=y.element;a(W),l(k,M);let K=u();c(G,O),W.append(G,D,k,K),document.body.appendChild(W)}s?(D.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function _V(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LX(){let n=fC()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wV(){return!LX()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gC(){try{return typeof indexedDB=="object"}catch{return!1}}function bV(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var FX="FirebaseError",rc=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=FX,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fy.prototype.create)}},Fy=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?VX(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new rc(i,a,r)}};function VX(n,e){return n.replace(BX,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var BX=/\{\$([^}]+)}/g;function _p(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(pV(s)&&pV(o)){if(!_p(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function pV(n){return n!==null&&typeof n=="object"}var TDe=14400*1e3;function Yi(n){return n&&n._delegate?n._delegate:n}var ic=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var _h="[DEFAULT]";var mC=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new S1;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(UX(e))try{this.getOrInitializeService({instanceIdentifier:_h})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=_h){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_h){return this.instances.has(e)}getOptions(e=_h){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jX(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_h){return this.component?this.component.multipleInstances?e:_h:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function jX(n){return n===_h?void 0:n}function UX(n){return n.instantiationMode==="EAGER"}var R1=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new mC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var qX=[],Pn=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Pn||{}),zX={debug:Pn.DEBUG,verbose:Pn.VERBOSE,info:Pn.INFO,warn:Pn.WARN,error:Pn.ERROR,silent:Pn.SILENT},$X=Pn.INFO,HX={[Pn.DEBUG]:"log",[Pn.VERBOSE]:"log",[Pn.INFO]:"info",[Pn.WARN]:"warn",[Pn.ERROR]:"error"},GX=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=HX[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},wp=class{constructor(e){this.name=e,this._logLevel=$X,this._logHandler=GX,this._userLogHandler=null,qX.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zX[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pn.DEBUG,...e),this._logHandler(this,Pn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pn.VERBOSE,...e),this._logHandler(this,Pn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pn.INFO,...e),this._logHandler(this,Pn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pn.WARN,...e),this._logHandler(this,Pn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pn.ERROR,...e),this._logHandler(this,Pn.ERROR,...e)}};var WX=(n,e)=>e.some(t=>n instanceof t),EV,IV;function KX(){return EV||(EV=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QX(){return IV||(IV=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var TV=new WeakMap,vC=new WeakMap,AV=new WeakMap,yC=new WeakMap,wC=new WeakMap;function YX(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Gc(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&TV.set(t,n)}).catch(()=>{}),wC.set(e,n),e}function JX(n){if(vC.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});vC.set(n,e)}var _C={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return vC.get(n);if(e==="objectStoreNames")return n.objectStoreNames||AV.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Gc(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function SV(n){_C=n(_C)}function ZX(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(P1(this),e,...t);return AV.set(r,e.sort?e.sort():[e]),Gc(r)}:QX().includes(n)?function(...e){return n.apply(P1(this),e),Gc(TV.get(this))}:function(...e){return Gc(n.apply(P1(this),e))}}function XX(n){return typeof n=="function"?ZX(n):(n instanceof IDBTransaction&&JX(n),WX(n,KX())?new Proxy(n,_C):n)}function Gc(n){if(n instanceof IDBRequest)return YX(n);if(yC.has(n))return yC.get(n);let e=XX(n);return e!==n&&(yC.set(n,e),wC.set(e,n)),e}var P1=n=>wC.get(n);function k1(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Gc(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Gc(o.result),c.oldVersion,c.newVersion,Gc(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var eee=["get","getKey","getAll","getAllKeys","count"],tee=["put","add","delete","clear"],bC=new Map;function CV(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(bC.get(e))return bC.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=tee.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||eee.includes(t)))return;let s=async function(o,...a){let c=this.transaction(o,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),i&&c.done]))[0]};return bC.set(e,s),s}SV(n=>Ht(Le({},n),{get:(e,t,r)=>CV(e,t)||n.get(e,t,r),has:(e,t)=>!!CV(e,t)||n.has(e,t)}));var IC=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(nee(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function nee(n){return n.getComponent()?.type==="VERSION"}var TC="@firebase/app",DV="0.14.6";var ju=new wp("@firebase/app"),ree="@firebase/app-compat",iee="@firebase/analytics-compat",see="@firebase/analytics",oee="@firebase/app-check-compat",aee="@firebase/app-check",cee="@firebase/auth",uee="@firebase/auth-compat",lee="@firebase/database",dee="@firebase/data-connect",hee="@firebase/database-compat",fee="@firebase/functions",pee="@firebase/functions-compat",gee="@firebase/installations",mee="@firebase/installations-compat",yee="@firebase/messaging",vee="@firebase/messaging-compat",_ee="@firebase/performance",wee="@firebase/performance-compat",bee="@firebase/remote-config",Eee="@firebase/remote-config-compat",Iee="@firebase/storage",Tee="@firebase/storage-compat",Aee="@firebase/firestore",See="@firebase/ai",Cee="@firebase/firestore-compat",Dee="firebase",xee="12.6.0";var AC="[DEFAULT]",Nee={[TC]:"fire-core",[ree]:"fire-core-compat",[see]:"fire-analytics",[iee]:"fire-analytics-compat",[aee]:"fire-app-check",[oee]:"fire-app-check-compat",[cee]:"fire-auth",[uee]:"fire-auth-compat",[lee]:"fire-rtdb",[dee]:"fire-data-connect",[hee]:"fire-rtdb-compat",[fee]:"fire-fn",[pee]:"fire-fn-compat",[gee]:"fire-iid",[mee]:"fire-iid-compat",[yee]:"fire-fcm",[vee]:"fire-fcm-compat",[_ee]:"fire-perf",[wee]:"fire-perf-compat",[bee]:"fire-rc",[Eee]:"fire-rc-compat",[Iee]:"fire-gcs",[Tee]:"fire-gcs-compat",[Aee]:"fire-fst",[Cee]:"fire-fst-compat",[See]:"fire-vertex","fire-js":"fire-js",[Dee]:"fire-js-all"};var M1=new Map,Ree=new Map,SC=new Map;function xV(n,e){try{n.container.addComponent(e)}catch(t){ju.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function wh(n){let e=n.name;if(SC.has(e))return ju.debug(`There were multiple attempts to register component ${e}.`),!1;SC.set(e,n);for(let t of M1.values())xV(t,n);for(let t of Ree.values())xV(t,n);return!0}function O1(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function L1(n){return n==null?!1:n.settings!==void 0}var Pee={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},td=new Fy("app","Firebase",Pee);var CC=class{constructor(e,t,r){this._isDeleted=!1,this._options=Le({},e),this._config=Le({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ic("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw td.create("app-deleted",{appName:this._name})}};var F1=xee;function NC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Le({name:AC,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw td.create("bad-app-name",{appName:String(i)});if(t||(t=pC()),!t)throw td.create("no-options");let s=M1.get(i);if(s){if(_p(t,s.options)&&_p(r,s.config))return s;throw td.create("duplicate-app",{appName:i})}let o=new R1(i);for(let c of SC.values())o.addComponent(c);let a=new CC(t,r,o);return M1.set(i,a),a}function V1(n=AC){let e=M1.get(n);if(!e&&n===AC&&pC())return NC();if(!e)throw td.create("no-app",{appName:n});return e}function sc(n,e,t){let r=Nee[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ju.warn(o.join(" "));return}wh(new ic(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var kee="firebase-heartbeat-database",Mee=1,Vy="firebase-heartbeat-store",EC=null;function kV(){return EC||(EC=k1(kee,Mee,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Vy)}catch(t){console.warn(t)}}}}).catch(n=>{throw td.create("idb-open",{originalErrorMessage:n.message})})),EC}async function Oee(n){try{let t=(await kV()).transaction(Vy),r=await t.objectStore(Vy).get(MV(n));return await t.done,r}catch(e){if(e instanceof rc)ju.warn(e.message);else{let t=td.create("idb-get",{originalErrorMessage:e?.message});ju.warn(t.message)}}}async function NV(n,e){try{let r=(await kV()).transaction(Vy,"readwrite");await r.objectStore(Vy).put(e,MV(n)),await r.done}catch(t){if(t instanceof rc)ju.warn(t.message);else{let r=td.create("idb-set",{originalErrorMessage:t?.message});ju.warn(r.message)}}}function MV(n){return`${n.name}!${n.options.appId}`}var Lee=1024,Fee=30,DC=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new xC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=RV();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>Fee){let i=Bee(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ju.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=RV(),{heartbeatsToSend:t,unsentEntries:r}=Vee(this._heartbeatsCache.heartbeats),i=Ly(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return ju.warn(e),""}}};function RV(){return new Date().toISOString().substring(0,10)}function Vee(n,e=Lee){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),PV(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),PV(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var xC=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gC()?bV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await Oee(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return NV(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return NV(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function PV(n){return Ly(JSON.stringify({version:2,heartbeats:n})).length}function Bee(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function jee(n){wh(new ic("platform-logger",e=>new IC(e),"PRIVATE")),wh(new ic("heartbeat",e=>new DC(e),"PRIVATE")),sc(TC,DV,n),sc(TC,DV,"esm2020"),sc("fire-js","")}jee("");var Uee="firebase",qee="12.6.0";sc(Uee,qee,"app");var OV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},LV={};var Uu,RC;(function(){var n;function e(P,T){function w(){}w.prototype=T.prototype,P.F=T.prototype,P.prototype=new w,P.prototype.constructor=P,P.D=function(x,_,S){for(var I=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)I[ee-2]=arguments[ee];return T.prototype[_].apply(x,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,T,w){w||(w=0);let x=Array(16);if(typeof T=="string")for(var _=0;_<16;++_)x[_]=T.charCodeAt(w++)|T.charCodeAt(w++)<<8|T.charCodeAt(w++)<<16|T.charCodeAt(w++)<<24;else for(_=0;_<16;++_)x[_]=T[w++]|T[w++]<<8|T[w++]<<16|T[w++]<<24;T=P.g[0],w=P.g[1],_=P.g[2];let S=P.g[3],I;I=T+(S^w&(_^S))+x[0]+3614090360&4294967295,T=w+(I<<7&4294967295|I>>>25),I=S+(_^T&(w^_))+x[1]+3905402710&4294967295,S=T+(I<<12&4294967295|I>>>20),I=_+(w^S&(T^w))+x[2]+606105819&4294967295,_=S+(I<<17&4294967295|I>>>15),I=w+(T^_&(S^T))+x[3]+3250441966&4294967295,w=_+(I<<22&4294967295|I>>>10),I=T+(S^w&(_^S))+x[4]+4118548399&4294967295,T=w+(I<<7&4294967295|I>>>25),I=S+(_^T&(w^_))+x[5]+1200080426&4294967295,S=T+(I<<12&4294967295|I>>>20),I=_+(w^S&(T^w))+x[6]+2821735955&4294967295,_=S+(I<<17&4294967295|I>>>15),I=w+(T^_&(S^T))+x[7]+4249261313&4294967295,w=_+(I<<22&4294967295|I>>>10),I=T+(S^w&(_^S))+x[8]+1770035416&4294967295,T=w+(I<<7&4294967295|I>>>25),I=S+(_^T&(w^_))+x[9]+2336552879&4294967295,S=T+(I<<12&4294967295|I>>>20),I=_+(w^S&(T^w))+x[10]+4294925233&4294967295,_=S+(I<<17&4294967295|I>>>15),I=w+(T^_&(S^T))+x[11]+2304563134&4294967295,w=_+(I<<22&4294967295|I>>>10),I=T+(S^w&(_^S))+x[12]+1804603682&4294967295,T=w+(I<<7&4294967295|I>>>25),I=S+(_^T&(w^_))+x[13]+4254626195&4294967295,S=T+(I<<12&4294967295|I>>>20),I=_+(w^S&(T^w))+x[14]+2792965006&4294967295,_=S+(I<<17&4294967295|I>>>15),I=w+(T^_&(S^T))+x[15]+1236535329&4294967295,w=_+(I<<22&4294967295|I>>>10),I=T+(_^S&(w^_))+x[1]+4129170786&4294967295,T=w+(I<<5&4294967295|I>>>27),I=S+(w^_&(T^w))+x[6]+3225465664&4294967295,S=T+(I<<9&4294967295|I>>>23),I=_+(T^w&(S^T))+x[11]+643717713&4294967295,_=S+(I<<14&4294967295|I>>>18),I=w+(S^T&(_^S))+x[0]+3921069994&4294967295,w=_+(I<<20&4294967295|I>>>12),I=T+(_^S&(w^_))+x[5]+3593408605&4294967295,T=w+(I<<5&4294967295|I>>>27),I=S+(w^_&(T^w))+x[10]+38016083&4294967295,S=T+(I<<9&4294967295|I>>>23),I=_+(T^w&(S^T))+x[15]+3634488961&4294967295,_=S+(I<<14&4294967295|I>>>18),I=w+(S^T&(_^S))+x[4]+3889429448&4294967295,w=_+(I<<20&4294967295|I>>>12),I=T+(_^S&(w^_))+x[9]+568446438&4294967295,T=w+(I<<5&4294967295|I>>>27),I=S+(w^_&(T^w))+x[14]+3275163606&4294967295,S=T+(I<<9&4294967295|I>>>23),I=_+(T^w&(S^T))+x[3]+4107603335&4294967295,_=S+(I<<14&4294967295|I>>>18),I=w+(S^T&(_^S))+x[8]+1163531501&4294967295,w=_+(I<<20&4294967295|I>>>12),I=T+(_^S&(w^_))+x[13]+2850285829&4294967295,T=w+(I<<5&4294967295|I>>>27),I=S+(w^_&(T^w))+x[2]+4243563512&4294967295,S=T+(I<<9&4294967295|I>>>23),I=_+(T^w&(S^T))+x[7]+1735328473&4294967295,_=S+(I<<14&4294967295|I>>>18),I=w+(S^T&(_^S))+x[12]+2368359562&4294967295,w=_+(I<<20&4294967295|I>>>12),I=T+(w^_^S)+x[5]+4294588738&4294967295,T=w+(I<<4&4294967295|I>>>28),I=S+(T^w^_)+x[8]+2272392833&4294967295,S=T+(I<<11&4294967295|I>>>21),I=_+(S^T^w)+x[11]+1839030562&4294967295,_=S+(I<<16&4294967295|I>>>16),I=w+(_^S^T)+x[14]+4259657740&4294967295,w=_+(I<<23&4294967295|I>>>9),I=T+(w^_^S)+x[1]+2763975236&4294967295,T=w+(I<<4&4294967295|I>>>28),I=S+(T^w^_)+x[4]+1272893353&4294967295,S=T+(I<<11&4294967295|I>>>21),I=_+(S^T^w)+x[7]+4139469664&4294967295,_=S+(I<<16&4294967295|I>>>16),I=w+(_^S^T)+x[10]+3200236656&4294967295,w=_+(I<<23&4294967295|I>>>9),I=T+(w^_^S)+x[13]+681279174&4294967295,T=w+(I<<4&4294967295|I>>>28),I=S+(T^w^_)+x[0]+3936430074&4294967295,S=T+(I<<11&4294967295|I>>>21),I=_+(S^T^w)+x[3]+3572445317&4294967295,_=S+(I<<16&4294967295|I>>>16),I=w+(_^S^T)+x[6]+76029189&4294967295,w=_+(I<<23&4294967295|I>>>9),I=T+(w^_^S)+x[9]+3654602809&4294967295,T=w+(I<<4&4294967295|I>>>28),I=S+(T^w^_)+x[12]+3873151461&4294967295,S=T+(I<<11&4294967295|I>>>21),I=_+(S^T^w)+x[15]+530742520&4294967295,_=S+(I<<16&4294967295|I>>>16),I=w+(_^S^T)+x[2]+3299628645&4294967295,w=_+(I<<23&4294967295|I>>>9),I=T+(_^(w|~S))+x[0]+4096336452&4294967295,T=w+(I<<6&4294967295|I>>>26),I=S+(w^(T|~_))+x[7]+1126891415&4294967295,S=T+(I<<10&4294967295|I>>>22),I=_+(T^(S|~w))+x[14]+2878612391&4294967295,_=S+(I<<15&4294967295|I>>>17),I=w+(S^(_|~T))+x[5]+4237533241&4294967295,w=_+(I<<21&4294967295|I>>>11),I=T+(_^(w|~S))+x[12]+1700485571&4294967295,T=w+(I<<6&4294967295|I>>>26),I=S+(w^(T|~_))+x[3]+2399980690&4294967295,S=T+(I<<10&4294967295|I>>>22),I=_+(T^(S|~w))+x[10]+4293915773&4294967295,_=S+(I<<15&4294967295|I>>>17),I=w+(S^(_|~T))+x[1]+2240044497&4294967295,w=_+(I<<21&4294967295|I>>>11),I=T+(_^(w|~S))+x[8]+1873313359&4294967295,T=w+(I<<6&4294967295|I>>>26),I=S+(w^(T|~_))+x[15]+4264355552&4294967295,S=T+(I<<10&4294967295|I>>>22),I=_+(T^(S|~w))+x[6]+2734768916&4294967295,_=S+(I<<15&4294967295|I>>>17),I=w+(S^(_|~T))+x[13]+1309151649&4294967295,w=_+(I<<21&4294967295|I>>>11),I=T+(_^(w|~S))+x[4]+4149444226&4294967295,T=w+(I<<6&4294967295|I>>>26),I=S+(w^(T|~_))+x[11]+3174756917&4294967295,S=T+(I<<10&4294967295|I>>>22),I=_+(T^(S|~w))+x[2]+718787259&4294967295,_=S+(I<<15&4294967295|I>>>17),I=w+(S^(_|~T))+x[9]+3951481745&4294967295,P.g[0]=P.g[0]+T&4294967295,P.g[1]=P.g[1]+(_+(I<<21&4294967295|I>>>11))&4294967295,P.g[2]=P.g[2]+_&4294967295,P.g[3]=P.g[3]+S&4294967295}r.prototype.v=function(P,T){T===void 0&&(T=P.length);let w=T-this.blockSize,x=this.C,_=this.h,S=0;for(;S<T;){if(_==0)for(;S<=w;)i(this,P,S),S+=this.blockSize;if(typeof P=="string"){for(;S<T;)if(x[_++]=P.charCodeAt(S++),_==this.blockSize){i(this,x),_=0;break}}else for(;S<T;)if(x[_++]=P[S++],_==this.blockSize){i(this,x),_=0;break}}this.h=_,this.o+=T},r.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var T=1;T<P.length-8;++T)P[T]=0;T=this.o*8;for(var w=P.length-8;w<P.length;++w)P[w]=T&255,T/=256;for(this.v(P),P=Array(16),T=0,w=0;w<4;++w)for(let x=0;x<32;x+=8)P[T++]=this.g[w]>>>x&255;return P};function s(P,T){var w=a;return Object.prototype.hasOwnProperty.call(w,P)?w[P]:w[P]=T(P)}function o(P,T){this.h=T;let w=[],x=!0;for(let _=P.length-1;_>=0;_--){let S=P[_]|0;x&&S==T||(w[_]=S,x=!1)}this.g=w}var a={};function c(P){return-128<=P&&P<128?s(P,function(T){return new o([T|0],T<0?-1:0)}):new o([P|0],P<0?-1:0)}function u(P){if(isNaN(P)||!isFinite(P))return p;if(P<0)return k(u(-P));let T=[],w=1;for(let x=0;P>=w;x++)T[x]=P/w|0,w*=4294967296;return new o(T,0)}function l(P,T){if(P.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(P.charAt(0)=="-")return k(l(P.substring(1),T));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');let w=u(Math.pow(T,8)),x=p;for(let S=0;S<P.length;S+=8){var _=Math.min(8,P.length-S);let I=parseInt(P.substring(S,S+_),T);_<8?(_=u(Math.pow(T,_)),x=x.j(_).add(u(I))):(x=x.j(w),x=x.add(u(I)))}return x}var p=c(0),y=c(1),g=c(16777216);n=o.prototype,n.m=function(){if(M(this))return-k(this).m();let P=0,T=1;for(let w=0;w<this.g.length;w++){let x=this.i(w);P+=(x>=0?x:4294967296+x)*T,T*=4294967296}return P},n.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(D(this))return"0";if(M(this))return"-"+k(this).toString(P);let T=u(Math.pow(P,6));var w=this;let x="";for(;;){let _=K(w,T).g;w=O(w,_.j(T));let S=((w.g.length>0?w.g[0]:w.h)>>>0).toString(P);if(w=_,D(w))return S+x;for(;S.length<6;)S="0"+S;x=S+x}},n.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function D(P){if(P.h!=0)return!1;for(let T=0;T<P.g.length;T++)if(P.g[T]!=0)return!1;return!0}function M(P){return P.h==-1}n.l=function(P){return P=O(this,P),M(P)?-1:D(P)?0:1};function k(P){let T=P.g.length,w=[];for(let x=0;x<T;x++)w[x]=~P.g[x];return new o(w,~P.h).add(y)}n.abs=function(){return M(this)?k(this):this},n.add=function(P){let T=Math.max(this.g.length,P.g.length),w=[],x=0;for(let _=0;_<=T;_++){let S=x+(this.i(_)&65535)+(P.i(_)&65535),I=(S>>>16)+(this.i(_)>>>16)+(P.i(_)>>>16);x=I>>>16,S&=65535,I&=65535,w[_]=I<<16|S}return new o(w,w[w.length-1]&-2147483648?-1:0)};function O(P,T){return P.add(k(T))}n.j=function(P){if(D(this)||D(P))return p;if(M(this))return M(P)?k(this).j(k(P)):k(k(this).j(P));if(M(P))return k(this.j(k(P)));if(this.l(g)<0&&P.l(g)<0)return u(this.m()*P.m());let T=this.g.length+P.g.length,w=[];for(var x=0;x<2*T;x++)w[x]=0;for(x=0;x<this.g.length;x++)for(let _=0;_<P.g.length;_++){let S=this.i(x)>>>16,I=this.i(x)&65535,ee=P.i(_)>>>16,ye=P.i(_)&65535;w[2*x+2*_]+=I*ye,G(w,2*x+2*_),w[2*x+2*_+1]+=S*ye,G(w,2*x+2*_+1),w[2*x+2*_+1]+=I*ee,G(w,2*x+2*_+1),w[2*x+2*_+2]+=S*ee,G(w,2*x+2*_+2)}for(P=0;P<T;P++)w[P]=w[2*P+1]<<16|w[2*P];for(P=T;P<2*T;P++)w[P]=0;return new o(w,0)};function G(P,T){for(;(P[T]&65535)!=P[T];)P[T+1]+=P[T]>>>16,P[T]&=65535,T++}function W(P,T){this.g=P,this.h=T}function K(P,T){if(D(T))throw Error("division by zero");if(D(P))return new W(p,p);if(M(P))return T=K(k(P),T),new W(k(T.g),k(T.h));if(M(T))return T=K(P,k(T)),new W(k(T.g),T.h);if(P.g.length>30){if(M(P)||M(T))throw Error("slowDivide_ only works with positive integers.");for(var w=y,x=T;x.l(P)<=0;)w=ue(w),x=ue(x);var _=fe(w,1),S=fe(x,1);for(x=fe(x,2),w=fe(w,2);!D(x);){var I=S.add(x);I.l(P)<=0&&(_=_.add(w),S=I),x=fe(x,1),w=fe(w,1)}return T=O(P,_.j(T)),new W(_,T)}for(_=p;P.l(T)>=0;){for(w=Math.max(1,Math.floor(P.m()/T.m())),x=Math.ceil(Math.log(w)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),S=u(w),I=S.j(T);M(I)||I.l(P)>0;)w-=x,S=u(w),I=S.j(T);D(S)&&(S=y),_=_.add(S),P=O(P,I)}return new W(_,P)}n.B=function(P){return K(this,P).h},n.and=function(P){let T=Math.max(this.g.length,P.g.length),w=[];for(let x=0;x<T;x++)w[x]=this.i(x)&P.i(x);return new o(w,this.h&P.h)},n.or=function(P){let T=Math.max(this.g.length,P.g.length),w=[];for(let x=0;x<T;x++)w[x]=this.i(x)|P.i(x);return new o(w,this.h|P.h)},n.xor=function(P){let T=Math.max(this.g.length,P.g.length),w=[];for(let x=0;x<T;x++)w[x]=this.i(x)^P.i(x);return new o(w,this.h^P.h)};function ue(P){let T=P.g.length+1,w=[];for(let x=0;x<T;x++)w[x]=P.i(x)<<1|P.i(x-1)>>>31;return new o(w,P.h)}function fe(P,T){let w=T>>5;T%=32;let x=P.g.length-w,_=[];for(let S=0;S<x;S++)_[S]=T>0?P.i(S+w)>>>T|P.i(S+w+1)<<32-T:P.i(S+w);return new o(_,P.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,RC=LV.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=l,Uu=LV.Integer=o}).apply(typeof OV<"u"?OV:typeof self<"u"?self:typeof window<"u"?window:{});var B1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qu={};var PC,zee,bp,kC,By,j1,MC,OC,LC;(function(){var n,e=Object.defineProperty;function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof B1=="object"&&B1];for(var A=0;A<f.length;++A){var R=f[A];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var r=t(this);function i(f,A){if(A)e:{var R=r;f=f.split(".");for(var q=0;q<f.length-1;q++){var se=f[q];if(!(se in R))break e;R=R[se]}f=f[f.length-1],q=R[f],A=A(q),A!=q&&A!=null&&e(R,f,{configurable:!0,writable:!0,value:A})}}i("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(f){return f||function(A){var R=[],q;for(q in A)Object.prototype.hasOwnProperty.call(A,q)&&R.push([q,A[q]]);return R}});var s=s||{},o=this||self;function a(f){var A=typeof f;return A=="object"&&f!=null||A=="function"}function c(f,A,R){return f.call.apply(f.bind,arguments)}function u(f,A,R){return u=c,u.apply(null,arguments)}function l(f,A){var R=Array.prototype.slice.call(arguments,1);return function(){var q=R.slice();return q.push.apply(q,arguments),f.apply(this,q)}}function p(f,A){function R(){}R.prototype=A.prototype,f.Z=A.prototype,f.prototype=new R,f.prototype.constructor=f,f.Ob=function(q,se,ge){for(var Ge=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)Ge[Dt-2]=arguments[Dt];return A.prototype[se].apply(q,Ge)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function g(f){let A=f.length;if(A>0){let R=Array(A);for(let q=0;q<A;q++)R[q]=f[q];return R}return[]}function D(f,A){for(let q=1;q<arguments.length;q++){let se=arguments[q];var R=typeof se;if(R=R!="object"?R:se?Array.isArray(se)?"array":R:"null",R=="array"||R=="object"&&typeof se.length=="number"){R=f.length||0;let ge=se.length||0;f.length=R+ge;for(let Ge=0;Ge<ge;Ge++)f[R+Ge]=se[Ge]}else f.push(se)}}class M{constructor(A,R){this.i=A,this.j=R,this.h=0,this.g=null}get(){let A;return this.h>0?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function k(f){o.setTimeout(()=>{throw f},0)}function O(){var f=P;let A=null;return f.g&&(A=f.g,f.g=f.g.next,f.g||(f.h=null),A.next=null),A}class G{constructor(){this.h=this.g=null}add(A,R){let q=W.get();q.set(A,R),this.h?this.h.next=q:this.g=q,this.h=q}}var W=new M(()=>new K,f=>f.reset());class K{constructor(){this.next=this.g=this.h=null}set(A,R){this.h=A,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,fe=!1,P=new G,T=()=>{let f=Promise.resolve(void 0);ue=()=>{f.then(w)}};function w(){for(var f;f=O();){try{f.h.call(f.g)}catch(R){k(R)}var A=W;A.j(f),A.h<100&&(A.h++,f.next=A.g,A.g=f)}fe=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _(f,A){this.type=f,this.g=this.target=A,this.defaultPrevented=!1}_.prototype.h=function(){this.defaultPrevented=!0};var S=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var f=!1,A=Object.defineProperty({},"passive",{get:function(){f=!0}});try{let R=()=>{};o.addEventListener("test",R,A),o.removeEventListener("test",R,A)}catch{}return f})();function I(f){return/^[\s\xa0]*$/.test(f)}function ee(f,A){_.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,A)}p(ee,_),ee.prototype.init=function(f,A){let R=this.type=f.type,q=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=A,A=f.relatedTarget,A||(R=="mouseover"?A=f.fromElement:R=="mouseout"&&(A=f.toElement)),this.relatedTarget=A,q?(this.clientX=q.clientX!==void 0?q.clientX:q.pageX,this.clientY=q.clientY!==void 0?q.clientY:q.pageY,this.screenX=q.screenX||0,this.screenY=q.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&ee.Z.h.call(this)},ee.prototype.h=function(){ee.Z.h.call(this);let f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ye="closure_listenable_"+(Math.random()*1e6|0),Se=0;function Ie(f,A,R,q,se){this.listener=f,this.proxy=null,this.src=A,this.type=R,this.capture=!!q,this.ha=se,this.key=++Se,this.da=this.fa=!1}function he(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Te(f,A,R){for(let q in f)A.call(R,f[q],q,f)}function He(f,A){for(let R in f)A.call(void 0,f[R],R,f)}function Oe(f){let A={};for(let R in f)A[R]=f[R];return A}let B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(f,A){let R,q;for(let se=1;se<arguments.length;se++){q=arguments[se];for(R in q)f[R]=q[R];for(let ge=0;ge<B.length;ge++)R=B[ge],Object.prototype.hasOwnProperty.call(q,R)&&(f[R]=q[R])}}function X(f){this.src=f,this.g={},this.h=0}X.prototype.add=function(f,A,R,q,se){let ge=f.toString();f=this.g[ge],f||(f=this.g[ge]=[],this.h++);let Ge=oe(f,A,q,se);return Ge>-1?(A=f[Ge],R||(A.fa=!1)):(A=new Ie(A,this.src,ge,!!q,se),A.fa=R,f.push(A)),A};function ne(f,A){let R=A.type;if(R in f.g){var q=f.g[R],se=Array.prototype.indexOf.call(q,A,void 0),ge;(ge=se>=0)&&Array.prototype.splice.call(q,se,1),ge&&(he(A),f.g[R].length==0&&(delete f.g[R],f.h--))}}function oe(f,A,R,q){for(let se=0;se<f.length;++se){let ge=f[se];if(!ge.da&&ge.listener==A&&ge.capture==!!R&&ge.ha==q)return se}return-1}var le="closure_lm_"+(Math.random()*1e6|0),be={};function Ee(f,A,R,q,se){if(q&&q.once)return Xe(f,A,R,q,se);if(Array.isArray(A)){for(let ge=0;ge<A.length;ge++)Ee(f,A[ge],R,q,se);return null}return R=Fe(R),f&&f[ye]?f.J(A,R,a(q)?!!q.capture:!!q,se):De(f,A,R,!1,q,se)}function De(f,A,R,q,se,ge){if(!A)throw Error("Invalid event type");let Ge=a(se)?!!se.capture:!!se,Dt=qt(f);if(Dt||(f[le]=Dt=new X(f)),R=Dt.add(A,R,q,Ge,ge),R.proxy)return R;if(q=Be(),R.proxy=q,q.src=f,q.listener=R,f.addEventListener)S||(se=Ge),se===void 0&&(se=!1),f.addEventListener(A.toString(),q,se);else if(f.attachEvent)f.attachEvent(H(A.toString()),q);else if(f.addListener&&f.removeListener)f.addListener(q);else throw Error("addEventListener and attachEvent are unavailable.");return R}function Be(){function f(R){return A.call(f.src,f.listener,R)}let A=Je;return f}function Xe(f,A,R,q,se){if(Array.isArray(A)){for(let ge=0;ge<A.length;ge++)Xe(f,A[ge],R,q,se);return null}return R=Fe(R),f&&f[ye]?f.K(A,R,a(q)?!!q.capture:!!q,se):De(f,A,R,!0,q,se)}function Ye(f,A,R,q,se){if(Array.isArray(A))for(var ge=0;ge<A.length;ge++)Ye(f,A[ge],R,q,se);else q=a(q)?!!q.capture:!!q,R=Fe(R),f&&f[ye]?(f=f.i,ge=String(A).toString(),ge in f.g&&(A=f.g[ge],R=oe(A,R,q,se),R>-1&&(he(A[R]),Array.prototype.splice.call(A,R,1),A.length==0&&(delete f.g[ge],f.h--)))):f&&(f=qt(f))&&(A=f.g[A.toString()],f=-1,A&&(f=oe(A,R,q,se)),(R=f>-1?A[f]:null)&&dt(R))}function dt(f){if(typeof f!="number"&&f&&!f.da){var A=f.src;if(A&&A[ye])ne(A.i,f);else{var R=f.type,q=f.proxy;A.removeEventListener?A.removeEventListener(R,q,f.capture):A.detachEvent?A.detachEvent(H(R),q):A.addListener&&A.removeListener&&A.removeListener(q),(R=qt(A))?(ne(R,f),R.h==0&&(R.src=null,A[le]=null)):he(f)}}}function H(f){return f in be?be[f]:be[f]="on"+f}function Je(f,A){if(f.da)f=!0;else{A=new ee(A,this);let R=f.listener,q=f.ha||f.src;f.fa&&dt(f),f=R.call(q,A)}return f}function qt(f){return f=f[le],f instanceof X?f:null}var At="__closure_events_fn_"+(Math.random()*1e9>>>0);function Fe(f){return typeof f=="function"?f:(f[At]||(f[At]=function(A){return f.handleEvent(A)}),f[At])}function tt(){x.call(this),this.i=new X(this),this.M=this,this.G=null}p(tt,x),tt.prototype[ye]=!0,tt.prototype.removeEventListener=function(f,A,R,q){Ye(this,f,A,R,q)};function Ke(f,A){var R,q=f.G;if(q)for(R=[];q;q=q.G)R.push(q);if(f=f.M,q=A.type||A,typeof A=="string")A=new _(A,f);else if(A instanceof _)A.target=A.target||f;else{var se=A;A=new _(q,f),Y(A,se)}se=!0;let ge,Ge;if(R)for(Ge=R.length-1;Ge>=0;Ge--)ge=A.g=R[Ge],se=vt(ge,q,!0,A)&&se;if(ge=A.g=f,se=vt(ge,q,!0,A)&&se,se=vt(ge,q,!1,A)&&se,R)for(Ge=0;Ge<R.length;Ge++)ge=A.g=R[Ge],se=vt(ge,q,!1,A)&&se}tt.prototype.N=function(){if(tt.Z.N.call(this),this.i){var f=this.i;for(let A in f.g){let R=f.g[A];for(let q=0;q<R.length;q++)he(R[q]);delete f.g[A],f.h--}}this.G=null},tt.prototype.J=function(f,A,R,q){return this.i.add(String(f),A,!1,R,q)},tt.prototype.K=function(f,A,R,q){return this.i.add(String(f),A,!0,R,q)};function vt(f,A,R,q){if(A=f.i.g[String(A)],!A)return!0;A=A.concat();let se=!0;for(let ge=0;ge<A.length;++ge){let Ge=A[ge];if(Ge&&!Ge.da&&Ge.capture==R){let Dt=Ge.listener,d=Ge.ha||Ge.src;Ge.fa&&ne(f.i,Ge),se=Dt.call(d,q)!==!1&&se}}return se&&!q.defaultPrevented}function Et(f,A){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=u(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(A)>2147483647?-1:o.setTimeout(f,A||0)}function gn(f){f.g=Et(()=>{f.g=null,f.i&&(f.i=!1,gn(f))},f.l);let A=f.h;f.h=null,f.m.apply(null,A)}class on extends x{constructor(A,R){super(),this.m=A,this.l=R,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:gn(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rt(f){x.call(this),this.h=f,this.g={}}p(Rt,x);var St=[];function Ct(f){Te(f.g,function(A,R){this.g.hasOwnProperty(R)&&dt(A)},f),f.g={}}Rt.prototype.N=function(){Rt.Z.N.call(this),Ct(this)},Rt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var st=o.JSON.stringify,zt=o.JSON.parse,pt=class{stringify(f){return o.JSON.stringify(f,void 0)}parse(f){return o.JSON.parse(f,void 0)}};function pr(){}function an(){}var jt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kt(){_.call(this,"d")}p(Kt,_);function Bn(){_.call(this,"c")}p(Bn,_);var ht={},Un=null;function It(){return Un=Un||new tt}ht.Ia="serverreachability";function Vt(f){_.call(this,ht.Ia,f)}p(Vt,_);function Ln(f){let A=It();Ke(A,new Vt(A))}ht.STAT_EVENT="statevent";function $t(f,A){_.call(this,ht.STAT_EVENT,f),this.stat=A}p($t,_);function nt(f){let A=It();Ke(A,new $t(A,f))}ht.Ja="timingevent";function mn(f,A){_.call(this,ht.Ja,f),this.size=A}p(mn,_);function Gr(f,A){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){f()},A)}function _r(){this.g=!0}_r.prototype.ua=function(){this.g=!1};function hs(f,A,R,q,se,ge){f.info(function(){if(f.g)if(ge){var Ge="",Dt=ge.split("&");for(let b=0;b<Dt.length;b++){var d=Dt[b].split("=");if(d.length>1){let N=d[0];d=d[1];let U=N.split("_");Ge=U.length>=2&&U[1]=="type"?Ge+(N+"="+d+"&"):Ge+(N+"=redacted&")}}}else Ge=null;else Ge=ge;return"XMLHTTP REQ ("+q+") [attempt "+se+"]: "+A+`
`+R+`
`+Ge})}function Ls(f,A,R,q,se,ge,Ge){f.info(function(){return"XMLHTTP RESP ("+q+") [ attempt "+se+"]: "+A+`
`+R+`
`+ge+" "+Ge})}function ft(f,A,R,q){f.info(function(){return"XMLHTTP TEXT ("+A+"): "+cr(f,R)+(q?" "+q:"")})}function ro(f,A){f.info(function(){return"TIMEOUT: "+A})}_r.prototype.info=function(){};function cr(f,A){if(!f.g)return A;if(!A)return null;try{let ge=JSON.parse(A);if(ge){for(f=0;f<ge.length;f++)if(Array.isArray(ge[f])){var R=ge[f];if(!(R.length<2)){var q=R[1];if(Array.isArray(q)&&!(q.length<1)){var se=q[0];if(se!="noop"&&se!="stop"&&se!="close")for(let Ge=1;Ge<q.length;Ge++)q[Ge]=""}}}}return st(ge)}catch{return A}}var oi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Wr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},qn;function Er(){}p(Er,pr),Er.prototype.g=function(){return new XMLHttpRequest},qn=new Er;function wr(f){return encodeURIComponent(String(f))}function fs(f){var A=1;f=f.split(":");let R=[];for(;A>0&&f.length;)R.push(f.shift()),A--;return f.length&&R.push(f.join(":")),R}function Si(f,A,R,q){this.j=f,this.i=A,this.l=R,this.S=q||1,this.V=new Rt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ps}function ps(){this.i=null,this.g="",this.h=!1}var ji={},Ui={};function Ci(f,A,R){f.M=1,f.A=ci(xn(A)),f.u=R,f.R=!0,ai(f,null)}function ai(f,A){f.F=Date.now(),Fs(f),f.B=xn(f.A);var R=f.B,q=f.S;Array.isArray(q)||(q=[String(q)]),Ic(R.i,"t",q),f.C=0,R=f.j.L,f.h=new ps,f.g=ct(f.j,R?A:null,!f.u),f.P>0&&(f.O=new on(u(f.Y,f,f.g),f.P)),A=f.V,R=f.g,q=f.ba;var se="readystatechange";Array.isArray(se)||(se&&(St[0]=se.toString()),se=St);for(let ge=0;ge<se.length;ge++){let Ge=Ee(R,se[ge],q||A.handleEvent,!1,A.h||A);if(!Ge)break;A.g[Ge.key]=Ge}A=f.J?Oe(f.J):{},f.u?(f.v||(f.v="POST"),A["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,A)):(f.v="GET",f.g.ea(f.B,f.v,null,A)),Ln(),hs(f.i,f.v,f.B,f.l,f.S,f.u)}Si.prototype.ba=function(f){f=f.target;let A=this.O;A&&yn(f)==3?A.j():this.Y(f)},Si.prototype.Y=function(f){try{if(f==this.g)e:{let Dt=yn(this.g),d=this.g.ya(),b=this.g.ca();if(!(Dt<3)&&(Dt!=3||this.g&&(this.h.h||this.g.la()||yu(this.g)))){this.K||Dt!=4||d==7||(d==8||b<=0?Ln(3):Ln(2)),bo(this);var A=this.g.ca();this.X=A;var R=qi(this);if(this.o=A==200,Ls(this.i,this.v,this.B,this.l,this.S,Dt,A),this.o){if(this.U&&!this.L){t:{if(this.g){var q,se=this.g;if((q=se.g?se.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(q)){var ge=q;break t}}ge=null}if(f=ge)ft(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Eo(this,f);else{this.o=!1,this.m=3,nt(12),Vs(this),ea(this);break e}}if(this.R){f=!0;let N;for(;!this.K&&this.C<R.length;)if(N=Xo(this,R),N==Ui){Dt==4&&(this.m=4,nt(14),f=!1),ft(this.i,this.l,null,"[Incomplete Response]");break}else if(N==ji){this.m=4,nt(15),ft(this.i,this.l,R,"[Invalid Chunk]"),f=!1;break}else ft(this.i,this.l,N,null),Eo(this,N);if(gs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||R.length!=0||this.h.h||(this.m=1,nt(16),f=!1),this.o=this.o&&f,!f)ft(this.i,this.l,R,"[Invalid Chunked Response]"),Vs(this),ea(this);else if(R.length>0&&!this.W){this.W=!0;var Ge=this.j;Ge.g==this&&Ge.aa&&!Ge.P&&(Ge.j.info("Great, no buffering proxy detected. Bytes received: "+R.length),v(Ge),Ge.P=!0,nt(11))}}else ft(this.i,this.l,R,null),Eo(this,R);Dt==4&&Vs(this),this.o&&!this.K&&(Dt==4?te(this.j,this):(this.o=!1,Fs(this)))}else Ao(this.g),A==400&&R.indexOf("Unknown SID")>0?(this.m=3,nt(12)):(this.m=0,nt(13)),Vs(this),ea(this)}}}catch{}finally{}};function qi(f){if(!gs(f))return f.g.la();let A=yu(f.g);if(A==="")return"";let R="",q=A.length,se=yn(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Vs(f),ea(f),"";f.h.i=new o.TextDecoder}for(let ge=0;ge<q;ge++)f.h.h=!0,R+=f.h.i.decode(A[ge],{stream:!(se&&ge==q-1)});return A.length=0,f.h.g+=R,f.C=0,f.h.g}function gs(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function Xo(f,A){var R=f.C,q=A.indexOf(`
`,R);return q==-1?Ui:(R=Number(A.substring(R,q)),isNaN(R)?ji:(q+=1,q+R>A.length?Ui:(A=A.slice(q,q+R),f.C=q+R,A)))}Si.prototype.cancel=function(){this.K=!0,Vs(this)};function Fs(f){f.T=Date.now()+f.H,wo(f,f.H)}function wo(f,A){if(f.D!=null)throw Error("WatchDog timer not null");f.D=Gr(u(f.aa,f),A)}function bo(f){f.D&&(o.clearTimeout(f.D),f.D=null)}Si.prototype.aa=function(){this.D=null;let f=Date.now();f-this.T>=0?(ro(this.i,this.B),this.M!=2&&(Ln(),nt(17)),Vs(this),this.m=2,ea(this)):wo(this,this.T-f)};function ea(f){f.j.I==0||f.K||te(f.j,f)}function Vs(f){bo(f);var A=f.O;A&&typeof A.dispose=="function"&&A.dispose(),f.O=null,Ct(f.V),f.g&&(A=f.g,f.g=null,A.abort(),A.dispose())}function Eo(f,A){try{var R=f.j;if(R.I!=0&&(R.g==f||Io(R.h,f))){if(!f.L&&Io(R.h,f)&&R.I==3){try{var q=R.Ba.g.parse(A)}catch{q=null}if(Array.isArray(q)&&q.length==3){var se=q;if(se[0]==0){e:if(!R.v){if(R.g)if(R.g.F+3e3<f.F)Q(R),is(R);else break e;So(R),nt(18)}}else R.xa=se[1],0<R.xa-R.K&&se[2]<37500&&R.F&&R.A==0&&!R.C&&(R.C=Gr(u(R.Va,R),6e3));Bs(R.h)<=1&&R.ta&&(R.ta=void 0)}else Ae(R,11)}else if((f.L||R.g==f)&&Q(R),!I(A))for(se=R.Ba.g.parse(A),A=0;A<se.length;A++){let b=se[A],N=b[0];if(!(N<=R.K))if(R.K=N,b=b[1],R.I==2)if(b[0]=="c"){R.M=b[1],R.ba=b[2];let U=b[3];U!=null&&(R.ka=U,R.j.info("VER="+R.ka));let ie=b[4];ie!=null&&(R.za=ie,R.j.info("SVER="+R.za));let ve=b[5];ve!=null&&typeof ve=="number"&&ve>0&&(q=1.5*ve,R.O=q,R.j.info("backChannelRequestTimeoutMs_="+q)),q=R;let qe=f.g;if(qe){let pn=qe.g?qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pn){var ge=q.h;ge.g||pn.indexOf("spdy")==-1&&pn.indexOf("quic")==-1&&pn.indexOf("h2")==-1||(ge.j=ge.l,ge.g=new Set,ge.h&&(_c(ge,ge.h),ge.h=null))}if(q.G){let lr=qe.g?qe.g.getResponseHeader("X-HTTP-Session-Id"):null;lr&&(q.wa=lr,Fn(q.J,q.G,lr))}}R.I=3,R.l&&R.l.ra(),R.aa&&(R.T=Date.now()-f.F,R.j.info("Handshake RTT: "+R.T+"ms")),q=R;var Ge=f;if(q.na=rt(q,q.L?q.ba:null,q.W),Ge.L){wc(q.h,Ge);var Dt=Ge,d=q.O;d&&(Dt.H=d),Dt.D&&(bo(Dt),Fs(Dt)),q.g=Ge}else co(q);R.i.length>0&&xi(R)}else b[0]!="stop"&&b[0]!="close"||Ae(R,7);else R.I==3&&(b[0]=="stop"||b[0]=="close"?b[0]=="stop"?Ae(R,7):aa(R):b[0]!="noop"&&R.l&&R.l.qa(b),R.A=0)}}Ln(4)}catch{}}var hu=class{constructor(f,A){this.g=f,this.map=A}};function Di(f){this.l=f||10,o.PerformanceNavigationTiming?(f=o.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function io(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Bs(f){return f.h?1:f.g?f.g.size:0}function Io(f,A){return f.h?f.h==A:f.g?f.g.has(A):!1}function _c(f,A){f.g?f.g.add(A):f.h=A}function wc(f,A){f.h&&f.h==A?f.h=null:f.g&&f.g.has(A)&&f.g.delete(A)}Di.prototype.cancel=function(){if(this.i=bc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let f of this.g.values())f.cancel();this.g.clear()}};function bc(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let A=f.i;for(let R of f.g.values())A=A.concat(R.G);return A}return g(f.i)}var ms=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ta(f,A){if(f){f=f.split("&");for(let R=0;R<f.length;R++){let q=f[R].indexOf("="),se,ge=null;q>=0?(se=f[R].substring(0,q),ge=f[R].substring(q+1)):se=f[R],A(se,ge?decodeURIComponent(ge.replace(/\+/g," ")):"")}}}function ys(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let A;f instanceof ys?(this.l=f.l,To(this,f.j),this.o=f.o,this.g=f.g,zi(this,f.u),this.h=f.h,na(this,pu(f.i)),this.m=f.m):f&&(A=String(f).match(ms))?(this.l=!1,To(this,A[1]||"",!0),this.o=ur(A[2]||""),this.g=ur(A[3]||"",!0),zi(this,A[4]),this.h=ur(A[5]||"",!0),na(this,A[6]||"",!0),this.m=ur(A[7]||"")):(this.l=!1,this.i=new $i(null,this.l))}ys.prototype.toString=function(){let f=[];var A=this.j;A&&f.push(kr(A,Oa,!0),":");var R=this.g;return(R||A=="file")&&(f.push("//"),(A=this.o)&&f.push(kr(A,Oa,!0),"@"),f.push(wr(R).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.u,R!=null&&f.push(":",String(R))),(R=this.h)&&(this.g&&R.charAt(0)!="/"&&f.push("/"),f.push(kr(R,R.charAt(0)=="/"?js:Ec,!0))),(R=this.i.toString())&&f.push("?",R),(R=this.m)&&f.push("#",kr(R,La)),f.join("")},ys.prototype.resolve=function(f){let A=xn(this),R=!!f.j;R?To(A,f.j):R=!!f.o,R?A.o=f.o:R=!!f.g,R?A.g=f.g:R=f.u!=null;var q=f.h;if(R)zi(A,f.u);else if(R=!!f.h){if(q.charAt(0)!="/")if(this.g&&!this.h)q="/"+q;else{var se=A.h.lastIndexOf("/");se!=-1&&(q=A.h.slice(0,se+1)+q)}if(se=q,se==".."||se==".")q="";else if(se.indexOf("./")!=-1||se.indexOf("/.")!=-1){q=se.lastIndexOf("/",0)==0,se=se.split("/");let ge=[];for(let Ge=0;Ge<se.length;){let Dt=se[Ge++];Dt=="."?q&&Ge==se.length&&ge.push(""):Dt==".."?((ge.length>1||ge.length==1&&ge[0]!="")&&ge.pop(),q&&Ge==se.length&&ge.push("")):(ge.push(Dt),q=!0)}q=ge.join("/")}else q=se}return R?A.h=q:R=f.i.toString()!=="",R?na(A,pu(f.i)):R=!!f.m,R&&(A.m=f.m),A};function xn(f){return new ys(f)}function To(f,A,R){f.j=R?ur(A,!0):A,f.j&&(f.j=f.j.replace(/:$/,""))}function zi(f,A){if(A){if(A=Number(A),isNaN(A)||A<0)throw Error("Bad port number "+A);f.u=A}else f.u=null}function na(f,A,R){A instanceof $i?(f.i=A,Fa(f.i,f.l)):(R||(A=kr(A,jn)),f.i=new $i(A,f.l))}function Fn(f,A,R){f.i.set(A,R)}function ci(f){return Fn(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function ur(f,A){return f?A?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function kr(f,A,R){return typeof f=="string"?(f=encodeURI(f).replace(A,vs),R&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function vs(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Oa=/[#\/\?@]/g,Ec=/[#\?:]/g,js=/[#\?]/g,jn=/[#\?@]/g,La=/#/g;function $i(f,A){this.h=this.g=null,this.i=f||null,this.j=!!A}function Kr(f){f.g||(f.g=new Map,f.h=0,f.i&&ta(f.i,function(A,R){f.add(decodeURIComponent(A.replace(/\+/g," ")),R)}))}n=$i.prototype,n.add=function(f,A){Kr(this),this.i=null,f=ui(this,f);let R=this.g.get(f);return R||this.g.set(f,R=[]),R.push(A),this.h+=1,this};function hl(f,A){Kr(f),A=ui(f,A),f.g.has(A)&&(f.i=null,f.h-=f.g.get(A).length,f.g.delete(A))}function fu(f,A){return Kr(f),A=ui(f,A),f.g.has(A)}n.forEach=function(f,A){Kr(this),this.g.forEach(function(R,q){R.forEach(function(se){f.call(A,se,q,this)},this)},this)};function fl(f,A){Kr(f);let R=[];if(typeof A=="string")fu(f,A)&&(R=R.concat(f.g.get(ui(f,A))));else for(f=Array.from(f.g.values()),A=0;A<f.length;A++)R=R.concat(f[A]);return R}n.set=function(f,A){return Kr(this),this.i=null,f=ui(this,f),fu(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[A]),this.h+=1,this},n.get=function(f,A){return f?(f=fl(this,f),f.length>0?String(f[0]):A):A};function Ic(f,A,R){hl(f,A),R.length>0&&(f.i=null,f.g.set(ui(f,A),g(R)),f.h+=R.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let f=[],A=Array.from(this.g.keys());for(let q=0;q<A.length;q++){var R=A[q];let se=wr(R);R=fl(this,R);for(let ge=0;ge<R.length;ge++){let Ge=se;R[ge]!==""&&(Ge+="="+wr(R[ge])),f.push(Ge)}}return this.i=f.join("&")};function pu(f){let A=new $i;return A.i=f.i,f.g&&(A.g=new Map(f.g),A.h=f.h),A}function ui(f,A){return A=String(A),f.j&&(A=A.toLowerCase()),A}function Fa(f,A){A&&!f.j&&(Kr(f),f.i=null,f.g.forEach(function(R,q){let se=q.toLowerCase();q!=se&&(hl(this,q),Ic(this,se,R))},f)),f.j=A}function Hi(f,A){let R=new _r;if(o.Image){let q=new Image;q.onload=l(Us,R,"TestLoadImage: loaded",!0,A,q),q.onerror=l(Us,R,"TestLoadImage: error",!1,A,q),q.onabort=l(Us,R,"TestLoadImage: abort",!1,A,q),q.ontimeout=l(Us,R,"TestLoadImage: timeout",!1,A,q),o.setTimeout(function(){q.ontimeout&&q.ontimeout()},1e4),q.src=f}else A(!1)}function Tc(f,A){let R=new _r,q=new AbortController,se=setTimeout(()=>{q.abort(),Us(R,"TestPingServer: timeout",!1,A)},1e4);fetch(f,{signal:q.signal}).then(ge=>{clearTimeout(se),ge.ok?Us(R,"TestPingServer: ok",!0,A):Us(R,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(se),Us(R,"TestPingServer: error",!1,A)})}function Us(f,A,R,q,se){try{se&&(se.onload=null,se.onerror=null,se.onabort=null,se.ontimeout=null),q(R)}catch{}}function Ot(){this.g=new pt}function qs(f){this.i=f.Sb||null,this.h=f.ab||!1}p(qs,pr),qs.prototype.g=function(){return new Ac(this.i,this.h)};function Ac(f,A){tt.call(this),this.H=f,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Ac,tt),n=Ac.prototype,n.open=function(f,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=A,this.readyState=1,Ir(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let A={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(A.body=f),(this.H||o).fetch(new Request(this.D,A)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,rs(this)),this.readyState=0},n.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Ir(this)),this.g&&(this.readyState=3,Ir(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;pl(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function pl(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}n.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var A=f.value?f.value:new Uint8Array(0);(A=this.B.decode(A,{stream:!f.done}))&&(this.response=this.responseText+=A)}f.done?rs(this):Ir(this),this.readyState==3&&pl(this)}},n.Oa=function(f){this.g&&(this.response=this.responseText=f,rs(this))},n.Na=function(f){this.g&&(this.response=f,rs(this))},n.ga=function(){this.g&&rs(this)};function rs(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Ir(f)}n.setRequestHeader=function(f,A){this.A.append(f,A)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let f=[],A=this.h.entries();for(var R=A.next();!R.done;)R=R.value,f.push(R[0]+": "+R[1]),R=A.next();return f.join(`\r
`)};function Ir(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Ac.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function gl(f){let A="";return Te(f,function(R,q){A+=q,A+=":",A+=R,A+=`\r
`}),A}function gu(f,A,R){e:{for(q in R){var q=!1;break e}q=!0}q||(R=gl(R),typeof f=="string"?R!=null&&wr(R):Fn(f,A,R))}function Tn(f){tt.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Tn,tt);var ra=/^https?$/i,ia=["POST","PUT"];n=Tn.prototype,n.Fa=function(f){this.H=f},n.ea=function(f,A,R,q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);A=A?A.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():qn.g(),this.g.onreadystatechange=y(u(this.Ca,this));try{this.B=!0,this.g.open(A,String(f),!0),this.B=!1}catch(ge){sa(this,ge);return}if(f=R||"",R=new Map(this.headers),q)if(Object.getPrototypeOf(q)===Object.prototype)for(var se in q)R.set(se,q[se]);else if(typeof q.keys=="function"&&typeof q.get=="function")for(let ge of q.keys())R.set(ge,q.get(ge));else throw Error("Unknown input type for opt_headers: "+String(q));q=Array.from(R.keys()).find(ge=>ge.toLowerCase()=="content-type"),se=o.FormData&&f instanceof o.FormData,!(Array.prototype.indexOf.call(ia,A,void 0)>=0)||q||se||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[ge,Ge]of R)this.g.setRequestHeader(ge,Ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(ge){sa(this,ge)}};function sa(f,A){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=A,f.o=5,Gi(f),so(f)}function Gi(f){f.A||(f.A=!0,Ke(f,"complete"),Ke(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,Ke(this,"complete"),Ke(this,"abort"),so(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),so(this,!0)),Tn.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?mu(this):this.Xa())},n.Xa=function(){mu(this)};function mu(f){if(f.h&&typeof s<"u"){if(f.v&&yn(f)==4)setTimeout(f.Ca.bind(f),0);else if(Ke(f,"readystatechange"),yn(f)==4){f.h=!1;try{let ge=f.ca();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var R;if(!(R=A)){var q;if(q=ge===0){let Ge=String(f.D).match(ms)[1]||null;!Ge&&o.self&&o.self.location&&(Ge=o.self.location.protocol.slice(0,-1)),q=!ra.test(Ge?Ge.toLowerCase():"")}R=q}if(R)Ke(f,"complete"),Ke(f,"success");else{f.o=6;try{var se=yn(f)>2?f.g.statusText:""}catch{se=""}f.l=se+" ["+f.ca()+"]",Gi(f)}}finally{so(f)}}}}function so(f,A){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);let R=f.g;f.g=null,A||Ke(f,"ready");try{R.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function yn(f){return f.g?f.g.readyState:0}n.ca=function(){try{return yn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(f){if(this.g){var A=this.g.responseText;return f&&A.indexOf(f)==0&&(A=A.substring(f.length)),zt(A)}};function yu(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Ao(f){let A={};f=(f.g&&yn(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let q=0;q<f.length;q++){if(I(f[q]))continue;var R=fs(f[q]);let se=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();let ge=A[se]||[];A[se]=ge,ge.push(R)}He(A,function(q){return q.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function oo(f,A,R){return R&&R.internalChannelParams&&R.internalChannelParams[f]||A}function oa(f){this.za=0,this.i=[],this.j=new _r,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=oo("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=oo("baseRetryDelayMs",5e3,f),this.Za=oo("retryDelaySeedMs",1e4,f),this.Ta=oo("forwardChannelMaxRetries",2,f),this.va=oo("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new Di(f&&f.concurrentRequestLimit),this.Ba=new Ot,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=oa.prototype,n.ka=8,n.I=1,n.connect=function(f,A,R,q){nt(0),this.W=f,this.H=A||{},R&&q!==void 0&&(this.H.OSID=R,this.H.OAID=q),this.F=this.X,this.J=rt(this,null,this.W),xi(this)};function aa(f){if(Va(f),f.I==3){var A=f.V++,R=xn(f.J);if(Fn(R,"SID",f.M),Fn(R,"RID",A),Fn(R,"TYPE","terminate"),Qr(f,R),A=new Si(f,f.j,A),A.M=2,A.A=ci(xn(R)),R=!1,o.navigator&&o.navigator.sendBeacon)try{R=o.navigator.sendBeacon(A.A.toString(),"")}catch{}!R&&o.Image&&(new Image().src=A.A,R=!0),R||(A.g=ct(A.j,null),A.g.ea(A.A)),A.F=Date.now(),Fs(A)}Me(f)}function is(f){f.g&&(v(f),f.g.cancel(),f.g=null)}function Va(f){is(f),f.v&&(o.clearTimeout(f.v),f.v=null),Q(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&o.clearTimeout(f.m),f.m=null)}function xi(f){if(!io(f.h)&&!f.m){f.m=!0;var A=f.Ea;ue||T(),fe||(ue(),fe=!0),P.add(A,f),f.D=0}}function vu(f,A){return Bs(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=A.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=Gr(u(f.Ea,f,A),ce(f,f.D)),f.D++,!0)}n.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;let se=new Si(this,this.j,f),ge=this.o;if(this.U&&(ge?(ge=Oe(ge),Y(ge,this.U)):ge=this.U),this.u!==null||this.R||(se.J=ge,ge=null),this.S)e:{for(var A=0,R=0;R<this.i.length;R++){t:{var q=this.i[R];if("__data__"in q.map&&(q=q.map.__data__,typeof q=="string")){q=q.length;break t}q=void 0}if(q===void 0)break;if(A+=q,A>4096){A=R;break e}if(A===4096||R===this.i.length-1){A=R+1;break e}}A=1e3}else A=1e3;A=Sc(this,se,A),R=xn(this.J),Fn(R,"RID",f),Fn(R,"CVER",22),this.G&&Fn(R,"X-HTTP-Session-Id",this.G),Qr(this,R),ge&&(this.R?A="headers="+wr(gl(ge))+"&"+A:this.u&&gu(R,this.u,ge)),_c(this.h,se),this.Ra&&Fn(R,"TYPE","init"),this.S?(Fn(R,"$req",A),Fn(R,"SID","null"),se.U=!0,Ci(se,R,null)):Ci(se,R,A),this.I=2}}else this.I==3&&(f?ao(this,f):this.i.length==0||io(this.h)||ao(this))};function ao(f,A){var R;A?R=A.l:R=f.V++;let q=xn(f.J);Fn(q,"SID",f.M),Fn(q,"RID",R),Fn(q,"AID",f.K),Qr(f,q),f.u&&f.o&&gu(q,f.u,f.o),R=new Si(f,f.j,R,f.D+1),f.u===null&&(R.J=f.o),A&&(f.i=A.G.concat(f.i)),A=Sc(f,R,1e3),R.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),_c(f.h,R),Ci(R,q,A)}function Qr(f,A){f.H&&Te(f.H,function(R,q){Fn(A,q,R)}),f.l&&Te({},function(R,q){Fn(A,q,R)})}function Sc(f,A,R){R=Math.min(f.i.length,R);let q=f.l?u(f.l.Ka,f.l,f):null;e:{var se=f.i;let Dt=-1;for(;;){let d=["count="+R];Dt==-1?R>0?(Dt=se[0].g,d.push("ofs="+Dt)):Dt=0:d.push("ofs="+Dt);let b=!0;for(let N=0;N<R;N++){var ge=se[N].g;let U=se[N].map;if(ge-=Dt,ge<0)Dt=Math.max(0,se[N].g-100),b=!1;else try{ge="req"+ge+"_"||"";try{var Ge=U instanceof Map?U:Object.entries(U);for(let[ie,ve]of Ge){let qe=ve;a(ve)&&(qe=st(ve)),d.push(ge+ie+"="+encodeURIComponent(qe))}}catch(ie){throw d.push(ge+"type="+encodeURIComponent("_badmap")),ie}}catch{q&&q(U)}}if(b){Ge=d.join("&");break e}}Ge=void 0}return f=f.i.splice(0,R),A.G=f,Ge}function co(f){if(!f.g&&!f.v){f.Y=1;var A=f.Da;ue||T(),fe||(ue(),fe=!0),P.add(A,f),f.A=0}}function So(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=Gr(u(f.Da,f),ce(f,f.A)),f.A++,!0)}n.Da=function(){if(this.v=null,L(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=Gr(u(this.Wa,this),f)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,nt(10),is(this),L(this))};function v(f){f.B!=null&&(o.clearTimeout(f.B),f.B=null)}function L(f){f.g=new Si(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var A=xn(f.na);Fn(A,"RID","rpc"),Fn(A,"SID",f.M),Fn(A,"AID",f.K),Fn(A,"CI",f.F?"0":"1"),!f.F&&f.ia&&Fn(A,"TO",f.ia),Fn(A,"TYPE","xmlhttp"),Qr(f,A),f.u&&f.o&&gu(A,f.u,f.o),f.O&&(f.g.H=f.O);var R=f.g;f=f.ba,R.M=1,R.A=ci(xn(A)),R.u=null,R.R=!0,ai(R,f)}n.Va=function(){this.C!=null&&(this.C=null,is(this),So(this),nt(19))};function Q(f){f.C!=null&&(o.clearTimeout(f.C),f.C=null)}function te(f,A){var R=null;if(f.g==A){Q(f),v(f),f.g=null;var q=2}else if(Io(f.h,A))R=A.G,wc(f.h,A),q=1;else return;if(f.I!=0){if(A.o)if(q==1){R=A.u?A.u.length:0,A=Date.now()-A.F;var se=f.D;q=It(),Ke(q,new mn(q,R)),xi(f)}else co(f);else if(se=A.m,se==3||se==0&&A.X>0||!(q==1&&vu(f,A)||q==2&&So(f)))switch(R&&R.length>0&&(A=f.h,A.i=A.i.concat(R)),se){case 1:Ae(f,5);break;case 4:Ae(f,10);break;case 3:Ae(f,6);break;default:Ae(f,2)}}}function ce(f,A){let R=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(R*=2),R*A}function Ae(f,A){if(f.j.info("Error code "+A),A==2){var R=u(f.bb,f),q=f.Ua;let se=!q;q=new ys(q||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||To(q,"https"),ci(q),se?Hi(q.toString(),R):Tc(q.toString(),R)}else nt(2);f.I=0,f.l&&f.l.pa(A),Me(f),Va(f)}n.bb=function(f){f?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function Me(f){if(f.I=0,f.ja=[],f.l){let A=bc(f.h);(A.length!=0||f.i.length!=0)&&(D(f.ja,A),D(f.ja,f.i),f.h.i.length=0,g(f.i),f.i.length=0),f.l.oa()}}function rt(f,A,R){var q=R instanceof ys?xn(R):new ys(R);if(q.g!="")A&&(q.g=A+"."+q.g),zi(q,q.u);else{var se=o.location;q=se.protocol,A=A?A+"."+se.hostname:se.hostname,se=+se.port;let ge=new ys(null);q&&To(ge,q),A&&(ge.g=A),se&&zi(ge,se),R&&(ge.h=R),q=ge}return R=f.G,A=f.wa,R&&A&&Fn(q,R,A),Fn(q,"VER",f.ka),Qr(f,q),q}function ct(f,A,R){if(A&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return A=f.Aa&&!f.ma?new Tn(new qs({ab:R})):new Tn(f.ma),A.Fa(f.L),A}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function kt(){}n=kt.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Mt(){}Mt.prototype.g=function(f,A){return new Lt(f,A)};function Lt(f,A){tt.call(this),this.g=new oa(A),this.l=f,this.h=A&&A.messageUrlParams||null,f=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(f?f["X-WebChannel-Content-Type"]=A.messageContentType:f={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.sa&&(f?f["X-WebChannel-Client-Profile"]=A.sa:f={"X-WebChannel-Client-Profile":A.sa}),this.g.U=f,(f=A&&A.Qb)&&!I(f)&&(this.g.u=f),this.A=A&&A.supportsCrossDomainXhr||!1,this.v=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!I(A)&&(this.g.G=A,f=this.h,f!==null&&A in f&&(f=this.h,A in f&&delete f[A])),this.j=new wn(this)}p(Lt,tt),Lt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){aa(this.g)},Lt.prototype.o=function(f){var A=this.g;if(typeof f=="string"){var R={};R.__data__=f,f=R}else this.v&&(R={},R.__data__=st(f),f=R);A.i.push(new hu(A.Ya++,f)),A.I==3&&xi(A)},Lt.prototype.N=function(){this.g.l=null,delete this.j,aa(this.g),delete this.g,Lt.Z.N.call(this)};function Xn(f){Kt.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var A=f.__sm__;if(A){e:{for(let R in A){f=R;break e}f=void 0}(this.i=f)&&(f=this.i,A=A!==null&&f in A?A[f]:void 0),this.data=A}else this.data=f}p(Xn,Kt);function zn(){Bn.call(this),this.status=1}p(zn,Bn);function wn(f){this.g=f}p(wn,kt),wn.prototype.ra=function(){Ke(this.g,"a")},wn.prototype.qa=function(f){Ke(this.g,new Xn(f))},wn.prototype.pa=function(f){Ke(this.g,new zn)},wn.prototype.oa=function(){Ke(this.g,"b")},Mt.prototype.createWebChannel=Mt.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,LC=qu.createWebChannelTransport=function(){return new Mt},OC=qu.getStatEventTarget=function(){return It()},MC=qu.Event=ht,j1=qu.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},oi.NO_ERROR=0,oi.TIMEOUT=8,oi.HTTP_ERROR=6,By=qu.ErrorCode=oi,Wr.COMPLETE="complete",kC=qu.EventType=Wr,an.EventType=jt,jt.OPEN="a",jt.CLOSE="b",jt.ERROR="c",jt.MESSAGE="d",tt.prototype.listen=tt.prototype.J,bp=qu.WebChannel=an,zee=qu.FetchXmlHttpFactory=qs,Tn.prototype.listenOnce=Tn.prototype.K,Tn.prototype.getLastError=Tn.prototype.Ha,Tn.prototype.getLastErrorCode=Tn.prototype.ya,Tn.prototype.getStatus=Tn.prototype.ca,Tn.prototype.getResponseJson=Tn.prototype.La,Tn.prototype.getResponseText=Tn.prototype.la,Tn.prototype.send=Tn.prototype.ea,Tn.prototype.setWithCredentials=Tn.prototype.Fa,PC=qu.XhrIo=Tn}).apply(typeof B1<"u"?B1:typeof self<"u"?self:typeof window<"u"?window:{});var FV="@firebase/firestore",VV="4.9.2";var Ji=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ji.UNAUTHENTICATED=new Ji(null),Ji.GOOGLE_CREDENTIALS=new Ji("google-credentials-uid"),Ji.FIRST_PARTY=new Ji("first-party-uid"),Ji.MOCK_USER=new Ji("mock-user");var $p="12.3.0";var Th=new wp("@firebase/firestore");function Ep(){return Th.logLevel}function ot(n,...e){if(Th.logLevel<=Pn.DEBUG){let t=e.map(xx);Th.debug(`Firestore (${$p}): ${n}`,...t)}}function $u(n,...e){if(Th.logLevel<=Pn.ERROR){let t=e.map(xx);Th.error(`Firestore (${$p}): ${n}`,...t)}}function xp(n,...e){if(Th.logLevel<=Pn.WARN){let t=e.map(xx);Th.warn(`Firestore (${$p}): ${n}`,...t)}}function xx(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function xt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,D6(n,r,t)}function D6(n,e,t){let r=`FIRESTORE (${$p}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw $u(r),new Error(r)}function Mn(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||D6(e,i,r)}function Yt(n,e){return n}var Ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Qe=class extends rc{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Na=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var W1=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},UC=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ji.UNAUTHENTICATED))}shutdown(){}},qC=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},zC=class{constructor(e){this.t=e,this.currentUser=Ji.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Mn(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Na;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Na,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{ot("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ot("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Na)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ot("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Mn(typeof r.accessToken=="string",31837,{l:r}),new W1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Mn(e===null||typeof e=="string",2055,{h:e}),new Ji(e)}},$C=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ji.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},HC=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new $C(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ji.FIRST_PARTY))}shutdown(){}invalidateToken(){}},K1=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},GC=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,L1(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Mn(this.o===void 0,3512);let r=s=>{s.error!=null&&ot("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,ot("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{ot("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):ot("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new K1(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Mn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new K1(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function $ee(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Wy=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=$ee(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function bn(n,e){return n<e?-1:n>e?1:0}function WC(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),s=e.charAt(r);if(i!==s)return FC(i)===FC(s)?bn(i,s):FC(i)?1:-1}return bn(n.length,e.length)}var Hee=55296,Gee=57343;function FC(n){let e=n.charCodeAt(0);return e>=Hee&&e<=Gee}function Np(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var BV="__name__",Q1=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&xt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&xt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return bn(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):WC(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Uu.fromString(e.substring(4,e.length-2))}},vr=class n extends Q1{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new Qe(Ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Wee=/^[_a-zA-Z][_a-zA-Z0-9]*$/,qo=class n extends Q1{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Wee.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===BV}static keyField(){return new n([BV])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new Qe(Ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new Qe(Ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Qe(Ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Qe(Ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Nt=class n{constructor(e){this.path=e}static fromPath(e){return new n(vr.fromString(e))}static fromName(e){return new n(vr.fromString(e).popFirst(5))}static empty(){return new n(vr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return vr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new vr(e.slice()))}};function x6(n,e,t){if(!t)throw new Qe(Ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Kee(n,e,t,r){if(e===!0&&r===!0)throw new Qe(Ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function jV(n){if(!Nt.isDocumentKey(n))throw new Qe(Ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function UV(n){if(Nt.isDocumentKey(n))throw new Qe(Ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function N6(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Cb(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":xt(12329,{type:typeof n})}function zo(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Qe(Ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Cb(n);throw new Qe(Ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function _i(n,e){let t={typeString:n};return e&&(t.value=e),t}function ov(n,e){if(!N6(n))throw new Qe(Ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new Qe(Ne.INVALID_ARGUMENT,t);return!0}var qV=-62135596800,zV=1e6,wi=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*zV);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Qe(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Qe(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<qV)throw new Qe(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Qe(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zV}_compareTo(e){return this.seconds===e.seconds?bn(this.nanoseconds,e.nanoseconds):bn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ov(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-qV;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};wi._jsonSchemaVersion="firestore/timestamp/1.0",wi._jsonSchema={type:_i("string",wi._jsonSchemaVersion),seconds:_i("number"),nanoseconds:_i("number")};var Gt=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new wi(0,0))}static max(){return new n(new wi(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ky=-1,KC=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};KC.UNKNOWN_ID=-1;function Qee(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Gt.fromTimestamp(r===1e9?new wi(t+1,0):new wi(t,r));return new Ah(i,Nt.empty(),e)}function Yee(n){return new Ah(n.readTime,n.key,Ky)}var Ah=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Gt.min(),Nt.empty(),Ky)}static max(){return new n(Gt.max(),Nt.empty(),Ky)}};function Jee(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Nt.comparator(n.documentKey,e.documentKey),t!==0?t:bn(n.largestBatchId,e.largestBatchId))}var Zee="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",QC=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Hp(n){if(n.code!==Ne.FAILED_PRECONDITION||n.message!==Zee)throw n;ot("LocalStore","Unexpectedly lost primary lease")}var je=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;t(e[u]).next(l=>{o[u]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function Xee(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Gp(n){return n.name==="IndexedDbTransactionError"}var Nx=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),Rx=-1;function av(n){return n==null}function Qy(n){return n===0&&1/n==-1/0}function ete(n){return typeof n=="number"&&Number.isInteger(n)&&!Qy(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var R6="";function tte(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=$V(e)),e=nte(n.get(t),e);return $V(e)}function nte(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case R6:t+="";break;default:t+=s}}return t}function $V(n){return n+R6+""}var rte="remoteDocuments",P6="owner";var k6="mutationQueues";var M6="mutations";var O6="documentMutations",ite="remoteDocumentsV14";var L6="remoteDocumentGlobal";var F6="targets";var V6="targetDocuments";var B6="targetGlobal",j6="collectionParents";var U6="clientMetadata";var q6="bundles";var z6="namedQueries";var ste="indexConfiguration";var ote="indexState";var ate="indexEntries";var $6="documentOverlays";var cte="globals";var ute=[k6,M6,O6,rte,F6,P6,B6,V6,U6,L6,j6,q6,z6],axe=[...ute,$6],lte=[k6,M6,O6,ite,F6,P6,B6,V6,U6,L6,j6,q6,z6,$6],dte=lte,hte=[...dte,ste,ote,ate];var cxe=[...hte,cte];function HV(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function hd(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function H6(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var qr=class n{constructor(e,t){this.comparator=e,this.root=t||Wc.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wc.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sp(this.root,e,this.comparator,!0)}},Sp=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Wc=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xt(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw xt(27949);return e+(this.isRed()?0:1)}};Wc.EMPTY=null,Wc.RED=!0,Wc.BLACK=!1;Wc.EMPTY=new class{constructor(){this.size=0}get key(){throw xt(57766)}get value(){throw xt(16141)}get color(){throw xt(16727)}get left(){throw xt(29726)}get right(){throw xt(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Wc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Zi=class n{constructor(e){this.comparator=e,this.data=new qr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Y1(this.data.getIterator())}getIteratorFrom(e){return new Y1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Y1=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var xa=class n{constructor(e){this.fields=e,e.sort(qo.comparator)}static empty(){return new n([])}unionWith(e){let t=new Zi(qo.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Np(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var J1=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ds=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new J1("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ds.EMPTY_BYTE_STRING=new Ds("");var fte=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hu(n){if(Mn(!!n,39018),typeof n=="string"){let e=0,t=fte.exec(n);if(Mn(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xr(n.seconds),nanos:xr(n.nanos)}}function xr(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Gu(n){return typeof n=="string"?Ds.fromBase64String(n):Ds.fromUint8Array(n)}var G6="server_timestamp",W6="__type__",K6="__previous_value__",Q6="__local_write_time__";function Px(n){return(n?.mapValue?.fields||{})[W6]?.stringValue===G6}function Db(n){let e=n.mapValue.fields[K6];return Px(e)?Db(e):e}function Yy(n){let e=Hu(n.mapValue.fields[Q6].timestampValue);return new wi(e.seconds,e.nanos)}var YC=class{constructor(e,t,r,i,s,o,a,c,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=l}},Z1="(default)",X1=class n{constructor(e,t){this.projectId=e,this.database=t||Z1}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Z1}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var kx="__type__",Y6="__max__",U1={mapValue:{fields:{__type__:{stringValue:Y6}}}},Mx="__vector__",Rp="value";function ad(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Px(n)?4:Z6(n)?9007199254740991:J6(n)?10:11:xt(28295,{value:n})}function Qc(n,e){if(n===e)return!0;let t=ad(n);if(t!==ad(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Yy(n).isEqual(Yy(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Hu(i.timestampValue),a=Hu(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Gu(i.bytesValue).isEqual(Gu(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return xr(i.geoPointValue.latitude)===xr(s.geoPointValue.latitude)&&xr(i.geoPointValue.longitude)===xr(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return xr(i.integerValue)===xr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=xr(i.doubleValue),a=xr(s.doubleValue);return o===a?Qy(o)===Qy(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return Np(n.arrayValue.values||[],e.arrayValue.values||[],Qc);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(HV(o)!==HV(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Qc(o[c],a[c])))return!1;return!0})(n,e);default:return xt(52216,{left:n})}}function Jy(n,e){return(n.values||[]).find(t=>Qc(t,e))!==void 0}function Pp(n,e){if(n===e)return 0;let t=ad(n),r=ad(e);if(t!==r)return bn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return bn(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=xr(s.integerValue||s.doubleValue),c=xr(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return GV(n.timestampValue,e.timestampValue);case 4:return GV(Yy(n),Yy(e));case 5:return WC(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=Gu(s),c=Gu(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=bn(a[u],c[u]);if(l!==0)return l}return bn(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=bn(xr(s.latitude),xr(o.latitude));return a!==0?a:bn(xr(s.longitude),xr(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return WV(n.arrayValue,e.arrayValue);case 10:return(function(s,o){let a=s.fields||{},c=o.fields||{},u=a[Rp]?.arrayValue,l=c[Rp]?.arrayValue,p=bn(u?.values?.length||0,l?.values?.length||0);return p!==0?p:WV(u,l)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===U1.mapValue&&o===U1.mapValue)return 0;if(s===U1.mapValue)return 1;if(o===U1.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let p=0;p<c.length&&p<l.length;++p){let y=WC(c[p],l[p]);if(y!==0)return y;let g=Pp(a[c[p]],u[l[p]]);if(g!==0)return g}return bn(c.length,l.length)})(n.mapValue,e.mapValue);default:throw xt(23264,{he:t})}}function GV(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return bn(n,e);let t=Hu(n),r=Hu(e),i=bn(t.seconds,r.seconds);return i!==0?i:bn(t.nanos,r.nanos)}function WV(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Pp(t[i],r[i]);if(s)return s}return bn(t.length,r.length)}function kp(n){return JC(n)}function JC(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Hu(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Gu(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Nt.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=JC(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${JC(t.fields[o])}`;return i+"}"})(n.mapValue):xt(61005,{value:n})}function $1(n){switch(ad(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Db(n);return e?16+$1(e):16;case 5:return 2*n.stringValue.length;case 6:return Gu(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+$1(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return hd(r.fields,(s,o)=>{i+=s.length+$1(o)}),i})(n.mapValue);default:throw xt(13486,{value:n})}}function KV(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ZC(n){return!!n&&"integerValue"in n}function Ox(n){return!!n&&"arrayValue"in n}function QV(n){return!!n&&"nullValue"in n}function YV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function H1(n){return!!n&&"mapValue"in n}function J6(n){return(n?.mapValue?.fields||{})[kx]?.stringValue===Mx}function qy(n){if(n.geoPointValue)return{geoPointValue:Le({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Le({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return hd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=qy(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=qy(n.arrayValue.values[t]);return e}return Le({},n)}function Z6(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Y6}var lxe={mapValue:{fields:{[kx]:{stringValue:Mx},[Rp]:{arrayValue:{}}}}};var mo=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!H1(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qy(t)}setAll(e){let t=qo.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=qy(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());H1(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];H1(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){hd(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(qy(this.value))}};function X6(n){let e=[];return hd(n.fields,(t,r)=>{let i=new qo([t]);if(H1(r)){let s=X6(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new xa(e)}var Ho=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Gt.min(),Gt.min(),Gt.min(),mo.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Gt.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Gt.min(),Gt.min(),mo.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Gt.min(),Gt.min(),mo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Gt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Gt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Mp=class{constructor(e,t){this.position=e,this.inclusive=t}};function JV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Nt.comparator(Nt.fromName(o.referenceValue),t.key):r=Pp(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function ZV(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Qc(n.position[t],e.position[t]))return!1;return!0}var Sh=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function pte(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var eb=class{},vi=class n extends eb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new eD(e,t,r):t==="array-contains"?new rD(e,r):t==="in"?new iD(e,r):t==="not-in"?new sD(e,r):t==="array-contains-any"?new oD(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new tD(e,r):new nD(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Pp(t,this.value)):t!==null&&ad(this.value)===ad(t)&&this.matchesComparison(Pp(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},oc=class n extends eb{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return e8(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function e8(n){return n.op==="and"}function t8(n){return gte(n)&&e8(n)}function gte(n){for(let e of n.filters)if(e instanceof oc)return!1;return!0}function XC(n){if(n instanceof vi)return n.field.canonicalString()+n.op.toString()+kp(n.value);if(t8(n))return n.filters.map(e=>XC(e)).join(",");{let e=n.filters.map(t=>XC(t)).join(",");return`${n.op}(${e})`}}function n8(n,e){return n instanceof vi?(function(r,i){return i instanceof vi&&r.op===i.op&&r.field.isEqual(i.field)&&Qc(r.value,i.value)})(n,e):n instanceof oc?(function(r,i){return i instanceof oc&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&n8(o,i.filters[a]),!0):!1})(n,e):void xt(19439)}function r8(n){return n instanceof vi?(function(t){return`${t.field.canonicalString()} ${t.op} ${kp(t.value)}`})(n):n instanceof oc?(function(t){return t.op.toString()+" {"+t.getFilters().map(r8).join(" ,")+"}"})(n):"Filter"}var eD=class extends vi{constructor(e,t,r){super(e,t,r),this.key=Nt.fromName(r.referenceValue)}matches(e){let t=Nt.comparator(e.key,this.key);return this.matchesComparison(t)}},tD=class extends vi{constructor(e,t){super(e,"in",t),this.keys=i8("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},nD=class extends vi{constructor(e,t){super(e,"not-in",t),this.keys=i8("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function i8(n,e){return(e.arrayValue?.values||[]).map(t=>Nt.fromName(t.referenceValue))}var rD=class extends vi{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Ox(t)&&Jy(t.arrayValue,this.value)}},iD=class extends vi{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Jy(this.value.arrayValue,t)}},sD=class extends vi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Jy(this.value.arrayValue,t)}},oD=class extends vi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Ox(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Jy(this.value.arrayValue,r))}};var aD=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}};function XV(n,e=null,t=[],r=[],i=null,s=null,o=null){return new aD(n,e,t,r,i,s,o)}function Lx(n){let e=Yt(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>XC(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),av(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>kp(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>kp(r)).join(",")),e.Te=t}return e.Te}function Fx(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!pte(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!n8(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ZV(n.startAt,e.startAt)&&ZV(n.endAt,e.endAt)}function cD(n){return Nt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var cd=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function mte(n,e,t,r,i,s,o,a){return new cd(n,e,t,r,i,s,o,a)}function xb(n){return new cd(n)}function e6(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function s8(n){return n.collectionGroup!==null}function zy(n){let e=Yt(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Zi(qo.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Sh(s,r))}),t.has(qo.keyField().canonicalString())||e.Ie.push(new Sh(qo.keyField(),r))}return e.Ie}function Kc(n){let e=Yt(n);return e.Ee||(e.Ee=yte(e,zy(n))),e.Ee}function yte(n,e){if(n.limitType==="F")return XV(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Sh(i.field,s)});let t=n.endAt?new Mp(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Mp(n.startAt.position,n.startAt.inclusive):null;return XV(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function uD(n,e){let t=n.filters.concat([e]);return new cd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function lD(n,e,t){return new cd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Nb(n,e){return Fx(Kc(n),Kc(e))&&n.limitType===e.limitType}function o8(n){return`${Lx(Kc(n))}|lt:${n.limitType}`}function Ip(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>r8(i)).join(", ")}]`),av(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>kp(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>kp(i)).join(",")),`Target(${r})`})(Kc(n))}; limitType=${n.limitType})`}function Rb(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Nt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of zy(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let u=JV(o,a,c);return o.inclusive?u<=0:u<0})(r.startAt,zy(r),i)||r.endAt&&!(function(o,a,c){let u=JV(o,a,c);return o.inclusive?u>=0:u>0})(r.endAt,zy(r),i))})(n,e)}function vte(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function a8(n){return(e,t)=>{let r=!1;for(let i of zy(n)){let s=_te(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function _te(n,e,t){let r=n.field.isKeyField()?Nt.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?Pp(c,u):xt(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return xt(19790,{direction:n.dir})}}var Wu=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){hd(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return H6(this.inner)}size(){return this.innerSize}};var wte=new qr(Nt.comparator);function Ku(){return wte}var c8=new qr(Nt.comparator);function jy(...n){let e=c8;for(let t of n)e=e.insert(t.key,t);return e}function u8(n){let e=c8;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function bh(){return $y()}function l8(){return $y()}function $y(){return new Wu(n=>n.toString(),(n,e)=>n.isEqual(e))}var bte=new qr(Nt.comparator),Ete=new Zi(Nt.comparator);function En(...n){let e=Ete;for(let t of n)e=e.add(t);return e}var Ite=new Zi(bn);function Tte(){return Ite}function Vx(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qy(e)?"-0":e}}function d8(n){return{integerValue:""+n}}function Ate(n,e){return ete(e)?d8(e):Vx(n,e)}var Op=class{constructor(){this._=void 0}};function Ste(n,e,t){return n instanceof Ch?(function(i,s){let o={fields:{[W6]:{stringValue:G6},[Q6]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Px(s)&&(s=Db(s)),s&&(o.fields[K6]=s),{mapValue:o}})(t,e):n instanceof Dh?f8(n,e):n instanceof xh?p8(n,e):(function(i,s){let o=h8(i,s),a=t6(o)+t6(i.Ae);return ZC(o)&&ZC(i.Ae)?d8(a):Vx(i.serializer,a)})(n,e)}function Cte(n,e,t){return n instanceof Dh?f8(n,e):n instanceof xh?p8(n,e):t}function h8(n,e){return n instanceof Lp?(function(r){return ZC(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var Ch=class extends Op{},Dh=class extends Op{constructor(e){super(),this.elements=e}};function f8(n,e){let t=g8(e);for(let r of n.elements)t.some(i=>Qc(i,r))||t.push(r);return{arrayValue:{values:t}}}var xh=class extends Op{constructor(e){super(),this.elements=e}};function p8(n,e){let t=g8(e);for(let r of n.elements)t=t.filter(i=>!Qc(i,r));return{arrayValue:{values:t}}}var Lp=class extends Op{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function t6(n){return xr(n.integerValue||n.doubleValue)}function g8(n){return Ox(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var dD=class{constructor(e,t){this.field=e,this.transform=t}};function Dte(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Dh&&i instanceof Dh||r instanceof xh&&i instanceof xh?Np(r.elements,i.elements,Qc):r instanceof Lp&&i instanceof Lp?Qc(r.Ae,i.Ae):r instanceof Ch&&i instanceof Ch})(n.transform,e.transform)}var hD=class{constructor(e,t){this.version=e,this.transformResults=t}},yo=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function G1(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Fp=class{};function m8(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Vp(n.key,yo.none()):new Nh(n.key,n.data,yo.none());{let t=n.data,r=mo.empty(),i=new Zi(qo.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Yc(n.key,r,new xa(i.toArray()),yo.none())}}function xte(n,e,t){n instanceof Nh?(function(i,s,o){let a=i.value.clone(),c=r6(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Yc?(function(i,s,o){if(!G1(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=r6(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(y8(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Hy(n,e,t,r){return n instanceof Nh?(function(s,o,a,c){if(!G1(s.precondition,o))return a;let u=s.value.clone(),l=i6(s.fieldTransforms,c,o);return u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof Yc?(function(s,o,a,c){if(!G1(s.precondition,o))return a;let u=i6(s.fieldTransforms,c,o),l=o.data;return l.setAll(y8(s)),l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(s,o,a){return G1(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function Nte(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=h8(r.transform,i||null);s!=null&&(t===null&&(t=mo.empty()),t.set(r.field,s))}return t||null}function n6(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Np(r,i,(s,o)=>Dte(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Nh=class extends Fp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Yc=class extends Fp{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function y8(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function r6(n,e,t){let r=new Map;Mn(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Cte(o,a,t[i]))}return r}function i6(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,Ste(s,o,e))}return r}var Vp=class extends Fp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},tb=class extends Fp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var fD=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&xte(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Hy(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Hy(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=l8();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=m8(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Gt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),En())}isEqual(e){return this.batchId===e.batchId&&Np(this.mutations,e.mutations,(t,r)=>n6(t,r))&&Np(this.baseMutations,e.baseMutations,(t,r)=>n6(t,r))}},pD=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Mn(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return bte})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var gD=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var mD=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var mi,kn;function v8(n){switch(n){case Ne.OK:return xt(64938);case Ne.CANCELLED:case Ne.UNKNOWN:case Ne.DEADLINE_EXCEEDED:case Ne.RESOURCE_EXHAUSTED:case Ne.INTERNAL:case Ne.UNAVAILABLE:case Ne.UNAUTHENTICATED:return!1;case Ne.INVALID_ARGUMENT:case Ne.NOT_FOUND:case Ne.ALREADY_EXISTS:case Ne.PERMISSION_DENIED:case Ne.FAILED_PRECONDITION:case Ne.ABORTED:case Ne.OUT_OF_RANGE:case Ne.UNIMPLEMENTED:case Ne.DATA_LOSS:return!0;default:return xt(15467,{code:n})}}function _8(n){if(n===void 0)return $u("GRPC error has no .code"),Ne.UNKNOWN;switch(n){case mi.OK:return Ne.OK;case mi.CANCELLED:return Ne.CANCELLED;case mi.UNKNOWN:return Ne.UNKNOWN;case mi.DEADLINE_EXCEEDED:return Ne.DEADLINE_EXCEEDED;case mi.RESOURCE_EXHAUSTED:return Ne.RESOURCE_EXHAUSTED;case mi.INTERNAL:return Ne.INTERNAL;case mi.UNAVAILABLE:return Ne.UNAVAILABLE;case mi.UNAUTHENTICATED:return Ne.UNAUTHENTICATED;case mi.INVALID_ARGUMENT:return Ne.INVALID_ARGUMENT;case mi.NOT_FOUND:return Ne.NOT_FOUND;case mi.ALREADY_EXISTS:return Ne.ALREADY_EXISTS;case mi.PERMISSION_DENIED:return Ne.PERMISSION_DENIED;case mi.FAILED_PRECONDITION:return Ne.FAILED_PRECONDITION;case mi.ABORTED:return Ne.ABORTED;case mi.OUT_OF_RANGE:return Ne.OUT_OF_RANGE;case mi.UNIMPLEMENTED:return Ne.UNIMPLEMENTED;case mi.DATA_LOSS:return Ne.DATA_LOSS;default:return xt(39323,{code:n})}}(kn=mi||(mi={}))[kn.OK=0]="OK",kn[kn.CANCELLED=1]="CANCELLED",kn[kn.UNKNOWN=2]="UNKNOWN",kn[kn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kn[kn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kn[kn.NOT_FOUND=5]="NOT_FOUND",kn[kn.ALREADY_EXISTS=6]="ALREADY_EXISTS",kn[kn.PERMISSION_DENIED=7]="PERMISSION_DENIED",kn[kn.UNAUTHENTICATED=16]="UNAUTHENTICATED",kn[kn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kn[kn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kn[kn.ABORTED=10]="ABORTED",kn[kn.OUT_OF_RANGE=11]="OUT_OF_RANGE",kn[kn.UNIMPLEMENTED=12]="UNIMPLEMENTED",kn[kn.INTERNAL=13]="INTERNAL",kn[kn.UNAVAILABLE=14]="UNAVAILABLE",kn[kn.DATA_LOSS=15]="DATA_LOSS";var Rte=null;function Pte(){return new TextEncoder}var kte=new Uu([4294967295,4294967295],0);function s6(n){let e=Pte().encode(n),t=new RC;return t.update(e),new Uint8Array(t.digest())}function o6(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Uu([t,r],0),new Uu([i,s],0)]}var yD=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Eh(`Invalid padding: ${t}`);if(r<0)throw new Eh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Eh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Eh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Uu.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Uu.fromNumber(r)));return i.compare(kte)===1&&(i=new Uu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=s6(e),[r,i]=o6(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;let t=s6(e),[r,i]=o6(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);this.Se(o)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Eh=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var nb=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Zy.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Gt.min(),i,new qr(bn),Ku(),En())}},Zy=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,En(),En(),En())}};var Cp=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},rb=class{constructor(e,t){this.targetId=e,this.Ce=t}},ib=class{constructor(e,t,r=Ds.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},sb=class{constructor(){this.ve=0,this.Fe=a6(),this.Me=Ds.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=En(),t=En(),r=En();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:xt(38017,{changeType:s})}}),new Zy(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=a6()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Mn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},vD=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ku(),this.Je=q1(),this.He=q1(),this.Ye=new qr(bn)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:xt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let s=i.target;if(cD(s))if(r===0){let o=new Nt(s.path);this.et(t,o,Ho.newNoDocument(o,Gt.min()))}else Mn(r===1,20013,{expectedCount:r});else{let o=this._t(t);if(o!==r){let a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}Rte?.lt((function(l,p,y,g,D){let M={localCacheCount:l,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},k=p.unchangedNames;return k&&(M.bloomFilter={applied:D===0,hashCount:k?.hashCount??0,bitmapLength:k?.bits?.bitmap?.length??0,padding:k?.bits?.padding??0,mightContain:O=>g?.mightContain(O)??!1}),M})(o,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Gu(r).toUint8Array()}catch(c){if(c instanceof J1)return xp("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new yD(o,i,s)}catch(c){return xp(c instanceof Eh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&cD(a.target)){let c=new Nt(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Ho.newNoDocument(c,e))}s.Be&&(t.set(o,s.ke()),s.qe())}});let r=En();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));let i=new nb(e,t,this.Ye,this.je,r);return this.je=Ku(),this.Je=q1(),this.He=q1(),this.Ye=new qr(bn),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new sb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Zi(bn),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Zi(bn),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||ot("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new sb),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function q1(){return new qr(Nt.comparator)}function a6(){return new qr(Nt.comparator)}var Mte={asc:"ASCENDING",desc:"DESCENDING"},Ote={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Lte={and:"AND",or:"OR"},_D=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function wD(n,e){return n.useProto3Json||av(e)?e:{value:e}}function ob(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function w8(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Fte(n,e){return ob(n,e.toTimestamp())}function $o(n){return Mn(!!n,49232),Gt.fromTimestamp((function(t){let r=Hu(t);return new wi(r.seconds,r.nanos)})(n))}function Bx(n,e){return bD(n,e).canonicalString()}function bD(n,e){let t=(function(i){return new vr(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function b8(n){let e=vr.fromString(n);return Mn(C8(e),10190,{key:e.toString()}),e}function ab(n,e){return Bx(n.databaseId,e.path)}function Gy(n,e){let t=b8(e);if(t.get(1)!==n.databaseId.projectId)throw new Qe(Ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Qe(Ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Nt(I8(t))}function E8(n,e){return Bx(n.databaseId,e)}function Vte(n){let e=b8(n);return e.length===4?vr.emptyPath():I8(e)}function ED(n){return new vr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function I8(n){return Mn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function c6(n,e,t){return{name:ab(n,e),fields:t.value.mapValue.fields}}function Bte(n,e){return"found"in e?(function(r,i){Mn(!!i.found,43571),i.found.name,i.found.updateTime;let s=Gy(r,i.found.name),o=$o(i.found.updateTime),a=i.found.createTime?$o(i.found.createTime):Gt.min(),c=new mo({mapValue:{fields:i.found.fields}});return Ho.newFoundDocument(s,o,a,c)})(n,e):"missing"in e?(function(r,i){Mn(!!i.missing,3894),Mn(!!i.readTime,22933);let s=Gy(r,i.missing),o=$o(i.readTime);return Ho.newNoDocument(s,o)})(n,e):xt(7234,{result:e})}function jte(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:xt(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(u,l){return u.useProto3Json?(Mn(l===void 0||typeof l=="string",58123),Ds.fromBase64String(l||"")):(Mn(l===void 0||l instanceof Buffer||l instanceof Uint8Array,16193),Ds.fromUint8Array(l||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(u){let l=u.code===void 0?Ne.UNKNOWN:_8(u.code);return new Qe(l,u.message||"")})(o);t=new ib(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Gy(n,r.document.name),s=$o(r.document.updateTime),o=r.document.createTime?$o(r.document.createTime):Gt.min(),a=new mo({mapValue:{fields:r.document.fields}}),c=Ho.newFoundDocument(i,s,o,a),u=r.targetIds||[],l=r.removedTargetIds||[];t=new Cp(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Gy(n,r.document),s=r.readTime?$o(r.readTime):Gt.min(),o=Ho.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Cp([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Gy(n,r.document),s=r.removedTargetIds||[];t=new Cp([],s,i,null)}else{if(!("filter"in e))return xt(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new mD(i,s),a=r.targetId;t=new rb(a,o)}}return t}function T8(n,e){let t;if(e instanceof Nh)t={update:c6(n,e.key,e.value)};else if(e instanceof Vp)t={delete:ab(n,e.key)};else if(e instanceof Yc)t={update:c6(n,e.key,e.data),updateMask:Qte(e.fieldMask)};else{if(!(e instanceof tb))return xt(16599,{Vt:e.type});t={verify:ab(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof Ch)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Dh)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof xh)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Lp)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw xt(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:Fte(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:xt(27497)})(n,e.precondition)),t}function Ute(n,e){return n&&n.length>0?(Mn(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?$o(i.updateTime):$o(s);return o.isEqual(Gt.min())&&(o=$o(s)),new hD(o,i.transformResults||[])})(t,e))):[]}function qte(n,e){return{documents:[E8(n,e.path)]}}function zte(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=E8(n,i);let s=(function(u){if(u.length!==0)return S8(oc.create(u,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(u){if(u.length!==0)return u.map(l=>(function(y){return{field:Tp(y.field),direction:Gte(y.dir)}})(l))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=wD(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:t,parent:i}}function $te(n){let e=Vte(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Mn(r===1,65062);let l=t.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];t.where&&(s=(function(p){let y=A8(p);return y instanceof oc&&t8(y)?y.getFilters():[y]})(t.where));let o=[];t.orderBy&&(o=(function(p){return p.map(y=>(function(D){return new Sh(Ap(D.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(y))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let y;return y=typeof p=="object"?p.value:p,av(y)?null:y})(t.limit));let c=null;t.startAt&&(c=(function(p){let y=!!p.before,g=p.values||[];return new Mp(g,y)})(t.startAt));let u=null;return t.endAt&&(u=(function(p){let y=!p.before,g=p.values||[];return new Mp(g,y)})(t.endAt)),mte(e,i,o,s,a,"F",c,u)}function Hte(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xt(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function A8(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ap(t.unaryFilter.field);return vi.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ap(t.unaryFilter.field);return vi.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ap(t.unaryFilter.field);return vi.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ap(t.unaryFilter.field);return vi.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xt(61313);default:return xt(60726)}})(n):n.fieldFilter!==void 0?(function(t){return vi.create(Ap(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xt(58110);default:return xt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return oc.create(t.compositeFilter.filters.map(r=>A8(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return xt(1026)}})(t.compositeFilter.op))})(n):xt(30097,{filter:n})}function Gte(n){return Mte[n]}function Wte(n){return Ote[n]}function Kte(n){return Lte[n]}function Tp(n){return{fieldPath:n.canonicalString()}}function Ap(n){return qo.fromServerFormat(n.fieldPath)}function S8(n){return n instanceof vi?(function(t){if(t.op==="=="){if(YV(t.value))return{unaryFilter:{field:Tp(t.field),op:"IS_NAN"}};if(QV(t.value))return{unaryFilter:{field:Tp(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(YV(t.value))return{unaryFilter:{field:Tp(t.field),op:"IS_NOT_NAN"}};if(QV(t.value))return{unaryFilter:{field:Tp(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tp(t.field),op:Wte(t.op),value:t.value}}})(n):n instanceof oc?(function(t){let r=t.getFilters().map(i=>S8(i));return r.length===1?r[0]:{compositeFilter:{op:Kte(t.op),filters:r}}})(n):xt(54877,{filter:n})}function Qte(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function C8(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Xy=class n{constructor(e,t,r,i,s=Gt.min(),o=Gt.min(),a=Ds.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var ID=class{constructor(e){this.yt=e}};function Yte(n){let e=$te({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?lD(e,e.limit,"L"):e}var cb=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(xr(e.integerValue));else if("doubleValue"in e){let r=xr(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Qy(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Hu(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Gu(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?Z6(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):J6(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):xt(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Rp,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(xr(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),Nt.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};cb.Kt=new cb;var TD=class{constructor(){this.Cn=new AD}addToCollectionParentIndex(e,t){return this.Cn.add(t),je.resolve()}getCollectionParents(e,t){return je.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return je.resolve()}deleteFieldIndex(e,t){return je.resolve()}deleteAllFieldIndexes(e){return je.resolve()}createTargetIndexes(e,t){return je.resolve()}getDocumentsMatchingTarget(e,t){return je.resolve(null)}getIndexType(e,t){return je.resolve(0)}getFieldIndexes(e,t){return je.resolve([])}getNextCollectionGroupToUpdate(e){return je.resolve(null)}getMinOffset(e,t){return je.resolve(Ah.min())}getMinOffsetFromCollectionGroup(e,t){return je.resolve(Ah.min())}updateCollectionGroup(e,t,r){return je.resolve()}updateIndexEntries(e,t){return je.resolve()}},AD=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Zi(vr.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Zi(vr.comparator)).toArray()}};var dxe=new Uint8Array(0);var u6={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},D8=41943040,Da=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Da.DEFAULT_COLLECTION_PERCENTILE=10,Da.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Da.DEFAULT=new Da(D8,Da.DEFAULT_COLLECTION_PERCENTILE,Da.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Da.DISABLED=new Da(-1,0,0);var ev=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var l6="LruGarbageCollector",Jte=1048576;function d6([n,e],[t,r]){let i=bn(n,t);return i===0?bn(e,r):i}var SD=class{constructor(e){this.Ir=e,this.buffer=new Zi(d6),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();d6(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},CD=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ot(l6,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Gp(t)?ot(l6,"Ignoring IndexedDB error during garbage collection: ",t):await Hp(t)}await this.Vr(3e5)})}},DD=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return je.resolve(Nx.ce);let r=new SD(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ot("LruGarbageCollector","Garbage collection skipped; disabled"),je.resolve(u6)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ot("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),u6):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,o,a,c,u,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ot("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),Ep()<=Pn.DEBUG&&ot("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-l}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(u-c)+`ms
Total Duration: ${u-l}ms`),je.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}};function Zte(n,e){return new DD(n,e)}var xD=class{constructor(){this.changes=new Wu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ho.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?je.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var ND=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var RD=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Hy(r.mutation,i,xa.empty(),wi.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,En()).next(()=>r))}getLocalViewOfDocuments(e,t,r=En()){let i=bh();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=jy();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=bh();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,En()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Ku(),o=$y(),a=(function(){return $y()})();return t.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof Yc)?s=s.insert(u.key,u):l!==void 0?(o.set(u.key,l.mutation.getFieldMask()),Hy(l.mutation,u,l.mutation.getFieldMask(),wi.now())):o.set(u.key,xa.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,l)=>o.set(u,l)),t.forEach((u,l)=>a.set(u,new ND(l,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,t){let r=$y(),i=new qr((o,a)=>o-a),s=En();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let l=r.get(c)||xa.empty();l=a.applyToLocalView(u,l),r.set(c,l);let p=(i.get(a.batchId)||En()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,p=l8();l.forEach(y=>{if(!s.has(y)){let g=m8(t.get(y),r.get(y));g!==null&&p.set(y,g),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return je.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return Nt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):s8(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):je.resolve(bh()),a=Ky,c=s;return o.next(u=>je.forEach(u,(l,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(l)?je.resolve():this.remoteDocumentCache.getEntry(e,l).next(y=>{c=c.insert(l,y)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,En())).next(l=>({batchId:a,changes:u8(l)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Nt(t)).next(r=>{let i=jy();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=jy();return this.indexManager.getCollectionParents(e,s).next(a=>je.forEach(a,c=>{let u=(function(p,y){return new cd(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((p,y)=>{o=o.insert(p,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,u)=>{let l=u.getKey();o.get(l)===null&&(o=o.insert(l,Ho.newInvalidDocument(l)))});let a=jy();return o.forEach((c,u)=>{let l=s.get(c);l!==void 0&&Hy(l.mutation,u,xa.empty(),wi.now()),Rb(t,u)&&(a=a.insert(c,u))}),a})}};var PD=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return je.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:$o(i.createTime)}})(t)),je.resolve()}getNamedQuery(e,t){return je.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:Yte(i.bundledQuery),readTime:$o(i.readTime)}})(t)),je.resolve()}};var kD=class{constructor(){this.overlays=new qr(Nt.comparator),this.qr=new Map}getOverlay(e,t){return je.resolve(this.overlays.get(t))}getOverlays(e,t){let r=bh();return je.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),je.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),je.resolve()}getOverlaysForCollection(e,t,r){let i=bh(),s=t.length+1,o=new Nt(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return je.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new qr((u,l)=>u-l),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let l=s.get(u.largestBatchId);l===null&&(l=bh(),s=s.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=bh(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return je.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new gD(t,r));let s=this.qr.get(t);s===void 0&&(s=En(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}};var MD=class{constructor(){this.sessionToken=Ds.EMPTY_BYTE_STRING}getSessionToken(e){return je.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,je.resolve()}};var tv=class{constructor(){this.Qr=new Zi(yi.$r),this.Ur=new Zi(yi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new yi(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new yi(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new Nt(new vr([])),r=new yi(t,e),i=new yi(t,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new Nt(new vr([])),r=new yi(t,e),i=new yi(t,e+1),s=En();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new yi(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},yi=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Nt.comparator(e.key,t.key)||bn(e.Yr,t.Yr)}static Kr(e,t){return bn(e.Yr,t.Yr)||Nt.comparator(e.key,t.key)}};var OD=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Zi(yi.$r)}checkEmpty(e){return je.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new fD(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Zr=this.Zr.add(new yi(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return je.resolve(o)}lookupMutationBatch(e,t){return je.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),s=i<0?0:i;return je.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return je.resolve(this.mutationQueue.length===0?Rx:this.tr-1)}getAllMutationBatches(e){return je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new yi(t,0),i=new yi(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{let a=this.Xr(o.Yr);s.push(a)}),je.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Zi(bn);return t.forEach(i=>{let s=new yi(i,0),o=new yi(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),je.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;Nt.isDocumentKey(s)||(s=s.child(""));let o=new yi(new Nt(s),0),a=new Zi(bn);return this.Zr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Yr)),!0)},o),je.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Mn(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return je.forEach(t.mutations,i=>{let s=new yi(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new yi(t,0),i=this.Zr.firstAfterOrEqual(r);return je.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,je.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var LD=class{constructor(e){this.ri=e,this.docs=(function(){return new qr(Nt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return je.resolve(r?r.document.mutableCopy():Ho.newInvalidDocument(t))}getEntries(e,t){let r=Ku();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ho.newInvalidDocument(i))}),je.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ku(),o=t.path,a=new Nt(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Jee(Yee(l),r)<=0||(i.has(l.key)||Rb(t,l))&&(s=s.insert(l.key,l.mutableCopy()))}return je.resolve(s)}getAllFromCollectionGroup(e,t,r,i){xt(9500)}ii(e,t){return je.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new FD(this)}getSize(e){return je.resolve(this.size)}},FD=class extends xD{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),je.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var VD=class{constructor(e){this.persistence=e,this.si=new Wu(t=>Lx(t),Fx),this.lastRemoteSnapshotVersion=Gt.min(),this.highestTargetId=0,this.oi=0,this._i=new tv,this.targetCount=0,this.ai=ev.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),je.resolve()}getLastRemoteSnapshotVersion(e){return je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return je.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),je.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),je.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new ev(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,je.resolve()}updateTargetData(e,t){return this.Pr(t),je.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,je.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),je.waitFor(s).next(()=>i)}getTargetCount(e){return je.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return je.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),je.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),je.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),je.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return je.resolve(r)}containsKey(e,t){return je.resolve(this._i.containsKey(t))}};var ub=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new Nx(0),this.li=!1,this.li=!0,this.hi=new MD,this.referenceDelegate=e(this),this.Pi=new VD(this),this.indexManager=new TD,this.remoteDocumentCache=(function(i){return new LD(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new ID(t),this.Ii=new PD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new OD(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ot("MemoryPersistence","Starting transaction:",e);let i=new BD(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,t){return je.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},BD=class extends QC{constructor(e){super(),this.currentSequenceNumber=e}},jD=class n{constructor(e){this.persistence=e,this.Ri=new tv,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw xt(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),je.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),je.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),je.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return je.forEach(this.fi,r=>{let i=Nt.fromPath(r);return this.gi(e,i).next(s=>{s||t.removeEntry(i,Gt.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return je.or([()=>je.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},lb=class n{constructor(e,t){this.persistence=e,this.pi=new Wu(r=>tte(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Zte(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return je.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return je.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?je.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,t).next(a=>{a||(r++,s.removeEntry(o,Gt.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),je.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),je.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),je.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),je.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=$1(e.data.value)),t}br(e,t,r){return je.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return je.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var UD=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=En(),i=En();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var qD=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var zD=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return wV()?8:Xee(_V())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ys(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new qD;return this.Ss(e,t,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,t,o,a.size)})}).next(()=>s.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(Ep()<=Pn.DEBUG&&ot("QueryEngine","SDK will not create cache indexes for query:",Ip(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),je.resolve()):(Ep()<=Pn.DEBUG&&ot("QueryEngine","Query:",Ip(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Ep()<=Pn.DEBUG&&ot("QueryEngine","The SDK decides to create cache indexes for query:",Ip(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kc(t))):je.resolve())}ys(e,t){if(e6(t))return je.resolve(null);let r=Kc(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=lD(t,null,"F"),r=Kc(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=En(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Ds(t,a);return this.Cs(t,u,o,c.readTime)?this.ys(e,lD(t,null,"F")):this.vs(e,u,t,c)}))})))}ws(e,t,r,i){return e6(t)||i.isEqual(Gt.min())?je.resolve(null):this.ps.getDocuments(e,r).next(s=>{let o=this.Ds(t,s);return this.Cs(t,o,r,i)?je.resolve(null):(Ep()<=Pn.DEBUG&&ot("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ip(t)),this.vs(e,o,t,Qee(i,Ky)).next(a=>a))})}Ds(e,t){let r=new Zi(a8(e));return t.forEach((i,s)=>{Rb(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return Ep()<=Pn.DEBUG&&ot("QueryEngine","Using full collection scan to execute query:",Ip(t)),this.ps.getDocumentsMatchingQuery(e,t,Ah.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var jx="LocalStore",Xte=3e8,$D=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new qr(bn),this.xs=new Wu(s=>Lx(s),Fx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function ene(n,e,t,r){return new $D(n,e,t,r)}async function x8(n,e){let t=Yt(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=En();for(let u of i){o.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of s){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function tne(n,e){let t=Yt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,c,u,l){let p=u.batch,y=p.keys(),g=je.resolve();return y.forEach(D=>{g=g.next(()=>l.getEntry(c,D)).next(M=>{let k=u.docVersions.get(D);Mn(k!==null,48541),M.version.compareTo(k)<0&&(p.applyToRemoteDocument(M,u),M.isValidDocument()&&(M.setReadTime(u.commitVersion),l.addEntry(M)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,p))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=En();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function N8(n){let e=Yt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function nne(n,e){let t=Yt(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((l,p)=>{let y=i.get(p);if(!y)return;a.push(t.Pi.removeMatchingKeys(s,l.removedDocuments,p).next(()=>t.Pi.addMatchingKeys(s,l.addedDocuments,p)));let g=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?g=g.withResumeToken(Ds.EMPTY_BYTE_STRING,Gt.min()).withLastLimboFreeSnapshotVersion(Gt.min()):l.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(l.resumeToken,r)),i=i.insert(p,g),(function(M,k,O){return M.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=Xte?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(y,g,l)&&a.push(t.Pi.updateTargetData(s,g))});let c=Ku(),u=En();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(rne(s,o,e.documentUpdates).next(l=>{c=l.ks,u=l.qs})),!r.isEqual(Gt.min())){let l=t.Pi.getLastRemoteSnapshotVersion(s).next(p=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return je.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.Ms=i,s))}function rne(n,e,t){let r=En(),i=En();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Ku();return t.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Gt.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):ot(jx,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:i}})}function ine(n,e){let t=Yt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Rx),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function sne(n,e){let t=Yt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(s=>s?(i=s,je.resolve(i)):t.Pi.allocateTargetId(r).next(o=>(i=new Xy(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function HD(n,e,t){let r=Yt(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Gp(o))throw o;ot(jx,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function h6(n,e,t){let r=Yt(n),i=Gt.min(),s=En();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,u,l){let p=Yt(c),y=p.xs.get(l);return y!==void 0?je.resolve(p.Ms.get(y)):p.Pi.getTargetData(u,l)})(r,o,Kc(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:Gt.min(),t?s:En())).next(a=>(one(r,vte(e),a),{documents:a,Qs:s})))}function one(n,e,t){let r=n.Os.get(e)||Gt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Os.set(e,r)}var db=class{constructor(){this.activeTargetIds=Tte()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var GD=class{constructor(){this.Mo=new db,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new db,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var WD=class{Oo(e){}shutdown(){}};var f6="ConnectivityMonitor",hb=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ot(f6,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){ot(f6,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var z1=null;function KD(){return z1===null?z1=(function(){return 268435456+Math.round(2147483648*Math.random())})():z1++,"0x"+z1.toString(16)}var VC="RestConnection",ane={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},QD=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Z1?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){let o=KD(),a=this.zo(e,t.toUriEncodedString());ot(VC,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);let{host:u}=new URL(a),l=vh(u);return this.Jo(e,a,c,r,l).then(p=>(ot(VC,`Received RPC '${e}' ${o}: `,p),p),p=>{throw xp(VC,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,t,r,i,s,o){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$p})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,t){let r=ane[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var YD=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var Cs="WebChannelConnection",JD=class extends QD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){let o=KD();return new Promise((a,c)=>{let u=new PC;u.setWithCredentials(!0),u.listenOnce(kC.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case By.NO_ERROR:let p=u.getResponseJson();ot(Cs,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case By.TIMEOUT:ot(Cs,`RPC '${e}' ${o} timed out`),c(new Qe(Ne.DEADLINE_EXCEEDED,"Request time out"));break;case By.HTTP_ERROR:let y=u.getStatus();if(ot(Cs,`RPC '${e}' ${o} failed with status:`,y,"response text:",u.getResponseText()),y>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);let D=g?.error;if(D&&D.status&&D.message){let M=(function(O){let G=O.toLowerCase().replace(/_/g,"-");return Object.values(Ne).indexOf(G)>=0?G:Ne.UNKNOWN})(D.status);c(new Qe(M,D.message))}else c(new Qe(Ne.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Qe(Ne.UNAVAILABLE,"Connection failed."));break;default:xt(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ot(Cs,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);ot(Cs,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}T_(e,t,r){let i=KD(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=LC(),a=OC(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let l=s.join("");ot(Cs,`Creating RPC '${e}' stream ${i}: ${l}`,c);let p=o.createWebChannel(l,c);this.I_(p);let y=!1,g=!1,D=new YD({Yo:k=>{g?ot(Cs,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(y||(ot(Cs,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),ot(Cs,`RPC '${e}' stream ${i} sending:`,k),p.send(k))},Zo:()=>p.close()}),M=(k,O,G)=>{k.listen(O,W=>{try{G(W)}catch(K){setTimeout(()=>{throw K},0)}})};return M(p,bp.EventType.OPEN,()=>{g||(ot(Cs,`RPC '${e}' stream ${i} transport opened.`),D.o_())}),M(p,bp.EventType.CLOSE,()=>{g||(g=!0,ot(Cs,`RPC '${e}' stream ${i} transport closed`),D.a_(),this.E_(p))}),M(p,bp.EventType.ERROR,k=>{g||(g=!0,xp(Cs,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),D.a_(new Qe(Ne.UNAVAILABLE,"The operation could not be completed")))}),M(p,bp.EventType.MESSAGE,k=>{if(!g){let O=k.data[0];Mn(!!O,16349);let G=O,W=G?.error||G[0]?.error;if(W){ot(Cs,`RPC '${e}' stream ${i} received error:`,W);let K=W.status,ue=(function(T){let w=mi[T];if(w!==void 0)return _8(w)})(K),fe=W.message;ue===void 0&&(ue=Ne.INTERNAL,fe="Unknown error status: "+K+" with message "+W.message),g=!0,D.a_(new Qe(ue,fe)),p.close()}else ot(Cs,`RPC '${e}' stream ${i} received:`,O),D.u_(O)}}),M(a,MC.STAT_EVENT,k=>{k.stat===j1.PROXY?ot(Cs,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===j1.NOPROXY&&ot(Cs,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.__()},0),D}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function BC(){return typeof document<"u"?document:null}function Pb(n){return new _D(n,!0)}var nv=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ot("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var p6="PersistentStream",fb=class{constructor(e,t,r,i,s,o,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new nv(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Ne.RESOURCE_EXHAUSTED?($u(t.toString()),$u("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new Qe(Ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ot(p6,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(ot(p6,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},ZD=class extends fb{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=jte(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Gt.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Gt.min():o.readTime?$o(o.readTime):Gt.min()})(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=ED(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=cD(c)?{documents:qte(s,c)}:{query:zte(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=w8(s,o.resumeToken);let u=wD(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Gt.min())>0){a.readTime=ob(s,o.snapshotVersion.toTimestamp());let u=wD(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);let r=Hte(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=ED(this.serializer),t.removeTarget=e,this.q_(t)}},XD=class extends fb{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Mn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Mn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Mn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=Ute(e.writeResults,e.commitTime),r=$o(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=ED(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>T8(this.serializer,r))};this.q_(t)}};var ex=class{},tx=class extends ex{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Qe(Ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,bD(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Qe(Ne.UNKNOWN,s.toString())})}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,bD(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Qe(Ne.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},nx=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?($u(t),this.aa=!1):ot("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Rh="RemoteStore",rx=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{kh(this)&&(ot(Rh,"Restarting streams for network reachability change."),await(async function(c){let u=Yt(c);u.Ea.add(4),await cv(u),u.Ra.set("Unknown"),u.Ea.delete(4),await kb(u)})(this))})}),this.Ra=new nx(r,i)}};async function kb(n){if(kh(n))for(let e of n.da)await e(!0)}async function cv(n){for(let e of n.da)await e(!1)}function R8(n,e){let t=Yt(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),$x(t)?zx(t):Wp(t).O_()&&qx(t,e))}function Ux(n,e){let t=Yt(n),r=Wp(t);t.Ia.delete(e),r.O_()&&P8(t,e),t.Ia.size===0&&(r.O_()?r.L_():kh(t)&&t.Ra.set("Unknown"))}function qx(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Gt.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wp(n).Y_(e)}function P8(n,e){n.Va.Ue(e),Wp(n).Z_(e)}function zx(n){n.Va=new vD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Wp(n).start(),n.Ra.ua()}function $x(n){return kh(n)&&!Wp(n).x_()&&n.Ia.size>0}function kh(n){return Yt(n).Ea.size===0}function k8(n){n.Va=void 0}async function cne(n){n.Ra.set("Online")}async function une(n){n.Ia.forEach((e,t)=>{qx(n,e)})}async function lne(n,e){k8(n),$x(n)?(n.Ra.ha(e),zx(n)):n.Ra.set("Unknown")}async function dne(n,e,t){if(n.Ra.set("Online"),e instanceof ib&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})(n,e)}catch(r){ot(Rh,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await pb(n,r)}else if(e instanceof Cp?n.Va.Ze(e):e instanceof rb?n.Va.st(e):n.Va.tt(e),!t.isEqual(Gt.min()))try{let r=await N8(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.Va.Tt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=s.Ia.get(u);l&&s.Ia.set(u,l.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let l=s.Ia.get(c);if(!l)return;s.Ia.set(c,l.withResumeToken(Ds.EMPTY_BYTE_STRING,l.snapshotVersion)),P8(s,c);let p=new Xy(l.target,c,u,l.sequenceNumber);qx(s,p)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){ot(Rh,"Failed to raise snapshot:",r),await pb(n,r)}}async function pb(n,e,t){if(!Gp(e))throw e;n.Ea.add(1),await cv(n),n.Ra.set("Offline"),t||(t=()=>N8(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ot(Rh,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await kb(n)})}function M8(n,e){return e().catch(t=>pb(n,t,e))}async function Mb(n){let e=Yt(n),t=ud(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Rx;for(;hne(e);)try{let i=await ine(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,fne(e,i)}catch(i){await pb(e,i)}O8(e)&&L8(e)}function hne(n){return kh(n)&&n.Ta.length<10}function fne(n,e){n.Ta.push(e);let t=ud(n);t.O_()&&t.X_&&t.ea(e.mutations)}function O8(n){return kh(n)&&!ud(n).x_()&&n.Ta.length>0}function L8(n){ud(n).start()}async function pne(n){ud(n).ra()}async function gne(n){let e=ud(n);for(let t of n.Ta)e.ea(t.mutations)}async function mne(n,e,t){let r=n.Ta.shift(),i=pD.from(r,e,t);await M8(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Mb(n)}async function yne(n,e){e&&ud(n).X_&&await(async function(r,i){if((function(o){return v8(o)&&o!==Ne.ABORTED})(i.code)){let s=r.Ta.shift();ud(r).B_(),await M8(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Mb(r)}})(n,e),O8(n)&&L8(n)}async function g6(n,e){let t=Yt(n);t.asyncQueue.verifyOperationInProgress(),ot(Rh,"RemoteStore received new credentials");let r=kh(t);t.Ea.add(3),await cv(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await kb(t)}async function vne(n,e){let t=Yt(n);e?(t.Ea.delete(2),await kb(t)):e||(t.Ea.add(2),await cv(t),t.Ra.set("Unknown"))}function Wp(n){return n.ma||(n.ma=(function(t,r,i){let s=Yt(t);return s.sa(),new ZD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:cne.bind(null,n),t_:une.bind(null,n),r_:lne.bind(null,n),H_:dne.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),$x(n)?zx(n):n.Ra.set("Unknown")):(await n.ma.stop(),k8(n))})),n.ma}function ud(n){return n.fa||(n.fa=(function(t,r,i){let s=Yt(t);return s.sa(),new XD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:pne.bind(null,n),r_:yne.bind(null,n),ta:gne.bind(null,n),na:mne.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await Mb(n)):(await n.fa.stop(),n.Ta.length>0&&(ot(Rh,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}var ix=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Na,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Qe(Ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Hx(n,e){if($u("AsyncQueue",`${e}: ${n}`),Gp(n))return new Qe(Ne.UNAVAILABLE,`${e}: ${n}`);throw n}var gb=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Nt.comparator(t.key,r.key):(t,r)=>Nt.comparator(t.key,r.key),this.keyedMap=jy(),this.sortedSet=new qr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var mb=class{constructor(){this.ga=new qr(Nt.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):xt(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Bp=class n{constructor(e,t,r,i,s,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,gb.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nb(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var sx=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},ox=class{constructor(){this.queries=m6(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=Yt(t),s=i.queries;i.queries=m6(),s.forEach((o,a)=>{for(let c of a.Sa)c.onError(r)})})(this,new Qe(Ne.ABORTED,"Firestore shutting down"))}};function m6(){return new Wu(n=>o8(n),Nb)}async function Gx(n,e){let t=Yt(n),r=3,i=e.query,s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new sx,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=Hx(o,`Initialization of query '${Ip(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&Kx(t)}async function Wx(n,e){let t=Yt(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function _ne(n,e){let t=Yt(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&Kx(t)}function wne(n,e,t){let r=Yt(n),i=r.queries.get(e);if(i)for(let s of i.Sa)s.onError(t);r.queries.delete(e)}function Kx(n){n.Ca.forEach(e=>{e.next()})}var ax,y6;(y6=ax||(ax={})).Ma="default",y6.Cache="cache";var rv=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Bp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Bp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ax.Cache}};var yb=class{constructor(e){this.key=e}},vb=class{constructor(e){this.key=e}},cx=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=En(),this.mutatedKeys=En(),this.eu=a8(e),this.tu=new gb(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new mb,i=t?t.tu:this.tu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,p)=>{let y=i.get(l),g=Rb(this.query,p)?p:null,D=!!y&&this.mutatedKeys.has(y.key),M=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations),k=!1;y&&g?y.data.isEqual(g.data)?D!==M&&(r.track({type:3,doc:g}),k=!0):this.su(y,g)||(r.track({type:2,doc:g}),k=!0,(c&&this.eu(g,c)>0||u&&this.eu(g,u)<0)&&(a=!0)):!y&&g?(r.track({type:0,doc:g}),k=!0):y&&!g&&(r.track({type:1,doc:y}),k=!0,(c||u)&&(a=!0)),k&&(g?(o=o.add(g),s=M?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let o=e.iu.ya();o.sort((l,p)=>(function(g,D){let M=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xt(20277,{Rt:k})}};return M(g)-M(D)})(l.type,p.type)||this.eu(l.doc,p.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new Bp(this.query,e.tu,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new mb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=En(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new vb(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new yb(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=En();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Bp.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},Qx="SyncEngine",ux=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},lx=class{constructor(e){this.key=e,this.hu=!1}},dx=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Wu(a=>o8(a),Nb),this.Iu=new Map,this.Eu=new Set,this.du=new qr(Nt.comparator),this.Au=new Map,this.Ru=new tv,this.Vu={},this.mu=new Map,this.fu=ev.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function bne(n,e,t=!0){let r=q8(n),i,s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await F8(r,e,t,!0),i}async function Ene(n,e){let t=q8(n);await F8(t,e,!0,!1)}async function F8(n,e,t,r){let i=await sne(n.localStore,Kc(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await Ine(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&R8(n.remoteStore,i),a}async function Ine(n,e,t,r,i){n.pu=(p,y,g)=>(async function(M,k,O,G){let W=k.view.ru(O);W.Cs&&(W=await h6(M.localStore,k.query,!1).then(({documents:P})=>k.view.ru(P,W)));let K=G&&G.targetChanges.get(k.targetId),ue=G&&G.targetMismatches.get(k.targetId)!=null,fe=k.view.applyChanges(W,M.isPrimaryClient,K,ue);return _6(M,k.targetId,fe.au),fe.snapshot})(n,p,y,g);let s=await h6(n.localStore,e,!0),o=new cx(e,s.Qs),a=o.ru(s.documents),c=Zy.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=o.applyChanges(a,n.isPrimaryClient,c);_6(n,t,u.au);let l=new ux(e,t,o);return n.Tu.set(e,l),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot}async function Tne(n,e,t){let r=Yt(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Nb(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await HD(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ux(r.remoteStore,i.targetId),hx(r,i.targetId)}).catch(Hp)):(hx(r,i.targetId),await HD(r.localStore,i.targetId,!0))}async function Ane(n,e){let t=Yt(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ux(t.remoteStore,r.targetId))}async function Sne(n,e,t){let r=kne(n);try{let i=await(function(o,a){let c=Yt(o),u=wi.now(),l=a.reduce((g,D)=>g.add(D.key),En()),p,y;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let D=Ku(),M=En();return c.Ns.getEntries(g,l).next(k=>{D=k,D.forEach((O,G)=>{G.isValidDocument()||(M=M.add(O))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,D)).next(k=>{p=k;let O=[];for(let G of a){let W=Nte(G,p.get(G.key).overlayedDocument);W!=null&&O.push(new Yc(G.key,W,X6(W.value.mapValue),yo.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,O,a)}).next(k=>{y=k;let O=k.applyToLocalDocumentSet(p,M);return c.documentOverlayCache.saveOverlays(g,k.batchId,O)})}).then(()=>({batchId:y.batchId,changes:u8(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new qr(bn)),u=u.insert(a,c),o.Vu[o.currentUser.toKey()]=u})(r,i.batchId,t),await uv(r,i.changes),await Mb(r.remoteStore)}catch(i){let s=Hx(i,"Failed to persist write");t.reject(s)}}async function V8(n,e){let t=Yt(n);try{let r=await nne(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Au.get(s);o&&(Mn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Mn(o.hu,14607):i.removedDocuments.size>0&&(Mn(o.hu,42227),o.hu=!1))}),await uv(t,r,e)}catch(r){await Hp(r)}}function v6(n,e,t){let r=Yt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=Yt(o);c.onlineState=a;let u=!1;c.queries.forEach((l,p)=>{for(let y of p.Sa)y.va(a)&&(u=!0)}),u&&Kx(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Cne(n,e,t){let r=Yt(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),s=i&&i.key;if(s){let o=new qr(Nt.comparator);o=o.insert(s,Ho.newNoDocument(s,Gt.min()));let a=En().add(s),c=new nb(Gt.min(),new Map,new qr(bn),o,a);await V8(r,c),r.du=r.du.remove(s),r.Au.delete(e),Yx(r)}else await HD(r.localStore,e,!1).then(()=>hx(r,e,t)).catch(Hp)}async function Dne(n,e){let t=Yt(n),r=e.batch.batchId;try{let i=await tne(t.localStore,e);j8(t,r,null),B8(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await uv(t,i)}catch(i){await Hp(i)}}async function xne(n,e,t){let r=Yt(n);try{let i=await(function(o,a){let c=Yt(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(p=>(Mn(p!==null,37113),l=p.keys(),c.mutationQueue.removeMutationBatch(u,p))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})})(r.localStore,e);j8(r,e,t),B8(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await uv(r,i)}catch(i){await Hp(i)}}function B8(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function j8(n,e,t){let r=Yt(n),i=r.Vu[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function hx(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||U8(n,r)})}function U8(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(Ux(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Yx(n))}function _6(n,e,t){for(let r of t)r instanceof yb?(n.Ru.addReference(r.key,e),Nne(n,r)):r instanceof vb?(ot(Qx,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||U8(n,r.key)):xt(19791,{wu:r})}function Nne(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ot(Qx,"New document in limbo: "+t),n.Eu.add(r),Yx(n))}function Yx(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new Nt(vr.fromString(e)),r=n.fu.next();n.Au.set(r,new lx(t)),n.du=n.du.insert(t,r),R8(n.remoteStore,new Xy(Kc(xb(t.path)),r,"TargetPurposeLimboResolution",Nx.ce))}}async function uv(n,e,t){let r=Yt(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,t).then(u=>{if((u||t)&&r.isPrimaryClient){let l=u?!u.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,l?"current":"not-current")}if(u){i.push(u);let l=UD.As(c.targetId,u);s.push(l)}}))}),await Promise.all(o),r.Pu.H_(i),await(async function(c,u){let l=Yt(c);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>je.forEach(u,y=>je.forEach(y.Es,g=>l.persistence.referenceDelegate.addReference(p,y.targetId,g)).next(()=>je.forEach(y.ds,g=>l.persistence.referenceDelegate.removeReference(p,y.targetId,g)))))}catch(p){if(!Gp(p))throw p;ot(jx,"Failed to update sequence numbers: "+p)}for(let p of u){let y=p.targetId;if(!p.fromCache){let g=l.Ms.get(y),D=g.snapshotVersion,M=g.withLastLimboFreeSnapshotVersion(D);l.Ms=l.Ms.insert(y,M)}}})(r.localStore,s))}async function Rne(n,e){let t=Yt(n);if(!t.currentUser.isEqual(e)){ot(Qx,"User change. New user:",e.toKey());let r=await x8(t.localStore,e);t.currentUser=e,(function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new Qe(Ne.CANCELLED,o))})}),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await uv(t,r.Ls)}}function Pne(n,e){let t=Yt(n),r=t.Au.get(e);if(r&&r.hu)return En().add(r.key);{let i=En(),s=t.Iu.get(e);if(!s)return i;for(let o of s){let a=t.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function q8(n){let e=Yt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=V8.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Pne.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Cne.bind(null,e),e.Pu.H_=_ne.bind(null,e.eventManager),e.Pu.yu=wne.bind(null,e.eventManager),e}function kne(n){let e=Yt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Dne.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xne.bind(null,e),e}var z8=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Pb(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return ene(this.persistence,new zD,t.initialUser,this.serializer)}Cu(t){return new ub(jD.mi,this.serializer)}Du(t){return new GD}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),fx=class extends z8{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Mn(this.persistence.referenceDelegate instanceof lb,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new CD(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Da.withCacheSize(this.cacheSizeBytes):Da.DEFAULT;return new ub(r=>lb.mi(r,t),this.serializer)}};var Mne=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>v6(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Rne.bind(null,this.syncEngine),await vne(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new ox})()}createDatastore(t){let r=Pb(t.databaseInfo.databaseId),i=(function(o){return new JD(o)})(t.databaseInfo);return(function(o,a,c,u){return new tx(o,a,c,u)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new rx(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>v6(this.syncEngine,r,0),(function(){return hb.v()?new hb:new WD})())}createSyncEngine(t,r){return(function(s,o,a,c,u,l,p){let y=new dx(s,o,a,c,u,l);return p&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=Yt(r);ot(Rh,"RemoteStore shutting down."),i.Ea.add(5),await cv(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var iv=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):$u("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var px=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Qe(Ne.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=await(async function(i,s){let o=Yt(i),a={documents:s.map(p=>ab(o.serializer,p))},c=await o.Ho("BatchGetDocuments",o.serializer.databaseId,vr.emptyPath(),a,s.length),u=new Map;c.forEach(p=>{let y=Bte(o.serializer,p);u.set(y.key.toString(),y)});let l=[];return s.forEach(p=>{let y=u.get(p.toString());Mn(!!y,55234,{key:p}),l.push(y)}),l})(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Vp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=Nt.fromPath(r);this.mutations.push(new tb(i,this.precondition(i)))}),await(async function(r,i){let s=Yt(r),o={writes:i.map(a=>T8(s.serializer,a))};await s.Go("Commit",s.serializer.databaseId,vr.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw xt(50498,{Gu:e.constructor.name});t=Gt.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Qe(Ne.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Gt.min())?yo.exists(!1):yo.updateTime(t):yo.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Gt.min()))throw new Qe(Ne.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yo.updateTime(t)}return yo.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var gx=class{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.zu=r.maxAttempts,this.M_=new nv(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{let e=new px(this.datastore),t=this.Hu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Yu(i)}))}).catch(r=>{this.Yu(r)})})}Hu(e){try{let t=this.updateFunction(e);return!av(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!v8(t)}return!1}};var ld="FirestoreClient",mx=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ji.UNAUTHENTICATED,this.clientId=Wy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ot(ld,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ot(ld,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Na;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Hx(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function jC(n,e){n.asyncQueue.verifyOperationInProgress(),ot(ld,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await x8(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function w6(n,e){n.asyncQueue.verifyOperationInProgress();let t=await One(n);ot(ld,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>g6(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>g6(e.remoteStore,i)),n._onlineComponents=e}async function One(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ot(ld,"Using user provided OfflineComponentProvider");try{await jC(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Ne.FAILED_PRECONDITION||i.code===Ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;xp("Error using user provided cache. Falling back to memory cache: "+t),await jC(n,new z8)}}else ot(ld,"Using default OfflineComponentProvider"),await jC(n,new fx(void 0));return n._offlineComponents}async function Jx(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ot(ld,"Using user provided OnlineComponentProvider"),await w6(n,n._uninitializedComponentsProvider._online)):(ot(ld,"Using default OnlineComponentProvider"),await w6(n,new Mne))),n._onlineComponents}function Lne(n){return Jx(n).then(e=>e.syncEngine)}function Fne(n){return Jx(n).then(e=>e.datastore)}async function _b(n){let e=await Jx(n),t=e.eventManager;return t.onListen=bne.bind(null,e.syncEngine),t.onUnlisten=Tne.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Ene.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Ane.bind(null,e.syncEngine),t}function Vne(n,e,t={}){let r=new Na;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,u){let l=new iv({next:y=>{l.Nu(),o.enqueueAndForget(()=>Wx(s,p));let g=y.docs.has(a);!g&&y.fromCache?u.reject(new Qe(Ne.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&y.fromCache&&c&&c.source==="server"?u.reject(new Qe(Ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(y)},error:y=>u.reject(y)}),p=new rv(xb(a.path),l,{includeMetadataChanges:!0,qa:!0});return Gx(s,p)})(await _b(n),n.asyncQueue,e,t,r)),r.promise}function Bne(n,e,t={}){let r=new Na;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,u){let l=new iv({next:y=>{l.Nu(),o.enqueueAndForget(()=>Wx(s,p)),y.fromCache&&c.source==="server"?u.reject(new Qe(Ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(y)},error:y=>u.reject(y)}),p=new rv(a,l,{includeMetadataChanges:!0,qa:!0});return Gx(s,p)})(await _b(n),n.asyncQueue,e,t,r)),r.promise}function $8(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var b6=new Map;var H8="firestore.googleapis.com",E6=!0,wb=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Qe(Ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=H8,this.ssl=E6}else this.host=e.host,this.ssl=e.ssl??E6;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=D8;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Jte)throw new Qe(Ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Kee("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$8(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Qe(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Qe(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Qe(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},jp=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Qe(Ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Qe(Ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new UC;switch(r.type){case"firstParty":return new HC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Qe(Ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=b6.get(t);r&&(ot("ComponentProvider","Removing Datastore"),b6.delete(t),r.terminate())})(this),Promise.resolve()}};function jne(n,e,t,r={}){n=zo(n,jp);let i=vh(e),s=n._getSettings(),o=Ht(Le({},s),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i&&(D1(`https://${a}`),N1("Firestore",!0)),s.host!==H8&&s.host!==a&&xp("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let c=Ht(Le({},s),{host:a,ssl:i,emulatorOptions:r});if(!_p(c,o)&&(n._setSettings(c),r.mockUserToken)){let u,l;if(typeof r.mockUserToken=="string")u=r.mockUserToken,l=Ji.MOCK_USER;else{u=x1(r.mockUserToken,n._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Qe(Ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ji(p)}n._authCredentials=new qC(new W1(u,l))}}var dd=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Bi=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ov(t,n._jsonSchema))return new n(e,r||null,new Nt(vr.fromString(t.referencePath)))}};Bi._jsonSchemaVersion="firestore/documentReference/1.0",Bi._jsonSchema={type:_i("string",Bi._jsonSchemaVersion),referencePath:_i("string")};var rd=class n extends dd{constructor(e,t,r){super(e,t,xb(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Bi(this.firestore,null,new Nt(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Ob(n,e,...t){if(n=Yi(n),x6("collection","path",e),n instanceof jp){let r=vr.fromString(e,...t);return UV(r),new rd(n,null,r)}{if(!(n instanceof Bi||n instanceof rd))throw new Qe(Ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(vr.fromString(e,...t));return UV(r),new rd(n.firestore,null,r)}}function Mh(n,e,...t){if(n=Yi(n),arguments.length===1&&(e=Wy.newId()),x6("doc","path",e),n instanceof jp){let r=vr.fromString(e,...t);return jV(r),new Bi(n,null,new Nt(r))}{if(!(n instanceof Bi||n instanceof rd))throw new Qe(Ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(vr.fromString(e,...t));return jV(r),new Bi(n.firestore,n instanceof rd?n.converter:null,new Nt(r))}}var I6="AsyncQueue",bb=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new nv(this,"async_queue_retry"),this._c=()=>{let r=BC();r&&ot(I6,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=BC();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=BC();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new Na;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Gp(e))throw e;ot(I6,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,$u("INTERNAL UNHANDLED ERROR: ",T6(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=ix.createAndSchedule(this,e,t,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&xt(47125,{Pc:T6(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function T6(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function A6(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var ac=class extends jp{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new bb,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new bb(e),this._firestoreClient=void 0,await e}}};function G8(n,e){let t=typeof n=="object"?n:V1(),r=typeof n=="string"?n:e||Z1,i=O1(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=C1("firestore");s&&jne(i,...s)}return i}function lv(n){if(n._terminated)throw new Qe(Ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Une(n),n._firestoreClient}function Une(n){let e=n._freezeSettings(),t=(function(i,s,o,a){return new YC(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,$8(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new mx(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}var zu=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ds.fromBase64String(e))}catch(t){throw new Qe(Ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ds.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ov(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};zu._jsonSchemaVersion="firestore/bytes/1.0",zu._jsonSchema={type:_i("string",zu._jsonSchemaVersion),bytes:_i("string")};var Ph=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Qe(Ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qo(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Up=class{constructor(e){this._methodName=e}};var id=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Qe(Ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Qe(Ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return bn(this._lat,e._lat)||bn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(ov(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};id._jsonSchemaVersion="firestore/geoPoint/1.0",id._jsonSchema={type:_i("string",id._jsonSchemaVersion),latitude:_i("number"),longitude:_i("number")};var sd=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ov(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new Qe(Ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};sd._jsonSchemaVersion="firestore/vectorValue/1.0",sd._jsonSchema={type:_i("string",sd._jsonSchemaVersion),vectorValues:_i("object")};var qne=/^__.*__$/,yx=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Yc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nh(e,this.data,t,this.fieldTransforms)}},Eb=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Yc(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function W8(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xt(40011,{Ac:n})}}var vx=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(Le(Le({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Tb(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(W8(this.Ac)&&qne.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},_x=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Pb(e)}Cc(e,t,r,i=!1){return new vx({Ac:e,methodName:t,Dc:r,path:qo.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Lb(n){let e=n._freezeSettings(),t=Pb(n._databaseId);return new _x(n._databaseId,!!e.ignoreUndefinedProperties,t)}function K8(n,e,t,r,i,s={}){let o=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);Zx("Data must be an object, but it was:",o,r);let a=J8(r,o),c,u;if(s.merge)c=new xa(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let l=[];for(let p of s.mergeFields){let y=bx(e,p,t);if(!o.contains(y))throw new Qe(Ne.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);X8(l,y)||l.push(y)}c=new xa(l),u=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,u=o.fieldTransforms;return new yx(new mo(a),c,u)}var Ib=class n extends Up{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};var wx=class n extends Up{_toFieldTransform(e){return new dD(e.path,new Ch)}isEqual(e){return e instanceof n}};function Q8(n,e,t,r){let i=n.Cc(1,e,t);Zx("Data must be an object, but it was:",i,r);let s=[],o=mo.empty();hd(r,(c,u)=>{let l=Xx(e,c,t);u=Yi(u);let p=i.yc(l);if(u instanceof Ib)s.push(l);else{let y=dv(u,p);y!=null&&(s.push(l),o.set(l,y))}});let a=new xa(s);return new Eb(o,a,i.fieldTransforms)}function Y8(n,e,t,r,i,s){let o=n.Cc(1,e,t),a=[bx(e,r,t)],c=[i];if(s.length%2!=0)throw new Qe(Ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(bx(e,s[y])),c.push(s[y+1]);let u=[],l=mo.empty();for(let y=a.length-1;y>=0;--y)if(!X8(u,a[y])){let g=a[y],D=c[y];D=Yi(D);let M=o.yc(g);if(D instanceof Ib)u.push(g);else{let k=dv(D,M);k!=null&&(u.push(g),l.set(g,k))}}let p=new xa(u);return new Eb(l,p,o.fieldTransforms)}function zne(n,e,t,r=!1){return dv(t,n.Cc(r?4:3,e))}function dv(n,e){if(Z8(n=Yi(n)))return Zx("Unsupported field value:",e,n),J8(n,e);if(n instanceof Up)return(function(r,i){if(!W8(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=dv(a,i.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=Yi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Ate(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=wi.fromDate(r);return{timestampValue:ob(i.serializer,s)}}if(r instanceof wi){let s=new wi(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ob(i.serializer,s)}}if(r instanceof id)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zu)return{bytesValue:w8(i.serializer,r._byteString)};if(r instanceof Bi){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Bx(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof sd)return(function(o,a){return{mapValue:{fields:{[kx]:{stringValue:Mx},[Rp]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return Vx(a.serializer,u)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Cb(r)}`)})(n,e)}function J8(n,e){let t={};return H6(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hd(n,(r,i)=>{let s=dv(i,e.mc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function Z8(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof wi||n instanceof id||n instanceof zu||n instanceof Bi||n instanceof Up||n instanceof sd)}function Zx(n,e,t){if(!Z8(t)||!N6(t)){let r=Cb(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function bx(n,e,t){if((e=Yi(e))instanceof Ph)return e._internalPath;if(typeof e=="string")return Xx(n,e);throw Tb("Field path arguments must be of type string or ",n,!1,void 0,t)}var $ne=new RegExp("[~\\*/\\[\\]]");function Xx(n,e,t){if(e.search($ne)>=0)throw Tb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ph(...e.split("."))._internalPath}catch{throw Tb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Tb(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Qe(Ne.INVALID_ARGUMENT,a+n+c)}function X8(n,e){return n.some(t=>t.isEqual(e))}var qp=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Bi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Ex(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(eN("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Ex=class extends qp{data(){return super.data()}};function eN(n,e){return typeof e=="string"?Xx(n,e):e instanceof Ph?e._internalPath:e._delegate._internalPath}function eB(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Qe(Ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var sv=class{},Ab=class extends sv{};function tB(n,e,...t){let r=[];e instanceof sv&&r.push(e),r=r.concat(t),(function(s){let o=s.filter(c=>c instanceof Tx).length,a=s.filter(c=>c instanceof Ix).length;if(o>1||o>0&&a>0)throw new Qe(Ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var Ix=class n extends Ab{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return rB(e._query,t),new dd(e.firestore,e.converter,uD(e._query,t))}_parse(e){let t=Lb(e.firestore);return(function(s,o,a,c,u,l,p){let y;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new Qe(Ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){C6(p,l);let D=[];for(let M of p)D.push(S6(c,s,M));y={arrayValue:{values:D}}}else y=S6(c,s,p)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||C6(p,l),y=zne(a,o,p,l==="in"||l==="not-in");return vi.create(u,l,y)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var Tx=class n extends sv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:oc.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)rB(o,c),o=uD(o,c)})(e._query,t),new dd(e.firestore,e.converter,uD(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Ax=class n extends Ab{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,s,o){if(i.startAt!==null)throw new Qe(Ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Qe(Ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sh(s,o)})(e._query,this._field,this._direction);return new dd(e.firestore,e.converter,(function(i,s){let o=i.explicitOrderBy.concat([s]);return new cd(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function nB(n,e="asc"){let t=e,r=eN("orderBy",n);return Ax._create(r,t)}function S6(n,e,t){if(typeof(t=Yi(t))=="string"){if(t==="")throw new Qe(Ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!s8(e)&&t.indexOf("/")!==-1)throw new Qe(Ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(vr.fromString(t));if(!Nt.isDocumentKey(r))throw new Qe(Ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return KV(n,new Nt(r))}if(t instanceof Bi)return KV(n,t._key);throw new Qe(Ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cb(t)}.`)}function C6(n,e){if(!Array.isArray(n)||n.length===0)throw new Qe(Ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rB(n,e){let t=(function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Qe(Ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Qe(Ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Sb=class{convertValue(e,t="none"){switch(ad(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Gu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return hd(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){let t=e.fields?.[Rp].arrayValue?.values?.map(r=>xr(r.doubleValue));return new sd(t)}convertGeoPoint(e){return new id(xr(e.latitude),xr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Db(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Yy(e));default:return null}}convertTimestamp(e){let t=Hu(e);return new wi(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=vr.fromString(e);Mn(C8(r),9688,{name:e});let i=new X1(r.get(1),r.get(3)),s=new Nt(r.popFirst(5));return i.isEqual(t)||$u(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function iB(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Sx=class extends Sb{constructor(e){super(),this.firestore=e}convertBytes(e){return new zu(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bi(this.firestore,null,t)}};var nd=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},od=class n extends qp{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Dp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(eN("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Qe(Ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};od._jsonSchemaVersion="firestore/documentSnapshot/1.0",od._jsonSchema={type:_i("string",od._jsonSchemaVersion),bundleSource:_i("string","DocumentSnapshot"),bundleName:_i("string"),bundle:_i("string")};var Dp=class extends od{data(e={}){return super.data(e)}},Ih=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new nd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Dp(this._firestore,this._userDataWriter,r.key,r,new nd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Qe(Ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Dp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new nd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Dp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new nd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,l=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:Hne(a.type),doc:c,oldIndex:u,newIndex:l}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Qe(Ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Wy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Hne(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xt(61501,{type:n})}}function tN(n){n=zo(n,Bi);let e=zo(n.firestore,ac);return Vne(lv(e),n._key).then(t=>cB(e,n,t))}Ih._jsonSchemaVersion="firestore/querySnapshot/1.0",Ih._jsonSchema={type:_i("string",Ih._jsonSchemaVersion),bundleSource:_i("string","QuerySnapshot"),bundleName:_i("string"),bundle:_i("string")};var zp=class extends Sb{constructor(e){super(),this.firestore=e}convertBytes(e){return new zu(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bi(this.firestore,null,t)}};function nN(n){n=zo(n,dd);let e=zo(n.firestore,ac),t=lv(e),r=new zp(e);return eB(n._query),Bne(t,n._query).then(i=>new Ih(e,r,n,i))}function sB(n,e,t,...r){n=zo(n,Bi);let i=zo(n.firestore,ac),s=Lb(i),o;return o=typeof(e=Yi(e))=="string"||e instanceof Ph?Y8(s,"updateDoc",n._key,e,t,r):Q8(s,"updateDoc",n._key,e),rN(i,[o.toMutation(n._key,yo.exists(!0))])}function oB(n){return rN(zo(n.firestore,ac),[new Vp(n._key,yo.none())])}function aB(n,e){let t=zo(n.firestore,ac),r=Mh(n),i=iB(n.converter,e);return rN(t,[K8(Lb(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,yo.exists(!1))]).then(()=>r)}function Fb(n,...e){n=Yi(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||A6(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(A6(e[r])){let c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let s,o,a;if(n instanceof Bi)o=zo(n.firestore,ac),a=xb(n._key.path),s={next:c=>{e[r]&&e[r](cB(o,n,c))},error:e[r+1],complete:e[r+2]};else{let c=zo(n,dd);o=zo(c.firestore,ac),a=c._query;let u=new zp(o);s={next:l=>{e[r]&&e[r](new Ih(o,u,c,l))},error:e[r+1],complete:e[r+2]},eB(n._query)}return(function(u,l,p,y){let g=new iv(y),D=new rv(l,g,p);return u.asyncQueue.enqueueAndForget(async()=>Gx(await _b(u),D)),()=>{g.Nu(),u.asyncQueue.enqueueAndForget(async()=>Wx(await _b(u),D))}})(lv(o),a,i,s)}function rN(n,e){return(function(r,i){let s=new Na;return r.asyncQueue.enqueueAndForget(async()=>Sne(await Lne(r),i,s)),s.promise})(lv(n),e)}function cB(n,e,t){let r=t.docs.get(e._key),i=new zp(n);return new od(n,i,e._key,r,new nd(t.hasPendingWrites,t.fromCache),e.converter)}var Gne={maxAttempts:5};function Uy(n,e){if((n=Yi(n)).firestore!==e)throw new Qe(Ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Cx=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Lb(e)}get(e){let t=Uy(e,this._firestore),r=new Sx(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return xt(24041);let s=i[0];if(s.isFoundDocument())return new qp(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new qp(this._firestore,r,t._key,null,t.converter);throw xt(18433,{doc:s})})}set(e,t,r){let i=Uy(e,this._firestore),s=iB(i.converter,t,r),o=K8(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,t,r,...i){let s=Uy(e,this._firestore),o;return o=typeof(t=Yi(t))=="string"||t instanceof Ph?Y8(this._dataReader,"Transaction.update",s._key,t,r,i):Q8(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,o),this}delete(e){let t=Uy(e,this._firestore);return this._transaction.delete(t._key),this}};var Dx=class extends Cx{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Uy(e,this._firestore),r=new zp(this._firestore);return super.get(e).then(i=>new od(this._firestore,r,t._key,i._document,new nd(!1,!1),t.converter))}};function uB(n,e,t){n=zo(n,ac);let r=Le(Le({},Gne),t);return(function(s){if(s.maxAttempts<1)throw new Qe(Ne.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(s,o,a){let c=new Na;return s.asyncQueue.enqueueAndForget(async()=>{let u=await Fne(s);new gx(s.asyncQueue,u,a,o,c).ju()}),c.promise})(lv(n),i=>e(new Dx(n,i)),r)}function Kp(){return new wx("serverTimestamp")}(function(e,t=!0){(function(i){$p=i})(F1),wh(new ic("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new ac(new zC(r.getProvider("auth-internal")),new GC(o,r.getProvider("app-check-internal")),(function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Qe(Ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new X1(u.options.projectId,l)})(o,i),o);return s=Le({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),sc(FV,VV,e),sc(FV,VV,"esm2020")})();var mB="firebasestorage.googleapis.com",yB="storageBucket",Wne=120*1e3,Kne=600*1e3;var zr=class n extends rc{constructor(e,t,r=0){super(iN(e),`Firebase Storage: ${t} (${iN(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return iN(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},ti=(function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n})(ti||{});function iN(n){return"storage/"+n}function lN(){let n="An unknown error occurred, please check the error payload for server response.";return new zr(ti.UNKNOWN,n)}function Qne(n){return new zr(ti.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function Yne(n){return new zr(ti.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Jne(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new zr(ti.UNAUTHENTICATED,n)}function Zne(){return new zr(ti.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Xne(n){return new zr(ti.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function ere(){return new zr(ti.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function tre(){return new zr(ti.CANCELED,"User canceled the upload/download.")}function nre(n){return new zr(ti.INVALID_URL,"Invalid URL '"+n+"'.")}function rre(n){return new zr(ti.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function ire(){return new zr(ti.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+yB+"' property when initializing the app?")}function sre(){return new zr(ti.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ore(){return new zr(ti.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function are(n){return new zr(ti.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function sN(n){return new zr(ti.INVALID_ARGUMENT,n)}function vB(){return new zr(ti.APP_DELETED,"The Firebase app was deleted.")}function cre(n){return new zr(ti.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fv(n,e){return new zr(ti.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function hv(n){throw new zr(ti.INTERNAL_ERROR,"Internal error: "+n)}var cc=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw rre(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(K){K.path.charAt(K.path.length-1)==="/"&&(K.path_=K.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function u(K){K.path_=decodeURIComponent(K.path)}let l="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",g=new RegExp(`^https?://${p}/${l}/b/${i}/o${y}`,"i"),D={bucket:1,path:3},M=t===mB?"(?:storage.googleapis.com|storage.cloud.google.com)":t,k="([^?#]*)",O=new RegExp(`^https?://${M}/${i}/${k}`,"i"),W=[{regex:a,indices:c,postModify:s},{regex:g,indices:D,postModify:u},{regex:O,indices:{bucket:1,path:2},postModify:u}];for(let K=0;K<W.length;K++){let ue=W[K],fe=ue.regex.exec(e);if(fe){let P=fe[ue.indices.bucket],T=fe[ue.indices.path];T||(T=""),r=new n(P,T),ue.postModify(r);break}}if(r==null)throw nre(e);return r}},oN=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function ure(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let u=!1;function l(...k){u||(u=!0,e.apply(null,k))}function p(k){i=setTimeout(()=>{i=null,n(g,c())},k)}function y(){s&&clearTimeout(s)}function g(k,...O){if(u){y();return}if(k){y(),l.call(null,k,...O);return}if(c()||o){y(),l.call(null,k,...O);return}r<64&&(r*=2);let W;a===1?(a=2,W=0):W=(r+Math.random())*1e3,p(W)}let D=!1;function M(k){D||(D=!0,y(),!u&&(i!==null?(k||(a=2),clearTimeout(i),p(0)):k||(a=1)))}return p(0),s=setTimeout(()=>{o=!0,M(!0)},t),M}function lre(n){n(!1)}function dre(n){return n!==void 0}function hre(n){return typeof n=="object"&&!Array.isArray(n)}function dN(n){return typeof n=="string"||n instanceof String}function lB(n){return hN()&&n instanceof Blob}function hN(){return typeof Blob<"u"}function dB(n,e,t,r){if(r<e)throw sN(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw sN(`Invalid value for '${n}'. Expected ${t} or less.`)}function fN(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function _B(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Yp=(function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n})(Yp||{});function fre(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var aN=class{constructor(e,t,r,i,s,o,a,c,u,l,p,y=!0,g=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=l,this.connectionFactory_=p,this.retry=y,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,M)=>{this.resolve_=D,this.reject_=M,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Qp(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===Yp.NO_ERROR,c=s.getStatus();if(!a||fre(c,this.additionalRetryCodes_)&&this.retry){let l=s.getErrorCode()===Yp.ABORT;r(!1,new Qp(!1,null,l));return}let u=this.successCodes_.indexOf(c)!==-1;r(!0,new Qp(u,s))})},t=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());dre(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=lN();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?vB():tre();o(c)}else{let c=ere();o(c)}};this.canceled_?t(!1,new Qp(!1,null,!0)):this.backoffId_=ure(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&lre(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Qp=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function pre(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function gre(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function mre(n,e){e&&(n["X-Firebase-GMPID"]=e)}function yre(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function vre(n,e,t,r,i,s,o=!0,a=!1){let c=_B(n.urlParams),u=n.url+c,l=Object.assign({},n.headers);return mre(l,e),pre(l,t),gre(l,s),yre(l,r),new aN(u,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o,a)}function _re(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function wre(...n){let e=_re();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(hN())return new Blob(n);throw new zr(ti.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function bre(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function Ere(n){if(typeof atob>"u")throw are("base-64");return atob(n)}var Jc={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},pv=class{constructor(e,t){this.data=e,this.contentType=t||null}};function Ire(n,e){switch(n){case Jc.RAW:return new pv(wB(e));case Jc.BASE64:case Jc.BASE64URL:return new pv(bB(n,e));case Jc.DATA_URL:return new pv(Are(e),Sre(e))}throw lN()}function wB(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let s=r,o=n.charCodeAt(++t);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Tre(n){let e;try{e=decodeURIComponent(n)}catch{throw fv(Jc.DATA_URL,"Malformed data URL.")}return wB(e)}function bB(n,e){switch(n){case Jc.BASE64:{let i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw fv(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Jc.BASE64URL:{let i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw fv(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Ere(e)}catch(i){throw i.message.includes("polyfill")?i:fv(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var Bb=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw fv(Jc.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=Cre(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function Are(n){let e=new Bb(n);return e.base64?bB(Jc.BASE64,e.rest):Tre(e.rest)}function Sre(n){return new Bb(n).contentType}function Cre(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var jb=class n{constructor(e,t){let r=0,i="";lB(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(lB(this.data_)){let r=this.data_,i=bre(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(hN()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(wre.apply(null,t))}else{let t=e.map(o=>dN(o)?Ire(Jc.RAW,o).data:o.data_),r=0;t.forEach(o=>{r+=o.byteLength});let i=new Uint8Array(r),s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new n(i,!0)}}uploadData(){return this.data_}};function EB(n){let e;try{e=JSON.parse(n)}catch{return null}return hre(e)?e:null}function Dre(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function xre(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function IB(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function Nre(n,e){return e}var ls=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Nre}},Vb=null;function Rre(n){return!dN(n)||n.length<2?n:IB(n)}function TB(){if(Vb)return Vb;let n=[];n.push(new ls("bucket")),n.push(new ls("generation")),n.push(new ls("metageneration")),n.push(new ls("name","fullPath",!0));function e(s,o){return Rre(o)}let t=new ls("name");t.xform=e,n.push(t);function r(s,o){return o!==void 0?Number(o):o}let i=new ls("size");return i.xform=r,n.push(i),n.push(new ls("timeCreated")),n.push(new ls("updated")),n.push(new ls("md5Hash",null,!0)),n.push(new ls("cacheControl",null,!0)),n.push(new ls("contentDisposition",null,!0)),n.push(new ls("contentEncoding",null,!0)),n.push(new ls("contentLanguage",null,!0)),n.push(new ls("contentType",null,!0)),n.push(new ls("metadata","customMetadata",!0)),Vb=n,Vb}function Pre(n,e){function t(){let r=n.bucket,i=n.fullPath,s=new cc(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function kre(n,e,t){let r={};r.type="file";let i=t.length;for(let s=0;s<i;s++){let o=t[s];r[o.local]=o.xform(r,e[o.server])}return Pre(r,n),r}function AB(n,e,t){let r=EB(e);return r===null?null:kre(n,r,t)}function Mre(n,e,t,r){let i=EB(e);if(i===null||!dN(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(u=>{let l=n.bucket,p=n.fullPath,y="/b/"+o(l)+"/o/"+o(p),g=fN(y,t,r),D=_B({alt:"media",token:u});return g+D})[0]}function Ore(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}var Ub=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function SB(n){if(!n)throw lN()}function Lre(n,e){function t(r,i){let s=AB(n,i,e);return SB(s!==null),s}return t}function Fre(n,e){function t(r,i){let s=AB(n,i,e);return SB(s!==null),Mre(s,i,n.host,n._protocol)}return t}function CB(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=Zne():i=Jne():t.getStatus()===402?i=Yne(n.bucket):t.getStatus()===403?i=Xne(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Vre(n){let e=CB(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=Qne(n.path)),s.serverResponse=i.serverResponse,s}return t}function Bre(n,e,t){let r=e.fullServerUrl(),i=fN(r,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,a=new Ub(i,s,Fre(n,t),o);return a.errorHandler=Vre(e),a}function jre(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function Ure(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=jre(null,e)),r}function qre(n,e,t,r,i){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let W="";for(let K=0;K<2;K++)W=W+Math.random().toString().slice(2);return W}let c=a();o["Content-Type"]="multipart/related; boundary="+c;let u=Ure(e,r,i),l=Ore(u,t),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+l+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,y=`\r
--`+c+"--",g=jb.getBlob(p,r,y);if(g===null)throw sre();let D={name:u.fullPath},M=fN(s,n.host,n._protocol),k="POST",O=n.maxUploadRetryTime,G=new Ub(M,k,Lre(n,t),O);return G.urlParams=D,G.headers=o,G.body=g.uploadData(),G.errorHandler=CB(e),G}var _xe=256*1024;var hB=null,cN=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,s){if(this.sent_)throw hv("cannot .send() more than once");if(vh(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),s!==void 0)for(let o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw hv("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw hv("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw hv("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw hv("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},uN=class extends cN{initXhr(){this.xhr_.responseType="text"}};function DB(){return hB?hB():new uN}var Jp=class n{constructor(e,t){this._service=e,t instanceof cc?this._location=t:this._location=cc.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new cc(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return IB(this._location.path)}get storage(){return this._service}get parent(){let e=Dre(this._location.path);if(e===null)return null;let t=new cc(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw cre(e)}};function zre(n,e,t){n._throwIfRoot("uploadBytes");let r=qre(n.storage,n._location,TB(),new jb(e,!0),t);return n.storage.makeRequestWithTokens(r,DB).then(i=>({metadata:i,ref:n}))}function $re(n){n._throwIfRoot("getDownloadURL");let e=Bre(n.storage,n._location,TB());return n.storage.makeRequestWithTokens(e,DB).then(t=>{if(t===null)throw ore();return t})}function Hre(n,e){let t=xre(n._location.path,e),r=new cc(n._location.bucket,t);return new Jp(n.storage,r)}function Gre(n){return/^[A-Za-z]+:\/\//.test(n)}function Wre(n,e){return new Jp(n,e)}function xB(n,e){if(n instanceof gv){let t=n;if(t._bucket==null)throw ire();let r=new Jp(t,t._bucket);return e!=null?xB(r,e):r}else return e!==void 0?Hre(n,e):n}function Kre(n,e){if(e&&Gre(e)){if(n instanceof gv)return Wre(n,e);throw sN("To use ref(service, url), the first argument must be a Storage instance.")}else return xB(n,e)}function fB(n,e){let t=e?.[yB];return t==null?null:cc.makeFromBucketSpec(t,n)}function Qre(n,e,t,r={}){n.host=`${e}:${t}`;let i=vh(e);i&&(D1(`https://${n.host}/b`),N1("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";let{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:x1(s,n.app.options.projectId))}var gv=class{constructor(e,t,r,i,s,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=mB,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Wne,this._maxUploadRetryTime=Kne,this._requests=new Set,i!=null?this._bucket=cc.makeFromBucketSpec(i,this._host):this._bucket=fB(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=cc.makeFromBucketSpec(this._url,e):this._bucket=fB(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dB("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dB("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(L1(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Jp(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new oN(vB());{let o=vre(e,this._appId,r,i,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){let[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}},pB="@firebase/storage",gB="0.14.0";var NB="storage";function RB(n,e,t){return n=Yi(n),zre(n,e,t)}function PB(n){return n=Yi(n),$re(n)}function kB(n,e){return n=Yi(n),Kre(n,e)}function MB(n=V1(),e){n=Yi(n);let r=O1(n,NB).getImmediate({identifier:e}),i=C1("storage");return i&&Yre(r,...i),r}function Yre(n,e,t,r={}){Qre(n,e,t,r)}function Jre(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new gv(t,r,i,e,F1)}function Zre(){wh(new ic(NB,Jre,"PUBLIC").setMultipleInstances(!0)),sc(pB,gB,""),sc(pB,gB,"esm2020")}Zre();var Xre={apiKey:"AIzaSyBVEG3n4-C4FVtbJ9Q1giz24zN9qOkIK2Q",authDomain:"chanmurarestaurantui.firebaseapp.com",projectId:"chanmurarestaurantui",storageBucket:"chanmurarestaurantui.appspot.com",messagingSenderId:"31518285804",appId:"1:31518285804:web:5a2c2d2e146987d533eac9"},OB=NC(Xre),fd=G8(OB),eie=MB(OB),pd=class n{async uploadImage(e){let t=`menu-images/${Date.now()}-${e.name}`,r=kB(eie,t);return await RB(r,e),await PB(r)}async addMenuItem(e){await aB(Ob(fd,"menuItems"),e)}async getMenuItems(){console.log("Fetching menu\u2026");let e=await nN(Ob(fd,"menuItems"));return console.log("Fetched:",e.size),e.docs.map(t=>Le({id:t.id},t.data()))}async updateMenuItem(e,t){await sB(Mh(fd,"menuItems",e),t)}async deleteMenuItem(e){await oB(Mh(fd,"menuItems",e)),console.log("Menu item deleted:",e)}async getLastMonthStats(){let e=new Date,t=e.getMonth()===0?12:e.getMonth(),i=`${e.getMonth()===0?e.getFullYear()-1:e.getFullYear()}-${String(t).padStart(2,"0")}`,s=Mh(fd,"analytics",i),o=await tN(s);return o.exists()?o.data():{daily:{},totalRevenue:0}}getDateKey(e=new Date){return e.toISOString().split("T")[0]}getCounterDocRef(e){return Mh(fd,"sales-counters",e)}getOrdersCollectionRef(e){return Ob(fd,`sales/${e}/orders`)}async placeOrderAtomic(e){let t=this.getDateKey(),r=this.getCounterDocRef(t),i=this.getOrdersCollectionRef(t),s=await uB(fd,async o=>{let a=await o.get(r),c=1;a.exists()?(c=(a.data().count||0)+1,o.update(r,{count:c,updatedAt:Kp()})):(o.set(r,{count:1,updatedAt:Kp()}),c=1);let u=Mh(i),l=Ht(Le({orderId:c},e),{totalAmount:Number(e.totalAmount||0),createdAt:Kp()});return o.set(u,l),{orderId:c,docId:u.id}});return console.log("Order placed:",s),s}subscribeTodayOrders(e){let t=this.getDateKey(),r=this.getOrdersCollectionRef(t),i=tB(r,nB("createdAt","desc"));return Fb(i,o=>{let a=o.docs.map(c=>Le({id:c.id},c.data()));e(a)},o=>{console.error("subscribeTodayOrders error",o),e([])})}async getTodayOrdersOnce(){let e=this.getDateKey(),t=this.getOrdersCollectionRef(e);return(await nN(t)).docs.map(i=>Le({id:i.id},i.data()))}async calculateTodayRevenue(){return(await this.getTodayOrdersOnce()).reduce((t,r)=>t+(Number(r.totalAmount)||0),0)}async getTodayCounter(){let e=this.getDateKey(),t=await tN(this.getCounterDocRef(e));if(!t.exists())return 0;let r=t.data();return Number(r.count||0)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"})};function tie(n,e){n&1&&(we(0,"p",31),Pe(1,"Out of Stock"),_e())}function nie(n,e){if(n&1){let t=Ta();we(0,"div",21)(1,"div",22)(2,"img",23),rn("error",function(i){rr(t);let s=Cn();return ir(s.onImageError(i))}),_e(),we(3,"div",24)(4,"h5",25),Pe(5),_e(),we(6,"p",26),Pe(7),_e(),we(8,"div",27)(9,"button",28),rn("click",function(){let i=rr(t).$implicit,s=Cn();return ir(s.decreaseQuantity(i))}),Pe(10,"-"),_e(),we(11,"span"),Pe(12),_e(),we(13,"button",29),rn("click",function(){let i=rr(t).$implicit,s=Cn();return ir(s.increaseQuantity(i))}),Pe(14,"+"),_e()(),pi(15,tie,2,0,"p",30),_e()()()}if(n&2){let t=e.$implicit;We(2),Sn("src",t.imageUrl||"assets/default.jpg",Wl)("alt",t.name),We(3),Sr(t.name),We(2),Ur("Price: \u20B9",t.price),We(2),Sn("disabled",(t.quantityAvailable||0)===0),We(3),Sr(t.quantity||0),We(),Sn("disabled",(t.quantityAvailable||0)===0),We(2),Sn("ngIf",t.quantityAvailable===0)}}function rie(n,e){if(n&1){let t=Ta();we(0,"div",32)(1,"span"),Pe(2),_e(),we(3,"button",33),rn("click",function(){rr(t);let i=Cn();return ir(i.viewCart())}),Pe(4," View Cart "),_e()()}if(n&2){let t=Cn();We(2),Wm("",t.cartItemCount," item",t.cartItemCount>1?"s":""," in cart")}}var qb=class n{constructor(e,t,r){this.cartService=e;this.firebaseService=t;this.router=r}menuItems=us([]);cartItems=[];isLoading=!0;cartItemCount=0;searchText="";selectedCategory="";minPrice=null;maxPrice=null;sortOrder="";availabilityFilter="";currentPage=1;itemsPerPage=6;async ngOnInit(){let e=await this.firebaseService.getMenuItems();this.menuItems.set(e),this.cartService.cartItems$.subscribe(t=>{this.cartItems=t,this.cartItemCount=t.reduce((i,s)=>i+s.quantity,0);let r=e.map(i=>{let s=t.find(o=>o.menuItem.id===i.id);return Ht(Le({},i),{quantity:s?s.quantity:0})});this.menuItems.set(r)})}filteredMenuItems(){let e=this.menuItems();if(this.searchText.trim()){let t=this.searchText.toLowerCase();e=e.filter(r=>r.name.toLowerCase().includes(t))}return this.selectedCategory&&(e=e.filter(t=>t.category===this.selectedCategory)),this.minPrice!==null&&(e=e.filter(t=>t.price>=this.minPrice)),this.maxPrice!==null&&(e=e.filter(t=>t.price<=this.maxPrice)),this.availabilityFilter==="in"?e=e.filter(t=>t.quantityAvailable>0):this.availabilityFilter==="out"&&(e=e.filter(t=>t.quantityAvailable===0)),this.sortOrder==="asc"?e.sort((t,r)=>t.price-r.price):this.sortOrder==="desc"&&e.sort((t,r)=>r.price-t.price),e}get totalPages(){return Math.ceil(this.filteredMenuItems().length/this.itemsPerPage)}paginatedItems(){let e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredMenuItems().slice(e,t)}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}previousPage(){this.currentPage>1&&this.currentPage--}viewCart(){this.router.navigate(["/cart"])}onImageError(e){e.target.src="assets/default.jpg"}increaseQuantity(e){e.quantity=(e.quantity||0)+1,this.cartService.addToCart(e,1)}decreaseQuantity(e){(e.quantity||0)<=0||(e.quantity=e.quantity-1,this.cartService.addToCart(e,-1))}static \u0275fac=function(t){return new(t||n)(_t(Ca),_t(pd),_t($c))};static \u0275cmp=Zs({type:n,selectors:[["app-menu-list"]],decls:40,vars:12,consts:[[1,"container","mt-3"],["type","text","placeholder","Search items...",1,"form-control","mb-3",3,"ngModelChange","ngModel"],[1,"form-select","mb-3",3,"ngModelChange","ngModel"],["value",""],["value","Veg"],["value","Non-Veg"],[1,"row","mb-3"],[1,"col-md-6"],["type","number","placeholder","Min Price",1,"form-control",3,"ngModelChange","ngModel"],["type","number","placeholder","Max Price",1,"form-control",3,"ngModelChange","ngModel"],["value","asc"],["value","desc"],["value","in"],["value","out"],[1,"row"],["class","col-md-4 mb-3",4,"ngFor","ngForOf"],[1,"pagination-wrapper","d-flex","justify-content-center","mt-3"],[1,"btn","btn-secondary","me-2",3,"click","disabled"],[1,"mt-2","mx-3"],[1,"btn","btn-secondary","ms-2",3,"click","disabled"],["class","cart-notification-bar d-flex justify-content-between align-items-center",4,"ngIf"],[1,"col-md-4","mb-3"],[1,"card","h-100","p-2"],[1,"card-img-top","fixed-img",3,"error","src","alt"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"d-flex","align-items-center"],[1,"btn","btn-outline-secondary","btn-sm","me-2",3,"click","disabled"],[1,"btn","btn-outline-secondary","btn-sm","ms-2",3,"click","disabled"],["class","card-text outofStock",4,"ngIf"],[1,"card-text","outofStock"],[1,"cart-notification-bar","d-flex","justify-content-between","align-items-center"],[1,"btn","btn-primary","btn-sm",3,"click"]],template:function(t,r){t&1&&(we(0,"div",0)(1,"input",1),Dr("ngModelChange",function(s){return Lr(r.searchText,s)||(r.searchText=s),s}),rn("ngModelChange",function(){return r.currentPage=1}),_e(),we(2,"select",2),Dr("ngModelChange",function(s){return Lr(r.selectedCategory,s)||(r.selectedCategory=s),s}),rn("ngModelChange",function(){return r.currentPage=1}),we(3,"option",3),Pe(4,"All Categories"),_e(),we(5,"option",4),Pe(6,"VEG"),_e(),we(7,"option",5),Pe(8,"NON-VEG"),_e()(),we(9,"div",6)(10,"div",7)(11,"input",8),Dr("ngModelChange",function(s){return Lr(r.minPrice,s)||(r.minPrice=s),s}),rn("ngModelChange",function(){return r.currentPage=1}),_e()(),we(12,"div",7)(13,"input",9),Dr("ngModelChange",function(s){return Lr(r.maxPrice,s)||(r.maxPrice=s),s}),rn("ngModelChange",function(){return r.currentPage=1}),_e()()(),we(14,"select",2),Dr("ngModelChange",function(s){return Lr(r.sortOrder,s)||(r.sortOrder=s),s}),rn("ngModelChange",function(){return r.currentPage=1}),we(15,"option",3),Pe(16,"Sort By"),_e(),we(17,"option",10),Pe(18,"Price: Low to High"),_e(),we(19,"option",11),Pe(20,"Price: High to Low"),_e()(),we(21,"select",2),Dr("ngModelChange",function(s){return Lr(r.availabilityFilter,s)||(r.availabilityFilter=s),s}),rn("ngModelChange",function(){return r.currentPage=1}),we(22,"option",3),Pe(23,"All Items"),_e(),we(24,"option",12),Pe(25,"In Stock"),_e(),we(26,"option",13),Pe(27,"Out of Stock"),_e()(),we(28,"h3"),Pe(29,"Menu"),_e(),we(30,"div",14),pi(31,nie,16,8,"div",15),_e()(),we(32,"div",16)(33,"button",17),rn("click",function(){return r.previousPage()}),Pe(34," Previous "),_e(),we(35,"span",18),Pe(36),_e(),we(37,"button",19),rn("click",function(){return r.nextPage()}),Pe(38," Next "),_e()(),pi(39,rie,5,2,"div",20)),t&2&&(We(),Cr("ngModel",r.searchText),We(),Cr("ngModel",r.selectedCategory),We(9),Cr("ngModel",r.minPrice),We(2),Cr("ngModel",r.maxPrice),We(),Cr("ngModel",r.sortOrder),We(7),Cr("ngModel",r.availabilityFilter),We(10),Sn("ngForOf",r.paginatedItems()),We(2),Sn("disabled",r.currentPage===1),We(3),Wm(" Page ",r.currentPage," of ",r.totalPages," "),We(),Sn("disabled",r.currentPage===r.totalPages),We(2),Sn("ngIf",r.cartItemCount>0))},dependencies:[Bo,Uc,uh,Sa,I1,T1,Hc,yh,vp,ed,Bu],styles:[".card[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 2px 6px #0000001a}.container[_ngcontent-%COMP%]{padding-bottom:80px}.pagination-wrapper[_ngcontent-%COMP%]{position:relative;z-index:1010;animation:_ngcontent-%COMP%_slideUp .5s ease-out}.fixed-img[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover;border-radius:6px}.category-dot[_ngcontent-%COMP%]{height:14px;width:14px;display:inline-block;border-radius:50%}.veg-dot[_ngcontent-%COMP%]{background-color:green;border:2px solid darkgreen}.nonveg-dot[_ngcontent-%COMP%]{background-color:red;border:2px solid darkred}.outofStock[_ngcontent-%COMP%]{color:red;font-weight:700}.cart-notification-bar[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;background:#fff;padding:14px 18px;border-top:3px solid #0d6efd;z-index:2000;font-weight:600;animation:_ngcontent-%COMP%_slideUp .4s ease-out forwards;display:flex;justify-content:space-between;align-items:center;opacity:0}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(100%);opacity:0}60%{opacity:.6}to{transform:translateY(0);opacity:1}}.cart-notification-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transition:transform .2s ease-out}.cart-notification-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:scale(1.03)}@media(max-width:576px){.fixed-img[_ngcontent-%COMP%]{height:150px}}"]})};function iie(n,e){n&1&&(we(0,"div"),Pe(1,"Your cart is empty"),_e())}function sie(n,e){if(n&1){let t=Ta();we(0,"tr")(1,"td"),Pe(2),_e(),we(3,"td"),Pe(4),_e(),we(5,"td"),Pe(6),_e(),we(7,"td"),Pe(8),_e(),we(9,"td")(10,"div",9)(11,"button",10),rn("click",function(){let i=rr(t).$implicit,s=Cn(2);return ir(s.decreaseQuantity(i))}),Pe(12,"-"),_e(),we(13,"span"),Pe(14),_e(),we(15,"button",11),rn("click",function(){let i=rr(t).$implicit,s=Cn(2);return ir(s.increaseQuantity(i))}),Pe(16,"+"),_e()()(),we(17,"td")(18,"button",12),rn("click",function(){let i=rr(t).$implicit,s=Cn(2);return ir(s.remove(i))}),Pe(19,"Remove"),_e()()()}if(n&2){let t=e.$implicit;We(2),Sr(t.menuItem.name),We(2),Sr(t.menuItem.price),We(2),Sr(t.quantity),We(2),Sr(t.totalPrice),We(6),Sr(t.quantity||0)}}function oie(n,e){if(n&1&&(we(0,"table",7)(1,"thead")(2,"tr")(3,"th"),Pe(4,"Name"),_e(),we(5,"th"),Pe(6,"Price"),_e(),we(7,"th"),Pe(8,"Quantity"),_e(),we(9,"th"),Pe(10,"Total"),_e(),we(11,"th"),Pe(12,"#"),_e(),we(13,"th"),Pe(14,"Actions"),_e()()(),we(15,"tbody"),pi(16,sie,20,5,"tr",8),_e()()),n&2){let t=Cn();We(16),Sn("ngForOf",t.cartItems)}}function aie(n,e){if(n&1){let t=Ta();we(0,"div",13)(1,"div",14)(2,"h5",15),Pe(3),_e(),we(4,"p",16)(5,"strong"),Pe(6,"Price:"),_e(),Pe(7),_e(),we(8,"p",16)(9,"strong"),Pe(10,"Total:"),_e(),Pe(11),_e(),we(12,"div",17)(13,"button",10),rn("click",function(){let i=rr(t).$implicit,s=Cn();return ir(s.decreaseQuantity(i))}),Pe(14,"-"),_e(),we(15,"span"),Pe(16),_e(),we(17,"button",11),rn("click",function(){let i=rr(t).$implicit,s=Cn();return ir(s.increaseQuantity(i))}),Pe(18,"+"),_e()(),we(19,"button",18),rn("click",function(){let i=rr(t).$implicit,s=Cn();return ir(s.remove(i))}),Pe(20,"Remove"),_e()()()}if(n&2){let t=e.$implicit;We(3),Sr(t.menuItem.name),We(4),Ur(" \u20B9",t.menuItem.price),We(4),Ur(" \u20B9",t.totalPrice),We(5),Sr(t.quantity)}}function cie(n,e){if(n&1&&(we(0,"h4"),Pe(1),_e()),n&2){let t=Cn();We(),Ur("Total Amount: \u20B9",t.totalAmount)}}function uie(n,e){if(n&1){let t=Ta();we(0,"div")(1,"label"),Pe(2,"Purchaser Name:"),_e(),we(3,"input",19),Dr("ngModelChange",function(i){rr(t);let s=Cn();return Lr(s.purchaserName,i)||(s.purchaserName=i),ir(i)}),_e(),we(4,"label"),Pe(5,"Mobile Number:"),_e(),we(6,"input",20),Dr("ngModelChange",function(i){rr(t);let s=Cn();return Lr(s.mobileNumber,i)||(s.mobileNumber=i),ir(i)}),_e()()}if(n&2){let t=Cn();We(3),Cr("ngModel",t.purchaserName),We(3),Cr("ngModel",t.mobileNumber)}}function lie(n,e){if(n&1){let t=Ta();we(0,"button",21),rn("click",function(){rr(t);let i=Cn();return ir(i.confirmOrder())}),Pe(1,"Place Order"),_e()}}var zb=class n{constructor(e,t,r){this.cartService=e;this.firebaseService=t;this.router=r}cartItems=[];purchaserName="";mobileNumber="";totalAmount=0;ngOnInit(){this.cartService.cartItems$.subscribe(e=>{this.cartItems=e,this.totalAmount=this.cartItems.reduce((t,r)=>t+r.totalPrice,0)})}increaseQuantity(e){this.cartService.addToCart(e.menuItem,1)}decreaseQuantity(e){e.quantity>1?this.cartService.addToCart(e.menuItem,-1):this.remove(e)}remove(e){this.cartService.removeFromCart(e.menuItem.id)}async confirmOrder(){if(!this.cartItems.length)return alert("Cart is empty!");if(!this.purchaserName.trim()||!this.mobileNumber.toString().trim())return alert("Enter customer name and mobile number!");let e={customerName:this.purchaserName,mobileNumber:this.mobileNumber,items:this.cartItems.map(t=>({id:t.menuItem.id,name:t.menuItem.name,price:t.menuItem.price,quantity:t.quantity,totalPrice:t.totalPrice})),totalAmount:this.totalAmount};try{let{orderId:t,docId:r}=await this.firebaseService.placeOrderAtomic(e);alert(`Order placed \u2014 Order #${t}`);let i=Ht(Le({},e),{orderId:t,createdAt:new Date().toLocaleString()});this.printInvoice(i),this.cartService.clearCart(),this.cartService.updateCartCount(),this.router.navigate(["/"])}catch(t){console.error("placeOrderAtomic failed",t),alert("Failed to place order \u2014 try again")}}printInvoice(e){let t=window.open("","_blank","width=600,height=800");if(!t){alert("Failed to open invoice window. Please allow pop-ups for this site.");return}t.document.write(`
    <html>
    <head>
      <title>Invoice</title>
      <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
      </style>
    </head>
    <body>
      <h2>Naveen's Delhi Malai Chaap Restaurant Invoice</h2>
      <p>Customer: ${e.customerName}</p>
      <p>Mobile: ${e.mobileNumber}</p>
      <p>Date: ${new Date().toLocaleString()}</p>

      <table>
        <thead>
          <tr>
            <th>Item</th>
            <th>Qty</th>
            <th>Price</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody>
          ${e.items.map(r=>`
            <tr>
              <td>${r.name}</td>
              <td>${r.quantity}</td>
              <td>\u20B9${r.price}</td>
              <td>\u20B9${r.totalPrice}</td>
            </tr>`).join("")}
        </tbody>
      </table>
      <h3>Total: \u20B9${e.totalAmount}</h3>
      <br/>
      <button onclick="window.print()">Print Invoice</button>
    </body>
    </html>
  `),t.document.close()}static \u0275fac=function(t){return new(t||n)(_t(Ca),_t(pd),_t($c))};static \u0275cmp=Zs({type:n,selectors:[["app-cart"]],decls:10,vars:6,consts:[[1,"my-3"],[4,"ngIf"],[1,"d-none","d-md-block"],["class","table table-striped",4,"ngIf"],[1,"d-md-none"],["class","card mb-2 shadow-sm",4,"ngFor","ngForOf"],["class","btn btn-success",3,"click",4,"ngIf"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],[1,"btn","btn-outline-secondary","btn-sm","me-2",3,"click"],[1,"btn","btn-outline-secondary","btn-sm","ms-2",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"card","mb-2","shadow-sm"],[1,"card-body"],[1,"card-title"],[1,"mb-1"],[1,"d-flex","align-items-center","mb-2"],[1,"btn","btn-danger","btn-sm","w-100",3,"click"],["type","text","placeholder","Enter purchaser name",1,"form-control","mb-3",3,"ngModelChange","ngModel"],["type","number","maxlength","10","pattern","[0-9]{10}","placeholder","Enter mobile number",1,"form-control","mb-3",3,"ngModelChange","ngModel"],[1,"btn","btn-success",3,"click"]],template:function(t,r){t&1&&(we(0,"h2",0),Pe(1,"Cart"),_e(),pi(2,iie,2,0,"div",1),we(3,"div",2),pi(4,oie,17,1,"table",3),_e(),we(5,"div",4),pi(6,aie,21,4,"div",5),_e(),pi(7,cie,2,1,"h4",1)(8,uie,7,2,"div",1)(9,lie,2,0,"button",6)),t&2&&(We(2),Sn("ngIf",r.cartItems.length===0),We(2),Sn("ngIf",r.cartItems.length>0),We(2),Sn("ngForOf",r.cartItems),We(),Sn("ngIf",r.cartItems.length>0),We(),Sn("ngIf",r.cartItems.length>0),We(),Sn("ngIf",r.cartItems.length>0))},dependencies:[Bo,Uc,uh,Sa,Hc,yh,ed,lC,dC,Bu],styles:[".table[_ngcontent-%COMP%]{margin-top:20px}.card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700}"]})};var $b=class n{constructor(e){this.cartService=e}orders=[];nextId=1;createOrder(e,t,r){let i=e.map(a=>({menuItem:a.menuItem,quantity:a.quantity,totalPrice:a.totalPrice})),s=i.reduce((a,c)=>a+c.totalPrice,0),o={id:this.nextId++,items:i,totalAmount:s,status:"Pending",tableNumber:t,customerName:r,orderTime:new Date};return this.orders.push(o),this.cartService.updateCartCount(),o}getOrders(){return this.orders}updateStatus(e,t){let r=this.orders.find(i=>i.id===e);r&&(r.status=t)}static \u0275fac=function(t){return new(t||n)(Bt(Ca))};static \u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"})};var Hb=class n{constructor(e,t){this.cartService=e;this.orderService=t}tableNumber="";customerName="";placeTableOrder(){let e=this.cartService.cartItems.getValue();if(!e.length){alert("Cart is empty");return}this.orderService.createOrder(e,this.tableNumber,this.customerName),this.cartService.clearCart(),alert("Table order placed!"),this.tableNumber="",this.customerName=""}static \u0275fac=function(t){return new(t||n)(_t(Ca),_t($b))};static \u0275cmp=Zs({type:n,selectors:[["app-table-order"]],decls:12,vars:2,consts:[[1,"my-3"],[1,"mb-3"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click"]],template:function(t,r){t&1&&(we(0,"h2",0),Pe(1,"Table Order"),_e(),we(2,"div",1)(3,"label"),Pe(4,"Table Number"),_e(),we(5,"input",2),Dr("ngModelChange",function(s){return Lr(r.tableNumber,s)||(r.tableNumber=s),s}),_e()(),we(6,"div",1)(7,"label"),Pe(8,"Customer Name"),_e(),we(9,"input",2),Dr("ngModelChange",function(s){return Lr(r.customerName,s)||(r.customerName=s),s}),_e()(),we(10,"button",3),rn("click",function(){return r.placeTableOrder()}),Pe(11,"Place Table Order"),_e()),t&2&&(We(5),Cr("ngModel",r.tableNumber),We(4),Cr("ngModel",r.customerName))},dependencies:[Sa,Hc,ed,Bu],styles:["input[_ngcontent-%COMP%]{max-width:300px}"]})};var uc=Uint8Array,Go=Uint16Array,_N=Int32Array,wN=new uc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),bN=new uc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),LB=new uc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),jB=function(n,e){for(var t=new Go(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new _N(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},UB=jB(wN,2),hie=UB.b,mN=UB.r;hie[28]=258,mN[258]=28;var qB=jB(bN,0),qxe=qB.b,FB=qB.r,yN=new Go(32768);for(Hn=0;Hn<32768;++Hn)Qu=(Hn&43690)>>1|(Hn&21845)<<1,Qu=(Qu&52428)>>2|(Qu&13107)<<2,Qu=(Qu&61680)>>4|(Qu&3855)<<4,yN[Hn]=((Qu&65280)>>8|(Qu&255)<<8)>>1;var Qu,Hn,vv=function(n,e,t){for(var r=n.length,i=0,s=new Go(e);i<r;++i)n[i]&&++s[n[i]-1];var o=new Go(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new Go(1<<e);var c=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],l=e-n[i],p=o[n[i]-1]++<<l,y=p|(1<<l)-1;p<=y;++p)a[yN[p]>>c]=u}else for(a=new Go(r),i=0;i<r;++i)n[i]&&(a[i]=yN[o[n[i]-1]++]>>15-n[i]);return a},Oh=new uc(288);for(Hn=0;Hn<144;++Hn)Oh[Hn]=8;var Hn;for(Hn=144;Hn<256;++Hn)Oh[Hn]=9;var Hn;for(Hn=256;Hn<280;++Hn)Oh[Hn]=7;var Hn;for(Hn=280;Hn<288;++Hn)Oh[Hn]=8;var Hn,Gb=new uc(32);for(Hn=0;Hn<32;++Hn)Gb[Hn]=5;var Hn,fie=vv(Oh,9,0);var pie=vv(Gb,5,0);var zB=function(n){return(n+7)/8|0},gie=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new uc(n.subarray(e,t))};var Yu=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},mv=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},gN=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return{t:HB,l:0};if(i==1){var o=new uc(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(ue,fe){return ue.f-fe.f}),t.push({s:-1,f:25001});var a=t[0],c=t[1],u=0,l=1,p=2;for(t[0]={s:-1,f:a.f+c.f,l:a,r:c};l!=i-1;)a=t[t[u].f<t[p].f?u++:p++],c=t[u!=l&&t[u].f<t[p].f?u++:p++],t[l++]={s:-1,f:a.f+c.f,l:a,r:c};for(var y=s[0].s,r=1;r<i;++r)s[r].s>y&&(y=s[r].s);var g=new Go(y+1),D=vN(t[l-1],g,0);if(D>e){var r=0,M=0,k=D-e,O=1<<k;for(s.sort(function(fe,P){return g[P.s]-g[fe.s]||fe.f-P.f});r<i;++r){var G=s[r].s;if(g[G]>e)M+=O-(1<<D-g[G]),g[G]=e;else break}for(M>>=k;M>0;){var W=s[r].s;g[W]<e?M-=1<<e-g[W]++-1:++r}for(;r>=0&&M;--r){var K=s[r].s;g[K]==e&&(--g[K],++M)}D=e}return{t:new uc(g),l:D}},vN=function(n,e,t){return n.s==-1?Math.max(vN(n.l,e,t+1),vN(n.r,e,t+1)):e[n.s]=t},VB=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Go(++e),r=0,i=n[0],s=1,o=function(c){t[r++]=c},a=1;a<=e;++a)if(n[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=n[a]}return{c:t.subarray(0,r),n:e}},yv=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},$B=function(n,e,t){var r=t.length,i=zB(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=t[s];return(i+4+r)*8},BB=function(n,e,t,r,i,s,o,a,c,u,l){Yu(e,l++,t),++i[256];for(var p=gN(i,15),y=p.t,g=p.l,D=gN(s,15),M=D.t,k=D.l,O=VB(y),G=O.c,W=O.n,K=VB(M),ue=K.c,fe=K.n,P=new Go(19),T=0;T<G.length;++T)++P[G[T]&31];for(var T=0;T<ue.length;++T)++P[ue[T]&31];for(var w=gN(P,7),x=w.t,_=w.l,S=19;S>4&&!x[LB[S-1]];--S);var I=u+5<<3,ee=yv(i,Oh)+yv(s,Gb)+o,ye=yv(i,y)+yv(s,M)+o+14+3*S+yv(P,x)+2*P[16]+3*P[17]+7*P[18];if(c>=0&&I<=ee&&I<=ye)return $B(e,l,n.subarray(c,c+u));var Se,Ie,he,Te;if(Yu(e,l,1+(ye<ee)),l+=2,ye<ee){Se=vv(y,g,0),Ie=y,he=vv(M,k,0),Te=M;var He=vv(x,_,0);Yu(e,l,W-257),Yu(e,l+5,fe-1),Yu(e,l+10,S-4),l+=14;for(var T=0;T<S;++T)Yu(e,l+3*T,x[LB[T]]);l+=3*S;for(var Oe=[G,ue],B=0;B<2;++B)for(var Y=Oe[B],T=0;T<Y.length;++T){var X=Y[T]&31;Yu(e,l,He[X]),l+=x[X],X>15&&(Yu(e,l,Y[T]>>5&127),l+=Y[T]>>12)}}else Se=fie,Ie=Oh,he=pie,Te=Gb;for(var T=0;T<a;++T){var ne=r[T];if(ne>255){var X=ne>>18&31;mv(e,l,Se[X+257]),l+=Ie[X+257],X>7&&(Yu(e,l,ne>>23&31),l+=wN[X]);var oe=ne&31;mv(e,l,he[oe]),l+=Te[oe],oe>3&&(mv(e,l,ne>>5&8191),l+=bN[oe])}else mv(e,l,Se[ne]),l+=Ie[ne]}return mv(e,l,Se[256]),l+Ie[256]},mie=new _N([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),HB=new uc(0),yie=function(n,e,t,r,i,s){var o=s.z||n.length,a=new uc(r+o+5*(1+Math.ceil(o/7e3))+i),c=a.subarray(r,a.length-i),u=s.l,l=(s.r||0)&7;if(e){l&&(c[0]=s.r>>3);for(var p=mie[e-1],y=p>>13,g=p&8191,D=(1<<t)-1,M=s.p||new Go(32768),k=s.h||new Go(D+1),O=Math.ceil(t/3),G=2*O,W=function(dt){return(n[dt]^n[dt+1]<<O^n[dt+2]<<G)&D},K=new _N(25e3),ue=new Go(288),fe=new Go(32),P=0,T=0,w=s.i||0,x=0,_=s.w||0,S=0;w+2<o;++w){var I=W(w),ee=w&32767,ye=k[I];if(M[ee]=ye,k[I]=ee,_<=w){var Se=o-w;if((P>7e3||x>24576)&&(Se>423||!u)){l=BB(n,c,0,K,ue,fe,T,x,S,w-S,l),x=P=T=0,S=w;for(var Ie=0;Ie<286;++Ie)ue[Ie]=0;for(var Ie=0;Ie<30;++Ie)fe[Ie]=0}var he=2,Te=0,He=g,Oe=ee-ye&32767;if(Se>2&&I==W(w-Oe))for(var B=Math.min(y,Se)-1,Y=Math.min(32767,w),X=Math.min(258,Se);Oe<=Y&&--He&&ee!=ye;){if(n[w+he]==n[w+he-Oe]){for(var ne=0;ne<X&&n[w+ne]==n[w+ne-Oe];++ne);if(ne>he){if(he=ne,Te=Oe,ne>B)break;for(var oe=Math.min(Oe,ne-2),le=0,Ie=0;Ie<oe;++Ie){var be=w-Oe+Ie&32767,Ee=M[be],De=be-Ee&32767;De>le&&(le=De,ye=be)}}}ee=ye,ye=M[ee],Oe+=ee-ye&32767}if(Te){K[x++]=268435456|mN[he]<<18|FB[Te];var Be=mN[he]&31,Xe=FB[Te]&31;T+=wN[Be]+bN[Xe],++ue[257+Be],++fe[Xe],_=w+he,++P}else K[x++]=n[w],++ue[n[w]]}}for(w=Math.max(w,_);w<o;++w)K[x++]=n[w],++ue[n[w]];l=BB(n,c,u,K,ue,fe,T,x,S,w-S,l),u||(s.r=l&7|c[l/8|0]<<3,l-=7,s.h=k,s.p=M,s.i=w,s.w=_)}else{for(var w=s.w||0;w<o+u;w+=65535){var Ye=w+65535;Ye>=o&&(c[l/8|0]=u,Ye=o),l=$B(c,l+1,n.subarray(w,Ye))}s.i=o}return gie(a,0,r+zB(l)+i)};var GB=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=t.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=t[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},vie=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new uc(s.length+n.length);o.set(s),o.set(n,s.length),n=o,i.w=s.length}return yie(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)};var WB=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8};var _ie=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=GB();i.p(e.dictionary),WB(n,2,i.d())}};function Wb(n,e){e||(e={});var t=GB();t.p(n);var r=vie(n,e,e.dictionary?6:2,4);return _ie(r,e),WB(r,r.length-4,t.d()),r}var wie=typeof TextDecoder<"u"&&new TextDecoder,bie=0;try{wie.decode(HB,{stream:!0}),bie=1}catch{}function KB(n){if(Array.isArray(n))return n}function QB(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],c=!0,u=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(l){u=!0,i=l}finally{try{if(!c&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function EN(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function YB(n,e){if(n){if(typeof n=="string")return EN(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?EN(n,e):void 0}}function JB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IN(n,e){return KB(n)||QB(n,e)||YB(n,e)||JB()}function TN(n,e="utf8"){return new TextDecoder(e).decode(n)}var Eie=new TextEncoder;function ZB(n){return Eie.encode(n)}var Iie=1024*8,Tie=(()=>{let n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),AN={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array},_v=class n{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=Iie,t={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);let i=t.offset?t.offset>>>0:0,s=e.byteLength-i,o=i;(ArrayBuffer.isView(e)||e instanceof n)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){let e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){let r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){let r=AN[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+r);if(this.littleEndian===Tie&&t!=="uint8"&&t!=="int8"){let a=new Uint8Array(this.buffer.slice(i,i+r));a.reverse();let c=new AN[t](a.buffer);return this.offset+=r,c.reverse(),c}let o=new AN[t](s);return this.offset+=r,o}readInt16(){let e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){let e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){let e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){let e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){let e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){let e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){let e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){let e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let r=0;r<e;r++)t+=this.readChar();return t}readUtf8(e=1){return TN(this.readBytes(e))}decodeText(e=1,t="utf8"){return TN(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(ZB(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}};function rg(n){let e=n.length;for(;--e>=0;)n[e]=0}var Aie=0,Fj=1,Sie=2,Cie=3,Die=258,QN=29,Mv=256,Sv=Mv+1+QN,eg=30,YN=19,Vj=2*Sv+1,Lh=15,SN=16,xie=7,JN=256,Bj=16,jj=17,Uj=18,jN=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Xb=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Nie=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),qj=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Rie=512,Zu=new Array((Sv+2)*2);rg(Zu);var Iv=new Array(eg*2);rg(Iv);var Cv=new Array(Rie);rg(Cv);var Dv=new Array(Die-Cie+1);rg(Dv);var ZN=new Array(QN);rg(ZN);var eE=new Array(eg);rg(eE);function CN(n,e,t,r,i){this.static_tree=n,this.extra_bits=e,this.extra_base=t,this.elems=r,this.max_length=i,this.has_stree=n&&n.length}var zj,$j,Hj;function DN(n,e){this.dyn_tree=n,this.max_code=0,this.stat_desc=e}var Gj=n=>n<256?Cv[n]:Cv[256+(n>>>7)],xv=(n,e)=>{n.pending_buf[n.pending++]=e&255,n.pending_buf[n.pending++]=e>>>8&255},vo=(n,e,t)=>{n.bi_valid>SN-t?(n.bi_buf|=e<<n.bi_valid&65535,xv(n,n.bi_buf),n.bi_buf=e>>SN-n.bi_valid,n.bi_valid+=t-SN):(n.bi_buf|=e<<n.bi_valid&65535,n.bi_valid+=t)},Xc=(n,e,t)=>{vo(n,t[e*2],t[e*2+1])},Wj=(n,e)=>{let t=0;do t|=n&1,n>>>=1,t<<=1;while(--e>0);return t>>>1},Pie=n=>{n.bi_valid===16?(xv(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=n.bi_buf&255,n.bi_buf>>=8,n.bi_valid-=8)},kie=(n,e)=>{let t=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,s=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,c=e.stat_desc.max_length,u,l,p,y,g,D,M=0;for(y=0;y<=Lh;y++)n.bl_count[y]=0;for(t[n.heap[n.heap_max]*2+1]=0,u=n.heap_max+1;u<Vj;u++)l=n.heap[u],y=t[t[l*2+1]*2+1]+1,y>c&&(y=c,M++),t[l*2+1]=y,!(l>r)&&(n.bl_count[y]++,g=0,l>=a&&(g=o[l-a]),D=t[l*2],n.opt_len+=D*(y+g),s&&(n.static_len+=D*(i[l*2+1]+g)));if(M!==0){do{for(y=c-1;n.bl_count[y]===0;)y--;n.bl_count[y]--,n.bl_count[y+1]+=2,n.bl_count[c]--,M-=2}while(M>0);for(y=c;y!==0;y--)for(l=n.bl_count[y];l!==0;)p=n.heap[--u],!(p>r)&&(t[p*2+1]!==y&&(n.opt_len+=(y-t[p*2+1])*t[p*2],t[p*2+1]=y),l--)}},Kj=(n,e,t)=>{let r=new Array(Lh+1),i=0,s,o;for(s=1;s<=Lh;s++)i=i+t[s-1]<<1,r[s]=i;for(o=0;o<=e;o++){let a=n[o*2+1];a!==0&&(n[o*2]=Wj(r[a]++,a))}},Mie=()=>{let n,e,t,r,i,s=new Array(Lh+1);for(t=0,r=0;r<QN-1;r++)for(ZN[r]=t,n=0;n<1<<jN[r];n++)Dv[t++]=r;for(Dv[t-1]=r,i=0,r=0;r<16;r++)for(eE[r]=i,n=0;n<1<<Xb[r];n++)Cv[i++]=r;for(i>>=7;r<eg;r++)for(eE[r]=i<<7,n=0;n<1<<Xb[r]-7;n++)Cv[256+i++]=r;for(e=0;e<=Lh;e++)s[e]=0;for(n=0;n<=143;)Zu[n*2+1]=8,n++,s[8]++;for(;n<=255;)Zu[n*2+1]=9,n++,s[9]++;for(;n<=279;)Zu[n*2+1]=7,n++,s[7]++;for(;n<=287;)Zu[n*2+1]=8,n++,s[8]++;for(Kj(Zu,Sv+1,s),n=0;n<eg;n++)Iv[n*2+1]=5,Iv[n*2]=Wj(n,5);zj=new CN(Zu,jN,Mv+1,Sv,Lh),$j=new CN(Iv,Xb,0,eg,Lh),Hj=new CN(new Array(0),Nie,0,YN,xie)},Qj=n=>{let e;for(e=0;e<Sv;e++)n.dyn_ltree[e*2]=0;for(e=0;e<eg;e++)n.dyn_dtree[e*2]=0;for(e=0;e<YN;e++)n.bl_tree[e*2]=0;n.dyn_ltree[JN*2]=1,n.opt_len=n.static_len=0,n.sym_next=n.matches=0},Yj=n=>{n.bi_valid>8?xv(n,n.bi_buf):n.bi_valid>0&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0},XB=(n,e,t,r)=>{let i=e*2,s=t*2;return n[i]<n[s]||n[i]===n[s]&&r[e]<=r[t]},xN=(n,e,t)=>{let r=n.heap[t],i=t<<1;for(;i<=n.heap_len&&(i<n.heap_len&&XB(e,n.heap[i+1],n.heap[i],n.depth)&&i++,!XB(e,r,n.heap[i],n.depth));)n.heap[t]=n.heap[i],t=i,i<<=1;n.heap[t]=r},ej=(n,e,t)=>{let r,i,s=0,o,a;if(n.sym_next!==0)do r=n.pending_buf[n.sym_buf+s++]&255,r+=(n.pending_buf[n.sym_buf+s++]&255)<<8,i=n.pending_buf[n.sym_buf+s++],r===0?Xc(n,i,e):(o=Dv[i],Xc(n,o+Mv+1,e),a=jN[o],a!==0&&(i-=ZN[o],vo(n,i,a)),r--,o=Gj(r),Xc(n,o,t),a=Xb[o],a!==0&&(r-=eE[o],vo(n,r,a)));while(s<n.sym_next);Xc(n,JN,e)},UN=(n,e)=>{let t=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,s=e.stat_desc.elems,o,a,c=-1,u;for(n.heap_len=0,n.heap_max=Vj,o=0;o<s;o++)t[o*2]!==0?(n.heap[++n.heap_len]=c=o,n.depth[o]=0):t[o*2+1]=0;for(;n.heap_len<2;)u=n.heap[++n.heap_len]=c<2?++c:0,t[u*2]=1,n.depth[u]=0,n.opt_len--,i&&(n.static_len-=r[u*2+1]);for(e.max_code=c,o=n.heap_len>>1;o>=1;o--)xN(n,t,o);u=s;do o=n.heap[1],n.heap[1]=n.heap[n.heap_len--],xN(n,t,1),a=n.heap[1],n.heap[--n.heap_max]=o,n.heap[--n.heap_max]=a,t[u*2]=t[o*2]+t[a*2],n.depth[u]=(n.depth[o]>=n.depth[a]?n.depth[o]:n.depth[a])+1,t[o*2+1]=t[a*2+1]=u,n.heap[1]=u++,xN(n,t,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],kie(n,e),Kj(t,c,n.bl_count)},tj=(n,e,t)=>{let r,i=-1,s,o=e[1],a=0,c=7,u=4;for(o===0&&(c=138,u=3),e[(t+1)*2+1]=65535,r=0;r<=t;r++)s=o,o=e[(r+1)*2+1],!(++a<c&&s===o)&&(a<u?n.bl_tree[s*2]+=a:s!==0?(s!==i&&n.bl_tree[s*2]++,n.bl_tree[Bj*2]++):a<=10?n.bl_tree[jj*2]++:n.bl_tree[Uj*2]++,a=0,i=s,o===0?(c=138,u=3):s===o?(c=6,u=3):(c=7,u=4))},nj=(n,e,t)=>{let r,i=-1,s,o=e[1],a=0,c=7,u=4;for(o===0&&(c=138,u=3),r=0;r<=t;r++)if(s=o,o=e[(r+1)*2+1],!(++a<c&&s===o)){if(a<u)do Xc(n,s,n.bl_tree);while(--a!==0);else s!==0?(s!==i&&(Xc(n,s,n.bl_tree),a--),Xc(n,Bj,n.bl_tree),vo(n,a-3,2)):a<=10?(Xc(n,jj,n.bl_tree),vo(n,a-3,3)):(Xc(n,Uj,n.bl_tree),vo(n,a-11,7));a=0,i=s,o===0?(c=138,u=3):s===o?(c=6,u=3):(c=7,u=4)}},Oie=n=>{let e;for(tj(n,n.dyn_ltree,n.l_desc.max_code),tj(n,n.dyn_dtree,n.d_desc.max_code),UN(n,n.bl_desc),e=YN-1;e>=3&&n.bl_tree[qj[e]*2+1]===0;e--);return n.opt_len+=3*(e+1)+5+5+4,e},Lie=(n,e,t,r)=>{let i;for(vo(n,e-257,5),vo(n,t-1,5),vo(n,r-4,4),i=0;i<r;i++)vo(n,n.bl_tree[qj[i]*2+1],3);nj(n,n.dyn_ltree,e-1),nj(n,n.dyn_dtree,t-1)},Fie=n=>{let e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&n.dyn_ltree[t*2]!==0)return 0;if(n.dyn_ltree[18]!==0||n.dyn_ltree[20]!==0||n.dyn_ltree[26]!==0)return 1;for(t=32;t<Mv;t++)if(n.dyn_ltree[t*2]!==0)return 1;return 0},rj=!1,Vie=n=>{rj||(Mie(),rj=!0),n.l_desc=new DN(n.dyn_ltree,zj),n.d_desc=new DN(n.dyn_dtree,$j),n.bl_desc=new DN(n.bl_tree,Hj),n.bi_buf=0,n.bi_valid=0,Qj(n)},Jj=(n,e,t,r)=>{vo(n,(Aie<<1)+(r?1:0),3),Yj(n),xv(n,t),xv(n,~t),t&&n.pending_buf.set(n.window.subarray(e,e+t),n.pending),n.pending+=t},Bie=n=>{vo(n,Fj<<1,3),Xc(n,JN,Zu),Pie(n)},jie=(n,e,t,r)=>{let i,s,o=0;n.level>0?(n.strm.data_type===2&&(n.strm.data_type=Fie(n)),UN(n,n.l_desc),UN(n,n.d_desc),o=Oie(n),i=n.opt_len+3+7>>>3,s=n.static_len+3+7>>>3,s<=i&&(i=s)):i=s=t+5,t+4<=i&&e!==-1?Jj(n,e,t,r):n.strategy===4||s===i?(vo(n,(Fj<<1)+(r?1:0),3),ej(n,Zu,Iv)):(vo(n,(Sie<<1)+(r?1:0),3),Lie(n,n.l_desc.max_code+1,n.d_desc.max_code+1,o+1),ej(n,n.dyn_ltree,n.dyn_dtree)),Qj(n),r&&Yj(n)},Uie=(n,e,t)=>(n.pending_buf[n.sym_buf+n.sym_next++]=e,n.pending_buf[n.sym_buf+n.sym_next++]=e>>8,n.pending_buf[n.sym_buf+n.sym_next++]=t,e===0?n.dyn_ltree[t*2]++:(n.matches++,e--,n.dyn_ltree[(Dv[t]+Mv+1)*2]++,n.dyn_dtree[Gj(e)*2]++),n.sym_next===n.sym_end),qie=Vie,zie=Jj,$ie=jie,Hie=Uie,Gie=Bie,Wie={_tr_init:qie,_tr_stored_block:zie,_tr_flush_block:$ie,_tr_tally:Hie,_tr_align:Gie},Kie=(n,e,t,r)=>{let i=n&65535|0,s=n>>>16&65535|0,o=0;for(;t!==0;){o=t>2e3?2e3:t,t-=o;do i=i+e[r++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0},Nv=Kie,Qie=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},Yie=new Uint32Array(Qie()),Jie=(n,e,t,r)=>{let i=Yie,s=r+t;n^=-1;for(let o=r;o<s;o++)n=n>>>8^i[(n^e[o])&255];return n^-1},Xi=Jie,Bh={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ig={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:Zie,_tr_stored_block:qN,_tr_flush_block:Xie,_tr_tally:yd,_tr_align:ese}=Wie,{Z_NO_FLUSH:vd,Z_PARTIAL_FLUSH:tse,Z_FULL_FLUSH:nse,Z_FINISH:Ra,Z_BLOCK:ij,Z_OK:ds,Z_STREAM_END:sj,Z_STREAM_ERROR:eu,Z_DATA_ERROR:rse,Z_BUF_ERROR:NN,Z_DEFAULT_COMPRESSION:ise,Z_FILTERED:sse,Z_HUFFMAN_ONLY:Kb,Z_RLE:ose,Z_FIXED:ase,Z_DEFAULT_STRATEGY:cse,Z_UNKNOWN:use,Z_DEFLATED:rE}=ig,lse=9,dse=15,hse=8,fse=29,pse=256,zN=pse+1+fse,gse=30,mse=19,yse=2*zN+1,vse=15,Dn=3,md=258,tu=md+Dn+1,_se=32,tg=42,XN=57,$N=69,HN=73,GN=91,WN=103,Fh=113,bv=666,eo=1,sg=2,jh=3,og=4,wse=3,Vh=(n,e)=>(n.msg=Bh[e],e),oj=n=>n*2-(n>4?9:0),gd=n=>{let e=n.length;for(;--e>=0;)n[e]=0},bse=n=>{let e,t,r,i=n.w_size;e=n.hash_size,r=e;do t=n.head[--r],n.head[r]=t>=i?t-i:0;while(--e);e=i,r=e;do t=n.prev[--r],n.prev[r]=t>=i?t-i:0;while(--e)},Ese=(n,e,t)=>(e<<n.hash_shift^t)&n.hash_mask,_d=Ese,Wo=n=>{let e=n.state,t=e.pending;t>n.avail_out&&(t=n.avail_out),t!==0&&(n.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),n.next_out),n.next_out+=t,e.pending_out+=t,n.total_out+=t,n.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))},Ko=(n,e)=>{Xie(n,n.block_start>=0?n.block_start:-1,n.strstart-n.block_start,e),n.block_start=n.strstart,Wo(n.strm)},Gn=(n,e)=>{n.pending_buf[n.pending++]=e},wv=(n,e)=>{n.pending_buf[n.pending++]=e>>>8&255,n.pending_buf[n.pending++]=e&255},KN=(n,e,t,r)=>{let i=n.avail_in;return i>r&&(i=r),i===0?0:(n.avail_in-=i,e.set(n.input.subarray(n.next_in,n.next_in+i),t),n.state.wrap===1?n.adler=Nv(n.adler,e,i,t):n.state.wrap===2&&(n.adler=Xi(n.adler,e,i,t)),n.next_in+=i,n.total_in+=i,i)},Zj=(n,e)=>{let t=n.max_chain_length,r=n.strstart,i,s,o=n.prev_length,a=n.nice_match,c=n.strstart>n.w_size-tu?n.strstart-(n.w_size-tu):0,u=n.window,l=n.w_mask,p=n.prev,y=n.strstart+md,g=u[r+o-1],D=u[r+o];n.prev_length>=n.good_match&&(t>>=2),a>n.lookahead&&(a=n.lookahead);do if(i=e,!(u[i+o]!==D||u[i+o-1]!==g||u[i]!==u[r]||u[++i]!==u[r+1])){r+=2,i++;do;while(u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&r<y);if(s=md-(y-r),r=y-md,s>o){if(n.match_start=e,o=s,s>=a)break;g=u[r+o-1],D=u[r+o]}}while((e=p[e&l])>c&&--t!==0);return o<=n.lookahead?o:n.lookahead},ng=n=>{let e=n.w_size,t,r,i;do{if(r=n.window_size-n.lookahead-n.strstart,n.strstart>=e+(e-tu)&&(n.window.set(n.window.subarray(e,e+e-r),0),n.match_start-=e,n.strstart-=e,n.block_start-=e,n.insert>n.strstart&&(n.insert=n.strstart),bse(n),r+=e),n.strm.avail_in===0)break;if(t=KN(n.strm,n.window,n.strstart+n.lookahead,r),n.lookahead+=t,n.lookahead+n.insert>=Dn)for(i=n.strstart-n.insert,n.ins_h=n.window[i],n.ins_h=_d(n,n.ins_h,n.window[i+1]);n.insert&&(n.ins_h=_d(n,n.ins_h,n.window[i+Dn-1]),n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,n.insert--,!(n.lookahead+n.insert<Dn)););}while(n.lookahead<tu&&n.strm.avail_in!==0)},Xj=(n,e)=>{let t=n.pending_buf_size-5>n.w_size?n.w_size:n.pending_buf_size-5,r,i,s,o=0,a=n.strm.avail_in;do{if(r=65535,s=n.bi_valid+42>>3,n.strm.avail_out<s||(s=n.strm.avail_out-s,i=n.strstart-n.block_start,r>i+n.strm.avail_in&&(r=i+n.strm.avail_in),r>s&&(r=s),r<t&&(r===0&&e!==Ra||e===vd||r!==i+n.strm.avail_in)))break;o=e===Ra&&r===i+n.strm.avail_in?1:0,qN(n,0,0,o),n.pending_buf[n.pending-4]=r,n.pending_buf[n.pending-3]=r>>8,n.pending_buf[n.pending-2]=~r,n.pending_buf[n.pending-1]=~r>>8,Wo(n.strm),i&&(i>r&&(i=r),n.strm.output.set(n.window.subarray(n.block_start,n.block_start+i),n.strm.next_out),n.strm.next_out+=i,n.strm.avail_out-=i,n.strm.total_out+=i,n.block_start+=i,r-=i),r&&(KN(n.strm,n.strm.output,n.strm.next_out,r),n.strm.next_out+=r,n.strm.avail_out-=r,n.strm.total_out+=r)}while(o===0);return a-=n.strm.avail_in,a&&(a>=n.w_size?(n.matches=2,n.window.set(n.strm.input.subarray(n.strm.next_in-n.w_size,n.strm.next_in),0),n.strstart=n.w_size,n.insert=n.strstart):(n.window_size-n.strstart<=a&&(n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,n.insert>n.strstart&&(n.insert=n.strstart)),n.window.set(n.strm.input.subarray(n.strm.next_in-a,n.strm.next_in),n.strstart),n.strstart+=a,n.insert+=a>n.w_size-n.insert?n.w_size-n.insert:a),n.block_start=n.strstart),n.high_water<n.strstart&&(n.high_water=n.strstart),o?og:e!==vd&&e!==Ra&&n.strm.avail_in===0&&n.strstart===n.block_start?sg:(s=n.window_size-n.strstart,n.strm.avail_in>s&&n.block_start>=n.w_size&&(n.block_start-=n.w_size,n.strstart-=n.w_size,n.window.set(n.window.subarray(n.w_size,n.w_size+n.strstart),0),n.matches<2&&n.matches++,s+=n.w_size,n.insert>n.strstart&&(n.insert=n.strstart)),s>n.strm.avail_in&&(s=n.strm.avail_in),s&&(KN(n.strm,n.window,n.strstart,s),n.strstart+=s,n.insert+=s>n.w_size-n.insert?n.w_size-n.insert:s),n.high_water<n.strstart&&(n.high_water=n.strstart),s=n.bi_valid+42>>3,s=n.pending_buf_size-s>65535?65535:n.pending_buf_size-s,t=s>n.w_size?n.w_size:s,i=n.strstart-n.block_start,(i>=t||(i||e===Ra)&&e!==vd&&n.strm.avail_in===0&&i<=s)&&(r=i>s?s:i,o=e===Ra&&n.strm.avail_in===0&&r===i?1:0,qN(n,n.block_start,r,o),n.block_start+=r,Wo(n.strm)),o?jh:eo)},RN=(n,e)=>{let t,r;for(;;){if(n.lookahead<tu){if(ng(n),n.lookahead<tu&&e===vd)return eo;if(n.lookahead===0)break}if(t=0,n.lookahead>=Dn&&(n.ins_h=_d(n,n.ins_h,n.window[n.strstart+Dn-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),t!==0&&n.strstart-t<=n.w_size-tu&&(n.match_length=Zj(n,t)),n.match_length>=Dn)if(r=yd(n,n.strstart-n.match_start,n.match_length-Dn),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=Dn){n.match_length--;do n.strstart++,n.ins_h=_d(n,n.ins_h,n.window[n.strstart+Dn-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart;while(--n.match_length!==0);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=_d(n,n.ins_h,n.window[n.strstart+1]);else r=yd(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(r&&(Ko(n,!1),n.strm.avail_out===0))return eo}return n.insert=n.strstart<Dn-1?n.strstart:Dn-1,e===Ra?(Ko(n,!0),n.strm.avail_out===0?jh:og):n.sym_next&&(Ko(n,!1),n.strm.avail_out===0)?eo:sg},Zp=(n,e)=>{let t,r,i;for(;;){if(n.lookahead<tu){if(ng(n),n.lookahead<tu&&e===vd)return eo;if(n.lookahead===0)break}if(t=0,n.lookahead>=Dn&&(n.ins_h=_d(n,n.ins_h,n.window[n.strstart+Dn-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=Dn-1,t!==0&&n.prev_length<n.max_lazy_match&&n.strstart-t<=n.w_size-tu&&(n.match_length=Zj(n,t),n.match_length<=5&&(n.strategy===sse||n.match_length===Dn&&n.strstart-n.match_start>4096)&&(n.match_length=Dn-1)),n.prev_length>=Dn&&n.match_length<=n.prev_length){i=n.strstart+n.lookahead-Dn,r=yd(n,n.strstart-1-n.prev_match,n.prev_length-Dn),n.lookahead-=n.prev_length-1,n.prev_length-=2;do++n.strstart<=i&&(n.ins_h=_d(n,n.ins_h,n.window[n.strstart+Dn-1]),t=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart);while(--n.prev_length!==0);if(n.match_available=0,n.match_length=Dn-1,n.strstart++,r&&(Ko(n,!1),n.strm.avail_out===0))return eo}else if(n.match_available){if(r=yd(n,0,n.window[n.strstart-1]),r&&Ko(n,!1),n.strstart++,n.lookahead--,n.strm.avail_out===0)return eo}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(r=yd(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<Dn-1?n.strstart:Dn-1,e===Ra?(Ko(n,!0),n.strm.avail_out===0?jh:og):n.sym_next&&(Ko(n,!1),n.strm.avail_out===0)?eo:sg},Ise=(n,e)=>{let t,r,i,s,o=n.window;for(;;){if(n.lookahead<=md){if(ng(n),n.lookahead<=md&&e===vd)return eo;if(n.lookahead===0)break}if(n.match_length=0,n.lookahead>=Dn&&n.strstart>0&&(i=n.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){s=n.strstart+md;do;while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<s);n.match_length=md-(s-i),n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=Dn?(t=yd(n,1,n.match_length-Dn),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(t=yd(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),t&&(Ko(n,!1),n.strm.avail_out===0))return eo}return n.insert=0,e===Ra?(Ko(n,!0),n.strm.avail_out===0?jh:og):n.sym_next&&(Ko(n,!1),n.strm.avail_out===0)?eo:sg},Tse=(n,e)=>{let t;for(;;){if(n.lookahead===0&&(ng(n),n.lookahead===0)){if(e===vd)return eo;break}if(n.match_length=0,t=yd(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,t&&(Ko(n,!1),n.strm.avail_out===0))return eo}return n.insert=0,e===Ra?(Ko(n,!0),n.strm.avail_out===0?jh:og):n.sym_next&&(Ko(n,!1),n.strm.avail_out===0)?eo:sg};function Zc(n,e,t,r,i){this.good_length=n,this.max_lazy=e,this.nice_length=t,this.max_chain=r,this.func=i}var Ev=[new Zc(0,0,0,0,Xj),new Zc(4,4,8,4,RN),new Zc(4,5,16,8,RN),new Zc(4,6,32,32,RN),new Zc(4,4,16,16,Zp),new Zc(8,16,32,32,Zp),new Zc(8,16,128,128,Zp),new Zc(8,32,128,256,Zp),new Zc(32,128,258,1024,Zp),new Zc(32,258,258,4096,Zp)],Ase=n=>{n.window_size=2*n.w_size,gd(n.head),n.max_lazy_match=Ev[n.level].max_lazy,n.good_match=Ev[n.level].good_length,n.nice_match=Ev[n.level].nice_length,n.max_chain_length=Ev[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=Dn-1,n.match_available=0,n.ins_h=0};function Sse(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=rE,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(yse*2),this.dyn_dtree=new Uint16Array((2*gse+1)*2),this.bl_tree=new Uint16Array((2*mse+1)*2),gd(this.dyn_ltree),gd(this.dyn_dtree),gd(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(vse+1),this.heap=new Uint16Array(2*zN+1),gd(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*zN+1),gd(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Ov=n=>{if(!n)return 1;let e=n.state;return!e||e.strm!==n||e.status!==tg&&e.status!==XN&&e.status!==$N&&e.status!==HN&&e.status!==GN&&e.status!==WN&&e.status!==Fh&&e.status!==bv?1:0},eU=n=>{if(Ov(n))return Vh(n,eu);n.total_in=n.total_out=0,n.data_type=use;let e=n.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?XN:e.wrap?tg:Fh,n.adler=e.wrap===2?0:1,e.last_flush=-2,Zie(e),ds},tU=n=>{let e=eU(n);return e===ds&&Ase(n.state),e},Cse=(n,e)=>Ov(n)||n.state.wrap!==2?eu:(n.state.gzhead=e,ds),nU=(n,e,t,r,i,s)=>{if(!n)return eu;let o=1;if(e===ise&&(e=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>lse||t!==rE||r<8||r>15||e<0||e>9||s<0||s>ase||r===8&&o!==1)return Vh(n,eu);r===8&&(r=9);let a=new Sse;return n.state=a,a.strm=n,a.status=tg,a.wrap=o,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Dn-1)/Dn),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=e,a.strategy=s,a.method=t,tU(n)},Dse=(n,e)=>nU(n,e,rE,dse,hse,cse),xse=(n,e)=>{if(Ov(n)||e>ij||e<0)return n?Vh(n,eu):eu;let t=n.state;if(!n.output||n.avail_in!==0&&!n.input||t.status===bv&&e!==Ra)return Vh(n,n.avail_out===0?NN:eu);let r=t.last_flush;if(t.last_flush=e,t.pending!==0){if(Wo(n),n.avail_out===0)return t.last_flush=-1,ds}else if(n.avail_in===0&&oj(e)<=oj(r)&&e!==Ra)return Vh(n,NN);if(t.status===bv&&n.avail_in!==0)return Vh(n,NN);if(t.status===tg&&t.wrap===0&&(t.status=Fh),t.status===tg){let i=rE+(t.w_bits-8<<4)<<8,s=-1;if(t.strategy>=Kb||t.level<2?s=0:t.level<6?s=1:t.level===6?s=2:s=3,i|=s<<6,t.strstart!==0&&(i|=_se),i+=31-i%31,wv(t,i),t.strstart!==0&&(wv(t,n.adler>>>16),wv(t,n.adler&65535)),n.adler=1,t.status=Fh,Wo(n),t.pending!==0)return t.last_flush=-1,ds}if(t.status===XN){if(n.adler=0,Gn(t,31),Gn(t,139),Gn(t,8),t.gzhead)Gn(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),Gn(t,t.gzhead.time&255),Gn(t,t.gzhead.time>>8&255),Gn(t,t.gzhead.time>>16&255),Gn(t,t.gzhead.time>>24&255),Gn(t,t.level===9?2:t.strategy>=Kb||t.level<2?4:0),Gn(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(Gn(t,t.gzhead.extra.length&255),Gn(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(n.adler=Xi(n.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=$N;else if(Gn(t,0),Gn(t,0),Gn(t,0),Gn(t,0),Gn(t,0),Gn(t,t.level===9?2:t.strategy>=Kb||t.level<2?4:0),Gn(t,wse),t.status=Fh,Wo(n),t.pending!==0)return t.last_flush=-1,ds}if(t.status===$N){if(t.gzhead.extra){let i=t.pending,s=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+s>t.pending_buf_size;){let a=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>i&&(n.adler=Xi(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex+=a,Wo(n),t.pending!==0)return t.last_flush=-1,ds;i=0,s-=a}let o=new Uint8Array(t.gzhead.extra);t.pending_buf.set(o.subarray(t.gzindex,t.gzindex+s),t.pending),t.pending+=s,t.gzhead.hcrc&&t.pending>i&&(n.adler=Xi(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=HN}if(t.status===HN){if(t.gzhead.name){let i=t.pending,s;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(n.adler=Xi(n.adler,t.pending_buf,t.pending-i,i)),Wo(n),t.pending!==0)return t.last_flush=-1,ds;i=0}t.gzindex<t.gzhead.name.length?s=t.gzhead.name.charCodeAt(t.gzindex++)&255:s=0,Gn(t,s)}while(s!==0);t.gzhead.hcrc&&t.pending>i&&(n.adler=Xi(n.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=GN}if(t.status===GN){if(t.gzhead.comment){let i=t.pending,s;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(n.adler=Xi(n.adler,t.pending_buf,t.pending-i,i)),Wo(n),t.pending!==0)return t.last_flush=-1,ds;i=0}t.gzindex<t.gzhead.comment.length?s=t.gzhead.comment.charCodeAt(t.gzindex++)&255:s=0,Gn(t,s)}while(s!==0);t.gzhead.hcrc&&t.pending>i&&(n.adler=Xi(n.adler,t.pending_buf,t.pending-i,i))}t.status=WN}if(t.status===WN){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(Wo(n),t.pending!==0))return t.last_flush=-1,ds;Gn(t,n.adler&255),Gn(t,n.adler>>8&255),n.adler=0}if(t.status=Fh,Wo(n),t.pending!==0)return t.last_flush=-1,ds}if(n.avail_in!==0||t.lookahead!==0||e!==vd&&t.status!==bv){let i=t.level===0?Xj(t,e):t.strategy===Kb?Tse(t,e):t.strategy===ose?Ise(t,e):Ev[t.level].func(t,e);if((i===jh||i===og)&&(t.status=bv),i===eo||i===jh)return n.avail_out===0&&(t.last_flush=-1),ds;if(i===sg&&(e===tse?ese(t):e!==ij&&(qN(t,0,0,!1),e===nse&&(gd(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),Wo(n),n.avail_out===0))return t.last_flush=-1,ds}return e!==Ra?ds:t.wrap<=0?sj:(t.wrap===2?(Gn(t,n.adler&255),Gn(t,n.adler>>8&255),Gn(t,n.adler>>16&255),Gn(t,n.adler>>24&255),Gn(t,n.total_in&255),Gn(t,n.total_in>>8&255),Gn(t,n.total_in>>16&255),Gn(t,n.total_in>>24&255)):(wv(t,n.adler>>>16),wv(t,n.adler&65535)),Wo(n),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?ds:sj)},Nse=n=>{if(Ov(n))return eu;let e=n.state.status;return n.state=null,e===Fh?Vh(n,rse):ds},Rse=(n,e)=>{let t=e.length;if(Ov(n))return eu;let r=n.state,i=r.wrap;if(i===2||i===1&&r.status!==tg||r.lookahead)return eu;if(i===1&&(n.adler=Nv(n.adler,e,t,0)),r.wrap=0,t>=r.w_size){i===0&&(gd(r.head),r.strstart=0,r.block_start=0,r.insert=0);let c=new Uint8Array(r.w_size);c.set(e.subarray(t-r.w_size,t),0),e=c,t=r.w_size}let s=n.avail_in,o=n.next_in,a=n.input;for(n.avail_in=t,n.next_in=0,n.input=e,ng(r);r.lookahead>=Dn;){let c=r.strstart,u=r.lookahead-(Dn-1);do r.ins_h=_d(r,r.ins_h,r.window[c+Dn-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++;while(--u);r.strstart=c,r.lookahead=Dn-1,ng(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=Dn-1,r.match_available=0,n.next_in=o,n.input=a,n.avail_in=s,r.wrap=i,ds},Pse=Dse,kse=nU,Mse=tU,Ose=eU,Lse=Cse,Fse=xse,Vse=Nse,Bse=Rse,jse="pako deflate (from Nodeca project)",Tv={deflateInit:Pse,deflateInit2:kse,deflateReset:Mse,deflateResetKeep:Ose,deflateSetHeader:Lse,deflate:Fse,deflateEnd:Vse,deflateSetDictionary:Bse,deflateInfo:jse},Use=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),qse=function(n){let e=Array.prototype.slice.call(arguments,1);for(;e.length;){let t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(let r in t)Use(t,r)&&(n[r]=t[r])}}return n},zse=n=>{let e=0;for(let r=0,i=n.length;r<i;r++)e+=n[r].length;let t=new Uint8Array(e);for(let r=0,i=0,s=n.length;r<s;r++){let o=n[r];t.set(o,i),i+=o.length}return t},iE={assign:qse,flattenChunks:zse},rU=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{rU=!1}var Rv=new Uint8Array(256);for(let n=0;n<256;n++)Rv[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;Rv[254]=Rv[254]=1;var $se=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,r,i,s,o=n.length,a=0;for(i=0;i<o;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<o&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(a),s=0,i=0;s<a;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<o&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?e[s++]=t:t<2048?(e[s++]=192|t>>>6,e[s++]=128|t&63):t<65536?(e[s++]=224|t>>>12,e[s++]=128|t>>>6&63,e[s++]=128|t&63):(e[s++]=240|t>>>18,e[s++]=128|t>>>12&63,e[s++]=128|t>>>6&63,e[s++]=128|t&63);return e},Hse=(n,e)=>{if(e<65534&&n.subarray&&rU)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t},Gse=(n,e)=>{let t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let r,i,s=new Array(t*2);for(i=0,r=0;r<t;){let o=n[r++];if(o<128){s[i++]=o;continue}let a=Rv[o];if(a>4){s[i++]=65533,r+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&r<t;)o=o<<6|n[r++]&63,a--;if(a>1){s[i++]=65533;continue}o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|o&1023)}return Hse(s,i)},Wse=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+Rv[n[t]]>e?t:e},Pv={string2buf:$se,buf2string:Gse,utf8border:Wse};function Kse(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var iU=Kse,sU=Object.prototype.toString,{Z_NO_FLUSH:Qse,Z_SYNC_FLUSH:Yse,Z_FULL_FLUSH:Jse,Z_FINISH:Zse,Z_OK:tE,Z_STREAM_END:Xse,Z_DEFAULT_COMPRESSION:eoe,Z_DEFAULT_STRATEGY:toe,Z_DEFLATED:noe}=ig;function Lv(n){this.options=iE.assign({level:eoe,method:noe,chunkSize:16384,windowBits:15,memLevel:8,strategy:toe},n||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new iU,this.strm.avail_out=0;let t=Tv.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==tE)throw new Error(Bh[t]);if(e.header&&Tv.deflateSetHeader(this.strm,e.header),e.dictionary){let r;if(typeof e.dictionary=="string"?r=Pv.string2buf(e.dictionary):sU.call(e.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(e.dictionary):r=e.dictionary,t=Tv.deflateSetDictionary(this.strm,r),t!==tE)throw new Error(Bh[t]);this._dict_set=!0}}Lv.prototype.push=function(n,e){let t=this.strm,r=this.options.chunkSize,i,s;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?Zse:Qse,typeof n=="string"?t.input=Pv.string2buf(n):sU.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),(s===Yse||s===Jse)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(i=Tv.deflate(t,s),i===Xse)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),i=Tv.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===tE;if(t.avail_out===0){this.onData(t.output);continue}if(s>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};Lv.prototype.onData=function(n){this.chunks.push(n)};Lv.prototype.onEnd=function(n){n===tE&&(this.result=iE.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function eR(n,e){let t=new Lv(e);if(t.push(n,!0),t.err)throw t.msg||Bh[t.err];return t.result}function roe(n,e){return e=e||{},e.raw=!0,eR(n,e)}function ioe(n,e){return e=e||{},e.gzip=!0,eR(n,e)}var soe=Lv,ooe=eR,aoe=roe,coe=ioe,uoe=ig,loe={Deflate:soe,deflate:ooe,deflateRaw:aoe,gzip:coe,constants:uoe},Qb=16209,doe=16191,hoe=function(e,t){let r,i,s,o,a,c,u,l,p,y,g,D,M,k,O,G,W,K,ue,fe,P,T,w,x,_=e.state;r=e.next_in,w=e.input,i=r+(e.avail_in-5),s=e.next_out,x=e.output,o=s-(t-e.avail_out),a=s+(e.avail_out-257),c=_.dmax,u=_.wsize,l=_.whave,p=_.wnext,y=_.window,g=_.hold,D=_.bits,M=_.lencode,k=_.distcode,O=(1<<_.lenbits)-1,G=(1<<_.distbits)-1;e:do{D<15&&(g+=w[r++]<<D,D+=8,g+=w[r++]<<D,D+=8),W=M[g&O];t:for(;;){if(K=W>>>24,g>>>=K,D-=K,K=W>>>16&255,K===0)x[s++]=W&65535;else if(K&16){ue=W&65535,K&=15,K&&(D<K&&(g+=w[r++]<<D,D+=8),ue+=g&(1<<K)-1,g>>>=K,D-=K),D<15&&(g+=w[r++]<<D,D+=8,g+=w[r++]<<D,D+=8),W=k[g&G];n:for(;;){if(K=W>>>24,g>>>=K,D-=K,K=W>>>16&255,K&16){if(fe=W&65535,K&=15,D<K&&(g+=w[r++]<<D,D+=8,D<K&&(g+=w[r++]<<D,D+=8)),fe+=g&(1<<K)-1,fe>c){e.msg="invalid distance too far back",_.mode=Qb;break e}if(g>>>=K,D-=K,K=s-o,fe>K){if(K=fe-K,K>l&&_.sane){e.msg="invalid distance too far back",_.mode=Qb;break e}if(P=0,T=y,p===0){if(P+=u-K,K<ue){ue-=K;do x[s++]=y[P++];while(--K);P=s-fe,T=x}}else if(p<K){if(P+=u+p-K,K-=p,K<ue){ue-=K;do x[s++]=y[P++];while(--K);if(P=0,p<ue){K=p,ue-=K;do x[s++]=y[P++];while(--K);P=s-fe,T=x}}}else if(P+=p-K,K<ue){ue-=K;do x[s++]=y[P++];while(--K);P=s-fe,T=x}for(;ue>2;)x[s++]=T[P++],x[s++]=T[P++],x[s++]=T[P++],ue-=3;ue&&(x[s++]=T[P++],ue>1&&(x[s++]=T[P++]))}else{P=s-fe;do x[s++]=x[P++],x[s++]=x[P++],x[s++]=x[P++],ue-=3;while(ue>2);ue&&(x[s++]=x[P++],ue>1&&(x[s++]=x[P++]))}}else if((K&64)===0){W=k[(W&65535)+(g&(1<<K)-1)];continue n}else{e.msg="invalid distance code",_.mode=Qb;break e}break}}else if((K&64)===0){W=M[(W&65535)+(g&(1<<K)-1)];continue t}else if(K&32){_.mode=doe;break e}else{e.msg="invalid literal/length code",_.mode=Qb;break e}break}}while(r<i&&s<a);ue=D>>3,r-=ue,D-=ue<<3,g&=(1<<D)-1,e.next_in=r,e.next_out=s,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=s<a?257+(a-s):257-(s-a),_.hold=g,_.bits=D},Xp=15,aj=852,cj=592,uj=0,PN=1,lj=2,foe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),poe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),goe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),moe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),yoe=(n,e,t,r,i,s,o,a)=>{let c=a.bits,u=0,l=0,p=0,y=0,g=0,D=0,M=0,k=0,O=0,G=0,W,K,ue,fe,P,T=null,w,x=new Uint16Array(Xp+1),_=new Uint16Array(Xp+1),S=null,I,ee,ye;for(u=0;u<=Xp;u++)x[u]=0;for(l=0;l<r;l++)x[e[t+l]]++;for(g=c,y=Xp;y>=1&&x[y]===0;y--);if(g>y&&(g=y),y===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,a.bits=1,0;for(p=1;p<y&&x[p]===0;p++);for(g<p&&(g=p),k=1,u=1;u<=Xp;u++)if(k<<=1,k-=x[u],k<0)return-1;if(k>0&&(n===uj||y!==1))return-1;for(_[1]=0,u=1;u<Xp;u++)_[u+1]=_[u]+x[u];for(l=0;l<r;l++)e[t+l]!==0&&(o[_[e[t+l]]++]=l);if(n===uj?(T=S=o,w=20):n===PN?(T=foe,S=poe,w=257):(T=goe,S=moe,w=0),G=0,l=0,u=p,P=s,D=g,M=0,ue=-1,O=1<<g,fe=O-1,n===PN&&O>aj||n===lj&&O>cj)return 1;for(;;){I=u-M,o[l]+1<w?(ee=0,ye=o[l]):o[l]>=w?(ee=S[o[l]-w],ye=T[o[l]-w]):(ee=96,ye=0),W=1<<u-M,K=1<<D,p=K;do K-=W,i[P+(G>>M)+K]=I<<24|ee<<16|ye|0;while(K!==0);for(W=1<<u-1;G&W;)W>>=1;if(W!==0?(G&=W-1,G+=W):G=0,l++,--x[u]===0){if(u===y)break;u=e[t+o[l]]}if(u>g&&(G&fe)!==ue){for(M===0&&(M=g),P+=p,D=u-M,k=1<<D;D+M<y&&(k-=x[D+M],!(k<=0));)D++,k<<=1;if(O+=1<<D,n===PN&&O>aj||n===lj&&O>cj)return 1;ue=G&fe,i[ue]=g<<24|D<<16|P-s|0}}return G!==0&&(i[P+G]=u-M<<24|64<<16|0),a.bits=g,0},Av=yoe,voe=0,oU=1,aU=2,{Z_FINISH:dj,Z_BLOCK:_oe,Z_TREES:Yb,Z_OK:Uh,Z_STREAM_END:woe,Z_NEED_DICT:boe,Z_STREAM_ERROR:Pa,Z_DATA_ERROR:cU,Z_MEM_ERROR:uU,Z_BUF_ERROR:Eoe,Z_DEFLATED:hj}=ig,sE=16180,fj=16181,pj=16182,gj=16183,mj=16184,yj=16185,vj=16186,_j=16187,wj=16188,bj=16189,nE=16190,Ju=16191,kN=16192,Ej=16193,MN=16194,Ij=16195,Tj=16196,Aj=16197,Sj=16198,Jb=16199,Zb=16200,Cj=16201,Dj=16202,xj=16203,Nj=16204,Rj=16205,ON=16206,Pj=16207,kj=16208,Nr=16209,lU=16210,dU=16211,Ioe=852,Toe=592,Aoe=15,Soe=Aoe,Mj=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function Coe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var qh=n=>{if(!n)return 1;let e=n.state;return!e||e.strm!==n||e.mode<sE||e.mode>dU?1:0},hU=n=>{if(qh(n))return Pa;let e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=sE,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(Ioe),e.distcode=e.distdyn=new Int32Array(Toe),e.sane=1,e.back=-1,Uh},fU=n=>{if(qh(n))return Pa;let e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,hU(n)},pU=(n,e)=>{let t;if(qh(n))return Pa;let r=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Pa:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,fU(n))},gU=(n,e)=>{if(!n)return Pa;let t=new Coe;n.state=t,t.strm=n,t.window=null,t.mode=sE;let r=pU(n,e);return r!==Uh&&(n.state=null),r},Doe=n=>gU(n,Soe),Oj=!0,LN,FN,xoe=n=>{if(Oj){LN=new Int32Array(512),FN=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(Av(oU,n.lens,0,288,LN,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;Av(aU,n.lens,0,32,FN,0,n.work,{bits:5}),Oj=!1}n.lencode=LN,n.lenbits=9,n.distcode=FN,n.distbits=5},mU=(n,e,t,r)=>{let i,s=n.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(e.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(e.subarray(t-r,t-r+i),s.wnext),r-=i,r?(s.window.set(e.subarray(t-r,t),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},Noe=(n,e)=>{let t,r,i,s,o,a,c,u,l,p,y,g,D,M,k=0,O,G,W,K,ue,fe,P,T,w=new Uint8Array(4),x,_,S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(qh(n)||!n.output||!n.input&&n.avail_in!==0)return Pa;t=n.state,t.mode===Ju&&(t.mode=kN),o=n.next_out,i=n.output,c=n.avail_out,s=n.next_in,r=n.input,a=n.avail_in,u=t.hold,l=t.bits,p=a,y=c,T=Uh;e:for(;;)switch(t.mode){case sE:if(t.wrap===0){t.mode=kN;break}for(;l<16;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}if(t.wrap&2&&u===35615){t.wbits===0&&(t.wbits=15),t.check=0,w[0]=u&255,w[1]=u>>>8&255,t.check=Xi(t.check,w,2,0),u=0,l=0,t.mode=fj;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((u&255)<<8)+(u>>8))%31){n.msg="incorrect header check",t.mode=Nr;break}if((u&15)!==hj){n.msg="unknown compression method",t.mode=Nr;break}if(u>>>=4,l-=4,P=(u&15)+8,t.wbits===0&&(t.wbits=P),P>15||P>t.wbits){n.msg="invalid window size",t.mode=Nr;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=u&512?bj:Ju,u=0,l=0;break;case fj:for(;l<16;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}if(t.flags=u,(t.flags&255)!==hj){n.msg="unknown compression method",t.mode=Nr;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=Nr;break}t.head&&(t.head.text=u>>8&1),t.flags&512&&t.wrap&4&&(w[0]=u&255,w[1]=u>>>8&255,t.check=Xi(t.check,w,2,0)),u=0,l=0,t.mode=pj;case pj:for(;l<32;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}t.head&&(t.head.time=u),t.flags&512&&t.wrap&4&&(w[0]=u&255,w[1]=u>>>8&255,w[2]=u>>>16&255,w[3]=u>>>24&255,t.check=Xi(t.check,w,4,0)),u=0,l=0,t.mode=gj;case gj:for(;l<16;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}t.head&&(t.head.xflags=u&255,t.head.os=u>>8),t.flags&512&&t.wrap&4&&(w[0]=u&255,w[1]=u>>>8&255,t.check=Xi(t.check,w,2,0)),u=0,l=0,t.mode=mj;case mj:if(t.flags&1024){for(;l<16;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}t.length=u,t.head&&(t.head.extra_len=u),t.flags&512&&t.wrap&4&&(w[0]=u&255,w[1]=u>>>8&255,t.check=Xi(t.check,w,2,0)),u=0,l=0}else t.head&&(t.head.extra=null);t.mode=yj;case yj:if(t.flags&1024&&(g=t.length,g>a&&(g=a),g&&(t.head&&(P=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(s,s+g),P)),t.flags&512&&t.wrap&4&&(t.check=Xi(t.check,r,g,s)),a-=g,s+=g,t.length-=g),t.length))break e;t.length=0,t.mode=vj;case vj:if(t.flags&2048){if(a===0)break e;g=0;do P=r[s+g++],t.head&&P&&t.length<65536&&(t.head.name+=String.fromCharCode(P));while(P&&g<a);if(t.flags&512&&t.wrap&4&&(t.check=Xi(t.check,r,g,s)),a-=g,s+=g,P)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=_j;case _j:if(t.flags&4096){if(a===0)break e;g=0;do P=r[s+g++],t.head&&P&&t.length<65536&&(t.head.comment+=String.fromCharCode(P));while(P&&g<a);if(t.flags&512&&t.wrap&4&&(t.check=Xi(t.check,r,g,s)),a-=g,s+=g,P)break e}else t.head&&(t.head.comment=null);t.mode=wj;case wj:if(t.flags&512){for(;l<16;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}if(t.wrap&4&&u!==(t.check&65535)){n.msg="header crc mismatch",t.mode=Nr;break}u=0,l=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=Ju;break;case bj:for(;l<32;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}n.adler=t.check=Mj(u),u=0,l=0,t.mode=nE;case nE:if(t.havedict===0)return n.next_out=o,n.avail_out=c,n.next_in=s,n.avail_in=a,t.hold=u,t.bits=l,boe;n.adler=t.check=1,t.mode=Ju;case Ju:if(e===_oe||e===Yb)break e;case kN:if(t.last){u>>>=l&7,l-=l&7,t.mode=ON;break}for(;l<3;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}switch(t.last=u&1,u>>>=1,l-=1,u&3){case 0:t.mode=Ej;break;case 1:if(xoe(t),t.mode=Jb,e===Yb){u>>>=2,l-=2;break e}break;case 2:t.mode=Tj;break;case 3:n.msg="invalid block type",t.mode=Nr}u>>>=2,l-=2;break;case Ej:for(u>>>=l&7,l-=l&7;l<32;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}if((u&65535)!==(u>>>16^65535)){n.msg="invalid stored block lengths",t.mode=Nr;break}if(t.length=u&65535,u=0,l=0,t.mode=MN,e===Yb)break e;case MN:t.mode=Ij;case Ij:if(g=t.length,g){if(g>a&&(g=a),g>c&&(g=c),g===0)break e;i.set(r.subarray(s,s+g),o),a-=g,s+=g,c-=g,o+=g,t.length-=g;break}t.mode=Ju;break;case Tj:for(;l<14;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}if(t.nlen=(u&31)+257,u>>>=5,l-=5,t.ndist=(u&31)+1,u>>>=5,l-=5,t.ncode=(u&15)+4,u>>>=4,l-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=Nr;break}t.have=0,t.mode=Aj;case Aj:for(;t.have<t.ncode;){for(;l<3;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}t.lens[S[t.have++]]=u&7,u>>>=3,l-=3}for(;t.have<19;)t.lens[S[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,x={bits:t.lenbits},T=Av(voe,t.lens,0,19,t.lencode,0,t.work,x),t.lenbits=x.bits,T){n.msg="invalid code lengths set",t.mode=Nr;break}t.have=0,t.mode=Sj;case Sj:for(;t.have<t.nlen+t.ndist;){for(;k=t.lencode[u&(1<<t.lenbits)-1],O=k>>>24,G=k>>>16&255,W=k&65535,!(O<=l);){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}if(W<16)u>>>=O,l-=O,t.lens[t.have++]=W;else{if(W===16){for(_=O+2;l<_;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}if(u>>>=O,l-=O,t.have===0){n.msg="invalid bit length repeat",t.mode=Nr;break}P=t.lens[t.have-1],g=3+(u&3),u>>>=2,l-=2}else if(W===17){for(_=O+3;l<_;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}u>>>=O,l-=O,P=0,g=3+(u&7),u>>>=3,l-=3}else{for(_=O+7;l<_;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}u>>>=O,l-=O,P=0,g=11+(u&127),u>>>=7,l-=7}if(t.have+g>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=Nr;break}for(;g--;)t.lens[t.have++]=P}}if(t.mode===Nr)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=Nr;break}if(t.lenbits=9,x={bits:t.lenbits},T=Av(oU,t.lens,0,t.nlen,t.lencode,0,t.work,x),t.lenbits=x.bits,T){n.msg="invalid literal/lengths set",t.mode=Nr;break}if(t.distbits=6,t.distcode=t.distdyn,x={bits:t.distbits},T=Av(aU,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,x),t.distbits=x.bits,T){n.msg="invalid distances set",t.mode=Nr;break}if(t.mode=Jb,e===Yb)break e;case Jb:t.mode=Zb;case Zb:if(a>=6&&c>=258){n.next_out=o,n.avail_out=c,n.next_in=s,n.avail_in=a,t.hold=u,t.bits=l,hoe(n,y),o=n.next_out,i=n.output,c=n.avail_out,s=n.next_in,r=n.input,a=n.avail_in,u=t.hold,l=t.bits,t.mode===Ju&&(t.back=-1);break}for(t.back=0;k=t.lencode[u&(1<<t.lenbits)-1],O=k>>>24,G=k>>>16&255,W=k&65535,!(O<=l);){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}if(G&&(G&240)===0){for(K=O,ue=G,fe=W;k=t.lencode[fe+((u&(1<<K+ue)-1)>>K)],O=k>>>24,G=k>>>16&255,W=k&65535,!(K+O<=l);){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}u>>>=K,l-=K,t.back+=K}if(u>>>=O,l-=O,t.back+=O,t.length=W,G===0){t.mode=Rj;break}if(G&32){t.back=-1,t.mode=Ju;break}if(G&64){n.msg="invalid literal/length code",t.mode=Nr;break}t.extra=G&15,t.mode=Cj;case Cj:if(t.extra){for(_=t.extra;l<_;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}t.length+=u&(1<<t.extra)-1,u>>>=t.extra,l-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Dj;case Dj:for(;k=t.distcode[u&(1<<t.distbits)-1],O=k>>>24,G=k>>>16&255,W=k&65535,!(O<=l);){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}if((G&240)===0){for(K=O,ue=G,fe=W;k=t.distcode[fe+((u&(1<<K+ue)-1)>>K)],O=k>>>24,G=k>>>16&255,W=k&65535,!(K+O<=l);){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}u>>>=K,l-=K,t.back+=K}if(u>>>=O,l-=O,t.back+=O,G&64){n.msg="invalid distance code",t.mode=Nr;break}t.offset=W,t.extra=G&15,t.mode=xj;case xj:if(t.extra){for(_=t.extra;l<_;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}t.offset+=u&(1<<t.extra)-1,u>>>=t.extra,l-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=Nr;break}t.mode=Nj;case Nj:if(c===0)break e;if(g=y-c,t.offset>g){if(g=t.offset-g,g>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=Nr;break}g>t.wnext?(g-=t.wnext,D=t.wsize-g):D=t.wnext-g,g>t.length&&(g=t.length),M=t.window}else M=i,D=o-t.offset,g=t.length;g>c&&(g=c),c-=g,t.length-=g;do i[o++]=M[D++];while(--g);t.length===0&&(t.mode=Zb);break;case Rj:if(c===0)break e;i[o++]=t.length,c--,t.mode=Zb;break;case ON:if(t.wrap){for(;l<32;){if(a===0)break e;a--,u|=r[s++]<<l,l+=8}if(y-=c,n.total_out+=y,t.total+=y,t.wrap&4&&y&&(n.adler=t.check=t.flags?Xi(t.check,i,y,o-y):Nv(t.check,i,y,o-y)),y=c,t.wrap&4&&(t.flags?u:Mj(u))!==t.check){n.msg="incorrect data check",t.mode=Nr;break}u=0,l=0}t.mode=Pj;case Pj:if(t.wrap&&t.flags){for(;l<32;){if(a===0)break e;a--,u+=r[s++]<<l,l+=8}if(t.wrap&4&&u!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=Nr;break}u=0,l=0}t.mode=kj;case kj:T=woe;break e;case Nr:T=cU;break e;case lU:return uU;case dU:default:return Pa}return n.next_out=o,n.avail_out=c,n.next_in=s,n.avail_in=a,t.hold=u,t.bits=l,(t.wsize||y!==n.avail_out&&t.mode<Nr&&(t.mode<ON||e!==dj))&&mU(n,n.output,n.next_out,y-n.avail_out),p-=n.avail_in,y-=n.avail_out,n.total_in+=p,n.total_out+=y,t.total+=y,t.wrap&4&&y&&(n.adler=t.check=t.flags?Xi(t.check,i,y,n.next_out-y):Nv(t.check,i,y,n.next_out-y)),n.data_type=t.bits+(t.last?64:0)+(t.mode===Ju?128:0)+(t.mode===Jb||t.mode===MN?256:0),(p===0&&y===0||e===dj)&&T===Uh&&(T=Eoe),T},Roe=n=>{if(qh(n))return Pa;let e=n.state;return e.window&&(e.window=null),n.state=null,Uh},Poe=(n,e)=>{if(qh(n))return Pa;let t=n.state;return(t.wrap&2)===0?Pa:(t.head=e,e.done=!1,Uh)},koe=(n,e)=>{let t=e.length,r,i,s;return qh(n)||(r=n.state,r.wrap!==0&&r.mode!==nE)?Pa:r.mode===nE&&(i=1,i=Nv(i,e,t,0),i!==r.check)?cU:(s=mU(n,e,t,t),s?(r.mode=lU,uU):(r.havedict=1,Uh))},Moe=fU,Ooe=pU,Loe=hU,Foe=Doe,Voe=gU,Boe=Noe,joe=Roe,Uoe=Poe,qoe=koe,zoe="pako inflate (from Nodeca project)",Xu={inflateReset:Moe,inflateReset2:Ooe,inflateResetKeep:Loe,inflateInit:Foe,inflateInit2:Voe,inflate:Boe,inflateEnd:joe,inflateGetHeader:Uoe,inflateSetDictionary:qoe,inflateInfo:zoe};function $oe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Hoe=$oe,yU=Object.prototype.toString,{Z_NO_FLUSH:Goe,Z_FINISH:Woe,Z_OK:kv,Z_STREAM_END:VN,Z_NEED_DICT:BN,Z_STREAM_ERROR:Koe,Z_DATA_ERROR:Lj,Z_MEM_ERROR:Qoe}=ig;function Fv(n){this.options=iE.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});let e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new iU,this.strm.avail_out=0;let t=Xu.inflateInit2(this.strm,e.windowBits);if(t!==kv)throw new Error(Bh[t]);if(this.header=new Hoe,Xu.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Pv.string2buf(e.dictionary):yU.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Xu.inflateSetDictionary(this.strm,e.dictionary),t!==kv)))throw new Error(Bh[t])}Fv.prototype.push=function(n,e){let t=this.strm,r=this.options.chunkSize,i=this.options.dictionary,s,o,a;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?Woe:Goe,yU.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),s=Xu.inflate(t,o),s===BN&&i&&(s=Xu.inflateSetDictionary(t,i),s===kv?s=Xu.inflate(t,o):s===Lj&&(s=BN));t.avail_in>0&&s===VN&&t.state.wrap>0&&n[t.next_in]!==0;)Xu.inflateReset(t),s=Xu.inflate(t,o);switch(s){case Koe:case Lj:case BN:case Qoe:return this.onEnd(s),this.ended=!0,!1}if(a=t.avail_out,t.next_out&&(t.avail_out===0||s===VN))if(this.options.to==="string"){let c=Pv.utf8border(t.output,t.next_out),u=t.next_out-c,l=Pv.buf2string(t.output,c);t.next_out=u,t.avail_out=r-u,u&&t.output.set(t.output.subarray(c,c+u),0),this.onData(l)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(s===kv&&a===0)){if(s===VN)return s=Xu.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Fv.prototype.onData=function(n){this.chunks.push(n)};Fv.prototype.onEnd=function(n){n===kv&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=iE.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function tR(n,e){let t=new Fv(e);if(t.push(n),t.err)throw t.msg||Bh[t.err];return t.result}function Yoe(n,e){return e=e||{},e.raw=!0,tR(n,e)}var Joe=Fv,Zoe=tR,Xoe=Yoe,eae=tR,tae=ig,nae={Inflate:Joe,inflate:Zoe,inflateRaw:Xoe,ungzip:eae,constants:tae},{Deflate:iNe,deflate:sNe,deflateRaw:oNe,gzip:aNe}=loe,{Inflate:rae,inflate:iae,inflateRaw:cNe,ungzip:uNe}=nae;var nR=rae,vU=iae;var wU=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;wU[n]=e}var _U=4294967295;function sae(n,e,t){let r=n;for(let i=0;i<t;i++)r=wU[(r^e[i])&255]^r>>>8;return r}function oae(n,e){return(sae(_U,n,e)^_U)>>>0}function rR(n,e,t){let r=n.readUint32(),i=oae(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${t}. Expected ${r}, found ${i}`)}function oE(n,e,t){for(let r=0;r<t;r++)e[r]=n[r]}function aE(n,e,t,r){let i=0;for(;i<r;i++)e[i]=n[i];for(;i<t;i++)e[i]=n[i]+e[i-r]&255}function cE(n,e,t,r){let i=0;if(t.length===0)for(;i<r;i++)e[i]=n[i];else for(;i<r;i++)e[i]=n[i]+t[i]&255}function uE(n,e,t,r,i){let s=0;if(t.length===0){for(;s<i;s++)e[s]=n[s];for(;s<r;s++)e[s]=n[s]+(e[s-i]>>1)&255}else{for(;s<i;s++)e[s]=n[s]+(t[s]>>1)&255;for(;s<r;s++)e[s]=n[s]+(e[s-i]+t[s]>>1)&255}}function lE(n,e,t,r,i){let s=0;if(t.length===0){for(;s<i;s++)e[s]=n[s];for(;s<r;s++)e[s]=n[s]+e[s-i]&255}else{for(;s<i;s++)e[s]=n[s]+t[s]&255;for(;s<r;s++)e[s]=n[s]+aae(e[s-i],t[s],t[s-i])&255}}function aae(n,e,t){let r=n+e-t,i=Math.abs(r-n),s=Math.abs(r-e),o=Math.abs(r-t);return i<=s&&i<=o?n:s<=o?e:t}function bU(n,e,t,r,i,s){switch(n){case 0:oE(e,t,i);break;case 1:aE(e,t,i,s);break;case 2:cE(e,t,r,i);break;case 3:uE(e,t,r,i,s);break;case 4:lE(e,t,r,i,s);break;default:throw new Error(`Unsupported filter: ${n}`)}}var cae=new Uint16Array([255]),uae=new Uint8Array(cae.buffer),lae=uae[0]===255;function EU(n){let{data:e,width:t,height:r,channels:i,depth:s}=n,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(s/8)*i,c=new Uint8Array(r*t*a),u=0;for(let l=0;l<7;l++){let p=o[l],y=Math.ceil((t-p.x)/p.xStep),g=Math.ceil((r-p.y)/p.yStep);if(y<=0||g<=0)continue;let D=y*a,M=new Uint8Array(D);for(let k=0;k<g;k++){let O=e[u++],G=e.subarray(u,u+D);u+=D;let W=new Uint8Array(D);bU(O,G,W,M,D,a),M.set(W);for(let K=0;K<y;K++){let ue=p.x+K*p.xStep,fe=p.y+k*p.yStep;if(!(ue>=t||fe>=r))for(let P=0;P<a;P++)c[(fe*t+ue)*a+P]=W[K*a+P]}}}if(s===16){let l=new Uint16Array(c.buffer);if(lae)for(let p=0;p<l.length;p++)l[p]=dae(l[p]);return l}else return c}function dae(n){return(n&255)<<8|n>>8&255}var hae=new Uint16Array([255]),fae=new Uint8Array(hae.buffer),pae=fae[0]===255,gae=new Uint8Array(0);function iR(n){let{data:e,width:t,height:r,channels:i,depth:s}=n,o=Math.ceil(s/8)*i,a=Math.ceil(s/8*i*t),c=new Uint8Array(r*a),u=gae,l=0,p,y;for(let g=0;g<r;g++){switch(p=e.subarray(l+1,l+1+a),y=c.subarray(g*a,(g+1)*a),e[l]){case 0:oE(p,y,a);break;case 1:aE(p,y,a,o);break;case 2:cE(p,y,u,a);break;case 3:uE(p,y,u,a,o);break;case 4:lE(p,y,u,a,o);break;default:throw new Error(`Unsupported filter: ${e[l]}`)}u=y,l+=a+1}if(s===16){let g=new Uint16Array(c.buffer);if(pae)for(let D=0;D<g.length;D++)g[D]=mae(g[D]);return g}else return c}function mae(n){return(n&255)<<8|n>>8&255}var dE=Uint8Array.of(137,80,78,71,13,10,26,10);function sR(n){if(!IU(n.readBytes(dE.length)))throw new Error("wrong PNG signature")}function IU(n){if(n.length<dE.length)return!1;for(let e=0;e<dE.length;e++)if(n[e]!==dE[e])return!1;return!0}var TU="tEXt",vae=0,AU=new TextDecoder("latin1");function _ae(n){if(bae(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}var wae=/^[\u0000-\u00FF]*$/;function bae(n){if(!wae.test(n))throw new Error("invalid latin1 text")}function SU(n,e,t){let r=oR(e);n[r]=Eae(e,t-r.length-1)}function oR(n){for(n.mark();n.readByte()!==vae;);let e=n.offset;n.reset();let t=AU.decode(n.readBytes(e-n.offset-1));return n.skip(1),_ae(t),t}function Eae(n,e){return AU.decode(n.readBytes(e))}var to={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Vv={UNKNOWN:-1,DEFLATE:0},hE={UNKNOWN:-1,ADAPTIVE:0},Bv={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},jv={NONE:0,BACKGROUND:1,PREVIOUS:2},fE={SOURCE:0,OVER:1};var pE=class extends _v{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);let{checkCrc:r=!1}=t;this._checkCrc=r,this._inflator=new nR,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Vv.UNKNOWN,this._filterMethod=hE.UNKNOWN,this._interlaceMethod=Bv.UNKNOWN,this._colorType=to.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(sR(this);!this._end;){let e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(sR(this);!this._end;){let e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){let r=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case TU:SU(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?rR(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){let r=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?rR(this,e+4,t):this.skip(4)}decodeIHDR(){let e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=Iae(this.readUint8());let t=this.readUint8();this._colorType=t;let r;switch(t){case to.GREYSCALE:r=1;break;case to.TRUECOLOUR:r=3;break;case to.INDEXED_COLOUR:r=1;break;case to.GREYSCALE_ALPHA:r=2;break;case to.TRUECOLOUR_ALPHA:r=4;break;case to.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==Vv.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){let e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);let t=e/3;this._hasPalette=!0;let r=[];this._palette=r;for(let i=0;i<t;i++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(r+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case to.GREYSCALE:case to.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case to.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){let r=this.readByte();this._palette[t].push(r)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case to.UNKNOWN:case to.GREYSCALE_ALPHA:case to.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){let t=oR(this),r=this.readUint8();if(r!==Vv.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);let i=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:vU(i)}}decodepHYs(){let e=this.readUint32(),t=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:t,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){let t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=iR({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)t.data=r.data;else{let i=this._apng.frames.at(e-1);this.disposeFrame(r,i,t),this.addFrameDataToCanvas(t,r)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,r){switch(e.disposeOp){case jv.NONE:break;case jv.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let s=0;s<this._png.width;s++){let o=(i*e.width+s)*this._png.channels;for(let a=0;a<this._png.channels;a++)r.data[o+a]=0}break;case jv.PREVIOUS:r.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){let r=1<<this._png.depth,i=(s,o)=>{let a=((s+t.yOffset)*this._png.width+t.xOffset+o)*this._png.channels,c=(s*t.width+o)*this._png.channels;return{index:a,frameIndex:c}};switch(t.blendOp){case fE.SOURCE:for(let s=0;s<t.height;s++)for(let o=0;o<t.width;o++){let{index:a,frameIndex:c}=i(s,o);for(let u=0;u<this._png.channels;u++)e.data[a+u]=t.data[c+u]}break;case fE.OVER:for(let s=0;s<t.height;s++)for(let o=0;o<t.width;o++){let{index:a,frameIndex:c}=i(s,o);for(let u=0;u<this._png.channels;u++){let l=t.data[c+this._png.channels-1]/r,p=u%(this._png.channels-1)===0?1:t.data[c+u],y=Math.floor(l*p+(1-l)*e.data[a+u]);e.data[a+u]+=y}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);let e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==hE.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Bv.NO_INTERLACE)this._png.data=iR({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Bv.ADAM7)this._png.data=EU({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){let e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:jv.NONE,blendOp:fE.SOURCE,data:e}),this._inflator=new nR,this._writingDataChunks=!1}};function Iae(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}function CU(n,e){return new pE(n,e).decode()}var Wt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function aR(){Wt.console&&typeof Wt.console.log=="function"&&Wt.console.log.apply(Wt.console,arguments)}var fr={log:aR,warn:function(n){Wt.console&&(typeof Wt.console.warn=="function"?Wt.console.warn.apply(Wt.console,arguments):aR.call(null,arguments))},error:function(n){Wt.console&&(typeof Wt.console.error=="function"?Wt.console.error.apply(Wt.console,arguments):aR(n))}};function cR(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){zh(r.response,e,t)},r.onerror=function(){fr.error("could not download file")},r.send()}function DU(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function gE(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var zh=Wt.saveAs||((typeof window>"u"?"undefined":or(window))!=="object"||window!==Wt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Wt.URL||Wt.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?DU(i.href)?cR(n,e,t):gE(i,i.target="_blank"):gE(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){gE(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(DU(n))cR(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){gE(r)})}else navigator.msSaveOrOpenBlob((function(i,s){return s===void 0?s={autoBom:!1}:or(s)!=="object"&&(fr.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return cR(n,e,t);var i=n.type==="application/octet-stream",s=/constructor/i.test(Wt.HTMLElement)||Wt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":or(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var l=a.result;l=o?l:l.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=l:location=l,r=null},a.readAsDataURL(n)}else{var c=Wt.URL||Wt.webkitURL,u=c.createObjectURL(n);r?r.location=u:location.href=u,r=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});function ZU(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,s=t[r].process,o=i.exec(n);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return a.length==1&&(a="0"+a),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+a+c+u}}var _E=Wt.atob.bind(Wt),xU=Wt.btoa.bind(Wt);function uR(n,e){var t=n[0],r=n[1],i=n[2],s=n[3];t=xs(t,r,i,s,e[0],7,-680876936),s=xs(s,t,r,i,e[1],12,-389564586),i=xs(i,s,t,r,e[2],17,606105819),r=xs(r,i,s,t,e[3],22,-1044525330),t=xs(t,r,i,s,e[4],7,-176418897),s=xs(s,t,r,i,e[5],12,1200080426),i=xs(i,s,t,r,e[6],17,-1473231341),r=xs(r,i,s,t,e[7],22,-45705983),t=xs(t,r,i,s,e[8],7,1770035416),s=xs(s,t,r,i,e[9],12,-1958414417),i=xs(i,s,t,r,e[10],17,-42063),r=xs(r,i,s,t,e[11],22,-1990404162),t=xs(t,r,i,s,e[12],7,1804603682),s=xs(s,t,r,i,e[13],12,-40341101),i=xs(i,s,t,r,e[14],17,-1502002290),t=Ns(t,r=xs(r,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Ns(s,t,r,i,e[6],9,-1069501632),i=Ns(i,s,t,r,e[11],14,643717713),r=Ns(r,i,s,t,e[0],20,-373897302),t=Ns(t,r,i,s,e[5],5,-701558691),s=Ns(s,t,r,i,e[10],9,38016083),i=Ns(i,s,t,r,e[15],14,-660478335),r=Ns(r,i,s,t,e[4],20,-405537848),t=Ns(t,r,i,s,e[9],5,568446438),s=Ns(s,t,r,i,e[14],9,-1019803690),i=Ns(i,s,t,r,e[3],14,-187363961),r=Ns(r,i,s,t,e[8],20,1163531501),t=Ns(t,r,i,s,e[13],5,-1444681467),s=Ns(s,t,r,i,e[2],9,-51403784),i=Ns(i,s,t,r,e[7],14,1735328473),t=Rs(t,r=Ns(r,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Rs(s,t,r,i,e[8],11,-2022574463),i=Rs(i,s,t,r,e[11],16,1839030562),r=Rs(r,i,s,t,e[14],23,-35309556),t=Rs(t,r,i,s,e[1],4,-1530992060),s=Rs(s,t,r,i,e[4],11,1272893353),i=Rs(i,s,t,r,e[7],16,-155497632),r=Rs(r,i,s,t,e[10],23,-1094730640),t=Rs(t,r,i,s,e[13],4,681279174),s=Rs(s,t,r,i,e[0],11,-358537222),i=Rs(i,s,t,r,e[3],16,-722521979),r=Rs(r,i,s,t,e[6],23,76029189),t=Rs(t,r,i,s,e[9],4,-640364487),s=Rs(s,t,r,i,e[12],11,-421815835),i=Rs(i,s,t,r,e[15],16,530742520),t=Ps(t,r=Rs(r,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Ps(s,t,r,i,e[7],10,1126891415),i=Ps(i,s,t,r,e[14],15,-1416354905),r=Ps(r,i,s,t,e[5],21,-57434055),t=Ps(t,r,i,s,e[12],6,1700485571),s=Ps(s,t,r,i,e[3],10,-1894986606),i=Ps(i,s,t,r,e[10],15,-1051523),r=Ps(r,i,s,t,e[1],21,-2054922799),t=Ps(t,r,i,s,e[8],6,1873313359),s=Ps(s,t,r,i,e[15],10,-30611744),i=Ps(i,s,t,r,e[6],15,-1560198380),r=Ps(r,i,s,t,e[13],21,1309151649),t=Ps(t,r,i,s,e[4],6,-145523070),s=Ps(s,t,r,i,e[11],10,-1120210379),i=Ps(i,s,t,r,e[2],15,718787259),r=Ps(r,i,s,t,e[9],21,-343485551),n[0]=bd(t,n[0]),n[1]=bd(r,n[1]),n[2]=bd(i,n[2]),n[3]=bd(s,n[3])}function SE(n,e,t,r,i,s){return e=bd(bd(e,n),bd(r,s)),bd(e<<i|e>>>32-i,t)}function xs(n,e,t,r,i,s,o){return SE(e&t|~e&r,n,e,i,s,o)}function Ns(n,e,t,r,i,s,o){return SE(e&r|t&~r,n,e,i,s,o)}function Rs(n,e,t,r,i,s,o){return SE(e^t^r,n,e,i,s,o)}function Ps(n,e,t,r,i,s,o){return SE(t^(e|~r),n,e,i,s,o)}function XU(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)uR(r,Tae(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(uR(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,uR(r,i),r}function Tae(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var NU="0123456789abcdef".split("");function Aae(n){for(var e="",t=0;t<4;t++)e+=NU[n>>8*t+4&15]+NU[n>>8*t&15];return e}function Sae(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function gR(n){return XU(n).map(Sae).join("")}var Cae=(function(n){for(var e=0;e<n.length;e++)n[e]=Aae(n[e]);return n.join("")})(XU("hello"))!="5d41402abc4b2a76b9719d911017c592";function bd(n,e){if(Cae){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function mR(n,e){var t,r,i,s;if(n!==t){for(var o=(i=n,s=1+(256/n.length|0),new Array(s+1).join(i)),a=[],c=0;c<256;c++)a[c]=c;var u=0;for(c=0;c<256;c++){var l=a[c];u=(u+l+o.charCodeAt(c))%256,a[c]=a[u],a[u]=l}t=n,r=a}else a=r;var p=e.length,y=0,g=0,D="";for(c=0;c<p;c++)g=(g+(l=a[y=(y+1)%256]))%256,a[y]=a[g],a[g]=l,o=a[(a[y]+a[g])%256],D+=String.fromCharCode(e.charCodeAt(c)^o);return D}var RU={print:4,modify:8,copy:16,"annot-forms":32};function ug(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(a){if(RU.perm!==void 0)throw new Error("Invalid permission: "+a);i+=RU[a]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var s=(e+this.padding).substr(0,32),o=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=gR(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=mR(this.encryptionKey,this.padding)}function lg(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):n[r]}return e}function PU(n){if(or(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!i],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var o=e[t][s];try{o[0].apply(n,r)}catch(a){Wt.console&&fr.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function TE(n){if(!(this instanceof TE))return new TE(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function e7(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function $h(n,e,t,r,i){if(!(this instanceof $h))return new $h(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,e7.call(this,r,i)}function dg(n,e,t,r,i){if(!(this instanceof dg))return new dg(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,e7.call(this,r,i)}function bt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,c=16,u="S",l=null;or(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,s=n.compress||n.compressPdf||s,(l=n.encryption||null)!==null&&(l.userPassword=l.userPassword||"",l.ownerPassword=l.ownerPassword||"",l.userPermissions=l.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(c=n.floatPrecision),u=n.defaultPathOperation||"S"),o=n.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",t=(""+(t||"P")).toLowerCase();var p=n.putOnlyUsedFonts||!1,y={},g={internal:{},__private__:{}};g.__private__.PubSub=PU;var D="1.3",M=g.__private__.getPdfVersion=function(){return D};g.__private__.setPdfVersion=function(v){D=v};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return k};var O=g.__private__.getPageFormat=function(v){return k[v]};i=i||"a4";var G="compat",W="advanced",K=G;function ue(){this.saveGraphicsState(),H(new ft(zt,0,0,-zt,0,co()*zt).toString()+" cm"),this.setFontSize(this.getFontSize()/zt),u="n",K=W}function fe(){this.restoreGraphicsState(),u="S",K=G}var P=g.__private__.combineFontStyleAndFontWeight=function(v,L){if(v=="bold"&&L=="normal"||v=="bold"&&L==400||v=="normal"&&L=="italic"||v=="bold"&&L=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return L&&(v=L==400||L==="normal"?v==="italic"?"italic":"normal":L!=700&&L!=="bold"||v!=="normal"?(L==700?"bold":L)+""+v:"bold"),v};g.advancedAPI=function(v){var L=K===G;return L&&ue.call(this),typeof v!="function"||(v(this),L&&fe.call(this)),this},g.compatAPI=function(v){var L=K===W;return L&&fe.call(this),typeof v!="function"||(v(this),L&&ue.call(this)),this},g.isAdvancedAPI=function(){return K===W};var T,w=function(v){if(K!==W)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},x=g.roundToPrecision=g.__private__.roundToPrecision=function(v,L){var Q=e||L;if(isNaN(v)||isNaN(Q))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(Q).replace(/0+$/,"")};T=g.hpf=g.__private__.hpf=typeof c=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return x(v,c)}:c==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return x(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return x(v,16)};var _=g.f2=g.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return x(v,2)},S=g.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return x(v,3)},I=g.scale=g.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return K===G?v*zt:K===W?v:void 0},ee=function(v){return I((function(L){return K===G?co()-L:K===W?L:void 0})(v))};g.__private__.setPrecision=g.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var ye,Se="00000000000000000000000000000000",Ie=g.__private__.getFileId=function(){return Se},he=g.__private__.setFileId=function(v){return Se=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():Se.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),l!==null&&(ur=new ug(l.userPermissions,l.userPassword,l.ownerPassword,Se)),Se};g.setFileId=function(v){return he(v),this},g.getFileId=function(){return Ie()};var Te=g.__private__.convertDateToPDFDate=function(v){var L=v.getTimezoneOffset(),Q=L<0?"+":"-",te=Math.floor(Math.abs(L/60)),ce=Math.abs(L%60),Ae=[Q,X(te),"'",X(ce),"'"].join("");return["D:",v.getFullYear(),X(v.getMonth()+1),X(v.getDate()),X(v.getHours()),X(v.getMinutes()),X(v.getSeconds()),Ae].join("")},He=g.__private__.convertPDFDateToDate=function(v){var L=parseInt(v.substr(2,4),10),Q=parseInt(v.substr(6,2),10)-1,te=parseInt(v.substr(8,2),10),ce=parseInt(v.substr(10,2),10),Ae=parseInt(v.substr(12,2),10),Me=parseInt(v.substr(14,2),10);return new Date(L,Q,te,ce,Ae,Me,0)},Oe=g.__private__.setCreationDate=function(v){var L;if(v===void 0&&(v=new Date),v instanceof Date)L=Te(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");L=v}return ye=L},B=g.__private__.getCreationDate=function(v){var L=ye;return v==="jsDate"&&(L=He(ye)),L};g.setCreationDate=function(v){return Oe(v),this},g.getCreationDate=function(v){return B(v)};var Y,X=g.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},ne=g.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},oe=0,le=[],be=[],Ee=0,De=[],Be=[],Xe=!1,Ye=be;g.__private__.setCustomOutputDestination=function(v){Xe=!0,Ye=v};var dt=function(v){Xe||(Ye=v)};g.__private__.resetCustomOutputDestination=function(){Xe=!1,Ye=be};var H=g.__private__.out=function(v){return v=v.toString(),Ee+=v.length+1,Ye.push(v),Ye},Je=g.__private__.write=function(v){return H(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},qt=g.__private__.getArrayBuffer=function(v){for(var L=v.length,Q=new ArrayBuffer(L),te=new Uint8Array(Q);L--;)te[L]=v.charCodeAt(L);return Q},At=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return At};var Fe=n.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(v){return Fe=K===W?v/zt:v,this};var tt,Ke=g.__private__.getFontSize=g.getFontSize=function(){return K===G?Fe:Fe*zt},vt=n.R2L||!1;g.__private__.setR2L=g.setR2L=function(v){return vt=v,this},g.__private__.getR2L=g.getR2L=function(){return vt};var Et,gn=g.__private__.setZoomMode=function(v){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))tt=v;else if(isNaN(v)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');tt=v}else tt=parseInt(v,10)};g.__private__.getZoomMode=function(){return tt};var on,Rt=g.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');Et=v};g.__private__.getPageMode=function(){return Et};var St=g.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');on=v};g.__private__.getLayoutMode=function(){return on},g.__private__.setDisplayMode=g.setDisplayMode=function(v,L,Q){return gn(v),St(L),Rt(Q),this};var Ct={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(v){if(Object.keys(Ct).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ct[v]},g.__private__.getDocumentProperties=function(){return Ct},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(v){for(var L in Ct)Ct.hasOwnProperty(L)&&v[L]&&(Ct[L]=v[L]);return this},g.__private__.setDocumentProperty=function(v,L){if(Object.keys(Ct).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ct[v]=L};var st,zt,pt,pr,an,jt={},Kt={},Bn=[],ht={},Un={},It={},Vt={},Ln=null,$t=0,nt=[],mn=new PU(g),Gr=n.hotfixes||[],_r={},hs={},Ls=[],ft=function v(L,Q,te,ce,Ae,Me){if(!(this instanceof v))return new v(L,Q,te,ce,Ae,Me);isNaN(L)&&(L=1),isNaN(Q)&&(Q=0),isNaN(te)&&(te=0),isNaN(ce)&&(ce=1),isNaN(Ae)&&(Ae=0),isNaN(Me)&&(Me=0),this._matrix=[L,Q,te,ce,Ae,Me]};Object.defineProperty(ft.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(ft.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(ft.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(ft.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(ft.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(ft.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(ft.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(ft.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(ft.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(ft.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(ft.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(ft.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(ft.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ft.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ft.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ft.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ft.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(T).join(v)},ft.prototype.multiply=function(v){var L=v.sx*this.sx+v.shy*this.shx,Q=v.sx*this.shy+v.shy*this.sy,te=v.shx*this.sx+v.sy*this.shx,ce=v.shx*this.shy+v.sy*this.sy,Ae=v.tx*this.sx+v.ty*this.shx+this.tx,Me=v.tx*this.shy+v.ty*this.sy+this.ty;return new ft(L,Q,te,ce,Ae,Me)},ft.prototype.decompose=function(){var v=this.sx,L=this.shy,Q=this.shx,te=this.sy,ce=this.tx,Ae=this.ty,Me=Math.sqrt(v*v+L*L),rt=(v/=Me)*Q+(L/=Me)*te;Q-=v*rt,te-=L*rt;var ct=Math.sqrt(Q*Q+te*te);return rt/=ct,v*(te/=ct)<L*(Q/=ct)&&(v=-v,L=-L,rt=-rt,Me=-Me),{scale:new ft(Me,0,0,ct,0,0),translate:new ft(1,0,0,1,ce,Ae),rotate:new ft(v,L,-L,v,0,0),skew:new ft(1,0,rt,1,0,0)}},ft.prototype.toString=function(v){return this.join(" ")},ft.prototype.inversed=function(){var v=this.sx,L=this.shy,Q=this.shx,te=this.sy,ce=this.tx,Ae=this.ty,Me=1/(v*te-L*Q),rt=te*Me,ct=-L*Me,kt=-Q*Me,Mt=v*Me;return new ft(rt,ct,kt,Mt,-rt*ce-kt*Ae,-ct*ce-Mt*Ae)},ft.prototype.applyToPoint=function(v){var L=v.x*this.sx+v.y*this.shx+this.tx,Q=v.x*this.shy+v.y*this.sy+this.ty;return new Ao(L,Q)},ft.prototype.applyToRectangle=function(v){var L=this.applyToPoint(v),Q=this.applyToPoint(new Ao(v.x+v.w,v.y+v.h));return new oo(L.x,L.y,Q.x-L.x,Q.y-L.y)},ft.prototype.clone=function(){var v=this.sx,L=this.shy,Q=this.shx,te=this.sy,ce=this.tx,Ae=this.ty;return new ft(v,L,Q,te,ce,Ae)},g.Matrix=ft;var ro=g.matrixMult=function(v,L){return L.multiply(v)},cr=new ft(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=cr;var oi=function(v,L){if(!Un[v]){var Q=(L instanceof $h?"Sh":"P")+(Object.keys(ht).length+1).toString(10);L.id=Q,Un[v]=Q,ht[Q]=L,mn.publish("addPattern",L)}};g.ShadingPattern=$h,g.TilingPattern=dg,g.addShadingPattern=function(v,L){return w("addShadingPattern()"),oi(v,L),this},g.beginTilingPattern=function(v){w("beginTilingPattern()"),aa(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},g.endTilingPattern=function(v,L){w("endTilingPattern()"),L.stream=Be[Y].join(`
`),oi(v,L),mn.publish("endTilingPattern",L),Ls.pop().restore()};var Wr,qn=g.__private__.newObject=function(){var v=Er();return wr(v,!0),v},Er=g.__private__.newObjectDeferred=function(){return oe++,le[oe]=function(){return Ee},oe},wr=function(v,L){return L=typeof L=="boolean"&&L,le[v]=Ee,L&&H(v+" 0 obj"),v},fs=g.__private__.newAdditionalObject=function(){var v={objId:Er(),content:""};return De.push(v),v},Si=Er(),ps=Er(),ji=g.__private__.decodeColorString=function(v){var L=v.split(" ");if(L.length!==2||L[1]!=="g"&&L[1]!=="G")L.length!==5||L[4]!=="k"&&L[4]!=="K"||(L=[(1-L[0])*(1-L[3]),(1-L[1])*(1-L[3]),(1-L[2])*(1-L[3]),"r"]);else{var Q=parseFloat(L[0]);L=[Q,Q,Q,"r"]}for(var te="#",ce=0;ce<3;ce++)te+=("0"+Math.floor(255*parseFloat(L[ce])).toString(16)).slice(-2);return te},Ui=g.__private__.encodeColorString=function(v){var L;typeof v=="string"&&(v={ch1:v});var Q=v.ch1,te=v.ch2,ce=v.ch3,Ae=v.ch4,Me=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Q=="string"&&Q.charAt(0)!=="#"){var rt=new ZU(Q);if(rt.ok)Q=rt.toHex();else if(!/^\d*\.?\d*$/.test(Q))throw new Error('Invalid color "'+Q+'" passed to jsPDF.encodeColorString.')}if(typeof Q=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Q)&&(Q="#"+Q[1]+Q[1]+Q[2]+Q[2]+Q[3]+Q[3]),typeof Q=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Q)){var ct=parseInt(Q.substr(1),16);Q=ct>>16&255,te=ct>>8&255,ce=255&ct}if(te===void 0||Ae===void 0&&Q===te&&te===ce)L=typeof Q=="string"?Q+" "+Me[0]:v.precision===2?_(Q/255)+" "+Me[0]:S(Q/255)+" "+Me[0];else if(Ae===void 0||or(Ae)==="object"){if(Ae&&!isNaN(Ae.a)&&Ae.a===0)return["1.","1.","1.",Me[1]].join(" ");L=typeof Q=="string"?[Q,te,ce,Me[1]].join(" "):v.precision===2?[_(Q/255),_(te/255),_(ce/255),Me[1]].join(" "):[S(Q/255),S(te/255),S(ce/255),Me[1]].join(" ")}else L=typeof Q=="string"?[Q,te,ce,Ae,Me[2]].join(" "):v.precision===2?[_(Q),_(te),_(ce),_(Ae),Me[2]].join(" "):[S(Q),S(te),S(ce),S(Ae),Me[2]].join(" ");return L},Ci=g.__private__.getFilters=function(){return o},ai=g.__private__.putStream=function(v){var L=(v=v||{}).data||"",Q=v.filters||Ci(),te=v.alreadyAppliedFilters||[],ce=v.addLength1||!1,Ae=L.length,Me=v.objectId,rt=function(f){return f};if(l!==null&&Me===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");l!==null&&(rt=ur.encryptor(Me,0));var ct={};Q===!0&&(Q=["FlateEncode"]);var kt=v.additionalKeyValues||[],Mt=(ct=bt.API.processDataByFilters!==void 0?bt.API.processDataByFilters(L,Q):{data:L,reverseChain:[]}).reverseChain+(Array.isArray(te)?te.join(" "):te.toString());if(ct.data.length!==0&&(kt.push({key:"Length",value:ct.data.length}),ce===!0&&kt.push({key:"Length1",value:Ae})),Mt.length!=0)if(Mt.split("/").length-1==1)kt.push({key:"Filter",value:Mt});else{kt.push({key:"Filter",value:"["+Mt+"]"});for(var Lt=0;Lt<kt.length;Lt+=1)if(kt[Lt].key==="DecodeParms"){for(var Xn=[],zn=0;zn<ct.reverseChain.split("/").length-1;zn+=1)Xn.push("null");Xn.push(kt[Lt].value),kt[Lt].value="["+Xn.join(" ")+"]"}}H("<<");for(var wn=0;wn<kt.length;wn++)H("/"+kt[wn].key+" "+kt[wn].value);H(">>"),ct.data.length!==0&&(H("stream"),H(rt(ct.data)),H("endstream"))},qi=g.__private__.putPage=function(v){var L=v.number,Q=v.data,te=v.objId,ce=v.contentsObjId;wr(te,!0),H("<</Type /Page"),H("/Parent "+v.rootDictionaryObjId+" 0 R"),H("/Resources "+v.resourceDictionaryObjId+" 0 R"),H("/MediaBox ["+parseFloat(T(v.mediaBox.bottomLeftX))+" "+parseFloat(T(v.mediaBox.bottomLeftY))+" "+T(v.mediaBox.topRightX)+" "+T(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&H("/CropBox ["+T(v.cropBox.bottomLeftX)+" "+T(v.cropBox.bottomLeftY)+" "+T(v.cropBox.topRightX)+" "+T(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&H("/BleedBox ["+T(v.bleedBox.bottomLeftX)+" "+T(v.bleedBox.bottomLeftY)+" "+T(v.bleedBox.topRightX)+" "+T(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&H("/TrimBox ["+T(v.trimBox.bottomLeftX)+" "+T(v.trimBox.bottomLeftY)+" "+T(v.trimBox.topRightX)+" "+T(v.trimBox.topRightY)+"]"),v.artBox!==null&&H("/ArtBox ["+T(v.artBox.bottomLeftX)+" "+T(v.artBox.bottomLeftY)+" "+T(v.artBox.topRightX)+" "+T(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&H("/UserUnit "+v.userUnit),mn.publish("putPage",{objId:te,pageContext:nt[L],pageNumber:L,page:Q}),H("/Contents "+ce+" 0 R"),H(">>"),H("endobj");var Ae=Q.join(`
`);return K===W&&(Ae+=`
Q`),wr(ce,!0),ai({data:Ae,filters:Ci(),objectId:ce}),H("endobj"),te},gs=g.__private__.putPages=function(){var v,L,Q=[];for(v=1;v<=$t;v++)nt[v].objId=Er(),nt[v].contentsObjId=Er();for(v=1;v<=$t;v++)Q.push(qi({number:v,data:Be[v],objId:nt[v].objId,contentsObjId:nt[v].contentsObjId,mediaBox:nt[v].mediaBox,cropBox:nt[v].cropBox,bleedBox:nt[v].bleedBox,trimBox:nt[v].trimBox,artBox:nt[v].artBox,userUnit:nt[v].userUnit,rootDictionaryObjId:Si,resourceDictionaryObjId:ps}));wr(Si,!0),H("<</Type /Pages");var te="/Kids [";for(L=0;L<$t;L++)te+=Q[L]+" 0 R ";H(te+"]"),H("/Count "+$t),H(">>"),H("endobj"),mn.publish("postPutPages")},Xo=function(v){mn.publish("putFont",{font:v,out:H,newObject:qn,putStream:ai}),v.isAlreadyPutted!==!0&&(v.objectNumber=qn(),H("<<"),H("/Type /Font"),H("/BaseFont /"+lg(v.postScriptName)),H("/Subtype /Type1"),typeof v.encoding=="string"&&H("/Encoding /"+v.encoding),H("/FirstChar 32"),H("/LastChar 255"),H(">>"),H("endobj"))},Fs=function(v){v.objectNumber=qn();var L=[];L.push({key:"Type",value:"/XObject"}),L.push({key:"Subtype",value:"/Form"}),L.push({key:"BBox",value:"["+[T(v.x),T(v.y),T(v.x+v.width),T(v.y+v.height)].join(" ")+"]"}),L.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var Q=v.pages[1].join(`
`);ai({data:Q,additionalKeyValues:L,objectId:v.objectNumber}),H("endobj")},wo=function(v,L){L||(L=21);var Q=qn(),te=(function(Me,rt){var ct,kt=[],Mt=1/(rt-1);for(ct=0;ct<1;ct+=Mt)kt.push(ct);if(kt.push(1),Me[0].offset!=0){var Lt={offset:0,color:Me[0].color};Me.unshift(Lt)}if(Me[Me.length-1].offset!=1){var Xn={offset:1,color:Me[Me.length-1].color};Me.push(Xn)}for(var zn="",wn=0,f=0;f<kt.length;f++){for(ct=kt[f];ct>Me[wn+1].offset;)wn++;var A=Me[wn].offset,R=(ct-A)/(Me[wn+1].offset-A),q=Me[wn].color,se=Me[wn+1].color;zn+=ne(Math.round((1-R)*q[0]+R*se[0]).toString(16))+ne(Math.round((1-R)*q[1]+R*se[1]).toString(16))+ne(Math.round((1-R)*q[2]+R*se[2]).toString(16))}return zn.trim()})(v.colors,L),ce=[];ce.push({key:"FunctionType",value:"0"}),ce.push({key:"Domain",value:"[0.0 1.0]"}),ce.push({key:"Size",value:"["+L+"]"}),ce.push({key:"BitsPerSample",value:"8"}),ce.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ce.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ai({data:te,additionalKeyValues:ce,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Q}),H("endobj"),v.objectNumber=qn(),H("<< /ShadingType "+v.type),H("/ColorSpace /DeviceRGB");var Ae="/Coords ["+T(parseFloat(v.coords[0]))+" "+T(parseFloat(v.coords[1]))+" ";v.type===2?Ae+=T(parseFloat(v.coords[2]))+" "+T(parseFloat(v.coords[3])):Ae+=T(parseFloat(v.coords[2]))+" "+T(parseFloat(v.coords[3]))+" "+T(parseFloat(v.coords[4]))+" "+T(parseFloat(v.coords[5])),H(Ae+="]"),v.matrix&&H("/Matrix ["+v.matrix.toString()+"]"),H("/Function "+Q+" 0 R"),H("/Extend [true true]"),H(">>"),H("endobj")},bo=function(v,L){var Q=Er(),te=qn();L.push({resourcesOid:Q,objectOid:te}),v.objectNumber=te;var ce=[];ce.push({key:"Type",value:"/Pattern"}),ce.push({key:"PatternType",value:"1"}),ce.push({key:"PaintType",value:"1"}),ce.push({key:"TilingType",value:"1"}),ce.push({key:"BBox",value:"["+v.boundingBox.map(T).join(" ")+"]"}),ce.push({key:"XStep",value:T(v.xStep)}),ce.push({key:"YStep",value:T(v.yStep)}),ce.push({key:"Resources",value:Q+" 0 R"}),v.matrix&&ce.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),ai({data:v.stream,additionalKeyValues:ce,objectId:v.objectNumber}),H("endobj")},ea=function(v){for(var L in v.objectNumber=qn(),H("<<"),v)switch(L){case"opacity":H("/ca "+_(v[L]));break;case"stroke-opacity":H("/CA "+_(v[L]))}H(">>"),H("endobj")},Vs=function(v){wr(v.resourcesOid,!0),H("<<"),H("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var L in H("/Font <<"),jt)jt.hasOwnProperty(L)&&(p===!1||p===!0&&y.hasOwnProperty(L))&&H("/"+L+" "+jt[L].objectNumber+" 0 R");H(">>")})(),(function(){if(Object.keys(ht).length>0){for(var L in H("/Shading <<"),ht)ht.hasOwnProperty(L)&&ht[L]instanceof $h&&ht[L].objectNumber>=0&&H("/"+L+" "+ht[L].objectNumber+" 0 R");mn.publish("putShadingPatternDict"),H(">>")}})(),(function(L){if(Object.keys(ht).length>0){for(var Q in H("/Pattern <<"),ht)ht.hasOwnProperty(Q)&&ht[Q]instanceof g.TilingPattern&&ht[Q].objectNumber>=0&&ht[Q].objectNumber<L&&H("/"+Q+" "+ht[Q].objectNumber+" 0 R");mn.publish("putTilingPatternDict"),H(">>")}})(v.objectOid),(function(){if(Object.keys(It).length>0){var L;for(L in H("/ExtGState <<"),It)It.hasOwnProperty(L)&&It[L].objectNumber>=0&&H("/"+L+" "+It[L].objectNumber+" 0 R");mn.publish("putGStateDict"),H(">>")}})(),(function(){for(var L in H("/XObject <<"),_r)_r.hasOwnProperty(L)&&_r[L].objectNumber>=0&&H("/"+L+" "+_r[L].objectNumber+" 0 R");mn.publish("putXobjectDict"),H(">>")})(),H(">>"),H("endobj")},Eo=function(v){Kt[v.fontName]=Kt[v.fontName]||{},Kt[v.fontName][v.fontStyle]=v.id},hu=function(v,L,Q,te,ce){var Ae={id:"F"+(Object.keys(jt).length+1).toString(10),postScriptName:v,fontName:L,fontStyle:Q,encoding:te,isStandardFont:ce||!1,metadata:{}};return mn.publish("addFont",{font:Ae,instance:this}),jt[Ae.id]=Ae,Eo(Ae),Ae.id},Di=g.__private__.pdfEscape=g.pdfEscape=function(v,L){return(function(Q,te){var ce,Ae,Me,rt,ct,kt,Mt,Lt,Xn;if(Me=(te=te||{}).sourceEncoding||"Unicode",ct=te.outputEncoding,(te.autoencode||ct)&&jt[st].metadata&&jt[st].metadata[Me]&&jt[st].metadata[Me].encoding&&(rt=jt[st].metadata[Me].encoding,!ct&&jt[st].encoding&&(ct=jt[st].encoding),!ct&&rt.codePages&&(ct=rt.codePages[0]),typeof ct=="string"&&(ct=rt[ct]),ct)){for(Mt=!1,kt=[],ce=0,Ae=Q.length;ce<Ae;ce++)(Lt=ct[Q.charCodeAt(ce)])?kt.push(String.fromCharCode(Lt)):kt.push(Q[ce]),kt[ce].charCodeAt(0)>>8&&(Mt=!0);Q=kt.join("")}for(ce=Q.length;Mt===void 0&&ce!==0;)Q.charCodeAt(ce-1)>>8&&(Mt=!0),ce--;if(!Mt)return Q;for(kt=te.noBOM?[]:[254,255],ce=0,Ae=Q.length;ce<Ae;ce++){if((Xn=(Lt=Q.charCodeAt(ce))>>8)>>8)throw new Error("Character at position "+ce+" of string '"+Q+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");kt.push(Xn),kt.push(Lt-(Xn<<8))}return String.fromCharCode.apply(void 0,kt)})(v,L).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},io=g.__private__.beginPage=function(v){Be[++$t]=[],nt[$t]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},_c($t),dt(Be[Y])},Bs=function(v,L){var Q,te,ce;switch(t=L||t,typeof v=="string"&&(Q=O(v.toLowerCase()),Array.isArray(Q)&&(te=Q[0],ce=Q[1])),Array.isArray(v)&&(te=v[0]*zt,ce=v[1]*zt),isNaN(te)&&(te=i[0],ce=i[1]),(te>14400||ce>14400)&&(fr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),te=Math.min(14400,te),ce=Math.min(14400,ce)),i=[te,ce],t.substr(0,1)){case"l":ce>te&&(i=[ce,te]);break;case"p":te>ce&&(i=[ce,te])}io(i),Ot(Tc),H(Tn),so!==0&&H(so+" J"),yn!==0&&H(yn+" j"),mn.publish("addPage",{pageNumber:$t})},Io=function(v){v>0&&v<=$t&&(Be.splice(v,1),nt.splice(v,1),$t--,Y>$t&&(Y=$t),this.setPage(Y))},_c=function(v){v>0&&v<=$t&&(Y=v)},wc=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return Be.length-1},bc=function(v,L,Q){var te,ce=void 0;return Q=Q||{},v=v!==void 0?v:jt[st].fontName,L=L!==void 0?L:jt[st].fontStyle,te=v.toLowerCase(),Kt[te]!==void 0&&Kt[te][L]!==void 0?ce=Kt[te][L]:Kt[v]!==void 0&&Kt[v][L]!==void 0?ce=Kt[v][L]:Q.disableWarning===!1&&fr.warn("Unable to look up font label for font '"+v+"', '"+L+"'. Refer to getFontList() for available fonts."),ce||Q.noFallback||(ce=Kt.times[L])==null&&(ce=Kt.times.normal),ce},ms=g.__private__.putInfo=function(){var v=qn(),L=function(te){return te};for(var Q in l!==null&&(L=ur.encryptor(v,0)),H("<<"),H("/Producer ("+Di(L("jsPDF "+bt.version))+")"),Ct)Ct.hasOwnProperty(Q)&&Ct[Q]&&H("/"+Q.substr(0,1).toUpperCase()+Q.substr(1)+" ("+Di(L(Ct[Q]))+")");H("/CreationDate ("+Di(L(ye))+")"),H(">>"),H("endobj")},ta=g.__private__.putCatalog=function(v){var L=(v=v||{}).rootDictionaryObjId||Si;switch(qn(),H("<<"),H("/Type /Catalog"),H("/Pages "+L+" 0 R"),tt||(tt="fullwidth"),tt){case"fullwidth":H("/OpenAction [3 0 R /FitH null]");break;case"fullheight":H("/OpenAction [3 0 R /FitV null]");break;case"fullpage":H("/OpenAction [3 0 R /Fit]");break;case"original":H("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Q=""+tt;Q.substr(Q.length-1)==="%"&&(tt=parseInt(tt)/100),typeof tt=="number"&&H("/OpenAction [3 0 R /XYZ null null "+_(tt)+"]")}switch(on||(on="continuous"),on){case"continuous":H("/PageLayout /OneColumn");break;case"single":H("/PageLayout /SinglePage");break;case"two":case"twoleft":H("/PageLayout /TwoColumnLeft");break;case"tworight":H("/PageLayout /TwoColumnRight")}Et&&H("/PageMode /"+Et),mn.publish("putCatalog"),H(">>"),H("endobj")},ys=g.__private__.putTrailer=function(){H("trailer"),H("<<"),H("/Size "+(oe+1)),H("/Root "+oe+" 0 R"),H("/Info "+(oe-1)+" 0 R"),l!==null&&H("/Encrypt "+ur.oid+" 0 R"),H("/ID [ <"+Se+"> <"+Se+"> ]"),H(">>")},xn=g.__private__.putHeader=function(){H("%PDF-"+D),H("%\xBA\xDF\xAC\xE0")},To=g.__private__.putXRef=function(){var v="0000000000";H("xref"),H("0 "+(oe+1)),H("0000000000 65535 f ");for(var L=1;L<=oe;L++)typeof le[L]=="function"?H((v+le[L]()).slice(-10)+" 00000 n "):le[L]!==void 0?H((v+le[L]).slice(-10)+" 00000 n "):H("0000000000 00000 n ")},zi=g.__private__.buildDocument=function(){var v;oe=0,Ee=0,be=[],le=[],De=[],Si=Er(),ps=Er(),dt(be),mn.publish("buildDocument"),xn(),gs(),(function(){mn.publish("putAdditionalObjects");for(var Q=0;Q<De.length;Q++){var te=De[Q];wr(te.objId,!0),H(te.content),H("endobj")}mn.publish("postPutAdditionalObjects")})(),v=[],(function(){for(var Q in jt)jt.hasOwnProperty(Q)&&(p===!1||p===!0&&y.hasOwnProperty(Q))&&Xo(jt[Q])})(),(function(){var Q;for(Q in It)It.hasOwnProperty(Q)&&ea(It[Q])})(),(function(){for(var Q in _r)_r.hasOwnProperty(Q)&&Fs(_r[Q])})(),(function(Q){var te;for(te in ht)ht.hasOwnProperty(te)&&(ht[te]instanceof $h?wo(ht[te]):ht[te]instanceof dg&&bo(ht[te],Q))})(v),mn.publish("putResources"),v.forEach(Vs),Vs({resourcesOid:ps,objectOid:Number.MAX_SAFE_INTEGER}),mn.publish("postPutResources"),l!==null&&(ur.oid=qn(),H("<<"),H("/Filter /Standard"),H("/V "+ur.v),H("/R "+ur.r),H("/U <"+ur.toHexString(ur.U)+">"),H("/O <"+ur.toHexString(ur.O)+">"),H("/P "+ur.P),H(">>"),H("endobj")),ms(),ta();var L=Ee;return To(),ys(),H("startxref"),H(""+L),H("%%EOF"),dt(Be[Y]),be.join(`
`)},na=g.__private__.getBlob=function(v){return new Blob([qt(v)],{type:"application/pdf"})},Fn=g.output=g.__private__.output=(Wr=function(v,L){switch(typeof(L=L||{})=="string"?L={filename:L}:L.filename=L.filename||"generated.pdf",v){case void 0:return zi();case"save":g.save(L.filename);break;case"arraybuffer":return qt(zi());case"blob":return na(zi());case"bloburi":case"bloburl":if(Wt.URL!==void 0&&typeof Wt.URL.createObjectURL=="function")return Wt.URL&&Wt.URL.createObjectURL(na(zi()))||void 0;fr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Q="",te=zi();try{Q=xU(te)}catch{Q=xU(unescape(encodeURIComponent(te)))}return"data:application/pdf;filename="+L.filename+";base64,"+Q;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Wt)==="[object Window]"){var ce="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ae=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';L.pdfObjectUrl&&(ce=L.pdfObjectUrl,Ae="");var Me='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ce+'"'+Ae+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(L)+");<\/script></body></html>",rt=Wt.open();return rt!==null&&rt.document.write(Me),rt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Wt)==="[object Window]"){var ct='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(L.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+L.filename+'" width="500px" height="400px" /></body></html>',kt=Wt.open();if(kt!==null){kt.document.write(ct);var Mt=this;kt.document.documentElement.querySelector("#pdfViewer").onload=function(){kt.document.title=L.filename,kt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Mt.output("bloburl"))}}return kt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Wt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Lt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",L)+'"></iframe></body></html>',Xn=Wt.open();if(Xn!==null&&(Xn.document.write(Lt),Xn.document.title=L.filename),Xn||typeof safari>"u")return Xn;break;case"datauri":case"dataurl":return Wt.document.location.href=this.output("datauristring",L);default:return null}},Wr.foo=function(){try{return Wr.apply(this,arguments)}catch(Q){var v=Q.stack||"";~v.indexOf(" at ")&&(v=v.split(" at ")[1]);var L="Error in function "+v.split(`
`)[0].split("<")[0]+": "+Q.message;if(!Wt.console)throw new Error(L);Wt.console.error(L,Q),Wt.alert&&alert(L)}},Wr.foo.bar=Wr,Wr.foo),ci=function(v){return Array.isArray(Gr)===!0&&Gr.indexOf(v)>-1};switch(r){case"pt":zt=1;break;case"mm":zt=72/25.4;break;case"cm":zt=72/2.54;break;case"in":zt=72;break;case"px":zt=ci("px_scaling")==1?.75:96/72;break;case"pc":case"em":zt=12;break;case"ex":zt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);zt=r}var ur=null;Oe(),he();var kr=g.__private__.getPageInfo=g.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:nt[v].objId,pageNumber:v,pageContext:nt[v]}},vs=g.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var L in nt)if(nt[L].objId===v)break;return kr(L)},Oa=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:nt[Y].objId,pageNumber:Y,pageContext:nt[Y]}};g.addPage=function(){return Bs.apply(this,arguments),this},g.setPage=function(){return _c.apply(this,arguments),dt.call(this,Be[Y]),this},g.insertPage=function(v){return this.addPage(),this.movePage(Y,v),this},g.movePage=function(v,L){var Q,te;if(v>L){Q=Be[v],te=nt[v];for(var ce=v;ce>L;ce--)Be[ce]=Be[ce-1],nt[ce]=nt[ce-1];Be[L]=Q,nt[L]=te,this.setPage(L)}else if(v<L){Q=Be[v],te=nt[v];for(var Ae=v;Ae<L;Ae++)Be[Ae]=Be[Ae+1],nt[Ae]=nt[Ae+1];Be[L]=Q,nt[L]=te,this.setPage(L)}return this},g.deletePage=function(){return Io.apply(this,arguments),this},g.__private__.text=g.text=function(v,L,Q,te,ce){var Ae,Me,rt,ct,kt,Mt,Lt,Xn,zn,wn=(te=te||{}).scope||this;if(typeof v=="number"&&typeof L=="number"&&(typeof Q=="string"||Array.isArray(Q))){var f=Q;Q=L,L=v,v=f}if(arguments[3]instanceof ft==0?(rt=arguments[4],ct=arguments[5],or(Lt=arguments[3])==="object"&&Lt!==null||(typeof rt=="string"&&(ct=rt,rt=null),typeof Lt=="string"&&(ct=Lt,Lt=null),typeof Lt=="number"&&(rt=Lt,Lt=null),te={flags:Lt,angle:rt,align:ct})):(w("The transform parameter of text() with a Matrix value"),zn=ce),isNaN(L)||isNaN(Q)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return wn;var A,R="",q=typeof te.lineHeightFactor=="number"?te.lineHeightFactor:Hi,se=wn.internal.scaleFactor;function ge(Kn){return Kn=Kn.split("	").join(Array(te.TabLen||9).join(" ")),Di(Kn,Lt)}function Ge(Kn){for(var dr,Jr=Kn.concat(),Ni=[],bu=Jr.length;bu--;)typeof(dr=Jr.shift())=="string"?Ni.push(dr):Array.isArray(Kn)&&(dr.length===1||dr[1]===void 0&&dr[2]===void 0)?Ni.push(dr[0]):Ni.push([dr[0],dr[1],dr[2]]);return Ni}function Dt(Kn,dr){var Jr;if(typeof Kn=="string")Jr=dr(Kn)[0];else if(Array.isArray(Kn)){for(var Ni,bu,Xg=Kn.concat(),wf=[],T_=Xg.length;T_--;)typeof(Ni=Xg.shift())=="string"?wf.push(dr(Ni)[0]):Array.isArray(Ni)&&typeof Ni[0]=="string"&&(bu=dr(Ni[0],Ni[1],Ni[2]),wf.push([bu[0],bu[1],bu[2]]));Jr=wf}return Jr}var d=!1,b=!0;if(typeof v=="string")d=!0;else if(Array.isArray(v)){var N=v.concat();Me=[];for(var U,ie=N.length;ie--;)(typeof(U=N.shift())!="string"||Array.isArray(U)&&typeof U[0]!="string")&&(b=!1);d=b}if(d===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var ve=Fe/wn.internal.scaleFactor,qe=ve*(q-1);switch(te.baseline){case"bottom":Q-=qe;break;case"top":Q+=ve-qe;break;case"hanging":Q+=ve-2*qe;break;case"middle":Q+=ve/2-qe}if((Mt=te.maxWidth||0)>0&&(typeof v=="string"?v=wn.splitTextToSize(v,Mt):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(Kn,dr){return Kn.concat(wn.splitTextToSize(dr,Mt))},[]))),Ae={text:v,x:L,y:Q,options:te,mutex:{pdfEscape:Di,activeFontKey:st,fonts:jt,activeFontSize:Fe}},mn.publish("preProcessText",Ae),v=Ae.text,rt=(te=Ae.options).angle,zn instanceof ft==0&&rt&&typeof rt=="number"){rt*=Math.PI/180,te.rotationDirection===0&&(rt=-rt),K===W&&(rt=-rt);var pn=Math.cos(rt),lr=Math.sin(rt);zn=new ft(pn,lr,-lr,pn,0,0)}else rt&&rt instanceof ft&&(zn=rt);K!==W||zn||(zn=cr),(kt=te.charSpace||Gi)!==void 0&&(R+=T(I(kt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Xn=te.horizontalScale)!==void 0&&(R+=T(100*Xn)+` Tz
`),te.lang;var Ut=-1,gr=te.renderingMode!==void 0?te.renderingMode:te.stroke,Mr=wn.internal.getCurrentPageInfo().pageContext;switch(gr){case 0:case!1:case"fill":Ut=0;break;case 1:case!0:case"stroke":Ut=1;break;case 2:case"fillThenStroke":Ut=2;break;case 3:case"invisible":Ut=3;break;case 4:case"fillAndAddForClipping":Ut=4;break;case 5:case"strokeAndAddPathForClipping":Ut=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ut=6;break;case 7:case"addToPathForClipping":Ut=7}var Ba=Mr.usedRenderingMode!==void 0?Mr.usedRenderingMode:-1;Ut!==-1?R+=Ut+` Tr
`:Ba!==-1&&(R+=`0 Tr
`),Ut!==-1&&(Mr.usedRenderingMode=Ut),ct=te.align||"left";var Tr,ca=Fe*q,_u=wn.internal.pageSize.getWidth(),Wg=jt[st];kt=te.charSpace||Gi,Mt=te.maxWidth||0,Lt=Object.assign({autoencode:!0,noBOM:!0},te.flags);var ml=[],Od=function(Kn){return wn.getStringUnitWidth(Kn,{font:Wg,charSpace:kt,fontSize:Fe,doKerning:!1})*Fe/se};if(Object.prototype.toString.call(v)==="[object Array]"){var Co;Me=Ge(v),ct!=="left"&&(Tr=Me.map(Od));var Do,yl=0;if(ct==="right"){L-=Tr[0],v=[],ie=Me.length;for(var wu=0;wu<ie;wu++)wu===0?(Do=rs(L),Co=Ir(Q)):(Do=I(yl-Tr[wu]),Co=-ca),v.push([Me[wu],Do,Co]),yl=Tr[wu]}else if(ct==="center"){L-=Tr[0]/2,v=[],ie=Me.length;for(var vl=0;vl<ie;vl++)vl===0?(Do=rs(L),Co=Ir(Q)):(Do=I((yl-Tr[vl])/2),Co=-ca),v.push([Me[vl],Do,Co]),yl=Tr[vl]}else if(ct==="left"){v=[],ie=Me.length;for(var Kg=0;Kg<ie;Kg++)v.push(Me[Kg])}else if(ct==="justify"&&Wg.encoding==="Identity-H"){v=[],ie=Me.length,Mt=Mt!==0?Mt:_u;for(var _f=0,Yr=0;Yr<ie;Yr++)if(Co=Yr===0?Ir(Q):-ca,Do=Yr===0?rs(L):_f,Yr<ie-1){var I_=I((Mt-Tr[Yr])/(Me[Yr].split(" ").length-1)),Cc=Me[Yr].split(" ");v.push([Cc[0]+" ",Do,Co]),_f=0;for(var Dc=1;Dc<Cc.length;Dc++){var Qg=(Od(Cc[Dc-1]+" "+Cc[Dc])-Od(Cc[Dc]))*se+I_;Dc==Cc.length-1?v.push([Cc[Dc],Qg,0]):v.push([Cc[Dc]+" ",Qg,0]),_f-=Qg}}else v.push([Me[Yr],Do,Co]);v.push(["",_f,0])}else{if(ct!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],ie=Me.length,Mt=Mt!==0?Mt:_u,Yr=0;Yr<ie;Yr++){Co=Yr===0?Ir(Q):-ca,Do=Yr===0?rs(L):0;var Yg=Me[Yr].split(" ").length-1,Jg=Yg>0?(Mt-Tr[Yr])/Yg:0;Yr<ie-1?ml.push(T(I(Jg))):ml.push(0),v.push([Me[Yr],Do,Co])}}}(typeof te.R2L=="boolean"?te.R2L:vt)===!0&&(v=Dt(v,function(Kn,dr,Jr){return[Kn.split("").reverse().join(""),dr,Jr]})),Ae={text:v,x:L,y:Q,options:te,mutex:{pdfEscape:Di,activeFontKey:st,fonts:jt,activeFontSize:Fe}},mn.publish("postProcessText",Ae),v=Ae.text,A=Ae.mutex.isHex||!1;var Zg=jt[st].encoding;Zg!=="WinAnsiEncoding"&&Zg!=="StandardEncoding"||(v=Dt(v,function(Kn,dr,Jr){return[ge(Kn),dr,Jr]})),Me=Ge(v),v=[];for(var _l,wl,bl,Ld=Array.isArray(Me[0])?1:0,El="",Fd=function(Kn,dr,Jr){var Ni="";return Jr instanceof ft?(Jr=typeof te.angle=="number"?ro(Jr,new ft(1,0,0,1,Kn,dr)):ro(new ft(1,0,0,1,Kn,dr),Jr),K===W&&(Jr=ro(new ft(1,0,0,-1,0,0),Jr)),Ni=Jr.join(" ")+` Tm
`):Ni=T(Kn)+" "+T(dr)+` Td
`,Ni},ua=0;ua<Me.length;ua++){switch(El="",Ld){case 1:bl=(A?"<":"(")+Me[ua][0]+(A?">":")"),_l=parseFloat(Me[ua][1]),wl=parseFloat(Me[ua][2]);break;case 0:bl=(A?"<":"(")+Me[ua]+(A?">":")"),_l=rs(L),wl=Ir(Q)}ml!==void 0&&ml[ua]!==void 0&&(El=ml[ua]+` Tw
`),ua===0?v.push(El+Fd(_l,wl,zn)+bl):Ld===0?v.push(El+bl):Ld===1&&v.push(El+Fd(_l,wl,zn)+bl)}v=Ld===0?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var xc=`BT
/`;return xc+=st+" "+Fe+` Tf
`,xc+=T(Fe*q)+` TL
`,xc+=ia+`
`,xc+=R,xc+=v,H(xc+="ET"),y[st]=!0,wn};var Ec=g.__private__.clip=g.clip=function(v){return H(v==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Ec("evenodd")},g.__private__.discardPath=g.discardPath=function(){return H("n"),this};var js=g.__private__.isValidStyle=function(v){var L=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(L=!0),L};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(v){return js(v)&&(u=v),this};var jn=g.__private__.getStyle=g.getStyle=function(v){var L=u;switch(v){case"D":case"S":L="S";break;case"F":L="f";break;case"FD":case"DF":L="B";break;case"f":case"f*":case"B":case"B*":L=v}return L},La=g.close=function(){return H("h"),this};g.stroke=function(){return H("S"),this},g.fill=function(v){return $i("f",v),this},g.fillEvenOdd=function(v){return $i("f*",v),this},g.fillStroke=function(v){return $i("B",v),this},g.fillStrokeEvenOdd=function(v){return $i("B*",v),this};var $i=function(v,L){or(L)==="object"?fu(L,v):H(v)},Kr=function(v){v===null||K===W&&v===void 0||(v=jn(v),H(v))};function hl(v,L,Q,te,ce){var Ae=new dg(L||this.boundingBox,Q||this.xStep,te||this.yStep,this.gState,ce||this.matrix);Ae.stream=this.stream;var Me=v+"$$"+this.cloneIndex+++"$$";return oi(Me,Ae),Ae}var fu=function(v,L){var Q=Un[v.key],te=ht[Q];if(te instanceof $h)H("q"),H(fl(L)),te.gState&&g.setGState(te.gState),H(v.matrix.toString()+" cm"),H("/"+Q+" sh"),H("Q");else if(te instanceof dg){var ce=new ft(1,0,0,-1,0,co());v.matrix&&(ce=ce.multiply(v.matrix||cr),Q=hl.call(te,v.key,v.boundingBox,v.xStep,v.yStep,ce).id),H("q"),H("/Pattern cs"),H("/"+Q+" scn"),te.gState&&g.setGState(te.gState),H(L),H("Q")}},fl=function(v){switch(v){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ic=g.moveTo=function(v,L){return H(T(I(v))+" "+T(ee(L))+" m"),this},pu=g.lineTo=function(v,L){return H(T(I(v))+" "+T(ee(L))+" l"),this},ui=g.curveTo=function(v,L,Q,te,ce,Ae){return H([T(I(v)),T(ee(L)),T(I(Q)),T(ee(te)),T(I(ce)),T(ee(Ae)),"c"].join(" ")),this};g.__private__.line=g.line=function(v,L,Q,te,ce){if(isNaN(v)||isNaN(L)||isNaN(Q)||isNaN(te)||!js(ce))throw new Error("Invalid arguments passed to jsPDF.line");return K===G?this.lines([[Q-v,te-L]],v,L,[1,1],ce||"S"):this.lines([[Q-v,te-L]],v,L,[1,1]).stroke()},g.__private__.lines=g.lines=function(v,L,Q,te,ce,Ae){var Me,rt,ct,kt,Mt,Lt,Xn,zn,wn,f,A,R;if(typeof v=="number"&&(R=Q,Q=L,L=v,v=R),te=te||[1,1],Ae=Ae||!1,isNaN(L)||isNaN(Q)||!Array.isArray(v)||!Array.isArray(te)||!js(ce)||typeof Ae!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ic(L,Q),Me=te[0],rt=te[1],kt=v.length,f=L,A=Q,ct=0;ct<kt;ct++)(Mt=v[ct]).length===2?(f=Mt[0]*Me+f,A=Mt[1]*rt+A,pu(f,A)):(Lt=Mt[0]*Me+f,Xn=Mt[1]*rt+A,zn=Mt[2]*Me+f,wn=Mt[3]*rt+A,f=Mt[4]*Me+f,A=Mt[5]*rt+A,ui(Lt,Xn,zn,wn,f,A));return Ae&&La(),Kr(ce),this},g.path=function(v){for(var L=0;L<v.length;L++){var Q=v[L],te=Q.c;switch(Q.op){case"m":Ic(te[0],te[1]);break;case"l":pu(te[0],te[1]);break;case"c":ui.apply(this,te);break;case"h":La()}}return this},g.__private__.rect=g.rect=function(v,L,Q,te,ce){if(isNaN(v)||isNaN(L)||isNaN(Q)||isNaN(te)||!js(ce))throw new Error("Invalid arguments passed to jsPDF.rect");return K===G&&(te=-te),H([T(I(v)),T(ee(L)),T(I(Q)),T(I(te)),"re"].join(" ")),Kr(ce),this},g.__private__.triangle=g.triangle=function(v,L,Q,te,ce,Ae,Me){if(isNaN(v)||isNaN(L)||isNaN(Q)||isNaN(te)||isNaN(ce)||isNaN(Ae)||!js(Me))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Q-v,te-L],[ce-Q,Ae-te],[v-ce,L-Ae]],v,L,[1,1],Me,!0),this},g.__private__.roundedRect=g.roundedRect=function(v,L,Q,te,ce,Ae,Me){if(isNaN(v)||isNaN(L)||isNaN(Q)||isNaN(te)||isNaN(ce)||isNaN(Ae)||!js(Me))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var rt=4/3*(Math.SQRT2-1);return ce=Math.min(ce,.5*Q),Ae=Math.min(Ae,.5*te),this.lines([[Q-2*ce,0],[ce*rt,0,ce,Ae-Ae*rt,ce,Ae],[0,te-2*Ae],[0,Ae*rt,-ce*rt,Ae,-ce,Ae],[2*ce-Q,0],[-ce*rt,0,-ce,-Ae*rt,-ce,-Ae],[0,2*Ae-te],[0,-Ae*rt,ce*rt,-Ae,ce,-Ae]],v+ce,L,[1,1],Me,!0),this},g.__private__.ellipse=g.ellipse=function(v,L,Q,te,ce){if(isNaN(v)||isNaN(L)||isNaN(Q)||isNaN(te)||!js(ce))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ae=4/3*(Math.SQRT2-1)*Q,Me=4/3*(Math.SQRT2-1)*te;return Ic(v+Q,L),ui(v+Q,L-Me,v+Ae,L-te,v,L-te),ui(v-Ae,L-te,v-Q,L-Me,v-Q,L),ui(v-Q,L+Me,v-Ae,L+te,v,L+te),ui(v+Ae,L+te,v+Q,L+Me,v+Q,L),Kr(ce),this},g.__private__.circle=g.circle=function(v,L,Q,te){if(isNaN(v)||isNaN(L)||isNaN(Q)||!js(te))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,L,Q,Q,te)},g.setFont=function(v,L,Q){return Q&&(L=P(L,Q)),st=bc(v,L,{disableWarning:!1}),this};var Fa=g.__private__.getFont=g.getFont=function(){return jt[bc.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var v,L,Q={};for(v in Kt)if(Kt.hasOwnProperty(v))for(L in Q[v]=[],Kt[v])Kt[v].hasOwnProperty(L)&&Q[v].push(L);return Q},g.addFont=function(v,L,Q,te,ce){var Ae=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ae.indexOf(arguments[3])!==-1?ce=arguments[3]:arguments[3]&&Ae.indexOf(arguments[3])==-1&&(Q=P(Q,te)),hu.call(this,v,L,Q,ce=ce||"Identity-H")};var Hi,Tc=n.lineWidth||.200025,Us=g.__private__.getLineWidth=g.getLineWidth=function(){return Tc},Ot=g.__private__.setLineWidth=g.setLineWidth=function(v){return Tc=v,H(T(I(v))+" w"),this};g.__private__.setLineDash=bt.API.setLineDash=bt.API.setLineDashPattern=function(v,L){if(v=v||[],L=L||0,isNaN(L)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(Q){return T(I(Q))}).join(" "),L=T(I(L)),H("["+v+"] "+L+" d"),this};var qs=g.__private__.getLineHeight=g.getLineHeight=function(){return Fe*Hi};g.__private__.getLineHeight=g.getLineHeight=function(){return Fe*Hi};var Ac=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(Hi=v),this},pl=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Hi};Ac(n.lineHeight);var rs=g.__private__.getHorizontalCoordinate=function(v){return I(v)},Ir=g.__private__.getVerticalCoordinate=function(v){return K===W?v:nt[Y].mediaBox.topRightY-nt[Y].mediaBox.bottomLeftY-I(v)},gl=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(v){return T(rs(v))},gu=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(v){return T(Ir(v))},Tn=n.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return ji(Tn)},g.__private__.setStrokeColor=g.setDrawColor=function(v,L,Q,te){return Tn=Ui({ch1:v,ch2:L,ch3:Q,ch4:te,pdfColorType:"draw",precision:2}),H(Tn),this};var ra=n.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return ji(ra)},g.__private__.setFillColor=g.setFillColor=function(v,L,Q,te){return ra=Ui({ch1:v,ch2:L,ch3:Q,ch4:te,pdfColorType:"fill",precision:2}),H(ra),this};var ia=n.textColor||"0 g",sa=g.__private__.getTextColor=g.getTextColor=function(){return ji(ia)};g.__private__.setTextColor=g.setTextColor=function(v,L,Q,te){return ia=Ui({ch1:v,ch2:L,ch3:Q,ch4:te,pdfColorType:"text",precision:3}),this};var Gi=n.charSpace,mu=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Gi||0)};g.__private__.setCharSpace=g.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Gi=v,this};var so=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(v){var L=g.CapJoinStyles[v];if(L===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return so=L,H(L+" J"),this};var yn=0;g.__private__.setLineJoin=g.setLineJoin=function(v){var L=g.CapJoinStyles[v];if(L===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return yn=L,H(L+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return H(T(I(v))+" M"),this},g.GState=TE,g.setGState=function(v){(v=typeof v=="string"?It[Vt[v]]:yu(null,v)).equals(Ln)||(H("/"+v.id+" gs"),Ln=v)};var yu=function(v,L){if(!v||!Vt[v]){var Q=!1;for(var te in It)if(It.hasOwnProperty(te)&&It[te].equals(L)){Q=!0;break}if(Q)L=It[te];else{var ce="GS"+(Object.keys(It).length+1).toString(10);It[ce]=L,L.id=ce}return v&&(Vt[v]=L.id),mn.publish("addGState",L),L}};g.addGState=function(v,L){return yu(v,L),this},g.saveGraphicsState=function(){return H("q"),Bn.push({key:st,size:Fe,color:ia}),this},g.restoreGraphicsState=function(){H("Q");var v=Bn.pop();return st=v.key,Fe=v.size,ia=v.color,Ln=null,this},g.setCurrentTransformationMatrix=function(v){return H(v.toString()+" cm"),this},g.comment=function(v){return H("#"+v),this};var Ao=function(v,L){var Q=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Q},set:function(Ae){isNaN(Ae)||(Q=parseFloat(Ae))}});var te=L||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return te},set:function(Ae){isNaN(Ae)||(te=parseFloat(Ae))}});var ce="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ce},set:function(Ae){ce=Ae.toString()}}),this},oo=function(v,L,Q,te){Ao.call(this,v,L),this.type="rect";var ce=Q||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ce},set:function(Me){isNaN(Me)||(ce=parseFloat(Me))}});var Ae=te||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ae},set:function(Me){isNaN(Me)||(Ae=parseFloat(Me))}}),this},oa=function(){this.page=$t,this.currentPage=Y,this.pages=Be.slice(0),this.pagesContext=nt.slice(0),this.x=pt,this.y=pr,this.matrix=an,this.width=Va(Y),this.height=vu(Y),this.outputDestination=Ye,this.id="",this.objectNumber=-1};oa.prototype.restore=function(){$t=this.page,Y=this.currentPage,nt=this.pagesContext,Be=this.pages,pt=this.x,pr=this.y,an=this.matrix,xi(Y,this.width),ao(Y,this.height),Ye=this.outputDestination};var aa=function(v,L,Q,te,ce){Ls.push(new oa),$t=Y=0,Be=[],pt=v,pr=L,an=ce,io([Q,te])};for(var is in g.beginFormObject=function(v,L,Q,te,ce){return aa(v,L,Q,te,ce),this},g.endFormObject=function(v){return(function(L){if(hs[L])Ls.pop().restore();else{var Q=new oa,te="Xo"+(Object.keys(_r).length+1).toString(10);Q.id=te,hs[L]=te,_r[te]=Q,mn.publish("addFormObject",Q),Ls.pop().restore()}})(v),this},g.doFormObject=function(v,L){var Q=_r[hs[v]];return H("q"),H(L.toString()+" cm"),H("/"+Q.id+" Do"),H("Q"),this},g.getFormObject=function(v){var L=_r[hs[v]];return{x:L.x,y:L.y,width:L.width,height:L.height,matrix:L.matrix}},g.save=function(v,L){return v=v||"generated.pdf",(L=L||{}).returnPromise=L.returnPromise||!1,L.returnPromise===!1?(zh(na(zi()),v),typeof zh.unload=="function"&&Wt.setTimeout&&setTimeout(zh.unload,911),this):new Promise(function(Q,te){try{var ce=zh(na(zi()),v);typeof zh.unload=="function"&&Wt.setTimeout&&setTimeout(zh.unload,911),Q(ce)}catch(Ae){te(Ae.message)}})},bt.API)bt.API.hasOwnProperty(is)&&(is==="events"&&bt.API.events.length?(function(v,L){var Q,te,ce;for(ce=L.length-1;ce!==-1;ce--)Q=L[ce][0],te=L[ce][1],v.subscribe.apply(v,[Q].concat(typeof te=="function"?[te]:te))})(mn,bt.API.events):g[is]=bt.API[is]);function Va(v){return nt[v].mediaBox.topRightX-nt[v].mediaBox.bottomLeftX}function xi(v,L){nt[v].mediaBox.topRightX=L+nt[v].mediaBox.bottomLeftX}function vu(v){return nt[v].mediaBox.topRightY-nt[v].mediaBox.bottomLeftY}function ao(v,L){nt[v].mediaBox.topRightY=L+nt[v].mediaBox.bottomLeftY}var Qr=g.getPageWidth=function(v){return Va(v=v||Y)/zt},Sc=g.setPageWidth=function(v,L){xi(v,L*zt)},co=g.getPageHeight=function(v){return vu(v=v||Y)/zt},So=g.setPageHeight=function(v,L){ao(v,L*zt)};return g.internal={pdfEscape:Di,getStyle:jn,getFont:Fa,getFontSize:Ke,getCharSpace:mu,getTextColor:sa,getLineHeight:qs,getLineHeightFactor:pl,getLineWidth:Us,write:Je,getHorizontalCoordinate:rs,getVerticalCoordinate:Ir,getCoordinateString:gl,getVerticalCoordinateString:gu,collections:{},newObject:qn,newAdditionalObject:fs,newObjectDeferred:Er,newObjectDeferredBegin:wr,getFilters:Ci,putStream:ai,events:mn,scaleFactor:zt,pageSize:{getWidth:function(){return Qr(Y)},setWidth:function(v){Sc(Y,v)},getHeight:function(){return co(Y)},setHeight:function(v){So(Y,v)}},encryptionOptions:l,encryption:ur,getEncryptor:function(v){return l!==null?ur.encryptor(v,0):function(L){return L}},output:Fn,getNumberOfPages:wc,get pages(){return Be},out:H,f2:_,f3:S,getPageInfo:kr,getPageInfoByObjId:vs,getCurrentPageInfo:Oa,getPDFVersion:M,Point:Ao,Rectangle:oo,Matrix:ft,hasHotfix:ci},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Qr(Y)},set:function(v){Sc(Y,v)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return co(Y)},set:function(v){So(Y,v)},enumerable:!0,configurable:!0}),function(v){for(var L=0,Q=At.length;L<Q;L++){var te=hu.call(this,v[L][0],v[L][1],v[L][2],At[L][3],!0);p===!1&&(y[te]=!0);var ce=v[L][0].split("-");Eo({id:te,fontName:ce[0],fontStyle:ce[1]||""})}mn.publish("addFonts",{fonts:jt,dictionary:Kt})}.call(g,At),st="F1",Bs(i,t),mn.publish("initialized"),g}ug.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},ug.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ug.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},ug.prototype.processOwnerPassword=function(n,e){return mR(gR(e).substr(0,5),n)},ug.prototype.encryptor=function(n,e){var t=gR(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return mR(t,r)}},TE.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||or(n)!==or(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},bt.API={events:[]},bt.version="3.0.4";var $r=bt.API,_R=1,Gh=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ag=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Xt=function(n){return n.toFixed(2)},wd=function(n){return n.toFixed(5)};$r.__acroform__={};var _o=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},kU=function(n){return n*_R},nu=function(n){var e=new n7,t=lt.internal.getHeight(n)||0,r=lt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Xt(r)),Number(Xt(t))],e},Dae=$r.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},xae=$r.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},Nae=$r.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},ni=$r.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Nae(n,e-1)},ri=$r.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Dae(n,e-1)},ii=$r.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return xae(n,e-1)},Rae=$r.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],s=n[1],o=n[2],a=n[3],c={};return c.lowerLeft_X=t(i)||0,c.lowerLeft_Y=r(s+a)||0,c.upperRight_X=t(i+o)||0,c.upperRight_Y=r(s)||0,[Number(Xt(c.lowerLeft_X)),Number(Xt(c.lowerLeft_Y)),Number(Xt(c.upperRight_X)),Number(Xt(c.upperRight_Y))]},Pae=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=yR(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+Xt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=nu(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},yR=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(_){return _.split(`
`)}):i.map(function(_){return[_]});var s=t,o=lt.internal.getHeight(n)||0;o=o<0?-o:o;var a=lt.internal.getWidth(n)||0;a=a<0?-a:a;var c=function(_,S,I){if(_+1<i.length){var ee=S+" "+i[_+1][0];return mE(ee,n,I).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var u,l,p=mE("3",n,s).height,y=n.multiline?o-s:(o-p)/2,g=y+=2,D=0,M=0,k=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+mE(e,n,s=12).width+", FieldWidth:"+a+`
`;break}for(var O="",G=0,W=0;W<i.length;W++)if(i.hasOwnProperty(W)){var K=!1;if(i[W].length!==1&&k!==i[W].length-1){if((p+2)*(G+2)+2>o)continue e;O+=i[W][k],K=!0,M=W,W--}else{O=(O+=i[W][k]+" ").substr(O.length-1)==" "?O.substr(0,O.length-1):O;var ue=parseInt(W),fe=c(ue,O,s),P=W>=i.length-1;if(fe&&!P){O+=" ",k=0;continue}if(fe||P){if(P)M=ue;else if(n.multiline&&(p+2)*(G+2)+2>o)continue e}else{if(!n.multiline||(p+2)*(G+2)+2>o)continue e;M=ue}}for(var T="",w=D;w<=M;w++){var x=i[w];if(n.multiline){if(w===M){T+=x[k]+" ",k=(k+1)%x.length;continue}if(w===D){T+=x[x.length-1]+" ";continue}}T+=x[0]+" "}switch(T=T.substr(T.length-1)==" "?T.substr(0,T.length-1):T,l=mE(T,n,s).width,n.textAlign){case"right":u=a-l-2;break;case"center":u=(a-l)/2;break;default:u=2}e+=Xt(u)+" "+Xt(g)+` Td
`,e+="("+Gh(T)+`) Tj
`,e+=-Xt(u)+` 0 Td
`,g=-(s+2),l=0,D=K?M:M+1,G++,O=""}break}return r.text=e,r.fontSize=s,r},mE=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},kae={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Mae=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},Oae=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(dc.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(kae)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");_R=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new r7,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&Mae(s,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],c=[],u=a.Rect;if(a.Rect&&(a.Rect=Rae(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=lt.createDefaultAppearanceStream(a),or(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(c=a.getKeyValueListForStream()),a.Rect=u,a.hasAppearanceStream&&!a.appearanceStreamContent){var l=Pae(a);c.push({key:"AP",value:"<</N "+l+">>"}),i.internal.acroformPlugin.xForms.push(l)}if(a.appearanceStreamContent){var p="";for(var y in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(y)){var g=a.appearanceStreamContent[y];if(p+="/"+y+" ",p+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var o in g)if(g.hasOwnProperty(o)){var D=g[o];typeof D=="function"&&(D=D.call(i,a)),p+="/"+o+" "+D+" ",i.internal.acroformPlugin.xForms.indexOf(D)>=0||i.internal.acroformPlugin.xForms.push(D)}}else typeof(D=g)=="function"&&(D=D.call(i,a)),p+="/"+o+" "+D,i.internal.acroformPlugin.xForms.indexOf(D)>=0||i.internal.acroformPlugin.xForms.push(D);p+=">>"}c.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:a.objId}),i.internal.out("endobj")}s&&(function(M,k){for(var O in M)if(M.hasOwnProperty(O)){var G=O,W=M[O];k.internal.newObjectDeferredBegin(W.objId,!0),or(W)==="object"&&typeof W.putStream=="function"&&W.putStream(),delete M[G]}})(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},t7=$r.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(o){return o};if(Array.isArray(n)){for(var i="[",s=0;s<n.length;s++)switch(s!==0&&(i+=" "),or(n[s])){case"boolean":case"number":case"object":i+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+Gh(r(n[s].toString()))+")"):i+=n[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},lR=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+Gh(r(n))+")"},ru=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ru.prototype.toString=function(){return this.objId+" 0 R"},ru.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},ru.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:t7(i,this.objId,this.scope)}):i instanceof ru?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var n7=function(){ru.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};_o(n7,ru);var r7=function(){ru.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Gh(t(n))+")"}},set:function(t){n=t}})};_o(r7,ru);var dc=function n(){ru.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(O){if(isNaN(O))throw new Error('Invalid value "'+O+'" for attribute F supplied.');e=O}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ni(e,3)},set:function(O){O?this.F=ri(e,3):this.F=ii(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(O){if(isNaN(O))throw new Error('Invalid value "'+O+'" for attribute Ff supplied.');t=O}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(O){r=O!==void 0?O:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(O){r[0]=O}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(O){r[1]=O}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(O){r[2]=O}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(O){r[3]=O}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(O){switch(O){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=O;break;default:throw new Error('Invalid value "'+O+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof AE)return;s="FieldObject"+n.FieldNum++}var O=function(G){return G};return this.scope&&(O=this.scope.internal.getEncryptor(this.objId)),"("+Gh(O(s))+")"},set:function(O){s=O.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(O){s=O}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(O){o=O}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(O){a=O}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(O){c=O}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/_R:u},set:function(O){u=O}});var l="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return l},set:function(O){l=O}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof AE||this instanceof Hh))return lR(p,this.objId,this.scope)},set:function(O){O=O.toString(),p=O}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof es==0?lR(y,this.objId,this.scope):y},set:function(O){O=O.toString(),y=this instanceof es==0?O.substr(0,1)==="("?ag(O.substr(1,O.length-2)):ag(O):O}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof es==1?ag(y.substr(1,y.length-1)):y},set:function(O){O=O.toString(),y=this instanceof es==1?"/"+O:O}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(O){this.V=O}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof es==0?lR(g,this.objId,this.scope):g},set:function(O){O=O.toString(),g=this instanceof es==0?O.substr(0,1)==="("?ag(O.substr(1,O.length-2)):ag(O):O}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof es==1?ag(g.substr(1,g.length-1)):g},set:function(O){O=O.toString(),g=this instanceof es==1?"/"+O:O}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var D,M=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return M},set:function(O){O=!!O,M=O}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(D)return D},set:function(O){D=O}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,1)},set:function(O){O?this.Ff=ri(this.Ff,1):this.Ff=ii(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,2)},set:function(O){O?this.Ff=ri(this.Ff,2):this.Ff=ii(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,3)},set:function(O){O?this.Ff=ri(this.Ff,3):this.Ff=ii(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(O){if([0,1,2].indexOf(O)===-1)throw new Error('Invalid value "'+O+'" for attribute Q supplied.');k=O}}),Object.defineProperty(this,"textAlign",{get:function(){var O;switch(k){case 0:default:O="left";break;case 1:O="center";break;case 2:O="right"}return O},configurable:!0,enumerable:!0,set:function(O){switch(O){case"right":case 2:k=2;break;case"center":case 1:k=1;break;default:k=0}}})};_o(dc,ru);var hg=function(){dc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return t7(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=(function(s,o,a){a||(a=1);for(var c,u=[];c=o.exec(s);)u.push(c[a]);return u})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,18)},set:function(t){t?this.Ff=ri(this.Ff,18):this.Ff=ii(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=ri(this.Ff,19):this.Ff=ii(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,20)},set:function(t){t?(this.Ff=ri(this.Ff,20),e.sort()):this.Ff=ii(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,22)},set:function(t){t?this.Ff=ri(this.Ff,22):this.Ff=ii(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,23)},set:function(t){t?this.Ff=ri(this.Ff,23):this.Ff=ii(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,27)},set:function(t){t?this.Ff=ri(this.Ff,27):this.Ff=ii(this.Ff,27)}}),this.hasAppearanceStream=!1};_o(hg,dc);var fg=function(){hg.call(this),this.fontName="helvetica",this.combo=!1};_o(fg,hg);var pg=function(){fg.call(this),this.combo=!0};_o(pg,fg);var wE=function(){pg.call(this),this.edit=!0};_o(wE,pg);var es=function(){dc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,15)},set:function(t){t?this.Ff=ri(this.Ff,15):this.Ff=ii(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,16)},set:function(t){t?this.Ff=ri(this.Ff,16):this.Ff=ii(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,17)},set:function(t){t?this.Ff=ri(this.Ff,17):this.Ff=ii(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,26)},set:function(t){t?this.Ff=ri(this.Ff,26):this.Ff=ii(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Gh(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){or(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};_o(es,dc);var bE=function(){es.call(this),this.pushButton=!0};_o(bE,es);var gg=function(){es.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};_o(gg,es);var AE=function(){var n,e;dc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Gh(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){or(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=lt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};_o(AE,dc),gg.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},gg.prototype.createOption=function(n){var e=new AE;return e.Parent=this,e.optionName=n,this.Kids.push(e),Lae.call(this.scope,e),e};var EE=function(){es.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=lt.CheckBox.createAppearanceStream()};_o(EE,es);var Hh=function(){dc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,13)},set:function(e){e?this.Ff=ri(this.Ff,13):this.Ff=ii(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,21)},set:function(e){e?this.Ff=ri(this.Ff,21):this.Ff=ii(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,23)},set:function(e){e?this.Ff=ri(this.Ff,23):this.Ff=ii(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,24)},set:function(e){e?this.Ff=ri(this.Ff,24):this.Ff=ii(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,25)},set:function(e){e?this.Ff=ri(this.Ff,25):this.Ff=ii(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,26)},set:function(e){e?this.Ff=ri(this.Ff,26):this.Ff=ii(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};_o(Hh,dc);var IE=function(){Hh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ni(this.Ff,14)},set:function(n){n?this.Ff=ri(this.Ff,14):this.Ff=ii(this.Ff,14)}}),this.password=!0};_o(IE,Hh);var lt={CheckBox:{createAppearanceStream:function(){return{N:{On:lt.CheckBox.YesNormal},D:{On:lt.CheckBox.YesPushDown,Off:lt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=nu(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=yR(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Xt(lt.internal.getWidth(n))+" "+Xt(lt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Xt(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=nu(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],s=lt.internal.getHeight(n),o=lt.internal.getWidth(n),a=yR(n,n.caption);return i.push("1 g"),i.push("0 0 "+Xt(o)+" "+Xt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Xt(o-1)+" "+Xt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Xt(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=nu(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Xt(lt.internal.getWidth(n))+" "+Xt(lt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:lt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=lt.RadioButton.Circle.YesNormal,e.D[n]=lt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=nu(n);e.scope=n.scope;var t=[],r=lt.internal.getWidth(n)<=lt.internal.getHeight(n)?lt.internal.getWidth(n)/4:lt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=lt.internal.Bezier_C,s=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+wd(lt.internal.getWidth(n)/2)+" "+wd(lt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=nu(n);e.scope=n.scope;var t=[],r=lt.internal.getWidth(n)<=lt.internal.getHeight(n)?lt.internal.getWidth(n)/4:lt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*lt.internal.Bezier_C).toFixed(5)),o=Number((r*lt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+wd(lt.internal.getWidth(n)/2)+" "+wd(lt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+wd(lt.internal.getWidth(n)/2)+" "+wd(lt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=nu(n);e.scope=n.scope;var t=[],r=lt.internal.getWidth(n)<=lt.internal.getHeight(n)?lt.internal.getWidth(n)/4:lt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*lt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+wd(lt.internal.getWidth(n)/2)+" "+wd(lt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:lt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=lt.RadioButton.Cross.YesNormal,e.D[n]=lt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=nu(n);e.scope=n.scope;var t=[],r=lt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Xt(lt.internal.getWidth(n)-2)+" "+Xt(lt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Xt(r.x1.x)+" "+Xt(r.x1.y)+" m"),t.push(Xt(r.x2.x)+" "+Xt(r.x2.y)+" l"),t.push(Xt(r.x4.x)+" "+Xt(r.x4.y)+" m"),t.push(Xt(r.x3.x)+" "+Xt(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=nu(n);e.scope=n.scope;var t=lt.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+Xt(lt.internal.getWidth(n))+" "+Xt(lt.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Xt(lt.internal.getWidth(n)-2)+" "+Xt(lt.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(Xt(t.x1.x)+" "+Xt(t.x1.y)+" m"),r.push(Xt(t.x2.x)+" "+Xt(t.x2.y)+" l"),r.push(Xt(t.x4.x)+" "+Xt(t.x4.y)+" m"),r.push(Xt(t.x3.x)+" "+Xt(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=nu(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Xt(lt.internal.getWidth(n))+" "+Xt(lt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};lt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=lt.internal.getWidth(n),t=lt.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},lt.internal.getWidth=function(n){var e=0;return or(n)==="object"&&(e=kU(n.Rect[2])),e},lt.internal.getHeight=function(n){var e=0;return or(n)==="object"&&(e=kU(n.Rect[3])),e};var Lae=$r.addField=function(n){if(Oae(this,n),!(n instanceof dc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};$r.AcroFormChoiceField=hg,$r.AcroFormListBox=fg,$r.AcroFormComboBox=pg,$r.AcroFormEditBox=wE,$r.AcroFormButton=es,$r.AcroFormPushButton=bE,$r.AcroFormRadioButton=gg,$r.AcroFormCheckBox=EE,$r.AcroFormTextField=Hh,$r.AcroFormPasswordField=IE,$r.AcroFormAppearance=lt,$r.AcroForm={ChoiceField:hg,ListBox:fg,ComboBox:pg,EditBox:wE,Button:es,PushButton:bE,RadioButton:gg,CheckBox:EE,TextField:Hh,PasswordField:IE,Appearance:lt},bt.AcroForm={ChoiceField:hg,ListBox:fg,ComboBox:pg,EditBox:wE,Button:es,PushButton:bE,RadioButton:gg,CheckBox:EE,TextField:Hh,PasswordField:IE,Appearance:lt};var rRe=bt.AcroForm;function i7(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(_,S){var I,ee,ye,Se,Ie,he=t;if((S=S||t)==="RGBA"||_.data!==void 0&&_.data instanceof Uint8ClampedArray&&"height"in _&&"width"in _)return"RGBA";if(fe(_))for(Ie in r)for(ye=r[Ie],I=0;I<ye.length;I+=1){for(Se=!0,ee=0;ee<ye[I].length;ee+=1)if(ye[I][ee]!==void 0&&ye[I][ee]!==_[ee]){Se=!1;break}if(Se===!0){he=Ie;break}}else for(Ie in r)for(ye=r[Ie],I=0;I<ye.length;I+=1){for(Se=!0,ee=0;ee<ye[I].length;ee+=1)if(ye[I][ee]!==void 0&&ye[I][ee]!==_.charCodeAt(ee)){Se=!1;break}if(Se===!0){he=Ie;break}}return he===t&&S!==t&&(he=S),he},s=function _(S){for(var I=this.internal.write,ee=this.internal.putStream,ye=(0,this.internal.getFilters)();ye.indexOf("FlateEncode")!==-1;)ye.splice(ye.indexOf("FlateEncode"),1);S.objectId=this.internal.newObject();var Se=[];if(Se.push({key:"Type",value:"/XObject"}),Se.push({key:"Subtype",value:"/Image"}),Se.push({key:"Width",value:S.width}),Se.push({key:"Height",value:S.height}),S.colorSpace===O.INDEXED?Se.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(S.palette.length/3-1)+" "+("sMask"in S&&S.sMask!==void 0?S.objectId+2:S.objectId+1)+" 0 R]"}):(Se.push({key:"ColorSpace",value:"/"+S.colorSpace}),S.colorSpace===O.DEVICE_CMYK&&Se.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Se.push({key:"BitsPerComponent",value:S.bitsPerComponent}),"decodeParameters"in S&&S.decodeParameters!==void 0&&Se.push({key:"DecodeParms",value:"<<"+S.decodeParameters+">>"}),"transparency"in S&&Array.isArray(S.transparency)&&S.transparency.length>0){for(var Ie="",he=0,Te=S.transparency.length;he<Te;he++)Ie+=S.transparency[he]+" "+S.transparency[he]+" ";Se.push({key:"Mask",value:"["+Ie+"]"})}S.sMask!==void 0&&Se.push({key:"SMask",value:S.objectId+1+" 0 R"});var He=S.filter!==void 0?["/"+S.filter]:void 0;if(ee({data:S.data,additionalKeyValues:Se,alreadyAppliedFilters:He,objectId:S.objectId}),I("endobj"),"sMask"in S&&S.sMask!==void 0){var Oe,B=(Oe=S.sMaskBitsPerComponent)!==null&&Oe!==void 0?Oe:S.bitsPerComponent,Y={width:S.width,height:S.height,colorSpace:"DeviceGray",bitsPerComponent:B,data:S.sMask};"filter"in S&&(Y.decodeParameters="/Predictor ".concat(S.predictor," /Colors 1 /BitsPerComponent ").concat(B," /Columns ").concat(S.width),Y.filter=S.filter),_.call(this,Y)}if(S.colorSpace===O.INDEXED){var X=this.internal.newObject();ee({data:T(new Uint8Array(S.palette)),objectId:X}),I("endobj")}},o=function(){var _=this.internal.collections[e+"images"];for(var S in _)s.call(this,_[S])},a=function(){var _,S=this.internal.collections[e+"images"],I=this.internal.write;for(var ee in S)I("/I"+(_=S[ee]).index,_.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",a))},u=function(){var _=this.internal.collections[e+"images"];return c.call(this),_},l=function(){return Object.keys(this.internal.collections[e+"images"]).length},p=function(_){return typeof n["process"+_.toUpperCase()]=="function"},y=function(_){return or(_)==="object"&&_.nodeType===1},g=function(_,S){if(_.nodeName==="IMG"&&_.hasAttribute("src")){var I=""+_.getAttribute("src");if(I.indexOf("data:image/")===0)return _E(unescape(I).split("base64,").pop());var ee=n.loadFile(I,!0);if(ee!==void 0)return ee}if(_.nodeName==="CANVAS"){if(_.width===0||_.height===0)throw new Error("Given canvas must have data. Canvas width: "+_.width+", height: "+_.height);var ye;switch(S){case"PNG":ye="image/png";break;case"WEBP":ye="image/webp";break;default:ye="image/jpeg"}return _E(_.toDataURL(ye,1).split("base64,").pop())}},D=function(_){var S=this.internal.collections[e+"images"];if(S){for(var I in S)if(_===S[I].alias)return S[I]}},M=function(_,S,I){return _||S||(_=-96,S=-96),_<0&&(_=-1*I.width*72/_/this.internal.scaleFactor),S<0&&(S=-1*I.height*72/S/this.internal.scaleFactor),_===0&&(_=S*I.width/I.height),S===0&&(S=_*I.height/I.width),[_,S]},k=function(_,S,I,ee,ye,Se){var Ie=M.call(this,I,ee,ye),he=this.internal.getCoordinateString,Te=this.internal.getVerticalCoordinateString,He=u.call(this);if(I=Ie[0],ee=Ie[1],He[ye.index]=ye,Se){Se*=Math.PI/180;var Oe=Math.cos(Se),B=Math.sin(Se),Y=function(ne){return ne.toFixed(4)},X=[Y(Oe),Y(B),Y(-1*B),Y(Oe),0,0,"cm"]}this.internal.write("q"),Se?(this.internal.write([1,"0","0",1,he(_),Te(S+ee),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([he(I),"0","0",he(ee),"0","0","cm"].join(" "))):this.internal.write([he(I),"0","0",he(ee),he(_),Te(S+ee),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ye.index+" Do"),this.internal.write("Q")},O=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var G=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},W=n.__addimage__.sHashCode=function(_){var S,I,ee=0;if(typeof _=="string")for(I=_.length,S=0;S<I;S++)ee=(ee<<5)-ee+_.charCodeAt(S),ee|=0;else if(fe(_))for(I=_.byteLength/2,S=0;S<I;S++)ee=(ee<<5)-ee+_[S],ee|=0;return ee},K=n.__addimage__.validateStringAsBase64=function(_){(_=_||"").toString().trim();var S=!0;return _.length===0&&(S=!1),_.length%4!=0&&(S=!1),/^[A-Za-z0-9+/]+$/.test(_.substr(0,_.length-2))===!1&&(S=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(_.substr(-2))===!1&&(S=!1),S},ue=n.__addimage__.extractImageFromDataUrl=function(_){if(_==null||!(_=_.trim()).startsWith("data:"))return null;var S=_.indexOf(",");return S<0?null:_.substring(0,S).trim().endsWith("base64")?_.substring(S+1):null};n.__addimage__.isArrayBuffer=function(_){return _ instanceof ArrayBuffer};var fe=n.__addimage__.isArrayBufferView=function(_){return _ instanceof Int8Array||_ instanceof Uint8Array||_ instanceof Uint8ClampedArray||_ instanceof Int16Array||_ instanceof Uint16Array||_ instanceof Int32Array||_ instanceof Uint32Array||_ instanceof Float32Array||_ instanceof Float64Array},P=n.__addimage__.binaryStringToUint8Array=function(_){for(var S=_.length,I=new Uint8Array(S),ee=0;ee<S;ee++)I[ee]=_.charCodeAt(ee);return I},T=n.__addimage__.arrayBufferToBinaryString=function(_){for(var S="",I=fe(_)?_:new Uint8Array(_),ee=0;ee<I.length;ee+=8192)S+=String.fromCharCode.apply(null,I.subarray(ee,ee+8192));return S};n.addImage=function(){var _,S,I,ee,ye,Se,Ie,he,Te;if(typeof arguments[1]=="number"?(S=t,I=arguments[1],ee=arguments[2],ye=arguments[3],Se=arguments[4],Ie=arguments[5],he=arguments[6],Te=arguments[7]):(S=arguments[1],I=arguments[2],ee=arguments[3],ye=arguments[4],Se=arguments[5],Ie=arguments[6],he=arguments[7],Te=arguments[8]),or(_=arguments[0])==="object"&&!y(_)&&"imageData"in _){var He=_;_=He.imageData,S=He.format||S||t,I=He.x||I||0,ee=He.y||ee||0,ye=He.w||He.width||ye,Se=He.h||He.height||Se,Ie=He.alias||Ie,he=He.compression||he,Te=He.rotation||He.angle||Te}var Oe=this.internal.getFilters();if(he===void 0&&Oe.indexOf("FlateEncode")!==-1&&(he="SLOW"),isNaN(I)||isNaN(ee))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var B=w.call(this,_,S,Ie,he);return k.call(this,I,ee,ye,Se,B,Te),this};var w=function(_,S,I,ee){var ye,Se,Ie;if(typeof _=="string"&&i(_)===t){_=unescape(_);var he=x(_,!1);(he!==""||(he=n.loadFile(_,!0))!==void 0)&&(_=he)}if(y(_)&&(_=g(_,S)),S=i(_,S),!p(S))throw new Error("addImage does not support files of type '"+S+"', please ensure that a plugin for '"+S+"' support is added.");if(((Ie=I)==null||Ie.length===0)&&(I=(function(Te){return typeof Te=="string"||fe(Te)?W(Te):fe(Te.data)?W(Te.data):null})(_)),(ye=D.call(this,I))||(_ instanceof Uint8Array||S==="RGBA"||(Se=_,_=P(_)),ye=this["process"+S.toUpperCase()](_,l.call(this),I,(function(Te){return Te&&typeof Te=="string"&&(Te=Te.toUpperCase()),Te in n.image_compression?Te:G.NONE})(ee),Se)),!ye)throw new Error("An unknown error occurred whilst processing the image.");return ye},x=n.__addimage__.convertBase64ToBinaryString=function(_,S){S=typeof S!="boolean"||S;var I,ee="";if(typeof _=="string"){var ye;I=(ye=ue(_))!==null&&ye!==void 0?ye:_;try{ee=_E(I)}catch(Se){if(S)throw K(I)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Se.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ee};n.getImageProperties=function(_){var S,I,ee="";if(y(_)&&(_=g(_)),typeof _=="string"&&i(_)===t&&((ee=x(_,!1))===""&&(ee=n.loadFile(_)||""),_=ee),I=i(_),!p(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(_ instanceof Uint8Array||(_=P(_)),!(S=this["process"+I.toUpperCase()](_)))throw new Error("An unknown error occurred whilst processing the image");return S.fileType=I,S}})(bt.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};bt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),u=t.pageContext.annotations,l=!1,p=0;p<u.length&&!l;p++)switch((r=u[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(l=!0);break;case"reference":case"text":case"freetext":l=!0}if(l!=0){this.internal.write("/Annots [");for(var y=0;y<u.length;y++){r=u[y];var g=this.internal.pdfEscape,D=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var M=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),O=this.internal.getEncryptor(M.objId),G=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+g(O(r.contents))+")",s+=" /Popup "+k.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+g(O(G))+") >>",M.content=s;var W=M.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+W,r.open&&(s+=" /Open true"),s+=" >>",k.content=s,this.internal.write(M.objId,"0 R",k.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var K=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(D(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+K+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var ue=this.annotations._nameMap[r.options.name];r.options.pageNumber=ue.page,r.options.top=ue.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(D(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;default:var fe=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+fe+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,s,o){var a=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:c(t),y:u(r),w:c(t+i),h:u(r+s)},options:o,type:"link"})},n.textWithLink=function(t,r,i,s){var o,a,c=this.getTextWidth(t),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var l=this.splitTextToSize(t,a).length;o=Math.ceil(u*l)}else a=c,o=u;return this.text(t,r,i,s),i+=.2*u,s.align==="center"&&(r-=c/2),s.align==="right"&&(r-=c),this.link(r,i-u,a,o,s),c},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}})(bt.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(M){return e[M.charCodeAt(0)]!==void 0},o=n.__arabicParser__.isArabicLetter=function(M){return typeof M=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(M)},a=n.__arabicParser__.isArabicEndLetter=function(M){return o(M)&&s(M)&&e[M.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(M){return o(M)&&i.indexOf(M.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(M){return o(M)&&s(M)&&e[M.charCodeAt(0)].length>=1};var u=n.__arabicParser__.arabicLetterHasFinalForm=function(M){return o(M)&&s(M)&&e[M.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(M){return o(M)&&s(M)&&e[M.charCodeAt(0)].length>=3};var l=n.__arabicParser__.arabicLetterHasMedialForm=function(M){return o(M)&&s(M)&&e[M.charCodeAt(0)].length==4},p=n.__arabicParser__.resolveLigatures=function(M){var k=0,O=t,G="",W=0;for(k=0;k<M.length;k+=1)O[M.charCodeAt(k)]!==void 0?(W++,typeof(O=O[M.charCodeAt(k)])=="number"&&(G+=String.fromCharCode(O),O=t,W=0),k===M.length-1&&(O=t,G+=M.charAt(k-(W-1)),k-=W-1,W=0)):(O=t,G+=M.charAt(k-W),k-=W,W=0);return G};n.__arabicParser__.isArabicDiacritic=function(M){return M!==void 0&&r[M.charCodeAt(0)]!==void 0};var y=n.__arabicParser__.getCorrectForm=function(M,k,O){return o(M)?s(M)===!1?-1:!u(M)||!o(k)&&!o(O)||!o(O)&&a(k)||a(M)&&!o(k)||a(M)&&c(k)||a(M)&&a(k)?0:l(M)&&o(k)&&!a(k)&&o(O)&&u(O)?3:a(M)||!o(O)?1:2:-1},g=function(M){var k=0,O=0,G=0,W="",K="",ue="",fe=(M=M||"").split("\\s+"),P=[];for(k=0;k<fe.length;k+=1){for(P.push(""),O=0;O<fe[k].length;O+=1)W=fe[k][O],K=fe[k][O-1],ue=fe[k][O+1],o(W)?(G=y(W,K,ue),P[k]+=G!==-1?String.fromCharCode(e[W.charCodeAt(0)][G]):W):P[k]+=W;P[k]=p(P[k])}return P.join(" ")},D=n.__arabicParser__.processArabic=n.processArabic=function(){var M,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,O=[];if(Array.isArray(k)){var G=0;for(O=[],G=0;G<k.length;G+=1)Array.isArray(k[G])?O.push([g(k[G][0]),k[G][1],k[G][2]]):O.push([g(k[G])]);M=O}else M=g(k);return typeof arguments[0]=="string"?M:(arguments[0].text=M,arguments[0])};n.events.push(["preProcessText",D])})(bt.API),bt.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(bt.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(M){c=M}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(M){u=M}});var l=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return l},set:function(M){l=M}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(M){p=M}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(M){y=M}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(M){g=M}});var D=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return D},set:function(M){D=M}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},n.getTextDimensions=function(c,u){r.call(this);var l=(u=u||{}).fontSize||this.getFontSize(),p=u.font||this.getFont(),y=u.scaleFactor||this.internal.scaleFactor,g=0,D=0,M=0,k=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var O=u.maxWidth;O>0?typeof c=="string"?c=this.splitTextToSize(c,O):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(W,K){return W.concat(k.splitTextToSize(K,O))},[])):c=Array.isArray(c)?c:[c];for(var G=0;G<c.length;G++)g<(M=this.getStringUnitWidth(c[G],{font:p})*l)&&(g=M);return g!==0&&(D=c.length),{w:g/=y,h:Math.max((D*l*this.getLineHeightFactor()-l*(this.getLineHeightFactor()-1))/y,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=n.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var u=this.internal.__cell__.lastCell,l=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,y=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=p.top,g&&y&&(this.printHeaderRow(c.lineNumber,!0),c.y+=y[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-l,c.y+l,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+l,{align:"center",baseline:"top",maxWidth:c.width-l-l}):this.text(c.text,c.x+l,c.y+l,{align:"left",baseline:"top",maxWidth:c.width-l-l})),this.internal.__cell__.lastCell=c,this};n.table=function(c,u,l,p,y){if(r.call(this),!l)throw new Error("No data for PDF table.");var g,D,M,k,O=[],G=[],W=[],K={},ue={},fe=[],P=[],T=(y=y||{}).autoSize||!1,w=y.printHeaders!==!1,x=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,_=y.margins||Object.assign({width:this.getPageWidth()},e),S=typeof y.padding=="number"?y.padding:3,I=y.headerBackgroundColor||"#c8c8c8",ee=y.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=w,this.internal.__cell__.margins=_,this.internal.__cell__.table_font_size=x,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=I,this.internal.__cell__.headerTextColor=ee,this.setFontSize(x),p==null)G=O=Object.keys(l[0]),W=O.map(function(){return"left"});else if(Array.isArray(p)&&or(p[0])==="object")for(O=p.map(function(He){return He.name}),G=p.map(function(He){return He.prompt||He.name||""}),W=p.map(function(He){return He.align||"left"}),g=0;g<p.length;g+=1)ue[p[g].name]=.7499990551181103*p[g].width;else Array.isArray(p)&&typeof p[0]=="string"&&(G=O=p,W=O.map(function(){return"left"}));if(T||Array.isArray(p)&&typeof p[0]=="string")for(g=0;g<O.length;g+=1){for(K[k=O[g]]=l.map(function(He){return He[k]}),this.setFont(void 0,"bold"),fe.push(this.getTextDimensions(G[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),D=K[k],this.setFont(void 0,"normal"),M=0;M<D.length;M+=1)fe.push(this.getTextDimensions(D[M],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ue[k]=Math.max.apply(null,fe)+S+S,fe=[]}if(w){var ye={};for(g=0;g<O.length;g+=1)ye[O[g]]={},ye[O[g]].text=G[g],ye[O[g]].align=W[g];var Se=a.call(this,ye,ue);P=O.map(function(He){return new s(c,u,ue[He],Se,ye[He].text,void 0,ye[He].align)}),this.setTableHeaderRow(P),this.printHeaderRow(1,!1)}var Ie=p.reduce(function(He,Oe){return He[Oe.name]=Oe.align,He},{});for(g=0;g<l.length;g+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:g,data:l[g]},this);var he=a.call(this,l[g],ue);for(M=0;M<O.length;M+=1){var Te=l[g][O[M]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:g,col:M,data:Te},this),o.call(this,new s(c,u,ue[O[M]],he,Te,g+2,Ie[O[M]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var a=function(c,u){var l=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(c).map(function(g){var D=c[g];return this.splitTextToSize(D.hasOwnProperty("text")?D.text:D,u[g]-l-l)},this).map(function(g){return this.getLineHeightFactor()*g.length*p/y+l+l},this).reduce(function(g,D){return Math.max(g,D)},0)};n.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var l;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){l=this.internal.__cell__.tableHeaderRow[g].clone(),u&&(l.y=this.internal.__cell__.margins.top||0,y.push(l)),l.lineNumber=c;var D=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,l),this.setTextColor(D)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),t=!1}})(bt.API);var s7={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},o7=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],vR=i7(o7),a7=[100,200,300,400,500,600,700,800,900],Fae=i7(a7);function dR(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(s){return s7[s=s||"normal"]?s:"normal"})(n.style),r=(function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400})(n.weight),i=(function(s){return typeof vR[s=s||"normal"]=="number"?s:"normal"})(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function MU(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var Vae={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},OU={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function LU(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function FU(n){return n.trimLeft()}function Bae(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function jae(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var yE,VU,BU,cg,vE,jU,UU,qU,hR=["times"];function zU(n,e,t,r,i){var s=4,o=HU;switch(i){case bt.API.image_compression.FAST:s=1,o=$U;break;case bt.API.image_compression.MEDIUM:s=6,o=GU;break;case bt.API.image_compression.SLOW:s=9,o=WU}n=(function(c,u,l,p){for(var y,g=c.length/u,D=new Uint8Array(c.length+g),M=[Uae,$U,HU,GU,WU],k=0;k<g;k+=1){var O=k*u,G=c.subarray(O,O+u);if(p)D.set(p(G,l,y),O+k);else{for(var W=M.length,K=[],ue=0;ue<W;ue+=1)K[ue]=M[ue](G,l,y);var fe=zae(K.concat());D.set(K[fe],O+k)}y=G}return D})(n,e,Math.ceil(t*r/8),o);var a=Wb(n,{level:s});return bt.API.__addimage__.arrayBufferToBinaryString(a)}function Uae(n){var e=Array.apply([],n);return e.unshift(0),e}function $U(n,e){var t=n.length,r=[];r[0]=1;for(var i=0;i<t;i+=1){var s=n[i-e]||0;r[i+1]=n[i]-s+256&255}return r}function HU(n,e,t){var r=n.length,i=[];i[0]=2;for(var s=0;s<r;s+=1){var o=t&&t[s]||0;i[s+1]=n[s]-o+256&255}return i}function GU(n,e,t){var r=n.length,i=[];i[0]=3;for(var s=0;s<r;s+=1){var o=n[s-e]||0,a=t&&t[s]||0;i[s+1]=n[s]+256-(o+a>>>1)&255}return i}function WU(n,e,t){var r=n.length,i=[];i[0]=4;for(var s=0;s<r;s+=1){var o=qae(n[s-e]||0,t&&t[s]||0,t&&t[s-e]||0);i[s+1]=n[s]-o+256&255}return i}function qae(n,e,t){if(n===e&&e===t)return n;var r=Math.abs(e-t),i=Math.abs(n-t),s=Math.abs(n+e-t-t);return r<=i&&r<=s?n:i<=s?e:t}function zae(n){var e=n.map(function(t){return t.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function fR(n,e,t){var r=e*t,i=Math.floor(r/8),s=16-(r-8*i+t),o=(1<<t)-1;return c7(n,i)>>s&o}function KU(n,e,t,r){var i=t*r,s=Math.floor(i/8),o=16-(i-8*s+r),a=(1<<r)-1,c=(e&a)<<o;(function(u,l,p){if(l+1<u.byteLength)u.setUint16(l,p,!1);else{var y=p>>8&255;u.setUint8(l,y)}})(n,s,c7(n,s)&~(a<<o)&65535|c)}function c7(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function $ae(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],s=i>>7,o=1<<1+(7&i);n[e++],n[e++];var a=null,c=null;s&&(a=e,c=o,e+=3*o);var u=!0,l=[],p=0,y=null,g=0,D=null;for(this.width=t,this.height=r;u&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,D=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((_=n[e++])>=0))throw Error("Invalid block size");if(_===0)break;e+=_}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var M=n[e++];p=n[e++]|n[e++]<<8,y=n[e++],1&M||(y=null),g=M>>2&7,e++;break;case 254:for(;;){if(!((_=n[e++])>=0))throw Error("Invalid block size");if(_===0)break;e+=_}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var k=n[e++]|n[e++]<<8,O=n[e++]|n[e++]<<8,G=n[e++]|n[e++]<<8,W=n[e++]|n[e++]<<8,K=n[e++],ue=K>>6&1,fe=1<<1+(7&K),P=a,T=c,w=!1;K>>7&&(w=!0,P=e,T=fe,e+=3*fe);var x=e;for(e++;;){var _;if(!((_=n[e++])>=0))throw Error("Invalid block size");if(_===0)break;e+=_}l.push({x:k,y:O,width:G,height:W,has_local_palette:w,palette_offset:P,palette_size:T,data_offset:x,data_length:e-x,transparent_index:y,interlaced:!!ue,delay:p,disposal:g});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return l.length},this.loopCount=function(){return D},this.frameInfo=function(S){if(S<0||S>=l.length)throw new Error("Frame index out of range.");return l[S]},this.decodeAndBlitFrameBGRA=function(S,I){var ee=this.frameInfo(S),ye=ee.width*ee.height,Se=new Uint8Array(ye);QU(n,ee.data_offset,Se,ye);var Ie=ee.palette_offset,he=ee.transparent_index;he===null&&(he=256);var Te=ee.width,He=t-Te,Oe=Te,B=4*(ee.y*t+ee.x),Y=4*((ee.y+ee.height)*t+ee.x),X=B,ne=4*He;ee.interlaced===!0&&(ne+=4*t*7);for(var oe=8,le=0,be=Se.length;le<be;++le){var Ee=Se[le];if(Oe===0&&(Oe=Te,(X+=ne)>=Y&&(ne=4*He+4*t*(oe-1),X=B+(Te+He)*(oe<<1),oe>>=1)),Ee===he)X+=4;else{var De=n[Ie+3*Ee],Be=n[Ie+3*Ee+1],Xe=n[Ie+3*Ee+2];I[X++]=Xe,I[X++]=Be,I[X++]=De,I[X++]=255}--Oe}},this.decodeAndBlitFrameRGBA=function(S,I){var ee=this.frameInfo(S),ye=ee.width*ee.height,Se=new Uint8Array(ye);QU(n,ee.data_offset,Se,ye);var Ie=ee.palette_offset,he=ee.transparent_index;he===null&&(he=256);var Te=ee.width,He=t-Te,Oe=Te,B=4*(ee.y*t+ee.x),Y=4*((ee.y+ee.height)*t+ee.x),X=B,ne=4*He;ee.interlaced===!0&&(ne+=4*t*7);for(var oe=8,le=0,be=Se.length;le<be;++le){var Ee=Se[le];if(Oe===0&&(Oe=Te,(X+=ne)>=Y&&(ne=4*He+4*t*(oe-1),X=B+(Te+He)*(oe<<1),oe>>=1)),Ee===he)X+=4;else{var De=n[Ie+3*Ee],Be=n[Ie+3*Ee+1],Xe=n[Ie+3*Ee+2];I[X++]=De,I[X++]=Be,I[X++]=Xe,I[X++]=255}--Oe}}}function QU(n,e,t,r){for(var i=n[e++],s=1<<i,o=s+1,a=o+1,c=i+1,u=(1<<c)-1,l=0,p=0,y=0,g=n[e++],D=new Int32Array(4096),M=null;;){for(;l<16&&g!==0;)p|=n[e++]<<l,l+=8,g===1?g=n[e++]:--g;if(l<c)break;var k=p&u;if(p>>=c,l-=c,k!==s){if(k===o)break;for(var O=k<a?k:M,G=0,W=O;W>s;)W=D[W]>>8,++G;var K=W;if(y+G+(O!==k?1:0)>r)return void fr.log("Warning, gif stream longer than expected.");t[y++]=K;var ue=y+=G;for(O!==k&&(t[y++]=K),W=O;G--;)W=D[W],t[--ue]=255&W,W>>=8;M!==null&&a<4096&&(D[a++]=M<<8|K,a>=u+1&&c<12&&(++c,u=u<<1|1)),M=k}else a=o+1,u=(1<<(c=i+1))-1,M=null}return y!==r&&fr.log("Warning, gif stream shorter than expected."),t}function pR(n){var e,t,r,i,s,o=Math.floor,a=new Array(64),c=new Array(64),u=new Array(64),l=new Array(64),p=new Array(65535),y=new Array(65535),g=new Array(64),D=new Array(64),M=[],k=0,O=7,G=new Array(64),W=new Array(64),K=new Array(64),ue=new Array(256),fe=new Array(2048),P=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],T=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],w=[0,1,2,3,4,5,6,7,8,9,10,11],x=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],_=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],S=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],ee=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ye=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Se(B,Y){for(var X=0,ne=0,oe=new Array,le=1;le<=16;le++){for(var be=1;be<=B[le];be++)oe[Y[ne]]=[],oe[Y[ne]][0]=X,oe[Y[ne]][1]=le,ne++,X++;X*=2}return oe}function Ie(B){for(var Y=B[0],X=B[1]-1;X>=0;)Y&1<<X&&(k|=1<<O),X--,--O<0&&(k==255?(he(255),he(0)):he(k),O=7,k=0)}function he(B){M.push(B)}function Te(B){he(B>>8&255),he(255&B)}function He(B,Y,X,ne,oe){for(var le,be=oe[0],Ee=oe[240],De=(function(Fe,tt){var Ke,vt,Et,gn,on,Rt,St,Ct,st,zt,pt=0;for(st=0;st<8;++st){Ke=Fe[pt],vt=Fe[pt+1],Et=Fe[pt+2],gn=Fe[pt+3],on=Fe[pt+4],Rt=Fe[pt+5],St=Fe[pt+6];var pr=Ke+(Ct=Fe[pt+7]),an=Ke-Ct,jt=vt+St,Kt=vt-St,Bn=Et+Rt,ht=Et-Rt,Un=gn+on,It=gn-on,Vt=pr+Un,Ln=pr-Un,$t=jt+Bn,nt=jt-Bn;Fe[pt]=Vt+$t,Fe[pt+4]=Vt-$t;var mn=.707106781*(nt+Ln);Fe[pt+2]=Ln+mn,Fe[pt+6]=Ln-mn;var Gr=.382683433*((Vt=It+ht)-(nt=Kt+an)),_r=.5411961*Vt+Gr,hs=1.306562965*nt+Gr,Ls=.707106781*($t=ht+Kt),ft=an+Ls,ro=an-Ls;Fe[pt+5]=ro+_r,Fe[pt+3]=ro-_r,Fe[pt+1]=ft+hs,Fe[pt+7]=ft-hs,pt+=8}for(pt=0,st=0;st<8;++st){Ke=Fe[pt],vt=Fe[pt+8],Et=Fe[pt+16],gn=Fe[pt+24],on=Fe[pt+32],Rt=Fe[pt+40],St=Fe[pt+48];var cr=Ke+(Ct=Fe[pt+56]),oi=Ke-Ct,Wr=vt+St,qn=vt-St,Er=Et+Rt,wr=Et-Rt,fs=gn+on,Si=gn-on,ps=cr+fs,ji=cr-fs,Ui=Wr+Er,Ci=Wr-Er;Fe[pt]=ps+Ui,Fe[pt+32]=ps-Ui;var ai=.707106781*(Ci+ji);Fe[pt+16]=ji+ai,Fe[pt+48]=ji-ai;var qi=.382683433*((ps=Si+wr)-(Ci=qn+oi)),gs=.5411961*ps+qi,Xo=1.306562965*Ci+qi,Fs=.707106781*(Ui=wr+qn),wo=oi+Fs,bo=oi-Fs;Fe[pt+40]=bo+gs,Fe[pt+24]=bo-gs,Fe[pt+8]=wo+Xo,Fe[pt+56]=wo-Xo,pt++}for(st=0;st<64;++st)zt=Fe[st]*tt[st],g[st]=zt>0?zt+.5|0:zt-.5|0;return g})(B,Y),Be=0;Be<64;++Be)D[P[Be]]=De[Be];var Xe=D[0]-X;X=D[0],Xe==0?Ie(ne[0]):(Ie(ne[y[le=32767+Xe]]),Ie(p[le]));for(var Ye=63;Ye>0&&D[Ye]==0;)Ye--;if(Ye==0)return Ie(be),X;for(var dt,H=1;H<=Ye;){for(var Je=H;D[H]==0&&H<=Ye;)++H;var qt=H-Je;if(qt>=16){dt=qt>>4;for(var At=1;At<=dt;++At)Ie(Ee);qt&=15}le=32767+D[H],Ie(oe[(qt<<4)+y[le]]),Ie(p[le]),H++}return Ye!=63&&Ie(be),X}function Oe(B){B=Math.min(Math.max(B,1),100),s!=B&&((function(Y){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ne=0;ne<64;ne++){var oe=o((X[ne]*Y+50)/100);oe=Math.min(Math.max(oe,1),255),a[P[ne]]=oe}for(var le=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],be=0;be<64;be++){var Ee=o((le[be]*Y+50)/100);Ee=Math.min(Math.max(Ee,1),255),c[P[be]]=Ee}for(var De=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Be=0,Xe=0;Xe<8;Xe++)for(var Ye=0;Ye<8;Ye++)u[Be]=1/(a[P[Be]]*De[Xe]*De[Ye]*8),l[Be]=1/(c[P[Be]]*De[Xe]*De[Ye]*8),Be++})(B<50?Math.floor(5e3/B):Math.floor(200-2*B)),s=B)}this.encode=function(B,Y){Y&&Oe(Y),M=new Array,k=0,O=7,Te(65496),Te(65504),Te(16),he(74),he(70),he(73),he(70),he(0),he(1),he(1),he(0),Te(1),Te(1),he(0),he(0),(function(){Te(65499),Te(132),he(0);for(var vt=0;vt<64;vt++)he(a[vt]);he(1);for(var Et=0;Et<64;Et++)he(c[Et])})(),(function(vt,Et){Te(65472),Te(17),he(8),Te(Et),Te(vt),he(3),he(1),he(17),he(0),he(2),he(17),he(1),he(3),he(17),he(1)})(B.width,B.height),(function(){Te(65476),Te(418),he(0);for(var vt=0;vt<16;vt++)he(T[vt+1]);for(var Et=0;Et<=11;Et++)he(w[Et]);he(16);for(var gn=0;gn<16;gn++)he(x[gn+1]);for(var on=0;on<=161;on++)he(_[on]);he(1);for(var Rt=0;Rt<16;Rt++)he(S[Rt+1]);for(var St=0;St<=11;St++)he(I[St]);he(17);for(var Ct=0;Ct<16;Ct++)he(ee[Ct+1]);for(var st=0;st<=161;st++)he(ye[st])})(),Te(65498),Te(12),he(3),he(1),he(0),he(2),he(17),he(3),he(17),he(0),he(63),he(0);var X=0,ne=0,oe=0;k=0,O=7,this.encode.displayName="_encode_";for(var le,be,Ee,De,Be,Xe,Ye,dt,H,Je=B.data,qt=B.width,At=B.height,Fe=4*qt,tt=0;tt<At;){for(le=0;le<Fe;){for(Be=Fe*tt+le,Ye=-1,dt=0,H=0;H<64;H++)Xe=Be+(dt=H>>3)*Fe+(Ye=4*(7&H)),tt+dt>=At&&(Xe-=Fe*(tt+1+dt-At)),le+Ye>=Fe&&(Xe-=le+Ye-Fe+4),be=Je[Xe++],Ee=Je[Xe++],De=Je[Xe++],G[H]=(fe[be]+fe[Ee+256|0]+fe[De+512|0]>>16)-128,W[H]=(fe[be+768|0]+fe[Ee+1024|0]+fe[De+1280|0]>>16)-128,K[H]=(fe[be+1280|0]+fe[Ee+1536|0]+fe[De+1792|0]>>16)-128;X=He(G,u,X,e,r),ne=He(W,l,ne,t,i),oe=He(K,l,oe,t,i),le+=32}tt+=8}if(O>=0){var Ke=[];Ke[1]=O+1,Ke[0]=(1<<O+1)-1,Ie(Ke)}return Te(65497),new Uint8Array(M)},n=n||50,(function(){for(var B=String.fromCharCode,Y=0;Y<256;Y++)ue[Y]=B(Y)})(),e=Se(T,w),t=Se(S,I),r=Se(x,_),i=Se(ee,ye),(function(){for(var B=1,Y=2,X=1;X<=15;X++){for(var ne=B;ne<Y;ne++)y[32767+ne]=X,p[32767+ne]=[],p[32767+ne][1]=X,p[32767+ne][0]=ne;for(var oe=-(Y-1);oe<=-B;oe++)y[32767+oe]=X,p[32767+oe]=[],p[32767+oe][1]=X,p[32767+oe][0]=Y-1+oe;B<<=1,Y<<=1}})(),(function(){for(var B=0;B<256;B++)fe[B]=19595*B,fe[B+256|0]=38470*B,fe[B+512|0]=7471*B+32768,fe[B+768|0]=-11059*B,fe[B+1024|0]=-21709*B,fe[B+1280|0]=32768*B+8421375,fe[B+1536|0]=-27439*B,fe[B+1792|0]=-5329*B})(),Oe(n)}function lc(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function YU(n){function e(w){if(!w)throw Error("assert :P")}function t(w,x,_){for(var S=0;4>S;S++)if(w[x+S]!=_.charCodeAt(S))return!0;return!1}function r(w,x,_,S,I){for(var ee=0;ee<I;ee++)w[x+ee]=_[S+ee]}function i(w,x,_,S){for(var I=0;I<S;I++)w[x+I]=_}function s(w){return new Int32Array(w)}function o(w,x){for(var _=[],S=0;S<w;S++)_.push(new x);return _}function a(w,x){var _=[];return(function S(I,ee,ye){for(var Se=ye[ee],Ie=0;Ie<Se&&(I.push(ye.length>ee+1?[]:new x),!(ye.length<ee+1));Ie++)S(I[Ie],ee+1,ye)})(_,0,w),_}var c=function(){var w=this;function x(h,m){for(var E=1<<m-1>>>0;h&E;)E>>>=1;return E?(h&E-1)+E:h}function _(h,m,E,C,F){e(!(C%E));do h[m+(C-=E)]=F;while(0<C)}function S(h,m,E,C,F){if(e(2328>=F),512>=F)var V=s(512);else if((V=s(F))==null)return 0;return(function(j,z,$,J,re,me){var Z,ae,de=z,Ce=1<<$,pe=s(16),xe=s(16);for(e(re!=0),e(J!=null),e(j!=null),e(0<$),ae=0;ae<re;++ae){if(15<J[ae])return 0;++pe[J[ae]]}if(pe[0]==re)return 0;for(xe[1]=0,Z=1;15>Z;++Z){if(pe[Z]>1<<Z)return 0;xe[Z+1]=xe[Z]+pe[Z]}for(ae=0;ae<re;++ae)Z=J[ae],0<J[ae]&&(me[xe[Z]++]=ae);if(xe[15]==1)return(J=new I).g=0,J.value=me[0],_(j,de,1,Ce,J),Ce;var Re,$e=-1,Ve=Ce-1,Tt=0,ut=1,cn=1,mt=1<<$;for(ae=0,Z=1,re=2;Z<=$;++Z,re<<=1){if(ut+=cn<<=1,0>(cn-=pe[Z]))return 0;for(;0<pe[Z];--pe[Z])(J=new I).g=Z,J.value=me[ae++],_(j,de+Tt,re,mt,J),Tt=x(Tt,Z)}for(Z=$+1,re=2;15>=Z;++Z,re<<=1){if(ut+=cn<<=1,0>(cn-=pe[Z]))return 0;for(;0<pe[Z];--pe[Z]){if(J=new I,(Tt&Ve)!=$e){for(de+=mt,Re=1<<($e=Z)-$;15>$e&&!(0>=(Re-=pe[$e]));)++$e,Re<<=1;Ce+=mt=1<<(Re=$e-$),j[z+($e=Tt&Ve)].g=Re+$,j[z+$e].value=de-z-$e}J.g=Z-$,J.value=me[ae++],_(j,de+(Tt>>$),re,mt,J),Tt=x(Tt,Z)}}return ut!=2*xe[15]-1?0:Ce})(h,m,E,C,F,V)}function I(){this.value=this.g=0}function ee(){this.value=this.g=0}function ye(){this.G=o(5,I),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Od,ee)}function Se(h,m,E,C){e(h!=null),e(m!=null),e(2147483648>C),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=m,h.pa=E,h.Jd=m,h.Yc=E+C,h.Zc=4<=C?E+C-4+1:E,be(h)}function Ie(h,m){for(var E=0;0<m--;)E|=De(h,128)<<m;return E}function he(h,m){var E=Ie(h,m);return Ee(h)?-E:E}function Te(h,m,E,C){var F,V=0;for(e(h!=null),e(m!=null),e(4294967288>C),h.Sb=C,h.Ra=0,h.u=0,h.h=0,4<C&&(C=4),F=0;F<C;++F)V+=m[E+F]<<8*F;h.Ra=V,h.bb=C,h.oa=m,h.pa=E}function He(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<yl-8>>>0,++h.bb,h.u-=8;ne(h)&&(h.h=1,h.u=0)}function Oe(h,m){if(e(0<=m),!h.h&&m<=Do){var E=X(h)&Co[m];return h.u+=m,He(h),E}return h.h=1,h.u=0}function B(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Y(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function X(h){return h.Ra>>>(h.u&yl-1)>>>0}function ne(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>yl}function oe(h,m){h.u=m,h.h=ne(h)}function le(h){h.u>=wu&&(e(h.u>=wu),He(h))}function be(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function Ee(h){return Ie(h,1)}function De(h,m){var E=h.Ca;0>h.b&&be(h);var C=h.b,F=E*m>>>8,V=(h.I>>>C>F)+0;for(V?(E-=F,h.I-=F+1<<C>>>0):E=F+1,C=E,F=0;256<=C;)F+=8,C>>=8;return C=7^F+vl[C],h.b-=C,h.Ca=(E<<C)-1,V}function Be(h,m,E){h[m+0]=E>>24&255,h[m+1]=E>>16&255,h[m+2]=E>>8&255,h[m+3]=255&E}function Xe(h,m){return h[m+0]|h[m+1]<<8}function Ye(h,m){return Xe(h,m)|h[m+2]<<16}function dt(h,m){return Xe(h,m)|Xe(h,m+2)<<16}function H(h,m){var E=1<<m;return e(h!=null),e(0<m),h.X=s(E),h.X==null?0:(h.Mb=32-m,h.Xa=m,1)}function Je(h,m){e(h!=null),e(m!=null),e(h.Xa==m.Xa),r(m.X,0,h.X,0,1<<m.Xa)}function qt(){this.X=[],this.Xa=this.Mb=0}function At(h,m,E,C){e(E!=null),e(C!=null);var F=E[0],V=C[0];return F==0&&(F=(h*V+m/2)/m),V==0&&(V=(m*F+h/2)/h),0>=F||0>=V?0:(E[0]=F,C[0]=V,1)}function Fe(h,m){return h+(1<<m)-1>>>m}function tt(h,m){return((4278255360&h)+(4278255360&m)>>>0&4278255360)+((16711935&h)+(16711935&m)>>>0&16711935)>>>0}function Ke(h,m){w[m]=function(E,C,F,V,j,z,$){var J;for(J=0;J<j;++J){var re=w[h](z[$+J-1],F,V+J);z[$+J]=tt(E[C+J],re)}}}function vt(){this.ud=this.hd=this.jd=0}function Et(h,m){return((4278124286&(h^m))>>>1)+(h&m)>>>0}function gn(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function on(h,m){return gn(h+(h-m+.5>>1))}function Rt(h,m,E){return Math.abs(m-E)-Math.abs(h-E)}function St(h,m,E,C,F,V,j){for(C=V[j-1],E=0;E<F;++E)V[j+E]=C=tt(h[m+E],C)}function Ct(h,m,E,C,F){var V;for(V=0;V<E;++V){var j=h[m+V],z=j>>8&255,$=16711935&($=($=16711935&j)+((z<<16)+z));C[F+V]=(4278255360&j)+$>>>0}}function st(h,m){m.jd=255&h,m.hd=h>>8&255,m.ud=h>>16&255}function zt(h,m,E,C,F,V){var j;for(j=0;j<C;++j){var z=m[E+j],$=z>>>8,J=z,re=255&(re=(re=z>>>16)+((h.jd<<24>>24)*($<<24>>24)>>>5));J=255&(J=(J+=(h.hd<<24>>24)*($<<24>>24)>>>5)+((h.ud<<24>>24)*(re<<24>>24)>>>5)),F[V+j]=(4278255360&z)+(re<<16)+J}}function pt(h,m,E,C,F){w[m]=function(V,j,z,$,J,re,me,Z,ae){for($=me;$<Z;++$)for(me=0;me<ae;++me)J[re++]=F(z[C(V[j++])])},w[h]=function(V,j,z,$,J,re,me){var Z=8>>V.b,ae=V.Ea,de=V.K[0],Ce=V.w;if(8>Z)for(V=(1<<V.b)-1,Ce=(1<<Z)-1;j<z;++j){var pe,xe=0;for(pe=0;pe<ae;++pe)pe&V||(xe=C($[J++])),re[me++]=F(de[xe&Ce]),xe>>=Z}else w["VP8LMapColor"+E]($,J,de,Ce,re,me,j,z,ae)}}function pr(h,m,E,C,F){for(E=m+E;m<E;){var V=h[m++];C[F++]=V>>16&255,C[F++]=V>>8&255,C[F++]=255&V}}function an(h,m,E,C,F){for(E=m+E;m<E;){var V=h[m++];C[F++]=V>>16&255,C[F++]=V>>8&255,C[F++]=255&V,C[F++]=V>>24&255}}function jt(h,m,E,C,F){for(E=m+E;m<E;){var V=(j=h[m++])>>16&240|j>>12&15,j=240&j|j>>28&15;C[F++]=V,C[F++]=j}}function Kt(h,m,E,C,F){for(E=m+E;m<E;){var V=(j=h[m++])>>16&248|j>>13&7,j=j>>5&224|j>>3&31;C[F++]=V,C[F++]=j}}function Bn(h,m,E,C,F){for(E=m+E;m<E;){var V=h[m++];C[F++]=255&V,C[F++]=V>>8&255,C[F++]=V>>16&255}}function ht(h,m,E,C,F,V){if(V==0)for(E=m+E;m<E;)Be(C,((V=h[m++])[0]>>24|V[1]>>8&65280|V[2]<<8&16711680|V[3]<<24)>>>0),F+=32;else r(C,F,h,m,E)}function Un(h,m){w[m][0]=w[h+"0"],w[m][1]=w[h+"1"],w[m][2]=w[h+"2"],w[m][3]=w[h+"3"],w[m][4]=w[h+"4"],w[m][5]=w[h+"5"],w[m][6]=w[h+"6"],w[m][7]=w[h+"7"],w[m][8]=w[h+"8"],w[m][9]=w[h+"9"],w[m][10]=w[h+"10"],w[m][11]=w[h+"11"],w[m][12]=w[h+"12"],w[m][13]=w[h+"13"],w[m][14]=w[h+"0"],w[m][15]=w[h+"0"]}function It(h){return h==XI||h==eT||h==N_||h==tT}function Vt(){this.eb=[],this.size=this.A=this.fb=0}function Ln(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function $t(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Vt,this.f.kb=new Ln,this.sd=null}function nt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function mn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Gr(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function _r(h,m){var E=h.T,C=m.ba.f.RGBA,F=C.eb,V=C.fb+h.ka*C.A,j=da[m.ba.S],z=h.y,$=h.O,J=h.f,re=h.N,me=h.ea,Z=h.W,ae=m.cc,de=m.dc,Ce=m.Mc,pe=m.Nc,xe=h.ka,Re=h.ka+h.T,$e=h.U,Ve=$e+1>>1;for(xe==0?j(z,$,null,null,J,re,me,Z,J,re,me,Z,F,V,null,null,$e):(j(m.ec,m.fc,z,$,ae,de,Ce,pe,J,re,me,Z,F,V-C.A,F,V,$e),++E);xe+2<Re;xe+=2)ae=J,de=re,Ce=me,pe=Z,re+=h.Rc,Z+=h.Rc,V+=2*C.A,j(z,($+=2*h.fa)-h.fa,z,$,ae,de,Ce,pe,J,re,me,Z,F,V-C.A,F,V,$e);return $+=h.fa,h.j+Re<h.o?(r(m.ec,m.fc,z,$,$e),r(m.cc,m.dc,J,re,Ve),r(m.Mc,m.Nc,me,Z,Ve),E--):1&Re||j(z,$,null,null,J,re,me,Z,J,re,me,Z,F,V+C.A,null,null,$e),E}function hs(h,m,E){var C=h.F,F=[h.J];if(C!=null){var V=h.U,j=m.ba.S,z=j==x_||j==N_;m=m.ba.f.RGBA;var $=[0],J=h.ka;$[0]=h.T,h.Kb&&(J==0?--$[0]:(--J,F[0]-=h.width),h.j+h.ka+h.T==h.o&&($[0]=h.o-h.j-J));var re=m.eb;J=m.fb+J*m.A,h=qk(C,F[0],h.width,V,$,re,J+(z?0:3),m.A),e(E==$),h&&It(j)&&em(re,J,z,V,$,m.A)}return 0}function Ls(h){var m=h.ma,E=m.ba.S,C=11>E,F=E==C_||E==D_||E==x_||E==ZI||E==12||It(E);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!_u(m.Oa,h,F?11:12))return 0;if(F&&It(E)&&Ge(),h.da)alert("todo:use_scaling");else{if(C){if(m.Ib=Gr,h.Kb){if(E=h.U+1>>1,m.memory=s(h.U+2*E),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+h.U,m.Mc=m.cc,m.Nc=m.dc+E,m.Ib=_r,Ge()}}else alert("todo:EmitYUV");F&&(m.Jb=hs,C&&se())}if(C&&!sM){for(h=0;256>h;++h)B$[h]=89858*(h-128)+P_>>R_,q$[h]=-22014*(h-128)+P_,U$[h]=-45773*(h-128),j$[h]=113618*(h-128)+P_>>R_;for(h=nm;h<iT;++h)m=76283*(h-16)+P_>>R_,z$[h-nm]=ms(m,255),$$[h-nm]=ms(m+8>>4,15);sM=1}return 1}function ft(h){var m=h.ma,E=h.U,C=h.T;return e(!(1&h.ka)),0>=E||0>=C?0:(E=m.Ib(h,m),m.Jb!=null&&m.Jb(h,m,E),m.Dc+=E,1)}function ro(h){h.ma.memory=null}function cr(h,m,E,C){return Oe(h,8)!=47?0:(m[0]=Oe(h,14)+1,E[0]=Oe(h,14)+1,C[0]=Oe(h,1),Oe(h,3)!=0?0:!h.h)}function oi(h,m){if(4>h)return h+1;var E=h-2>>1;return(2+(1&h)<<E)+Oe(m,E)+1}function Wr(h,m){return 120<m?m-120:1<=(E=((E=A$[m-1])>>4)*h+(8-(15&E)))?E:1;var E}function qn(h,m,E){var C=X(E),F=h[m+=255&C].g-8;return 0<F&&(oe(E,E.u+8),C=X(E),m+=h[m].value,m+=C&(1<<F)-1),oe(E,E.u+h[m].g),h[m].value}function Er(h,m,E){return E.g+=h.g,E.value+=h.value<<m>>>0,e(8>=E.g),h.g}function wr(h,m,E){var C=h.xc;return e((m=C==0?0:h.vc[h.md*(E>>C)+(m>>C)])<h.Wb),h.Ya[m]}function fs(h,m,E,C){var F=h.ab,V=h.c*m,j=h.C;m=j+m;var z=E,$=C;for(C=h.Ta,E=h.Ua;0<F--;){var J=h.gc[F],re=j,me=m,Z=z,ae=$,de=($=C,z=E,J.Ea);switch(e(re<me),e(me<=J.nc),J.hc){case 2:Yr(Z,ae,(me-re)*de,$,z);break;case 0:var Ce=re,pe=me,xe=$,Re=z,$e=(mt=J).Ea;Ce==0&&(Kg(Z,ae,null,null,1,xe,Re),St(Z,ae+1,0,0,$e-1,xe,Re+1),ae+=$e,Re+=$e,++Ce);for(var Ve=1<<mt.b,Tt=Ve-1,ut=Fe($e,mt.b),cn=mt.K,mt=mt.w+(Ce>>mt.b)*ut;Ce<pe;){var An=cn,Ri=mt,un=1;for(_f(Z,ae,xe,Re-$e,1,xe,Re);un<$e;){var yt=(un&~Tt)+Ve;yt>$e&&(yt=$e),(0,Yg[An[Ri++]>>8&15])(Z,ae+ +un,xe,Re+un-$e,yt-un,xe,Re+un),un=yt}ae+=$e,Re+=$e,++Ce&Tt||(mt+=ut)}me!=J.nc&&r($,z-de,$,z+(me-re-1)*de,de);break;case 1:for(de=Z,pe=ae,$e=(Z=J.Ea)-(Re=Z&~(xe=(ae=1<<J.b)-1)),Ce=Fe(Z,J.b),Ve=J.K,J=J.w+(re>>J.b)*Ce;re<me;){for(Tt=Ve,ut=J,cn=new vt,mt=pe+Re,An=pe+Z;pe<mt;)st(Tt[ut++],cn),Jg(cn,de,pe,ae,$,z),pe+=ae,z+=ae;pe<An&&(st(Tt[ut++],cn),Jg(cn,de,pe,$e,$,z),pe+=$e,z+=$e),++re&xe||(J+=Ce)}break;case 3:if(Z==$&&ae==z&&0<J.b){for(pe=$,Z=de=z+(me-re)*de-(Re=(me-re)*Fe(J.Ea,J.b)),ae=$,xe=z,Ce=[],Re=($e=Re)-1;0<=Re;--Re)Ce[Re]=ae[xe+Re];for(Re=$e-1;0<=Re;--Re)pe[Z+Re]=Ce[Re];I_(J,re,me,$,de,$,z)}else I_(J,re,me,Z,ae,$,z)}z=C,$=E}$!=E&&r(C,E,z,$,V)}function Si(h,m){var E=h.V,C=h.Ba+h.c*h.C,F=m-h.C;if(e(m<=h.l.o),e(16>=F),0<F){var V=h.l,j=h.Ta,z=h.Ua,$=V.width;if(fs(h,F,E,C),F=z=[z],e((E=h.C)<(C=m)),e(V.v<V.va),C>V.o&&(C=V.o),E<V.j){var J=V.j-E;E=V.j,F[0]+=J*$}if(E>=C?E=0:(F[0]+=4*V.v,V.ka=E-V.j,V.U=V.va-V.v,V.T=C-E,E=1),E){if(z=z[0],11>(E=h.ca).S){var re=E.f.RGBA,me=(C=E.S,F=V.U,V=V.T,J=re.eb,re.A),Z=V;for(re=re.fb+h.Ma*re.A;0<Z--;){var ae=j,de=z,Ce=F,pe=J,xe=re;switch(C){case S_:Zg(ae,de,Ce,pe,xe);break;case C_:_l(ae,de,Ce,pe,xe);break;case XI:_l(ae,de,Ce,pe,xe),em(pe,xe,0,Ce,1,0);break;case Qk:Ld(ae,de,Ce,pe,xe);break;case D_:ht(ae,de,Ce,pe,xe,1);break;case eT:ht(ae,de,Ce,pe,xe,1),em(pe,xe,0,Ce,1,0);break;case x_:ht(ae,de,Ce,pe,xe,0);break;case N_:ht(ae,de,Ce,pe,xe,0),em(pe,xe,1,Ce,1,0);break;case ZI:wl(ae,de,Ce,pe,xe);break;case tT:wl(ae,de,Ce,pe,xe),Uk(pe,xe,Ce,1,0);break;case Yk:bl(ae,de,Ce,pe,xe);break;default:e(0)}z+=$,re+=me}h.Ma+=V}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=E.height)}}h.C=m,e(h.C<=h.i)}function ps(h){var m;if(0<h.ua)return 0;for(m=0;m<h.Wb;++m){var E=h.Ya[m].G,C=h.Ya[m].H;if(0<E[1][C[1]+0].g||0<E[2][C[2]+0].g||0<E[3][C[3]+0].g)return 0}return 1}function ji(h,m,E,C,F,V){if(h.Z!=0){var j=h.qd,z=h.rd;for(e(Tl[h.Z]!=null);m<E;++m)Tl[h.Z](j,z,C,F,C,F,V),j=C,z=F,F+=V;h.qd=j,h.rd=z}}function Ui(h,m){var E=h.l.ma,C=E.Z==0||E.Z==1?h.l.j:h.C;if(C=h.C<C?C:h.C,e(m<=h.l.o),m>C){var F=h.l.width,V=E.ca,j=E.tb+F*C,z=h.V,$=h.Ba+h.c*C,J=h.gc;e(h.ab==1),e(J[0].hc==3),Dc(J[0],C,m,z,$,V,j),ji(E,C,m,V,j,F)}h.C=h.Ma=m}function Ci(h,m,E,C,F,V,j){var z=h.$/C,$=h.$%C,J=h.m,re=h.s,me=E+h.$,Z=me;F=E+C*F;var ae=E+C*V,de=280+re.ua,Ce=h.Pb?z:16777216,pe=0<re.ua?re.Wa:null,xe=re.wc,Re=me<ae?wr(re,$,z):null;e(h.C<V),e(ae<=F);var $e=!1;e:for(;;){for(;$e||me<ae;){var Ve=0;if(z>=Ce){var Tt=me-E;e((Ce=h).Pb),Ce.wd=Ce.m,Ce.xd=Tt,0<Ce.s.ua&&Je(Ce.s.Wa,Ce.s.vb),Ce=z+C$}if($&xe||(Re=wr(re,$,z)),e(Re!=null),Re.Qb&&(m[me]=Re.qb,$e=!0),!$e)if(le(J),Re.jc){Ve=J,Tt=m;var ut=me,cn=Re.pd[X(Ve)&Od-1];e(Re.jc),256>cn.g?(oe(Ve,Ve.u+cn.g),Tt[ut]=cn.value,Ve=0):(oe(Ve,Ve.u+cn.g-256),e(256<=cn.value),Ve=cn.value),Ve==0&&($e=!0)}else Ve=qn(Re.G[0],Re.H[0],J);if(J.h)break;if($e||256>Ve){if(!$e)if(Re.nd)m[me]=(Re.qb|Ve<<8)>>>0;else{if(le(J),$e=qn(Re.G[1],Re.H[1],J),le(J),Tt=qn(Re.G[2],Re.H[2],J),ut=qn(Re.G[3],Re.H[3],J),J.h)break;m[me]=(ut<<24|$e<<16|Ve<<8|Tt)>>>0}if($e=!1,++me,++$>=C&&($=0,++z,j!=null&&z<=V&&!(z%16)&&j(h,z),pe!=null))for(;Z<me;)Ve=m[Z++],pe.X[(506832829*Ve&4294967295)>>>pe.Mb]=Ve}else if(280>Ve){if(Ve=oi(Ve-256,J),Tt=qn(Re.G[4],Re.H[4],J),le(J),Tt=Wr(C,Tt=oi(Tt,J)),J.h)break;if(me-E<Tt||F-me<Ve)break e;for(ut=0;ut<Ve;++ut)m[me+ut]=m[me+ut-Tt];for(me+=Ve,$+=Ve;$>=C;)$-=C,++z,j!=null&&z<=V&&!(z%16)&&j(h,z);if(e(me<=F),$&xe&&(Re=wr(re,$,z)),pe!=null)for(;Z<me;)Ve=m[Z++],pe.X[(506832829*Ve&4294967295)>>>pe.Mb]=Ve}else{if(!(Ve<de))break e;for($e=Ve-280,e(pe!=null);Z<me;)Ve=m[Z++],pe.X[(506832829*Ve&4294967295)>>>pe.Mb]=Ve;Ve=me,e(!($e>>>(Tt=pe).Xa)),m[Ve]=Tt.X[$e],$e=!0}$e||e(J.h==ne(J))}if(h.Pb&&J.h&&me<F)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&Je(h.s.vb,h.s.Wa);else{if(J.h)break e;j?.(h,z>V?V:z),h.a=0,h.$=me-E}return 1}return h.a=3,0}function ai(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var m=h.Wa;m!=null&&(m.X=null),h.vb=null,e(h!=null)}function qi(){var h=new kt;return h==null?null:(h.a=0,h.xb=Xk,Un("Predictor","VP8LPredictors"),Un("Predictor","VP8LPredictors_C"),Un("PredictorAdd","VP8LPredictorsAdd"),Un("PredictorAdd","VP8LPredictorsAdd_C"),Yr=Ct,Jg=zt,Zg=pr,_l=an,wl=jt,bl=Kt,Ld=Bn,w.VP8LMapColor32b=Cc,w.VP8LMapColor8b=Qg,h)}function gs(h,m,E,C,F){var V=1,j=[h],z=[m],$=C.m,J=C.s,re=null,me=0;e:for(;;){if(E)for(;V&&Oe($,1);){var Z=j,ae=z,de=C,Ce=1,pe=de.m,xe=de.gc[de.ab],Re=Oe(pe,2);if(de.Oc&1<<Re)V=0;else{switch(de.Oc|=1<<Re,xe.hc=Re,xe.Ea=Z[0],xe.nc=ae[0],xe.K=[null],++de.ab,e(4>=de.ab),Re){case 0:case 1:xe.b=Oe(pe,3)+2,Ce=gs(Fe(xe.Ea,xe.b),Fe(xe.nc,xe.b),0,de,xe.K),xe.K=xe.K[0];break;case 3:var $e,Ve=Oe(pe,8)+1,Tt=16<Ve?0:4<Ve?1:2<Ve?2:3;if(Z[0]=Fe(xe.Ea,Tt),xe.b=Tt,$e=Ce=gs(Ve,1,0,de,xe.K)){var ut,cn=Ve,mt=xe,An=1<<(8>>mt.b),Ri=s(An);if(Ri==null)$e=0;else{var un=mt.K[0],yt=mt.w;for(Ri[0]=mt.K[0][0],ut=1;ut<1*cn;++ut)Ri[ut]=tt(un[yt+ut],Ri[ut-1]);for(;ut<4*An;++ut)Ri[ut]=0;mt.K[0]=null,mt.K[0]=Ri,$e=1}}Ce=$e;break;case 2:break;default:e(0)}V=Ce}}if(j=j[0],z=z[0],V&&Oe($,1)&&!(V=1<=(me=Oe($,4))&&11>=me)){C.a=3;break e}var Ze;if(Ze=V)t:{var Zr,tn,Nn,br=C,ss=j,zs=z,Fr=me,_s=E,$s=br.m,Pi=br.s,Vn=[null],er=1,Vr=0,tr=S$[Fr];n:for(;;){if(_s&&Oe($s,1)){var os=Oe($s,3)+2,Ua=Fe(ss,os),Xr=Fe(zs,os),uo=Ua*Xr;if(!gs(Ua,Xr,0,br,Vn))break n;for(Vn=Vn[0],Pi.xc=os,Zr=0;Zr<uo;++Zr){var hr=Vn[Zr]>>8&65535;Vn[Zr]=hr,hr>=er&&(er=hr+1)}}if($s.h)break n;for(tn=0;5>tn;++tn){var ki=Jk[tn];!tn&&0<Fr&&(ki+=1<<Fr),Vr<ki&&(Vr=ki)}var No=o(er*tr,I),Hs=er,Ro=o(Hs,ye);if(Ro==null)var Po=null;else e(65536>=Hs),Po=Ro;var lo=s(Vr);if(Po==null||lo==null||No==null){br.a=1;break n}var ko=No;for(Zr=Nn=0;Zr<er;++Zr){var mr=Po[Zr],Mo=mr.G,qa=mr.H,Vd=0,Iu=1,as=0;for(tn=0;5>tn;++tn){ki=Jk[tn],Mo[tn]=ko,qa[tn]=Nn,!tn&&0<Fr&&(ki+=1<<Fr);i:{var M_,sT=ki,O_=br,rm=lo,W$=ko,K$=Nn,oT=0,Al=O_.m,Q$=Oe(Al,1);if(i(rm,0,0,sT),Q$){var Y$=Oe(Al,1)+1,J$=Oe(Al,1),cM=Oe(Al,J$==0?1:8);rm[cM]=1,Y$==2&&(rm[cM=Oe(Al,8)]=1);var L_=1}else{var uM=s(19),lM=Oe(Al,4)+4;if(19<lM){O_.a=3;var F_=0;break i}for(M_=0;M_<lM;++M_)uM[T$[M_]]=Oe(Al,3);var aT=void 0,im=void 0,dM=O_,Z$=uM,V_=sT,hM=rm,cT=0,Sl=dM.m,fM=8,pM=o(128,I);r:for(;S(pM,0,7,Z$,19);){if(Oe(Sl,1)){var X$=2+2*Oe(Sl,3);if((aT=2+Oe(Sl,X$))>V_)break r}else aT=V_;for(im=0;im<V_&&aT--;){le(Sl);var gM=pM[0+(127&X(Sl))];oe(Sl,Sl.u+gM.g);var bf=gM.value;if(16>bf)hM[im++]=bf,bf!=0&&(fM=bf);else{var eH=bf==16,mM=bf-16,tH=E$[mM],yM=Oe(Sl,b$[mM])+tH;if(im+yM>V_)break r;for(var nH=eH?fM:0;0<yM--;)hM[im++]=nH}}cT=1;break r}cT||(dM.a=3),L_=cT}(L_=L_&&!Al.h)&&(oT=S(W$,K$,8,rm,sT)),L_&&oT!=0?F_=oT:(O_.a=3,F_=0)}if(F_==0)break n;if(Iu&&I$[tn]==1&&(Iu=ko[Nn].g==0),Vd+=ko[Nn].g,Nn+=F_,3>=tn){var sm,uT=lo[0];for(sm=1;sm<ki;++sm)lo[sm]>uT&&(uT=lo[sm]);as+=uT}}if(mr.nd=Iu,mr.Qb=0,Iu&&(mr.qb=(Mo[3][qa[3]+0].value<<24|Mo[1][qa[1]+0].value<<16|Mo[2][qa[2]+0].value)>>>0,Vd==0&&256>Mo[0][qa[0]+0].value&&(mr.Qb=1,mr.qb+=Mo[0][qa[0]+0].value<<8)),mr.jc=!mr.Qb&&6>as,mr.jc){var B_,Tu=mr;for(B_=0;B_<Od;++B_){var Cl=B_,Dl=Tu.pd[Cl],j_=Tu.G[0][Tu.H[0]+Cl];256<=j_.value?(Dl.g=j_.g+256,Dl.value=j_.value):(Dl.g=0,Dl.value=0,Cl>>=Er(j_,8,Dl),Cl>>=Er(Tu.G[1][Tu.H[1]+Cl],16,Dl),Cl>>=Er(Tu.G[2][Tu.H[2]+Cl],0,Dl),Er(Tu.G[3][Tu.H[3]+Cl],24,Dl))}}}Pi.vc=Vn,Pi.Wb=er,Pi.Ya=Po,Pi.yc=No,Ze=1;break t}Ze=0}if(!(V=Ze)){C.a=3;break e}if(0<me){if(J.ua=1<<me,!H(J.Wa,me)){C.a=1,V=0;break e}}else J.ua=0;var lT=C,vM=j,rH=z,dT=lT.s,hT=dT.xc;if(lT.c=vM,lT.i=rH,dT.md=Fe(vM,hT),dT.wc=hT==0?-1:(1<<hT)-1,E){C.xb=M$;break e}if((re=s(j*z))==null){C.a=1,V=0;break e}V=(V=Ci(C,re,0,j,z,z,null))&&!$.h;break e}return V?(F!=null?F[0]=re:(e(re==null),e(E)),C.$=0,E||ai(J)):ai(J),V}function Xo(h,m){var E=h.c*h.i,C=E+m+16*m;return e(h.c<=m),h.V=s(C),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+E+m,1)}function Fs(h,m){var E=h.C,C=m-E,F=h.V,V=h.Ba+h.c*E;for(e(m<=h.l.o);0<C;){var j=16<C?16:C,z=h.l.ma,$=h.l.width,J=$*j,re=z.ca,me=z.tb+$*E,Z=h.Ta,ae=h.Ua;fs(h,j,F,V),zk(Z,ae,re,me,J),ji(z,E,E+j,re,me,$),C-=j,F+=j*h.c,E+=j}e(E==m),h.C=h.Ma=m}function wo(){this.ub=this.yd=this.td=this.Rb=0}function bo(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ea(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Vs(){this.Yb=(function(){var h=[];return(function m(E,C,F){for(var V=F[C],j=0;j<V&&(E.push(F.length>C+1?[]:0),!(F.length<C+1));j++)m(E[j],C+1,F)})(h,0,[3,11]),h})()}function Eo(){this.jb=s(3),this.Wc=a([4,8],Vs),this.Xc=a([4,17],Vs)}function hu(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Di(){this.ld=this.La=this.dd=this.tc=0}function io(){this.Na=this.la=0}function Bs(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Io(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function _c(){this.uc=this.M=this.Nb=0,this.wa=Array(new Di),this.Y=0,this.ya=Array(new Io),this.aa=0,this.l=new ta}function wc(){this.y=s(16),this.f=s(8),this.ea=s(8)}function bc(){this.cb=this.a=0,this.sc="",this.m=new B,this.Od=new wo,this.Kc=new bo,this.ed=new hu,this.Qa=new ea,this.Ic=this.$c=this.Aa=0,this.D=new _c,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,B),this.ia=0,this.pb=o(4,Bs),this.Pa=new Eo,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new wc),this.Hd=0,this.rb=Array(new io),this.sb=0,this.wa=Array(new Di),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Io),this.L=this.aa=0,this.gd=a([4,2],Di),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ms(h,m){return 0>h?0:h>m?m:h}function ta(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ys(){var h=new bc;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,tm||(tm=na)),h}function xn(h,m,E){return h.a==0&&(h.a=m,h.sc=E,h.cb=0),0}function To(h,m,E){return 3<=E&&h[m+0]==157&&h[m+1]==1&&h[m+2]==42}function zi(h,m){if(h==null)return 0;if(h.a=0,h.sc="OK",m==null)return xn(h,2,"null VP8Io passed to VP8GetHeaders()");var E=m.data,C=m.w,F=m.ha;if(4>F)return xn(h,7,"Truncated header.");var V=E[C+0]|E[C+1]<<8|E[C+2]<<16,j=h.Od;if(j.Rb=!(1&V),j.td=V>>1&7,j.yd=V>>4&1,j.ub=V>>5,3<j.td)return xn(h,3,"Incorrect keyframe parameters.");if(!j.yd)return xn(h,4,"Frame not displayable.");C+=3,F-=3;var z=h.Kc;if(j.Rb){if(7>F)return xn(h,7,"cannot parse picture header");if(!To(E,C,F))return xn(h,3,"Bad code word");z.c=16383&(E[C+4]<<8|E[C+3]),z.Td=E[C+4]>>6,z.i=16383&(E[C+6]<<8|E[C+5]),z.Ud=E[C+6]>>6,C+=7,F-=7,h.za=z.c+15>>4,h.Ub=z.i+15>>4,m.width=z.c,m.height=z.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,i((V=h.Pa).jb,0,255,V.jb.length),e((V=h.Qa)!=null),V.Cb=0,V.Bb=0,V.Fb=1,i(V.Zb,0,0,V.Zb.length),i(V.Lb,0,0,V.Lb)}if(j.ub>F)return xn(h,7,"bad partition length");Se(V=h.m,E,C,j.ub),C+=j.ub,F-=j.ub,j.Rb&&(z.Ld=Ee(V),z.Kd=Ee(V)),z=h.Qa;var $,J=h.Pa;if(e(V!=null),e(z!=null),z.Cb=Ee(V),z.Cb){if(z.Bb=Ee(V),Ee(V)){for(z.Fb=Ee(V),$=0;4>$;++$)z.Zb[$]=Ee(V)?he(V,7):0;for($=0;4>$;++$)z.Lb[$]=Ee(V)?he(V,6):0}if(z.Bb)for($=0;3>$;++$)J.jb[$]=Ee(V)?Ie(V,8):255}else z.Bb=0;if(V.Ka)return xn(h,3,"cannot parse segment header");if((z=h.ed).zd=Ee(V),z.Tb=Ie(V,6),z.wb=Ie(V,3),z.Pc=Ee(V),z.Pc&&Ee(V)){for(J=0;4>J;++J)Ee(V)&&(z.vd[J]=he(V,6));for(J=0;4>J;++J)Ee(V)&&(z.od[J]=he(V,6))}if(h.L=z.Tb==0?0:z.zd?1:2,V.Ka)return xn(h,3,"cannot parse filter header");var re=F;if(F=$=C,C=$+re,z=re,h.Xb=(1<<Ie(h.m,2))-1,re<3*(J=h.Xb))E=7;else{for($+=3*J,z-=3*J,re=0;re<J;++re){var me=E[F+0]|E[F+1]<<8|E[F+2]<<16;me>z&&(me=z),Se(h.Jc[+re],E,$,me),$+=me,z-=me,F+=3}Se(h.Jc[+J],E,$,z),E=$<C?0:5}if(E!=0)return xn(h,E,"cannot parse partitions");for(E=Ie($=h.m,7),F=Ee($)?he($,4):0,C=Ee($)?he($,4):0,z=Ee($)?he($,4):0,J=Ee($)?he($,4):0,$=Ee($)?he($,4):0,re=h.Qa,me=0;4>me;++me){if(re.Cb){var Z=re.Zb[me];re.Fb||(Z+=E)}else{if(0<me){h.pb[me]=h.pb[0];continue}Z=E}var ae=h.pb[me];ae.Sc[0]=nT[ms(Z+F,127)],ae.Sc[1]=rT[ms(Z+0,127)],ae.Eb[0]=2*nT[ms(Z+C,127)],ae.Eb[1]=101581*rT[ms(Z+z,127)]>>16,8>ae.Eb[1]&&(ae.Eb[1]=8),ae.Qc[0]=nT[ms(Z+J,117)],ae.Qc[1]=rT[ms(Z+$,127)],ae.lc=Z+$}if(!j.Rb)return xn(h,4,"Not a key frame.");for(Ee(V),j=h.Pa,E=0;4>E;++E){for(F=0;8>F;++F)for(C=0;3>C;++C)for(z=0;11>z;++z)J=De(V,P$[E][F][C][z])?Ie(V,8):N$[E][F][C][z],j.Wc[E][F].Yb[C][z]=J;for(F=0;17>F;++F)j.Xc[E][F]=j.Wc[E][k$[F]]}return h.kc=Ee(V),h.kc&&(h.Bd=Ie(V,8)),h.cb=1}function na(h,m,E,C,F,V,j){var z=m[F].Yb[E];for(E=0;16>F;++F){if(!De(h,z[E+0]))return F;for(;!De(h,z[E+1]);)if(z=m[++F].Yb[0],E=0,F==16)return 16;var $=m[F+1].Yb;if(De(h,z[E+2])){var J=h,re=0;if(De(J,(Z=z)[(me=E)+3]))if(De(J,Z[me+6])){for(z=0,me=2*(re=De(J,Z[me+8]))+(Z=De(J,Z[me+9+re])),re=0,Z=D$[me];Z[z];++z)re+=re+De(J,Z[z]);re+=3+(8<<me)}else De(J,Z[me+7])?(re=7+2*De(J,165),re+=De(J,145)):re=5+De(J,159);else re=De(J,Z[me+4])?3+De(J,Z[me+5]):2;z=$[2]}else re=1,z=$[1];$=j+x$[F],0>(J=h).b&&be(J);var me,Z=J.b,ae=(me=J.Ca>>1)-(J.I>>Z)>>31;--J.b,J.Ca+=ae,J.Ca|=1,J.I-=(me+1&ae)<<Z,V[$]=((re^ae)-ae)*C[(0<F)+0]}return 16}function Fn(h){var m=h.rb[h.sb-1];m.la=0,m.Na=0,i(h.zc,0,0,h.zc.length),h.ja=0}function ci(h,m,E,C,F){F=h[m+E+32*C]+(F>>3),h[m+E+32*C]=-256&F?0>F?0:255:F}function ur(h,m,E,C,F,V){ci(h,m,0,E,C+F),ci(h,m,1,E,C+V),ci(h,m,2,E,C-V),ci(h,m,3,E,C-F)}function kr(h){return(20091*h>>16)+h}function vs(h,m,E,C){var F,V=0,j=s(16);for(F=0;4>F;++F){var z=h[m+0]+h[m+8],$=h[m+0]-h[m+8],J=(35468*h[m+4]>>16)-kr(h[m+12]),re=kr(h[m+4])+(35468*h[m+12]>>16);j[V+0]=z+re,j[V+1]=$+J,j[V+2]=$-J,j[V+3]=z-re,V+=4,m++}for(F=V=0;4>F;++F)z=(h=j[V+0]+4)+j[V+8],$=h-j[V+8],J=(35468*j[V+4]>>16)-kr(j[V+12]),ci(E,C,0,0,z+(re=kr(j[V+4])+(35468*j[V+12]>>16))),ci(E,C,1,0,$+J),ci(E,C,2,0,$-J),ci(E,C,3,0,z-re),V++,C+=32}function Oa(h,m,E,C){var F=h[m+0]+4,V=35468*h[m+4]>>16,j=kr(h[m+4]),z=35468*h[m+1]>>16;ur(E,C,0,F+j,h=kr(h[m+1]),z),ur(E,C,1,F+V,h,z),ur(E,C,2,F-V,h,z),ur(E,C,3,F-j,h,z)}function Ec(h,m,E,C,F){vs(h,m,E,C),F&&vs(h,m+16,E,C+4)}function js(h,m,E,C){Fd(h,m+0,E,C,1),Fd(h,m+32,E,C+128,1)}function jn(h,m,E,C){var F;for(h=h[m+0]+4,F=0;4>F;++F)for(m=0;4>m;++m)ci(E,C,m,F,h)}function La(h,m,E,C){h[m+0]&&Kn(h,m+0,E,C),h[m+16]&&Kn(h,m+16,E,C+4),h[m+32]&&Kn(h,m+32,E,C+128),h[m+48]&&Kn(h,m+48,E,C+128+4)}function $i(h,m,E,C){var F,V=s(16);for(F=0;4>F;++F){var j=h[m+0+F]+h[m+12+F],z=h[m+4+F]+h[m+8+F],$=h[m+4+F]-h[m+8+F],J=h[m+0+F]-h[m+12+F];V[0+F]=j+z,V[8+F]=j-z,V[4+F]=J+$,V[12+F]=J-$}for(F=0;4>F;++F)j=(h=V[0+4*F]+3)+V[3+4*F],z=V[1+4*F]+V[2+4*F],$=V[1+4*F]-V[2+4*F],J=h-V[3+4*F],E[C+0]=j+z>>3,E[C+16]=J+$>>3,E[C+32]=j-z>>3,E[C+48]=J-$>>3,C+=64}function Kr(h,m,E){var C,F=m-32,V=xo,j=255-h[F-1];for(C=0;C<E;++C){var z,$=V,J=j+h[m-1];for(z=0;z<E;++z)h[m+z]=$[J+h[F+z]];m+=32}}function hl(h,m){Kr(h,m,4)}function fu(h,m){Kr(h,m,8)}function fl(h,m){Kr(h,m,16)}function Ic(h,m){var E;for(E=0;16>E;++E)r(h,m+32*E,h,m-32,16)}function pu(h,m){var E;for(E=16;0<E;--E)i(h,m,h[m-1],16),m+=32}function ui(h,m,E){var C;for(C=0;16>C;++C)i(m,E+32*C,h,16)}function Fa(h,m){var E,C=16;for(E=0;16>E;++E)C+=h[m-1+32*E]+h[m+E-32];ui(C>>5,h,m)}function Hi(h,m){var E,C=8;for(E=0;16>E;++E)C+=h[m-1+32*E];ui(C>>4,h,m)}function Tc(h,m){var E,C=8;for(E=0;16>E;++E)C+=h[m+E-32];ui(C>>4,h,m)}function Us(h,m){ui(128,h,m)}function Ot(h,m,E){return h+2*m+E+2>>2}function qs(h,m){var E,C=m-32;for(C=new Uint8Array([Ot(h[C-1],h[C+0],h[C+1]),Ot(h[C+0],h[C+1],h[C+2]),Ot(h[C+1],h[C+2],h[C+3]),Ot(h[C+2],h[C+3],h[C+4])]),E=0;4>E;++E)r(h,m+32*E,C,0,C.length)}function Ac(h,m){var E=h[m-1],C=h[m-1+32],F=h[m-1+64],V=h[m-1+96];Be(h,m+0,16843009*Ot(h[m-1-32],E,C)),Be(h,m+32,16843009*Ot(E,C,F)),Be(h,m+64,16843009*Ot(C,F,V)),Be(h,m+96,16843009*Ot(F,V,V))}function pl(h,m){var E,C=4;for(E=0;4>E;++E)C+=h[m+E-32]+h[m-1+32*E];for(C>>=3,E=0;4>E;++E)i(h,m+32*E,C,4)}function rs(h,m){var E=h[m-1+0],C=h[m-1+32],F=h[m-1+64],V=h[m-1-32],j=h[m+0-32],z=h[m+1-32],$=h[m+2-32],J=h[m+3-32];h[m+0+96]=Ot(C,F,h[m-1+96]),h[m+1+96]=h[m+0+64]=Ot(E,C,F),h[m+2+96]=h[m+1+64]=h[m+0+32]=Ot(V,E,C),h[m+3+96]=h[m+2+64]=h[m+1+32]=h[m+0+0]=Ot(j,V,E),h[m+3+64]=h[m+2+32]=h[m+1+0]=Ot(z,j,V),h[m+3+32]=h[m+2+0]=Ot($,z,j),h[m+3+0]=Ot(J,$,z)}function Ir(h,m){var E=h[m+1-32],C=h[m+2-32],F=h[m+3-32],V=h[m+4-32],j=h[m+5-32],z=h[m+6-32],$=h[m+7-32];h[m+0+0]=Ot(h[m+0-32],E,C),h[m+1+0]=h[m+0+32]=Ot(E,C,F),h[m+2+0]=h[m+1+32]=h[m+0+64]=Ot(C,F,V),h[m+3+0]=h[m+2+32]=h[m+1+64]=h[m+0+96]=Ot(F,V,j),h[m+3+32]=h[m+2+64]=h[m+1+96]=Ot(V,j,z),h[m+3+64]=h[m+2+96]=Ot(j,z,$),h[m+3+96]=Ot(z,$,$)}function gl(h,m){var E=h[m-1+0],C=h[m-1+32],F=h[m-1+64],V=h[m-1-32],j=h[m+0-32],z=h[m+1-32],$=h[m+2-32],J=h[m+3-32];h[m+0+0]=h[m+1+64]=V+j+1>>1,h[m+1+0]=h[m+2+64]=j+z+1>>1,h[m+2+0]=h[m+3+64]=z+$+1>>1,h[m+3+0]=$+J+1>>1,h[m+0+96]=Ot(F,C,E),h[m+0+64]=Ot(C,E,V),h[m+0+32]=h[m+1+96]=Ot(E,V,j),h[m+1+32]=h[m+2+96]=Ot(V,j,z),h[m+2+32]=h[m+3+96]=Ot(j,z,$),h[m+3+32]=Ot(z,$,J)}function gu(h,m){var E=h[m+0-32],C=h[m+1-32],F=h[m+2-32],V=h[m+3-32],j=h[m+4-32],z=h[m+5-32],$=h[m+6-32],J=h[m+7-32];h[m+0+0]=E+C+1>>1,h[m+1+0]=h[m+0+64]=C+F+1>>1,h[m+2+0]=h[m+1+64]=F+V+1>>1,h[m+3+0]=h[m+2+64]=V+j+1>>1,h[m+0+32]=Ot(E,C,F),h[m+1+32]=h[m+0+96]=Ot(C,F,V),h[m+2+32]=h[m+1+96]=Ot(F,V,j),h[m+3+32]=h[m+2+96]=Ot(V,j,z),h[m+3+64]=Ot(j,z,$),h[m+3+96]=Ot(z,$,J)}function Tn(h,m){var E=h[m-1+0],C=h[m-1+32],F=h[m-1+64],V=h[m-1+96];h[m+0+0]=E+C+1>>1,h[m+2+0]=h[m+0+32]=C+F+1>>1,h[m+2+32]=h[m+0+64]=F+V+1>>1,h[m+1+0]=Ot(E,C,F),h[m+3+0]=h[m+1+32]=Ot(C,F,V),h[m+3+32]=h[m+1+64]=Ot(F,V,V),h[m+3+64]=h[m+2+64]=h[m+0+96]=h[m+1+96]=h[m+2+96]=h[m+3+96]=V}function ra(h,m){var E=h[m-1+0],C=h[m-1+32],F=h[m-1+64],V=h[m-1+96],j=h[m-1-32],z=h[m+0-32],$=h[m+1-32],J=h[m+2-32];h[m+0+0]=h[m+2+32]=E+j+1>>1,h[m+0+32]=h[m+2+64]=C+E+1>>1,h[m+0+64]=h[m+2+96]=F+C+1>>1,h[m+0+96]=V+F+1>>1,h[m+3+0]=Ot(z,$,J),h[m+2+0]=Ot(j,z,$),h[m+1+0]=h[m+3+32]=Ot(E,j,z),h[m+1+32]=h[m+3+64]=Ot(C,E,j),h[m+1+64]=h[m+3+96]=Ot(F,C,E),h[m+1+96]=Ot(V,F,C)}function ia(h,m){var E;for(E=0;8>E;++E)r(h,m+32*E,h,m-32,8)}function sa(h,m){var E;for(E=0;8>E;++E)i(h,m,h[m-1],8),m+=32}function Gi(h,m,E){var C;for(C=0;8>C;++C)i(m,E+32*C,h,8)}function mu(h,m){var E,C=8;for(E=0;8>E;++E)C+=h[m+E-32]+h[m-1+32*E];Gi(C>>4,h,m)}function so(h,m){var E,C=4;for(E=0;8>E;++E)C+=h[m+E-32];Gi(C>>3,h,m)}function yn(h,m){var E,C=4;for(E=0;8>E;++E)C+=h[m-1+32*E];Gi(C>>3,h,m)}function yu(h,m){Gi(128,h,m)}function Ao(h,m,E){var C=h[m-E],F=h[m+0],V=3*(F-C)+JI[1020+h[m-2*E]-h[m+E]],j=A_[112+(V+4>>3)];h[m-E]=xo[255+C+A_[112+(V+3>>3)]],h[m+0]=xo[255+F-j]}function oo(h,m,E,C){var F=h[m+0],V=h[m+E];return la[255+h[m-2*E]-h[m-E]]>C||la[255+V-F]>C}function oa(h,m,E,C){return 4*la[255+h[m-E]-h[m+0]]+la[255+h[m-2*E]-h[m+E]]<=C}function aa(h,m,E,C,F){var V=h[m-3*E],j=h[m-2*E],z=h[m-E],$=h[m+0],J=h[m+E],re=h[m+2*E],me=h[m+3*E];return 4*la[255+z-$]+la[255+j-J]>C?0:la[255+h[m-4*E]-V]<=F&&la[255+V-j]<=F&&la[255+j-z]<=F&&la[255+me-re]<=F&&la[255+re-J]<=F&&la[255+J-$]<=F}function is(h,m,E,C){var F=2*C+1;for(C=0;16>C;++C)oa(h,m+C,E,F)&&Ao(h,m+C,E)}function Va(h,m,E,C){var F=2*C+1;for(C=0;16>C;++C)oa(h,m+C*E,1,F)&&Ao(h,m+C*E,1)}function xi(h,m,E,C){var F;for(F=3;0<F;--F)is(h,m+=4*E,E,C)}function vu(h,m,E,C){var F;for(F=3;0<F;--F)Va(h,m+=4,E,C)}function ao(h,m,E,C,F,V,j,z){for(V=2*V+1;0<F--;){if(aa(h,m,E,V,j))if(oo(h,m,E,z))Ao(h,m,E);else{var $=h,J=m,re=E,me=$[J-2*re],Z=$[J-re],ae=$[J+0],de=$[J+re],Ce=$[J+2*re],pe=27*(Re=JI[1020+3*(ae-Z)+JI[1020+me-de]])+63>>7,xe=18*Re+63>>7,Re=9*Re+63>>7;$[J-3*re]=xo[255+$[J-3*re]+Re],$[J-2*re]=xo[255+me+xe],$[J-re]=xo[255+Z+pe],$[J+0]=xo[255+ae-pe],$[J+re]=xo[255+de-xe],$[J+2*re]=xo[255+Ce-Re]}m+=C}}function Qr(h,m,E,C,F,V,j,z){for(V=2*V+1;0<F--;){if(aa(h,m,E,V,j))if(oo(h,m,E,z))Ao(h,m,E);else{var $=h,J=m,re=E,me=$[J-re],Z=$[J+0],ae=$[J+re],de=A_[112+(4+(Ce=3*(Z-me))>>3)],Ce=A_[112+(Ce+3>>3)],pe=de+1>>1;$[J-2*re]=xo[255+$[J-2*re]+pe],$[J-re]=xo[255+me+Ce],$[J+0]=xo[255+Z-de],$[J+re]=xo[255+ae-pe]}m+=C}}function Sc(h,m,E,C,F,V){ao(h,m,E,1,16,C,F,V)}function co(h,m,E,C,F,V){ao(h,m,1,E,16,C,F,V)}function So(h,m,E,C,F,V){var j;for(j=3;0<j;--j)Qr(h,m+=4*E,E,1,16,C,F,V)}function v(h,m,E,C,F,V){var j;for(j=3;0<j;--j)Qr(h,m+=4,1,E,16,C,F,V)}function L(h,m,E,C,F,V,j,z){ao(h,m,F,1,8,V,j,z),ao(E,C,F,1,8,V,j,z)}function Q(h,m,E,C,F,V,j,z){ao(h,m,1,F,8,V,j,z),ao(E,C,1,F,8,V,j,z)}function te(h,m,E,C,F,V,j,z){Qr(h,m+4*F,F,1,8,V,j,z),Qr(E,C+4*F,F,1,8,V,j,z)}function ce(h,m,E,C,F,V,j,z){Qr(h,m+4,1,F,8,V,j,z),Qr(E,C+4,1,F,8,V,j,z)}function Ae(){this.ba=new $t,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new mn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Me(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function rt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ct(){this.ua=0,this.Wa=new qt,this.vb=new qt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ye,this.yc=new I}function kt(){this.xb=this.a=0,this.l=new ta,this.ca=new $t,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Y,this.Pb=0,this.wd=new Y,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ct,this.ab=0,this.gc=o(4,rt),this.Oc=0}function Mt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ta,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Lt(h,m,E,C,F,V,j){for(h=h==null?0:h[m+0],m=0;m<j;++m)F[V+m]=h+E[C+m]&255,h=F[V+m]}function Xn(h,m,E,C,F,V,j){var z;if(h==null)Lt(null,null,E,C,F,V,j);else for(z=0;z<j;++z)F[V+z]=h[m+z]+E[C+z]&255}function zn(h,m,E,C,F,V,j){if(h==null)Lt(null,null,E,C,F,V,j);else{var z,$=h[m+0],J=$,re=$;for(z=0;z<j;++z)J=re+($=h[m+z])-J,re=E[C+z]+(-256&J?0>J?0:255:J)&255,J=$,F[V+z]=re}}function wn(h,m,E,C){var F=m.width,V=m.o;if(e(h!=null&&m!=null),0>E||0>=C||E+C>V)return null;if(!h.Cc){if(h.ga==null){var j;if(h.ga=new Mt,(j=h.ga==null)||(j=m.width*m.o,e(h.Gb.length==0),h.Gb=s(j),h.Uc=0,h.Gb==null?j=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,j=1),j=!j),!j){j=h.ga;var z=h.Fa,$=h.P,J=h.qc,re=h.mb,me=h.nb,Z=$+1,ae=J-1,de=j.l;if(e(z!=null&&re!=null&&m!=null),Tl[0]=null,Tl[1]=Lt,Tl[2]=Xn,Tl[3]=zn,j.ca=re,j.tb=me,j.c=m.width,j.i=m.height,e(0<j.c&&0<j.i),1>=J)m=0;else if(j.$a=3&z[$+0],j.Z=z[$+0]>>2&3,j.Lc=z[$+0]>>4&3,$=z[$+0]>>6&3,0>j.$a||1<j.$a||4<=j.Z||1<j.Lc||$)m=0;else if(de.put=ft,de.ac=Ls,de.bc=ro,de.ma=j,de.width=m.width,de.height=m.height,de.Da=m.Da,de.v=m.v,de.va=m.va,de.j=m.j,de.o=m.o,j.$a)e:{e(j.$a==1),m=qi();t:for(;;){if(m==null){m=0;break e}if(e(j!=null),j.mc=m,m.c=j.c,m.i=j.i,m.l=j.l,m.l.ma=j,m.l.width=j.c,m.l.height=j.i,m.a=0,Te(m.m,z,Z,ae),!gs(j.c,j.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&ps(m.s)?(j.ic=1,z=m.c*m.i,m.Ta=null,m.Ua=0,m.V=s(z),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):(j.ic=0,m=Xo(m,j.c)),!m))break t;m=1;break e}j.mc=null,m=0}else m=ae>=j.c*j.i;j=!m}if(j)return null;h.ga.Lc!=1?h.Ga=0:C=V-E}e(h.ga!=null),e(E+C<=V);e:{if(m=(z=h.ga).c,V=z.l.o,z.$a==0){if(Z=h.rc,ae=h.Vc,de=h.Fa,$=h.P+1+E*m,J=h.mb,re=h.nb+E*m,e($<=h.P+h.qc),z.Z!=0)for(e(Tl[z.Z]!=null),j=0;j<C;++j)Tl[z.Z](Z,ae,de,$,J,re,m),Z=J,ae=re,re+=m,$+=m;else for(j=0;j<C;++j)r(J,re,de,$,m),Z=J,ae=re,re+=m,$+=m;h.rc=Z,h.Vc=ae}else{if(e(z.mc!=null),m=E+C,e((j=z.mc)!=null),e(m<=j.i),j.C>=m)m=1;else if(z.ic||se(),z.ic){z=j.V,Z=j.Ba,ae=j.c;var Ce=j.i,pe=(de=1,$=j.$/ae,J=j.$%ae,re=j.m,me=j.s,j.$),xe=ae*Ce,Re=ae*m,$e=me.wc,Ve=pe<Re?wr(me,J,$):null;e(pe<=xe),e(m<=Ce),e(ps(me));t:for(;;){for(;!re.h&&pe<Re;){if(J&$e||(Ve=wr(me,J,$)),e(Ve!=null),le(re),256>(Ce=qn(Ve.G[0],Ve.H[0],re)))z[Z+pe]=Ce,++pe,++J>=ae&&(J=0,++$<=m&&!($%16)&&Ui(j,$));else{if(!(280>Ce)){de=0;break t}Ce=oi(Ce-256,re);var Tt,ut=qn(Ve.G[4],Ve.H[4],re);if(le(re),!(pe>=(ut=Wr(ae,ut=oi(ut,re)))&&xe-pe>=Ce)){de=0;break t}for(Tt=0;Tt<Ce;++Tt)z[Z+pe+Tt]=z[Z+pe+Tt-ut];for(pe+=Ce,J+=Ce;J>=ae;)J-=ae,++$<=m&&!($%16)&&Ui(j,$);pe<Re&&J&$e&&(Ve=wr(me,J,$))}e(re.h==ne(re))}Ui(j,$>m?m:$);break t}!de||re.h&&pe<xe?(de=0,j.a=re.h?5:3):j.$=pe,m=de}else m=Ci(j,j.V,j.Ba,j.c,j.i,m,Fs);if(!m){C=0;break e}}E+C>=V&&(h.Cc=1),C=1}if(!C)return null;if(h.Cc&&((C=h.ga)!=null&&(C.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+E*F}function f(h,m,E,C,F,V){for(;0<F--;){var j,z=h,$=m+(E?1:0),J=h,re=m+(E?0:3);for(j=0;j<C;++j){var me=J[re+4*j];me!=255&&(me*=32897,z[$+4*j+0]=z[$+4*j+0]*me>>23,z[$+4*j+1]=z[$+4*j+1]*me>>23,z[$+4*j+2]=z[$+4*j+2]*me>>23)}m+=V}}function A(h,m,E,C,F){for(;0<C--;){var V;for(V=0;V<E;++V){var j=h[m+2*V+0],z=15&(J=h[m+2*V+1]),$=4369*z,J=(240&J|J>>4)*$>>16;h[m+2*V+0]=(240&j|j>>4)*$>>16&240|(15&j|j<<4)*$>>16>>4&15,h[m+2*V+1]=240&J|z}m+=F}}function R(h,m,E,C,F,V,j,z){var $,J,re=255;for(J=0;J<F;++J){for($=0;$<C;++$){var me=h[m+$];V[j+4*$]=me,re&=me}m+=E,j+=z}return re!=255}function q(h,m,E,C,F){var V;for(V=0;V<F;++V)E[C+V]=h[m+V]>>8}function se(){em=f,Uk=A,qk=R,zk=q}function ge(h,m,E){w[h]=function(C,F,V,j,z,$,J,re,me,Z,ae,de,Ce,pe,xe,Re,$e){var Ve,Tt=$e-1>>1,ut=z[$+0]|J[re+0]<<16,cn=me[Z+0]|ae[de+0]<<16;e(C!=null);var mt=3*ut+cn+131074>>2;for(m(C[F+0],255&mt,mt>>16,Ce,pe),V!=null&&(mt=3*cn+ut+131074>>2,m(V[j+0],255&mt,mt>>16,xe,Re)),Ve=1;Ve<=Tt;++Ve){var An=z[$+Ve]|J[re+Ve]<<16,Ri=me[Z+Ve]|ae[de+Ve]<<16,un=ut+An+cn+Ri+524296,yt=un+2*(An+cn)>>3;mt=yt+ut>>1,ut=(un=un+2*(ut+Ri)>>3)+An>>1,m(C[F+2*Ve-1],255&mt,mt>>16,Ce,pe+(2*Ve-1)*E),m(C[F+2*Ve-0],255&ut,ut>>16,Ce,pe+(2*Ve-0)*E),V!=null&&(mt=un+cn>>1,ut=yt+Ri>>1,m(V[j+2*Ve-1],255&mt,mt>>16,xe,Re+(2*Ve-1)*E),m(V[j+2*Ve+0],255&ut,ut>>16,xe,Re+(2*Ve+0)*E)),ut=An,cn=Ri}1&$e||(mt=3*ut+cn+131074>>2,m(C[F+$e-1],255&mt,mt>>16,Ce,pe+($e-1)*E),V!=null&&(mt=3*cn+ut+131074>>2,m(V[j+$e-1],255&mt,mt>>16,xe,Re+($e-1)*E)))}}function Ge(){da[S_]=O$,da[C_]=eM,da[Qk]=L$,da[D_]=tM,da[x_]=nM,da[ZI]=rM,da[Yk]=F$,da[XI]=eM,da[eT]=tM,da[N_]=nM,da[tT]=rM}function Dt(h){return h&~V$?0>h?0:255:h>>iM}function d(h,m){return Dt((19077*h>>8)+(26149*m>>8)-14234)}function b(h,m,E){return Dt((19077*h>>8)-(6419*m>>8)-(13320*E>>8)+8708)}function N(h,m){return Dt((19077*h>>8)+(33050*m>>8)-17685)}function U(h,m,E,C,F){C[F+0]=d(h,E),C[F+1]=b(h,m,E),C[F+2]=N(h,m)}function ie(h,m,E,C,F){C[F+0]=N(h,m),C[F+1]=b(h,m,E),C[F+2]=d(h,E)}function ve(h,m,E,C,F){var V=b(h,m,E);m=V<<3&224|N(h,m)>>3,C[F+0]=248&d(h,E)|V>>5,C[F+1]=m}function qe(h,m,E,C,F){var V=240&N(h,m)|15;C[F+0]=240&d(h,E)|b(h,m,E)>>4,C[F+1]=V}function pn(h,m,E,C,F){C[F+0]=255,U(h,m,E,C,F+1)}function lr(h,m,E,C,F){ie(h,m,E,C,F),C[F+3]=255}function Ut(h,m,E,C,F){U(h,m,E,C,F),C[F+3]=255}function gr(h,m,E){w[h]=function(C,F,V,j,z,$,J,re,me){for(var Z=re+(-2&me)*E;re!=Z;)m(C[F+0],V[j+0],z[$+0],J,re),m(C[F+1],V[j+0],z[$+0],J,re+E),F+=2,++j,++$,re+=2*E;1&me&&m(C[F+0],V[j+0],z[$+0],J,re)}}function Mr(h,m,E){return E==0?h==0?m==0?6:5:m==0?4:0:E}function Ba(h,m,E,C,F){switch(h>>>30){case 3:Fd(m,E,C,F,0);break;case 2:ua(m,E,C,F);break;case 1:Kn(m,E,C,F)}}function Tr(h,m){var E,C,F=m.M,V=m.Nb,j=h.oc,z=h.pc+40,$=h.oc,J=h.pc+584,re=h.oc,me=h.pc+600;for(E=0;16>E;++E)j[z+32*E-1]=129;for(E=0;8>E;++E)$[J+32*E-1]=129,re[me+32*E-1]=129;for(0<F?j[z-1-32]=$[J-1-32]=re[me-1-32]=129:(i(j,z-32-1,127,21),i($,J-32-1,127,9),i(re,me-32-1,127,9)),C=0;C<h.za;++C){var Z=m.ya[m.aa+C];if(0<C){for(E=-1;16>E;++E)r(j,z+32*E-4,j,z+32*E+12,4);for(E=-1;8>E;++E)r($,J+32*E-4,$,J+32*E+4,4),r(re,me+32*E-4,re,me+32*E+4,4)}var ae=h.Gd,de=h.Hd+C,Ce=Z.ad,pe=Z.Hc;if(0<F&&(r(j,z-32,ae[de].y,0,16),r($,J-32,ae[de].f,0,8),r(re,me-32,ae[de].ea,0,8)),Z.Za){var xe=j,Re=z-32+16;for(0<F&&(C>=h.za-1?i(xe,Re,ae[de].y[15],4):r(xe,Re,ae[de+1].y,0,4)),E=0;4>E;E++)xe[Re+128+E]=xe[Re+256+E]=xe[Re+384+E]=xe[Re+0+E];for(E=0;16>E;++E,pe<<=2)xe=j,Re=z+oM[E],ja[Z.Ob[E]](xe,Re),Ba(pe,Ce,16*+E,xe,Re)}else if(xe=Mr(C,F,Z.Ob[0]),Il[xe](j,z),pe!=0)for(E=0;16>E;++E,pe<<=2)Ba(pe,Ce,16*+E,j,z+oM[E]);for(E=Z.Gc,xe=Mr(C,F,Z.Dd),Eu[xe]($,J),Eu[xe](re,me),pe=Ce,xe=$,Re=J,255&(Z=0|E)&&(170&Z?xc(pe,256,xe,Re):dr(pe,256,xe,Re)),Z=re,pe=me,255&(E>>=8)&&(170&E?xc(Ce,320,Z,pe):dr(Ce,320,Z,pe)),F<h.Ub-1&&(r(ae[de].y,0,j,z+480,16),r(ae[de].f,0,$,J+224,8),r(ae[de].ea,0,re,me+224,8)),E=8*V*h.B,ae=h.sa,de=h.ta+16*C+16*V*h.R,Ce=h.qa,Z=h.ra+8*C+E,pe=h.Ha,xe=h.Ia+8*C+E,E=0;16>E;++E)r(ae,de+E*h.R,j,z+32*E,16);for(E=0;8>E;++E)r(Ce,Z+E*h.B,$,J+32*E,8),r(pe,xe+E*h.B,re,me+32*E,8)}}function ca(h,m,E,C,F,V,j,z,$){var J=[0],re=[0],me=0,Z=$!=null?$.kd:0,ae=$??new Me;if(h==null||12>E)return 7;ae.data=h,ae.w=m,ae.ha=E,m=[m],E=[E],ae.gb=[ae.gb];e:{var de=m,Ce=E,pe=ae.gb;if(e(h!=null),e(Ce!=null),e(pe!=null),pe[0]=0,12<=Ce[0]&&!t(h,de[0],"RIFF")){if(t(h,de[0]+8,"WEBP")){pe=3;break e}var xe=dt(h,de[0]+4);if(12>xe||4294967286<xe){pe=3;break e}if(Z&&xe>Ce[0]-8){pe=7;break e}pe[0]=xe,de[0]+=12,Ce[0]-=12}pe=0}if(pe!=0)return pe;for(xe=0<ae.gb[0],E=E[0];;){e:{var Re=h;Ce=m,pe=E;var $e=J,Ve=re,Tt=de=[0];if((mt=me=[me])[0]=0,8>pe[0])pe=7;else{if(!t(Re,Ce[0],"VP8X")){if(dt(Re,Ce[0]+4)!=10){pe=3;break e}if(18>pe[0]){pe=7;break e}var ut=dt(Re,Ce[0]+8),cn=1+Ye(Re,Ce[0]+12);if(2147483648<=cn*(Re=1+Ye(Re,Ce[0]+15))){pe=3;break e}Tt!=null&&(Tt[0]=ut),$e!=null&&($e[0]=cn),Ve!=null&&(Ve[0]=Re),Ce[0]+=18,pe[0]-=18,mt[0]=1}pe=0}}if(me=me[0],de=de[0],pe!=0)return pe;if(Ce=!!(2&de),!xe&&me)return 3;if(V!=null&&(V[0]=!!(16&de)),j!=null&&(j[0]=Ce),z!=null&&(z[0]=0),j=J[0],de=re[0],me&&Ce&&$==null){pe=0;break}if(4>E){pe=7;break}if(xe&&me||!xe&&!me&&!t(h,m[0],"ALPH")){E=[E],ae.na=[ae.na],ae.P=[ae.P],ae.Sa=[ae.Sa];e:{ut=h,pe=m,xe=E;var mt=ae.gb;$e=ae.na,Ve=ae.P,Tt=ae.Sa,cn=22,e(ut!=null),e(xe!=null),Re=pe[0];var An=xe[0];for(e($e!=null),e(Tt!=null),$e[0]=null,Ve[0]=null,Tt[0]=0;;){if(pe[0]=Re,xe[0]=An,8>An){pe=7;break e}var Ri=dt(ut,Re+4);if(4294967286<Ri){pe=3;break e}var un=8+Ri+1&-2;if(cn+=un,0<mt&&cn>mt){pe=3;break e}if(!t(ut,Re,"VP8 ")||!t(ut,Re,"VP8L")){pe=0;break e}if(An[0]<un){pe=7;break e}t(ut,Re,"ALPH")||($e[0]=ut,Ve[0]=Re+8,Tt[0]=Ri),Re+=un,An-=un}}if(E=E[0],ae.na=ae.na[0],ae.P=ae.P[0],ae.Sa=ae.Sa[0],pe!=0)break}E=[E],ae.Ja=[ae.Ja],ae.xa=[ae.xa];e:if(mt=h,pe=m,xe=E,$e=ae.gb[0],Ve=ae.Ja,Tt=ae.xa,ut=pe[0],Re=!t(mt,ut,"VP8 "),cn=!t(mt,ut,"VP8L"),e(mt!=null),e(xe!=null),e(Ve!=null),e(Tt!=null),8>xe[0])pe=7;else{if(Re||cn){if(mt=dt(mt,ut+4),12<=$e&&mt>$e-12){pe=3;break e}if(Z&&mt>xe[0]-8){pe=7;break e}Ve[0]=mt,pe[0]+=8,xe[0]-=8,Tt[0]=cn}else Tt[0]=5<=xe[0]&&mt[ut+0]==47&&!(mt[ut+4]>>5),Ve[0]=xe[0];pe=0}if(E=E[0],ae.Ja=ae.Ja[0],ae.xa=ae.xa[0],m=m[0],pe!=0)break;if(4294967286<ae.Ja)return 3;if(z==null||Ce||(z[0]=ae.xa?2:1),j=[j],de=[de],ae.xa){if(5>E){pe=7;break}z=j,Z=de,Ce=V,h==null||5>E?h=0:5<=E&&h[m+0]==47&&!(h[m+4]>>5)?(xe=[0],mt=[0],$e=[0],Te(Ve=new Y,h,m,E),cr(Ve,xe,mt,$e)?(z!=null&&(z[0]=xe[0]),Z!=null&&(Z[0]=mt[0]),Ce!=null&&(Ce[0]=$e[0]),h=1):h=0):h=0}else{if(10>E){pe=7;break}z=de,h==null||10>E||!To(h,m+3,E-3)?h=0:(Z=h[m+0]|h[m+1]<<8|h[m+2]<<16,Ce=16383&(h[m+7]<<8|h[m+6]),h=16383&(h[m+9]<<8|h[m+8]),1&Z||3<(Z>>1&7)||!(Z>>4&1)||Z>>5>=ae.Ja||!Ce||!h?h=0:(j&&(j[0]=Ce),z&&(z[0]=h),h=1))}if(!h||(j=j[0],de=de[0],me&&(J[0]!=j||re[0]!=de)))return 3;$!=null&&($[0]=ae,$.offset=m-$.w,e(4294967286>m-$.w),e($.offset==$.ha-E));break}return pe==0||pe==7&&me&&$==null?(V!=null&&(V[0]|=ae.na!=null&&0<ae.na.length),C!=null&&(C[0]=j),F!=null&&(F[0]=de),0):pe}function _u(h,m,E){var C=m.width,F=m.height,V=0,j=0,z=C,$=F;if(m.Da=h!=null&&0<h.Da,m.Da&&(z=h.cd,$=h.bd,V=h.v,j=h.j,11>E||(V&=-2,j&=-2),0>V||0>j||0>=z||0>=$||V+z>C||j+$>F))return 0;if(m.v=V,m.j=j,m.va=V+z,m.o=j+$,m.U=z,m.T=$,m.da=h!=null&&0<h.da,m.da){if(!At(z,$,E=[h.ib],V=[h.hb]))return 0;m.ib=E[0],m.hb=V[0]}return m.ob=h!=null&&h.ob,m.Kb=h==null||!h.Sd,m.da&&(m.ob=m.ib<3*C/4&&m.hb<3*F/4,m.Kb=0),1}function Wg(h){if(h==null)return 2;if(11>h.S){var m=h.f.RGBA;m.fb+=(h.height-1)*m.A,m.A=-m.A}else m=h.f.kb,h=h.height,m.O+=(h-1)*m.fa,m.fa=-m.fa,m.N+=(h-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(h-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(h-1)*m.lb,m.lb=-m.lb);return 0}function ml(h,m,E,C){if(C==null||0>=h||0>=m)return 2;if(E!=null){if(E.Da){var F=E.cd,V=E.bd,j=-2&E.v,z=-2&E.j;if(0>j||0>z||0>=F||0>=V||j+F>h||z+V>m)return 2;h=F,m=V}if(E.da){if(!At(h,m,F=[E.ib],V=[E.hb]))return 2;h=F[0],m=V[0]}}C.width=h,C.height=m;e:{var $=C.width,J=C.height;if(h=C.S,0>=$||0>=J||!(h>=S_&&13>h))h=2;else{if(0>=C.Rd&&C.sd==null){j=V=F=m=0;var re=(z=$*aM[h])*J;if(11>h||(V=(J+1)/2*(m=($+1)/2),h==12&&(j=(F=$)*J)),(J=s(re+2*V+j))==null){h=1;break e}C.sd=J,11>h?(($=C.f.RGBA).eb=J,$.fb=0,$.A=z,$.size=re):(($=C.f.kb).y=J,$.O=0,$.fa=z,$.Fd=re,$.f=J,$.N=0+re,$.Ab=m,$.Cd=V,$.ea=J,$.W=0+re+V,$.Db=m,$.Ed=V,h==12&&($.F=J,$.J=0+re+2*V),$.Tc=j,$.lb=F)}if(m=1,F=C.S,V=C.width,j=C.height,F>=S_&&13>F)if(11>F)h=C.f.RGBA,m&=(z=Math.abs(h.A))*(j-1)+V<=h.size,m&=z>=V*aM[F],m&=h.eb!=null;else{h=C.f.kb,z=(V+1)/2,re=(j+1)/2,$=Math.abs(h.fa),J=Math.abs(h.Ab);var me=Math.abs(h.Db),Z=Math.abs(h.lb),ae=Z*(j-1)+V;m&=$*(j-1)+V<=h.Fd,m&=J*(re-1)+z<=h.Cd,m=(m&=me*(re-1)+z<=h.Ed)&$>=V&J>=z&me>=z,m&=h.y!=null,m&=h.f!=null,m&=h.ea!=null,F==12&&(m&=Z>=V,m&=ae<=h.Tc,m&=h.F!=null)}else m=0;h=m?0:2}}return h!=0||E!=null&&E.fd&&(h=Wg(C)),h}var Od=64,Co=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Do=24,yl=32,wu=8,vl=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ke("Predictor0","PredictorAdd0"),w.Predictor0=function(){return 4278190080},w.Predictor1=function(h){return h},w.Predictor2=function(h,m,E){return m[E+0]},w.Predictor3=function(h,m,E){return m[E+1]},w.Predictor4=function(h,m,E){return m[E-1]},w.Predictor5=function(h,m,E){return Et(Et(h,m[E+1]),m[E+0])},w.Predictor6=function(h,m,E){return Et(h,m[E-1])},w.Predictor7=function(h,m,E){return Et(h,m[E+0])},w.Predictor8=function(h,m,E){return Et(m[E-1],m[E+0])},w.Predictor9=function(h,m,E){return Et(m[E+0],m[E+1])},w.Predictor10=function(h,m,E){return Et(Et(h,m[E-1]),Et(m[E+0],m[E+1]))},w.Predictor11=function(h,m,E){var C=m[E+0];return 0>=Rt(C>>24&255,h>>24&255,(m=m[E-1])>>24&255)+Rt(C>>16&255,h>>16&255,m>>16&255)+Rt(C>>8&255,h>>8&255,m>>8&255)+Rt(255&C,255&h,255&m)?C:h},w.Predictor12=function(h,m,E){var C=m[E+0];return(gn((h>>24&255)+(C>>24&255)-((m=m[E-1])>>24&255))<<24|gn((h>>16&255)+(C>>16&255)-(m>>16&255))<<16|gn((h>>8&255)+(C>>8&255)-(m>>8&255))<<8|gn((255&h)+(255&C)-(255&m)))>>>0},w.Predictor13=function(h,m,E){var C=m[E-1];return(on((h=Et(h,m[E+0]))>>24&255,C>>24&255)<<24|on(h>>16&255,C>>16&255)<<16|on(h>>8&255,C>>8&255)<<8|on(255&h,255&C))>>>0};var Kg=w.PredictorAdd0;w.PredictorAdd1=St,Ke("Predictor2","PredictorAdd2"),Ke("Predictor3","PredictorAdd3"),Ke("Predictor4","PredictorAdd4"),Ke("Predictor5","PredictorAdd5"),Ke("Predictor6","PredictorAdd6"),Ke("Predictor7","PredictorAdd7"),Ke("Predictor8","PredictorAdd8"),Ke("Predictor9","PredictorAdd9"),Ke("Predictor10","PredictorAdd10"),Ke("Predictor11","PredictorAdd11"),Ke("Predictor12","PredictorAdd12"),Ke("Predictor13","PredictorAdd13");var _f=w.PredictorAdd2;pt("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),pt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var Yr,I_=w.ColorIndexInverseTransform,Cc=w.MapARGB,Dc=w.VP8LColorIndexInverseTransformAlpha,Qg=w.MapAlpha,Yg=w.VP8LPredictorsAdd=[];Yg.length=16,(w.VP8LPredictors=[]).length=16,(w.VP8LPredictorsAdd_C=[]).length=16,(w.VP8LPredictors_C=[]).length=16;var Jg,Zg,_l,wl,bl,Ld,El,Fd,ua,xc,Kn,dr,Jr,Ni,bu,Xg,wf,T_,Ok,Lk,Fk,Vk,Bk,jk,em,Uk,qk,zk,$k=s(511),Hk=s(2041),Gk=s(225),Wk=s(767),Kk=0,JI=Hk,A_=Gk,xo=Wk,la=$k,S_=0,C_=1,Qk=2,D_=3,x_=4,ZI=5,Yk=6,XI=7,eT=8,N_=9,tT=10,b$=[2,3,7],E$=[3,3,11],Jk=[280,256,256,256,40],I$=[0,1,1,1,0],T$=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],A$=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],S$=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],C$=8,nT=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],rT=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],tm=null,D$=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],x$=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Zk=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],N$=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],R$=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],P$=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],k$=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Il=[],ja=[],Eu=[],M$=1,Xk=2,Tl=[],da=[];ge("UpsampleRgbLinePair",U,3),ge("UpsampleBgrLinePair",ie,3),ge("UpsampleRgbaLinePair",Ut,4),ge("UpsampleBgraLinePair",lr,4),ge("UpsampleArgbLinePair",pn,4),ge("UpsampleRgba4444LinePair",qe,2),ge("UpsampleRgb565LinePair",ve,2);var O$=w.UpsampleRgbLinePair,L$=w.UpsampleBgrLinePair,eM=w.UpsampleRgbaLinePair,tM=w.UpsampleBgraLinePair,nM=w.UpsampleArgbLinePair,rM=w.UpsampleRgba4444LinePair,F$=w.UpsampleRgb565LinePair,R_=16,P_=1<<R_-1,nm=-227,iT=482,iM=6,V$=(256<<iM)-1,sM=0,B$=s(256),j$=s(256),U$=s(256),q$=s(256),z$=s(iT-nm),$$=s(iT-nm);gr("YuvToRgbRow",U,3),gr("YuvToBgrRow",ie,3),gr("YuvToRgbaRow",Ut,4),gr("YuvToBgraRow",lr,4),gr("YuvToArgbRow",pn,4),gr("YuvToRgba4444Row",qe,2),gr("YuvToRgb565Row",ve,2);var oM=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],k_=[0,2,8],H$=[8,7,6,4,4,2,2,2,1,1,1,1],G$=1;this.WebPDecodeRGBA=function(h,m,E,C,F){var V=C_,j=new Ae,z=new $t;j.ba=z,z.S=V,z.width=[z.width],z.height=[z.height];var $=z.width,J=z.height,re=new nt;if(re==null||h==null)var me=2;else e(re!=null),me=ca(h,m,E,re.width,re.height,re.Pd,re.Qd,re.format,null);if(me!=0?$=0:($!=null&&($[0]=re.width[0]),J!=null&&(J[0]=re.height[0]),$=1),$){z.width=z.width[0],z.height=z.height[0],C!=null&&(C[0]=z.width),F!=null&&(F[0]=z.height);e:{if(C=new ta,(F=new Me).data=h,F.w=m,F.ha=E,F.kd=1,m=[0],e(F!=null),((h=ca(F.data,F.w,F.ha,null,null,null,m,null,F))==0||h==7)&&m[0]&&(h=4),(m=h)==0){if(e(j!=null),C.data=F.data,C.w=F.w+F.offset,C.ha=F.ha-F.offset,C.put=ft,C.ac=Ls,C.bc=ro,C.ma=j,F.xa){if((h=qi())==null){j=1;break e}if((function(Z,ae){var de=[0],Ce=[0],pe=[0];t:for(;;){if(Z==null)return 0;if(ae==null)return Z.a=2,0;if(Z.l=ae,Z.a=0,Te(Z.m,ae.data,ae.w,ae.ha),!cr(Z.m,de,Ce,pe)){Z.a=3;break t}if(Z.xb=Xk,ae.width=de[0],ae.height=Ce[0],!gs(de[0],Ce[0],1,Z,null))break t;return 1}return e(Z.a!=0),0})(h,C)){if(C=(m=ml(C.width,C.height,j.Oa,j.ba))==0){t:{C=h;n:for(;;){if(C==null){C=0;break t}if(e(C.s.yc!=null),e(C.s.Ya!=null),e(0<C.s.Wb),e((E=C.l)!=null),e((F=E.ma)!=null),C.xb!=0){if(C.ca=F.ba,C.tb=F.tb,e(C.ca!=null),!_u(F.Oa,E,D_)){C.a=2;break n}if(!Xo(C,E.width)||E.da)break n;if((E.da||It(C.ca.S))&&se(),11>C.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),C.ca.f.kb.F!=null&&se()),C.Pb&&0<C.s.ua&&C.s.vb.X==null&&!H(C.s.vb,C.s.Wa.Xa)){C.a=1;break n}C.xb=0}if(!Ci(C,C.V,C.Ba,C.c,C.i,E.o,Si))break n;F.Dc=C.Ma,C=1;break t}e(C.a!=0),C=0}C=!C}C&&(m=h.a)}else m=h.a}else{if((h=new ys)==null){j=1;break e}if(h.Fa=F.na,h.P=F.P,h.qc=F.Sa,zi(h,C)){if((m=ml(C.width,C.height,j.Oa,j.ba))==0){if(h.Aa=0,E=j.Oa,e((F=h)!=null),E!=null){if(0<($=0>($=E.Md)?0:100<$?255:255*$/100)){for(J=re=0;4>J;++J)12>(me=F.pb[J]).lc&&(me.ia=$*H$[0>me.lc?0:me.lc]>>3),re|=me.ia;re&&(alert("todo:VP8InitRandom"),F.ia=1)}F.Ga=E.Id,100<F.Ga?F.Ga=100:0>F.Ga&&(F.Ga=0)}(function(Z,ae){if(Z==null)return 0;if(ae==null)return xn(Z,2,"NULL VP8Io parameter in VP8Decode().");if(!Z.cb&&!zi(Z,ae))return 0;if(e(Z.cb),ae.ac==null||ae.ac(ae)){ae.ob&&(Z.L=0);var de=k_[Z.L];if(Z.L==2?(Z.yb=0,Z.zb=0):(Z.yb=ae.v-de>>4,Z.zb=ae.j-de>>4,0>Z.yb&&(Z.yb=0),0>Z.zb&&(Z.zb=0)),Z.Va=ae.o+15+de>>4,Z.Hb=ae.va+15+de>>4,Z.Hb>Z.za&&(Z.Hb=Z.za),Z.Va>Z.Ub&&(Z.Va=Z.Ub),0<Z.L){var Ce=Z.ed;for(de=0;4>de;++de){var pe;if(Z.Qa.Cb){var xe=Z.Qa.Lb[de];Z.Qa.Fb||(xe+=Ce.Tb)}else xe=Ce.Tb;for(pe=0;1>=pe;++pe){var Re=Z.gd[de][pe],$e=xe;if(Ce.Pc&&($e+=Ce.vd[0],pe&&($e+=Ce.od[0])),0<($e=0>$e?0:63<$e?63:$e)){var Ve=$e;0<Ce.wb&&(Ve=4<Ce.wb?Ve>>2:Ve>>1)>9-Ce.wb&&(Ve=9-Ce.wb),1>Ve&&(Ve=1),Re.dd=Ve,Re.tc=2*$e+Ve,Re.ld=40<=$e?2:15<=$e?1:0}else Re.tc=0;Re.La=pe}}}de=0}else xn(Z,6,"Frame setup failed"),de=Z.a;if(de=de==0){if(de){Z.$c=0,0<Z.Aa||(Z.Ic=G$);t:{de=Z.Ic,Ce=4*(Ve=Z.za);var Tt=32*Ve,ut=Ve+1,cn=0<Z.L?Ve*(0<Z.Aa?2:1):0,mt=(Z.Aa==2?2:1)*Ve;if((Re=Ce+832+(pe=3*(16*de+k_[Z.L])/2*Tt)+(xe=Z.Fa!=null&&0<Z.Fa.length?Z.Kc.c*Z.Kc.i:0))!=Re)de=0;else{if(Re>Z.Vb){if(Z.Vb=0,Z.Ec=s(Re),Z.Fc=0,Z.Ec==null){de=xn(Z,1,"no memory during frame initialization.");break t}Z.Vb=Re}Re=Z.Ec,$e=Z.Fc,Z.Ac=Re,Z.Bc=$e,$e+=Ce,Z.Gd=o(Tt,wc),Z.Hd=0,Z.rb=o(ut+1,io),Z.sb=1,Z.wa=cn?o(cn,Di):null,Z.Y=0,Z.D.Nb=0,Z.D.wa=Z.wa,Z.D.Y=Z.Y,0<Z.Aa&&(Z.D.Y+=Ve),e(!0),Z.oc=Re,Z.pc=$e,$e+=832,Z.ya=o(mt,Io),Z.aa=0,Z.D.ya=Z.ya,Z.D.aa=Z.aa,Z.Aa==2&&(Z.D.aa+=Ve),Z.R=16*Ve,Z.B=8*Ve,Ve=(Tt=k_[Z.L])*Z.R,Tt=Tt/2*Z.B,Z.sa=Re,Z.ta=$e+Ve,Z.qa=Z.sa,Z.ra=Z.ta+16*de*Z.R+Tt,Z.Ha=Z.qa,Z.Ia=Z.ra+8*de*Z.B+Tt,Z.$c=0,$e+=pe,Z.mb=xe?Re:null,Z.nb=xe?$e:null,e($e+xe<=Z.Fc+Z.Vb),Fn(Z),i(Z.Ac,Z.Bc,0,Ce),de=1}}if(de){if(ae.ka=0,ae.y=Z.sa,ae.O=Z.ta,ae.f=Z.qa,ae.N=Z.ra,ae.ea=Z.Ha,ae.Vd=Z.Ia,ae.fa=Z.R,ae.Rc=Z.B,ae.F=null,ae.J=0,!Kk){for(de=-255;255>=de;++de)$k[255+de]=0>de?-de:de;for(de=-1020;1020>=de;++de)Hk[1020+de]=-128>de?-128:127<de?127:de;for(de=-112;112>=de;++de)Gk[112+de]=-16>de?-16:15<de?15:de;for(de=-255;510>=de;++de)Wk[255+de]=0>de?0:255<de?255:de;Kk=1}El=$i,Fd=Ec,xc=js,Kn=jn,dr=La,ua=Oa,Jr=Sc,Ni=co,bu=L,Xg=Q,wf=So,T_=v,Ok=te,Lk=ce,Fk=is,Vk=Va,Bk=xi,jk=vu,ja[0]=pl,ja[1]=hl,ja[2]=qs,ja[3]=Ac,ja[4]=rs,ja[5]=gl,ja[6]=Ir,ja[7]=gu,ja[8]=ra,ja[9]=Tn,Il[0]=Fa,Il[1]=fl,Il[2]=Ic,Il[3]=pu,Il[4]=Hi,Il[5]=Tc,Il[6]=Us,Eu[0]=mu,Eu[1]=fu,Eu[2]=ia,Eu[3]=sa,Eu[4]=yn,Eu[5]=so,Eu[6]=yu,de=1}else de=0}de&&(de=(function(An,Ri){for(An.M=0;An.M<An.Va;++An.M){var un,yt=An.Jc[An.M&An.Xb],Ze=An.m,Zr=An;for(un=0;un<Zr.za;++un){var tn=Ze,Nn=Zr,br=Nn.Ac,ss=Nn.Bc+4*un,zs=Nn.zc,Fr=Nn.ya[Nn.aa+un];if(Nn.Qa.Bb?Fr.$b=De(tn,Nn.Pa.jb[0])?2+De(tn,Nn.Pa.jb[2]):De(tn,Nn.Pa.jb[1]):Fr.$b=0,Nn.kc&&(Fr.Ad=De(tn,Nn.Bd)),Fr.Za=!De(tn,145)+0,Fr.Za){var _s=Fr.Ob,$s=0;for(Nn=0;4>Nn;++Nn){var Pi,Vn=zs[0+Nn];for(Pi=0;4>Pi;++Pi){Vn=R$[br[ss+Pi]][Vn];for(var er=Zk[De(tn,Vn[0])];0<er;)er=Zk[2*er+De(tn,Vn[er])];Vn=-er,br[ss+Pi]=Vn}r(_s,$s,br,ss,4),$s+=4,zs[0+Nn]=Vn}}else Vn=De(tn,156)?De(tn,128)?1:3:De(tn,163)?2:0,Fr.Ob[0]=Vn,i(br,ss,Vn,4),i(zs,0,Vn,4);Fr.Dd=De(tn,142)?De(tn,114)?De(tn,183)?1:3:2:0}if(Zr.m.Ka)return xn(An,7,"Premature end-of-partition0 encountered.");for(;An.ja<An.za;++An.ja){if(Zr=yt,tn=(Ze=An).rb[Ze.sb-1],br=Ze.rb[Ze.sb+Ze.ja],un=Ze.ya[Ze.aa+Ze.ja],ss=Ze.kc?un.Ad:0)tn.la=br.la=0,un.Za||(tn.Na=br.Na=0),un.Hc=0,un.Gc=0,un.ia=0;else{var Vr,tr;if(tn=br,br=Zr,ss=Ze.Pa.Xc,zs=Ze.ya[Ze.aa+Ze.ja],Fr=Ze.pb[zs.$b],Nn=zs.ad,_s=0,$s=Ze.rb[Ze.sb-1],Vn=Pi=0,i(Nn,_s,0,384),zs.Za)var os=0,Ua=ss[3];else{er=s(16);var Xr=tn.Na+$s.Na;if(Xr=tm(br,ss[1],Xr,Fr.Eb,0,er,0),tn.Na=$s.Na=(0<Xr)+0,1<Xr)El(er,0,Nn,_s);else{var uo=er[0]+3>>3;for(er=0;256>er;er+=16)Nn[_s+er]=uo}os=1,Ua=ss[0]}var hr=15&tn.la,ki=15&$s.la;for(er=0;4>er;++er){var No=1&ki;for(uo=tr=0;4>uo;++uo)hr=hr>>1|(No=(Xr=tm(br,Ua,Xr=No+(1&hr),Fr.Sc,os,Nn,_s))>os)<<7,tr=tr<<2|(3<Xr?3:1<Xr?2:Nn[_s+0]!=0),_s+=16;hr>>=4,ki=ki>>1|No<<7,Pi=(Pi<<8|tr)>>>0}for(Ua=hr,os=ki>>4,Vr=0;4>Vr;Vr+=2){for(tr=0,hr=tn.la>>4+Vr,ki=$s.la>>4+Vr,er=0;2>er;++er){for(No=1&ki,uo=0;2>uo;++uo)Xr=No+(1&hr),hr=hr>>1|(No=0<(Xr=tm(br,ss[2],Xr,Fr.Qc,0,Nn,_s)))<<3,tr=tr<<2|(3<Xr?3:1<Xr?2:Nn[_s+0]!=0),_s+=16;hr>>=2,ki=ki>>1|No<<5}Vn|=tr<<4*Vr,Ua|=hr<<4<<Vr,os|=(240&ki)<<Vr}tn.la=Ua,$s.la=os,zs.Hc=Pi,zs.Gc=Vn,zs.ia=43690&Vn?0:Fr.ia,ss=!(Pi|Vn)}if(0<Ze.L&&(Ze.wa[Ze.Y+Ze.ja]=Ze.gd[un.$b][un.Za],Ze.wa[Ze.Y+Ze.ja].La|=!ss),Zr.Ka)return xn(An,7,"Premature end-of-file encountered.")}if(Fn(An),Ze=Ri,Zr=1,un=(yt=An).D,tn=0<yt.L&&yt.M>=yt.zb&&yt.M<=yt.Va,yt.Aa==0)t:{if(un.M=yt.M,un.uc=tn,Tr(yt,un),Zr=1,un=(tr=yt.D).Nb,tn=(Vn=k_[yt.L])*yt.R,br=Vn/2*yt.B,er=16*un*yt.R,uo=8*un*yt.B,ss=yt.sa,zs=yt.ta-tn+er,Fr=yt.qa,Nn=yt.ra-br+uo,_s=yt.Ha,$s=yt.Ia-br+uo,ki=(hr=tr.M)==0,Pi=hr>=yt.Va-1,yt.Aa==2&&Tr(yt,tr),tr.uc)for(No=(Xr=yt).D.M,e(Xr.D.uc),tr=Xr.yb;tr<Xr.Hb;++tr){os=tr,Ua=No;var Hs=(Ro=(as=Xr).D).Nb;Vr=as.R;var Ro=Ro.wa[Ro.Y+os],Po=as.sa,lo=as.ta+16*Hs*Vr+16*os,ko=Ro.dd,mr=Ro.tc;if(mr!=0)if(e(3<=mr),as.L==1)0<os&&Vk(Po,lo,Vr,mr+4),Ro.La&&jk(Po,lo,Vr,mr),0<Ua&&Fk(Po,lo,Vr,mr+4),Ro.La&&Bk(Po,lo,Vr,mr);else{var Mo=as.B,qa=as.qa,Vd=as.ra+8*Hs*Mo+8*os,Iu=as.Ha,as=as.Ia+8*Hs*Mo+8*os;Hs=Ro.ld,0<os&&(Ni(Po,lo,Vr,mr+4,ko,Hs),Xg(qa,Vd,Iu,as,Mo,mr+4,ko,Hs)),Ro.La&&(T_(Po,lo,Vr,mr,ko,Hs),Lk(qa,Vd,Iu,as,Mo,mr,ko,Hs)),0<Ua&&(Jr(Po,lo,Vr,mr+4,ko,Hs),bu(qa,Vd,Iu,as,Mo,mr+4,ko,Hs)),Ro.La&&(wf(Po,lo,Vr,mr,ko,Hs),Ok(qa,Vd,Iu,as,Mo,mr,ko,Hs))}}if(yt.ia&&alert("todo:DitherRow"),Ze.put!=null){if(tr=16*hr,hr=16*(hr+1),ki?(Ze.y=yt.sa,Ze.O=yt.ta+er,Ze.f=yt.qa,Ze.N=yt.ra+uo,Ze.ea=yt.Ha,Ze.W=yt.Ia+uo):(tr-=Vn,Ze.y=ss,Ze.O=zs,Ze.f=Fr,Ze.N=Nn,Ze.ea=_s,Ze.W=$s),Pi||(hr-=Vn),hr>Ze.o&&(hr=Ze.o),Ze.F=null,Ze.J=null,yt.Fa!=null&&0<yt.Fa.length&&tr<hr&&(Ze.J=wn(yt,Ze,tr,hr-tr),Ze.F=yt.mb,Ze.F==null&&Ze.F.length==0)){Zr=xn(yt,3,"Could not decode alpha data.");break t}tr<Ze.j&&(Vn=Ze.j-tr,tr=Ze.j,e(!(1&Vn)),Ze.O+=yt.R*Vn,Ze.N+=yt.B*(Vn>>1),Ze.W+=yt.B*(Vn>>1),Ze.F!=null&&(Ze.J+=Ze.width*Vn)),tr<hr&&(Ze.O+=Ze.v,Ze.N+=Ze.v>>1,Ze.W+=Ze.v>>1,Ze.F!=null&&(Ze.J+=Ze.v),Ze.ka=tr-Ze.j,Ze.U=Ze.va-Ze.v,Ze.T=hr-tr,Zr=Ze.put(Ze))}un+1!=yt.Ic||Pi||(r(yt.sa,yt.ta-tn,ss,zs+16*yt.R,tn),r(yt.qa,yt.ra-br,Fr,Nn+8*yt.B,br),r(yt.Ha,yt.Ia-br,_s,$s+8*yt.B,br))}if(!Zr)return xn(An,6,"Output aborted.")}return 1})(Z,ae)),ae.bc!=null&&ae.bc(ae),de&=1}return de?(Z.cb=0,de):0})(h,C)||(m=h.a)}}else m=h.a}m==0&&j.Oa!=null&&j.Oa.fd&&(m=Wg(j.ba))}j=m}V=j!=0?null:11>V?z.f.RGBA.eb:z.f.kb.y}else V=null;return V};var aM=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(w,x){for(var _="",S=0;S<4;S++)_+=String.fromCharCode(w[x++]);return _}function l(w,x){return w[x+0]|w[x+1]<<8}function p(w,x){return(w[x+0]|w[x+1]<<8|w[x+2]<<16)>>>0}function y(w,x){return(w[x+0]|w[x+1]<<8|w[x+2]<<16|w[x+3]<<24)>>>0}new c;var g=[0],D=[0],M=[],k=new c,O=n,G=(function(w,x){var _={},S=0,I=!1,ee=0,ye=0;if(_.frames=[],!(function(B,Y){for(var X=0;X<4;X++)if(B[Y+X]!="RIFF".charCodeAt(X))return!0;return!1})(w,x)){for(y(w,x+=4),x+=8;x<w.length;){var Se=u(w,x),Ie=y(w,x+=4);x+=4;var he=Ie+(1&Ie);switch(Se){case"VP8 ":case"VP8L":_.frames[S]===void 0&&(_.frames[S]={}),(Oe=_.frames[S]).src_off=I?ye:x-8,Oe.src_size=ee+Ie+8,S++,I&&(I=!1,ee=0,ye=0);break;case"VP8X":(Oe=_.header={}).feature_flags=w[x];var Te=x+4;Oe.canvas_width=1+p(w,Te),Te+=3,Oe.canvas_height=1+p(w,Te),Te+=3;break;case"ALPH":I=!0,ee=he+8,ye=x-8;break;case"ANIM":(Oe=_.header).bgcolor=y(w,x),Te=x+4,Oe.loop_count=l(w,Te),Te+=2;break;case"ANMF":var He,Oe;(Oe=_.frames[S]={}).offset_x=2*p(w,x),x+=3,Oe.offset_y=2*p(w,x),x+=3,Oe.width=1+p(w,x),x+=3,Oe.height=1+p(w,x),x+=3,Oe.duration=p(w,x),x+=3,He=w[x++],Oe.dispose=1&He,Oe.blend=He>>1&1}Se!="ANMF"&&(x+=he)}return _}})(O,0);G.response=O,G.rgbaoutput=!0,G.dataurl=!1;var W=G.header?G.header:null,K=G.frames?G.frames:null;if(W){W.loop_counter=W.loop_count,g=[W.canvas_height],D=[W.canvas_width];for(var ue=0;ue<K.length&&K[ue].blend!=0;ue++);}var fe=K[0],P=k.WebPDecodeRGBA(O,fe.src_off,fe.src_size,D,g);fe.rgba=P,fe.imgwidth=D[0],fe.imgheight=g[0];for(var T=0;T<D[0]*g[0]*4;T++)M[T]=P[T];return this.width=D,this.height=g,this.data=M,this}(function(n){var e,t,r,i,s,o,a,c,u,l=function(B){return B=B||{},this.isStrokeTransparent=B.isStrokeTransparent||!1,this.strokeOpacity=B.strokeOpacity||1,this.strokeStyle=B.strokeStyle||"#000000",this.fillStyle=B.fillStyle||"#000000",this.isFillTransparent=B.isFillTransparent||!1,this.fillOpacity=B.fillOpacity||1,this.font=B.font||"10px sans-serif",this.textBaseline=B.textBaseline||"alphabetic",this.textAlign=B.textAlign||"left",this.lineWidth=B.lineWidth||1,this.lineJoin=B.lineJoin||"miter",this.lineCap=B.lineCap||"butt",this.path=B.path||[],this.transform=B.transform!==void 0?B.transform.clone():new c,this.globalCompositeOperation=B.globalCompositeOperation||"normal",this.globalAlpha=B.globalAlpha||1,this.clip_path=B.clip_path||[],this.currentPoint=B.currentPoint||new o,this.miterLimit=B.miterLimit||10,this.lastPoint=B.lastPoint||new o,this.lineDashOffset=B.lineDashOffset||0,this.lineDash=B.lineDash||[],this.margin=B.margin||[0,0,0,0],this.prevPageLastElemOffset=B.prevPageLastElemOffset||0,this.ignoreClearRect=typeof B.ignoreClearRect!="boolean"||B.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,c=this.internal.Matrix,u=new l}]);var p=function(B){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Y=B;Object.defineProperty(this,"pdf",{get:function(){return Y}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(H){X=!!H}});var ne=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ne},set:function(H){ne=!!H}});var oe=0;Object.defineProperty(this,"posX",{get:function(){return oe},set:function(H){isNaN(H)||(oe=H)}});var le=0;Object.defineProperty(this,"posY",{get:function(){return le},set:function(H){isNaN(H)||(le=H)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(H){var Je;typeof H=="number"?Je=[H,H,H,H]:((Je=new Array(4))[0]=H[0],Je[1]=H.length>=2?H[1]:Je[0],Je[2]=H.length>=3?H[2]:Je[0],Je[3]=H.length>=4?H[3]:Je[1]),u.margin=Je}});var be=!1;Object.defineProperty(this,"autoPaging",{get:function(){return be},set:function(H){be=H}});var Ee=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ee},set:function(H){Ee=H}});var De=[];Object.defineProperty(this,"pageBreaks",{get:function(){return De},set:function(H){De=H}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(H){H instanceof l&&(u=H)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(H){u.path=H}});var Be=[];Object.defineProperty(this,"ctxStack",{get:function(){return Be},set:function(H){Be=H}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(H){var Je;Je=y(H),this.ctx.fillStyle=Je.style,this.ctx.isFillTransparent=Je.a===0,this.ctx.fillOpacity=Je.a,this.pdf.setFillColor(Je.r,Je.g,Je.b,{a:Je.a}),this.pdf.setTextColor(Je.r,Je.g,Je.b,{a:Je.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(H){var Je=y(H);this.ctx.strokeStyle=Je.style,this.ctx.isStrokeTransparent=Je.a===0,this.ctx.strokeOpacity=Je.a,Je.a===0?this.pdf.setDrawColor(255,255,255):(Je.a,this.pdf.setDrawColor(Je.r,Je.g,Je.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(H){["butt","round","square"].indexOf(H)!==-1&&(this.ctx.lineCap=H,this.pdf.setLineCap(H))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(H){isNaN(H)||(this.ctx.lineWidth=H,this.pdf.setLineWidth(H))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(H){["bevel","round","miter"].indexOf(H)!==-1&&(this.ctx.lineJoin=H,this.pdf.setLineJoin(H))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(H){isNaN(H)||(this.ctx.miterLimit=H,this.pdf.setMiterLimit(H))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(H){this.ctx.textBaseline=H}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(H){["right","end","center","left","start"].indexOf(H)!==-1&&(this.ctx.textAlign=H)}});var Xe=null,Ye=null,dt=null;Object.defineProperty(this,"fontFaces",{get:function(){return dt},set:function(H){Xe=null,Ye=null,dt=H}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(H){var Je;if(this.ctx.font=H,(Je=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(H))!==null){var qt=Je[1];Je[2];var At=Je[3],Fe=Je[4];Je[5];var tt=Je[6],Ke=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Fe)[2];Fe=Math.floor(Ke==="px"?parseFloat(Fe)*this.pdf.internal.scaleFactor:Ke==="em"?parseFloat(Fe)*this.pdf.getFontSize():parseFloat(Fe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Fe);var vt=(function(pt){var pr,an,jt=[],Kt=pt.trim();if(Kt==="")return hR;if(Kt in OU)return[OU[Kt]];for(;Kt!=="";){switch(an=null,pr=(Kt=FU(Kt)).charAt(0)){case'"':case"'":an=Bae(Kt.substring(1),pr);break;default:an=jae(Kt)}if(an===null||(jt.push(an[0]),(Kt=FU(an[1]))!==""&&Kt.charAt(0)!==","))return hR;Kt=Kt.replace(/^,/,"")}return jt})(tt);if(this.fontFaces){var Et=(function(pt,pr){var an=pt.getFontList(),jt=JSON.stringify(an);if(Xe===null||Ye!==jt){var Kt=(function(Bn){var ht=[];return Object.keys(Bn).forEach(function(Un){Bn[Un].forEach(function(It){var Vt=null;switch(It){case"bold":Vt={family:Un,weight:"bold"};break;case"italic":Vt={family:Un,style:"italic"};break;case"bolditalic":Vt={family:Un,weight:"bold",style:"italic"};break;case"":case"normal":Vt={family:Un}}Vt!==null&&(Vt.ref={name:Un,style:It},ht.push(Vt))})}),ht})(an);Xe=(function(Bn){for(var ht={},Un=0;Un<Bn.length;++Un){var It=dR(Bn[Un]),Vt=It.family,Ln=It.stretch,$t=It.style,nt=It.weight;ht[Vt]=ht[Vt]||{},ht[Vt][Ln]=ht[Vt][Ln]||{},ht[Vt][Ln][$t]=ht[Vt][Ln][$t]||{},ht[Vt][Ln][$t][nt]=It}return ht})(Kt.concat(pr)),Ye=jt}return Xe})(this.pdf,this.fontFaces),gn=vt.map(function(pt){return{family:pt,stretch:"normal",weight:At,style:qt}}),on=(function(pt,pr,an){for(var jt=(an=an||{}).defaultFontFamily||"times",Kt=Object.assign({},Vae,an.genericFontFamilies||{}),Bn=null,ht=null,Un=0;Un<pr.length;++Un)if(Kt[(Bn=dR(pr[Un])).family]&&(Bn.family=Kt[Bn.family]),pt.hasOwnProperty(Bn.family)){ht=pt[Bn.family];break}if(!(ht=ht||pt[jt]))throw new Error("Could not find a font-family for the rule '"+LU(Bn)+"' and default family '"+jt+"'.");if(ht=(function(It,Vt){if(Vt[It])return Vt[It];var Ln=vR[It],$t=Ln<=vR.normal?-1:1,nt=MU(Vt,o7,Ln,$t);if(!nt)throw new Error("Could not find a matching font-stretch value for "+It);return nt})(Bn.stretch,ht),ht=(function(It,Vt){if(Vt[It])return Vt[It];for(var Ln=s7[It],$t=0;$t<Ln.length;++$t)if(Vt[Ln[$t]])return Vt[Ln[$t]];throw new Error("Could not find a matching font-style for "+It)})(Bn.style,ht),!(ht=(function(It,Vt){if(Vt[It])return Vt[It];if(It===400&&Vt[500])return Vt[500];if(It===500&&Vt[400])return Vt[400];var Ln=Fae[It],$t=MU(Vt,a7,Ln,It<400?-1:1);if(!$t)throw new Error("Could not find a matching font-weight for value "+It);return $t})(Bn.weight,ht)))throw new Error("Failed to resolve a font for the rule '"+LU(Bn)+"'.");return ht})(Et,gn);this.pdf.setFont(on.ref.name,on.ref.style)}else{var Rt="";(At==="bold"||parseInt(At,10)>=700||qt==="bold")&&(Rt="bold"),qt==="italic"&&(Rt+="italic"),Rt.length===0&&(Rt="normal");for(var St="",Ct={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},st=0;st<vt.length;st++){if(this.pdf.internal.getFont(vt[st],Rt,{noFallback:!0,disableWarning:!0})!==void 0){St=vt[st];break}if(Rt==="bolditalic"&&this.pdf.internal.getFont(vt[st],"bold",{noFallback:!0,disableWarning:!0})!==void 0)St=vt[st],Rt="bold";else if(this.pdf.internal.getFont(vt[st],"normal",{noFallback:!0,disableWarning:!0})!==void 0){St=vt[st],Rt="normal";break}}if(St===""){for(var zt=0;zt<vt.length;zt++)if(Ct[vt[zt]]){St=Ct[vt[zt]];break}}St=St===""?"Times":St,this.pdf.setFont(St,Rt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(H){this.ctx.globalCompositeOperation=H}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(H){this.ctx.globalAlpha=H}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(H){this.ctx.lineDashOffset=H,Oe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(H){this.ctx.lineDash=H,Oe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(H){this.ctx.ignoreClearRect=!!H}})};p.prototype.setLineDash=function(B){this.lineDash=B},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){K.call(this,"fill",!1)},p.prototype.stroke=function(){K.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(B,Y){if(isNaN(B)||isNaN(Y))throw fr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new o(B,Y));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new o(B,Y)},p.prototype.closePath=function(){var B=new o(0,0),Y=0;for(Y=this.path.length-1;Y!==-1;Y--)if(this.path[Y].type==="begin"&&or(this.path[Y+1])==="object"&&typeof this.path[Y+1].x=="number"){B=new o(this.path[Y+1].x,this.path[Y+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(B.x,B.y)},p.prototype.lineTo=function(B,Y){if(isNaN(B)||isNaN(Y))throw fr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new o(B,Y));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new o(X.x,X.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),K.call(this,null,!0)},p.prototype.quadraticCurveTo=function(B,Y,X,ne){if(isNaN(X)||isNaN(ne)||isNaN(B)||isNaN(Y))throw fr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var oe=this.ctx.transform.applyToPoint(new o(X,ne)),le=this.ctx.transform.applyToPoint(new o(B,Y));this.path.push({type:"qct",x1:le.x,y1:le.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new o(oe.x,oe.y)},p.prototype.bezierCurveTo=function(B,Y,X,ne,oe,le){if(isNaN(oe)||isNaN(le)||isNaN(B)||isNaN(Y)||isNaN(X)||isNaN(ne))throw fr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var be=this.ctx.transform.applyToPoint(new o(oe,le)),Ee=this.ctx.transform.applyToPoint(new o(B,Y)),De=this.ctx.transform.applyToPoint(new o(X,ne));this.path.push({type:"bct",x1:Ee.x,y1:Ee.y,x2:De.x,y2:De.y,x:be.x,y:be.y}),this.ctx.lastPoint=new o(be.x,be.y)},p.prototype.arc=function(B,Y,X,ne,oe,le){if(isNaN(B)||isNaN(Y)||isNaN(X)||isNaN(ne)||isNaN(oe))throw fr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(le=!!le,!this.ctx.transform.isIdentity){var be=this.ctx.transform.applyToPoint(new o(B,Y));B=be.x,Y=be.y;var Ee=this.ctx.transform.applyToPoint(new o(0,X)),De=this.ctx.transform.applyToPoint(new o(0,0));X=Math.sqrt(Math.pow(Ee.x-De.x,2)+Math.pow(Ee.y-De.y,2))}Math.abs(oe-ne)>=2*Math.PI&&(ne=0,oe=2*Math.PI),this.path.push({type:"arc",x:B,y:Y,radius:X,startAngle:ne,endAngle:oe,counterclockwise:le})},p.prototype.arcTo=function(B,Y,X,ne,oe){throw new Error("arcTo not implemented.")},p.prototype.rect=function(B,Y,X,ne){if(isNaN(B)||isNaN(Y)||isNaN(X)||isNaN(ne))throw fr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(B,Y),this.lineTo(B+X,Y),this.lineTo(B+X,Y+ne),this.lineTo(B,Y+ne),this.lineTo(B,Y),this.lineTo(B+X,Y),this.lineTo(B,Y)},p.prototype.fillRect=function(B,Y,X,ne){if(isNaN(B)||isNaN(Y)||isNaN(X)||isNaN(ne))throw fr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var oe={};this.lineCap!=="butt"&&(oe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(oe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(B,Y,X,ne),this.fill(),oe.hasOwnProperty("lineCap")&&(this.lineCap=oe.lineCap),oe.hasOwnProperty("lineJoin")&&(this.lineJoin=oe.lineJoin)}},p.prototype.strokeRect=function(B,Y,X,ne){if(isNaN(B)||isNaN(Y)||isNaN(X)||isNaN(ne))throw fr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");D.call(this)||(this.beginPath(),this.rect(B,Y,X,ne),this.stroke())},p.prototype.clearRect=function(B,Y,X,ne){if(isNaN(B)||isNaN(Y)||isNaN(X)||isNaN(ne))throw fr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(B,Y,X,ne))},p.prototype.save=function(B){B=typeof B!="boolean"||B;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(Y),B){this.ctx.fontSize=this.pdf.internal.getFontSize();var ne=new l(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ne}},p.prototype.restore=function(B){B=typeof B!="boolean"||B;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(Y),B&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(B){var Y,X,ne,oe;if(B.isCanvasGradient===!0&&(B=B.getColor()),!B)return{r:0,g:0,b:0,a:0,style:B};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(B))Y=0,X=0,ne=0,oe=0;else{var le=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(B);if(le!==null)Y=parseInt(le[1]),X=parseInt(le[2]),ne=parseInt(le[3]),oe=1;else if((le=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(B))!==null)Y=parseInt(le[1]),X=parseInt(le[2]),ne=parseInt(le[3]),oe=parseFloat(le[4]);else{if(oe=1,typeof B=="string"&&B.charAt(0)!=="#"){var be=new ZU(B);B=be.ok?be.toHex():"#000000"}B.length===4?(Y=B.substring(1,2),Y+=Y,X=B.substring(2,3),X+=X,ne=B.substring(3,4),ne+=ne):(Y=B.substring(1,3),X=B.substring(3,5),ne=B.substring(5,7)),Y=parseInt(Y,16),X=parseInt(X,16),ne=parseInt(ne,16)}}return{r:Y,g:X,b:ne,a:oe,style:B}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},D=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(B,Y,X,ne){if(isNaN(Y)||isNaN(X)||typeof B!="string")throw fr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ne=isNaN(ne)?void 0:ne,!g.call(this)){var oe=he(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;S.call(this,{text:B,x:Y,y:X,scale:le,angle:oe,align:this.textAlign,maxWidth:ne})}},p.prototype.strokeText=function(B,Y,X,ne){if(isNaN(Y)||isNaN(X)||typeof B!="string")throw fr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!D.call(this)){ne=isNaN(ne)?void 0:ne;var oe=he(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;S.call(this,{text:B,x:Y,y:X,scale:le,renderingMode:"stroke",angle:oe,align:this.textAlign,maxWidth:ne})}},p.prototype.measureText=function(B){if(typeof B!="string")throw fr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Y=this.pdf,X=this.pdf.internal.scaleFactor,ne=Y.internal.getFontSize(),oe=Y.getStringUnitWidth(B)*ne/Y.internal.scaleFactor;return new function(le){var be=(le=le||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return be}}),this}({width:oe*=Math.round(96*X/72*1e4)/1e4})},p.prototype.scale=function(B,Y){if(isNaN(B)||isNaN(Y))throw fr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new c(B,0,0,Y,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},p.prototype.rotate=function(B){if(isNaN(B))throw fr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Y=new c(Math.cos(B),Math.sin(B),-Math.sin(B),Math.cos(B),0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},p.prototype.translate=function(B,Y){if(isNaN(B)||isNaN(Y))throw fr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new c(1,0,0,1,B,Y);this.ctx.transform=this.ctx.transform.multiply(X)},p.prototype.transform=function(B,Y,X,ne,oe,le){if(isNaN(B)||isNaN(Y)||isNaN(X)||isNaN(ne)||isNaN(oe)||isNaN(le))throw fr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var be=new c(B,Y,X,ne,oe,le);this.ctx.transform=this.ctx.transform.multiply(be)},p.prototype.setTransform=function(B,Y,X,ne,oe,le){B=isNaN(B)?1:B,Y=isNaN(Y)?0:Y,X=isNaN(X)?0:X,ne=isNaN(ne)?1:ne,oe=isNaN(oe)?0:oe,le=isNaN(le)?0:le,this.ctx.transform=new c(B,Y,X,ne,oe,le)};var M=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(B,Y,X,ne,oe,le,be,Ee,De){var Be=this.pdf.getImageProperties(B),Xe=1,Ye=1,dt=1,H=1;ne!==void 0&&Ee!==void 0&&(dt=Ee/ne,H=De/oe,Xe=Be.width/ne*Ee/ne,Ye=Be.height/oe*De/oe),le===void 0&&(le=Y,be=X,Y=0,X=0),ne!==void 0&&Ee===void 0&&(Ee=ne,De=oe),ne===void 0&&Ee===void 0&&(Ee=Be.width,De=Be.height);var Je=this.ctx.transform.decompose(),qt=he(Je.rotate.shx),At=new c,Fe=(At=(At=(At=At.multiply(Je.translate)).multiply(Je.skew)).multiply(Je.scale)).applyToRectangle(new a(le-Y*dt,be-X*H,ne*Xe,oe*Ye));if(this.autoPaging){for(var tt,Ke=k.call(this,Fe),vt=[],Et=0;Et<Ke.length;Et+=1)vt.indexOf(Ke[Et])===-1&&vt.push(Ke[Et]);W(vt);for(var gn=vt[0],on=vt[vt.length-1],Rt=gn;Rt<on+1;Rt++){this.pdf.setPage(Rt);var St=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ct=Rt===1?this.posY+this.margin[0]:this.margin[0],st=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],zt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pt=Rt===1?0:st+(Rt-2)*zt;if(this.ctx.clip_path.length!==0){var pr=this.path;tt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=G(tt,this.posX+this.margin[3],-pt+Ct+this.ctx.prevPageLastElemOffset),ue.call(this,"fill",!0),this.path=pr}var an=JSON.parse(JSON.stringify(Fe));an=G([an],this.posX+this.margin[3],-pt+Ct+this.ctx.prevPageLastElemOffset)[0];var jt=(Rt>gn||Rt<on)&&M.call(this);jt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],St,zt,null).clip().discardPath()),this.pdf.addImage(B,"JPEG",an.x,an.y,an.w,an.h,null,null,qt),jt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(B,"JPEG",Fe.x,Fe.y,Fe.w,Fe.h,null,null,qt)};var k=function(B,Y,X){var ne=[];Y=Y||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var oe=this.posY+this.ctx.prevPageLastElemOffset;switch(B.type){default:case"mt":case"lt":ne.push(Math.floor((B.y+oe)/X)+1);break;case"arc":ne.push(Math.floor((B.y+oe-B.radius)/X)+1),ne.push(Math.floor((B.y+oe+B.radius)/X)+1);break;case"qct":var le=Te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,B.x1,B.y1,B.x,B.y);ne.push(Math.floor((le.y+oe)/X)+1),ne.push(Math.floor((le.y+le.h+oe)/X)+1);break;case"bct":var be=He(this.ctx.lastPoint.x,this.ctx.lastPoint.y,B.x1,B.y1,B.x2,B.y2,B.x,B.y);ne.push(Math.floor((be.y+oe)/X)+1),ne.push(Math.floor((be.y+be.h+oe)/X)+1);break;case"rect":ne.push(Math.floor((B.y+oe)/X)+1),ne.push(Math.floor((B.y+B.h+oe)/X)+1)}for(var Ee=0;Ee<ne.length;Ee+=1)for(;this.pdf.internal.getNumberOfPages()<ne[Ee];)O.call(this);return ne},O=function(){var B=this.fillStyle,Y=this.strokeStyle,X=this.font,ne=this.lineCap,oe=this.lineWidth,le=this.lineJoin;this.pdf.addPage(),this.fillStyle=B,this.strokeStyle=Y,this.font=X,this.lineCap=ne,this.lineWidth=oe,this.lineJoin=le},G=function(B,Y,X){for(var ne=0;ne<B.length;ne++)switch(B[ne].type){case"bct":B[ne].x2+=Y,B[ne].y2+=X;case"qct":B[ne].x1+=Y,B[ne].y1+=X;default:B[ne].x+=Y,B[ne].y+=X}return B},W=function(B){return B.sort(function(Y,X){return Y-X})},K=function(B,Y){var X=this.fillStyle,ne=this.strokeStyle,oe=this.lineCap,le=this.lineWidth,be=Math.abs(le*this.ctx.transform.scaleX),Ee=this.lineJoin;if(this.autoPaging){for(var De,Be,Xe=JSON.parse(JSON.stringify(this.path)),Ye=JSON.parse(JSON.stringify(this.path)),dt=[],H=0;H<Ye.length;H++)if(Ye[H].x!==void 0)for(var Je=k.call(this,Ye[H]),qt=0;qt<Je.length;qt+=1)dt.indexOf(Je[qt])===-1&&dt.push(Je[qt]);for(var At=0;At<dt.length;At++)for(;this.pdf.internal.getNumberOfPages()<dt[At];)O.call(this);W(dt);for(var Fe=dt[0],tt=dt[dt.length-1],Ke=Fe;Ke<tt+1;Ke++){this.pdf.setPage(Ke),this.fillStyle=X,this.strokeStyle=ne,this.lineCap=oe,this.lineWidth=be,this.lineJoin=Ee;var vt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Et=Ke===1?this.posY+this.margin[0]:this.margin[0],gn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],on=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Rt=Ke===1?0:gn+(Ke-2)*on;if(this.ctx.clip_path.length!==0){var St=this.path;De=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=G(De,this.posX+this.margin[3],-Rt+Et+this.ctx.prevPageLastElemOffset),ue.call(this,B,!0),this.path=St}if(Be=JSON.parse(JSON.stringify(Xe)),this.path=G(Be,this.posX+this.margin[3],-Rt+Et+this.ctx.prevPageLastElemOffset),Y===!1||Ke===0){var Ct=(Ke>Fe||Ke<tt)&&M.call(this);Ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vt,on,null).clip().discardPath()),ue.call(this,B,Y),Ct&&this.pdf.restoreGraphicsState()}this.lineWidth=le}this.path=Xe}else this.lineWidth=be,ue.call(this,B,Y),this.lineWidth=le},ue=function(B,Y){if((B!=="stroke"||Y||!D.call(this))&&(B==="stroke"||Y||!g.call(this))){for(var X,ne,oe=[],le=this.path,be=0;be<le.length;be++){var Ee=le[be];switch(Ee.type){case"begin":oe.push({begin:!0});break;case"close":oe.push({close:!0});break;case"mt":oe.push({start:Ee,deltas:[],abs:[]});break;case"lt":var De=oe.length;if(le[be-1]&&!isNaN(le[be-1].x)&&(X=[Ee.x-le[be-1].x,Ee.y-le[be-1].y],De>0)){for(;De>=0;De--)if(oe[De-1].close!==!0&&oe[De-1].begin!==!0){oe[De-1].deltas.push(X),oe[De-1].abs.push(Ee);break}}break;case"bct":X=[Ee.x1-le[be-1].x,Ee.y1-le[be-1].y,Ee.x2-le[be-1].x,Ee.y2-le[be-1].y,Ee.x-le[be-1].x,Ee.y-le[be-1].y],oe[oe.length-1].deltas.push(X);break;case"qct":var Be=le[be-1].x+2/3*(Ee.x1-le[be-1].x),Xe=le[be-1].y+2/3*(Ee.y1-le[be-1].y),Ye=Ee.x+2/3*(Ee.x1-Ee.x),dt=Ee.y+2/3*(Ee.y1-Ee.y),H=Ee.x,Je=Ee.y;X=[Be-le[be-1].x,Xe-le[be-1].y,Ye-le[be-1].x,dt-le[be-1].y,H-le[be-1].x,Je-le[be-1].y],oe[oe.length-1].deltas.push(X);break;case"arc":oe.push({deltas:[],abs:[],arc:!0}),Array.isArray(oe[oe.length-1].abs)&&oe[oe.length-1].abs.push(Ee)}}ne=Y?null:B==="stroke"?"stroke":"fill";for(var qt=!1,At=0;At<oe.length;At++)if(oe[At].arc)for(var Fe=oe[At].abs,tt=0;tt<Fe.length;tt++){var Ke=Fe[tt];Ke.type==="arc"?T.call(this,Ke.x,Ke.y,Ke.radius,Ke.startAngle,Ke.endAngle,Ke.counterclockwise,void 0,Y,!qt):I.call(this,Ke.x,Ke.y),qt=!0}else if(oe[At].close===!0)this.pdf.internal.out("h"),qt=!1;else if(oe[At].begin!==!0){var vt=oe[At].start.x,Et=oe[At].start.y;ee.call(this,oe[At].deltas,vt,Et),qt=!0}ne&&w.call(this,ne),Y&&x.call(this)}},fe=function(B){var Y=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=Y*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return B-X;case"top":return B+Y-X;case"hanging":return B+Y-2*X;case"middle":return B+Y/2-X;default:return B}},P=function(B){return B+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var B=function(){};return B.colorStops=[],B.addColorStop=function(Y,X){this.colorStops.push([Y,X])},B.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},B.isCanvasGradient=!0,B},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var T=function(B,Y,X,ne,oe,le,be,Ee,De){for(var Be=Se.call(this,X,ne,oe,le),Xe=0;Xe<Be.length;Xe++){var Ye=Be[Xe];Xe===0&&(De?_.call(this,Ye.x1+B,Ye.y1+Y):I.call(this,Ye.x1+B,Ye.y1+Y)),ye.call(this,B,Y,Ye.x2,Ye.y2,Ye.x3,Ye.y3,Ye.x4,Ye.y4)}Ee?x.call(this):w.call(this,be)},w=function(B){switch(B){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},x=function(){this.pdf.clip(),this.pdf.discardPath()},_=function(B,Y){this.pdf.internal.out(t(B)+" "+r(Y)+" m")},S=function(B){var Y;switch(B.align){case"right":case"end":Y="right";break;case"center":Y="center";break;default:Y="left"}var X,ne,oe,le=this.pdf.getTextDimensions(B.text),be=fe.call(this,B.y),Ee=P.call(this,be)-le.h,De=this.ctx.transform.applyToPoint(new o(B.x,be));if(this.autoPaging){var Be=this.ctx.transform.decompose(),Xe=new c;Xe=(Xe=(Xe=Xe.multiply(Be.translate)).multiply(Be.skew)).multiply(Be.scale);for(var Ye=this.ctx.transform.applyToRectangle(new a(B.x,be,le.w,le.h)),dt=Xe.applyToRectangle(new a(B.x,Ee,le.w,le.h)),H=k.call(this,dt),Je=[],qt=0;qt<H.length;qt+=1)Je.indexOf(H[qt])===-1&&Je.push(H[qt]);W(Je);for(var At=Je[0],Fe=Je[Je.length-1],tt=At;tt<Fe+1;tt++){this.pdf.setPage(tt);var Ke=tt===1?this.posY+this.margin[0]:this.margin[0],vt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Et=this.pdf.internal.pageSize.height-this.margin[2],gn=Et-this.margin[0],on=this.pdf.internal.pageSize.width-this.margin[1],Rt=on-this.margin[3],St=tt===1?0:vt+(tt-2)*gn;if(this.ctx.clip_path.length!==0){var Ct=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=G(X,this.posX+this.margin[3],-1*St+Ke),ue.call(this,"fill",!0),this.path=Ct}var st=G([JSON.parse(JSON.stringify(dt))],this.posX+this.margin[3],-St+Ke+this.ctx.prevPageLastElemOffset)[0];B.scale>=.01&&(ne=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ne*B.scale),oe=this.lineWidth,this.lineWidth=oe*B.scale);var zt=this.autoPaging!=="text";if(zt||st.y+st.h<=Et){if(zt||st.y>=Ke&&st.x<=on){var pt=zt?B.text:this.pdf.splitTextToSize(B.text,B.maxWidth||on-st.x)[0],pr=G([JSON.parse(JSON.stringify(Ye))],this.posX+this.margin[3],-St+Ke+this.ctx.prevPageLastElemOffset)[0],an=zt&&(tt>At||tt<Fe)&&M.call(this);an&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Rt,gn,null).clip().discardPath()),this.pdf.text(pt,pr.x,pr.y,{angle:B.angle,align:Y,renderingMode:B.renderingMode}),an&&this.pdf.restoreGraphicsState()}}else st.y<Et&&(this.ctx.prevPageLastElemOffset+=Et-st.y);B.scale>=.01&&(this.pdf.setFontSize(ne),this.lineWidth=oe)}}else B.scale>=.01&&(ne=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ne*B.scale),oe=this.lineWidth,this.lineWidth=oe*B.scale),this.pdf.text(B.text,De.x+this.posX,De.y+this.posY,{angle:B.angle,align:Y,renderingMode:B.renderingMode,maxWidth:B.maxWidth}),B.scale>=.01&&(this.pdf.setFontSize(ne),this.lineWidth=oe)},I=function(B,Y,X,ne){X=X||0,ne=ne||0,this.pdf.internal.out(t(B+X)+" "+r(Y+ne)+" l")},ee=function(B,Y,X){return this.pdf.lines(B,Y,X,null,null)},ye=function(B,Y,X,ne,oe,le,be,Ee){this.pdf.internal.out([e(i(X+B)),e(s(ne+Y)),e(i(oe+B)),e(s(le+Y)),e(i(be+B)),e(s(Ee+Y)),"c"].join(" "))},Se=function(B,Y,X,ne){for(var oe=2*Math.PI,le=Math.PI/2;Y>X;)Y-=oe;var be=Math.abs(X-Y);be<oe&&ne&&(be=oe-be);for(var Ee=[],De=ne?-1:1,Be=Y;be>1e-5;){var Xe=Be+De*Math.min(be,le);Ee.push(Ie.call(this,B,Be,Xe)),be-=Math.abs(Xe-Be),Be=Xe}return Ee},Ie=function(B,Y,X){var ne=(X-Y)/2,oe=B*Math.cos(ne),le=B*Math.sin(ne),be=oe,Ee=-le,De=be*be+Ee*Ee,Be=De+be*oe+Ee*le,Xe=4/3*(Math.sqrt(2*De*Be)-Be)/(be*le-Ee*oe),Ye=be-Xe*Ee,dt=Ee+Xe*be,H=Ye,Je=-dt,qt=ne+Y,At=Math.cos(qt),Fe=Math.sin(qt);return{x1:B*Math.cos(Y),y1:B*Math.sin(Y),x2:Ye*At-dt*Fe,y2:Ye*Fe+dt*At,x3:H*At-Je*Fe,y3:H*Fe+Je*At,x4:B*Math.cos(X),y4:B*Math.sin(X)}},he=function(B){return 180*B/Math.PI},Te=function(B,Y,X,ne,oe,le){var be=B+.5*(X-B),Ee=Y+.5*(ne-Y),De=oe+.5*(X-oe),Be=le+.5*(ne-le),Xe=Math.min(B,oe,be,De),Ye=Math.max(B,oe,be,De),dt=Math.min(Y,le,Ee,Be),H=Math.max(Y,le,Ee,Be);return new a(Xe,dt,Ye-Xe,H-dt)},He=function(B,Y,X,ne,oe,le,be,Ee){var De,Be,Xe,Ye,dt,H,Je,qt,At,Fe,tt,Ke,vt,Et,gn=X-B,on=ne-Y,Rt=oe-X,St=le-ne,Ct=be-oe,st=Ee-le;for(Be=0;Be<41;Be++)At=(Je=(Xe=B+(De=Be/40)*gn)+De*((dt=X+De*Rt)-Xe))+De*(dt+De*(oe+De*Ct-dt)-Je),Fe=(qt=(Ye=Y+De*on)+De*((H=ne+De*St)-Ye))+De*(H+De*(le+De*st-H)-qt),Be==0?(tt=At,Ke=Fe,vt=At,Et=Fe):(tt=Math.min(tt,At),Ke=Math.min(Ke,Fe),vt=Math.max(vt,At),Et=Math.max(Et,Fe));return new a(Math.round(tt),Math.round(Ke),Math.round(vt-tt),Math.round(Et-Ke))},Oe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var B,Y,X=(B=this.ctx.lineDash,Y=this.ctx.lineDashOffset,JSON.stringify({lineDash:B,lineDashOffset:Y}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(bt.API),(function(n){var e=function(o){var a,c,u,l,p,y,g,D,M,k;for(/[^\x00-\xFF]/.test(o),c=[],u=0,l=(o+=a="\0\0\0\0".slice(o.length%4||4)).length;l>u;u+=4)(p=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(y=(p=((p=((p=((p=(p-(k=p%85))/85)-(M=p%85))/85)-(D=p%85))/85)-(g=p%85))/85)%85,c.push(y+33,g+33,D+33,M+33,k+33)):c.push(122);return(function(O,G){for(var W=G;W>0;W--)O.pop()})(c,a.length),String.fromCharCode.apply(String,c)+"~>"},t=function(o){var a,c,u,l,p,y=String,g="length",D=255,M="charCodeAt",k="slice",O="replace";for(o[k](-2),o=o[k](0,-2)[O](/\s/g,"")[O]("z","!!!!!"),u=[],l=0,p=(o+=a="uuuuu"[k](o[g]%5||5))[g];p>l;l+=5)c=52200625*(o[M](l)-33)+614125*(o[M](l+1)-33)+7225*(o[M](l+2)-33)+85*(o[M](l+3)-33)+(o[M](l+4)-33),u.push(D&c>>24,D&c>>16,D&c>>8,D&c);return(function(G,W){for(var K=W;K>0;K--)G.pop()})(u,a[g]),y.fromCharCode.apply(y,u)},r=function(o){return o.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(o){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),a.test(o)===!1)return"";for(var c="",u=0;u<o.length;u+=2)c+=String.fromCharCode("0x"+(o[u]+o[u+1]));return c},s=function(o){for(var a=new Uint8Array(o.length),c=o.length;c--;)a[c]=o.charCodeAt(c);return(a=Wb(a)).reduce(function(u,l){return u+String.fromCharCode(l)},"")};n.processDataByFilters=function(o,a){var c=0,u=o||"",l=[];for(typeof(a=a||[])=="string"&&(a=[a]),c=0;c<a.length;c+=1)switch(a[c]){case"ASCII85Decode":case"/ASCII85Decode":u=t(u),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=i(u),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=r(u),l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),l.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[c]+'" is not implemented')}return{data:u,reverseChain:l.reverse().join(" ")}}})(bt.API),(function(n){n.loadFile=function(e,t,r){return(function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=(function(c,u,l){var p=new XMLHttpRequest,y=0,g=function(D){var M=D.length,k=[],O=String.fromCharCode;for(y=0;y<M;y+=1)k.push(O(255&D.charCodeAt(y)));return k.join("")};if(p.open("GET",c,!u),p.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(p.onload=function(){p.status===200?l(g(this.responseText)):l(void 0)}),p.send(null),u&&p.status===200)return g(p.responseText)})(i,s,o)}catch{}return a})(e,t,r)},n.loadImageFile=n.loadFile})(bt.API),(function(n){function e(){return(Wt.html2canvas?Promise.resolve(Wt.html2canvas):import("./chunk-7G76UXZ4.js")).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(Wt.DOMPurify?Promise.resolve(Wt.DOMPurify):import("./chunk-UUYKBFRF.js")).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var c=or(a);return c==="undefined"?"undefined":c==="string"||a instanceof String?"string":c==="number"||a instanceof Number?"number":c==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(a,c){var u=document.createElement(a);for(var l in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[l]=c.style[l];return u},s=function a(c,u){for(var l=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),p=c.firstChild;p;p=p.nextSibling)u!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||l.appendChild(a(p,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(l.width=c.width,l.height=c.height,l.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(l.value=c.value),l.addEventListener("load",function(){l.scrollTop=c.scrollTop,l.scrollLeft=c.scrollLeft},!0)),l},o=function a(c){var u=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),l=a.convert(Promise.resolve(),u);return(l=l.setProgress(1,a,1,[a])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(a,c){return a.__proto__=c||o.prototype,a},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(a,c){return this.then(function(){switch(c=c||(function(u){switch(r(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(a),c){case"string":return this.then(t).then(function(u){return this.set({src:i("div",{innerHTML:a,dompurify:u})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},o.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(c){var u=this.opt.jsPDF,l=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=l,l)for(var g=0;g<l.length;++g){var D=l[g],M=D.src.find(function(k){return k.format==="truetype"});M&&u.addFont(M.url,D.ref.name,D.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,u.context2d.save(!0),c(this.prop.container,y)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(a,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(a,c):this.outputPdf(a,c)},o.prototype.outputPdf=function(a,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,c)})},o.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},o.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(a){if(r(a)!=="object")return this;var c=Object.keys(a||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=a[u]};switch(u){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[u]=a[u]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(a,c){return this.then(function(){var u=a in o.template.prop?this.prop[a]:this.opt[a];return c?c(u):u})},o.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},o.prototype.setPageSize=function(a){function c(u,l){return Math.floor(u*l/72*96)}return this.then(function(){(a=a||bt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:c(a.inner.width,a.k),height:c(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},o.prototype.setProgress=function(a,c,u,l){return a!=null&&(this.progress.val=a),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),l!=null&&(this.progress.stack=l),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(a,c,u,l){return this.setProgress(a?this.progress.val+a:null,c||null,u?this.progress.n+u:null,l?this.progress.stack.concat(l):null)},o.prototype.then=function(a,c){var u=this;return this.thenCore(a,c,function(l,p){return u.updateProgress(null,null,1,[l]),Promise.prototype.then.call(this,function(y){return u.updateProgress(null,l),y}).then(l,p).then(function(y){return u.updateProgress(1),y})})},o.prototype.thenCore=function(a,c,u){u=u||Promise.prototype.then;var l=this;a&&(a=a.bind(l)),c&&(c=c.bind(l));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?l:o.convert(Object.assign({},l),Promise.prototype),y=u.call(p,a,c);return o.convert(y,l.__proto__)},o.prototype.thenExternal=function(a,c){return Promise.prototype.then.call(this,a,c)},o.prototype.thenList=function(a){var c=this;return a.forEach(function(u){c=c.thenCore(u)}),c},o.prototype.catch=function(a){a&&(a=a.bind(this));var c=Promise.prototype.catch.call(this,a);return o.convert(c,this)},o.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},o.prototype.error=function(a){return this.then(function(){throw new Error(a)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,bt.getPageSize=function(a,c,u){if(or(a)==="object"){var l=a;a=l.orientation,c=l.unit||c,u=l.format||u}c=c||"mm",u=u||"a4",a=(""+(a||"P")).toLowerCase();var p,y=(""+u).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+c}var D,M=0,k=0;if(g.hasOwnProperty(y))M=g[y][1]/p,k=g[y][0]/p;else try{M=u[1],k=u[0]}catch{throw new Error("Invalid format: "+u)}if(a==="p"||a==="portrait")a="p",k>M&&(D=k,k=M,M=D);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",M>k&&(D=k,k=M,M=D)}return{width:k,height:M,unit:c,k:p,orientation:a}},n.html=function(a,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(dR):null;var u=new o(c);return c.worker?u:u.from(a).doCallback()}})(bt.API),bt.API.addJS=function(n){return BU=n,this.internal.events.subscribe("postPutResources",function(){yE=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(yE+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),VU=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+BU+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){yE!==void 0&&VU!==void 0&&this.internal.out("/Names <</JavaScript "+yE+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var c=a[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,l=[];for(s=0;s<u;s++){var p=t.internal.newObject();l.push(p);var y=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var g=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<l.length;s++)t.internal.write("(page_"+(s+1)+")"+l[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+g+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var c=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])})(bt.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,s,o,a){var c,u=this.decode.DCT_DECODE,l=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,c=(function(p){for(var y,g=256*p.charCodeAt(4)+p.charCodeAt(5),D=p.length,M={width:0,height:0,numcomponents:1},k=4;k<D;k+=2){if(k+=g,e.indexOf(p.charCodeAt(k+1))!==-1){y=256*p.charCodeAt(k+5)+p.charCodeAt(k+6),M={width:256*p.charCodeAt(k+7)+p.charCodeAt(k+8),height:y,numcomponents:p.charCodeAt(k+9)};break}g=256*p.charCodeAt(k+2)+p.charCodeAt(k+3)}return M})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),c.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}l={data:t,width:c.width,height:c.height,colorSpace:a,bitsPerComponent:8,filter:u,index:r,alias:i}}return l}})(bt.API),bt.API.processPNG=function(n,e,t,r){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var i,s=CU(n,{checkCrc:!0}),o=s.width,a=s.height,c=s.channels,u=s.palette,l=s.depth;i=u&&c===1?(function(T){for(var w=T.width,x=T.height,_=T.data,S=T.palette,I=T.depth,ee=!1,ye=[],Se=[],Ie=void 0,he=!1,Te=0,He=0;He<S.length;He++){var Oe=IN(S[He],4),B=Oe[0],Y=Oe[1],X=Oe[2],ne=Oe[3];ye.push(B,Y,X),ne!=null&&(ne===0?(Te++,Se.length<1&&Se.push(He)):ne<255&&(he=!0))}if(he||Te>1){ee=!0,Se=void 0;var oe=w*x;Ie=new Uint8Array(oe);for(var le=new DataView(_.buffer),be=0;be<oe;be++){var Ee=fR(le,be,I),De=IN(S[Ee],4)[3];Ie[be]=De}}else Te===0&&(Se=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ee?8:void 0,colorBytes:_,alphaBytes:Ie,needSMask:ee,palette:ye,mask:Se}})(s):c===2||c===4?(function(T){for(var w=T.data,x=T.width,_=T.height,S=T.channels,I=T.depth,ee=S===2?"DeviceGray":"DeviceRGB",ye=S-1,Se=x*_,Ie=ye,he=Se*Ie,Te=1*Se,He=Math.ceil(he*I/8),Oe=Math.ceil(Te*I/8),B=new Uint8Array(He),Y=new Uint8Array(Oe),X=new DataView(w.buffer),ne=new DataView(B.buffer),oe=new DataView(Y.buffer),le=!1,be=0;be<Se;be++){for(var Ee=be*S,De=0;De<Ie;De++)KU(ne,fR(X,Ee+De,I),be*Ie+De,I);var Be=fR(X,Ee+Ie,I);Be<(1<<I)-1&&(le=!0),KU(oe,Be,1*be,I)}return{colorSpace:ee,colorsPerPixel:ye,sMaskBitsPerComponent:le?I:void 0,colorBytes:B,alphaBytes:Y,needSMask:le}})(s):(function(T){var w=T.data,x=T.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:x,colorsPerPixel:x==="DeviceGray"?1:3,colorBytes:w instanceof Uint16Array?(function(_){for(var S=_.length,I=new Uint8Array(2*S),ee=new DataView(I.buffer,I.byteOffset,I.byteLength),ye=0;ye<S;ye++)ee.setUint16(2*ye,_[ye],!1);return I})(w):w,needSMask:!1}})(s);var p,y,g,D=i,M=D.colorSpace,k=D.colorsPerPixel,O=D.sMaskBitsPerComponent,G=D.colorBytes,W=D.alphaBytes,K=D.needSMask,ue=D.palette,fe=D.mask,P=null;return r!==bt.API.image_compression.NONE&&typeof Wb=="function"?(P=(function(T){var w;switch(T){case bt.API.image_compression.FAST:w=11;break;case bt.API.image_compression.MEDIUM:w=13;break;case bt.API.image_compression.SLOW:w=14;break;default:w=12}return w})(r),p=this.decode.FLATE_DECODE,y="/Predictor ".concat(P," /Colors ").concat(k," /BitsPerComponent ").concat(l," /Columns ").concat(o),n=zU(G,Math.ceil(o*k*l/8),k,l,r),K&&(g=zU(W,Math.ceil(o*O/8),1,O,r))):(p=void 0,y=void 0,n=G,K&&(g=W)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(g&&this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),{alias:t,data:n,index:e,filter:p,decodeParameters:y,transparency:fe,palette:ue,sMask:g,predictor:P,width:o,height:a,bitsPerComponent:l,sMaskBitsPerComponent:O,colorSpace:M}}},(function(n){n.processGIF89A=function(e,t,r,i){var s=new $ae(e),o=s.width,a=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:a},l=new pR(100).encode(u,100);return n.processJPEG.call(this,l,t,r,i)},n.processGIF87A=n.processGIF89A})(bt.API),lc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},lc.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){fr.log("bit decode error:"+t)}},lc.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var c=this.palette[s>>7-a&1];this.data[o+4*a]=c.blue,this.data[o+4*a+1]=c.green,this.data[o+4*a+2]=c.red,this.data[o+4*a+3]=255}t!==0&&(this.pos+=4-t)}},lc.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,c=15&s,u=this.palette[a];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},lc.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},lc.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,l=r*this.width*4+4*i;this.data[l]=c,this.data[l+1]=a,this.data[l+2]=o,this.data[l+3]=u}this.pos+=n}},lc.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,c=(o>>5&t)/t*255|0,u=(o>>11)/e*255|0,l=i*this.width*4+4*s;this.data[l]=u,this.data[l+1]=c,this.data[l+2]=a,this.data[l+3]=255}this.pos+=n}},lc.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},lc.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},lc.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,r,i){var s=new lc(e,!1),o=s.width,a=s.height,c={data:s.getData(),width:o,height:a},u=new pR(100).encode(c,100);return n.processJPEG.call(this,u,t,r,i)}})(bt.API),YU.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,r,i){var s=new YU(e),o=s.width,a=s.height,c={data:s.getData(),width:o,height:a},u=new pR(100).encode(c,100);return n.processJPEG.call(this,u,t,r,i)}})(bt.API),bt.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,c=0,u=0;u<i;u+=4){var l=r[u],p=r[u+1],y=r[u+2],g=r[u+3];s[a++]=l,s[a++]=p,s[a++]=y,o[c++]=g}var D=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:D,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},bt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},cg=bt.API,vE=cg.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,c=a.fof?a.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,l=u.fof?u.fof:1,p=e.doKerning!==!1,y=0,g=n.length,D=0,M=a[0]||c,k=[];for(t=0;t<g;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?k.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(y=p&&or(u[r])==="object"&&!isNaN(parseInt(u[r][D],10))?u[r][D]/l:0,k.push((a[r]||M)/c+y)),D=r;return k},jU=cg.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return cg.processArabic&&(n=cg.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:vE.apply(this,arguments).reduce(function(s,o){return s+o},0)},UU=function(n,e,t,r){for(var i=[],s=0,o=n.length,a=0;s!==o&&a+e[s]<t;)a+=e[s],s++;i.push(n.slice(0,s));var c=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(n.slice(c,s)),a=0,c=s),a+=e[s],s++;return c!==s&&i.push(n.slice(c,s)),i},qU=function(n,e,t){t||(t={});var r,i,s,o,a,c,u,l=[],p=[l],y=t.textIndent||0,g=0,D=0,M=n.split(" "),k=vE.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?M[0].length+2:t.lineIndent||0){var O=Array(c).join(" "),G=[];M.map(function(K){(K=K.split(/\s*\n/)).length>1?G=G.concat(K.map(function(ue,fe){return(fe&&ue.length?`
`:"")+ue})):G.push(K[0])}),M=G,c=jU.apply(this,[O,t])}for(s=0,o=M.length;s<o;s++){var W=0;if(r=M[s],c&&r[0]==`
`&&(r=r.substr(1),W=1),y+g+(D=(i=vE.apply(this,[r,t])).reduce(function(K,ue){return K+ue},0))>e||W){if(D>e){for(a=UU.apply(this,[r,i,e-(y+g),e]),l.push(a.shift()),l=[a.pop()];a.length;)p.push([a.shift()]);D=i.slice(r.length-(l[0]?l[0].length:0)).reduce(function(K,ue){return K+ue},0)}else l=[r];p.push(l),y=D+c,g=k}else l.push(r),y+=g+D,g=k}return u=c?function(K,ue){return(ue?O:"")+K.join(" ")}:function(K){return K.join(" ")},p.map(u)},cg.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=function(l){if(l.widths&&l.kerning)return{widths:l.widths,kerning:l.kerning};var p=this.internal.getFont(l.fontName,l.fontStyle),y="Unicode";return p.metadata[y]?{widths:p.metadata[y].widths||{0:1},kerning:p.metadata[y].kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var a,c,u=[];for(a=0,c=r.length;a<c;a++)u=u.concat(qU.apply(this,[r[a],o,s]));return u},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",r={},i={},s=0;s<16;s++)r[t[s]]=e[s],i[e[s]]=t[s];var o=function(y){return"0x"+parseInt(y,10).toString(16)},a=n.__fontmetrics__.compress=function(y){var g,D,M,k,O=["{"];for(var G in y){if(g=y[G],isNaN(parseInt(G,10))?D="'"+G+"'":(G=parseInt(G,10),D=(D=o(G).slice(2)).slice(0,-1)+i[D.slice(-1)]),typeof g=="number")g<0?(M=o(g).slice(3),k="-"):(M=o(g).slice(2),k=""),M=k+M.slice(0,-1)+i[M.slice(-1)];else{if(or(g)!=="object")throw new Error("Don't know what to do with value type "+or(g)+".");M=a(g)}O.push(D+M)}return O.push("}"),O.join("")},c=n.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,D,M,k,O={},G=1,W=O,K=[],ue="",fe="",P=y.length-1,T=1;T<P;T+=1)(k=y[T])=="'"?g?(M=g.join(""),g=void 0):g=[]:g?g.push(k):k=="{"?(K.push([W,M]),W={},M=void 0):k=="}"?((D=K.pop())[0][D[1]]=W,M=void 0,W=D[0]):k=="-"?G=-1:M===void 0?r.hasOwnProperty(k)?(ue+=r[k],M=parseInt(ue,16)*G,G=1,ue=""):ue+=k:r.hasOwnProperty(k)?(fe+=r[k],W[M]=parseInt(fe,16)*G,G=1,M=void 0,fe=""):fe+=k;return O},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},l={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},p={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(y){var g=y.font,D=p.Unicode[g.postScriptName];D&&(g.metadata.Unicode={},g.metadata.Unicode.widths=D.widths,g.metadata.Unicode.kerning=D.kerning);var M=l.Unicode[g.postScriptName];M&&(g.metadata.Unicode.encoding=M,g.encoding=M.codePages[0])}])})(bt.API),(function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=t.charCodeAt(s);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(_E(a)),o.metadata=n.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])})(bt),bt.API.addSvgAsImage=function(n,e,t,r,i,s,o,a){if(isNaN(e)||isNaN(t))throw fr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw fr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=r,c.height=i;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var l={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(Wt.canvg?Promise.resolve(Wt.canvg):import("./chunk-LZKGYWCY.js")).catch(function(y){return Promise.reject(new Error("Could not load canvg: "+y))}).then(function(y){return y.default?y.default:y}).then(function(y){return y.fromString(u,n,l)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(l)}).then(function(){p.addImage(c.toDataURL("image/jpeg",1),e,t,r,i,o,a)})},bt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},bt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),c=[],u=0,l=0,p=0;function y(D,M){var k,O=!1;for(k=0;k<D.length;k+=1)D[k]===M&&(O=!0);return O}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var g=a.length;for(p=0;p<g;p+=1)t[a[p]].value=t[a[p]].defaultValue,t[a[p]].explicitSet=!1}if(or(n)==="object"){for(i in n)if(s=n[i],y(a,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&y(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(l=0;l<s[u].length;l+=1)typeof s[u][l]!="number"&&(r=!1);r===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}t[i].value="["+c.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var D,M=[];for(D in t)t[D].explicitSet===!0&&(t[D].type==="name"?M.push("/"+D+" /"+t[D].value):M.push("/"+D+" "+t[D].value));M.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+M.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+a.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(bt.API),(function(n){var e=n.API,t=e.pdfEscape16=function(s,o){for(var a,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],l=[""],p=0,y=s.length;p<y;++p){if(a=o.metadata.characterToGlyph(s.charCodeAt(p)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(p),c.indexOf(a)==-1&&(c.push(a),c.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return l.join("");a=a.toString(16),l.push(u[4-a.length],a)}return l.join("")},r=function(s){var o,a,c,u,l,p,y;for(l=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],p=0,y=(a=Object.keys(s).sort(function(g,D){return g-D})).length;p<y;p++)o=a[p],c.length>=100&&(l+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(l+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),l+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,c=o.out,u=o.newObject,l=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,y=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),g="",D=0;D<y.length;D++)g+=String.fromCharCode(y[D]);var M=u();l({data:g,addLength1:!0,objectId:M}),c("endobj");var k=u();l({data:r(a.metadata.toUnicode),addLength1:!0,objectId:k}),c("endobj");var O=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+lg(a.fontName)),c("/FontFile2 "+M+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),c("/Flags "+a.metadata.flags),c("/StemV "+a.metadata.stemV),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c(">>"),c("endobj");var G=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+lg(a.fontName)),c("/FontDescriptor "+O+" 0 R"),c("/W "+n.API.PDFObject.convert(p)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+a.encoding+")"),c(">>"),c(">>"),c("endobj"),a.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+k+" 0 R"),c("/BaseFont /"+lg(a.fontName)),c("/Encoding /"+a.encoding),c("/DescendantFonts ["+G+" 0 R]"),c(">>"),c("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,c=o.out,u=o.newObject,l=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,y="",g=0;g<p.length;g++)y+=String.fromCharCode(p[g]);var D=u();l({data:y,addLength1:!0,objectId:D}),c("endobj");var M=u();l({data:r(a.metadata.toUnicode),addLength1:!0,objectId:M}),c("endobj");var k=u();c("<<"),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c("/StemV "+a.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+D+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),c("/FontName /"+lg(a.fontName)),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c(">>"),c("endobj"),a.objectNumber=u();for(var O=0;O<a.metadata.hmtx.widths.length;O++)a.metadata.hmtx.widths[O]=parseInt(a.metadata.hmtx.widths[O]*(1e3/a.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+M+" 0 R/BaseFont/"+lg(a.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),c("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",c=s.x,u=s.y,l=s.options||{},p=s.mutex||{},y=p.pdfEscape,g=p.activeFontKey,D=p.fonts,M=g,k="",O=0,G="",W=D[M].encoding;if(D[M].encoding!=="Identity-H")return{text:a,x:c,y:u,options:l,mutex:p};for(G=a,M=g,Array.isArray(a)&&(G=a[0]),O=0;O<G.length;O+=1)D[M].metadata.hasOwnProperty("cmap")&&(o=D[M].metadata.cmap.unicode.codeMap[G[O].charCodeAt(0)]),o||G[O].charCodeAt(0)<256&&D[M].metadata.hasOwnProperty("Unicode")?k+=G[O]:k+="";var K="";return parseInt(M.slice(1))<14||W==="WinAnsiEncoding"?K=y(k,M).split("").map(function(ue){return ue.charCodeAt(0).toString(16)}).join(""):W==="Identity-H"&&(K=t(k,D[M])),p.isHex=!0,{text:K,x:c,y:u,options:l,mutex:p}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],c={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?a.push([i(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):a.push(i(Object.assign({},c,{text:o[u]})).text);s.text=a}else s.text=i(Object.assign({},c,{text:o})).text}])})(bt),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(bt.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,s,o,a,c,u,l,p=e,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],D={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},M={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],O=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),G=!1,W=0;this.__bidiEngine__={};var K=function(_){var S=_.charCodeAt(),I=S>>8,ee=M[I];return ee!==void 0?p[256*ee+(255&S)]:I===252||I===253?"AL":O.test(I)?"L":I===8?"R":"N"},ue=function(_){for(var S,I=0;I<_.length;I++){if((S=K(_.charAt(I)))==="L")return!1;if(S==="R")return!0}return!1},fe=function(_,S,I,ee){var ye,Se,Ie,he,Te=S[ee];switch(Te){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":G=!1;break;case"N":case"AN":break;case"EN":G&&(Te="AN");break;case"AL":G=!0,Te="R";break;case"WS":case"BN":Te="N";break;case"CS":ee<1||ee+1>=S.length||(ye=I[ee-1])!=="EN"&&ye!=="AN"||(Se=S[ee+1])!=="EN"&&Se!=="AN"?Te="N":G&&(Se="AN"),Te=Se===ye?Se:"N";break;case"ES":Te=(ye=ee>0?I[ee-1]:"B")==="EN"&&ee+1<S.length&&S[ee+1]==="EN"?"EN":"N";break;case"ET":if(ee>0&&I[ee-1]==="EN"){Te="EN";break}if(G){Te="N";break}for(Ie=ee+1,he=S.length;Ie<he&&S[Ie]==="ET";)Ie++;Te=Ie<he&&S[Ie]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(he=S.length,Ie=ee+1;Ie<he&&S[Ie]==="NSM";)Ie++;if(Ie<he){var He=_[ee],Oe=He>=1425&&He<=2303||He===64286;if(ye=S[Ie],Oe&&(ye==="R"||ye==="AL")){Te="R";break}}}Te=ee<1||(ye=S[ee-1])==="B"?"N":I[ee-1];break;case"B":G=!1,i=!0,Te=W;break;case"S":s=!0,Te="N"}return Te},P=function(_,S,I){var ee=_.split("");return I&&T(ee,I,{hiLevel:W}),ee.reverse(),S&&S.reverse(),ee.join("")},T=function(_,S,I){var ee,ye,Se,Ie,he,Te=-1,He=_.length,Oe=0,B=[],Y=W?g:y,X=[];for(G=!1,i=!1,s=!1,ye=0;ye<He;ye++)X[ye]=K(_[ye]);for(Se=0;Se<He;Se++){if(he=Oe,B[Se]=fe(_,X,B,Se),ee=240&(Oe=Y[he][D[B[Se]]]),Oe&=15,S[Se]=Ie=Y[Oe][5],ee>0)if(ee===16){for(ye=Te;ye<Se;ye++)S[ye]=1;Te=-1}else Te=-1;if(Y[Oe][6])Te===-1&&(Te=Se);else if(Te>-1){for(ye=Te;ye<Se;ye++)S[ye]=Ie;Te=-1}X[Se]==="B"&&(S[Se]=0),I.hiLevel|=Ie}s&&(function(ne,oe,le){for(var be=0;be<le;be++)if(ne[be]==="S"){oe[be]=W;for(var Ee=be-1;Ee>=0&&ne[Ee]==="WS";Ee--)oe[Ee]=W}})(X,S,He)},w=function(_,S,I,ee,ye){if(!(ye.hiLevel<_)){if(_===1&&W===1&&!i)return S.reverse(),void(I&&I.reverse());for(var Se,Ie,he,Te,He=S.length,Oe=0;Oe<He;){if(ee[Oe]>=_){for(he=Oe+1;he<He&&ee[he]>=_;)he++;for(Te=Oe,Ie=he-1;Te<Ie;Te++,Ie--)Se=S[Te],S[Te]=S[Ie],S[Ie]=Se,I&&(Se=I[Te],I[Te]=I[Ie],I[Ie]=Se);Oe=he}Oe++}}},x=function(_,S,I){var ee=_.split(""),ye={hiLevel:W};return I||(I=[]),T(ee,I,ye),(function(Se,Ie,he){if(he.hiLevel!==0&&l)for(var Te,He=0;He<Se.length;He++)Ie[He]===1&&(Te=k.indexOf(Se[He]))>=0&&(Se[He]=k[Te+1])})(ee,I,ye),w(2,ee,S,I,ye),w(1,ee,S,I,ye),ee.join("")};return this.__bidiEngine__.doBidiReorder=function(_,S,I){if((function(ye,Se){if(Se)for(var Ie=0;Ie<ye.length;Ie++)Se[Ie]=Ie;a===void 0&&(a=ue(ye)),u===void 0&&(u=ue(ye))})(_,S),o||!c||u)if(o&&c&&a^u)W=a?1:0,_=P(_,S,I);else if(!o&&c&&u)W=a?1:0,_=x(_,S,I),_=P(_,S);else if(!o||a||c||u){if(o&&!c&&a^u)_=P(_,S),a?(W=0,_=x(_,S,I)):(W=1,_=x(_,S,I),_=P(_,S));else if(o&&a&&!c&&u)W=1,_=x(_,S,I),_=P(_,S);else if(!o&&!c&&a^u){var ee=l;a?(W=1,_=x(_,S,I),W=0,l=!1,_=x(_,S,I),l=ee):(W=0,_=x(_,S,I),_=P(_,S),W=1,l=!1,_=x(_,S,I),l=ee,_=P(_,S))}}else W=0,_=x(_,S,I);else W=a?1:0,_=x(_,S,I);return _},this.__bidiEngine__.setOptions=function(_){_&&(o=_.isInputVisual,c=_.isOutputVisual,a=_.isInputRtl,u=_.isOutputRtl,l=_.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([t.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([t.doBidiReorder(i[a])]);r.text=o}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])})(bt),bt.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Ed(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new sce(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new Hae(this.contents),this.head=new Wae(this),this.name=new Zae(this),this.cmap=new u7(this),this.toUnicode={},this.hhea=new Kae(this),this.maxp=new Xae(this),this.hmtx=new ece(this),this.post=new Yae(this),this.os2=new Qae(this),this.loca=new ice(this),this.glyf=new tce(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var o,a,c,u;for(u=[],o=0,a=(c=this.bbox).length;o<a;o++)e=c[o],u.push(Math.round(e*this.scaleFactor));return u}.call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return o*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n})();var hc,Ed=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,s,o,a,c;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+c},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)t=e[r],s.push(this.writeByte(t));return s},n})(),Hae=(function(){var n;function e(t){var r,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,s,o,a,c,u,l,p,y,g,D,M;for(M in g=Object.keys(t).length,c=Math.log(2),p=16*Math.floor(Math.log(g)/c),o=Math.floor(p/c),l=16*g-p,(i=new Ed).writeInt(this.scalarType),i.writeShort(g),i.writeShort(p),i.writeShort(o),i.writeShort(l),s=16*g,u=i.pos+s,a=null,D=[],t)for(y=t[M],i.writeString(M),i.writeInt(n(y)),i.writeInt(u),i.writeInt(y.length),D=D.concat(y),M==="head"&&(a=u),u+=y.length;u%4;)D.push(0),u++;return i.write(D),r=2981146554-n(i.data),i.pos=a+8,i.writeUInt32(r),i.data},n=function(t){var r,i,s,o;for(t=l7.call(t);t.length%4;)t.push(0);for(s=new Ed(t),i=0,r=0,o=t.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e})(),Gae={}.hasOwnProperty,iu=function(n,e){for(var t in e)Gae.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};hc=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var Wae=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return iu(n,hc),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new Ed).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),JU=(function(){function n(e,t){var r,i,s,o,a,c,u,l,p,y,g,D,M,k,O,G,W;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(g=e.readUInt16(),y=g/2,e.pos+=6,s=(function(){var K,ue;for(ue=[],c=K=0;0<=y?K<y:K>y;c=0<=y?++K:--K)ue.push(e.readUInt16());return ue})(),e.pos+=2,M=(function(){var K,ue;for(ue=[],c=K=0;0<=y?K<y:K>y;c=0<=y?++K:--K)ue.push(e.readUInt16());return ue})(),u=(function(){var K,ue;for(ue=[],c=K=0;0<=y?K<y:K>y;c=0<=y?++K:--K)ue.push(e.readUInt16());return ue})(),l=(function(){var K,ue;for(ue=[],c=K=0;0<=y?K<y:K>y;c=0<=y?++K:--K)ue.push(e.readUInt16());return ue})(),i=(this.length-e.pos+this.offset)/2,a=(function(){var K,ue;for(ue=[],c=K=0;0<=i?K<i:K>i;c=0<=i?++K:--K)ue.push(e.readUInt16());return ue})(),c=O=0,W=s.length;O<W;c=++O)for(k=s[c],r=G=D=M[c];D<=k?G<=k:G>=k;r=D<=k?++G:--G)l[c]===0?o=r+u[c]:(o=a[l[c]/2+(r-D)-(y-c)]||0)!==0&&(o+=u[c]),this.codeMap[r]=65535&o}e.pos=p}return n.encode=function(e,t){var r,i,s,o,a,c,u,l,p,y,g,D,M,k,O,G,W,K,ue,fe,P,T,w,x,_,S,I,ee,ye,Se,Ie,he,Te,He,Oe,B,Y,X,ne,oe,le,be,Ee,De,Be,Xe;switch(ee=new Ed,o=Object.keys(e).sort(function(Ye,dt){return Ye-dt}),t){case"macroman":for(M=0,k=(function(){var Ye=[];for(D=0;D<256;++D)Ye.push(0);return Ye})(),G={0:0},s={},ye=0,Te=o.length;ye<Te;ye++)G[Ee=e[i=o[ye]]]==null&&(G[Ee]=++M),s[i]={old:e[i],new:G[e[i]]},k[i]=G[e[i]];return ee.writeUInt16(1),ee.writeUInt16(0),ee.writeUInt32(12),ee.writeUInt16(0),ee.writeUInt16(262),ee.writeUInt16(0),ee.write(k),{charMap:s,subtable:ee.data,maxGlyphID:M+1};case"unicode":for(S=[],p=[],W=0,G={},r={},O=u=null,Se=0,He=o.length;Se<He;Se++)G[ue=e[i=o[Se]]]==null&&(G[ue]=++W),r[i]={old:ue,new:G[ue]},a=G[ue]-i,O!=null&&a===u||(O&&p.push(O),S.push(i),u=a),O=i;for(O&&p.push(O),p.push(65535),S.push(65535),x=2*(w=S.length),T=2*Math.pow(Math.log(w)/Math.LN2,2),y=Math.log(T/2)/Math.LN2,P=2*w-T,c=[],fe=[],g=[],D=Ie=0,Oe=S.length;Ie<Oe;D=++Ie){if(_=S[D],l=p[D],_===65535){c.push(0),fe.push(0);break}if(_-(I=r[_].new)>=32768)for(c.push(0),fe.push(2*(g.length+w-D)),i=he=_;_<=l?he<=l:he>=l;i=_<=l?++he:--he)g.push(r[i].new);else c.push(I-_),fe.push(0)}for(ee.writeUInt16(3),ee.writeUInt16(1),ee.writeUInt32(12),ee.writeUInt16(4),ee.writeUInt16(16+8*w+2*g.length),ee.writeUInt16(0),ee.writeUInt16(x),ee.writeUInt16(T),ee.writeUInt16(y),ee.writeUInt16(P),le=0,B=p.length;le<B;le++)i=p[le],ee.writeUInt16(i);for(ee.writeUInt16(0),be=0,Y=S.length;be<Y;be++)i=S[be],ee.writeUInt16(i);for(De=0,X=c.length;De<X;De++)a=c[De],ee.writeUInt16(a);for(Be=0,ne=fe.length;Be<ne;Be++)K=fe[Be],ee.writeUInt16(K);for(Xe=0,oe=g.length;Xe<oe;Xe++)M=g[Xe],ee.writeUInt16(M);return{charMap:r,subtable:ee.data,maxGlyphID:W+1}}},n})(),u7=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return iu(n,hc),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)t=new JU(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var r,i;return t==null&&(t="macroman"),r=JU.encode(e,t),(i=new Ed).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},n})(),Kae=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return iu(n,hc),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),Qae=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return iu(n,hc),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r})(),this.charRange=(function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),Yae=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return iu(n,hc),n.prototype.tag="post",n.prototype.parse=function(e){var t,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(r=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=function(){var o,a,c;for(c=[],s=o=0,a=this.file.maxp.numGlyphs;0<=a?o<a:o>a;s=0<=a?++o:--o)c.push(e.readUInt32());return c}.call(this)}},n})(),Jae=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Zae=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return iu(n,hc),n.prototype.tag="name",n.prototype.parse=function(e){var t,r,i,s,o,a,c,u,l,p,y;for(e.pos=this.offset,e.readShort(),t=e.readShort(),a=e.readShort(),r=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+a+e.readShort()});for(c={},s=l=0,p=r.length;l<p;s=++l)i=r[s],e.pos=i.offset,u=e.readString(i.length),o=new Jae(u,i),c[y=i.nameID]==null&&(c[y]=[]),c[i.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},n})(),Xae=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return iu(n,hc),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),ece=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return iu(n,hc),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,r,i,s,o,a,c;for(e.pos=this.offset,this.metrics=[],t=0,a=this.file.hhea.numberOfMetrics;0<=a?t<a:t>a;t=0<=a?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var u,l;for(l=[],t=u=0;0<=i?u<i:u>i;t=0<=i?++u:--u)l.push(e.readInt16());return l})(),this.widths=function(){var u,l,p,y;for(y=[],u=0,l=(p=this.metrics).length;u<l;u++)s=p[u],y.push(s.advance);return y}.call(this),r=this.widths[this.widths.length-1],c=[],t=o=0;0<=i?o<i:o>i;t=0<=i?++o:--o)c.push(this.widths.push(r));return c},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),l7=[].slice,tce=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return iu(n,hc),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,r,i,s,o,a,c,u,l,p;return e in this.cache?this.cache[e]:(s=this.file.loca,t=this.file.contents,r=s.indexOf(e),(i=s.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+r,o=(a=new Ed(t.read(i))).readShort(),u=a.readShort(),p=a.readShort(),c=a.readShort(),l=a.readShort(),this.cache[e]=o===-1?new rce(a,u,p,c,l):new nce(a,o,u,p,c,l),this.cache[e]))},n.prototype.encode=function(e,t,r){var i,s,o,a,c;for(o=[],s=[],a=0,c=t.length;a<c;a++)i=e[t[a]],s.push(o.length),i&&(o=o.concat(i.encode(r)));return s.push(o.length),{table:o,offsets:s}},n})(),nce=(function(){function n(e,t,r,i,s,o){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),rce=(function(){function n(e,t,r,i,s){var o,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new Ed(l7.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),ice=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return iu(n,hc),n.prototype.tag="loca",n.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=2)s.push(2*e.readUInt16());return s}.call(this):function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=4)s.push(e.readUInt32());return s}.call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),i=0,s=0,o=0;o<r.length;++o)if(r[o]=i,s<t.length&&t[s]==o){++s,r[o]=i;var a=this.offsets[o],c=this.offsets[o+1]-a;c>0&&(i+=c)}for(var u=new Array(4*r.length),l=0;l<r.length;++l)u[4*l+3]=255&r[l],u[4*l+2]=(65280&r[l])>>8,u[4*l+1]=(16711680&r[l])>>16,u[4*l]=(4278190080&r[l])>>24;return u},n})(),sce=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,s,o,a,c;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(r=i[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in c=this.glyphsFor(t))r=c[s],i[s]=r;return i},n.prototype.encode=function(e,t){var r,i,s,o,a,c,u,l,p,y,g,D,M,k,O;for(i in r=u7.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),g={0:0},O=r.charMap)g[(c=O[i]).old]=c.new;for(D in y=r.maxGlyphID,o)D in g||(g[D]=y++);return l=(function(G){var W,K;for(W in K={},G)K[G[W]]=W;return K})(g),p=Object.keys(l).sort(function(G,W){return G-W}),M=(function(){var G,W,K;for(K=[],G=0,W=p.length;G<W;G++)a=p[G],K.push(l[a]);return K})(),s=this.font.glyf.encode(o,M,g),u=this.font.loca.encode(s.offsets,M),k={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},n})();bt.API.PDFObject=(function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,s,o;if(Array.isArray(t))return"["+(function(){var a,c,u;for(u=[],a=0,c=t.length;a<c;a++)r=t[a],u.push(e.convert(r));return u})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)o=t[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+t},e})();function m7(n,e,t,r,i){r=r||{};var s=1.15,o=i.internal.scaleFactor,a=i.internal.getFontSize()/o,c=i.getLineHeightFactor?i.getLineHeightFactor():s,u=a*c,l=/\r\n|\r|\n/g,p="",y=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(p=typeof n=="string"?n.split(l):n,y=p.length||1),t+=a*(2-s),r.valign==="middle"?t-=y/2*u:r.valign==="bottom"&&(t-=y*u),r.halign==="center"||r.halign==="right"){var g=a;if(r.halign==="center"&&(g*=.5),p&&y>=1){for(var D=0;D<p.length;D++)i.text(p[D],e-i.getStringUnitWidth(p[D])*g,t),t+=u;return i}e-=i.getStringUnitWidth(n)*g}return r.halign==="justify"?i.text(n,e,t,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(n,e,t),i}var d7={},mg=(function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:d7=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var r,i,s;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o=this.jsPDFDocument.internal.getFont(),a=o.fontStyle,c=o.fontName;if(e.font&&(c=e.font),e.fontStyle){a=e.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(a)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),a=u[0])}if(this.jsPDFDocument.setFont(c,a),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var l=n.unifyColor(e.fillColor);l&&(r=this.jsPDFDocument).setFillColor.apply(r,l),l=n.unifyColor(e.textColor),l&&(i=this.jsPDFDocument).setTextColor.apply(i,l),l=n.unifyColor(e.lineColor),l&&(s=this.jsPDFDocument).setDrawColor.apply(s,l),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},n.prototype.rect=function(e,t,r,i,s){return this.jsPDFDocument.rect(e,t,r,i,s)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return d7||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n})(),SR=function(n,e){return SR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},SR(n,e)};function y7(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");SR(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var v7=(function(n){y7(e,n);function e(t){var r=n.call(this)||this;return r._element=t,r}return e})(Array);function oce(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function ace(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function CE(n,e,t){t.applyStyles(e,!0);var r=Array.isArray(n)?n:[n],i=r.map(function(s){return t.getTextWidth(s)}).reduce(function(s,o){return Math.max(s,o)},0);return i}function _7(n,e,t,r){var i=e.settings.tableLineWidth,s=e.settings.tableLineColor;n.applyStyles({lineWidth:i,lineColor:s});var o=w7(i,!1);o&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),r.y-t.y,o)}function w7(n,e){var t=n>0,r=e||e===0;return t&&r?"DF":t?"S":r?"F":null}function xE(n,e){var t,r,i,s;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(r=n.top)!==null&&r!==void 0?r:e,right:(i=n.right)!==null&&i!==void 0?i:e,bottom:(s=n.bottom)!==null&&s!==void 0?s:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function b7(n,e){var t=xE(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function cce(n,e,t,r,i){var s={},o=1.3333333333333333,a=wR(e,function(W){return i.getComputedStyle(W).backgroundColor});a!=null&&(s.fillColor=a);var c=wR(e,function(W){return i.getComputedStyle(W).color});c!=null&&(s.textColor=c);var u=lce(r,t);u&&(s.cellPadding=u);var l="borderTopColor",p=o*t,y=r.borderTopWidth;if(r.borderBottomWidth===y&&r.borderRightWidth===y&&r.borderLeftWidth===y){var g=(parseFloat(y)||0)/p;g&&(s.lineWidth=g)}else s.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/p,right:(parseFloat(r.borderRightWidth)||0)/p,bottom:(parseFloat(r.borderBottomWidth)||0)/p,left:(parseFloat(r.borderLeftWidth)||0)/p},s.lineWidth.top||(s.lineWidth.right?l="borderRightColor":s.lineWidth.bottom?l="borderBottomColor":s.lineWidth.left&&(l="borderLeftColor"));var D=wR(e,function(W){return i.getComputedStyle(W)[l]});D!=null&&(s.lineColor=D);var M=["left","right","center","justify"];M.indexOf(r.textAlign)!==-1&&(s.halign=r.textAlign),M=["middle","bottom","top"],M.indexOf(r.verticalAlign)!==-1&&(s.valign=r.verticalAlign);var k=parseInt(r.fontSize||"");isNaN(k)||(s.fontSize=k/o);var O=uce(r);O&&(s.fontStyle=O);var G=(r.fontFamily||"").toLowerCase();return n.indexOf(G)!==-1&&(s.font=G),s}function uce(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function wR(n,e){var t=E7(n,e);if(!t)return null;var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],s=parseInt(r[4]);return s===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function E7(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:E7(n.parentElement,e):t}function lce(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],r=96/(72/e),i=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,s=t.map(function(a){return parseInt(a||"0")/r}),o=xE(s,0);return i>o.top&&(o.top=i),i>o.bottom&&(o.bottom=i),o}function I7(n,e,t,r,i){var s,o;r===void 0&&(r=!1),i===void 0&&(i=!1);var a;typeof e=="string"?a=t.document.querySelector(e):a=e;var c=Object.keys(n.getFontList()),u=n.scaleFactor(),l=[],p=[],y=[];if(!a)return console.error("Html table could not be found with input: ",e),{head:l,body:p,foot:y};for(var g=0;g<a.rows.length;g++){var D=a.rows[g],M=(o=(s=D?.parentElement)===null||s===void 0?void 0:s.tagName)===null||o===void 0?void 0:o.toLowerCase(),k=dce(c,u,t,D,r,i);k&&(M==="thead"?l.push(k):M==="tfoot"?y.push(k):p.push(k))}return{head:l,body:p,foot:y}}function dce(n,e,t,r,i,s){for(var o=new v7(r),a=0;a<r.cells.length;a++){var c=r.cells[a],u=t.getComputedStyle(c);if(i||u.display!=="none"){var l=void 0;s&&(l=cce(n,c,e,u,t)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:l,_element:c,content:hce(c)})}}var p=t.getComputedStyle(r);if(o.length>0&&(i||p.display!=="none"))return o}function hce(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function fce(n,e,t){for(var r=0,i=[n,e,t];r<i.length;r++){var s=i[r];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function el(n,e,t,r,i){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(n),o=1;o<arguments.length;o++){var a=arguments[o];if(a!=null)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(s[c]=a[c])}return s}function T7(n,e){var t=new mg(n),r=t.getDocumentOptions(),i=t.getGlobalOptions();fce(i,r,e);var s=el({},i,r,e),o;typeof window<"u"&&(o=window);var a=pce(i,r,e),c=gce(i,r,e),u=mce(t,s),l=vce(t,s,o);return{id:e.tableId,content:l,hooks:c,styles:a,settings:u}}function pce(n,e,t){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(c){if(c==="columnStyles"){var u=n[c],l=e[c],p=t[c];r.columnStyles=el({},u,l,p)}else{var y=[n,e,t],g=y.map(function(D){return D[c]||{}});r[c]=el({},g[0],g[1],g[2])}},s=0,o=Object.keys(r);s<o.length;s++){var a=o[s];i(a)}return r}function gce(n,e,t){for(var r=[n,e,t],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,o=r;s<o.length;s++){var a=o[s];a.didParseCell&&i.didParseCell.push(a.didParseCell),a.willDrawCell&&i.willDrawCell.push(a.willDrawCell),a.didDrawCell&&i.didDrawCell.push(a.didDrawCell),a.willDrawPage&&i.willDrawPage.push(a.willDrawPage),a.didDrawPage&&i.didDrawPage.push(a.didDrawPage)}return i}function mce(n,e){var t,r,i,s,o,a,c,u,l,p,y,g,D=xE(e.margin,40/n.scaleFactor()),M=(t=yce(n,e.startY))!==null&&t!==void 0?t:D.top,k;e.showFoot===!0?k="everyPage":e.showFoot===!1?k="never":k=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var O;e.showHead===!0?O="everyPage":e.showHead===!1?O="never":O=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var G=(s=e.useCss)!==null&&s!==void 0?s:!1,W=e.theme||(G?"plain":"striped"),K=!!e.horizontalPageBreak,ue=(o=e.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(a=e.includeHiddenHtml)!==null&&a!==void 0?a:!1,useCss:G,theme:W,startY:M,margin:D,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(l=e.tableWidth)!==null&&l!==void 0?l:"auto",showHead:O,showFoot:k,tableLineWidth:(p=e.tableLineWidth)!==null&&p!==void 0?p:0,tableLineColor:(y=e.tableLineColor)!==null&&y!==void 0?y:200,horizontalPageBreak:K,horizontalPageBreakRepeat:ue,horizontalPageBreakBehaviour:(g=e.horizontalPageBreakBehaviour)!==null&&g!==void 0?g:"afterAllRows"}}function yce(n,e){var t=n.getLastAutoTable(),r=n.scaleFactor(),i=n.pageNumber(),s=!1;if(t&&t.startPageNumber){var o=t.startPageNumber+t.pageNumber-1;s=o===i}return typeof e=="number"?e:(e==null||e===!1)&&s&&t?.finalY!=null?t.finalY+20/r:null}function vce(n,e,t){var r=e.head||[],i=e.body||[],s=e.foot||[];if(e.html){var o=e.includeHiddenHtml;if(t){var a=I7(n,e.html,t,o,e.useCss)||{};r=a.head||r,i=a.body||r,s=a.foot||r}else console.error("Cannot parse html in non browser environment")}var c=e.columns||_ce(r,i,s);return{columns:c,head:r,body:i,foot:s}}function _ce(n,e,t){var r=n[0]||e[0]||t[0]||[],i=[];return Object.keys(r).filter(function(s){return s!=="_element"}).forEach(function(s){var o=1,a;Array.isArray(r)?a=r[parseInt(s)]:a=r[s],typeof a=="object"&&!Array.isArray(a)&&(o=a?.colSpan||1);for(var c=0;c<o;c++){var u=void 0;Array.isArray(r)?u=i.length:u=s+(c>0?"_".concat(c):"");var l={dataKey:u};i.push(l)}}),i}var CR=(function(){function n(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()}return n})(),wce=(function(n){y7(e,n);function e(t,r,i,s,o,a){var c=n.call(this,t,r,a)||this;return c.cell=i,c.row=s,c.column=o,c.section=s.section,c}return e})(CR),bce=(function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,r,i,s,o){for(var a=0,c=t;a<c.length;a++){var u=c[a],l=new wce(e,this,r,i,s,o),p=u(l)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],p)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var s=i[r];s(new CR(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var s=i[r];s(new CR(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(i,s){return i+s.wrappedWidth},0);return t}else{var r=this.settings.margin;return e-r.left-r.right}},n})(),A7=(function(){function n(e,t,r,i,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof v7&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=i,this.spansMultiplePages=s}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(r,i){var s;return Math.max(r,((s=t.cells[i.index])===null||s===void 0?void 0:s.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(r){var i=t.cells[r.index];return i?i.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(i,s){var o=r.cells[s.index];if(!o)return 0;var a=t.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),u=c+a;return u>i?u:i},0)},n})(),S7=(function(){function n(e,t,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var o=s!=null?""+s:"",a=/\r\n|\r|\n/g;this.text=o.split(a)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*t,s=r*i+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=xE(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n})(),Ece=(function(){function n(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,i=e.allRows();r<i.length;r++){var s=i[r],o=s.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(t=Math.max(t,o.styles.cellWidth))}return t},n})();function Ice(n,e){Tce(n,e);var t=[],r=0;e.columns.forEach(function(s){var o=s.getMaxCustomCellWidth(e);o?s.width=o:(s.width=s.wrappedWidth,t.push(s)),r+=s.width});var i=e.getWidth(n.pageSize().width)-r;i&&(i=DR(t,i,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),i&&(i=DR(t,i,function(s){return s.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/n.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),Sce(e),Cce(e,n),Ace(e)}function Tce(n,e){var t=n.scaleFactor(),r=e.settings.horizontalPageBreak,i=b7(n,e);e.allRows().forEach(function(s){for(var o=0,a=e.columns;o<a.length;o++){var c=a[o],u=s.cells[c.index];if(u){var l=e.hooks.didParseCell;e.callCellHooks(n,l,u,s,c,null);var p=u.padding("horizontal");u.contentWidth=CE(u.text,u.styles,n)+p;var y=CE(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,n);if(u.minReadableWidth=y+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||r===!0)u.contentWidth>i?(u.minWidth=i,u.wrappedWidth=i):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var g=10/t;u.minWidth=u.styles.minCellWidth||g,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(s){for(var o=0,a=e.columns;o<a.length;o++){var c=a[o],u=s.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var l=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},p=l.cellWidth||l.minCellWidth;p&&typeof p=="number"&&(c.minWidth=p,c.wrappedWidth=p)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function DR(n,e,t){for(var r=e,i=n.reduce(function(g,D){return g+D.wrappedWidth},0),s=0;s<n.length;s++){var o=n[s],a=o.wrappedWidth/i,c=r*a,u=o.width+c,l=t(o),p=u<l?l:u;e-=p-o.width,o.width=p}if(e=Math.round(e*1e10)/1e10,e){var y=n.filter(function(g){return e<0?g.width>t(g):!0});y.length&&(e=DR(y,e,t))}return e}function Ace(n){for(var e={},t=1,r=n.allRows(),i=0;i<r.length;i++)for(var s=r[i],o=0,a=n.columns;o<a.length;o++){var c=a[o],u=e[c.index];if(t>1)t--,delete s.cells[c.index];else if(u)u.cell.height+=s.height,t=u.cell.colSpan,delete s.cells[c.index],u.left--,u.left<=1&&delete e[c.index];else{var l=s.cells[c.index];if(!l)continue;if(l.height=s.height,l.rowSpan>1){var p=r.length-i,y=l.rowSpan>p?p:l.rowSpan;e[c.index]={cell:l,left:y,row:s}}}}}function Sce(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var r=e[t],i=null,s=0,o=0,a=0;a<n.columns.length;a++){var c=n.columns[a];if(o-=1,o>1&&n.columns[a+1])s+=c.width,delete r.cells[c.index];else if(i){var u=i;delete r.cells[c.index],i=null,u.width=c.width+s}else{var u=r.cells[c.index];if(!u)continue;if(o=u.colSpan,s=0,u.colSpan>1){i=u,s+=c.width;continue}u.width=c.width+s}}}function Cce(n,e){for(var t={count:0,height:0},r=0,i=n.allRows();r<i.length;r++){for(var s=i[r],o=0,a=n.columns;o<a.length;o++){var c=a[o],u=s.cells[c.index];if(u){e.applyStyles(u.styles,!0);var l=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,l+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=h7(u.text,l,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=h7(u.text,l,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var p=u.styles.overflow(u.text,l);typeof p=="string"?u.text=[p]:u.text=p}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var y=u.contentHeight/u.rowSpan;u.rowSpan>1&&t.count*t.height<y*u.rowSpan?t={height:y,count:u.rowSpan}:t&&t.count>0&&t.height>y&&(y=t.height),y>s.height&&(s.height=y)}}t.count--}}function h7(n,e,t,r,i){return n.map(function(s){return Dce(s,e,t,r,i)})}function Dce(n,e,t,r,i){var s=1e4*r.scaleFactor();if(e=Math.ceil(e*s)/s,e>=CE(n,t,r))return n;for(;e<CE(n+i,t,r)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+i}function C7(n,e){var t=new mg(n),r=xce(e,t.scaleFactor()),i=new bce(e,r);return Ice(t,i),t.applyStyles(t.userStyles),i}function xce(n,e){var t=n.content,r=Rce(t.columns);if(t.head.length===0){var i=f7(r,"head");i&&t.head.push(i)}if(t.foot.length===0){var i=f7(r,"foot");i&&t.foot.push(i)}var s=n.settings.theme,o=n.styles;return{columns:r,head:bR("head",t.head,r,o,s,e),body:bR("body",t.body,r,o,s,e),foot:bR("foot",t.foot,r,o,s,e)}}function bR(n,e,t,r,i,s){var o={},a=e.map(function(c,u){for(var l=0,p={},y=0,g=0,D=0,M=t;D<M.length;D++){var k=M[D];if(o[k.index]==null||o[k.index].left===0)if(g===0){var O=void 0;Array.isArray(c)?O=c[k.index-y-l]:O=c[k.dataKey];var G={};typeof O=="object"&&!Array.isArray(O)&&(G=O?.styles||{});var W=Pce(n,k,u,i,r,s,G),K=new S7(O,W,n);p[k.dataKey]=K,p[k.index]=K,g=K.colSpan-1,o[k.index]={left:K.rowSpan-1,times:g}}else g--,y++;else o[k.index].left--,g=o[k.index].times,l++}return new A7(c,u,n,p)});return a}function f7(n,e){var t={};return n.forEach(function(r){if(r.raw!=null){var i=Nce(e,r.raw);i!=null&&(t[r.dataKey]=i)}}),Object.keys(t).length>0?t:null}function Nce(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function Rce(n){return n.map(function(e,t){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:t:i=t,new Ece(i,e,t)})}function Pce(n,e,t,r,i,s,o){var a=ace(r),c;n==="head"?c=i.headStyles:n==="body"?c=i.bodyStyles:n==="foot"&&(c=i.footStyles);var u=el({},a.table,a[n],i.styles,c),l=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},p=n==="body"?l:{},y=n==="body"&&t%2===0?el({},a.alternateRow,i.alternateRowStyles):{},g=oce(s),D=el({},g,u,y,p);return el(D,o)}function kce(n,e,t){var r;t===void 0&&(t={});var i=b7(n,e),s=new Map,o=[],a=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(y){var g=e.columns.find(function(D){return D.dataKey===y||D.index===y});g&&!s.has(g.index)&&(s.set(g.index,!0),o.push(g.index),a.push(e.columns[g.index]),i-=g.wrappedWidth)});for(var u=!0,l=(r=t?.start)!==null&&r!==void 0?r:0;l<e.columns.length;){if(s.has(l)){l++;continue}var p=e.columns[l].wrappedWidth;if(u||i>=p)u=!1,o.push(l),a.push(e.columns[l]),i-=p;else break;l++}return{colIndexes:o,columns:a,lastIndex:l-1}}function Mce(n,e){for(var t=[],r=0;r<e.columns.length;r++){var i=kce(n,e,{start:r});i.columns.length&&(t.push(i),r=i.lastIndex)}return t}function D7(n,e){var t=e.settings,r=t.startY,i=t.margin,s={x:i.left,y:r},o=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),a=r+i.bottom+o;if(t.pageBreak==="avoid"){var c=e.body,u=c.reduce(function(y,g){return y+g.height},0);a+=u}var l=new mg(n);(t.pageBreak==="always"||t.startY!=null&&a>l.pageSize().height)&&(N7(l),s.y=i.top),e.callWillDrawPageHooks(l,s);var p=el({},s);e.startPageNumber=l.pageNumber(),t.horizontalPageBreak?Oce(l,e,p,s):(l.applyStyles(l.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(y){return tl(l,e,y,s,e.columns)}),l.applyStyles(l.userStyles),e.body.forEach(function(y,g){var D=g===e.body.length-1;DE(l,e,y,D,p,s,e.columns)}),l.applyStyles(l.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(y){return tl(l,e,y,s,e.columns)})),_7(l,e,p,s),e.callEndPageHooks(l,s),e.finalY=s.y,n.lastAutoTable=e,l.applyStyles(l.userStyles)}function Oce(n,e,t,r){var i=Mce(n,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(u,l){n.applyStyles(n.userStyles),l>0?Uv(n,e,t,r,u.columns,!0):p7(n,e,r,u.columns),Lce(n,e,t,r,u.columns),ER(n,e,r,u.columns)});else for(var o=-1,a=i[0],c=function(){var u=o;if(a){n.applyStyles(n.userStyles);var l=a.columns;o>=0?Uv(n,e,t,r,l,!0):p7(n,e,r,l),u=g7(n,e,o+1,r,l),ER(n,e,r,l)}var p=u-o;i.slice(1).forEach(function(y){n.applyStyles(n.userStyles),Uv(n,e,t,r,y.columns,!0),g7(n,e,o+1,r,y.columns,p),ER(n,e,r,y.columns)}),o=u};o<e.body.length-1;)c()}function p7(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(s){return tl(n,e,s,t,r)})}function Lce(n,e,t,r,i){n.applyStyles(n.userStyles),e.body.forEach(function(s,o){var a=o===e.body.length-1;DE(n,e,s,a,t,r,i)})}function g7(n,e,t,r,i,s){n.applyStyles(n.userStyles),s=s??e.body.length;var o=Math.min(t+s,e.body.length),a=-1;return e.body.slice(t,o).forEach(function(c,u){var l=t+u===e.body.length-1,p=x7(n,e,l,r);c.canEntireRowFit(p,i)&&(tl(n,e,c,r,i),a=t+u)}),a}function ER(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(s){return tl(n,e,s,t,r)})}function Fce(n,e,t){var r=t.getLineHeight(n.styles.fontSize),i=n.padding("vertical"),s=Math.floor((e-i)/r);return Math.max(0,s)}function Vce(n,e,t,r){var i={};n.spansMultiplePages=!0,n.height=0;for(var s=0,o=0,a=t.columns;o<a.length;o++){var c=a[o],u=n.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var l=new S7(u.raw,u.styles,u.section);l=el(l,u),l.text=[];var p=Fce(u,e,r);u.text.length>p&&(l.text=u.text.splice(p,u.text.length));var y=r.scaleFactor(),g=r.getLineHeightFactor();u.contentHeight=u.getContentHeight(y,g),u.contentHeight>=e&&(u.contentHeight=e,l.styles.minCellHeight-=e),u.contentHeight>n.height&&(n.height=u.contentHeight),l.contentHeight=l.getContentHeight(y,g),l.contentHeight>s&&(s=l.contentHeight),i[c.index]=l}}var D=new A7(n.raw,-1,n.section,i,!0);D.height=s;for(var M=0,k=t.columns;M<k.length;M++){var c=k[M],l=D.cells[c.index];l&&(l.height=D.height);var u=n.cells[c.index];u&&(u.height=n.height)}return D}function Bce(n,e,t,r){var i=n.pageSize().height,s=r.settings.margin,o=s.top+s.bottom,a=i-o;e.section==="body"&&(a-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var c=e.getMinimumRowHeight(r.columns,n),u=c<t;if(c>a)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var l=e.hasRowSpan(r.columns),p=e.getMaxCellHeight(r.columns)>a;return p?(l&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(l||r.settings.rowPageBreak==="avoid")}function DE(n,e,t,r,i,s,o){var a=x7(n,e,r,s);if(t.canEntireRowFit(a,o))tl(n,e,t,s,o);else if(Bce(n,t,a,e)){var c=Vce(t,a,e,n);tl(n,e,t,s,o),Uv(n,e,i,s,o),DE(n,e,c,r,i,s,o)}else Uv(n,e,i,s,o),DE(n,e,t,r,i,s,o)}function tl(n,e,t,r,i){r.x=e.settings.margin.left;for(var s=0,o=i;s<o.length;s++){var a=o[s],c=t.cells[a.index];if(!c){r.x+=a.width;continue}n.applyStyles(c.styles),c.x=r.x,c.y=r.y;var u=e.callCellHooks(n,e.hooks.willDrawCell,c,t,a,r);if(u===!1){r.x+=a.width;continue}jce(n,c,r);var l=c.getTextPos();m7(c.text,l.x,l.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,c,t,a,r),r.x+=a.width}r.y+=t.height}function jce(n,e,t){var r=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=w7(r.lineWidth,r.fillColor);i&&n.rect(e.x,t.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),Uce(n,e,t,r.lineWidth))}function Uce(n,e,t,r){var i,s,o,a;r.top&&(i=t.x,s=t.y,o=t.x+e.width,a=t.y,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),c(r.top,i,s,o,a)),r.bottom&&(i=t.x,s=t.y+e.height,o=t.x+e.width,a=t.y+e.height,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),c(r.bottom,i,s,o,a)),r.left&&(i=t.x,s=t.y,o=t.x,a=t.y+e.height,r.top&&(s-=.5*r.top),r.bottom&&(a+=.5*r.bottom),c(r.left,i,s,o,a)),r.right&&(i=t.x+e.width,s=t.y,o=t.x+e.width,a=t.y+e.height,r.top&&(s-=.5*r.top),r.bottom&&(a+=.5*r.bottom),c(r.right,i,s,o,a));function c(u,l,p,y,g){n.getDocument().setLineWidth(u),n.getDocument().line(l,p,y,g,"S")}}function x7(n,e,t,r){var i=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&t)&&(i+=e.getFootHeight(e.columns)),n.pageSize().height-r.y-i}function Uv(n,e,t,r,i,s){i===void 0&&(i=[]),s===void 0&&(s=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(a){return tl(n,e,a,r,i)}),e.callEndPageHooks(n,r);var o=e.settings.margin;_7(n,e,t,r),N7(n),e.pageNumber++,r.x=o.left,r.y=o.top,t.y=o.top,e.callWillDrawPageHooks(n,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(a){return tl(n,e,a,r,i)}),n.applyStyles(n.userStyles))}function N7(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function qce(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],i=T7(this,r),s=C7(this,i);return D7(this,s),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,r,i){m7(e,t,r,i,this)},n.API.autoTableSetDefaults=function(e){return mg.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){mg.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var r;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new mg(this),s=I7(i,e,window,t,!1),o=s.head,a=s.body,c=((r=o[0])===null||r===void 0?void 0:r.map(function(u){return u.content}))||[];return{columns:c,rows:a,data:a}}}var IR;function R7(n,e){var t=T7(n,e),r=C7(n,t);D7(n,r)}try{typeof window<"u"&&window&&(TR=window,AR=TR.jsPDF||((IR=TR.jspdf)===null||IR===void 0?void 0:IR.jsPDF),AR&&qce(AR))}catch(n){console.error("Could not apply autoTable plugin",n)}var TR,AR;function zce(n,e){if(n&1&&(we(0,"div",16)(1,"p",26),Pe(2,"Preview:"),_e(),Za(3,"img",27),_e()),n&2){let t=Cn();We(3),Sn("src",t.previewImage,Wl)}}function $ce(n,e){if(n&1&&Za(0,"img",33),n&2){let t=Cn().$implicit;Sn("alt",c2(t.name))("src",t.imageUrl,Wl)}}function Hce(n,e){if(n&1){let t=Ta();we(0,"tr")(1,"td"),pi(2,$ce,1,3,"img",28),_e(),we(3,"td"),Pe(4),_e(),we(5,"td"),Pe(6),_e(),we(7,"td"),Pe(8),_e(),we(9,"td"),Pe(10),_e(),we(11,"td",29)(12,"button",30),rn("click",function(){let i=rr(t).$implicit,s=Cn();return ir(s.decreaseStock(i,1))}),Pe(13,"-1"),_e(),we(14,"button",31),rn("click",function(){let i=rr(t).$implicit,s=Cn();return ir(s.editItem(i))}),Pe(15,"Edit"),_e(),we(16,"button",32),rn("click",function(){let i=rr(t).$implicit,s=Cn();return ir(s.deleteItem(i))}),Pe(17,"Delete"),_e()()()}if(n&2){let t=e.$implicit;We(2),Sn("ngIf",t.imageUrl),We(2),Sr(t.name),We(2),Ur("\u20B9",t.price),We(2),Sr(t.quantityAvailable),We(2),Sr(t.category)}}function Gce(n,e){if(n&1){let t=Ta();we(0,"div",34)(1,"div",35)(2,"h4"),Pe(3,"Edit Item"),_e(),we(4,"div",3)(5,"div",36)(6,"label"),Pe(7,"Name"),_e(),we(8,"input",37),Dr("ngModelChange",function(i){rr(t);let s=Cn();return Lr(s.selectedItem.name,i)||(s.selectedItem.name=i),ir(i)}),_e()(),we(9,"div",38)(10,"label"),Pe(11,"Price"),_e(),we(12,"input",39),Dr("ngModelChange",function(i){rr(t);let s=Cn();return Lr(s.selectedItem.price,i)||(s.selectedItem.price=i),ir(i)}),_e()(),we(13,"div",38)(14,"label"),Pe(15,"Quantity"),_e(),we(16,"input",39),Dr("ngModelChange",function(i){rr(t);let s=Cn();return Lr(s.selectedItem.quantityAvailable,i)||(s.selectedItem.quantityAvailable=i),ir(i)}),_e()(),we(17,"div",16)(18,"input",17),rn("change",function(i){rr(t);let s=Cn();return ir(s.onFileSelected(i))}),_e()(),we(19,"div",16)(20,"p",26),Pe(21,"Preview:"),_e(),Za(22,"img",27),_e(),we(23,"div",40)(24,"label"),Pe(25,"Category"),_e(),we(26,"select",41),Dr("ngModelChange",function(i){rr(t);let s=Cn();return Lr(s.selectedItem.category,i)||(s.selectedItem.category=i),ir(i)}),we(27,"option",12),Pe(28,"Veg"),_e(),we(29,"option",13),Pe(30,"Non-Veg"),_e()()(),we(31,"div",40)(32,"label"),Pe(33,"Availability"),_e(),we(34,"select",41),Dr("ngModelChange",function(i){rr(t);let s=Cn();return Lr(s.selectedItem.isAvailable,i)||(s.selectedItem.isAvailable=i),ir(i)}),we(35,"option",42),Pe(36,"Available"),_e(),we(37,"option",42),Pe(38,"Not Available"),_e()()()(),we(39,"div",43)(40,"button",44),rn("click",function(){rr(t);let i=Cn();return ir(i.updateItem())}),Pe(41,"Update"),_e(),we(42,"button",45),rn("click",function(){rr(t);let i=Cn();return ir(i.cancelEdit())}),Pe(43,"Cancel"),_e()()()()}if(n&2){let t=Cn();We(8),Cr("ngModel",t.selectedItem.name),We(4),Cr("ngModel",t.selectedItem.price),We(4),Cr("ngModel",t.selectedItem.quantityAvailable),We(6),Sn("src",t.selectedItem.imageUrl,Wl),We(4),Cr("ngModel",t.selectedItem.category),We(8),Cr("ngModel",t.selectedItem.isAvailable),We(),Sn("value",!0),We(2),Sn("value",!1)}}function Wce(n,e){if(n&1&&(we(0,"tr")(1,"td"),Pe(2),_e(),we(3,"td"),Pe(4),_e(),we(5,"td"),Pe(6),_e(),we(7,"td"),Pe(8),_e(),we(9,"td"),Pe(10),Km(11,"date"),_e()()),n&2){let t=e.$implicit;We(2),Sr(t.orderId),We(2),Sr(t.customerName),We(2),Sr(t.mobileNumber),We(2),Ur("\u20B9",t.totalAmount),We(2),Sr(Qm(11,5,t.createdAt==null?null:t.createdAt.toDate(),"shortTime"))}}var NE=class n{constructor(e){this.firebaseService=e;this.loadItems()}menuItems=us([]);selectedItem=null;lastMonthData;lastMonthDaily=[];todayOrders=[];totalRevenue=0;unsubToday;newItem={name:"",description:"",price:0,category:"",quantityAvailable:0,imageUrl:""};selectedFile=null;previewImage=null;loading=us(!1);ngOnInit(){this.unsubToday=this.firebaseService.subscribeTodayOrders(e=>{this.todayOrders=e.reverse(),this.totalRevenue=e.reduce((t,r)=>t+(Number(r.totalAmount)||0),0)})}ngOnDestroy(){this.unsubToday&&this.unsubToday()}async loadLastMonthSales(){let e=await this.firebaseService.getLastMonthStats();console.log("Last month stats:",e),this.lastMonthData=e,this.lastMonthDaily=Object.keys(e.daily).map(t=>({date:t,revenue:e.daily[t]}))}async loadItems(){try{let e=await this.firebaseService.getMenuItems();this.menuItems.set(e);let t=await this.firebaseService.getLastMonthStats();this.lastMonthData=t,this.lastMonthDaily=Object.keys(t.daily).map(r=>({date:r,revenue:t.daily[r]}))}catch(e){console.error("Load items error",e)}}emailReport(){}downloadPDF(){let e=new bt;e.text("Chanmura Restaurant - Last Month Report",10,10),R7(e,{head:[["Date","Revenue"]],body:this.lastMonthDaily.map(t=>[t.date,t.revenue.toString()])}),e.save("Monthly_Sales_Report.pdf")}onFileSelected(e){if(!e?.target?.files?.length)return;this.selectedFile=e.target.files[0];let t=new FileReader;t.onload=()=>{this.previewImage=t.result,this.newItem.imageUrl=this.previewImage},t.readAsDataURL(this.selectedFile)}async addMenuItem(){if(!this.newItem.name||!this.newItem.price||this.newItem.quantityAvailable==null){alert("Please fill name, price and quantity");return}this.loading.set(!0);try{let e=this.newItem.imageUrl||"";console.log("Image URL:",e);let t={name:this.newItem.name,description:this.newItem.description||"",price:Number(this.newItem.price),category:this.newItem.category||"",imageUrl:e,quantityAvailable:Number(this.newItem.quantityAvailable),isAvailable:!0,quantity:0};await this.firebaseService.addMenuItem(t),this.newItem={name:"",description:"",price:0,category:"",quantityAvailable:0,imageUrl:""},this.selectedFile=null,this.previewImage=null,await this.loadItems()}catch(e){console.error("Add item error",e),alert("Failed to add item")}finally{this.loading.set(!1)}}async deleteItem(e){e.id&&confirm(`Delete "${e.name}"?`)&&(await this.firebaseService.deleteMenuItem(e.id),await this.loadItems())}editItem(e){this.selectedItem=Le({},e)}cancelEdit(){this.selectedItem=null,this.previewImage=null}async updateItem(){!this.selectedItem||!this.selectedItem.id||(this.newItem.imageUrl&&(this.selectedItem.imageUrl=this.newItem.imageUrl),await this.firebaseService.updateMenuItem(this.selectedItem.id,this.selectedItem),alert("Item updated successfully!"),this.selectedItem=null,this.newItem={name:"",description:"",price:0,category:"",quantityAvailable:0,imageUrl:""},this.selectedFile=null,this.previewImage=null,this.loadItems())}async decreaseStock(e,t=1){if(!e.id)return;let r=Math.max(0,(e.quantityAvailable||0)-t);await this.firebaseService.updateMenuItem(e.id,{quantityAvailable:r}),await this.loadItems()}static \u0275fac=function(t){return new(t||n)(_t(pd))};static \u0275cmp=Zs({type:n,selectors:[["app-admin-dashboard"]],decls:67,vars:12,consts:[[1,"admin","container","mt-4"],[1,"mb-4"],[1,"card","p-3","mb-4"],[1,"row","g-2"],[1,"col-12","col-md-4"],["name","name","placeholder","Name",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-6","col-md-2"],["type","number","placeholder","Enter Price","name","price",1,"form-control",3,"ngModelChange","ngModel"],["type","number","placeholder","Enter Quantity","name","quantityAvailable",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12","col-md-2"],["name","category",1,"form-control",3,"ngModelChange","ngModel"],["value","","disabled",""],["value","Veg"],["value","Non-Veg"],[1,"col-12","mt-2"],["name","desc","placeholder","Description",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12","col-md-6","mt-2"],["type","file","accept","image/*",1,"form-control",3,"change"],["class","col-12 col-md-6 mt-2",4,"ngIf"],[1,"col-12","mt-3","text-end"],[1,"btn","btn-primary",3,"click","disabled"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],["class","card mt-3",4,"ngIf"],[1,"table"],[1,"mb-1"],["alt","preview",1,"img-preview",3,"src"],["width","60",3,"src","alt",4,"ngIf"],[1,"text-nowrap"],[1,"btn","btn-sm","btn-warning","me-1","mb-1",3,"click"],[1,"btn","btn-sm","btn-primary","me-1","mb-1",3,"click"],[1,"btn","btn-sm","btn-danger","mb-1",3,"click"],["width","60",3,"src","alt"],[1,"card","mt-3"],[1,"card-body"],[1,"col-12","col-md-6"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-6","col-md-3"],["type","number",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-6","col-md-3","mt-2"],[1,"form-control",3,"ngModelChange","ngModel"],[3,"value"],[1,"mt-3"],[1,"btn","btn-success","me-2",3,"click"],[1,"btn","btn-secondary",3,"click"]],template:function(t,r){t&1&&(we(0,"div",0)(1,"h2",1),Pe(2,"Admin Dashboard"),_e(),we(3,"div",2)(4,"h5"),Pe(5,"Add / Upload Menu Item"),_e(),we(6,"div",3)(7,"div",4)(8,"input",5),Dr("ngModelChange",function(s){return Lr(r.newItem.name,s)||(r.newItem.name=s),s}),_e()(),we(9,"div",6)(10,"input",7),rn("ngModelChange",function(s){return r.newItem.price=s}),_e()(),we(11,"div",6)(12,"input",8),rn("ngModelChange",function(s){return r.newItem.quantityAvailable=s}),_e()(),we(13,"div",9)(14,"select",10),Dr("ngModelChange",function(s){return Lr(r.newItem.category,s)||(r.newItem.category=s),s}),we(15,"option",11),Pe(16,"Select Category"),_e(),we(17,"option",12),Pe(18,"Veg"),_e(),we(19,"option",13),Pe(20,"Non-Veg"),_e()()(),we(21,"div",14)(22,"textarea",15),Dr("ngModelChange",function(s){return Lr(r.newItem.description,s)||(r.newItem.description=s),s}),_e()(),we(23,"div",16)(24,"input",17),rn("change",function(s){return r.onFileSelected(s)}),_e()(),pi(25,zce,4,1,"div",18),we(26,"div",19)(27,"button",20),rn("click",function(){return r.addMenuItem()}),Pe(28),_e()()()(),we(29,"h5"),Pe(30,"Menu Items"),_e(),we(31,"div",21)(32,"table",22)(33,"thead")(34,"tr")(35,"th"),Pe(36,"Image"),_e(),we(37,"th"),Pe(38,"Name"),_e(),we(39,"th"),Pe(40,"Price"),_e(),we(41,"th"),Pe(42,"Qty"),_e(),we(43,"th"),Pe(44,"Category"),_e(),we(45,"th"),Pe(46,"Actions"),_e()()(),we(47,"tbody"),pi(48,Hce,18,5,"tr",23),_e()()(),pi(49,Gce,44,8,"div",24),_e(),we(50,"h3"),Pe(51),_e(),we(52,"table",25)(53,"thead")(54,"tr")(55,"th"),Pe(56,"OrderID"),_e(),we(57,"th"),Pe(58,"Name"),_e(),we(59,"th"),Pe(60,"Mobile"),_e(),we(61,"th"),Pe(62,"Total"),_e(),we(63,"th"),Pe(64,"Time"),_e()()(),we(65,"tbody"),pi(66,Wce,12,8,"tr",23),_e()()),t&2&&(We(8),Cr("ngModel",r.newItem.name),We(2),Sn("ngModel",r.newItem.price===0?"":r.newItem.price),We(2),Sn("ngModel",r.newItem.quantityAvailable===0?"":r.newItem.quantityAvailable),We(2),Cr("ngModel",r.newItem.category),We(8),Cr("ngModel",r.newItem.description),We(3),Sn("ngIf",r.previewImage),We(2),Sn("disabled",r.loading()),We(),Ur(" ",r.loading()?"Saving...":"Add Menu Item"," "),We(20),Sn("ngForOf",r.menuItems()),We(),Sn("ngIf",r.selectedItem),We(2),Ur("Today's Revenue: \u20B9",r.totalRevenue),We(15),Sn("ngForOf",r.todayOrders))},dependencies:[Bo,Uc,uh,Sa,I1,T1,Hc,yh,vp,ed,Bu,iy],styles:[".admin[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 2px 6px #0000000f}.img-preview[_ngcontent-%COMP%]{max-width:120px;border:1px solid #ddd;border-radius:6px;object-fit:cover}input[type=number][_ngcontent-%COMP%]::placeholder{opacity:1!important}@media(max-width:576px){.text-end[_ngcontent-%COMP%]{text-align:center!important}.text-nowrap[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin-bottom:.25rem}}"]})};var P7=()=>{};var O7=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Kce=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},RE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,l=s>>2,p=(s&3)<<4|a>>4,y=(a&15)<<2|u>>6,g=u&63;c||(g=64,o||(y=64)),r.push(t[l],t[p],t[y],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(O7(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Kce(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||u==null||p==null)throw new NR;let y=s<<2|a>>4;if(r.push(y),u!==64){let g=a<<4&240|u>>2;if(r.push(g),p!==64){let D=u<<6&192|p;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},NR=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Qce=function(n){let e=O7(n);return RE.encodeByteArray(e,!0)},zv=function(n){return Qce(n).replace(/\./g,"")},PE=function(n){try{return RE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function PR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Yce=()=>PR().__FIREBASE_DEFAULTS__,Jce=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Zce=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&PE(n[1]);return e&&JSON.parse(e)},kE=()=>{try{return P7()||Yce()||Jce()||Zce()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},L7=n=>{var e,t;return(t=(e=kE())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},F7=n=>{let e=L7(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},kR=()=>{var n;return(n=kE())===null||n===void 0?void 0:n.config},V7=n=>{var e;return(e=kE())===null||e===void 0?void 0:e[`_${n}`]};var Wh=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Kh(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function MR(n){return(await fetch(n,{credentials:"include"})).ok}function B7(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[zv(JSON.stringify(t)),zv(JSON.stringify(o)),""].join(".")}var qv={};function Xce(){let n={prod:[],emulator:[]};for(let e of Object.keys(qv))qv[e]?n.emulator.push(e):n.prod.push(e);return n}function eue(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var k7=!1;function OR(n,e){if(typeof window>"u"||typeof document>"u"||!Kh(window.location.host)||qv[n]===e||qv[n]||k7)return;qv[n]=e;function t(y){return`__firebase__banner__${y}`}let r="__firebase__banner",s=Xce().prod.length>0;function o(){let y=document.getElementById(r);y&&y.remove()}function a(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function c(y,g){y.setAttribute("width","24"),y.setAttribute("id",g),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function u(){let y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{k7=!0,o()},y}function l(y,g){y.setAttribute("id",g),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function p(){let y=eue(r),g=t("text"),D=document.getElementById(g)||document.createElement("span"),M=t("learnmore"),k=document.getElementById(M)||document.createElement("a"),O=t("preprendIcon"),G=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){let W=y.element;a(W),l(k,M);let K=u();c(G,O),W.append(G,D,k,K),document.body.appendChild(W)}s?(D.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Qo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function j7(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qo())}function tue(){var n;let e=(n=kE())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function U7(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function q7(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function z7(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $7(){return!tue()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $v(){try{return typeof indexedDB=="object"}catch{return!1}}function H7(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var nue="FirebaseError",ka=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=nue,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fc.prototype.create)}},fc=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?rue(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ka(i,a,r)}};function rue(n,e){return n.replace(iue,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var iue=/\{\$([^}]+)}/g;function Qh(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(M7(s)&&M7(o)){if(!Qh(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function M7(n){return n!==null&&typeof n=="object"}function LR(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function G7(n,e){let t=new RR(n,e);return t.subscribe.bind(t)}var RR=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");sue(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=xR),i.error===void 0&&(i.error=xR),i.complete===void 0&&(i.complete=xR);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function sue(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function xR(){}var bRe=14400*1e3;function Yo(n){return n&&n._delegate?n._delegate:n}var no=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Yh="[DEFAULT]";var FR=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Wh;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aue(e))try{this.getOrInitializeService({instanceIdentifier:Yh})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Yh){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yh){return this.instances.has(e)}getOptions(e=Yh){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:oue(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yh){return this.component?this.component.multipleInstances?e:Yh:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function oue(n){return n===Yh?void 0:n}function aue(n){return n.instantiationMode==="EAGER"}var ME=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new FR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var cue=[],_n=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(_n||{}),uue={debug:_n.DEBUG,verbose:_n.VERBOSE,info:_n.INFO,warn:_n.WARN,error:_n.ERROR,silent:_n.SILENT},lue=_n.INFO,due={[_n.DEBUG]:"log",[_n.VERBOSE]:"log",[_n.INFO]:"info",[_n.WARN]:"warn",[_n.ERROR]:"error"},hue=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=due[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},su=class{constructor(e){this.name=e,this._logLevel=lue,this._logHandler=hue,this._userLogHandler=null,cue.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _n))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uue[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_n.DEBUG,...e),this._logHandler(this,_n.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_n.VERBOSE,...e),this._logHandler(this,_n.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_n.INFO,...e),this._logHandler(this,_n.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_n.WARN,...e),this._logHandler(this,_n.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_n.ERROR,...e),this._logHandler(this,_n.ERROR,...e)}};var BR=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(fue(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function fue(n){let e=n.getComponent();return e?.type==="VERSION"}var jR="@firebase/app",W7="0.13.2";var nl=new su("@firebase/app"),pue="@firebase/app-compat",gue="@firebase/analytics-compat",mue="@firebase/analytics",yue="@firebase/app-check-compat",vue="@firebase/app-check",_ue="@firebase/auth",wue="@firebase/auth-compat",bue="@firebase/database",Eue="@firebase/data-connect",Iue="@firebase/database-compat",Tue="@firebase/functions",Aue="@firebase/functions-compat",Sue="@firebase/installations",Cue="@firebase/installations-compat",Due="@firebase/messaging",xue="@firebase/messaging-compat",Nue="@firebase/performance",Rue="@firebase/performance-compat",Pue="@firebase/remote-config",kue="@firebase/remote-config-compat",Mue="@firebase/storage",Oue="@firebase/storage-compat",Lue="@firebase/firestore",Fue="@firebase/ai",Vue="@firebase/firestore-compat",Bue="firebase",jue="11.10.0";var UR="[DEFAULT]",Uue={[jR]:"fire-core",[pue]:"fire-core-compat",[mue]:"fire-analytics",[gue]:"fire-analytics-compat",[vue]:"fire-app-check",[yue]:"fire-app-check-compat",[_ue]:"fire-auth",[wue]:"fire-auth-compat",[bue]:"fire-rtdb",[Eue]:"fire-data-connect",[Iue]:"fire-rtdb-compat",[Tue]:"fire-fn",[Aue]:"fire-fn-compat",[Sue]:"fire-iid",[Cue]:"fire-iid-compat",[Due]:"fire-fcm",[xue]:"fire-fcm-compat",[Nue]:"fire-perf",[Rue]:"fire-perf-compat",[Pue]:"fire-rc",[kue]:"fire-rc-compat",[Mue]:"fire-gcs",[Oue]:"fire-gcs-compat",[Lue]:"fire-fst",[Vue]:"fire-fst-compat",[Fue]:"fire-vertex","fire-js":"fire-js",[Bue]:"fire-js-all"};var Hv=new Map,que=new Map,qR=new Map;function K7(n,e){try{n.container.addComponent(e)}catch(t){nl.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function pc(n){let e=n.name;if(qR.has(e))return nl.debug(`There were multiple attempts to register component ${e}.`),!1;qR.set(e,n);for(let t of Hv.values())K7(t,n);for(let t of que.values())K7(t,n);return!0}function OE(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function rl(n){return n==null?!1:n.settings!==void 0}var zue={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Id=new fc("app","Firebase",zue);var zR=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new no("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Id.create("app-deleted",{appName:this._name})}};var yg=jue;function GR(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:UR,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Id.create("bad-app-name",{appName:String(i)});if(t||(t=kR()),!t)throw Id.create("no-options");let s=Hv.get(i);if(s){if(Qh(t,s.options)&&Qh(r,s.config))return s;throw Id.create("duplicate-app",{appName:i})}let o=new ME(i);for(let c of qR.values())o.addComponent(c);let a=new zR(t,r,o);return Hv.set(i,a),a}function vg(n=UR){let e=Hv.get(n);if(!e&&n===UR&&kR())return GR();if(!e)throw Id.create("no-app",{appName:n});return e}function LE(){return Array.from(Hv.values())}function si(n,e,t){var r;let i=(r=Uue[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nl.warn(a.join(" "));return}pc(new no(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var $ue="firebase-heartbeat-database",Hue=1,Gv="firebase-heartbeat-store",VR=null;function Z7(){return VR||(VR=k1($ue,Hue,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Gv)}catch(t){console.warn(t)}}}}).catch(n=>{throw Id.create("idb-open",{originalErrorMessage:n.message})})),VR}async function Gue(n){try{let t=(await Z7()).transaction(Gv),r=await t.objectStore(Gv).get(X7(n));return await t.done,r}catch(e){if(e instanceof ka)nl.warn(e.message);else{let t=Id.create("idb-get",{originalErrorMessage:e?.message});nl.warn(t.message)}}}async function Q7(n,e){try{let r=(await Z7()).transaction(Gv,"readwrite");await r.objectStore(Gv).put(e,X7(n)),await r.done}catch(t){if(t instanceof ka)nl.warn(t.message);else{let r=Id.create("idb-set",{originalErrorMessage:t?.message});nl.warn(r.message)}}}function X7(n){return`${n.name}!${n.options.appId}`}var Wue=1024,Kue=30,$R=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new HR(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Y7();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Kue){let o=Yue(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){nl.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Y7(),{heartbeatsToSend:r,unsentEntries:i}=Que(this._heartbeatsCache.heartbeats),s=zv(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return nl.warn(t),""}}};function Y7(){return new Date().toISOString().substring(0,10)}function Que(n,e=Wue){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),J7(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),J7(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var HR=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $v()?H7().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await Gue(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return Q7(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return Q7(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function J7(n){return zv(JSON.stringify({version:2,heartbeats:n})).length}function Yue(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Jue(n){pc(new no("platform-logger",e=>new BR(e),"PRIVATE")),pc(new no("heartbeat",e=>new $R(e),"PRIVATE")),si(jR,W7,n),si(jR,W7,"esm2017"),si("fire-js","")}Jue("");var Zue="firebase",Xue="11.10.0";si(Zue,Xue,"app");function e9(n){n===void 0&&(n=ze(Ki));let e=n.get(Hf);return t=>new dn(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=t.subscribe({next:c=>{r.next(c),o()},complete:()=>{r.complete(),o()},error:c=>{r.error(c),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var Zh=new Hd("ANGULARFIRE2_VERSION");function VE(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var wg=(n,e)=>{let t=e?[e]:LE(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},_g=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(_g||{}),t9=g2()&&typeof Zone<"u"?_g.WARN:_g.SILENT;var FE=class{zone;delegate;constructor(e,t=OT){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},Xh=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=ze(Ar);this.outsideAngular=t.runOutsideAngular(()=>new FE(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new FE(typeof Zone>"u"?void 0:Zone.current,MT))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),n9=!1;function ele(n,e){!n9&&(t9>_g.SILENT||g2())&&(n9=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),t9>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function tle(n){let e=ze(Ar,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Jh(n){let e=ze(Ar,{optional:!0});return e?e.run(()=>n()):n()}var nle=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Li(t,()=>Jh(()=>n.apply(void 0,r)))),Jo=(n,e,t)=>(t||=e?_g.WARN:_g.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=ze(Xh),o=ze(Hf),a=ze(Oi)}catch{return ele(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=Jh(()=>o.add())),i[u]=nle(i[u],r,a));let c=tle(()=>n.apply(this,i));return e?c instanceof dn?c.pipe(Rl(s.outsideAngular),Nl(s.insideAngular),e9(a)):c instanceof Promise?Jh(()=>{let u=o.add();return new Promise((l,p)=>{c.then(y=>Li(a,()=>Jh(()=>l(y))),y=>Li(a,()=>Jh(()=>p(y)))).finally(u)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Jh(()=>c):c instanceof dn?c.pipe(Rl(s.outsideAngular),Nl(s.insideAngular)):Jh(()=>c)});var ef=class{constructor(e){return e}},Wv=class{constructor(){return LE()}};function rle(n){return n&&n.length===1?n[0]:new ef(vg())}var WR=new wt("angularfire2._apps"),ile={provide:ef,useFactory:rle,deps:[[new Ru,WR]]},sle={provide:Wv,deps:[[new Ru,WR]]};function ole(n){return(e,t)=>{let r=t.get(oh);si("angularfire",Zh.full,"core"),si("angularfire",Zh.full,"app"),si("angular",iA.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new ef(i)}}function r9(n,...e){return xu([ile,sle,{provide:WR,useFactory:ole(n),multi:!0,deps:[Ar,Ki,Xh,...e]}])}var i9=Jo(GR,!0);var ale=new Map,cle={activated:!1,tokenObservers:[]},ule={initialized:!1,enabled:!1};function gc(n){return ale.get(n)||Object.assign({},cle)}function c9(){return ule}var lle="https://content-firebaseappcheck.googleapis.com/v1";var dle="exchangeDebugToken",s9={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},m5e=1440*60*1e3;var YR=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Wh,this.pending.promise.catch(t=>{}),await hle(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Wh,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function hle(n){return new Promise(e=>{setTimeout(e,n)})}var fle={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Td=new fc("appCheck","AppCheck",fle);function u9(n){if(!gc(n).activated)throw Td.create("use-before-activation",{appName:n.name})}async function l9({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let s={method:"POST",body:JSON.stringify(e),headers:r},o;try{o=await fetch(n,s)}catch(p){throw Td.create("fetch-network-error",{originalErrorMessage:p?.message})}if(o.status!==200)throw Td.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(p){throw Td.create("fetch-parse-error",{originalErrorMessage:p?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw Td.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let u=Number(c[1])*1e3,l=Date.now();return{token:a.token,expireTimeMillis:l+u,issuedAtTimeMillis:l}}function d9(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${lle}/projects/${t}/apps/${r}:${dle}?key=${i}`,body:{debug_token:e}}}var ple="firebase-app-check-database",gle=1,JR="firebase-app-check-store";var BE=null;function mle(){return BE||(BE=new Promise((n,e)=>{try{let t=indexedDB.open(ple,gle);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Td.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(JR,{keyPath:"compositeKey"})}}}catch(t){e(Td.create("storage-open",{originalErrorMessage:t?.message}))}}),BE)}function yle(n,e){return vle(_le(n),e)}async function vle(n,e){let r=(await mle()).transaction(JR,"readwrite"),s=r.objectStore(JR).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var u;a(Td.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})}function _le(n){return`${n.options.appId}-${n.name}`}var Kv=new su("@firebase/app-check");function KR(n,e){return $v()?yle(n,e).catch(t=>{Kv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function h9(){return c9().enabled}async function f9(){let n=c9();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var wle={error:"UNKNOWN_ERROR"};function ble(n){return RE.encodeString(JSON.stringify(n),!1)}async function ZR(n,e=!1,t=!1){let r=n.app;u9(r);let i=gc(r),s=i.token,o;if(s&&!Qv(s)&&(i.token=void 0,s=void 0),!s){let u=await i.cachedTokenPromise;u&&(Qv(u)?s=u:await KR(r,void 0))}if(!e&&s&&Qv(s))return{token:s.token};let a=!1;if(h9())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=l9(d9(r,await f9()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=await i.exchangeTokenPromise;return await KR(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Kv.warn(u.message):t&&Kv.error(u),QR(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=await gc(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Kv.warn(u.message):t&&Kv.error(u),o=u}let c;return s?o?Qv(s)?c={token:s.token,internalError:o}:c=QR(o):(c={token:s.token},i.token=s,await KR(r,s)):c=QR(o),a&&Ale(r,c),c}async function Ele(n){let e=n.app;u9(e);let{provider:t}=gc(e);if(h9()){let r=await f9(),{token:i}=await l9(d9(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function Ile(n,e,t,r){let{app:i}=n,s=gc(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Qv(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),o9(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>o9(n))}function p9(n,e){let t=gc(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function o9(n){let{app:e}=n,t=gc(e),r=t.tokenRefresher;r||(r=Tle(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Tle(n){let{app:e}=n;return new YR(async()=>{let t=gc(e),r;if(t.token?r=await ZR(n,!0):r=await ZR(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=gc(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},s9.RETRIAL_MIN_WAIT,s9.RETRIAL_MAX_WAIT)}function Ale(n,e){let t=gc(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Qv(n){return n.expireTimeMillis-Date.now()>0}function QR(n){return{token:ble(wle),error:n}}var XR=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=gc(this.app);for(let t of e)p9(this.app,t.next);return Promise.resolve()}};function Sle(n,e){return new XR(n,e)}function Cle(n){return{getToken:e=>ZR(n,e),getLimitedUseToken:()=>Ele(n),addTokenListener:e=>Ile(n,"INTERNAL",e),removeTokenListener:e=>p9(n.app,e)}}var Dle="@firebase/app-check",xle="0.10.1";var Nle="app-check",a9="app-check-internal";function Rle(){pc(new no(Nle,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Sle(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(a9).initialize()})),pc(new no(a9,n=>{let e=n.getProvider("app-check").getImmediate();return Cle(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),si(Dle,xle)}Rle();var Ple="app-check";var jE=class{constructor(){return wg(Ple)}};var kle=["localhost","0.0.0.0","127.0.0.1"],D5e=typeof window<"u"&&kle.includes(window.location.hostname);function E9(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var I9=E9,T9=new fc("auth","Firebase",E9());var $E=new su("@firebase/auth");function Mle(n,...e){$E.logLevel<=_n.WARN&&$E.warn(`Auth (${yg}): ${n}`,...e)}function qE(n,...e){$E.logLevel<=_n.ERROR&&$E.error(`Auth (${yg}): ${n}`,...e)}function g9(n,...e){throw d5(n,...e)}function l5(n,...e){return d5(n,...e)}function A9(n,e,t){let r=Object.assign(Object.assign({},I9()),{[e]:t});return new fc("auth","Firebase",r).create(e,{appName:n.name})}function zE(n){return A9(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function d5(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return T9.create(n,...e)}function Wn(n,e,...t){if(!n)throw d5(e,...t)}function Yv(n){let e="INTERNAL ASSERTION FAILED: "+n;throw qE(e),new Error(e)}function HE(n,e){n||Yv(e)}function Ole(){return m9()==="http:"||m9()==="https:"}function m9(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Lle(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ole()||q7()||"connection"in navigator)?navigator.onLine:!0}function Fle(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var rf=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,HE(t>e,"Short delay should be less than long delay!"),this.isMobile=j7()||z7()}get(){return Lle()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Vle(n,e){HE(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var GE=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yv("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yv("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yv("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Ble={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var jle=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Ule=new rf(3e4,6e4);function S9(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function JE(n,e,t,r,i={}){return C9(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=LR(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let u=Object.assign({method:e,headers:c},s);return U7()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&Kh(n.emulatorConfig.host)&&(u.credentials="include"),GE.fetch()(await D9(n,n.config.apiHost,t,a),u)})}async function C9(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},Ble),e);try{let i=new n5(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw UE(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw UE(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw UE(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw UE(n,"user-disabled",o);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw A9(n,l,u);g9(n,l)}}catch(i){if(i instanceof ka)throw i;g9(n,"network-request-failed",{message:String(i)})}}async function D9(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?Vle(n.config,i):`${n.config.apiScheme}://${i}`;return jle.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var n5=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(l5(this.auth,"network-request-failed")),Ule.get())})}};function UE(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=l5(n,e,r);return i.customData._tokenResponse=t,i}async function qle(n,e){return JE(n,"POST","/v1/accounts:delete",e)}async function WE(n,e){return JE(n,"POST","/v1/accounts:lookup",e)}function Jv(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function h5(n,e=!1){let t=Yo(n),r=await t.getIdToken(e),i=x9(r);Wn(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Jv(e5(i.auth_time)),issuedAtTime:Jv(e5(i.iat)),expirationTime:Jv(e5(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function e5(n){return Number(n)*1e3}function x9(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return qE("JWT malformed, contained fewer than 3 sections"),null;try{let i=PE(t);return i?JSON.parse(i):(qE("Failed to decode base64 JWT payload"),null)}catch(i){return qE("Caught error parsing JWT payload as JSON",i?.toString()),null}}function y9(n){let e=x9(n);return Wn(e,"internal-error"),Wn(typeof e.exp<"u","internal-error"),Wn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function r5(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ka&&zle(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function zle({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var i5=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Xv=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jv(this.lastLoginAt),this.creationTime=Jv(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function KE(n){var e;let t=n.auth,r=await n.getIdToken(),i=await r5(n,WE(t,{idToken:r}));Wn(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?N9(s.providerUserInfo):[],a=$le(n.providerData,o),c=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!a?.length,l=c?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Xv(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(n,p)}async function f5(n){let e=Yo(n);await KE(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $le(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function N9(n){return n.map(e=>{var{providerId:t}=e,r=LT(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function Hle(n,e){let t=await C9(n,{},async()=>{let r=LR({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await D9(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Kh(n.emulatorConfig.host)&&(c.credentials="include"),GE.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Gle(n,e){return JE(n,"POST","/v2/accounts:revokeToken",S9(n,e))}var Zv=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Wn(e.idToken,"internal-error"),Wn(typeof e.idToken<"u","internal-error"),Wn(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):y9(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Wn(e.length!==0,"internal-error");let t=y9(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Wn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await Hle(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(Wn(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Wn(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Wn(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Yv("not implemented")}};function Ad(n,e){Wn(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var tf=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=LT(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new i5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Xv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await r5(this,this.stsTokenManager.getToken(this.auth,e));return Wn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return h5(this,e)}reload(){return f5(this)}_assign(e){this!==e&&(Wn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Wn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await KE(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rl(this.auth.app))return Promise.reject(zE(this.auth));let e=await this.getIdToken();return await r5(this,qle(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,u,l;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,g=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,D=(o=t.photoURL)!==null&&o!==void 0?o:void 0,M=(a=t.tenantId)!==null&&a!==void 0?a:void 0,k=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,O=(u=t.createdAt)!==null&&u!==void 0?u:void 0,G=(l=t.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:W,emailVerified:K,isAnonymous:ue,providerData:fe,stsTokenManager:P}=t;Wn(W&&P,e,"internal-error");let T=Zv.fromJSON(this.name,P);Wn(typeof W=="string",e,"internal-error"),Ad(p,e.name),Ad(y,e.name),Wn(typeof K=="boolean",e,"internal-error"),Wn(typeof ue=="boolean",e,"internal-error"),Ad(g,e.name),Ad(D,e.name),Ad(M,e.name),Ad(k,e.name),Ad(O,e.name),Ad(G,e.name);let w=new n({uid:W,auth:e,email:y,emailVerified:K,displayName:p,isAnonymous:ue,photoURL:D,phoneNumber:g,tenantId:M,stsTokenManager:T,createdAt:O,lastLoginAt:G});return fe&&Array.isArray(fe)&&(w.providerData=fe.map(x=>Object.assign({},x))),k&&(w._redirectEventId=k),w}static async _fromIdTokenResponse(e,t,r=!1){let i=new Zv;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await KE(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];Wn(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?N9(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Zv;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Xv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,u),c}};var v9=new Map;function nf(n){HE(n instanceof Function,"Expected a class definition");let e=v9.get(n);return e?(HE(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,v9.set(n,e),e)}var Wle=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),s5=Wle;function t5(n,e,t){return`firebase:${n}:${e}:${t}`}var QE=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=t5(this.userKey,i.apiKey,s),this.fullPersistenceKey=t5("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await WE(this.auth,{idToken:e}).catch(()=>{});return t?tf._fromGetAccountInfoResponse(this.auth,t,e):null}return tf._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(nf(s5),e,r);let i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u),s=i[0]||nf(s5),o=t5(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let l=await u._get(o);if(l){let p;if(typeof l=="string"){let y=await WE(e,{idToken:l}).catch(()=>{});if(!y)break;p=await tf._fromGetAccountInfoResponse(e,y,l)}else p=tf._fromJSON(e,l);u!==s&&(a=p),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new n(s,e,r))}};function _9(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Jle(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Kle(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Xle(e))return"Blackberry";if(ede(e))return"Webos";if(Qle(e))return"Safari";if((e.includes("chrome/")||Yle(e))&&!e.includes("edge/"))return"Chrome";if(Zle(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Kle(n=Qo()){return/firefox\//i.test(n)}function Qle(n=Qo()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Yle(n=Qo()){return/crios\//i.test(n)}function Jle(n=Qo()){return/iemobile/i.test(n)}function Zle(n=Qo()){return/android/i.test(n)}function Xle(n=Qo()){return/blackberry/i.test(n)}function ede(n=Qo()){return/webos/i.test(n)}function R9(n,e=[]){let t;switch(n){case"Browser":t=_9(Qo());break;case"Worker":t=`${_9(Qo())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${yg}/${r}`}var o5=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function tde(n,e={}){return JE(n,"GET","/v2/passwordPolicy",S9(n,e))}var nde=6,a5=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:nde,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var c5=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new YE(this),this.idTokenSubscription=new YE(this),this.beforeStateQueue=new o5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=T9,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=nf(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await QE.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await WE(this,{idToken:e}),r=await tf._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(rl(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Wn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await KE(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Fle()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rl(this.app))return Promise.reject(zE(this));let t=e?Yo(e):null;return t&&Wn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Wn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rl(this.app)?Promise.reject(zE(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rl(this.app)?Promise.reject(zE(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(nf(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await tde(this),t=new a5(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Gle(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&nf(e)||this._popupRedirectResolver;Wn(t,this,"argument-error"),this.redirectPersistenceManager=await QE.create(this,[nf(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Wn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Wn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=R9(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(rl(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&Mle(`Error while retrieving App Check token: ${t.error}`),t?.token}};function rde(n){return Yo(n)}var YE=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=G7(t=>this.observer=t)}get next(){return Wn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ide={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sde(n){ide=n}function ode(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function ade(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(nf);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var j5e=ode("rcb"),U5e=new rf(3e4,6e4);var q5e=new rf(2e3,1e4);var z5e=600*1e3;var $5e=new rf(3e4,6e4);var H5e=new rf(5e3,15e3);var G5e=encodeURIComponent("fac");var w9="@firebase/auth",b9="1.10.8";var u5=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Wn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function cde(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ude(n){pc(new no("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Wn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:R9(n)},u=new c5(r,i,s,c);return ade(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),pc(new no("auth-internal",e=>{let t=rde(e.getProvider("auth").getImmediate());return(r=>new u5(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),si(w9,b9,cde(n)),si(w9,b9,"esm2017")}var lde=300,W5e=V7("authIdTokenMaxAge")||lde;function dde(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}sde({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=l5("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",dde().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ude("Browser");var uhe="auth";var ZE=class{constructor(){return wg(uhe)}};var XE=function(){return XE=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},XE.apply(this,arguments)};var lhe={includeMetadataChanges:!1};function P9(n,e){return e===void 0&&(e=lhe),new dn(function(t){var r=Fb(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function k9(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:XE(XE({},r),(t={},t[e.idField]=n.id,t))}function M9(n){return P9(n,{includeMetadataChanges:!0}).pipe(nr(function(e){return e.docs}))}function O9(n,e){return e===void 0&&(e={}),M9(n).pipe(nr(function(t){return t.map(function(r){return k9(r,e)})}))}var L9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},F9={};var il,p5;(function(){var n;function e(P,T){function w(){}w.prototype=T.prototype,P.D=T.prototype,P.prototype=new w,P.prototype.constructor=P,P.C=function(x,_,S){for(var I=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)I[ee-2]=arguments[ee];return T.prototype[_].apply(x,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,T,w){w||(w=0);var x=Array(16);if(typeof T=="string")for(var _=0;16>_;++_)x[_]=T.charCodeAt(w++)|T.charCodeAt(w++)<<8|T.charCodeAt(w++)<<16|T.charCodeAt(w++)<<24;else for(_=0;16>_;++_)x[_]=T[w++]|T[w++]<<8|T[w++]<<16|T[w++]<<24;T=P.g[0],w=P.g[1],_=P.g[2];var S=P.g[3],I=T+(S^w&(_^S))+x[0]+3614090360&4294967295;T=w+(I<<7&4294967295|I>>>25),I=S+(_^T&(w^_))+x[1]+3905402710&4294967295,S=T+(I<<12&4294967295|I>>>20),I=_+(w^S&(T^w))+x[2]+606105819&4294967295,_=S+(I<<17&4294967295|I>>>15),I=w+(T^_&(S^T))+x[3]+3250441966&4294967295,w=_+(I<<22&4294967295|I>>>10),I=T+(S^w&(_^S))+x[4]+4118548399&4294967295,T=w+(I<<7&4294967295|I>>>25),I=S+(_^T&(w^_))+x[5]+1200080426&4294967295,S=T+(I<<12&4294967295|I>>>20),I=_+(w^S&(T^w))+x[6]+2821735955&4294967295,_=S+(I<<17&4294967295|I>>>15),I=w+(T^_&(S^T))+x[7]+4249261313&4294967295,w=_+(I<<22&4294967295|I>>>10),I=T+(S^w&(_^S))+x[8]+1770035416&4294967295,T=w+(I<<7&4294967295|I>>>25),I=S+(_^T&(w^_))+x[9]+2336552879&4294967295,S=T+(I<<12&4294967295|I>>>20),I=_+(w^S&(T^w))+x[10]+4294925233&4294967295,_=S+(I<<17&4294967295|I>>>15),I=w+(T^_&(S^T))+x[11]+2304563134&4294967295,w=_+(I<<22&4294967295|I>>>10),I=T+(S^w&(_^S))+x[12]+1804603682&4294967295,T=w+(I<<7&4294967295|I>>>25),I=S+(_^T&(w^_))+x[13]+4254626195&4294967295,S=T+(I<<12&4294967295|I>>>20),I=_+(w^S&(T^w))+x[14]+2792965006&4294967295,_=S+(I<<17&4294967295|I>>>15),I=w+(T^_&(S^T))+x[15]+1236535329&4294967295,w=_+(I<<22&4294967295|I>>>10),I=T+(_^S&(w^_))+x[1]+4129170786&4294967295,T=w+(I<<5&4294967295|I>>>27),I=S+(w^_&(T^w))+x[6]+3225465664&4294967295,S=T+(I<<9&4294967295|I>>>23),I=_+(T^w&(S^T))+x[11]+643717713&4294967295,_=S+(I<<14&4294967295|I>>>18),I=w+(S^T&(_^S))+x[0]+3921069994&4294967295,w=_+(I<<20&4294967295|I>>>12),I=T+(_^S&(w^_))+x[5]+3593408605&4294967295,T=w+(I<<5&4294967295|I>>>27),I=S+(w^_&(T^w))+x[10]+38016083&4294967295,S=T+(I<<9&4294967295|I>>>23),I=_+(T^w&(S^T))+x[15]+3634488961&4294967295,_=S+(I<<14&4294967295|I>>>18),I=w+(S^T&(_^S))+x[4]+3889429448&4294967295,w=_+(I<<20&4294967295|I>>>12),I=T+(_^S&(w^_))+x[9]+568446438&4294967295,T=w+(I<<5&4294967295|I>>>27),I=S+(w^_&(T^w))+x[14]+3275163606&4294967295,S=T+(I<<9&4294967295|I>>>23),I=_+(T^w&(S^T))+x[3]+4107603335&4294967295,_=S+(I<<14&4294967295|I>>>18),I=w+(S^T&(_^S))+x[8]+1163531501&4294967295,w=_+(I<<20&4294967295|I>>>12),I=T+(_^S&(w^_))+x[13]+2850285829&4294967295,T=w+(I<<5&4294967295|I>>>27),I=S+(w^_&(T^w))+x[2]+4243563512&4294967295,S=T+(I<<9&4294967295|I>>>23),I=_+(T^w&(S^T))+x[7]+1735328473&4294967295,_=S+(I<<14&4294967295|I>>>18),I=w+(S^T&(_^S))+x[12]+2368359562&4294967295,w=_+(I<<20&4294967295|I>>>12),I=T+(w^_^S)+x[5]+4294588738&4294967295,T=w+(I<<4&4294967295|I>>>28),I=S+(T^w^_)+x[8]+2272392833&4294967295,S=T+(I<<11&4294967295|I>>>21),I=_+(S^T^w)+x[11]+1839030562&4294967295,_=S+(I<<16&4294967295|I>>>16),I=w+(_^S^T)+x[14]+4259657740&4294967295,w=_+(I<<23&4294967295|I>>>9),I=T+(w^_^S)+x[1]+2763975236&4294967295,T=w+(I<<4&4294967295|I>>>28),I=S+(T^w^_)+x[4]+1272893353&4294967295,S=T+(I<<11&4294967295|I>>>21),I=_+(S^T^w)+x[7]+4139469664&4294967295,_=S+(I<<16&4294967295|I>>>16),I=w+(_^S^T)+x[10]+3200236656&4294967295,w=_+(I<<23&4294967295|I>>>9),I=T+(w^_^S)+x[13]+681279174&4294967295,T=w+(I<<4&4294967295|I>>>28),I=S+(T^w^_)+x[0]+3936430074&4294967295,S=T+(I<<11&4294967295|I>>>21),I=_+(S^T^w)+x[3]+3572445317&4294967295,_=S+(I<<16&4294967295|I>>>16),I=w+(_^S^T)+x[6]+76029189&4294967295,w=_+(I<<23&4294967295|I>>>9),I=T+(w^_^S)+x[9]+3654602809&4294967295,T=w+(I<<4&4294967295|I>>>28),I=S+(T^w^_)+x[12]+3873151461&4294967295,S=T+(I<<11&4294967295|I>>>21),I=_+(S^T^w)+x[15]+530742520&4294967295,_=S+(I<<16&4294967295|I>>>16),I=w+(_^S^T)+x[2]+3299628645&4294967295,w=_+(I<<23&4294967295|I>>>9),I=T+(_^(w|~S))+x[0]+4096336452&4294967295,T=w+(I<<6&4294967295|I>>>26),I=S+(w^(T|~_))+x[7]+1126891415&4294967295,S=T+(I<<10&4294967295|I>>>22),I=_+(T^(S|~w))+x[14]+2878612391&4294967295,_=S+(I<<15&4294967295|I>>>17),I=w+(S^(_|~T))+x[5]+4237533241&4294967295,w=_+(I<<21&4294967295|I>>>11),I=T+(_^(w|~S))+x[12]+1700485571&4294967295,T=w+(I<<6&4294967295|I>>>26),I=S+(w^(T|~_))+x[3]+2399980690&4294967295,S=T+(I<<10&4294967295|I>>>22),I=_+(T^(S|~w))+x[10]+4293915773&4294967295,_=S+(I<<15&4294967295|I>>>17),I=w+(S^(_|~T))+x[1]+2240044497&4294967295,w=_+(I<<21&4294967295|I>>>11),I=T+(_^(w|~S))+x[8]+1873313359&4294967295,T=w+(I<<6&4294967295|I>>>26),I=S+(w^(T|~_))+x[15]+4264355552&4294967295,S=T+(I<<10&4294967295|I>>>22),I=_+(T^(S|~w))+x[6]+2734768916&4294967295,_=S+(I<<15&4294967295|I>>>17),I=w+(S^(_|~T))+x[13]+1309151649&4294967295,w=_+(I<<21&4294967295|I>>>11),I=T+(_^(w|~S))+x[4]+4149444226&4294967295,T=w+(I<<6&4294967295|I>>>26),I=S+(w^(T|~_))+x[11]+3174756917&4294967295,S=T+(I<<10&4294967295|I>>>22),I=_+(T^(S|~w))+x[2]+718787259&4294967295,_=S+(I<<15&4294967295|I>>>17),I=w+(S^(_|~T))+x[9]+3951481745&4294967295,P.g[0]=P.g[0]+T&4294967295,P.g[1]=P.g[1]+(_+(I<<21&4294967295|I>>>11))&4294967295,P.g[2]=P.g[2]+_&4294967295,P.g[3]=P.g[3]+S&4294967295}r.prototype.u=function(P,T){T===void 0&&(T=P.length);for(var w=T-this.blockSize,x=this.B,_=this.h,S=0;S<T;){if(_==0)for(;S<=w;)i(this,P,S),S+=this.blockSize;if(typeof P=="string"){for(;S<T;)if(x[_++]=P.charCodeAt(S++),_==this.blockSize){i(this,x),_=0;break}}else for(;S<T;)if(x[_++]=P[S++],_==this.blockSize){i(this,x),_=0;break}}this.h=_,this.o+=T},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var T=1;T<P.length-8;++T)P[T]=0;var w=8*this.o;for(T=P.length-8;T<P.length;++T)P[T]=w&255,w/=256;for(this.u(P),P=Array(16),T=w=0;4>T;++T)for(var x=0;32>x;x+=8)P[w++]=this.g[T]>>>x&255;return P};function s(P,T){var w=a;return Object.prototype.hasOwnProperty.call(w,P)?w[P]:w[P]=T(P)}function o(P,T){this.h=T;for(var w=[],x=!0,_=P.length-1;0<=_;_--){var S=P[_]|0;x&&S==T||(w[_]=S,x=!1)}this.g=w}var a={};function c(P){return-128<=P&&128>P?s(P,function(T){return new o([T|0],0>T?-1:0)}):new o([P|0],0>P?-1:0)}function u(P){if(isNaN(P)||!isFinite(P))return p;if(0>P)return k(u(-P));for(var T=[],w=1,x=0;P>=w;x++)T[x]=P/w|0,w*=4294967296;return new o(T,0)}function l(P,T){if(P.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(P.charAt(0)=="-")return k(l(P.substring(1),T));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=u(Math.pow(T,8)),x=p,_=0;_<P.length;_+=8){var S=Math.min(8,P.length-_),I=parseInt(P.substring(_,_+S),T);8>S?(S=u(Math.pow(T,S)),x=x.j(S).add(u(I))):(x=x.j(w),x=x.add(u(I)))}return x}var p=c(0),y=c(1),g=c(16777216);n=o.prototype,n.m=function(){if(M(this))return-k(this).m();for(var P=0,T=1,w=0;w<this.g.length;w++){var x=this.i(w);P+=(0<=x?x:4294967296+x)*T,T*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(D(this))return"0";if(M(this))return"-"+k(this).toString(P);for(var T=u(Math.pow(P,6)),w=this,x="";;){var _=K(w,T).g;w=O(w,_.j(T));var S=((0<w.g.length?w.g[0]:w.h)>>>0).toString(P);if(w=_,D(w))return S+x;for(;6>S.length;)S="0"+S;x=S+x}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function D(P){if(P.h!=0)return!1;for(var T=0;T<P.g.length;T++)if(P.g[T]!=0)return!1;return!0}function M(P){return P.h==-1}n.l=function(P){return P=O(this,P),M(P)?-1:D(P)?0:1};function k(P){for(var T=P.g.length,w=[],x=0;x<T;x++)w[x]=~P.g[x];return new o(w,~P.h).add(y)}n.abs=function(){return M(this)?k(this):this},n.add=function(P){for(var T=Math.max(this.g.length,P.g.length),w=[],x=0,_=0;_<=T;_++){var S=x+(this.i(_)&65535)+(P.i(_)&65535),I=(S>>>16)+(this.i(_)>>>16)+(P.i(_)>>>16);x=I>>>16,S&=65535,I&=65535,w[_]=I<<16|S}return new o(w,w[w.length-1]&-2147483648?-1:0)};function O(P,T){return P.add(k(T))}n.j=function(P){if(D(this)||D(P))return p;if(M(this))return M(P)?k(this).j(k(P)):k(k(this).j(P));if(M(P))return k(this.j(k(P)));if(0>this.l(g)&&0>P.l(g))return u(this.m()*P.m());for(var T=this.g.length+P.g.length,w=[],x=0;x<2*T;x++)w[x]=0;for(x=0;x<this.g.length;x++)for(var _=0;_<P.g.length;_++){var S=this.i(x)>>>16,I=this.i(x)&65535,ee=P.i(_)>>>16,ye=P.i(_)&65535;w[2*x+2*_]+=I*ye,G(w,2*x+2*_),w[2*x+2*_+1]+=S*ye,G(w,2*x+2*_+1),w[2*x+2*_+1]+=I*ee,G(w,2*x+2*_+1),w[2*x+2*_+2]+=S*ee,G(w,2*x+2*_+2)}for(x=0;x<T;x++)w[x]=w[2*x+1]<<16|w[2*x];for(x=T;x<2*T;x++)w[x]=0;return new o(w,0)};function G(P,T){for(;(P[T]&65535)!=P[T];)P[T+1]+=P[T]>>>16,P[T]&=65535,T++}function W(P,T){this.g=P,this.h=T}function K(P,T){if(D(T))throw Error("division by zero");if(D(P))return new W(p,p);if(M(P))return T=K(k(P),T),new W(k(T.g),k(T.h));if(M(T))return T=K(P,k(T)),new W(k(T.g),T.h);if(30<P.g.length){if(M(P)||M(T))throw Error("slowDivide_ only works with positive integers.");for(var w=y,x=T;0>=x.l(P);)w=ue(w),x=ue(x);var _=fe(w,1),S=fe(x,1);for(x=fe(x,2),w=fe(w,2);!D(x);){var I=S.add(x);0>=I.l(P)&&(_=_.add(w),S=I),x=fe(x,1),w=fe(w,1)}return T=O(P,_.j(T)),new W(_,T)}for(_=p;0<=P.l(T);){for(w=Math.max(1,Math.floor(P.m()/T.m())),x=Math.ceil(Math.log(w)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),S=u(w),I=S.j(T);M(I)||0<I.l(P);)w-=x,S=u(w),I=S.j(T);D(S)&&(S=y),_=_.add(S),P=O(P,I)}return new W(_,P)}n.A=function(P){return K(this,P).h},n.and=function(P){for(var T=Math.max(this.g.length,P.g.length),w=[],x=0;x<T;x++)w[x]=this.i(x)&P.i(x);return new o(w,this.h&P.h)},n.or=function(P){for(var T=Math.max(this.g.length,P.g.length),w=[],x=0;x<T;x++)w[x]=this.i(x)|P.i(x);return new o(w,this.h|P.h)},n.xor=function(P){for(var T=Math.max(this.g.length,P.g.length),w=[],x=0;x<T;x++)w[x]=this.i(x)^P.i(x);return new o(w,this.h^P.h)};function ue(P){for(var T=P.g.length+1,w=[],x=0;x<T;x++)w[x]=P.i(x)<<1|P.i(x-1)>>>31;return new o(w,P.h)}function fe(P,T){var w=T>>5;T%=32;for(var x=P.g.length-w,_=[],S=0;S<x;S++)_[S]=0<T?P.i(S+w)>>>T|P.i(S+w+1)<<32-T:P.i(S+w);return new o(_,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,p5=F9.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=l,il=F9.Integer=o}).apply(typeof L9<"u"?L9:typeof self<"u"?self:typeof window<"u"?window:{});var eI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sl={};var g5,dhe,bg,m5,e_,tI,y5,v5,_5;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,b,N){return d==Array.prototype||d==Object.prototype||(d[b]=N.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof eI=="object"&&eI];for(var b=0;b<d.length;++b){var N=d[b];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var r=t(this);function i(d,b){if(b)e:{var N=r;d=d.split(".");for(var U=0;U<d.length-1;U++){var ie=d[U];if(!(ie in N))break e;N=N[ie]}d=d[d.length-1],U=N[d],b=b(U),b!=U&&b!=null&&e(N,d,{configurable:!0,writable:!0,value:b})}}function s(d,b){d instanceof String&&(d+="");var N=0,U=!1,ie={next:function(){if(!U&&N<d.length){var ve=N++;return{value:b(ve,d[ve]),done:!1}}return U=!0,{done:!0,value:void 0}}};return ie[Symbol.iterator]=function(){return ie},ie}i("Array.prototype.values",function(d){return d||function(){return s(this,function(b,N){return N})}});var o=o||{},a=this||self;function c(d){var b=typeof d;return b=b!="object"?b:d?Array.isArray(d)?"array":b:"null",b=="array"||b=="object"&&typeof d.length=="number"}function u(d){var b=typeof d;return b=="object"&&d!=null||b=="function"}function l(d,b,N){return d.call.apply(d.bind,arguments)}function p(d,b,N){if(!d)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var ie=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ie,U),d.apply(b,ie)}}return function(){return d.apply(b,arguments)}}function y(d,b,N){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?l:p,y.apply(null,arguments)}function g(d,b){var N=Array.prototype.slice.call(arguments,1);return function(){var U=N.slice();return U.push.apply(U,arguments),d.apply(this,U)}}function D(d,b){function N(){}N.prototype=b.prototype,d.aa=b.prototype,d.prototype=new N,d.prototype.constructor=d,d.Qb=function(U,ie,ve){for(var qe=Array(arguments.length-2),pn=2;pn<arguments.length;pn++)qe[pn-2]=arguments[pn];return b.prototype[ie].apply(U,qe)}}function M(d){let b=d.length;if(0<b){let N=Array(b);for(let U=0;U<b;U++)N[U]=d[U];return N}return[]}function k(d,b){for(let N=1;N<arguments.length;N++){let U=arguments[N];if(c(U)){let ie=d.length||0,ve=U.length||0;d.length=ie+ve;for(let qe=0;qe<ve;qe++)d[ie+qe]=U[qe]}else d.push(U)}}class O{constructor(b,N){this.i=b,this.j=N,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function G(d){return/^[\s\xa0]*$/.test(d)}function W(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function K(d){return K[" "](d),d}K[" "]=function(){};var ue=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function fe(d,b,N){for(let U in d)b.call(N,d[U],U,d)}function P(d,b){for(let N in d)b.call(void 0,d[N],N,d)}function T(d){let b={};for(let N in d)b[N]=d[N];return b}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(d,b){let N,U;for(let ie=1;ie<arguments.length;ie++){U=arguments[ie];for(N in U)d[N]=U[N];for(let ve=0;ve<w.length;ve++)N=w[ve],Object.prototype.hasOwnProperty.call(U,N)&&(d[N]=U[N])}}function _(d){var b=1;d=d.split(":");let N=[];for(;0<b&&d.length;)N.push(d.shift()),b--;return d.length&&N.push(d.join(":")),N}function S(d){a.setTimeout(()=>{throw d},0)}function I(){var d=Te;let b=null;return d.g&&(b=d.g,d.g=d.g.next,d.g||(d.h=null),b.next=null),b}class ee{constructor(){this.h=this.g=null}add(b,N){let U=ye.get();U.set(b,N),this.h?this.h.next=U:this.g=U,this.h=U}}var ye=new O(()=>new Se,d=>d.reset());class Se{constructor(){this.next=this.g=this.h=null}set(b,N){this.h=b,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let Ie,he=!1,Te=new ee,He=()=>{let d=a.Promise.resolve(void 0);Ie=()=>{d.then(Oe)}};var Oe=()=>{for(var d;d=I();){try{d.h.call(d.g)}catch(N){S(N)}var b=ye;b.j(d),100>b.h&&(b.h++,d.next=b.g,b.g=d)}he=!1};function B(){this.s=this.s,this.C=this.C}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(d,b){this.type=d,this.g=this.target=b,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var X=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,b=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let N=()=>{};a.addEventListener("test",N,b),a.removeEventListener("test",N,b)}catch{}return d})();function ne(d,b){if(Y.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var N=this.type=d.type,U=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=b,b=d.relatedTarget){if(ue){e:{try{K(b.nodeName);var ie=!0;break e}catch{}ie=!1}ie||(b=null)}}else N=="mouseover"?b=d.fromElement:N=="mouseout"&&(b=d.toElement);this.relatedTarget=b,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:oe[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&ne.aa.h.call(this)}}D(ne,Y);var oe={2:"touch",3:"pen",4:"mouse"};ne.prototype.h=function(){ne.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),be=0;function Ee(d,b,N,U,ie){this.listener=d,this.proxy=null,this.src=b,this.type=N,this.capture=!!U,this.ha=ie,this.key=++be,this.da=this.fa=!1}function De(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Be(d){this.src=d,this.g={},this.h=0}Be.prototype.add=function(d,b,N,U,ie){var ve=d.toString();d=this.g[ve],d||(d=this.g[ve]=[],this.h++);var qe=Ye(d,b,U,ie);return-1<qe?(b=d[qe],N||(b.fa=!1)):(b=new Ee(b,this.src,ve,!!U,ie),b.fa=N,d.push(b)),b};function Xe(d,b){var N=b.type;if(N in d.g){var U=d.g[N],ie=Array.prototype.indexOf.call(U,b,void 0),ve;(ve=0<=ie)&&Array.prototype.splice.call(U,ie,1),ve&&(De(b),d.g[N].length==0&&(delete d.g[N],d.h--))}}function Ye(d,b,N,U){for(var ie=0;ie<d.length;++ie){var ve=d[ie];if(!ve.da&&ve.listener==b&&ve.capture==!!N&&ve.ha==U)return ie}return-1}var dt="closure_lm_"+(1e6*Math.random()|0),H={};function Je(d,b,N,U,ie){if(U&&U.once)return Fe(d,b,N,U,ie);if(Array.isArray(b)){for(var ve=0;ve<b.length;ve++)Je(d,b[ve],N,U,ie);return null}return N=Rt(N),d&&d[le]?d.K(b,N,u(U)?!!U.capture:!!U,ie):qt(d,b,N,!1,U,ie)}function qt(d,b,N,U,ie,ve){if(!b)throw Error("Invalid event type");var qe=u(ie)?!!ie.capture:!!ie,pn=gn(d);if(pn||(d[dt]=pn=new Be(d)),N=pn.add(b,N,U,qe,ve),N.proxy)return N;if(U=At(),N.proxy=U,U.src=d,U.listener=N,d.addEventListener)X||(ie=qe),ie===void 0&&(ie=!1),d.addEventListener(b.toString(),U,ie);else if(d.attachEvent)d.attachEvent(vt(b.toString()),U);else if(d.addListener&&d.removeListener)d.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return N}function At(){function d(N){return b.call(d.src,d.listener,N)}let b=Et;return d}function Fe(d,b,N,U,ie){if(Array.isArray(b)){for(var ve=0;ve<b.length;ve++)Fe(d,b[ve],N,U,ie);return null}return N=Rt(N),d&&d[le]?d.L(b,N,u(U)?!!U.capture:!!U,ie):qt(d,b,N,!0,U,ie)}function tt(d,b,N,U,ie){if(Array.isArray(b))for(var ve=0;ve<b.length;ve++)tt(d,b[ve],N,U,ie);else U=u(U)?!!U.capture:!!U,N=Rt(N),d&&d[le]?(d=d.i,b=String(b).toString(),b in d.g&&(ve=d.g[b],N=Ye(ve,N,U,ie),-1<N&&(De(ve[N]),Array.prototype.splice.call(ve,N,1),ve.length==0&&(delete d.g[b],d.h--)))):d&&(d=gn(d))&&(b=d.g[b.toString()],d=-1,b&&(d=Ye(b,N,U,ie)),(N=-1<d?b[d]:null)&&Ke(N))}function Ke(d){if(typeof d!="number"&&d&&!d.da){var b=d.src;if(b&&b[le])Xe(b.i,d);else{var N=d.type,U=d.proxy;b.removeEventListener?b.removeEventListener(N,U,d.capture):b.detachEvent?b.detachEvent(vt(N),U):b.addListener&&b.removeListener&&b.removeListener(U),(N=gn(b))?(Xe(N,d),N.h==0&&(N.src=null,b[dt]=null)):De(d)}}}function vt(d){return d in H?H[d]:H[d]="on"+d}function Et(d,b){if(d.da)d=!0;else{b=new ne(b,this);var N=d.listener,U=d.ha||d.src;d.fa&&Ke(d),d=N.call(U,b)}return d}function gn(d){return d=d[dt],d instanceof Be?d:null}var on="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rt(d){return typeof d=="function"?d:(d[on]||(d[on]=function(b){return d.handleEvent(b)}),d[on])}function St(){B.call(this),this.i=new Be(this),this.M=this,this.F=null}D(St,B),St.prototype[le]=!0,St.prototype.removeEventListener=function(d,b,N,U){tt(this,d,b,N,U)};function Ct(d,b){var N,U=d.F;if(U)for(N=[];U;U=U.F)N.push(U);if(d=d.M,U=b.type||b,typeof b=="string")b=new Y(b,d);else if(b instanceof Y)b.target=b.target||d;else{var ie=b;b=new Y(U,d),x(b,ie)}if(ie=!0,N)for(var ve=N.length-1;0<=ve;ve--){var qe=b.g=N[ve];ie=st(qe,U,!0,b)&&ie}if(qe=b.g=d,ie=st(qe,U,!0,b)&&ie,ie=st(qe,U,!1,b)&&ie,N)for(ve=0;ve<N.length;ve++)qe=b.g=N[ve],ie=st(qe,U,!1,b)&&ie}St.prototype.N=function(){if(St.aa.N.call(this),this.i){var d=this.i,b;for(b in d.g){for(var N=d.g[b],U=0;U<N.length;U++)De(N[U]);delete d.g[b],d.h--}}this.F=null},St.prototype.K=function(d,b,N,U){return this.i.add(String(d),b,!1,N,U)},St.prototype.L=function(d,b,N,U){return this.i.add(String(d),b,!0,N,U)};function st(d,b,N,U){if(b=d.i.g[String(b)],!b)return!0;b=b.concat();for(var ie=!0,ve=0;ve<b.length;++ve){var qe=b[ve];if(qe&&!qe.da&&qe.capture==N){var pn=qe.listener,lr=qe.ha||qe.src;qe.fa&&Xe(d.i,qe),ie=pn.call(lr,U)!==!1&&ie}}return ie&&!U.defaultPrevented}function zt(d,b,N){if(typeof d=="function")N&&(d=y(d,N));else if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:a.setTimeout(d,b||0)}function pt(d){d.g=zt(()=>{d.g=null,d.i&&(d.i=!1,pt(d))},d.l);let b=d.h;d.h=null,d.m.apply(null,b)}class pr extends B{constructor(b,N){super(),this.m=b,this.l=N,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:pt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function an(d){B.call(this),this.h=d,this.g={}}D(an,B);var jt=[];function Kt(d){fe(d.g,function(b,N){this.g.hasOwnProperty(N)&&Ke(b)},d),d.g={}}an.prototype.N=function(){an.aa.N.call(this),Kt(this)},an.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bn=a.JSON.stringify,ht=a.JSON.parse,Un=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function It(){}It.prototype.h=null;function Vt(d){return d.h||(d.h=d.i())}function Ln(){}var $t={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nt(){Y.call(this,"d")}D(nt,Y);function mn(){Y.call(this,"c")}D(mn,Y);var Gr={},_r=null;function hs(){return _r=_r||new St}Gr.La="serverreachability";function Ls(d){Y.call(this,Gr.La,d)}D(Ls,Y);function ft(d){let b=hs();Ct(b,new Ls(b))}Gr.STAT_EVENT="statevent";function ro(d,b){Y.call(this,Gr.STAT_EVENT,d),this.stat=b}D(ro,Y);function cr(d){let b=hs();Ct(b,new ro(b,d))}Gr.Ma="timingevent";function oi(d,b){Y.call(this,Gr.Ma,d),this.size=b}D(oi,Y);function Wr(d,b){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},b)}function qn(){this.g=!0}qn.prototype.xa=function(){this.g=!1};function Er(d,b,N,U,ie,ve){d.info(function(){if(d.g)if(ve)for(var qe="",pn=ve.split("&"),lr=0;lr<pn.length;lr++){var Ut=pn[lr].split("=");if(1<Ut.length){var gr=Ut[0];Ut=Ut[1];var Mr=gr.split("_");qe=2<=Mr.length&&Mr[1]=="type"?qe+(gr+"="+Ut+"&"):qe+(gr+"=redacted&")}}else qe=null;else qe=ve;return"XMLHTTP REQ ("+U+") [attempt "+ie+"]: "+b+`
`+N+`
`+qe})}function wr(d,b,N,U,ie,ve,qe){d.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+ie+"]: "+b+`
`+N+`
`+ve+" "+qe})}function fs(d,b,N,U){d.info(function(){return"XMLHTTP TEXT ("+b+"): "+ps(d,N)+(U?" "+U:"")})}function Si(d,b){d.info(function(){return"TIMEOUT: "+b})}qn.prototype.info=function(){};function ps(d,b){if(!d.g)return b;if(!b)return null;try{var N=JSON.parse(b);if(N){for(d=0;d<N.length;d++)if(Array.isArray(N[d])){var U=N[d];if(!(2>U.length)){var ie=U[1];if(Array.isArray(ie)&&!(1>ie.length)){var ve=ie[0];if(ve!="noop"&&ve!="stop"&&ve!="close")for(var qe=1;qe<ie.length;qe++)ie[qe]=""}}}}return Bn(N)}catch{return b}}var ji={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ui={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ci;function ai(){}D(ai,It),ai.prototype.g=function(){return new XMLHttpRequest},ai.prototype.i=function(){return{}},Ci=new ai;function qi(d,b,N,U){this.j=d,this.i=b,this.l=N,this.R=U||1,this.U=new an(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gs}function gs(){this.i=null,this.g="",this.h=!1}var Xo={},Fs={};function wo(d,b,N){d.L=1,d.v=La(vs(b)),d.m=N,d.P=!0,bo(d,null)}function bo(d,b){d.F=Date.now(),Eo(d),d.A=vs(d.v);var N=d.A,U=d.R;Array.isArray(U)||(U=[String(U)]),Ot(N.i,"t",U),d.C=0,N=d.j.J,d.h=new gs,d.g=A(d.j,N?b:null,!d.m),0<d.O&&(d.M=new pr(y(d.Y,d,d.g),d.O)),b=d.U,N=d.g,U=d.ca;var ie="readystatechange";Array.isArray(ie)||(ie&&(jt[0]=ie.toString()),ie=jt);for(var ve=0;ve<ie.length;ve++){var qe=Je(N,ie[ve],U||b.handleEvent,!1,b.h||b);if(!qe)break;b.g[qe.key]=qe}b=d.H?T(d.H):{},d.m?(d.u||(d.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,b)):(d.u="GET",d.g.ea(d.A,d.u,null,b)),ft(),Er(d.i,d.u,d.A,d.l,d.R,d.m)}qi.prototype.ca=function(d){d=d.target;let b=this.M;b&&xi(d)==3?b.j():this.Y(d)},qi.prototype.Y=function(d){try{if(d==this.g)e:{let Mr=xi(this.g);var b=this.g.Ba();let Ba=this.g.Z();if(!(3>Mr)&&(Mr!=3||this.g&&(this.h.h||this.g.oa()||vu(this.g)))){this.J||Mr!=4||b==7||(b==8||0>=Ba?ft(3):ft(2)),Di(this);var N=this.g.Z();this.X=N;t:if(ea(this)){var U=vu(this.g);d="";var ie=U.length,ve=xi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Bs(this),io(this);var qe="";break t}this.h.i=new a.TextDecoder}for(b=0;b<ie;b++)this.h.h=!0,d+=this.h.i.decode(U[b],{stream:!(ve&&b==ie-1)});U.length=0,this.h.g+=d,this.C=0,qe=this.h.g}else qe=this.g.oa();if(this.o=N==200,wr(this.i,this.u,this.A,this.l,this.R,Mr,N),this.o){if(this.T&&!this.K){t:{if(this.g){var pn,lr=this.g;if((pn=lr.g?lr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(pn)){var Ut=pn;break t}}Ut=null}if(N=Ut)fs(this.i,this.l,N,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Io(this,N);else{this.o=!1,this.s=3,cr(12),Bs(this),io(this);break e}}if(this.P){N=!0;let Tr;for(;!this.J&&this.C<qe.length;)if(Tr=Vs(this,qe),Tr==Fs){Mr==4&&(this.s=4,cr(14),N=!1),fs(this.i,this.l,null,"[Incomplete Response]");break}else if(Tr==Xo){this.s=4,cr(15),fs(this.i,this.l,qe,"[Invalid Chunk]"),N=!1;break}else fs(this.i,this.l,Tr,null),Io(this,Tr);if(ea(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mr!=4||qe.length!=0||this.h.h||(this.s=1,cr(16),N=!1),this.o=this.o&&N,!N)fs(this.i,this.l,qe,"[Invalid Chunked Response]"),Bs(this),io(this);else if(0<qe.length&&!this.W){this.W=!0;var gr=this.j;gr.g==this&&gr.ba&&!gr.M&&(gr.j.info("Great, no buffering proxy detected. Bytes received: "+qe.length),ct(gr),gr.M=!0,cr(11))}}else fs(this.i,this.l,qe,null),Io(this,qe);Mr==4&&Bs(this),this.o&&!this.J&&(Mr==4?Lt(this.j,this):(this.o=!1,Eo(this)))}else ao(this.g),N==400&&0<qe.indexOf("Unknown SID")?(this.s=3,cr(12)):(this.s=0,cr(13)),Bs(this),io(this)}}}catch{}finally{}};function ea(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Vs(d,b){var N=d.C,U=b.indexOf(`
`,N);return U==-1?Fs:(N=Number(b.substring(N,U)),isNaN(N)?Xo:(U+=1,U+N>b.length?Fs:(b=b.slice(U,U+N),d.C=U+N,b)))}qi.prototype.cancel=function(){this.J=!0,Bs(this)};function Eo(d){d.S=Date.now()+d.I,hu(d,d.I)}function hu(d,b){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Wr(y(d.ba,d),b)}function Di(d){d.B&&(a.clearTimeout(d.B),d.B=null)}qi.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(Si(this.i,this.A),this.L!=2&&(ft(),cr(17)),Bs(this),this.s=2,io(this)):hu(this,this.S-d)};function io(d){d.j.G==0||d.J||Lt(d.j,d)}function Bs(d){Di(d);var b=d.M;b&&typeof b.ma=="function"&&b.ma(),d.M=null,Kt(d.U),d.g&&(b=d.g,d.g=null,b.abort(),b.ma())}function Io(d,b){try{var N=d.j;if(N.G!=0&&(N.g==d||ta(N.h,d))){if(!d.K&&ta(N.h,d)&&N.G==3){try{var U=N.Da.g.parse(b)}catch{U=null}if(Array.isArray(U)&&U.length==3){var ie=U;if(ie[0]==0){e:if(!N.u){if(N.g)if(N.g.F+3e3<d.F)Mt(N),So(N);else break e;rt(N),cr(18)}}else N.za=ie[1],0<N.za-N.T&&37500>ie[2]&&N.F&&N.v==0&&!N.C&&(N.C=Wr(y(N.Za,N),6e3));if(1>=ms(N.h)&&N.ca){try{N.ca()}catch{}N.ca=void 0}}else zn(N,11)}else if((d.K||N.g==d)&&Mt(N),!G(b))for(ie=N.Da.g.parse(b),b=0;b<ie.length;b++){let Ut=ie[b];if(N.T=Ut[0],Ut=Ut[1],N.G==2)if(Ut[0]=="c"){N.K=Ut[1],N.ia=Ut[2];let gr=Ut[3];gr!=null&&(N.la=gr,N.j.info("VER="+N.la));let Mr=Ut[4];Mr!=null&&(N.Aa=Mr,N.j.info("SVER="+N.Aa));let Ba=Ut[5];Ba!=null&&typeof Ba=="number"&&0<Ba&&(U=1.5*Ba,N.L=U,N.j.info("backChannelRequestTimeoutMs_="+U)),U=N;let Tr=d.g;if(Tr){let ca=Tr.g?Tr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ca){var ve=U.h;ve.g||ca.indexOf("spdy")==-1&&ca.indexOf("quic")==-1&&ca.indexOf("h2")==-1||(ve.j=ve.l,ve.g=new Set,ve.h&&(ys(ve,ve.h),ve.h=null))}if(U.D){let _u=Tr.g?Tr.g.getResponseHeader("X-HTTP-Session-Id"):null;_u&&(U.ya=_u,jn(U.I,U.D,_u))}}N.G=3,N.l&&N.l.ua(),N.ba&&(N.R=Date.now()-d.F,N.j.info("Handshake RTT: "+N.R+"ms")),U=N;var qe=d;if(U.qa=f(U,U.J?U.ia:null,U.W),qe.K){xn(U.h,qe);var pn=qe,lr=U.L;lr&&(pn.I=lr),pn.B&&(Di(pn),Eo(pn)),U.g=qe}else Me(U);0<N.i.length&&L(N)}else Ut[0]!="stop"&&Ut[0]!="close"||zn(N,7);else N.G==3&&(Ut[0]=="stop"||Ut[0]=="close"?Ut[0]=="stop"?zn(N,7):co(N):Ut[0]!="noop"&&N.l&&N.l.ta(Ut),N.v=0)}}ft(4)}catch{}}var _c=class{constructor(d,b){this.g=d,this.map=b}};function wc(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bc(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ms(d){return d.h?1:d.g?d.g.size:0}function ta(d,b){return d.h?d.h==b:d.g?d.g.has(b):!1}function ys(d,b){d.g?d.g.add(b):d.h=b}function xn(d,b){d.h&&d.h==b?d.h=null:d.g&&d.g.has(b)&&d.g.delete(b)}wc.prototype.cancel=function(){if(this.i=To(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function To(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let b=d.i;for(let N of d.g.values())b=b.concat(N.D);return b}return M(d.i)}function zi(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var b=[],N=d.length,U=0;U<N;U++)b.push(d[U]);return b}b=[],N=0;for(U in d)b[N++]=d[U];return b}function na(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var b=[];d=d.length;for(var N=0;N<d;N++)b.push(N);return b}b=[],N=0;for(let U in d)b[N++]=U;return b}}}function Fn(d,b){if(d.forEach&&typeof d.forEach=="function")d.forEach(b,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,b,void 0);else for(var N=na(d),U=zi(d),ie=U.length,ve=0;ve<ie;ve++)b.call(void 0,U[ve],N&&N[ve],d)}var ci=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ur(d,b){if(d){d=d.split("&");for(var N=0;N<d.length;N++){var U=d[N].indexOf("="),ie=null;if(0<=U){var ve=d[N].substring(0,U);ie=d[N].substring(U+1)}else ve=d[N];b(ve,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function kr(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof kr){this.h=d.h,Oa(this,d.j),this.o=d.o,this.g=d.g,Ec(this,d.s),this.l=d.l;var b=d.i,N=new Fa;N.i=b.i,b.g&&(N.g=new Map(b.g),N.h=b.h),js(this,N),this.m=d.m}else d&&(b=String(d).match(ci))?(this.h=!1,Oa(this,b[1]||"",!0),this.o=$i(b[2]||""),this.g=$i(b[3]||"",!0),Ec(this,b[4]),this.l=$i(b[5]||"",!0),js(this,b[6]||"",!0),this.m=$i(b[7]||"")):(this.h=!1,this.i=new Fa(null,this.h))}kr.prototype.toString=function(){var d=[],b=this.j;b&&d.push(Kr(b,fu,!0),":");var N=this.g;return(N||b=="file")&&(d.push("//"),(b=this.o)&&d.push(Kr(b,fu,!0),"@"),d.push(encodeURIComponent(String(N)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.s,N!=null&&d.push(":",String(N))),(N=this.l)&&(this.g&&N.charAt(0)!="/"&&d.push("/"),d.push(Kr(N,N.charAt(0)=="/"?Ic:fl,!0))),(N=this.i.toString())&&d.push("?",N),(N=this.m)&&d.push("#",Kr(N,ui)),d.join("")};function vs(d){return new kr(d)}function Oa(d,b,N){d.j=N?$i(b,!0):b,d.j&&(d.j=d.j.replace(/:$/,""))}function Ec(d,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);d.s=b}else d.s=null}function js(d,b,N){b instanceof Fa?(d.i=b,Ac(d.i,d.h)):(N||(b=Kr(b,pu)),d.i=new Fa(b,d.h))}function jn(d,b,N){d.i.set(b,N)}function La(d){return jn(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function $i(d,b){return d?b?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Kr(d,b,N){return typeof d=="string"?(d=encodeURI(d).replace(b,hl),N&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function hl(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var fu=/[#\/\?@]/g,fl=/[#\?:]/g,Ic=/[#\?]/g,pu=/[#\?@]/g,ui=/#/g;function Fa(d,b){this.h=this.g=null,this.i=d||null,this.j=!!b}function Hi(d){d.g||(d.g=new Map,d.h=0,d.i&&ur(d.i,function(b,N){d.add(decodeURIComponent(b.replace(/\+/g," ")),N)}))}n=Fa.prototype,n.add=function(d,b){Hi(this),this.i=null,d=qs(this,d);var N=this.g.get(d);return N||this.g.set(d,N=[]),N.push(b),this.h+=1,this};function Tc(d,b){Hi(d),b=qs(d,b),d.g.has(b)&&(d.i=null,d.h-=d.g.get(b).length,d.g.delete(b))}function Us(d,b){return Hi(d),b=qs(d,b),d.g.has(b)}n.forEach=function(d,b){Hi(this),this.g.forEach(function(N,U){N.forEach(function(ie){d.call(b,ie,U,this)},this)},this)},n.na=function(){Hi(this);let d=Array.from(this.g.values()),b=Array.from(this.g.keys()),N=[];for(let U=0;U<b.length;U++){let ie=d[U];for(let ve=0;ve<ie.length;ve++)N.push(b[U])}return N},n.V=function(d){Hi(this);let b=[];if(typeof d=="string")Us(this,d)&&(b=b.concat(this.g.get(qs(this,d))));else{d=Array.from(this.g.values());for(let N=0;N<d.length;N++)b=b.concat(d[N])}return b},n.set=function(d,b){return Hi(this),this.i=null,d=qs(this,d),Us(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[b]),this.h+=1,this},n.get=function(d,b){return d?(d=this.V(d),0<d.length?String(d[0]):b):b};function Ot(d,b,N){Tc(d,b),0<N.length&&(d.i=null,d.g.set(qs(d,b),M(N)),d.h+=N.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],b=Array.from(this.g.keys());for(var N=0;N<b.length;N++){var U=b[N];let ve=encodeURIComponent(String(U)),qe=this.V(U);for(U=0;U<qe.length;U++){var ie=ve;qe[U]!==""&&(ie+="="+encodeURIComponent(String(qe[U]))),d.push(ie)}}return this.i=d.join("&")};function qs(d,b){return b=String(b),d.j&&(b=b.toLowerCase()),b}function Ac(d,b){b&&!d.j&&(Hi(d),d.i=null,d.g.forEach(function(N,U){var ie=U.toLowerCase();U!=ie&&(Tc(this,U),Ot(this,ie,N))},d)),d.j=b}function pl(d,b){let N=new qn;if(a.Image){let U=new Image;U.onload=g(Ir,N,"TestLoadImage: loaded",!0,b,U),U.onerror=g(Ir,N,"TestLoadImage: error",!1,b,U),U.onabort=g(Ir,N,"TestLoadImage: abort",!1,b,U),U.ontimeout=g(Ir,N,"TestLoadImage: timeout",!1,b,U),a.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=d}else b(!1)}function rs(d,b){let N=new qn,U=new AbortController,ie=setTimeout(()=>{U.abort(),Ir(N,"TestPingServer: timeout",!1,b)},1e4);fetch(d,{signal:U.signal}).then(ve=>{clearTimeout(ie),ve.ok?Ir(N,"TestPingServer: ok",!0,b):Ir(N,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(ie),Ir(N,"TestPingServer: error",!1,b)})}function Ir(d,b,N,U,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),U(N)}catch{}}function gl(){this.g=new Un}function gu(d,b,N){let U=N||"";try{Fn(d,function(ie,ve){let qe=ie;u(ie)&&(qe=Bn(ie)),b.push(U+ve+"="+encodeURIComponent(qe))})}catch(ie){throw b.push(U+"type="+encodeURIComponent("_badmap")),ie}}function Tn(d){this.l=d.Ub||null,this.j=d.eb||!1}D(Tn,It),Tn.prototype.g=function(){return new ra(this.l,this.j)},Tn.prototype.i=(function(d){return function(){return d}})({});function ra(d,b){St.call(this),this.D=d,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(ra,St),n=ra.prototype,n.open=function(d,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=b,this.readyState=1,Gi(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(b.body=d),(this.D||a).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sa(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Gi(this)),this.g&&(this.readyState=3,Gi(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ia(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function ia(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var b=d.value?d.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!d.done}))&&(this.response=this.responseText+=b)}d.done?sa(this):Gi(this),this.readyState==3&&ia(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,sa(this))},n.Qa=function(d){this.g&&(this.response=d,sa(this))},n.ga=function(){this.g&&sa(this)};function sa(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Gi(d)}n.setRequestHeader=function(d,b){this.u.append(d,b)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],b=this.h.entries();for(var N=b.next();!N.done;)N=N.value,d.push(N[0]+": "+N[1]),N=b.next();return d.join(`\r
`)};function Gi(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(ra.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function mu(d){let b="";return fe(d,function(N,U){b+=U,b+=":",b+=N,b+=`\r
`}),b}function so(d,b,N){e:{for(U in N){var U=!1;break e}U=!0}U||(N=mu(N),typeof d=="string"?N!=null&&encodeURIComponent(String(N)):jn(d,b,N))}function yn(d){St.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(yn,St);var yu=/^https?$/i,Ao=["POST","PUT"];n=yn.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,b,N,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);b=b?b.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ci.g(),this.v=this.o?Vt(this.o):Vt(Ci),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(b,String(d),!0),this.B=!1}catch(ve){oo(this,ve);return}if(d=N||"",N=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var ie in U)N.set(ie,U[ie]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(let ve of U.keys())N.set(ve,U.get(ve));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(N.keys()).find(ve=>ve.toLowerCase()=="content-type"),ie=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ao,b,void 0))||U||ie||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[ve,qe]of N)this.g.setRequestHeader(ve,qe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Va(this),this.u=!0,this.g.send(d),this.u=!1}catch(ve){oo(this,ve)}};function oo(d,b){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=b,d.m=5,oa(d),is(d)}function oa(d){d.A||(d.A=!0,Ct(d,"complete"),Ct(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Ct(this,"complete"),Ct(this,"abort"),is(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),is(this,!0)),yn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?aa(this):this.bb())},n.bb=function(){aa(this)};function aa(d){if(d.h&&typeof o<"u"&&(!d.v[1]||xi(d)!=4||d.Z()!=2)){if(d.u&&xi(d)==4)zt(d.Ea,0,d);else if(Ct(d,"readystatechange"),xi(d)==4){d.h=!1;try{let qe=d.Z();e:switch(qe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var N;if(!(N=b)){var U;if(U=qe===0){var ie=String(d.D).match(ci)[1]||null;!ie&&a.self&&a.self.location&&(ie=a.self.location.protocol.slice(0,-1)),U=!yu.test(ie?ie.toLowerCase():"")}N=U}if(N)Ct(d,"complete"),Ct(d,"success");else{d.m=6;try{var ve=2<xi(d)?d.g.statusText:""}catch{ve=""}d.l=ve+" ["+d.Z()+"]",oa(d)}}finally{is(d)}}}}function is(d,b){if(d.g){Va(d);let N=d.g,U=d.v[0]?()=>{}:null;d.g=null,d.v=null,b||Ct(d,"ready");try{N.onreadystatechange=U}catch{}}}function Va(d){d.I&&(a.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function xi(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<xi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var b=this.g.responseText;return d&&b.indexOf(d)==0&&(b=b.substring(d.length)),ht(b)}};function vu(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function ao(d){let b={};d=(d.g&&2<=xi(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<d.length;U++){if(G(d[U]))continue;var N=_(d[U]);let ie=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();let ve=b[ie]||[];b[ie]=ve,ve.push(N)}P(b,function(U){return U.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qr(d,b,N){return N&&N.internalChannelParams&&N.internalChannelParams[d]||b}function Sc(d){this.Aa=0,this.i=[],this.j=new qn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Qr("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Qr("baseRetryDelayMs",5e3,d),this.cb=Qr("retryDelaySeedMs",1e4,d),this.Wa=Qr("forwardChannelMaxRetries",2,d),this.wa=Qr("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new wc(d&&d.concurrentRequestLimit),this.Da=new gl,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Sc.prototype,n.la=8,n.G=1,n.connect=function(d,b,N,U){cr(0),this.W=d,this.H=b||{},N&&U!==void 0&&(this.H.OSID=N,this.H.OAID=U),this.F=this.X,this.I=f(this,null,this.W),L(this)};function co(d){if(v(d),d.G==3){var b=d.U++,N=vs(d.I);if(jn(N,"SID",d.K),jn(N,"RID",b),jn(N,"TYPE","terminate"),ce(d,N),b=new qi(d,d.j,b),b.L=2,b.v=La(vs(N)),N=!1,a.navigator&&a.navigator.sendBeacon)try{N=a.navigator.sendBeacon(b.v.toString(),"")}catch{}!N&&a.Image&&(new Image().src=b.v,N=!0),N||(b.g=A(b.j,null),b.g.ea(b.v)),b.F=Date.now(),Eo(b)}wn(d)}function So(d){d.g&&(ct(d),d.g.cancel(),d.g=null)}function v(d){So(d),d.u&&(a.clearTimeout(d.u),d.u=null),Mt(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function L(d){if(!bc(d.h)&&!d.s){d.s=!0;var b=d.Ga;Ie||He(),he||(Ie(),he=!0),Te.add(b,d),d.B=0}}function Q(d,b){return ms(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=b.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Wr(y(d.Ga,d,b),Xn(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let ie=new qi(this,this.j,d),ve=this.o;if(this.S&&(ve?(ve=T(ve),x(ve,this.S)):ve=this.S),this.m!==null||this.O||(ie.H=ve,ve=null),this.P)e:{for(var b=0,N=0;N<this.i.length;N++){t:{var U=this.i[N];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(b+=U,4096<b){b=N;break e}if(b===4096||N===this.i.length-1){b=N+1;break e}}b=1e3}else b=1e3;b=Ae(this,ie,b),N=vs(this.I),jn(N,"RID",d),jn(N,"CVER",22),this.D&&jn(N,"X-HTTP-Session-Id",this.D),ce(this,N),ve&&(this.O?b="headers="+encodeURIComponent(String(mu(ve)))+"&"+b:this.m&&so(N,this.m,ve)),ys(this.h,ie),this.Ua&&jn(N,"TYPE","init"),this.P?(jn(N,"$req",b),jn(N,"SID","null"),ie.T=!0,wo(ie,N,null)):wo(ie,N,b),this.G=2}}else this.G==3&&(d?te(this,d):this.i.length==0||bc(this.h)||te(this))};function te(d,b){var N;b?N=b.l:N=d.U++;let U=vs(d.I);jn(U,"SID",d.K),jn(U,"RID",N),jn(U,"AID",d.T),ce(d,U),d.m&&d.o&&so(U,d.m,d.o),N=new qi(d,d.j,N,d.B+1),d.m===null&&(N.H=d.o),b&&(d.i=b.D.concat(d.i)),b=Ae(d,N,1e3),N.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),ys(d.h,N),wo(N,U,b)}function ce(d,b){d.H&&fe(d.H,function(N,U){jn(b,U,N)}),d.l&&Fn({},function(N,U){jn(b,U,N)})}function Ae(d,b,N){N=Math.min(d.i.length,N);var U=d.l?y(d.l.Na,d.l,d):null;e:{var ie=d.i;let ve=-1;for(;;){let qe=["count="+N];ve==-1?0<N?(ve=ie[0].g,qe.push("ofs="+ve)):ve=0:qe.push("ofs="+ve);let pn=!0;for(let lr=0;lr<N;lr++){let Ut=ie[lr].g,gr=ie[lr].map;if(Ut-=ve,0>Ut)ve=Math.max(0,ie[lr].g-100),pn=!1;else try{gu(gr,qe,"req"+Ut+"_")}catch{U&&U(gr)}}if(pn){U=qe.join("&");break e}}}return d=d.i.splice(0,N),b.D=d,U}function Me(d){if(!d.g&&!d.u){d.Y=1;var b=d.Fa;Ie||He(),he||(Ie(),he=!0),Te.add(b,d),d.v=0}}function rt(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Wr(y(d.Fa,d),Xn(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,kt(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Wr(y(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,cr(10),So(this),kt(this))};function ct(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function kt(d){d.g=new qi(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var b=vs(d.qa);jn(b,"RID","rpc"),jn(b,"SID",d.K),jn(b,"AID",d.T),jn(b,"CI",d.F?"0":"1"),!d.F&&d.ja&&jn(b,"TO",d.ja),jn(b,"TYPE","xmlhttp"),ce(d,b),d.m&&d.o&&so(b,d.m,d.o),d.L&&(d.g.I=d.L);var N=d.g;d=d.ia,N.L=1,N.v=La(vs(b)),N.m=null,N.P=!0,bo(N,d)}n.Za=function(){this.C!=null&&(this.C=null,So(this),rt(this),cr(19))};function Mt(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function Lt(d,b){var N=null;if(d.g==b){Mt(d),ct(d),d.g=null;var U=2}else if(ta(d.h,b))N=b.D,xn(d.h,b),U=1;else return;if(d.G!=0){if(b.o)if(U==1){N=b.m?b.m.length:0,b=Date.now()-b.F;var ie=d.B;U=hs(),Ct(U,new oi(U,N)),L(d)}else Me(d);else if(ie=b.s,ie==3||ie==0&&0<b.X||!(U==1&&Q(d,b)||U==2&&rt(d)))switch(N&&0<N.length&&(b=d.h,b.i=b.i.concat(N)),ie){case 1:zn(d,5);break;case 4:zn(d,10);break;case 3:zn(d,6);break;default:zn(d,2)}}}function Xn(d,b){let N=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(N*=2),N*b}function zn(d,b){if(d.j.info("Error code "+b),b==2){var N=y(d.fb,d),U=d.Xa;let ie=!U;U=new kr(U||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Oa(U,"https"),La(U),ie?pl(U.toString(),N):rs(U.toString(),N)}else cr(2);d.G=0,d.l&&d.l.sa(b),wn(d),v(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),cr(2)):(this.j.info("Failed to ping google.com"),cr(1))};function wn(d){if(d.G=0,d.ka=[],d.l){let b=To(d.h);(b.length!=0||d.i.length!=0)&&(k(d.ka,b),k(d.ka,d.i),d.h.i.length=0,M(d.i),d.i.length=0),d.l.ra()}}function f(d,b,N){var U=N instanceof kr?vs(N):new kr(N);if(U.g!="")b&&(U.g=b+"."+U.g),Ec(U,U.s);else{var ie=a.location;U=ie.protocol,b=b?b+"."+ie.hostname:ie.hostname,ie=+ie.port;var ve=new kr(null);U&&Oa(ve,U),b&&(ve.g=b),ie&&Ec(ve,ie),N&&(ve.l=N),U=ve}return N=d.D,b=d.ya,N&&b&&jn(U,N,b),jn(U,"VER",d.la),ce(d,U),U}function A(d,b,N){if(b&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=d.Ca&&!d.pa?new yn(new Tn({eb:N})):new yn(d.pa),b.Ha(d.J),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function R(){}n=R.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function q(){}q.prototype.g=function(d,b){return new se(d,b)};function se(d,b){St.call(this),this.g=new Sc(b),this.l=d,this.h=b&&b.messageUrlParams||null,d=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(d?d["X-WebChannel-Content-Type"]=b.messageContentType:d={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(d?d["X-WebChannel-Client-Profile"]=b.va:d={"X-WebChannel-Client-Profile":b.va}),this.g.S=d,(d=b&&b.Sb)&&!G(d)&&(this.g.m=d),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!G(b)&&(this.g.D=b,d=this.h,d!==null&&b in d&&(d=this.h,b in d&&delete d[b])),this.j=new Dt(this)}D(se,St),se.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},se.prototype.close=function(){co(this.g)},se.prototype.o=function(d){var b=this.g;if(typeof d=="string"){var N={};N.__data__=d,d=N}else this.u&&(N={},N.__data__=Bn(d),d=N);b.i.push(new _c(b.Ya++,d)),b.G==3&&L(b)},se.prototype.N=function(){this.g.l=null,delete this.j,co(this.g),delete this.g,se.aa.N.call(this)};function ge(d){nt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var b=d.__sm__;if(b){e:{for(let N in b){d=N;break e}d=void 0}(this.i=d)&&(d=this.i,b=b!==null&&d in b?b[d]:void 0),this.data=b}else this.data=d}D(ge,nt);function Ge(){mn.call(this),this.status=1}D(Ge,mn);function Dt(d){this.g=d}D(Dt,R),Dt.prototype.ua=function(){Ct(this.g,"a")},Dt.prototype.ta=function(d){Ct(this.g,new ge(d))},Dt.prototype.sa=function(d){Ct(this.g,new Ge)},Dt.prototype.ra=function(){Ct(this.g,"b")},q.prototype.createWebChannel=q.prototype.g,se.prototype.send=se.prototype.o,se.prototype.open=se.prototype.m,se.prototype.close=se.prototype.close,_5=sl.createWebChannelTransport=function(){return new q},v5=sl.getStatEventTarget=function(){return hs()},y5=sl.Event=Gr,tI=sl.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ji.NO_ERROR=0,ji.TIMEOUT=8,ji.HTTP_ERROR=6,e_=sl.ErrorCode=ji,Ui.COMPLETE="complete",m5=sl.EventType=Ui,Ln.EventType=$t,$t.OPEN="a",$t.CLOSE="b",$t.ERROR="c",$t.MESSAGE="d",St.prototype.listen=St.prototype.K,bg=sl.WebChannel=Ln,dhe=sl.FetchXmlHttpFactory=Tn,yn.prototype.listenOnce=yn.prototype.L,yn.prototype.getLastError=yn.prototype.Ka,yn.prototype.getLastErrorCode=yn.prototype.Ba,yn.prototype.getStatus=yn.prototype.Z,yn.prototype.getResponseJson=yn.prototype.Oa,yn.prototype.getResponseText=yn.prototype.oa,yn.prototype.send=yn.prototype.ea,yn.prototype.setWithCredentials=yn.prototype.Ha,g5=sl.XhrIo=yn}).apply(typeof eI<"u"?eI:typeof self<"u"?self:typeof window<"u"?window:{});var V9="@firebase/firestore",B9="4.8.0";var ts=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ts.UNAUTHENTICATED=new ts(null),ts.GOOGLE_CREDENTIALS=new ts("google-credentials-uid"),ts.FIRST_PARTY=new ts("first-party-uid"),ts.MOCK_USER=new ts("mock-user");var zg="11.10.0";var cf=new su("@firebase/firestore");function Eg(){return cf.logLevel}function it(n,...e){if(cf.logLevel<=_n.DEBUG){let t=e.map(lk);cf.debug(`Firestore (${zg}): ${n}`,...t)}}function ol(n,...e){if(cf.logLevel<=_n.ERROR){let t=e.map(lk);cf.error(`Firestore (${zg}): ${n}`,...t)}}function Nd(n,...e){if(cf.logLevel<=_n.WARN){let t=e.map(lk);cf.warn(`Firestore (${zg}): ${n}`,...t)}}function lk(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Ft(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Nq(n,r,t)}function Nq(n,e,t){let r=`FIRESTORE (${zg}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ol(r),new Error(r)}function Zn(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Nq(e,i,r)}function en(n,e){return n}var ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},et=class extends ka{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var au=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var cI=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},T5=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ts.UNAUTHENTICATED))}shutdown(){}},A5=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},S5=class{constructor(e){this.t=e,this.currentUser=ts.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Zn(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new au;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new au,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{it("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(it("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new au)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(it("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Zn(typeof r.accessToken=="string",31837,{l:r}),new cI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Zn(e===null||typeof e=="string",2055,{h:e}),new ts(e)}},C5=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ts.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},D5=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new C5(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ts.FIRST_PARTY))}shutdown(){}invalidateToken(){}},uI=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},x5=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,rl(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Zn(this.o===void 0,3512);let r=s=>{s.error!=null&&it("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,it("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{it("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):it("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new uI(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Zn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new uI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function hhe(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function Rq(){return new TextEncoder}var o_=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=hhe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function fn(n,e){return n<e?-1:n>e?1:0}function N5(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return fn(r,i);{let s=Rq(),o=fhe(s.encode(j9(n,t)),s.encode(j9(e,t)));return o!==0?o:fn(r,i)}}t+=r>65535?2:1}return fn(n.length,e.length)}function j9(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function fhe(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return fn(n[t],e[t]);return fn(n.length,e.length)}function Pg(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var U9="__name__",lI=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ft(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ft(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return fn(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):N5(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return il.fromString(e.substring(4,e.length-2))}},Pr=class n extends lI{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new et(ke.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},phe=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Zo=class n extends lI{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return phe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===U9}static keyField(){return new n([U9])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new et(ke.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new et(ke.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new et(ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new et(ke.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Pt=class n{constructor(e){this.path=e}static fromPath(e){return new n(Pr.fromString(e))}static fromName(e){return new n(Pr.fromString(e).popFirst(5))}static empty(){return new n(Pr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Pr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Pr(e.slice()))}};function Pq(n,e,t){if(!t)throw new et(ke.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ghe(n,e,t,r){if(e===!0&&r===!0)throw new et(ke.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function q9(n){if(!Pt.isDocumentKey(n))throw new et(ke.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function z9(n){if(Pt.isDocumentKey(n))throw new et(ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function kq(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function jI(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ft(12329,{type:typeof n})}function a_(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new et(ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=jI(n);throw new et(ke.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Ti(n,e){let t={typeString:n};return e&&(t.value=e),t}function __(n,e){if(!kq(n))throw new et(ke.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new et(ke.INVALID_ARGUMENT,t);return!0}var $9=-62135596800,H9=1e6,Ai=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*H9);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new et(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new et(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<$9)throw new et(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new et(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/H9}_compareTo(e){return this.seconds===e.seconds?fn(this.nanoseconds,e.nanoseconds):fn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(__(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-$9;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ai._jsonSchemaVersion="firestore/timestamp/1.0",Ai._jsonSchema={type:Ti("string",Ai._jsonSchemaVersion),seconds:Ti("number"),nanoseconds:Ti("number")};var sn=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Ai(0,0))}static max(){return new n(new Ai(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var c_=-1,R5=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};R5.UNKNOWN_ID=-1;function mhe(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=sn.fromTimestamp(r===1e9?new Ai(t+1,0):new Ai(t,r));return new uf(i,Pt.empty(),e)}function yhe(n){return new uf(n.readTime,n.key,c_)}var uf=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(sn.min(),Pt.empty(),c_)}static max(){return new n(sn.max(),Pt.empty(),c_)}};function vhe(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Pt.comparator(n.documentKey,e.documentKey),t!==0?t:fn(n.largestBatchId,e.largestBatchId))}var _he="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",P5=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function $g(n){if(n.code!==ke.FAILED_PRECONDITION||n.message!==_he)throw n;it("LocalStore","Unexpectedly lost primary lease")}var Ue=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ft(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;t(e[u]).next(l=>{o[u]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function whe(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Hg(n){return n.name==="IndexedDbTransactionError"}var dk=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),hk=-1;function UI(n){return n==null}function u_(n){return n===0&&1/n==-1/0}function bhe(n){return typeof n=="number"&&Number.isInteger(n)&&!u_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Mq="";function Ehe(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=G9(e)),e=Ihe(n.get(t),e);return G9(e)}function Ihe(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case Mq:t+="";break;default:t+=s}}return t}function G9(n){return n+Mq+""}var The="remoteDocuments",Oq="owner";var Lq="mutationQueues";var Fq="mutations";var Vq="documentMutations",Ahe="remoteDocumentsV14";var Bq="remoteDocumentGlobal";var jq="targets";var Uq="targetDocuments";var qq="targetGlobal",zq="collectionParents";var $q="clientMetadata";var Hq="bundles";var Gq="namedQueries";var She="indexConfiguration";var Che="indexState";var Dhe="indexEntries";var Wq="documentOverlays";var xhe="globals";var Nhe=[Lq,Fq,Vq,The,jq,Oq,qq,Uq,$q,Bq,zq,Hq,Gq],ike=[...Nhe,Wq],Rhe=[Lq,Fq,Vq,Ahe,jq,Oq,qq,Uq,$q,Bq,zq,Hq,Gq,Wq],Phe=Rhe,khe=[...Phe,She,Che,Dhe];var ske=[...khe,xhe];function W9(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function mf(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Kq(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Hr=class n{constructor(e,t){this.comparator=e,this.root=t||cu.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,cu.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cu.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sg(this.root,e,this.comparator,!0)}},Sg=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},cu=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ft(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ft(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Ft(27949);return e+(this.isRed()?0:1)}};cu.EMPTY=null,cu.RED=!0,cu.BLACK=!1;cu.EMPTY=new class{constructor(){this.size=0}get key(){throw Ft(57766)}get value(){throw Ft(16141)}get color(){throw Ft(16727)}get left(){throw Ft(29726)}get right(){throw Ft(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new cu(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ns=class n{constructor(e){this.comparator=e,this.data=new Hr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dI(this.data.getIterator())}getIteratorFrom(e){return new dI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},dI=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var ou=class n{constructor(e){this.fields=e,e.sort(Zo.comparator)}static empty(){return new n([])}unionWith(e){let t=new ns(Zo.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Pg(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var hI=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Os=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new hI("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Os.EMPTY_BYTE_STRING=new Os("");var Mhe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function al(n){if(Zn(!!n,39018),typeof n=="string"){let e=0,t=Mhe.exec(n);if(Zn(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rr(n.seconds),nanos:Rr(n.nanos)}}function Rr(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function cl(n){return typeof n=="string"?Os.fromBase64String(n):Os.fromUint8Array(n)}var Qq="server_timestamp",Yq="__type__",Jq="__previous_value__",Zq="__local_write_time__";function fk(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Yq])===null||t===void 0?void 0:t.stringValue)===Qq}function qI(n){let e=n.mapValue.fields[Jq];return fk(e)?qI(e):e}function l_(n){let e=al(n.mapValue.fields[Zq].timestampValue);return new Ai(e.seconds,e.nanos)}var k5=class{constructor(e,t,r,i,s,o,a,c,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=l}},fI="(default)",pI=class n{constructor(e,t){this.projectId=e,this.database=t||fI}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===fI}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var pk="__type__",Xq="__max__",nI={mapValue:{fields:{__type__:{stringValue:Xq}}}},gk="__vector__",kg="value";function Rd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?fk(n)?4:tz(n)?9007199254740991:ez(n)?10:11:Ft(28295,{value:n})}function du(n,e){if(n===e)return!0;let t=Rd(n);if(t!==Rd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return l_(n).isEqual(l_(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=al(i.timestampValue),a=al(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return cl(i.bytesValue).isEqual(cl(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return Rr(i.geoPointValue.latitude)===Rr(s.geoPointValue.latitude)&&Rr(i.geoPointValue.longitude)===Rr(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Rr(i.integerValue)===Rr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Rr(i.doubleValue),a=Rr(s.doubleValue);return o===a?u_(o)===u_(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return Pg(n.arrayValue.values||[],e.arrayValue.values||[],du);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(W9(o)!==W9(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!du(o[c],a[c])))return!1;return!0})(n,e);default:return Ft(52216,{left:n})}}function d_(n,e){return(n.values||[]).find(t=>du(t,e))!==void 0}function Mg(n,e){if(n===e)return 0;let t=Rd(n),r=Rd(e);if(t!==r)return fn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return fn(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=Rr(s.integerValue||s.doubleValue),c=Rr(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return K9(n.timestampValue,e.timestampValue);case 4:return K9(l_(n),l_(e));case 5:return N5(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=cl(s),c=cl(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=fn(a[u],c[u]);if(l!==0)return l}return fn(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=fn(Rr(s.latitude),Rr(o.latitude));return a!==0?a:fn(Rr(s.longitude),Rr(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Q9(n.arrayValue,e.arrayValue);case 10:return(function(s,o){var a,c,u,l;let p=s.fields||{},y=o.fields||{},g=(a=p[kg])===null||a===void 0?void 0:a.arrayValue,D=(c=y[kg])===null||c===void 0?void 0:c.arrayValue,M=fn(((u=g?.values)===null||u===void 0?void 0:u.length)||0,((l=D?.values)===null||l===void 0?void 0:l.length)||0);return M!==0?M:Q9(g,D)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===nI.mapValue&&o===nI.mapValue)return 0;if(s===nI.mapValue)return 1;if(o===nI.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let p=0;p<c.length&&p<l.length;++p){let y=N5(c[p],l[p]);if(y!==0)return y;let g=Mg(a[c[p]],u[l[p]]);if(g!==0)return g}return fn(c.length,l.length)})(n.mapValue,e.mapValue);default:throw Ft(23264,{le:t})}}function K9(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return fn(n,e);let t=al(n),r=al(e),i=fn(t.seconds,r.seconds);return i!==0?i:fn(t.nanos,r.nanos)}function Q9(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Mg(t[i],r[i]);if(s)return s}return fn(t.length,r.length)}function Og(n){return M5(n)}function M5(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=al(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return cl(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Pt.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=M5(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${M5(t.fields[o])}`;return i+"}"})(n.mapValue):Ft(61005,{value:n})}function sI(n){switch(Rd(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=qI(n);return e?16+sI(e):16;case 5:return 2*n.stringValue.length;case 6:return cl(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+sI(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return mf(r.fields,(s,o)=>{i+=s.length+sI(o)}),i})(n.mapValue);default:throw Ft(13486,{value:n})}}function Y9(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function O5(n){return!!n&&"integerValue"in n}function mk(n){return!!n&&"arrayValue"in n}function J9(n){return!!n&&"nullValue"in n}function Z9(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function oI(n){return!!n&&"mapValue"in n}function ez(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[pk])===null||t===void 0?void 0:t.stringValue)===gk}function n_(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return mf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=n_(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=n_(n.arrayValue.values[t]);return e}return Object.assign({},n)}function tz(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Xq}var ake={mapValue:{fields:{[pk]:{stringValue:gk},[kg]:{arrayValue:{}}}}};var mc=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!oI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=n_(t)}setAll(e){let t=Zo.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=n_(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());oI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return du(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];oI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){mf(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(n_(this.value))}};function nz(n){let e=[];return mf(n.fields,(t,r)=>{let i=new Zo([t]);if(oI(r)){let s=nz(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new ou(e)}var yc=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,sn.min(),sn.min(),sn.min(),mc.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,sn.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,sn.min(),sn.min(),mc.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,sn.min(),sn.min(),mc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(sn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=sn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Lg=class{constructor(e,t){this.position=e,this.inclusive=t}};function X9(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Pt.comparator(Pt.fromName(o.referenceValue),t.key):r=Mg(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function eq(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!du(n.position[t],e.position[t]))return!1;return!0}var lf=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Ohe(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var gI=class{},Ii=class n extends gI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new F5(e,t,r):t==="array-contains"?new j5(e,r):t==="in"?new U5(e,r):t==="not-in"?new q5(e,r):t==="array-contains-any"?new z5(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new V5(e,r):new B5(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Mg(t,this.value)):t!==null&&Rd(this.value)===Rd(t)&&this.matchesComparison(Mg(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ft(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},vc=class n extends gI{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return rz(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function rz(n){return n.op==="and"}function iz(n){return Lhe(n)&&rz(n)}function Lhe(n){for(let e of n.filters)if(e instanceof vc)return!1;return!0}function L5(n){if(n instanceof Ii)return n.field.canonicalString()+n.op.toString()+Og(n.value);if(iz(n))return n.filters.map(e=>L5(e)).join(",");{let e=n.filters.map(t=>L5(t)).join(",");return`${n.op}(${e})`}}function sz(n,e){return n instanceof Ii?(function(r,i){return i instanceof Ii&&r.op===i.op&&r.field.isEqual(i.field)&&du(r.value,i.value)})(n,e):n instanceof vc?(function(r,i){return i instanceof vc&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&sz(o,i.filters[a]),!0):!1})(n,e):void Ft(19439)}function oz(n){return n instanceof Ii?(function(t){return`${t.field.canonicalString()} ${t.op} ${Og(t.value)}`})(n):n instanceof vc?(function(t){return t.op.toString()+" {"+t.getFilters().map(oz).join(" ,")+"}"})(n):"Filter"}var F5=class extends Ii{constructor(e,t,r){super(e,t,r),this.key=Pt.fromName(r.referenceValue)}matches(e){let t=Pt.comparator(e.key,this.key);return this.matchesComparison(t)}},V5=class extends Ii{constructor(e,t){super(e,"in",t),this.keys=az("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},B5=class extends Ii{constructor(e,t){super(e,"not-in",t),this.keys=az("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function az(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Pt.fromName(r.referenceValue))}var j5=class extends Ii{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return mk(t)&&d_(t.arrayValue,this.value)}},U5=class extends Ii{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&d_(this.value.arrayValue,t)}},q5=class extends Ii{constructor(e,t){super(e,"not-in",t)}matches(e){if(d_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!d_(this.value.arrayValue,t)}},z5=class extends Ii{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!mk(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>d_(this.value.arrayValue,r))}};var $5=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}};function tq(n,e=null,t=[],r=[],i=null,s=null,o=null){return new $5(n,e,t,r,i,s,o)}function yk(n){let e=en(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>L5(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),UI(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Og(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Og(r)).join(",")),e.Pe=t}return e.Pe}function vk(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Ohe(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!sz(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!eq(n.startAt,e.startAt)&&eq(n.endAt,e.endAt)}function H5(n){return Pt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Pd=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function Fhe(n,e,t,r,i,s,o,a){return new Pd(n,e,t,r,i,s,o,a)}function cz(n){return new Pd(n)}function nq(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function uz(n){return n.collectionGroup!==null}function r_(n){let e=en(n);if(e.Te===null){e.Te=[];let t=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ns(Zo.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new lf(s,r))}),t.has(Zo.keyField().canonicalString())||e.Te.push(new lf(Zo.keyField(),r))}return e.Te}function uu(n){let e=en(n);return e.Ie||(e.Ie=Vhe(e,r_(n))),e.Ie}function Vhe(n,e){if(n.limitType==="F")return tq(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new lf(i.field,s)});let t=n.endAt?new Lg(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Lg(n.startAt.position,n.startAt.inclusive):null;return tq(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function G5(n,e){let t=n.filters.concat([e]);return new Pd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function W5(n,e,t){return new Pd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zI(n,e){return vk(uu(n),uu(e))&&n.limitType===e.limitType}function lz(n){return`${yk(uu(n))}|lt:${n.limitType}`}function Ig(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>oz(i)).join(", ")}]`),UI(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Og(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Og(i)).join(",")),`Target(${r})`})(uu(n))}; limitType=${n.limitType})`}function $I(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Pt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of r_(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let u=X9(o,a,c);return o.inclusive?u<=0:u<0})(r.startAt,r_(r),i)||r.endAt&&!(function(o,a,c){let u=X9(o,a,c);return o.inclusive?u>=0:u>0})(r.endAt,r_(r),i))})(n,e)}function Bhe(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function dz(n){return(e,t)=>{let r=!1;for(let i of r_(n)){let s=jhe(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function jhe(n,e,t){let r=n.field.isKeyField()?Pt.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?Mg(c,u):Ft(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ft(19790,{direction:n.dir})}}var ul=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){mf(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Kq(this.inner)}size(){return this.innerSize}};var Uhe=new Hr(Pt.comparator);function ll(){return Uhe}var hz=new Hr(Pt.comparator);function t_(...n){let e=hz;for(let t of n)e=e.insert(t.key,t);return e}function fz(n){let e=hz;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function sf(){return i_()}function pz(){return i_()}function i_(){return new ul(n=>n.toString(),(n,e)=>n.isEqual(e))}var qhe=new Hr(Pt.comparator),zhe=new ns(Pt.comparator);function In(...n){let e=zhe;for(let t of n)e=e.add(t);return e}var $he=new ns(fn);function Hhe(){return $he}function _k(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:u_(e)?"-0":e}}function gz(n){return{integerValue:""+n}}function Ghe(n,e){return bhe(e)?gz(e):_k(n,e)}var Fg=class{constructor(){this._=void 0}};function Whe(n,e,t){return n instanceof Vg?(function(i,s){let o={fields:{[Yq]:{stringValue:Qq},[Zq]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&fk(s)&&(s=qI(s)),s&&(o.fields[Jq]=s),{mapValue:o}})(t,e):n instanceof df?yz(n,e):n instanceof hf?vz(n,e):(function(i,s){let o=mz(i,s),a=rq(o)+rq(i.Ee);return O5(o)&&O5(i.Ee)?gz(a):_k(i.serializer,a)})(n,e)}function Khe(n,e,t){return n instanceof df?yz(n,e):n instanceof hf?vz(n,e):t}function mz(n,e){return n instanceof Bg?(function(r){return O5(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var Vg=class extends Fg{},df=class extends Fg{constructor(e){super(),this.elements=e}};function yz(n,e){let t=_z(e);for(let r of n.elements)t.some(i=>du(i,r))||t.push(r);return{arrayValue:{values:t}}}var hf=class extends Fg{constructor(e){super(),this.elements=e}};function vz(n,e){let t=_z(e);for(let r of n.elements)t=t.filter(i=>!du(i,r));return{arrayValue:{values:t}}}var Bg=class extends Fg{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function rq(n){return Rr(n.integerValue||n.doubleValue)}function _z(n){return mk(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Qhe(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof df&&i instanceof df||r instanceof hf&&i instanceof hf?Pg(r.elements,i.elements,du):r instanceof Bg&&i instanceof Bg?du(r.Ee,i.Ee):r instanceof Vg&&i instanceof Vg})(n.transform,e.transform)}var K5=class{constructor(e,t){this.version=e,this.transformResults=t}},af=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function aI(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var jg=class{};function wz(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new mI(n.key,af.none()):new ff(n.key,n.data,af.none());{let t=n.data,r=mc.empty(),i=new ns(Zo.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new dl(n.key,r,new ou(i.toArray()),af.none())}}function Yhe(n,e,t){n instanceof ff?(function(i,s,o){let a=i.value.clone(),c=sq(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof dl?(function(i,s,o){if(!aI(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=sq(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(bz(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function s_(n,e,t,r){return n instanceof ff?(function(s,o,a,c){if(!aI(s.precondition,o))return a;let u=s.value.clone(),l=oq(s.fieldTransforms,c,o);return u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof dl?(function(s,o,a,c){if(!aI(s.precondition,o))return a;let u=oq(s.fieldTransforms,c,o),l=o.data;return l.setAll(bz(s)),l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(s,o,a){return aI(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function Jhe(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=mz(r.transform,i||null);s!=null&&(t===null&&(t=mc.empty()),t.set(r.field,s))}return t||null}function iq(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Pg(r,i,(s,o)=>Qhe(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ff=class extends jg{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},dl=class extends jg{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function bz(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function sq(n,e,t){let r=new Map;Zn(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Khe(o,a,t[i]))}return r}function oq(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,Whe(s,o,e))}return r}var mI=class extends jg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Q5=class extends jg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Y5=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Yhe(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=s_(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=s_(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=pz();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=wz(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(sn.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),In())}isEqual(e){return this.batchId===e.batchId&&Pg(this.mutations,e.mutations,(t,r)=>iq(t,r))&&Pg(this.baseMutations,e.baseMutations,(t,r)=>iq(t,r))}},J5=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Zn(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return qhe})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var Z5=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var X5=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var bi,On;function Zhe(n){switch(n){case ke.OK:return Ft(64938);case ke.CANCELLED:case ke.UNKNOWN:case ke.DEADLINE_EXCEEDED:case ke.RESOURCE_EXHAUSTED:case ke.INTERNAL:case ke.UNAVAILABLE:case ke.UNAUTHENTICATED:return!1;case ke.INVALID_ARGUMENT:case ke.NOT_FOUND:case ke.ALREADY_EXISTS:case ke.PERMISSION_DENIED:case ke.FAILED_PRECONDITION:case ke.ABORTED:case ke.OUT_OF_RANGE:case ke.UNIMPLEMENTED:case ke.DATA_LOSS:return!0;default:return Ft(15467,{code:n})}}function Ez(n){if(n===void 0)return ol("GRPC error has no .code"),ke.UNKNOWN;switch(n){case bi.OK:return ke.OK;case bi.CANCELLED:return ke.CANCELLED;case bi.UNKNOWN:return ke.UNKNOWN;case bi.DEADLINE_EXCEEDED:return ke.DEADLINE_EXCEEDED;case bi.RESOURCE_EXHAUSTED:return ke.RESOURCE_EXHAUSTED;case bi.INTERNAL:return ke.INTERNAL;case bi.UNAVAILABLE:return ke.UNAVAILABLE;case bi.UNAUTHENTICATED:return ke.UNAUTHENTICATED;case bi.INVALID_ARGUMENT:return ke.INVALID_ARGUMENT;case bi.NOT_FOUND:return ke.NOT_FOUND;case bi.ALREADY_EXISTS:return ke.ALREADY_EXISTS;case bi.PERMISSION_DENIED:return ke.PERMISSION_DENIED;case bi.FAILED_PRECONDITION:return ke.FAILED_PRECONDITION;case bi.ABORTED:return ke.ABORTED;case bi.OUT_OF_RANGE:return ke.OUT_OF_RANGE;case bi.UNIMPLEMENTED:return ke.UNIMPLEMENTED;case bi.DATA_LOSS:return ke.DATA_LOSS;default:return Ft(39323,{code:n})}}(On=bi||(bi={}))[On.OK=0]="OK",On[On.CANCELLED=1]="CANCELLED",On[On.UNKNOWN=2]="UNKNOWN",On[On.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",On[On.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",On[On.NOT_FOUND=5]="NOT_FOUND",On[On.ALREADY_EXISTS=6]="ALREADY_EXISTS",On[On.PERMISSION_DENIED=7]="PERMISSION_DENIED",On[On.UNAUTHENTICATED=16]="UNAUTHENTICATED",On[On.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",On[On.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",On[On.ABORTED=10]="ABORTED",On[On.OUT_OF_RANGE=11]="OUT_OF_RANGE",On[On.UNIMPLEMENTED=12]="UNIMPLEMENTED",On[On.INTERNAL=13]="INTERNAL",On[On.UNAVAILABLE=14]="UNAVAILABLE",On[On.DATA_LOSS=15]="DATA_LOSS";var aq=null;var Xhe=new il([4294967295,4294967295],0);function cq(n){let e=Rq().encode(n),t=new p5;return t.update(e),new Uint8Array(t.digest())}function uq(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new il([t,r],0),new il([i,s],0)]}var eP=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new of(`Invalid padding: ${t}`);if(r<0)throw new of(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new of(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new of(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=il.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(il.fromNumber(r)));return i.compare(Xhe)===1&&(i=new il([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=cq(e),[r,i]=uq(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;let t=cq(e),[r,i]=uq(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);this.we(o)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},of=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var yI=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,h_.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(sn.min(),i,new Hr(fn),ll(),In())}},h_=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,In(),In(),In())}};var Dg=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},vI=class{constructor(e,t){this.targetId=e,this.De=t}},_I=class{constructor(e,t,r=Os.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},wI=class{constructor(){this.ve=0,this.Ce=lq(),this.Fe=Os.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=In(),t=In(),r=In();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ft(38017,{changeType:s})}}),new h_(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=lq()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Zn(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},tP=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=ll(),this.je=rI(),this.Je=rI(),this.He=new Hr(fn)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Ft(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let s=i.target;if(H5(s))if(r===0){let o=new Pt(s.path);this.Xe(t,o,yc.newNoDocument(o,sn.min()))}else Zn(r===1,20013,{expectedCount:r});else{let o=this.ot(t);if(o!==r){let a=this._t(e),c=a?this.ut(a,e,o):1;if(c!==0){this.rt(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,u)}aq?.ct((function(l,p,y,g,D){var M,k,O,G,W,K;let ue={localCacheCount:l,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},fe=p.unchangedNames;return fe&&(ue.bloomFilter={applied:D===0,hashCount:(M=fe?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(G=(O=(k=fe?.bits)===null||k===void 0?void 0:k.bitmap)===null||O===void 0?void 0:O.length)!==null&&G!==void 0?G:0,padding:(K=(W=fe?.bits)===null||W===void 0?void 0:W.padding)!==null&&K!==void 0?K:0,mightContain:P=>{var T;return(T=g?.mightContain(P))!==null&&T!==void 0&&T}}),ue})(o,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=cl(r).toUint8Array()}catch(c){if(c instanceof hI)return Nd("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new eP(o,i,s)}catch(c){return Nd(c instanceof of?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,s,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((s,o)=>{let a=this.st(o);if(a){if(s.current&&H5(a.target)){let c=new Pt(a.target.path);this.Tt(c).has(o)||this.It(o,c)||this.Xe(o,c,yc.newNoDocument(c,e))}s.Ne&&(t.set(o,s.Le()),s.ke())}});let r=In();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));let i=new yI(e,t,this.He,this.ze,r);return this.ze=ll(),this.je=rI(),this.Je=rI(),this.He=new Hr(fn),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new wI,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new ns(fn),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new ns(fn),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||it("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new wI),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function rI(){return new Hr(Pt.comparator)}function lq(){return new Hr(Pt.comparator)}var efe={asc:"ASCENDING",desc:"DESCENDING"},tfe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nfe={and:"AND",or:"OR"},nP=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function rP(n,e){return n.useProto3Json||UI(e)?e:{value:e}}function bI(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Iz(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function rfe(n,e){return bI(n,e.toTimestamp())}function lu(n){return Zn(!!n,49232),sn.fromTimestamp((function(t){let r=al(t);return new Ai(r.seconds,r.nanos)})(n))}function wk(n,e){return iP(n,e).canonicalString()}function iP(n,e){let t=(function(i){return new Pr(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Tz(n){let e=Pr.fromString(n);return Zn(xz(e),10190,{key:e.toString()}),e}function sP(n,e){return wk(n.databaseId,e.path)}function w5(n,e){let t=Tz(e);if(t.get(1)!==n.databaseId.projectId)throw new et(ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new et(ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Pt(Sz(t))}function Az(n,e){return wk(n.databaseId,e)}function ife(n){let e=Tz(n);return e.length===4?Pr.emptyPath():Sz(e)}function oP(n){return new Pr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Sz(n){return Zn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function dq(n,e,t){return{name:sP(n,e),fields:t.value.mapValue.fields}}function sfe(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ft(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(u,l){return u.useProto3Json?(Zn(l===void 0||typeof l=="string",58123),Os.fromBase64String(l||"")):(Zn(l===void 0||l instanceof Buffer||l instanceof Uint8Array,16193),Os.fromUint8Array(l||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(u){let l=u.code===void 0?ke.UNKNOWN:Ez(u.code);return new et(l,u.message||"")})(o);t=new _I(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=w5(n,r.document.name),s=lu(r.document.updateTime),o=r.document.createTime?lu(r.document.createTime):sn.min(),a=new mc({mapValue:{fields:r.document.fields}}),c=yc.newFoundDocument(i,s,o,a),u=r.targetIds||[],l=r.removedTargetIds||[];t=new Dg(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=w5(n,r.document),s=r.readTime?lu(r.readTime):sn.min(),o=yc.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Dg([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=w5(n,r.document),s=r.removedTargetIds||[];t=new Dg([],s,i,null)}else{if(!("filter"in e))return Ft(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new X5(i,s),a=r.targetId;t=new vI(a,o)}}return t}function ofe(n,e){let t;if(e instanceof ff)t={update:dq(n,e.key,e.value)};else if(e instanceof mI)t={delete:sP(n,e.key)};else if(e instanceof dl)t={update:dq(n,e.key,e.data),updateMask:gfe(e.fieldMask)};else{if(!(e instanceof Q5))return Ft(16599,{Rt:e.type});t={verify:sP(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof Vg)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof df)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof hf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Bg)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw Ft(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:rfe(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ft(27497)})(n,e.precondition)),t}function afe(n,e){return n&&n.length>0?(Zn(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?lu(i.updateTime):lu(s);return o.isEqual(sn.min())&&(o=lu(s)),new K5(o,i.transformResults||[])})(t,e))):[]}function cfe(n,e){return{documents:[Az(n,e.path)]}}function ufe(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Az(n,i);let s=(function(u){if(u.length!==0)return Dz(vc.create(u,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(u){if(u.length!==0)return u.map(l=>(function(y){return{field:Tg(y.field),direction:hfe(y.dir)}})(l))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=rP(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{Vt:t,parent:i}}function lfe(n){let e=ife(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Zn(r===1,65062);let l=t.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];t.where&&(s=(function(p){let y=Cz(p);return y instanceof vc&&iz(y)?y.getFilters():[y]})(t.where));let o=[];t.orderBy&&(o=(function(p){return p.map(y=>(function(D){return new lf(Ag(D.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(y))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let y;return y=typeof p=="object"?p.value:p,UI(y)?null:y})(t.limit));let c=null;t.startAt&&(c=(function(p){let y=!!p.before,g=p.values||[];return new Lg(g,y)})(t.startAt));let u=null;return t.endAt&&(u=(function(p){let y=!p.before,g=p.values||[];return new Lg(g,y)})(t.endAt)),Fhe(e,i,o,s,a,"F",c,u)}function dfe(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ft(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Cz(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ag(t.unaryFilter.field);return Ii.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ag(t.unaryFilter.field);return Ii.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ag(t.unaryFilter.field);return Ii.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ag(t.unaryFilter.field);return Ii.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ft(61313);default:return Ft(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ii.create(Ag(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ft(58110);default:return Ft(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return vc.create(t.compositeFilter.filters.map(r=>Cz(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ft(1026)}})(t.compositeFilter.op))})(n):Ft(30097,{filter:n})}function hfe(n){return efe[n]}function ffe(n){return tfe[n]}function pfe(n){return nfe[n]}function Tg(n){return{fieldPath:n.canonicalString()}}function Ag(n){return Zo.fromServerFormat(n.fieldPath)}function Dz(n){return n instanceof Ii?(function(t){if(t.op==="=="){if(Z9(t.value))return{unaryFilter:{field:Tg(t.field),op:"IS_NAN"}};if(J9(t.value))return{unaryFilter:{field:Tg(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Z9(t.value))return{unaryFilter:{field:Tg(t.field),op:"IS_NOT_NAN"}};if(J9(t.value))return{unaryFilter:{field:Tg(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tg(t.field),op:ffe(t.op),value:t.value}}})(n):n instanceof vc?(function(t){let r=t.getFilters().map(i=>Dz(i));return r.length===1?r[0]:{compositeFilter:{op:pfe(t.op),filters:r}}})(n):Ft(54877,{filter:n})}function gfe(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function xz(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var f_=class n{constructor(e,t,r,i,s=sn.min(),o=sn.min(),a=Os.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var aP=class{constructor(e){this.gt=e}};function mfe(n){let e=lfe({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?W5(e,e.limit,"L"):e}var EI=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Rr(e.integerValue));else if("doubleValue"in e){let r=Rr(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),u_(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=al(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(cl(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?tz(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):ez(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Ft(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let s=e.fields||{};this.Ct(t,53);let o=kg,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Rr(a)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),Pt.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};EI.Ut=new EI;var cP=class{constructor(){this.Dn=new uP}addToCollectionParentIndex(e,t){return this.Dn.add(t),Ue.resolve()}getCollectionParents(e,t){return Ue.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Ue.resolve()}deleteFieldIndex(e,t){return Ue.resolve()}deleteAllFieldIndexes(e){return Ue.resolve()}createTargetIndexes(e,t){return Ue.resolve()}getDocumentsMatchingTarget(e,t){return Ue.resolve(null)}getIndexType(e,t){return Ue.resolve(0)}getFieldIndexes(e,t){return Ue.resolve([])}getNextCollectionGroupToUpdate(e){return Ue.resolve(null)}getMinOffset(e,t){return Ue.resolve(uf.min())}getMinOffsetFromCollectionGroup(e,t){return Ue.resolve(uf.min())}updateCollectionGroup(e,t,r){return Ue.resolve()}updateIndexEntries(e,t){return Ue.resolve()}},uP=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ns(Pr.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ns(Pr.comparator)).toArray()}};var cke=new Uint8Array(0);var hq={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Nz=41943040,Ma=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Ma.DEFAULT_COLLECTION_PERCENTILE=10,Ma.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ma.DEFAULT=new Ma(Nz,Ma.DEFAULT_COLLECTION_PERCENTILE,Ma.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ma.DISABLED=new Ma(-1,0,0);var p_=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var fq="LruGarbageCollector",yfe=1048576;function pq([n,e],[t,r]){let i=fn(n,t);return i===0?fn(e,r):i}var lP=class{constructor(e){this.Tr=e,this.buffer=new ns(pq),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();pq(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},dP=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){it(fq,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Hg(t)?it(fq,"Ignoring IndexedDB error during garbage collection: ",t):await $g(t)}await this.Rr(3e5)})}},hP=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return Ue.resolve(dk.ue);let r=new lP(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(it("LruGarbageCollector","Garbage collection skipped; disabled"),Ue.resolve(hq)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(it("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hq):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,s,o,a,c,u,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(it("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),Eg()<=_n.DEBUG&&it("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-l}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(u-c)+`ms
Total Duration: ${u-l}ms`),Ue.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}};function vfe(n,e){return new hP(n,e)}var fP=class{constructor(){this.changes=new ul(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?Ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var pP=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var gP=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&s_(r.mutation,i,ou.empty(),Ai.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,In()).next(()=>r))}getLocalViewOfDocuments(e,t,r=In()){let i=sf();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=t_();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=sf();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,In()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=ll(),o=i_(),a=(function(){return i_()})();return t.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof dl)?s=s.insert(u.key,u):l!==void 0?(o.set(u.key,l.mutation.getFieldMask()),s_(l.mutation,u,l.mutation.getFieldMask(),Ai.now())):o.set(u.key,ou.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,l)=>o.set(u,l)),t.forEach((u,l)=>{var p;return a.set(u,new pP(l,(p=o.get(u))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=i_(),i=new Hr((o,a)=>o-a),s=In();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let l=r.get(c)||ou.empty();l=a.applyToLocalView(u,l),r.set(c,l);let p=(i.get(a.batchId)||In()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,p=pz();l.forEach(y=>{if(!s.has(y)){let g=wz(t.get(y),r.get(y));g!==null&&p.set(y,g),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return Ue.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return Pt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):uz(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Ue.resolve(sf()),a=c_,c=s;return o.next(u=>Ue.forEach(u,(l,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(l)?Ue.resolve():this.remoteDocumentCache.getEntry(e,l).next(y=>{c=c.insert(l,y)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,In())).next(l=>({batchId:a,changes:fz(l)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pt(t)).next(r=>{let i=t_();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=t_();return this.indexManager.getCollectionParents(e,s).next(a=>Ue.forEach(a,c=>{let u=(function(p,y){return new Pd(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((p,y)=>{o=o.insert(p,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,u)=>{let l=u.getKey();o.get(l)===null&&(o=o.insert(l,yc.newInvalidDocument(l)))});let a=t_();return o.forEach((c,u)=>{let l=s.get(c);l!==void 0&&s_(l.mutation,u,ou.empty(),Ai.now()),$I(t,u)&&(a=a.insert(c,u))}),a})}};var mP=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Ue.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:lu(i.createTime)}})(t)),Ue.resolve()}getNamedQuery(e,t){return Ue.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:mfe(i.bundledQuery),readTime:lu(i.readTime)}})(t)),Ue.resolve()}};var yP=class{constructor(){this.overlays=new Hr(Pt.comparator),this.kr=new Map}getOverlay(e,t){return Ue.resolve(this.overlays.get(t))}getOverlays(e,t){let r=sf();return Ue.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.wt(e,t,s)}),Ue.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),Ue.resolve()}getOverlaysForCollection(e,t,r){let i=sf(),s=t.length+1,o=new Pt(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Ue.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Hr((u,l)=>u-l),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let l=s.get(u.largestBatchId);l===null&&(l=sf(),s=s.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=sf(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return Ue.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Z5(t,r));let s=this.kr.get(t);s===void 0&&(s=In(),this.kr.set(t,s)),this.kr.set(t,s.add(r.key))}};var vP=class{constructor(){this.sessionToken=Os.EMPTY_BYTE_STRING}getSessionToken(e){return Ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ue.resolve()}};var g_=class{constructor(){this.qr=new ns(Ei.Qr),this.$r=new ns(Ei.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Ei(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Ei(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new Pt(new Pr([])),r=new Ei(t,e),i=new Ei(t,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new Pt(new Pr([])),r=new Ei(t,e),i=new Ei(t,e+1),s=In();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Ei(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ei=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Pt.comparator(e.key,t.key)||fn(e.Hr,t.Hr)}static Ur(e,t){return fn(e.Hr,t.Hr)||Pt.comparator(e.key,t.key)}};var _P=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new ns(Ei.Qr)}checkEmpty(e){return Ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Y5(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Yr=this.Yr.add(new Ei(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ue.resolve(o)}lookupMutationBatch(e,t){return Ue.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),s=i<0?0:i;return Ue.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ue.resolve(this.mutationQueue.length===0?hk:this.er-1)}getAllMutationBatches(e){return Ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ei(t,0),i=new Ei(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),Ue.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ns(fn);return t.forEach(i=>{let s=new Ei(i,0),o=new Ei(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),Ue.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;Pt.isDocumentKey(s)||(s=s.child(""));let o=new Ei(new Pt(s),0),a=new ns(fn);return this.Yr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)},o),Ue.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Zn(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return Ue.forEach(t.mutations,i=>{let s=new Ei(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Ei(t,0),i=this.Yr.firstAfterOrEqual(r);return Ue.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ue.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var wP=class{constructor(e){this.ni=e,this.docs=(function(){return new Hr(Pt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return Ue.resolve(r?r.document.mutableCopy():yc.newInvalidDocument(t))}getEntries(e,t){let r=ll();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():yc.newInvalidDocument(i))}),Ue.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=ll(),o=t.path,a=new Pt(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||vhe(yhe(l),r)<=0||(i.has(l.key)||$I(t,l))&&(s=s.insert(l.key,l.mutableCopy()))}return Ue.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ft(9500)}ri(e,t){return Ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new bP(this)}getSize(e){return Ue.resolve(this.size)}},bP=class extends fP{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),Ue.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var EP=class{constructor(e){this.persistence=e,this.ii=new ul(t=>yk(t),vk),this.lastRemoteSnapshotVersion=sn.min(),this.highestTargetId=0,this.si=0,this.oi=new g_,this.targetCount=0,this._i=p_.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),Ue.resolve()}getLastRemoteSnapshotVersion(e){return Ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ue.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),Ue.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new p_(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Ue.resolve()}updateTargetData(e,t){return this.hr(t),Ue.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Ue.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Ue.waitFor(s).next(()=>i)}getTargetCount(e){return Ue.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return Ue.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),Ue.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Ue.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Ue.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return Ue.resolve(r)}containsKey(e,t){return Ue.resolve(this.oi.containsKey(t))}};var II=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new dk(0),this.ci=!1,this.ci=!0,this.li=new vP,this.referenceDelegate=e(this),this.hi=new EP(this),this.indexManager=new cP,this.remoteDocumentCache=(function(i){return new wP(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new aP(t),this.Ti=new mP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new _P(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){it("MemoryPersistence","Starting transaction:",e);let i=new IP(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return Ue.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},IP=class extends P5{constructor(e){super(),this.currentSequenceNumber=e}},TP=class n{constructor(e){this.persistence=e,this.Ai=new g_,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw Ft(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),Ue.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),Ue.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Ue.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ue.forEach(this.mi,r=>{let i=Pt.fromPath(r);return this.fi(e,i).next(s=>{s||t.removeEntry(i,sn.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return Ue.or([()=>Ue.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},TI=class n{constructor(e,t){this.persistence=e,this.gi=new ul(r=>Ehe(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=vfe(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return Ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return Ue.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?Ue.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,sn.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Ue.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),Ue.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),Ue.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Ue.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=sI(e.data.value)),t}Sr(e,t,r){return Ue.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return Ue.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var AP=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=In(),i=In();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var SP=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var CP=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return $7()?8:whe(Qo())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ps(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new SP;return this.ws(e,t,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,t,o,a.size)})}).next(()=>s.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Eg()<=_n.DEBUG&&it("QueryEngine","SDK will not create cache indexes for query:",Ig(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Ue.resolve()):(Eg()<=_n.DEBUG&&it("QueryEngine","Query:",Ig(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Eg()<=_n.DEBUG&&it("QueryEngine","The SDK decides to create cache indexes for query:",Ig(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,uu(t))):Ue.resolve())}ps(e,t){if(nq(t))return Ue.resolve(null);let r=uu(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=W5(t,null,"F"),r=uu(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=In(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.bs(t,a);return this.Ds(t,u,o,c.readTime)?this.ps(e,W5(t,null,"F")):this.vs(e,u,t,c)}))})))}ys(e,t,r,i){return nq(t)||i.isEqual(sn.min())?Ue.resolve(null):this.gs.getDocuments(e,r).next(s=>{let o=this.bs(t,s);return this.Ds(t,o,r,i)?Ue.resolve(null):(Eg()<=_n.DEBUG&&it("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ig(t)),this.vs(e,o,t,mhe(i,c_)).next(a=>a))})}bs(e,t){let r=new ns(dz(e));return t.forEach((i,s)=>{$I(e,s)&&(r=r.add(s))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,t,r){return Eg()<=_n.DEBUG&&it("QueryEngine","Using full collection scan to execute query:",Ig(t)),this.gs.getDocumentsMatchingQuery(e,t,uf.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var bk="LocalStore",_fe=3e8,DP=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Hr(fn),this.Ms=new ul(s=>yk(s),vk),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gP(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function wfe(n,e,t,r){return new DP(n,e,t,r)}async function Rz(n,e){let t=en(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=In();for(let u of i){o.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of s){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:o,addedBatchIds:a}))})})}function bfe(n,e){let t=en(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,u,l){let p=u.batch,y=p.keys(),g=Ue.resolve();return y.forEach(D=>{g=g.next(()=>l.getEntry(c,D)).next(M=>{let k=u.docVersions.get(D);Zn(k!==null,48541),M.version.compareTo(k)<0&&(p.applyToRemoteDocument(M,u),M.isValidDocument()&&(M.setReadTime(u.commitVersion),l.addEntry(M)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,p))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=In();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Pz(n){let e=en(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function Efe(n,e){let t=en(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((l,p)=>{let y=i.get(p);if(!y)return;a.push(t.hi.removeMatchingKeys(s,l.removedDocuments,p).next(()=>t.hi.addMatchingKeys(s,l.addedDocuments,p)));let g=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?g=g.withResumeToken(Os.EMPTY_BYTE_STRING,sn.min()).withLastLimboFreeSnapshotVersion(sn.min()):l.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(l.resumeToken,r)),i=i.insert(p,g),(function(M,k,O){return M.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=_fe?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(y,g,l)&&a.push(t.hi.updateTargetData(s,g))});let c=ll(),u=In();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(Ife(s,o,e.documentUpdates).next(l=>{c=l.Ls,u=l.ks})),!r.isEqual(sn.min())){let l=t.hi.getLastRemoteSnapshotVersion(s).next(p=>t.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return Ue.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.Fs=i,s))}function Ife(n,e,t){let r=In(),i=In();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=ll();return t.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(sn.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):it(bk,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:o,ks:i}})}function Tfe(n,e){let t=en(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=hk),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Afe(n,e){let t=en(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(s=>s?(i=s,Ue.resolve(i)):t.hi.allocateTargetId(r).next(o=>(i=new f_(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function xP(n,e,t){let r=en(n),i=r.Fs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Hg(o))throw o;it(bk,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function gq(n,e,t){let r=en(n),i=sn.min(),s=In();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,u,l){let p=en(c),y=p.Ms.get(l);return y!==void 0?Ue.resolve(p.Fs.get(y)):p.hi.getTargetData(u,l)})(r,o,uu(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,t?i:sn.min(),t?s:In())).next(a=>(Sfe(r,Bhe(e),a),{documents:a,qs:s})))}function Sfe(n,e,t){let r=n.xs.get(e)||sn.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.xs.set(e,r)}var AI=class{constructor(){this.activeTargetIds=Hhe()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var NP=class{constructor(){this.Fo=new AI,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new AI,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var RP=class{xo(e){}shutdown(){}};var mq="ConnectivityMonitor",SI=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){it(mq,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){it(mq,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var iI=null;function PP(){return iI===null?iI=(function(){return 268435456+Math.round(2147483648*Math.random())})():iI++,"0x"+iI.toString(16)}var b5="RestConnection",Cfe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},kP=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===fI?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){let o=PP(),a=this.Go(e,t.toUriEncodedString());it(b5,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,s);let{host:u}=new URL(a),l=Kh(u);return this.jo(e,a,c,r,l).then(p=>(it(b5,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Nd(b5,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+zg})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,t){let r=Cfe[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var MP=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var ks="WebChannelConnection",OP=class extends kP{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,s){let o=PP();return new Promise((a,c)=>{let u=new g5;u.setWithCredentials(!0),u.listenOnce(m5.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case e_.NO_ERROR:let p=u.getResponseJson();it(ks,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case e_.TIMEOUT:it(ks,`RPC '${e}' ${o} timed out`),c(new et(ke.DEADLINE_EXCEEDED,"Request time out"));break;case e_.HTTP_ERROR:let y=u.getStatus();if(it(ks,`RPC '${e}' ${o} failed with status:`,y,"response text:",u.getResponseText()),y>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);let D=g?.error;if(D&&D.status&&D.message){let M=(function(O){let G=O.toLowerCase().replace(/_/g,"-");return Object.values(ke).indexOf(G)>=0?G:ke.UNKNOWN})(D.status);c(new et(M,D.message))}else c(new et(ke.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new et(ke.UNAVAILABLE,"Connection failed."));break;default:Ft(9055,{c_:e,streamId:o,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{it(ks,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);it(ks,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}P_(e,t,r){let i=PP(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=_5(),a=v5(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let l=s.join("");it(ks,`Creating RPC '${e}' stream ${i}: ${l}`,c);let p=o.createWebChannel(l,c);this.T_(p);let y=!1,g=!1,D=new MP({Ho:k=>{g?it(ks,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(y||(it(ks,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),it(ks,`RPC '${e}' stream ${i} sending:`,k),p.send(k))},Yo:()=>p.close()}),M=(k,O,G)=>{k.listen(O,W=>{try{G(W)}catch(K){setTimeout(()=>{throw K},0)}})};return M(p,bg.EventType.OPEN,()=>{g||(it(ks,`RPC '${e}' stream ${i} transport opened.`),D.s_())}),M(p,bg.EventType.CLOSE,()=>{g||(g=!0,it(ks,`RPC '${e}' stream ${i} transport closed`),D.__(),this.I_(p))}),M(p,bg.EventType.ERROR,k=>{g||(g=!0,Nd(ks,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),D.__(new et(ke.UNAVAILABLE,"The operation could not be completed")))}),M(p,bg.EventType.MESSAGE,k=>{var O;if(!g){let G=k.data[0];Zn(!!G,16349);let W=G,K=W?.error||((O=W[0])===null||O===void 0?void 0:O.error);if(K){it(ks,`RPC '${e}' stream ${i} received error:`,K);let ue=K.status,fe=(function(w){let x=bi[w];if(x!==void 0)return Ez(x)})(ue),P=K.message;fe===void 0&&(fe=ke.INTERNAL,P="Unknown error status: "+ue+" with message "+K.message),g=!0,D.__(new et(fe,P)),p.close()}else it(ks,`RPC '${e}' stream ${i} received:`,G),D.a_(G)}}),M(a,y5.STAT_EVENT,k=>{k.stat===tI.PROXY?it(ks,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===tI.NOPROXY&&it(ks,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.o_()},0),D}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function E5(){return typeof document<"u"?document:null}function HI(n){return new nP(n,!0)}var CI=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&it("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var yq="PersistentStream",DI=class{constructor(e,t,r,i,s,o,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new CI(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===ke.RESOURCE_EXHAUSTED?(ol(t.toString()),ol("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===ke.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new et(ke.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return it(yq,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(it(yq,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},LP=class extends DI{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=sfe(this.serializer,e),r=(function(s){if(!("targetChange"in s))return sn.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?sn.min():o.readTime?lu(o.readTime):sn.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=oP(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=H5(c)?{documents:cfe(s,c)}:{query:ufe(s,c).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Iz(s,o.resumeToken);let u=rP(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(sn.min())>0){a.readTime=bI(s,o.snapshotVersion.toTimestamp());let u=rP(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);let r=dfe(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=oP(this.serializer),t.removeTarget=e,this.k_(t)}},FP=class extends DI{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Zn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Zn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Zn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=afe(e.writeResults,e.commitTime),r=lu(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=oP(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>ofe(this.serializer,r))};this.k_(t)}};var VP=class{},BP=class extends VP{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new et(ke.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,iP(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new et(ke.UNKNOWN,s.toString())})}Jo(e,t,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,iP(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new et(ke.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},jP=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ol(t),this._a=!1):it("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var pf="RemoteStore",UP=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{yf(this)&&(it(pf,"Restarting streams for network reachability change."),await(async function(c){let u=en(c);u.Ia.add(4),await w_(u),u.Aa.set("Unknown"),u.Ia.delete(4),await GI(u)})(this))})}),this.Aa=new jP(r,i)}};async function GI(n){if(yf(n))for(let e of n.da)await e(!0)}async function w_(n){for(let e of n.da)await e(!1)}function kz(n,e){let t=en(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Ak(t)?Tk(t):Gg(t).x_()&&Ik(t,e))}function Ek(n,e){let t=en(n),r=Gg(t);t.Ta.delete(e),r.x_()&&Mz(t,e),t.Ta.size===0&&(r.x_()?r.B_():yf(t)&&t.Aa.set("Unknown"))}function Ik(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(sn.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Gg(n).H_(e)}function Mz(n,e){n.Ra.$e(e),Gg(n).Y_(e)}function Tk(n){n.Ra=new tP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Gg(n).start(),n.Aa.aa()}function Ak(n){return yf(n)&&!Gg(n).M_()&&n.Ta.size>0}function yf(n){return en(n).Ia.size===0}function Oz(n){n.Ra=void 0}async function Dfe(n){n.Aa.set("Online")}async function xfe(n){n.Ta.forEach((e,t)=>{Ik(n,e)})}async function Nfe(n,e){Oz(n),Ak(n)?(n.Aa.la(e),Tk(n)):n.Aa.set("Unknown")}async function Rfe(n,e,t){if(n.Aa.set("Online"),e instanceof _I&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))})(n,e)}catch(r){it(pf,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xI(n,r)}else if(e instanceof Dg?n.Ra.Ye(e):e instanceof vI?n.Ra.it(e):n.Ra.et(e),!t.isEqual(sn.min()))try{let r=await Pz(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.Ra.Pt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=s.Ta.get(u);l&&s.Ta.set(u,l.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let l=s.Ta.get(c);if(!l)return;s.Ta.set(c,l.withResumeToken(Os.EMPTY_BYTE_STRING,l.snapshotVersion)),Mz(s,c);let p=new f_(l.target,c,u,l.sequenceNumber);Ik(s,p)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){it(pf,"Failed to raise snapshot:",r),await xI(n,r)}}async function xI(n,e,t){if(!Hg(e))throw e;n.Ia.add(1),await w_(n),n.Aa.set("Offline"),t||(t=()=>Pz(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{it(pf,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await GI(n)})}function Lz(n,e){return e().catch(t=>xI(n,t,e))}async function WI(n){let e=en(n),t=kd(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:hk;for(;Pfe(e);)try{let i=await Tfe(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,kfe(e,i)}catch(i){await xI(e,i)}Fz(e)&&Vz(e)}function Pfe(n){return yf(n)&&n.Pa.length<10}function kfe(n,e){n.Pa.push(e);let t=kd(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function Fz(n){return yf(n)&&!kd(n).M_()&&n.Pa.length>0}function Vz(n){kd(n).start()}async function Mfe(n){kd(n).na()}async function Ofe(n){let e=kd(n);for(let t of n.Pa)e.X_(t.mutations)}async function Lfe(n,e,t){let r=n.Pa.shift(),i=J5.from(r,e,t);await Lz(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await WI(n)}async function Ffe(n,e){e&&kd(n).Z_&&await(async function(r,i){if((function(o){return Zhe(o)&&o!==ke.ABORTED})(i.code)){let s=r.Pa.shift();kd(r).N_(),await Lz(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await WI(r)}})(n,e),Fz(n)&&Vz(n)}async function vq(n,e){let t=en(n);t.asyncQueue.verifyOperationInProgress(),it(pf,"RemoteStore received new credentials");let r=yf(t);t.Ia.add(3),await w_(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await GI(t)}async function Vfe(n,e){let t=en(n);e?(t.Ia.delete(2),await GI(t)):e||(t.Ia.add(2),await w_(t),t.Aa.set("Unknown"))}function Gg(n){return n.Va||(n.Va=(function(t,r,i){let s=en(t);return s.ia(),new LP(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:Dfe.bind(null,n),e_:xfe.bind(null,n),n_:Nfe.bind(null,n),J_:Rfe.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),Ak(n)?Tk(n):n.Aa.set("Unknown")):(await n.Va.stop(),Oz(n))})),n.Va}function kd(n){return n.ma||(n.ma=(function(t,r,i){let s=en(t);return s.ia(),new FP(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:Mfe.bind(null,n),n_:Ffe.bind(null,n),ea:Ofe.bind(null,n),ta:Lfe.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await WI(n)):(await n.ma.stop(),n.Pa.length>0&&(it(pf,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var qP=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new au,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new et(ke.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Sk(n,e){if(ol("AsyncQueue",`${e}: ${n}`),Hg(n))return new et(ke.UNAVAILABLE,`${e}: ${n}`);throw n}var NI=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Pt.comparator(t.key,r.key):(t,r)=>Pt.comparator(t.key,r.key),this.keyedMap=t_(),this.sortedSet=new Hr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var RI=class{constructor(){this.fa=new Hr(Pt.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ft(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Ug=class n{constructor(e,t,r,i,s,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,NI.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var zP=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},$P=class{constructor(){this.queries=_q(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=en(t),s=i.queries;i.queries=_q(),s.forEach((o,a)=>{for(let c of a.wa)c.onError(r)})})(this,new et(ke.ABORTED,"Firestore shutting down"))}};function _q(){return new ul(n=>lz(n),zI)}async function Bfe(n,e){let t=en(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new zP,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await t.onListen(i,!0);break;case 1:s.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=Sk(o,`Initialization of query '${Ig(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.wa.push(e),e.va(t.onlineState),s.ya&&e.Ca(s.ya)&&Ck(t)}async function jfe(n,e){let t=en(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Ufe(n,e){let t=en(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&Ck(t)}function qfe(n,e,t){let r=en(n),i=r.queries.get(e);if(i)for(let s of i.wa)s.onError(t);r.queries.delete(e)}function Ck(n){n.Da.forEach(e=>{e.next()})}var HP,wq;(wq=HP||(HP={})).Fa="default",wq.Cache="cache";var GP=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ug(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ug.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==HP.Cache}};var PI=class{constructor(e){this.key=e}},kI=class{constructor(e){this.key=e}},WP=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=In(),this.mutatedKeys=In(),this.Xa=dz(e),this.eu=new NI(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new RI,i=t?t.eu:this.eu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,p)=>{let y=i.get(l),g=$I(this.query,p)?p:null,D=!!y&&this.mutatedKeys.has(y.key),M=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations),k=!1;y&&g?y.data.isEqual(g.data)?D!==M&&(r.track({type:3,doc:g}),k=!0):this.iu(y,g)||(r.track({type:2,doc:g}),k=!0,(c&&this.Xa(g,c)>0||u&&this.Xa(g,u)<0)&&(a=!0)):!y&&g?(r.track({type:0,doc:g}),k=!0):y&&!g&&(r.track({type:1,doc:y}),k=!0,(c||u)&&(a=!0)),k&&(g?(o=o.add(g),s=M?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let o=e.ru.pa();o.sort((l,p)=>(function(g,D){let M=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ft(20277,{At:k})}};return M(g)-M(D)})(l.type,p.type)||this.Xa(l.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,u=c!==this.Ya;return this.Ya=c,o.length!==0||u?{snapshot:new Ug(this.query,e.eu,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new RI,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=In(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new kI(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new PI(r))}),t}uu(e){this.Ha=e.qs,this.Za=In();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ug.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},Dk="SyncEngine",KP=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},QP=class{constructor(e){this.key=e,this.lu=!1}},YP=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new ul(a=>lz(a),zI),this.Tu=new Map,this.Iu=new Set,this.du=new Hr(Pt.comparator),this.Eu=new Map,this.Au=new g_,this.Ru={},this.Vu=new Map,this.mu=p_.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function zfe(n,e,t=!0){let r=$z(n),i,s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await Bz(r,e,t,!0),i}async function $fe(n,e){let t=$z(n);await Bz(t,e,!0,!1)}async function Bz(n,e,t,r){let i=await Afe(n.localStore,uu(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await Hfe(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&kz(n.remoteStore,i),a}async function Hfe(n,e,t,r,i){n.gu=(p,y,g)=>(async function(M,k,O,G){let W=k.view.nu(O);W.Ds&&(W=await gq(M.localStore,k.query,!1).then(({documents:P})=>k.view.nu(P,W)));let K=G&&G.targetChanges.get(k.targetId),ue=G&&G.targetMismatches.get(k.targetId)!=null,fe=k.view.applyChanges(W,M.isPrimaryClient,K,ue);return Eq(M,k.targetId,fe._u),fe.snapshot})(n,p,y,g);let s=await gq(n.localStore,e,!0),o=new WP(e,s.qs),a=o.nu(s.documents),c=h_.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=o.applyChanges(a,n.isPrimaryClient,c);Eq(n,t,u._u);let l=new KP(e,t,o);return n.Pu.set(e,l),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),u.snapshot}async function Gfe(n,e,t){let r=en(n),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!zI(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await xP(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ek(r.remoteStore,i.targetId),JP(r,i.targetId)}).catch($g)):(JP(r,i.targetId),await xP(r.localStore,i.targetId,!0))}async function Wfe(n,e){let t=en(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ek(t.remoteStore,r.targetId))}async function Kfe(n,e,t){let r=tpe(n);try{let i=await(function(o,a){let c=en(o),u=Ai.now(),l=a.reduce((g,D)=>g.add(D.key),In()),p,y;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let D=ll(),M=In();return c.Os.getEntries(g,l).next(k=>{D=k,D.forEach((O,G)=>{G.isValidDocument()||(M=M.add(O))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,D)).next(k=>{p=k;let O=[];for(let G of a){let W=Jhe(G,p.get(G.key).overlayedDocument);W!=null&&O.push(new dl(G.key,W,nz(W.value.mapValue),af.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,O,a)}).next(k=>{y=k;let O=k.applyToLocalDocumentSet(p,M);return c.documentOverlayCache.saveOverlays(g,k.batchId,O)})}).then(()=>({batchId:y.batchId,changes:fz(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let u=o.Ru[o.currentUser.toKey()];u||(u=new Hr(fn)),u=u.insert(a,c),o.Ru[o.currentUser.toKey()]=u})(r,i.batchId,t),await b_(r,i.changes),await WI(r.remoteStore)}catch(i){let s=Sk(i,"Failed to persist write");t.reject(s)}}async function jz(n,e){let t=en(n);try{let r=await Efe(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Eu.get(s);o&&(Zn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?Zn(o.lu,14607):i.removedDocuments.size>0&&(Zn(o.lu,42227),o.lu=!1))}),await b_(t,r,e)}catch(r){await $g(r)}}function bq(n,e,t){let r=en(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=en(o);c.onlineState=a;let u=!1;c.queries.forEach((l,p)=>{for(let y of p.wa)y.va(a)&&(u=!0)}),u&&Ck(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Qfe(n,e,t){let r=en(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),s=i&&i.key;if(s){let o=new Hr(Pt.comparator);o=o.insert(s,yc.newNoDocument(s,sn.min()));let a=In().add(s),c=new yI(sn.min(),new Map,new Hr(fn),o,a);await jz(r,c),r.du=r.du.remove(s),r.Eu.delete(e),xk(r)}else await xP(r.localStore,e,!1).then(()=>JP(r,e,t)).catch($g)}async function Yfe(n,e){let t=en(n),r=e.batch.batchId;try{let i=await bfe(t.localStore,e);qz(t,r,null),Uz(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await b_(t,i)}catch(i){await $g(i)}}async function Jfe(n,e,t){let r=en(n);try{let i=await(function(o,a){let c=en(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(p=>(Zn(p!==null,37113),l=p.keys(),c.mutationQueue.removeMutationBatch(u,p))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})})(r.localStore,e);qz(r,e,t),Uz(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await b_(r,i)}catch(i){await $g(i)}}function Uz(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function qz(n,e,t){let r=en(n),i=r.Ru[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function JP(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||zz(n,r)})}function zz(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(Ek(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),xk(n))}function Eq(n,e,t){for(let r of t)r instanceof PI?(n.Au.addReference(r.key,e),Zfe(n,r)):r instanceof kI?(it(Dk,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||zz(n,r.key)):Ft(19791,{yu:r})}function Zfe(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(it(Dk,"New document in limbo: "+t),n.Iu.add(r),xk(n))}function xk(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new Pt(Pr.fromString(e)),r=n.mu.next();n.Eu.set(r,new QP(t)),n.du=n.du.insert(t,r),kz(n.remoteStore,new f_(uu(cz(t.path)),r,"TargetPurposeLimboResolution",dk.ue))}}async function b_(n,e,t){let r=en(n),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{o.push(r.gu(c,e,t).then(u=>{var l;if((u||t)&&r.isPrimaryClient){let p=u?!u.fromCache:(l=t?.targetChanges.get(c.targetId))===null||l===void 0?void 0:l.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(u){i.push(u);let p=AP.Es(c.targetId,u);s.push(p)}}))}),await Promise.all(o),r.hu.J_(i),await(async function(c,u){let l=en(c);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Ue.forEach(u,y=>Ue.forEach(y.Is,g=>l.persistence.referenceDelegate.addReference(p,y.targetId,g)).next(()=>Ue.forEach(y.ds,g=>l.persistence.referenceDelegate.removeReference(p,y.targetId,g)))))}catch(p){if(!Hg(p))throw p;it(bk,"Failed to update sequence numbers: "+p)}for(let p of u){let y=p.targetId;if(!p.fromCache){let g=l.Fs.get(y),D=g.snapshotVersion,M=g.withLastLimboFreeSnapshotVersion(D);l.Fs=l.Fs.insert(y,M)}}})(r.localStore,s))}async function Xfe(n,e){let t=en(n);if(!t.currentUser.isEqual(e)){it(Dk,"User change. New user:",e.toKey());let r=await Rz(t.localStore,e);t.currentUser=e,(function(s,o){s.Vu.forEach(a=>{a.forEach(c=>{c.reject(new et(ke.CANCELLED,o))})}),s.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await b_(t,r.Bs)}}function epe(n,e){let t=en(n),r=t.Eu.get(e);if(r&&r.lu)return In().add(r.key);{let i=In(),s=t.Tu.get(e);if(!s)return i;for(let o of s){let a=t.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function $z(n){let e=en(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=jz.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=epe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Qfe.bind(null,e),e.hu.J_=Ufe.bind(null,e.eventManager),e.hu.pu=qfe.bind(null,e.eventManager),e}function tpe(n){let e=en(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Yfe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Jfe.bind(null,e),e}var Hz=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=HI(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,r){return null}Fu(t,r){return null}vu(t){return wfe(this.persistence,new CP,t.initialUser,this.serializer)}Du(t){return new II(TP.Vi,this.serializer)}bu(t){return new NP}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),ZP=class extends Hz{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Zn(this.persistence.referenceDelegate instanceof TI,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new dP(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Ma.withCacheSize(this.cacheSizeBytes):Ma.DEFAULT;return new II(r=>TI.Vi(r,t),this.serializer)}};var npe=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>bq(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Xfe.bind(null,this.syncEngine),await Vfe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new $P})()}createDatastore(t){let r=HI(t.databaseInfo.databaseId),i=(function(o){return new OP(o)})(t.databaseInfo);return(function(o,a,c,u){return new BP(o,a,c,u)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new UP(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>bq(this.syncEngine,r,0),(function(){return SI.C()?new SI:new RP})())}createSyncEngine(t,r){return(function(s,o,a,c,u,l,p){let y=new YP(s,o,a,c,u,l);return p&&(y.fu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await(async function(s){let o=en(s);it(pf,"RemoteStore shutting down."),o.Ia.add(5),await w_(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var XP=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ol("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Md="FirestoreClient",ek=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ts.UNAUTHENTICATED,this.clientId=o_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{it(Md,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(it(Md,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new au;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Sk(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function I5(n,e){n.asyncQueue.verifyOperationInProgress(),it(Md,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Rz(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Nd("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{it("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Nd("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function Iq(n,e){n.asyncQueue.verifyOperationInProgress();let t=await rpe(n);it(Md,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>vq(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>vq(e.remoteStore,i)),n._onlineComponents=e}async function rpe(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){it(Md,"Using user provided OfflineComponentProvider");try{await I5(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ke.FAILED_PRECONDITION||i.code===ke.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Nd("Error using user provided cache. Falling back to memory cache: "+t),await I5(n,new Hz)}}else it(Md,"Using default OfflineComponentProvider"),await I5(n,new ZP(void 0));return n._offlineComponents}async function Gz(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(it(Md,"Using user provided OnlineComponentProvider"),await Iq(n,n._uninitializedComponentsProvider._online)):(it(Md,"Using default OnlineComponentProvider"),await Iq(n,new npe))),n._onlineComponents}function ipe(n){return Gz(n).then(e=>e.syncEngine)}async function spe(n){let e=await Gz(n),t=e.eventManager;return t.onListen=zfe.bind(null,e.syncEngine),t.onUnlisten=Gfe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$fe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Wfe.bind(null,e.syncEngine),t}function ope(n,e,t={}){let r=new au;return n.asyncQueue.enqueueAndForget(async()=>(function(s,o,a,c,u){let l=new XP({next:y=>{l.Ou(),o.enqueueAndForget(()=>jfe(s,p)),y.fromCache&&c.source==="server"?u.reject(new et(ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(y)},error:y=>u.reject(y)}),p=new GP(a,l,{includeMetadataChanges:!0,ka:!0});return Bfe(s,p)})(await spe(n),n.asyncQueue,e,t,r)),r.promise}function Wz(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Tq=new Map;var Kz="firestore.googleapis.com",Aq=!0,MI=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new et(ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Kz,this.ssl=Aq}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Aq;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Nz;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<yfe)throw new et(ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ghe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Wz((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new et(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new et(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new et(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},qg=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new MI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new et(ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new et(ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new MI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new T5;switch(r.type){case"firstParty":return new D5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new et(ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=Tq.get(t);r&&(it("ComponentProvider","Removing Datastore"),Tq.delete(t),r.terminate())})(this),Promise.resolve()}};function Qz(n,e,t,r={}){var i;n=a_(n,qg);let s=Kh(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s&&(MR(`https://${c}`),OR("Firestore",!0)),o.host!==Kz&&o.host!==c&&Nd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!Qh(u,a)&&(n._setSettings(u),r.mockUserToken)){let l,p;if(typeof r.mockUserToken=="string")l=r.mockUserToken,p=ts.MOCK_USER;else{l=B7(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new et(ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ts(y)}n._authCredentials=new A5(new cI(l,p))}}var gf=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ms=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(__(t,n._jsonSchema))return new n(e,r||null,new Pt(Pr.fromString(t.referencePath)))}};Ms._jsonSchemaVersion="firestore/documentReference/1.0",Ms._jsonSchema={type:Ti("string",Ms._jsonSchemaVersion),referencePath:Ti("string")};var Sd=class n extends gf{constructor(e,t,r){super(e,t,cz(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ms(this.firestore,null,new Pt(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Yz(n,e,...t){if(n=Yo(n),Pq("collection","path",e),n instanceof qg){let r=Pr.fromString(e,...t);return z9(r),new Sd(n,null,r)}{if(!(n instanceof Ms||n instanceof Sd))throw new et(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Pr.fromString(e,...t));return z9(r),new Sd(n.firestore,null,r)}}function Jz(n,e,...t){if(n=Yo(n),arguments.length===1&&(e=o_.newId()),Pq("doc","path",e),n instanceof qg){let r=Pr.fromString(e,...t);return q9(r),new Ms(n,null,new Pt(r))}{if(!(n instanceof Ms||n instanceof Sd))throw new et(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Pr.fromString(e,...t));return q9(r),new Ms(n.firestore,n instanceof Sd?n.converter:null,new Pt(r))}}var Sq="AsyncQueue",OI=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new CI(this,"async_queue_retry"),this.oc=()=>{let r=E5();r&&it(Sq,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=E5();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=E5();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new au;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Hg(e))throw e;it(Sq,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ol("INTERNAL UNHANDLED ERROR: ",Cq(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=qP.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&Ft(47125,{hc:Cq(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function Cq(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var m_=class extends qg{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new OI,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new OI(e),this._firestoreClient=void 0,await e}}};function Zz(n,e){let t=typeof n=="object"?n:vg(),r=typeof n=="string"?n:e||fI,i=OE(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=F7("firestore");s&&Qz(i,...s)}return i}function Xz(n){if(n._terminated)throw new et(ke.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||ape(n),n._firestoreClient}function ape(n){var e,t,r;let i=n._freezeSettings(),s=(function(a,c,u,l){return new k5(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,Wz(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new ek(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var Cd=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Os.fromBase64String(e))}catch(t){throw new et(ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Os.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(__(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Cd._jsonSchemaVersion="firestore/bytes/1.0",Cd._jsonSchema={type:Ti("string",Cd._jsonSchemaVersion),bytes:Ti("string")};var y_=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new et(ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zo(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var LI=class{constructor(e){this._methodName=e}};var Dd=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new et(ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new et(ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return fn(this._lat,e._lat)||fn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(__(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Dd._jsonSchemaVersion="firestore/geoPoint/1.0",Dd._jsonSchema={type:Ti("string",Dd._jsonSchemaVersion),latitude:Ti("number"),longitude:Ti("number")};var xd=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(__(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new et(ke.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};xd._jsonSchemaVersion="firestore/vectorValue/1.0",xd._jsonSchema={type:Ti("string",xd._jsonSchemaVersion),vectorValues:Ti("object")};var cpe=/^__.*__$/,tk=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new dl(e,this.data,this.fieldMask,t,this.fieldTransforms):new ff(e,this.data,t,this.fieldTransforms)}};function e$(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ft(40011,{Ec:n})}}var nk=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return FI(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(e$(this.Ec)&&cpe.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},rk=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||HI(e)}Dc(e,t,r,i=!1){return new nk({Ec:e,methodName:t,bc:r,path:Zo.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function t$(n){let e=n._freezeSettings(),t=HI(n._databaseId);return new rk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function upe(n,e,t,r,i,s={}){let o=n.Dc(s.merge||s.mergeFields?2:0,e,t,i);i$("Data must be an object, but it was:",o,r);let a=n$(r,o),c,u;if(s.merge)c=new ou(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let l=[];for(let p of s.mergeFields){let y=dpe(e,p,t);if(!o.contains(y))throw new et(ke.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);fpe(l,y)||l.push(y)}c=new ou(l),u=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,u=o.fieldTransforms;return new tk(new mc(a),c,u)}function lpe(n,e,t,r=!1){return Nk(t,n.Dc(r?4:3,e))}function Nk(n,e){if(r$(n=Yo(n)))return i$("Unsupported field value:",e,n),n$(n,e);if(n instanceof LI)return(function(r,i){if(!e$(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=Nk(a,i.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=Yo(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Ghe(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Ai.fromDate(r);return{timestampValue:bI(i.serializer,s)}}if(r instanceof Ai){let s=new Ai(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:bI(i.serializer,s)}}if(r instanceof Dd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Cd)return{bytesValue:Iz(i.serializer,r._byteString)};if(r instanceof Ms){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:wk(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof xd)return(function(o,a){return{mapValue:{fields:{[pk]:{stringValue:gk},[kg]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return _k(a.serializer,u)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${jI(r)}`)})(n,e)}function n$(n,e){let t={};return Kq(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mf(n,(r,i)=>{let s=Nk(i,e.Vc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function r$(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ai||n instanceof Dd||n instanceof Cd||n instanceof Ms||n instanceof LI||n instanceof xd)}function i$(n,e,t){if(!r$(t)||!kq(t)){let r=jI(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function dpe(n,e,t){if((e=Yo(e))instanceof y_)return e._internalPath;if(typeof e=="string")return s$(n,e);throw FI("Field path arguments must be of type string or ",n,!1,void 0,t)}var hpe=new RegExp("[~\\*/\\[\\]]");function s$(n,e,t){if(e.search(hpe)>=0)throw FI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new y_(...e.split("."))._internalPath}catch{throw FI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function FI(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new et(ke.INVALID_ARGUMENT,a+n+c)}function fpe(n,e){return n.some(t=>t.isEqual(e))}var VI=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ms(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new ik(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Rk("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},ik=class extends VI{data(){return super.data()}};function Rk(n,e){return typeof e=="string"?s$(n,e):e instanceof y_?e._internalPath:e._delegate._internalPath}function ppe(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new et(ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var v_=class{},BI=class extends v_{};function o$(n,e,...t){let r=[];e instanceof v_&&r.push(e),r=r.concat(t),(function(s){let o=s.filter(c=>c instanceof ok).length,a=s.filter(c=>c instanceof sk).length;if(o>1||o>0&&a>0)throw new et(ke.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var sk=class n extends BI{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return c$(e._query,t),new gf(e.firestore,e.converter,G5(e._query,t))}_parse(e){let t=t$(e.firestore);return(function(s,o,a,c,u,l,p){let y;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new et(ke.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){xq(p,l);let D=[];for(let M of p)D.push(Dq(c,s,M));y={arrayValue:{values:D}}}else y=Dq(c,s,p)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||xq(p,l),y=lpe(a,o,p,l==="in"||l==="not-in");return Ii.create(u,l,y)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var ok=class n extends v_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:vc.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)c$(o,c),o=G5(o,c)})(e._query,t),new gf(e.firestore,e.converter,G5(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var ak=class n extends BI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,s,o){if(i.startAt!==null)throw new et(ke.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new et(ke.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lf(s,o)})(e._query,this._field,this._direction);return new gf(e.firestore,e.converter,(function(i,s){let o=i.explicitOrderBy.concat([s]);return new Pd(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function a$(n,e="asc"){let t=e,r=Rk("orderBy",n);return ak._create(r,t)}function Dq(n,e,t){if(typeof(t=Yo(t))=="string"){if(t==="")throw new et(ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uz(e)&&t.indexOf("/")!==-1)throw new et(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Pr.fromString(t));if(!Pt.isDocumentKey(r))throw new et(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Y9(n,new Pt(r))}if(t instanceof Ms)return Y9(n,t._key);throw new et(ke.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jI(t)}.`)}function xq(n,e){if(!Array.isArray(n)||n.length===0)throw new et(ke.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function c$(n,e){let t=(function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new et(ke.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new et(ke.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var ck=class{convertValue(e,t="none"){switch(Rd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(cl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ft(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return mf(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[kg].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Rr(o.doubleValue));return new xd(s)}convertGeoPoint(e){return new Dd(Rr(e.latitude),Rr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=qI(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(l_(e));default:return null}}convertTimestamp(e){let t=al(e);return new Ai(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Pr.fromString(e);Zn(xz(r),9688,{name:e});let i=new pI(r.get(1),r.get(3)),s=new Pt(r.popFirst(5));return i.isEqual(t)||ol(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function gpe(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Cg=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},xg=class n extends VI{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ng(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Rk("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new et(ke.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};xg._jsonSchemaVersion="firestore/documentSnapshot/1.0",xg._jsonSchema={type:Ti("string",xg._jsonSchemaVersion),bundleSource:Ti("string","DocumentSnapshot"),bundleName:Ti("string"),bundle:Ti("string")};var Ng=class extends xg{data(e={}){return super.data(e)}},Rg=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Cg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ng(this._firestore,this._userDataWriter,r.key,r,new Cg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new et(ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Ng(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Cg(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Ng(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Cg(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,l=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:mpe(a.type),doc:c,oldIndex:u,newIndex:l}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new et(ke.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=o_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function mpe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ft(61501,{type:n})}}Rg._jsonSchemaVersion="firestore/querySnapshot/1.0",Rg._jsonSchema={type:Ti("string",Rg._jsonSchemaVersion),bundleSource:Ti("string","QuerySnapshot"),bundleName:Ti("string"),bundle:Ti("string")};var uk=class extends ck{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cd(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ms(this.firestore,null,t)}};function u$(n){n=a_(n,gf);let e=a_(n.firestore,m_),t=Xz(e),r=new uk(e);return ppe(n._query),ope(t,n._query).then(i=>new Rg(e,r,n,i))}function l$(n,e,t){n=a_(n,Ms);let r=a_(n.firestore,m_),i=gpe(n.converter,e,t);return ype(r,[upe(t$(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,af.none())])}function ype(n,e){return(function(r,i){let s=new au;return r.asyncQueue.enqueueAndForget(async()=>Kfe(await ipe(r),i,s)),s.promise})(Xz(n),e)}(function(e,t=!0){(function(i){zg=i})(yg),pc(new no("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new m_(new S5(r.getProvider("auth-internal")),new x5(o,r.getProvider("app-check-internal")),(function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new et(ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pI(u.options.projectId,l)})(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),si(V9,B9,e),si(V9,B9,"esm2017")})();var vf=class{constructor(e){return e}},d$="firestore",Pk=class{constructor(){return wg(d$)}};var kk=new wt("angularfire2.firestore-instances");function vpe(n,e){let t=VE(d$,n,e);return t&&new vf(t)}function _pe(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new vf(r)}}var wpe={provide:Pk,deps:[[new Ru,kk]]},bpe={provide:vf,useFactory:vpe,deps:[[new Ru,kk],ef]};function h$(n,...e){return si("angularfire",Zh.full,"fst"),xu([bpe,wpe,{provide:kk,useFactory:_pe(n),multi:!0,deps:[Ar,Ki,Xh,Wv,[new Ru,ZE],[new Ru,jE],...e]}])}var f$=Jo(O9,!0);var E_=Jo(Yz,!0,2);var p$=Jo(Jz,!0,2);var Mk=Jo(u$,!0);var g$=Jo(Zz,!0);var m$=Jo(a$,!0,2),y$=Jo(o$,!0,2);var v$=Jo(l$,!0,2);var KI=class n{constructor(e){this.firestore=e}getTodayString(){return new Date().toISOString().split("T")[0]}async getNextOrderId(){let e=this.getTodayString(),t=E_(this.firestore,`sales/${e}/orders`);return(await Mk(t)).size+1}async saveOrder(e){let t=this.getTodayString(),r=await this.getNextOrderId(),i=p$(E_(this.firestore,`sales/${t}/orders`));await v$(i,Ht(Le({},e),{orderId:r,createdAt:Kp()})),console.log("Order Saved Successfully!")}getTodayOrders(){let e=this.getTodayString(),t=E_(this.firestore,`sales/${e}/orders`),r=y$(t,m$("createdAt","desc"));return f$(r,{idField:"id"})}async calculateDailyRevenue(){let e=this.getTodayString(),t=E_(this.firestore,`sales/${e}/orders`),r=await Mk(t),i=0;return r.forEach(s=>{let o=s.data();i+=o.totalAmount||0}),i}static \u0275fac=function(t){return new(t||n)(Bt(vf))};static \u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"})};var Tpe=["class","component"];function Ape(n,e){if(n&1&&(we(0,"div",5)(1,"p")(2,"strong"),Pe(3),_e(),Pe(4),_e(),we(5,"p"),Pe(6),_e(),we(7,"p"),Pe(8),_e(),we(9,"p"),Pe(10),Km(11,"date"),_e()()),n&2){let t=e.$implicit;We(3),Ur("#",t.orderId),We(),Ur(" - ",t.name),We(2),Sr(t.mobile),We(2),Ur("\u20B9 ",t.totalAmount),We(2),Sr(Qm(11,5,t.createdAt==null?null:t.createdAt.toDate(),"shortTime"))}}var QI=class n{constructor(e){this.salesService=e}totalRevenue=0;orders=[];ngOnInit(){this.salesService.getTodayOrders().subscribe(e=>{this.orders=e}),this.loadRevenue()}async loadRevenue(){this.totalRevenue=await this.salesService.calculateDailyRevenue()}static \u0275fac=function(t){return new(t||n)(_t(KI))};static \u0275cmp=Zs({type:n,selectors:[["app-sales-dashboard",8,"component"]],attrs:Tpe,decls:12,vars:3,consts:[[1,"dashboard"],[1,"stats-card"],[1,"amount"],[1,"orders"],["class","order-card",4,"ngFor","ngForOf"],[1,"order-card"]],template:function(t,r){t&1&&(we(0,"div",0)(1,"h2"),Pe(2,"\u{1F4CA} Sales Dashboard"),_e(),we(3,"div",1)(4,"h3"),Pe(5,"Total Today Revenue"),_e(),we(6,"p",2),Pe(7),_e()(),we(8,"div",3)(9,"h3"),Pe(10),_e(),pi(11,Ape,12,8,"div",4),_e()()),t&2&&(We(7),Ur("\u20B9 ",r.totalRevenue),We(3),Ur("Today Orders (",r.orders.length,")"),We(),Sn("ngForOf",r.orders))},dependencies:[Sa,Bo,Uc,iy],encapsulation:2})};var _$=[{path:"",redirectTo:"menu",pathMatch:"full"},{path:"menu",component:qb},{path:"cart",component:zb},{path:"table-order",component:Hb},{path:"admin",component:NE},{path:"dashboard",component:QI},{path:"**",redirectTo:"menu"}];var YI=class n{constructor(e){this.cartService=e}title="Chanmura";cartCount=0;ngOnInit(){this.cartService.cartCount$.subscribe(e=>{this.cartCount=e})}static \u0275fac=function(t){return new(t||n)(_t(Ca))};static \u0275cmp=Zs({type:n,selectors:[["app-root"]],decls:21,vars:1,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-primary"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto"],[1,"nav-item"],["routerLink","/menu","routerLinkActive","active",1,"nav-link"],["routerLink","/cart","routerLinkActive","active",1,"nav-link"],[1,"badge","bg-danger","ms-1"],["routerLink","/admin","routerLinkActive","active",1,"nav-link"],[1,"container","mt-4"]],template:function(t,r){t&1&&(we(0,"nav",0)(1,"div",1)(2,"a",2),Pe(3,"Naveen's Delhi Malai Chaap Resturant"),_e(),we(4,"button",3),Za(5,"span",4),_e(),we(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),Pe(10,"Menu"),_e()(),we(11,"li",7)(12,"a",9),Pe(13," Cart "),we(14,"span",10),Pe(15),_e()()(),we(16,"li",7)(17,"a",11),Pe(18,"Admin Dashboard"),_e()()()()()(),we(19,"div",12),Za(20,"router-outlet"),_e()),t&2&&(We(15),Ur(" ",r.cartCount," "))},dependencies:[Ay,gp,eC,Bo],styles:[".cart-badge[_ngcontent-%COMP%]{font-size:11px;position:absolute;top:2px;right:8%;padding:4px 6px;animation:_ngcontent-%COMP%_pop .3s ease-out}@keyframes _ngcontent-%COMP%_pop{0%{transform:scale(.5)}70%{transform:scale(1.3)}to{transform:scale(1)}}"]})};var w$={production:!1,firebaseConfig:{apiKey:"AIzaSyBCEL0W095bO9QdRfWp68FzjIYbTVlu6fw",authDomain:"chanmuraresturantui.firebaseapp.com",projectId:"chanmuraresturantui",storageBucket:"chanmuraresturantui.firebasestorage.app",messagingSenderId:"396550554524",appId:"1:396550554524:web:9cf1983e2842dcb5b03e59"}};N2(YI,{providers:[tC(_$),N0(R2,Sa),r9(()=>i9(w$.firebaseConfig)),h$(()=>g$())]});
