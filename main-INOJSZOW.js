var $x=Object.defineProperty,qx=Object.defineProperties;var Hx=Object.getOwnPropertyDescriptors;var Ub=Object.getOwnPropertySymbols;var zx=Object.prototype.hasOwnProperty,Gx=Object.prototype.propertyIsEnumerable;var jb=(n,e,t)=>e in n?$x(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,O=(n,e)=>{for(var t in e||={})zx.call(e,t)&&jb(n,t,e[t]);if(Ub)for(var t of Ub(e))Gx.call(e,t)&&jb(n,t,e[t]);return n},fe=(n,e)=>qx(n,Hx(e));var Ct=null,rh=!1,ty=1,Wx=null,Lt=Symbol("SIGNAL");function ce(n){let e=Ct;return Ct=n,e}function sh(){return Ct}var Fu={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Vu(n){if(rh)throw new Error("");if(Ct===null)return;Ct.consumerOnSignalRead(n);let e=Ct.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Ct.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Ct.producers,t!==void 0&&t.producer===n)){Ct.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Ct&&(!r||Qx(i,Ct)))return;let s=Ko(Ct),a={producer:n,consumer:Ct,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Ct.producersTail=a,e!==void 0?e.nextProducer=a:Ct.producers=a,s&&Hb(n,a)}function Bb(){ty++}function ny(n){if(!(Ko(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===ty)){if(!n.producerMustRecompute(n)&&!ah(n)){ey(n);return}n.producerRecomputeValue(n),ey(n)}}function ry(n){if(n.consumers===void 0)return;let e=rh;rh=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||Kx(r)}}finally{rh=e}}function iy(){return Ct?.consumerAllowSignalWrites!==!1}function Kx(n){n.dirty=!0,ry(n),n.consumerMarkedDirty?.(n)}function ey(n){n.dirty=!1,n.lastCleanEpoch=ty}function Lu(n){return n&&$b(n),ce(n)}function $b(n){n.producersTail=void 0,n.recomputing=!0}function oh(n,e){ce(e),n&&qb(n)}function qb(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Ko(n))do t=sy(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function ah(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(ny(t),r!==t.version))return!0}return!1}function Uu(n){if(Ko(n)){let e=n.producers;for(;e!==void 0;)e=sy(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function Hb(n,e){let t=n.consumersTail,r=Ko(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)Hb(i.producer,i)}function sy(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Ko(e)){let s=e.producers;for(;s!==void 0;)s=sy(s)}return t}function Ko(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function oy(n){Wx?.(n)}function Qx(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function ay(n,e){return Object.is(n,e)}function ch(n,e){let t=Object.create(Yx);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(ny(t),Vu(t),t.value===ih)throw t.error;return t.value};return r[Lt]=t,oy(t),r}var Xm=Symbol("UNSET"),Zm=Symbol("COMPUTING"),ih=Symbol("ERRORED"),Yx=fe(O({},Fu),{value:Xm,dirty:!0,error:null,equal:ay,kind:"computed",producerMustRecompute(n){return n.value===Xm||n.value===Zm},producerRecomputeValue(n){if(n.value===Zm)throw new Error("");let e=n.value;n.value=Zm;let t=Lu(n),r,i=!1;try{r=n.computation(),ce(null),i=e!==Xm&&e!==ih&&r!==ih&&n.equal(e,r)}catch(s){r=ih,n.error=s}finally{oh(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function Jx(){throw new Error}var zb=Jx;function Gb(n){zb(n)}function cy(n){zb=n}var Xx=null;function uy(n,e){let t=Object.create(uh);t.value=n,e!==void 0&&(t.equal=e);let r=()=>Wb(t);return r[Lt]=t,oy(t),[r,a=>ju(t,a),a=>Kb(t,a)]}function Wb(n){return Vu(n),n.value}function ju(n,e){iy()||Gb(n),n.equal(n.value,e)||(n.value=e,Zx(n))}function Kb(n,e){iy()||Gb(n),ju(n,e(n.value))}var uh=fe(O({},Fu),{equal:ay,value:void 0,kind:"signal"});function Zx(n){n.version++,Bb(),ry(n),Xx?.(n)}function ly(n){let e=ce(null);try{return n()}finally{ce(e)}}function oe(n){return typeof n=="function"}function Qo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var lh=Qo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function js(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ot=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(oe(r))try{r()}catch(s){e=s instanceof lh?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Qb(s)}catch(a){e=e??[],a instanceof lh?e=[...e,...a.errors]:e.push(a)}}if(e)throw new lh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Qb(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&js(t,e)}remove(e){let{_finalizers:t}=this;t&&js(t,e),e instanceof n&&e._removeParent(this)}};ot.EMPTY=(()=>{let n=new ot;return n.closed=!0,n})();var dy=ot.EMPTY;function dh(n){return n instanceof ot||n&&"closed"in n&&oe(n.remove)&&oe(n.add)&&oe(n.unsubscribe)}function Qb(n){oe(n)?n():n.unsubscribe()}var Qn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Yo={setTimeout(n,e,...t){let{delegate:r}=Yo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Yo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function hh(n){Yo.setTimeout(()=>{let{onUnhandledError:e}=Qn;if(e)e(n);else throw n})}function Bu(){}var Yb=hy("C",void 0,void 0);function Jb(n){return hy("E",void 0,n)}function Xb(n){return hy("N",n,void 0)}function hy(n,e,t){return{kind:n,value:e,error:t}}var Bs=null;function Jo(n){if(Qn.useDeprecatedSynchronousErrorHandling){let e=!Bs;if(e&&(Bs={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Bs;if(Bs=null,t)throw r}}else n()}function Zb(n){Qn.useDeprecatedSynchronousErrorHandling&&Bs&&(Bs.errorThrown=!0,Bs.error=n)}var $s=class extends ot{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,dh(e)&&e.add(this)):this.destination=nk}static create(e,t,r){return new Xo(e,t,r)}next(e){this.isStopped?py(Xb(e),this):this._next(e)}error(e){this.isStopped?py(Jb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?py(Yb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},ek=Function.prototype.bind;function fy(n,e){return ek.call(n,e)}var gy=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){fh(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){fh(r)}else fh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){fh(t)}}},Xo=class extends $s{constructor(e,t,r){super();let i;if(oe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Qn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&fy(e.next,s),error:e.error&&fy(e.error,s),complete:e.complete&&fy(e.complete,s)}):i=e}this.destination=new gy(i)}};function fh(n){Qn.useDeprecatedSynchronousErrorHandling?Zb(n):hh(n)}function tk(n){throw n}function py(n,e){let{onStoppedNotification:t}=Qn;t&&Yo.setTimeout(()=>t(n,e))}var nk={closed:!0,next:Bu,error:tk,complete:Bu};var Zo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Yn(n){return n}function my(...n){return yy(n)}function yy(n){return n.length===0?Yn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ue=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=ik(t)?t:new Xo(t,r,i);return Jo(()=>{let{operator:a,source:c}=this;s.add(a?a.call(s,c):c?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=eD(r),new r((i,s)=>{let a=new Xo({next:c=>{try{t(c)}catch(l){s(l),a.unsubscribe()}},error:s,complete:i});this.subscribe(a)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Zo](){return this}pipe(...t){return yy(t)(this)}toPromise(t){return t=eD(t),new t((r,i)=>{let s;this.subscribe(a=>s=a,a=>i(a),()=>r(s))})}}return n.create=e=>new n(e),n})();function eD(n){var e;return(e=n??Qn.Promise)!==null&&e!==void 0?e:Promise}function rk(n){return n&&oe(n.next)&&oe(n.error)&&oe(n.complete)}function ik(n){return n&&n instanceof $s||rk(n)&&dh(n)}function sk(n){return oe(n?.lift)}function Pe(n){return e=>{if(sk(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Me(n,e,t,r,i){return new _y(n,e,t,r,i)}var _y=class extends $s{constructor(e,t,r,i,s,a){super(e),this.onFinalize=s,this.shouldUnsubscribe=a,this._next=t?function(c){try{t(c)}catch(l){e.error(l)}}:super._next,this._error=i?function(c){try{i(c)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var tD=Qo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Je=(()=>{class n extends ue{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new ph(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new tD}next(t){Jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?dy:(this.currentObservers=null,s.push(t),new ot(()=>{this.currentObservers=null,js(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new ue;return t.source=this,t}}return n.create=(e,t)=>new ph(e,t),n})(),ph=class extends Je{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:dy}};var at=class extends Je{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var vy={now(){return(vy.delegate||Date).now()},delegate:void 0};var gh=class extends ot{constructor(e,t){super()}schedule(e,t=0){return this}};var $u={setInterval(n,e,...t){let{delegate:r}=$u;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=$u;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ea=class extends gh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return $u.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&$u.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,js(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ta=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ta.now=vy.now;var na=class extends ta{constructor(e,t=ta.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Ey=new na(ea);var mh=class extends ea{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var yh=class extends na{};var Iy=new yh(mh);var Wt=new ue(n=>n.complete());function nD(n){return n&&oe(n.schedule)}function rD(n){return n[n.length-1]}function _h(n){return oe(rD(n))?n.pop():void 0}function xi(n){return nD(rD(n))?n.pop():void 0}function wy(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function sD(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function c(p){try{h(r.next(p))}catch(_){a(_)}}function l(p){try{h(r.throw(p))}catch(_){a(_)}}function h(p){p.done?s(p.value):i(p.value).then(c,l)}h((r=r.apply(n,e||[])).next())})}function iD(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qs(n){return this instanceof qs?(this.v=n,this):new qs(n)}function oD(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(C){return function(A){return Promise.resolve(A).then(C,_)}}function c(C,A){r[C]&&(i[C]=function(N){return new Promise(function(R,x){s.push([C,N,R,x])>1||l(C,N)})},A&&(i[C]=A(i[C])))}function l(C,A){try{h(r[C](A))}catch(N){w(s[0][3],N)}}function h(C){C.value instanceof qs?Promise.resolve(C.value.v).then(p,_):w(s[0][2],C)}function p(C){l("next",C)}function _(C){l("throw",C)}function w(C,A){C(A),s.shift(),s.length&&l(s[0][0],s[0][1])}}function aD(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof iD=="function"?iD(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(a){return new Promise(function(c,l){a=n[s](a),i(c,l,a.done,a.value)})}}function i(s,a,c,l){Promise.resolve(l).then(function(h){s({value:h,done:c})},a)}}var vh=n=>n&&typeof n.length=="number"&&typeof n!="function";function Eh(n){return oe(n?.then)}function Ih(n){return oe(n[Zo])}function wh(n){return Symbol.asyncIterator&&oe(n?.[Symbol.asyncIterator])}function Th(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function ok(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var bh=ok();function Dh(n){return oe(n?.[bh])}function Ch(n){return oD(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield qs(t.read());if(i)return yield qs(void 0);yield yield qs(r)}}finally{t.releaseLock()}})}function Ah(n){return oe(n?.getReader)}function Xe(n){if(n instanceof ue)return n;if(n!=null){if(Ih(n))return ak(n);if(vh(n))return ck(n);if(Eh(n))return uk(n);if(wh(n))return cD(n);if(Dh(n))return lk(n);if(Ah(n))return dk(n)}throw Th(n)}function ak(n){return new ue(e=>{let t=n[Zo]();if(oe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ck(n){return new ue(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function uk(n){return new ue(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,hh)})}function lk(n){return new ue(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function cD(n){return new ue(e=>{hk(n,e).catch(t=>e.error(t))})}function dk(n){return cD(Ch(n))}function hk(n,e){var t,r,i,s;return sD(this,void 0,void 0,function*(){try{for(t=aD(n);r=yield t.next(),!r.done;){let a=r.value;if(e.next(a),e.closed)return}}catch(a){i={error:a}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Kt(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function ki(n,e=0){return Pe((t,r)=>{t.subscribe(Me(r,i=>Kt(r,n,()=>r.next(i),e),()=>Kt(r,n,()=>r.complete(),e),i=>Kt(r,n,()=>r.error(i),e)))})}function Oi(n,e=0){return Pe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function uD(n,e){return Xe(n).pipe(Oi(e),ki(e))}function lD(n,e){return Xe(n).pipe(Oi(e),ki(e))}function dD(n,e){return new ue(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function hD(n,e){return new ue(t=>{let r;return Kt(t,e,()=>{r=n[bh](),Kt(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(a){t.error(a);return}s?t.complete():t.next(i)},0,!0)}),()=>oe(r?.return)&&r.return()})}function Sh(n,e){if(!n)throw new Error("Iterable cannot be null");return new ue(t=>{Kt(t,e,()=>{let r=n[Symbol.asyncIterator]();Kt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function fD(n,e){return Sh(Ch(n),e)}function pD(n,e){if(n!=null){if(Ih(n))return uD(n,e);if(vh(n))return dD(n,e);if(Eh(n))return lD(n,e);if(wh(n))return Sh(n,e);if(Dh(n))return hD(n,e);if(Ah(n))return fD(n,e)}throw Th(n)}function Ke(n,e){return e?pD(n,e):Xe(n)}function le(...n){let e=xi(n);return Ke(n,e)}function Ty(n,e){let t=oe(n)?n:()=>n,r=i=>i.error(t());return new ue(e?i=>e.schedule(r,0,i):r)}function Rh(n){return!!n&&(n instanceof ue||oe(n.lift)&&oe(n.subscribe))}var Hs=Qo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Le(n,e){return Pe((t,r)=>{let i=0;t.subscribe(Me(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:fk}=Array;function pk(n,e){return fk(e)?n(...e):n(e)}function Nh(n){return Le(e=>pk(n,e))}var{isArray:gk}=Array,{getPrototypeOf:mk,prototype:yk,keys:_k}=Object;function Ph(n){if(n.length===1){let e=n[0];if(gk(e))return{args:e,keys:null};if(vk(e)){let t=_k(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function vk(n){return n&&typeof n=="object"&&mk(n)===yk}function Mh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function by(...n){let e=xi(n),t=_h(n),{args:r,keys:i}=Ph(n);if(r.length===0)return Ke([],e);let s=new ue(Ek(r,e,i?a=>Mh(i,a):Yn));return t?s.pipe(Nh(t)):s}function Ek(n,e,t=Yn){return r=>{gD(e,()=>{let{length:i}=n,s=new Array(i),a=i,c=i;for(let l=0;l<i;l++)gD(e,()=>{let h=Ke(n[l],e),p=!1;h.subscribe(Me(r,_=>{s[l]=_,p||(p=!0,c--),c||r.next(t(s.slice()))},()=>{--a||r.complete()}))},r)},r)}}function gD(n,e,t){n?Kt(t,n,e):e()}function mD(n,e,t,r,i,s,a,c){let l=[],h=0,p=0,_=!1,w=()=>{_&&!l.length&&!h&&e.complete()},C=N=>h<r?A(N):l.push(N),A=N=>{s&&e.next(N),h++;let R=!1;Xe(t(N,p++)).subscribe(Me(e,x=>{i?.(x),s?C(x):e.next(x)},()=>{R=!0},void 0,()=>{if(R)try{for(h--;l.length&&h<r;){let x=l.shift();a?Kt(e,a,()=>A(x)):A(x)}w()}catch(x){e.error(x)}}))};return n.subscribe(Me(e,C,()=>{_=!0,w()})),()=>{c?.()}}function At(n,e,t=1/0){return oe(e)?At((r,i)=>Le((s,a)=>e(r,s,i,a))(Xe(n(r,i))),t):(typeof e=="number"&&(t=e),Pe((r,i)=>mD(r,i,n,t)))}function ra(n=1/0){return At(Yn,n)}function yD(){return ra(1)}function ia(...n){return yD()(Ke(n,xi(n)))}function qu(n){return new ue(e=>{Xe(n()).subscribe(e)})}function Dy(...n){let e=_h(n),{args:t,keys:r}=Ph(n),i=new ue(s=>{let{length:a}=t;if(!a){s.complete();return}let c=new Array(a),l=a,h=a;for(let p=0;p<a;p++){let _=!1;Xe(t[p]).subscribe(Me(s,w=>{_||(_=!0,h--),c[p]=w},()=>l--,void 0,()=>{(!l||!_)&&(h||s.next(r?Mh(r,c):c),s.complete())}))}});return e?i.pipe(Nh(e)):i}function Jn(n,e){return Pe((t,r)=>{let i=0;t.subscribe(Me(r,s=>n.call(e,s,i++)&&r.next(s)))})}function sa(n){return Pe((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Me(t,void 0,void 0,a=>{s=Xe(n(a,sa(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Hu(n,e){return oe(e)?At(n,e,1):At(n,1)}function Cy(n){return Pe((e,t)=>{let r=!1;e.subscribe(Me(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ai(n){return n<=0?()=>Wt:Pe((e,t)=>{let r=0;e.subscribe(Me(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function _D(n=Ik){return Pe((e,t)=>{let r=!1;e.subscribe(Me(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Ik(){return new Hs}function Ay(n){return Pe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function ci(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Jn((i,s)=>n(i,s,r)):Yn,ai(1),t?Cy(e):_D(()=>new Hs))}function xh(n){return n<=0?()=>Wt:Pe((e,t)=>{let r=[];e.subscribe(Me(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Sy(...n){let e=xi(n);return Pe((t,r)=>{(e?ia(n,t,e):ia(n,t)).subscribe(r)})}function vr(n,e){return Pe((t,r)=>{let i=null,s=0,a=!1,c=()=>a&&!i&&r.complete();t.subscribe(Me(r,l=>{i?.unsubscribe();let h=0,p=s++;Xe(n(l,p)).subscribe(i=Me(r,_=>r.next(e?e(l,_,p,h++):_),()=>{i=null,c()}))},()=>{a=!0,c()}))})}function zu(n){return Pe((e,t)=>{Xe(n).subscribe(Me(t,()=>t.complete(),Bu)),!t.closed&&e.subscribe(t)})}function Ut(n,e,t){let r=oe(n)||e||t?{next:n,error:e,complete:t}:n;return r?Pe((i,s)=>{var a;(a=r.subscribe)===null||a===void 0||a.call(r);let c=!0;i.subscribe(Me(s,l=>{var h;(h=r.next)===null||h===void 0||h.call(r,l),s.next(l)},()=>{var l;c=!1,(l=r.complete)===null||l===void 0||l.call(r),s.complete()},l=>{var h;c=!1,(h=r.error)===null||h===void 0||h.call(r,l),s.error(l)},()=>{var l,h;c&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(h=r.finalize)===null||h===void 0||h.call(r)}))}):Yn}var Ry;function kh(){return Ry}function Er(n){let e=Ry;return Ry=n,e}var vD=Symbol("NotFound");function oa(n){return n===vD||n?.name==="\u0275NotFound"}var Gs=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},zy=new Gs("21.0.0");var Uh="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",$=class extends Error{code;constructor(e,t){super(ca(e,t)),this.code=e}};function bk(n){return`NG0${Math.abs(n)}`}function ca(n,e){return`${bk(n)}${e?": "+e:""}`}var gn=globalThis;function xe(n){for(let e in n)if(n[e]===xe)return e;throw Error("")}function bD(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function li(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(li).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Gy(n,e){return n?e?`${n} ${e}`:n:e||""}var Dk=xe({__forward_ref__:xe});function Vi(n){return n.__forward_ref__=Vi,n.toString=function(){return li(this())},n}function Et(n){return Wy(n)?n():n}function Wy(n){return typeof n=="function"&&n.hasOwnProperty(Dk)&&n.__forward_ref__===Vi}function q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function mn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ju(n){return Ck(n,jh)}function Ky(n){return Ju(n)!==null}function Ck(n,e){return n.hasOwnProperty(e)&&n[e]||null}function Ak(n){let e=n?.[jh]??null;return e||null}function Py(n){return n&&n.hasOwnProperty(Fh)?n[Fh]:null}var jh=xe({\u0275prov:xe}),Fh=xe({\u0275inj:xe}),H=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Qy(n){return n&&!!n.\u0275providers}var Yy=xe({\u0275cmp:xe}),Jy=xe({\u0275dir:xe}),Xy=xe({\u0275pipe:xe}),Zy=xe({\u0275mod:xe}),Wu=xe({\u0275fac:xe}),Xs=xe({__NG_ELEMENT_ID__:xe}),ED=xe({__NG_ENV_ID__:xe});function ua(n){return typeof n=="string"?n:n==null?"":String(n)}function DD(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ua(n)}var CD=xe({ngErrorCode:xe}),Sk=xe({ngErrorMessage:xe}),Rk=xe({ngTokenPath:xe});function e_(n,e){return AD("",-200,e)}function Bh(n,e){throw new $(-201,!1)}function AD(n,e,t){let r=new $(e,n);return r[CD]=e,r[Sk]=n,t&&(r[Rk]=t),r}function Nk(n){return n[CD]}var My;function SD(){return My}function nn(n){let e=My;return My=n,e}function t_(n,e,t){let r=Ju(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Bh(n,"Injector")}var Pk={},zs=Pk,xy="__NG_DI_FLAG__",ky=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Ws(t)||0;try{return this.injector.get(e,r&8?null:zs,r)}catch(i){if(oa(i))return i;throw i}}};function Mk(n,e=0){let t=kh();if(t===void 0)throw new $(-203,!1);if(t===null)return t_(n,void 0,e);{let r=xk(e),i=t.retrieve(n,r);if(oa(i)){if(r.optional)return null;throw i}return i}}function Z(n,e=0){return(SD()||Mk)(Et(n),e)}function M(n,e){return Z(n,Ws(e))}function Ws(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function xk(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Oy(n){let e=[];for(let t=0;t<n.length;t++){let r=Et(n[t]);if(Array.isArray(r)){if(r.length===0)throw new $(900,!1);let i,s=0;for(let a=0;a<r.length;a++){let c=r[a],l=kk(c);typeof l=="number"?l===-1?i=c.token:s|=l:i=c}e.push(Z(i,s))}else e.push(Z(r))}return e}function RD(n,e){return n[xy]=e,n.prototype[xy]=e,n}function kk(n){return n[xy]}function Ks(n,e){let t=n.hasOwnProperty(Wu);return t?n[Wu]:null}function ND(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function PD(n){return n.flat(Number.POSITIVE_INFINITY)}function $h(n,e){n.forEach(t=>Array.isArray(t)?$h(t,e):e(t))}function n_(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Xu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function MD(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function xD(n,e,t){let r=la(n,e);return r>=0?n[r|1]=t:(r=~r,MD(n,r,e,t)),r}function qh(n,e){let t=la(n,e);if(t>=0)return n[t|1]}function la(n,e){return Ok(n,e,1)}function Ok(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),a=n[s<<t];if(e===a)return s<<t;a>e?i=s:r=s+1}return~(i<<t)}var Li={},rn=[],da=new H(""),r_=new H("",-1),i_=new H(""),Ku=class{get(e,t=zs){if(t===zs){let i=AD("",-201);throw i.name="\u0275NotFound",i}return t}};function s_(n){return n[Zy]||null}function Ui(n){return n[Yy]||null}function o_(n){return n[Jy]||null}function kD(n){return n[Xy]||null}function hi(n){return{\u0275providers:n}}function Hh(...n){return{\u0275providers:a_(!0,n),\u0275fromNgModule:!0}}function a_(n,...e){let t=[],r=new Set,i,s=a=>{t.push(a)};return $h(e,a=>{let c=a;Vh(c,s,[],r)&&(i||=[],i.push(c))}),i!==void 0&&OD(i,s),t}function OD(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];c_(i,s=>{e(s,r)})}}function Vh(n,e,t,r){if(n=Et(n),!n)return!1;let i=null,s=Py(n),a=!s&&Ui(n);if(!s&&!a){let l=n.ngModule;if(s=Py(l),s)i=l;else return!1}else{if(a&&!a.standalone)return!1;i=n}let c=r.has(i);if(a){if(c)return!1;if(r.add(i),a.dependencies){let l=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let h of l)Vh(h,e,t,r)}}else if(s){if(s.imports!=null&&!c){r.add(i);let h;try{$h(s.imports,p=>{Vh(p,e,t,r)&&(h||=[],h.push(p))})}finally{}h!==void 0&&OD(h,e)}if(!c){let h=Ks(i)||(()=>new i);e({provide:i,useFactory:h,deps:rn},i),e({provide:i_,useValue:i,multi:!0},i),e({provide:da,useValue:()=>Z(i),multi:!0},i)}let l=s.providers;if(l!=null&&!c){let h=n;c_(l,p=>{e(p,h)})}}else return!1;return i!==n&&n.providers!==void 0}function c_(n,e){for(let t of n)Qy(t)&&(t=t.\u0275providers),Array.isArray(t)?c_(t,e):e(t)}var Fk=xe({provide:String,useValue:xe});function FD(n){return n!==null&&typeof n=="object"&&Fk in n}function Vk(n){return!!(n&&n.useExisting)}function Lk(n){return!!(n&&n.useFactory)}function Qs(n){return typeof n=="function"}function VD(n){return!!n.useClass}var Zu=new H(""),Oh={},ID={},Ny;function el(){return Ny===void 0&&(Ny=new Ku),Ny}var ct=class{},Ys=class extends ct{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Vy(e,a=>this.processProvider(a)),this.records.set(r_,aa(void 0,this)),i.has("environment")&&this.records.set(ct,aa(void 0,this));let s=this.records.get(Zu);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(i_,rn,{self:!0}))}retrieve(e,t){let r=Ws(t)||0;try{return this.get(e,zs,r)}catch(i){if(oa(i))return i;throw i}}destroy(){Gu(this),this._destroyed=!0;let e=ce(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ce(e)}}onDestroy(e){return Gu(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Gu(this);let t=Er(this),r=nn(void 0),i;try{return e()}finally{Er(t),nn(r)}}get(e,t=zs,r){if(Gu(this),e.hasOwnProperty(ED))return e[ED](this);let i=Ws(r),s,a=Er(this),c=nn(void 0);try{if(!(i&4)){let h=this.records.get(e);if(h===void 0){let p=qk(e)&&Ju(e);p&&this.injectableDefInScope(p)?h=aa(Fy(e),Oh):h=null,this.records.set(e,h)}if(h!=null)return this.hydrate(e,h,i)}let l=i&2?el():this.parent;return t=i&8&&t===zs?null:t,l.get(e,t)}catch(l){let h=Nk(l);throw h===-200||h===-201?new $(h,null):l}finally{nn(c),Er(a)}}resolveInjectorInitializers(){let e=ce(null),t=Er(this),r=nn(void 0),i;try{let s=this.get(da,rn,{self:!0});for(let a of s)a()}finally{Er(t),nn(r),ce(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(li(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Et(e);let t=Qs(e)?e:Et(e&&e.provide),r=jk(e);if(!Qs(e)&&e.multi===!0){let i=this.records.get(t);i||(i=aa(void 0,Oh,!0),i.factory=()=>Oy(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=ce(null);try{if(t.value===ID)throw e_(li(e));return t.value===Oh&&(t.value=ID,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&$k(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ce(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Et(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Fy(n){let e=Ju(n),t=e!==null?e.factory:Ks(n);if(t!==null)return t;if(n instanceof H)throw new $(204,!1);if(n instanceof Function)return Uk(n);throw new $(204,!1)}function Uk(n){if(n.length>0)throw new $(204,!1);let t=Ak(n);return t!==null?()=>t.factory(n):()=>new n}function jk(n){if(FD(n))return aa(void 0,n.useValue);{let e=u_(n);return aa(e,Oh)}}function u_(n,e,t){let r;if(Qs(n)){let i=Et(n);return Ks(i)||Fy(i)}else if(FD(n))r=()=>Et(n.useValue);else if(Lk(n))r=()=>n.useFactory(...Oy(n.deps||[]));else if(Vk(n))r=(i,s)=>Z(Et(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=Et(n&&(n.useClass||n.provide));if(Bk(n))r=()=>new i(...Oy(n.deps));else return Ks(i)||Fy(i)}return r}function Gu(n){if(n.destroyed)throw new $(205,!1)}function aa(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Bk(n){return!!n.deps}function $k(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function qk(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Vy(n,e){for(let t of n)Array.isArray(t)?Vy(t,e):t&&Qy(t)?Vy(t.\u0275providers,e):e(t)}function ut(n,e){let t;n instanceof Ys?(Gu(n),t=n):t=new ky(n);let r,i=Er(t),s=nn(void 0);try{return e()}finally{Er(i),nn(s)}}function l_(){return SD()!==void 0||kh()!=null}var Xn=0,ee=1,ne=2,ht=3,yn=4,_n=5,tl=6,ha=7,St=8,ji=9,Ir=10,qe=11,fa=12,d_=13,Zs=14,vn=15,Bi=16,eo=17,wr=18,nl=19,h_=20,ui=21,zh=22,rl=23,sn=24,Gh=25,il=26,on=27,LD=1;var $i=7,sl=8,to=9,jt=10;function Tr(n){return Array.isArray(n)&&typeof n[LD]=="object"}function Zn(n){return Array.isArray(n)&&n[LD]===!0}function f_(n){return(n.flags&4)!==0}function qi(n){return n.componentOffset>-1}function ol(n){return(n.flags&1)===1}function br(n){return!!n.template}function pa(n){return(n[ne]&512)!==0}function no(n){return(n[ne]&256)===256}var UD="svg",jD="math";function En(n){for(;Array.isArray(n);)n=n[Xn];return n}function p_(n,e){return En(e[n])}function er(n,e){return En(e[n.index])}function Wh(n,e){return n.data[e]}function In(n,e){let t=e[n];return Tr(t)?t:t[Xn]}function BD(n){return(n[ne]&4)===4}function Kh(n){return(n[ne]&128)===128}function $D(n){return Zn(n[ht])}function al(n,e){return e==null?null:n[e]}function g_(n){n[eo]=0}function m_(n){n[ne]&1024||(n[ne]|=1024,Kh(n)&&ul(n))}function qD(n,e){for(;n>0;)e=e[Zs],n--;return e}function cl(n){return!!(n[ne]&9216||n[sn]?.dirty)}function Qh(n){n[Ir].changeDetectionScheduler?.notify(8),n[ne]&64&&(n[ne]|=1024),cl(n)&&ul(n)}function ul(n){n[Ir].changeDetectionScheduler?.notify(0);let e=Fi(n);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!Kh(e)));)e=Fi(e)}function y_(n,e){if(no(n))throw new $(911,!1);n[ui]===null&&(n[ui]=[]),n[ui].push(e)}function HD(n,e){if(n[ui]===null)return;let t=n[ui].indexOf(e);t!==-1&&n[ui].splice(t,1)}function Fi(n){let e=n[ht];return Zn(e)?e[ht]:e}function __(n){return n[ha]??=[]}function v_(n){return n.cleanup??=[]}function zD(n,e,t,r){let i=__(e);i.push(t),n.firstCreatePass&&v_(n).push(r,i.length-1)}var de={lFrame:aC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Ly=!1;function GD(){return de.lFrame.elementDepthCount}function WD(){de.lFrame.elementDepthCount++}function KD(){de.lFrame.elementDepthCount--}function E_(){return de.bindingsEnabled}function QD(){return de.skipHydrationRootTNode!==null}function YD(n){return de.skipHydrationRootTNode===n}function JD(){de.skipHydrationRootTNode=null}function ke(){return de.lFrame.lView}function Bt(){return de.lFrame.tView}function an(n){return de.lFrame.contextLView=n,n[St]}function cn(n){return de.lFrame.contextLView=null,n}function $t(){let n=I_();for(;n!==null&&n.type===64;)n=n.parent;return n}function I_(){return de.lFrame.currentTNode}function XD(){let n=de.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ga(n,e){let t=de.lFrame;t.currentTNode=n,t.isParent=e}function w_(){return de.lFrame.isParent}function ZD(){de.lFrame.isParent=!1}function T_(){return Ly}function b_(n){let e=Ly;return Ly=n,e}function eC(n){return de.lFrame.bindingIndex=n}function ma(){return de.lFrame.bindingIndex++}function tC(n){let e=de.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function nC(){return de.lFrame.inI18n}function rC(n,e){let t=de.lFrame;t.bindingIndex=t.bindingRootIndex=n,Yh(e)}function iC(){return de.lFrame.currentDirectiveIndex}function Yh(n){de.lFrame.currentDirectiveIndex=n}function sC(n){let e=de.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function D_(){return de.lFrame.currentQueryIndex}function Jh(n){de.lFrame.currentQueryIndex=n}function Hk(n){let e=n[ee];return e.type===2?e.declTNode:e.type===1?n[_n]:null}function C_(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=Hk(s),i===null||(s=s[Zs],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=de.lFrame=oC();return r.currentTNode=e,r.lView=n,!0}function Xh(n){let e=oC(),t=n[ee];de.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function oC(){let n=de.lFrame,e=n===null?null:n.child;return e===null?aC(n):e}function aC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function cC(){let n=de.lFrame;return de.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var A_=cC;function Zh(){let n=cC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function uC(n){return(de.lFrame.contextLView=qD(n,de.lFrame.contextLView))[St]}function ro(){return de.lFrame.selectedIndex}function Hi(n){de.lFrame.selectedIndex=n}function ef(){let n=de.lFrame;return Wh(n.tView,n.selectedIndex)}function lC(){return de.lFrame.currentNamespace}var dC=!0;function tf(){return dC}function nf(n){dC=n}function Uy(n,e=null,t=null,r){let i=S_(n,e,t,r);return i.resolveInjectorInitializers(),i}function S_(n,e=null,t=null,r,i=new Set){let s=[t||rn,Hh(n)];return r=r||(typeof n=="object"?void 0:li(n)),new Ys(s,e||el(),r||null,i)}var It=class n{static THROW_IF_NOT_FOUND=zs;static NULL=new Ku;static create(e,t){if(Array.isArray(e))return Uy({name:""},t,e,"");{let r=e.name??"";return Uy({name:r},e.parent,e.providers,r)}}static \u0275prov=q({token:n,providedIn:"any",factory:()=>Z(r_)});static __NG_ELEMENT_ID__=-1},qt=new H(""),fi=(()=>{class n{static __NG_ELEMENT_ID__=zk;static __NG_ENV_ID__=t=>t}return n})(),jy=class extends fi{_lView;constructor(e){super(),this._lView=e}get destroyed(){return no(this._lView)}onDestroy(e){let t=this._lView;return y_(t,e),()=>HD(t,e)}};function zk(){return new jy(ke())}var hC=!1,pi=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new at(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ue(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),By=class extends Je{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,l_()&&(this.destroyRef=M(fi,{optional:!0})??void 0,this.pendingTasks=M(pi,{optional:!0})??void 0)}emit(e){let t=ce(null);try{super.next(e)}finally{ce(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),a=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),s=l.error?.bind(l),a=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),a&&(a=this.wrapInTimeout(a)));let c=super.subscribe({next:i,error:s,complete:a});return e instanceof ot&&e.add(c),c}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ze=By;function Lh(...n){}function R_(n){let e,t;function r(){n=Lh;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function N_(n){return queueMicrotask(()=>n()),()=>{n=Lh}}var P_="isAngularZone",Qu=P_+"_ID",Gk=0,$e=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ze(!1);onMicrotaskEmpty=new Ze(!1);onStable=new Ze(!1);onError=new Ze(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=hC}=e;if(typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();let a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!i&&r,a.shouldCoalesceRunChangeDetection=i,a.callbackScheduled=!1,a.scheduleInRootZone=s,Qk(a)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(P_)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new $(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,a=s.scheduleEventTask("NgZoneEvent: "+i,e,Wk,Lh,Lh);try{return s.runTask(a,t,r)}finally{s.cancelTask(a)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Wk={};function M_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Kk(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){R_(()=>{n.callbackScheduled=!1,$y(n),n.isCheckStableRunning=!0,M_(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),$y(n)}function Qk(n){let e=()=>{Kk(n)},t=Gk++;n._inner=n._inner.fork({name:"angular",properties:{[P_]:!0,[Qu]:t,[Qu+t]:!0},onInvokeTask:(r,i,s,a,c,l)=>{if(Yk(l))return r.invokeTask(s,a,c,l);try{return wD(n),r.invokeTask(s,a,c,l)}finally{(n.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),TD(n)}},onInvoke:(r,i,s,a,c,l,h)=>{try{return wD(n),r.invoke(s,a,c,l,h)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Jk(l)&&e(),TD(n)}},onHasTask:(r,i,s,a)=>{r.hasTask(s,a),i===s&&(a.change=="microTask"?(n._hasPendingMicrotasks=a.microTask,$y(n),M_(n)):a.change=="macroTask"&&(n.hasPendingMacrotasks=a.macroTask))},onHandleError:(r,i,s,a)=>(r.handleError(s,a),n.runOutsideAngular(()=>n.onError.emit(a)),!1)})}function $y(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function wD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function TD(n){n._nesting--,M_(n)}var Yu=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ze;onMicrotaskEmpty=new Ze;onStable=new Ze;onError=new Ze;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Yk(n){return fC(n,"__ignore_ng_zone__")}function Jk(n){return fC(n,"__scheduler_tick__")}function fC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var di=class{_console=console;handleError(e){this._console.error("ERROR",e)}},wn=new H("",{factory:()=>{let n=M($e),e=M(ct),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(di),t.handleError(r))})}}}),pC={provide:da,useValue:()=>{let n=M(di,{optional:!0})},multi:!0};function Ht(n,e){let[t,r,i]=uy(n,e?.equal),s=t,a=s[Lt];return s.set=r,s.update=i,s.asReadonly=gC.bind(s),s}function gC(){let n=this[Lt];if(n.readonlyFn===void 0){let e=()=>this();e[Lt]=n,n.readonlyFn=e}return n.readonlyFn}var Js=class{},ll=new H("",{factory:()=>!0});var x_=new H(""),ya=(()=>{class n{internalPendingTasks=M(pi);scheduler=M(Js);errorHandler=M(wn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),k_=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>new qy})}return n})(),qy=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},Hy=class{[Lt];constructor(e){this[Lt]=e}destroy(){this[Lt].destroy()}};function lt(n){return ly(n)}function ba(n){return{toString:n}.toString()}var rf="__parameters__";function aO(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function cO(n,e,t){return ba(()=>{let r=aO(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let a=new i(...s);return c.annotation=a,c;function c(l,h,p){let _=l.hasOwnProperty(rf)?l[rf]:Object.defineProperty(l,rf,{value:[]})[rf];for(;_.length<=p;)_.push(null);return(_[p]=_[p]||[]).push(a),l}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var gi=RD(cO("Optional"),8);function uO(n){return typeof n=="function"}function zC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var df=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},mi=(()=>{let n=()=>GC;return n.ngInherit=!0,n})();function GC(n){return n.type.prototype.ngOnChanges&&(n.setInput=dO),lO}function lO(){let n=KC(this),e=n?.current;if(e){let t=n.previous;if(t===Li)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function dO(n,e,t,r,i){let s=this.declaredInputs[r],a=KC(n)||hO(n,{previous:Li,current:null}),c=a.current||(a.current={}),l=a.previous,h=l[s];c[s]=new df(h&&h.currentValue,t,l===Li),zC(n,e,i,t)}var WC="__ngSimpleChanges__";function KC(n){return n[WC]||null}function hO(n,e){return n[WC]=e}var mC=[];var Ve=function(n,e=null,t){for(let r=0;r<mC.length;r++){let i=mC[r];i(n,e,t)}};function fO(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let a=GC(e);(t.preOrderHooks??=[]).push(n,a),(t.preOrderCheckHooks??=[]).push(n,a)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function QC(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:c,ngAfterViewInit:l,ngAfterViewChecked:h,ngOnDestroy:p}=s;a&&(n.contentHooks??=[]).push(-t,a),c&&((n.contentHooks??=[]).push(t,c),(n.contentCheckHooks??=[]).push(t,c)),l&&(n.viewHooks??=[]).push(-t,l),h&&((n.viewHooks??=[]).push(t,h),(n.viewCheckHooks??=[]).push(t,h)),p!=null&&(n.destroyHooks??=[]).push(t,p)}}function af(n,e,t){YC(n,e,3,t)}function cf(n,e,t,r){(n[ne]&3)===t&&YC(n,e,t,r)}function O_(n,e){let t=n[ne];(t&3)===e&&(t&=16383,t+=1,n[ne]=t)}function YC(n,e,t,r){let i=r!==void 0?n[eo]&65535:0,s=r??-1,a=e.length-1,c=0;for(let l=i;l<a;l++)if(typeof e[l+1]=="number"){if(c=e[l],r!=null&&c>=r)break}else e[l]<0&&(n[eo]+=65536),(c<s||s==-1)&&(pO(n,t,e,l),n[eo]=(n[eo]&4294901760)+l+2),l++}function yC(n,e){Ve(4,n,e);let t=ce(null);try{e.call(n)}finally{ce(t),Ve(5,n,e)}}function pO(n,e,t,r){let i=t[r]<0,s=t[r+1],a=i?-t[r]:t[r],c=n[a];i?n[ne]>>14<n[eo]>>16&&(n[ne]&3)===e&&(n[ne]+=16384,yC(c,s)):yC(c,s)}var va=-1,so=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function gO(n){return(n.flags&8)!==0}function mO(n){return(n.flags&16)!==0}function yO(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],a=t[r++],c=t[r++];n.setAttribute(e,a,c,s)}else{let s=i,a=t[++r];_O(s)?n.setProperty(e,s,a):n.setAttribute(e,s,a),r++}}return r}function JC(n){return n===3||n===4||n===6}function _O(n){return n.charCodeAt(0)===64}function fl(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?_C(n,t,i,null,e[++r]):_C(n,t,i,null,null))}}return n}function _C(n,e,t,r,i){let s=0,a=n.length;if(e===-1)a=-1;else for(;s<n.length;){let c=n[s++];if(typeof c=="number"){if(c===e){a=-1;break}else if(c>e){a=s-1;break}}}for(;s<n.length;){let c=n[s];if(typeof c=="number")break;if(c===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}a!==-1&&(n.splice(a,0,e),s=a+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function XC(n){return n!==va}function hf(n){return n&32767}function vO(n){return n>>16}function ff(n,e){let t=vO(n),r=e;for(;t>0;)r=r[Zs],t--;return r}var z_=!0;function vC(n){let e=z_;return z_=n,e}var EO=256,ZC=EO-1,e0=5,IO=0,Dr={};function wO(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Xs)&&(r=t[Xs]),r==null&&(r=t[Xs]=IO++);let i=r&ZC,s=1<<i;e.data[n+(i>>e0)]|=s}function pf(n,e){let t=t0(n,e);if(t!==-1)return t;let r=e[ee];r.firstCreatePass&&(n.injectorIndex=e.length,F_(r.data,n),F_(e,null),F_(r.blueprint,null));let i=pv(n,e),s=n.injectorIndex;if(XC(i)){let a=hf(i),c=ff(i,e),l=c[ee].data;for(let h=0;h<8;h++)e[s+h]=c[a+h]|l[a+h]}return e[s+8]=i,s}function F_(n,e){n.push(0,0,0,0,0,0,0,0,e)}function t0(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function pv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=o0(i),r===null)return va;if(t++,i=i[Zs],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return va}function G_(n,e,t){wO(n,e,t)}function TO(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(JC(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function n0(n,e,t){if(t&8||n!==void 0)return n;Bh(e,"NodeInjector")}function r0(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[ji],s=nn(void 0);try{return i?i.get(e,r,t&8):t_(e,r,t&8)}finally{nn(s)}}return n0(r,e,t)}function i0(n,e,t,r=0,i){if(n!==null){if(e[ne]&2048&&!(r&2)){let a=AO(n,e,t,r,Dr);if(a!==Dr)return a}let s=s0(n,e,t,r,Dr);if(s!==Dr)return s}return r0(e,t,r,i)}function s0(n,e,t,r,i){let s=DO(t);if(typeof s=="function"){if(!C_(e,n,r))return r&1?n0(i,t,r):r0(e,t,r,i);try{let a;if(a=s(r),a==null&&!(r&8))Bh(t);else return a}finally{A_()}}else if(typeof s=="number"){let a=null,c=t0(n,e),l=va,h=r&1?e[vn][_n]:null;for((c===-1||r&4)&&(l=c===-1?pv(n,e):e[c+8],l===va||!IC(r,!1)?c=-1:(a=e[ee],c=hf(l),e=ff(l,e)));c!==-1;){let p=e[ee];if(EC(s,c,p.data)){let _=bO(c,e,t,a,r,h);if(_!==Dr)return _}l=e[c+8],l!==va&&IC(r,e[ee].data[c+8]===h)&&EC(s,c,e)?(a=p,c=hf(l),e=ff(l,e)):c=-1}}return i}function bO(n,e,t,r,i,s){let a=e[ee],c=a.data[n+8],l=r==null?qi(c)&&z_:r!=a&&(c.type&3)!==0,h=i&1&&s===c,p=uf(c,a,t,l,h);return p!==null?pl(e,a,p,c,i):Dr}function uf(n,e,t,r,i){let s=n.providerIndexes,a=e.data,c=s&1048575,l=n.directiveStart,h=n.directiveEnd,p=s>>20,_=r?c:c+p,w=i?c+p:h;for(let C=_;C<w;C++){let A=a[C];if(C<l&&t===A||C>=l&&A.type===t)return C}if(i){let C=a[l];if(C&&br(C)&&C.type===t)return l}return null}function pl(n,e,t,r,i){let s=n[t],a=e.data;if(s instanceof so){let c=s;if(c.resolving){let C=DD(a[t]);throw e_(C)}let l=vC(c.canSeeViewProviders);c.resolving=!0;let h=a[t].type||a[t],p,_=c.injectImpl?nn(c.injectImpl):null,w=C_(n,r,0);try{s=n[t]=c.factory(void 0,i,a,n,r),e.firstCreatePass&&t>=r.directiveStart&&fO(t,a[t],e)}finally{_!==null&&nn(_),vC(l),c.resolving=!1,A_()}}return s}function DO(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Xs)?n[Xs]:void 0;return typeof e=="number"?e>=0?e&ZC:CO:e}function EC(n,e,t){let r=1<<n;return!!(t[e+(n>>e0)]&r)}function IC(n,e){return!(n&2)&&!(n&1&&e)}var io=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return i0(this._tNode,this._lView,e,Ws(r),t)}};function CO(){return new io($t(),ke())}function Wi(n){return ba(()=>{let e=n.prototype.constructor,t=e[Wu]||W_(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Wu]||W_(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function W_(n){return Wy(n)?()=>{let e=W_(Et(n));return e&&e()}:Ks(n)}function AO(n,e,t,r,i){let s=n,a=e;for(;s!==null&&a!==null&&a[ne]&2048&&!pa(a);){let c=s0(s,a,t,r|2,Dr);if(c!==Dr)return c;let l=s.parent;if(!l){let h=a[h_];if(h){let p=h.get(t,Dr,r);if(p!==Dr)return p}l=o0(a),a=a[Zs]}s=l}return i}function o0(n){let e=n[ee],t=e.type;return t===2?e.declTNode:t===1?n[_n]:null}function _l(n){return TO($t(),n)}function SO(){return Da($t(),ke())}function Da(n,e){return new Tn(er(n,e))}var Tn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=SO}return n})();function RO(n){return n instanceof Tn?n.nativeElement:n}function NO(){return this._results[Symbol.iterator]()}var gf=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Je}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=PD(e);(this._changesDetected=!ND(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=NO};function a0(n){return(n.flags&128)===128}var gv=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(gv||{}),c0=new Map,PO=0;function MO(){return PO++}function xO(n){c0.set(n[nl],n)}function K_(n){c0.delete(n[nl])}var wC="__ngContext__";function Ea(n,e){Tr(e)?(n[wC]=e[nl],xO(e)):n[wC]=e}function u0(n){return d0(n[fa])}function l0(n){return d0(n[yn])}function d0(n){for(;n!==null&&!Zn(n);)n=n[yn];return n}var Q_;function mv(n){Q_=n}function h0(){if(Q_!==void 0)return Q_;if(typeof document<"u")return document;throw new $(210,!1)}var bf=new H("",{factory:()=>kO}),kO="ng";var Df=new H(""),uo=new H("",{providedIn:"platform",factory:()=>"unknown"});var Cf=new H("",{factory:()=>h0().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var f0=!1,p0=new H("",{factory:()=>f0});var OO=(n,e,t,r)=>{};function FO(n,e,t,r){OO(n,e,t,r)}function yv(n){return(n.flags&32)===32}var VO=()=>null;function g0(n,e,t=!1){return VO(n,e,t)}function m0(n,e){let t=n.contentQueries;if(t!==null){let r=ce(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],a=t[i+1];if(a!==-1){let c=n.data[a];Jh(s),c.contentQueries(2,e[a],a)}}}finally{ce(r)}}}function Y_(n,e,t){Jh(0);let r=ce(null);try{e(n,t)}finally{ce(r)}}function y0(n,e,t){if(f_(e)){let r=ce(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let a=i;a<s;a++){let c=n.data[a];if(c.contentQueries){let l=t[a];c.contentQueries(1,l,a)}}}finally{ce(r)}}}var nr=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(nr||{});var sf;function LO(){if(sf===void 0&&(sf=null,gn.trustedTypes))try{sf=gn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return sf}function TC(n){return LO()?.createScriptURL(n)||n}var mf=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Uh})`}};function Af(n){return n instanceof mf?n.changingThisBreaksApplicationSecurity:n}function _v(n,e){let t=_0(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Uh})`)}return t===e}function _0(n){return n instanceof mf&&n.getTypeName()||null}var UO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function v0(n){return n=String(n),n.match(UO)?n:"unsafe:"+n}var Sf=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Sf||{});function lo(n){let e=I0();return e?e.sanitize(Sf.URL,n)||"":_v(n,"URL")?Af(n):v0(ua(n))}function E0(n){let e=I0();if(e)return TC(e.sanitize(Sf.RESOURCE_URL,n)||"");if(_v(n,"ResourceURL"))return TC(Af(n));throw new $(904,!1)}function jO(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?E0:lo}function vv(n,e,t){return jO(e,t)(n)}function I0(){let n=ke();return n&&n[Ir].sanitizer}function w0(n){return n instanceof Function?n():n}function BO(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var T0="ng-template";function $O(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&BO(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Ev(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Ev(n){return n.type===4&&n.value!==T0}function qO(n,e,t){let r=n.type===4&&!t?T0:n.value;return e===r}function HO(n,e,t){let r=4,i=n.attrs,s=i!==null?WO(i):0,a=!1;for(let c=0;c<e.length;c++){let l=e[c];if(typeof l=="number"){if(!a&&!tr(r)&&!tr(l))return!1;if(a&&tr(l))continue;a=!1,r=l|r&1;continue}if(!a)if(r&4){if(r=2|r&1,l!==""&&!qO(n,l,t)||l===""&&e.length===1){if(tr(r))return!1;a=!0}}else if(r&8){if(i===null||!$O(n,i,l,t)){if(tr(r))return!1;a=!0}}else{let h=e[++c],p=zO(l,i,Ev(n),t);if(p===-1){if(tr(r))return!1;a=!0;continue}if(h!==""){let _;if(p>s?_="":_=i[p+1].toLowerCase(),r&2&&h!==_){if(tr(r))return!1;a=!0}}}}return tr(r)||a}function tr(n){return(n&1)===0}function zO(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let a=e[i];if(a===n)return i;if(a===3||a===6)s=!0;else if(a===1||a===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(a===4)break;if(a===0){i+=4;continue}}i+=s?1:2}return-1}else return KO(e,n)}function GO(n,e,t=!1){for(let r=0;r<e.length;r++)if(HO(n,e[r],t))return!0;return!1}function WO(n){for(let e=0;e<n.length;e++){let t=n[e];if(JC(t))return e}return n.length}function KO(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function bC(n,e){return n?":not("+e.trim()+")":e}function QO(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let a=n[t];if(typeof a=="string")if(r&2){let c=n[++t];i+="["+a+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+a:r&4&&(i+=" "+a);else i!==""&&!tr(a)&&(e+=bC(s,i),i=""),r=a,s=s||!tr(r);t++}return i!==""&&(e+=bC(s,i)),e}function YO(n){return n.map(QO).join(",")}function JO(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!tr(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var yi={};function XO(n,e){return n.createText(e)}function ZO(n,e,t){n.setValue(e,t)}function b0(n,e,t){return n.createElement(e,t)}function yf(n,e,t,r,i){n.insertBefore(e,t,r,i)}function D0(n,e,t){n.appendChild(e,t)}function DC(n,e,t,r,i){r!==null?yf(n,e,t,r,i):D0(n,e,t)}function e1(n,e,t,r){n.removeChild(null,e,t,r)}function t1(n,e,t){n.setAttribute(e,"style",t)}function n1(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function C0(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&yO(n,e,r),i!==null&&n1(n,e,i),s!==null&&t1(n,e,s)}function Iv(n,e,t,r,i,s,a,c,l,h,p){let _=on+r,w=_+i,C=r1(_,w),A=typeof h=="function"?h():h;return C[ee]={type:n,blueprint:C,template:t,queries:null,viewQuery:c,declTNode:e,data:C.slice().fill(null,_),bindingStartIndex:_,expandoStartIndex:w,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:l,consts:A,incompleteFirstPass:!1,ssrId:p}}function r1(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:yi);return t}function i1(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Iv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function wv(n,e,t,r,i,s,a,c,l,h,p){let _=e.blueprint.slice();return _[Xn]=i,_[ne]=r|4|128|8|64|1024,(h!==null||n&&n[ne]&2048)&&(_[ne]|=2048),g_(_),_[ht]=_[Zs]=n,_[St]=t,_[Ir]=a||n&&n[Ir],_[qe]=c||n&&n[qe],_[ji]=l||n&&n[ji]||null,_[_n]=s,_[nl]=MO(),_[tl]=p,_[h_]=h,_[vn]=e.type==2?n[vn]:_,_}function s1(n,e,t){let r=er(e,n),i=i1(t),s=n[Ir].rendererFactory,a=Tv(n,wv(n,i,null,A0(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=a}function A0(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function S0(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Tv(n,e){return n[fa]?n[d_][yn]=e:n[fa]=e,n[d_]=e,e}function he(n=1){R0(Bt(),ke(),ro()+n,!1)}function R0(n,e,t,r){if(!r)if((e[ne]&3)===3){let s=n.preOrderCheckHooks;s!==null&&af(e,s,t)}else{let s=n.preOrderHooks;s!==null&&cf(e,s,0,t)}Hi(t)}var Rf=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Rf||{});function J_(n,e,t,r){let i=ce(null);try{let[s,a,c]=n.inputs[t],l=null;(a&Rf.SignalBased)!==0&&(l=e[s][Lt]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):c!==null&&(r=c.call(e,r)),n.setInput!==null?n.setInput(e,l,r,t,s):zC(e,l,s,r)}finally{ce(i)}}var Cr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Cr||{}),o1;function bv(n,e){return o1(n,e)}var Ia=new Set,Dv=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Dv||{}),vl=new H(""),CC=new Set;function Cv(n){CC.has(n)||(CC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var N0=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})();var a1=new H("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function P0(n,e,t){let r=n.get(a1);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function c1(n,e){for(let[t,r]of e)P0(n,r.animateFns)}function AC(n,e,t,r){let i=n?.[il]?.enter;e!==null&&i&&i.has(t.index)&&c1(r,i)}function _a(n,e,t,r,i,s,a,c){if(i!=null){let l,h=!1;Zn(i)?l=i:Tr(i)&&(h=!0,i=i[Xn]);let p=En(i);n===0&&r!==null?(AC(c,r,s,t),a==null?D0(e,r,p):yf(e,r,p,a||null,!0)):n===1&&r!==null?(AC(c,r,s,t),yf(e,r,p,a||null,!0)):n===2?SC(c,s,t,_=>{e1(e,p,h,_)}):n===3&&SC(c,s,t,()=>{e.destroyNode(p)}),l!=null&&I1(e,n,t,l,s,r,a)}}function u1(n,e){M0(n,e),e[Xn]=null,e[_n]=null}function l1(n,e,t,r,i,s){r[Xn]=i,r[_n]=e,Nf(n,r,t,1,i,s)}function M0(n,e){e[Ir].changeDetectionScheduler?.notify(9),Nf(n,e,e[qe],2,null,null)}function d1(n){let e=n[fa];if(!e)return V_(n[ee],n);for(;e;){let t=null;if(Tr(e))t=e[fa];else{let r=e[jt];r&&(t=r)}if(!t){for(;e&&!e[yn]&&e!==n;)Tr(e)&&V_(e[ee],e),e=e[ht];e===null&&(e=n),Tr(e)&&V_(e[ee],e),t=e&&e[yn]}e=t}}function Av(n,e){let t=n[to],r=t.indexOf(e);t.splice(r,1)}function x0(n,e){if(no(e))return;let t=e[qe];t.destroyNode&&Nf(n,e,t,3,null,null),d1(e)}function V_(n,e){if(no(e))return;let t=ce(null);try{e[ne]&=-129,e[ne]|=256,e[sn]&&Uu(e[sn]),p1(n,e),f1(n,e),e[ee].type===1&&e[qe].destroy();let r=e[Bi];if(r!==null&&Zn(e[ht])){r!==e[ht]&&Av(r,e);let i=e[wr];i!==null&&i.detachView(n)}K_(e)}finally{ce(t)}}function SC(n,e,t,r){let i=n?.[il];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Ia.add(n),P0(t,()=>{if(i.leave&&i.leave.has(e.index)){let a=i.leave.get(e.index),c=[];if(a){for(let l=0;l<a.animateFns.length;l++){let h=a.animateFns[l],{promise:p}=h();c.push(p)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(c),h1(n,r)}else n&&Ia.delete(n),r(!1)},i)}function h1(n,e){let t=n[il]?.running;if(t){t.then(()=>{n[il].running=void 0,Ia.delete(n),e(!0)});return}e(!1)}function f1(n,e){let t=n.cleanup,r=e[ha];if(t!==null)for(let a=0;a<t.length-1;a+=2)if(typeof t[a]=="string"){let c=t[a+3];c>=0?r[c]():r[-c].unsubscribe(),a+=2}else{let c=r[t[a+1]];t[a].call(c)}r!==null&&(e[ha]=null);let i=e[ui];if(i!==null){e[ui]=null;for(let a=0;a<i.length;a++){let c=i[a];c()}}let s=e[rl];if(s!==null){e[rl]=null;for(let a of s)a.destroy()}}function p1(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof so)){let s=t[r+1];if(Array.isArray(s))for(let a=0;a<s.length;a+=2){let c=i[s[a]],l=s[a+1];Ve(4,c,l);try{l.call(c)}finally{Ve(5,c,l)}}else{Ve(4,i,s);try{s.call(i)}finally{Ve(5,i,s)}}}}}function g1(n,e,t){return m1(n,e.parent,t)}function m1(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Xn];if(qi(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===nr.None||i===nr.Emulated)return null}return er(r,t)}function y1(n,e,t){return v1(n,e,t)}function _1(n,e,t){return n.type&40?er(n,t):null}var v1=_1,RC;function Sv(n,e,t,r){let i=g1(n,r,e),s=e[qe],a=r.parent||e[_n],c=y1(a,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)DC(s,i,t[l],c,!1);else DC(s,i,t,c,!1);RC!==void 0&&RC(s,r,e,t,i)}function dl(n,e){if(e!==null){let t=e.type;if(t&3)return er(e,n);if(t&4)return X_(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return dl(n,r);{let i=n[e.index];return Zn(i)?X_(-1,i):En(i)}}else{if(t&128)return dl(n,e.next);if(t&32)return bv(e,n)()||En(n[e.index]);{let r=k0(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Fi(n[vn]);return dl(i,r)}else return dl(n,e.next)}}}return null}function k0(n,e){if(e!==null){let r=n[vn][_n],i=e.projection;return r.projection[i]}return null}function X_(n,e){let t=jt+n+1;if(t<e.length){let r=e[t],i=r[ee].firstChild;if(i!==null)return dl(r,i)}return e[$i]}function Rv(n,e,t,r,i,s,a){for(;t!=null;){let c=r[ji];if(t.type===128){t=t.next;continue}let l=r[t.index],h=t.type;if(a&&e===0&&(l&&Ea(En(l),r),t.flags|=2),!yv(t))if(h&8)Rv(n,e,t.child,r,i,s,!1),_a(e,n,c,i,l,t,s,r);else if(h&32){let p=bv(t,r),_;for(;_=p();)_a(e,n,c,i,_,t,s,r);_a(e,n,c,i,l,t,s,r)}else h&16?E1(n,e,r,t,i,s):_a(e,n,c,i,l,t,s,r);t=a?t.projectionNext:t.next}}function Nf(n,e,t,r,i,s){Rv(t,r,n.firstChild,e,i,s,!1)}function E1(n,e,t,r,i,s){let a=t[vn],l=a[_n].projection[r.projection];if(Array.isArray(l))for(let h=0;h<l.length;h++){let p=l[h];_a(e,n,t[ji],i,p,r,s,t)}else{let h=l,p=a[ht];a0(r)&&(h.flags|=128),Rv(n,e,h,p,i,s,!0)}}function I1(n,e,t,r,i,s,a){let c=r[$i],l=En(r);c!==l&&_a(e,n,t,s,c,i,a);for(let h=jt;h<r.length;h++){let p=r[h];Nf(p[ee],p,n,e,s,c)}}function w1(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Cr.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Cr.Important),n.setStyle(t,r,i,s))}}function O0(n,e,t,r,i){let s=ro(),a=r&2;try{Hi(-1),a&&e.length>on&&R0(n,e,on,!1),Ve(a?2:0,i,t),t(r,i)}finally{Hi(s),Ve(a?3:1,i,t)}}function Nv(n,e,t){R1(n,e,t),(t.flags&64)===64&&N1(n,e,t)}function F0(n,e,t=er){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let a=r[s+1],c=a===-1?t(e,n):n[a];n[i++]=c}}}function T1(n,e,t,r){let s=r.get(p0,f0)||t===nr.ShadowDom||t===nr.ExperimentalIsolatedShadowDom,a=n.selectRootElement(e,s);return b1(a),a}function b1(n){D1(n)}var D1=()=>null;function C1(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function V0(n,e,t,r,i,s){let a=e[ee];if(Pv(n,a,e,t,r)){qi(n)&&S1(e,n.index);return}n.type&3&&(t=C1(t)),A1(n,e,t,r,i,s)}function A1(n,e,t,r,i,s){if(n.type&3){let a=er(n,e);r=s!=null?s(r,n.value||"",t):r,i.setProperty(a,t,r)}else n.type&12}function S1(n,e){let t=In(e,n);t[ne]&16||(t[ne]|=64)}function R1(n,e,t){let r=t.directiveStart,i=t.directiveEnd;qi(t)&&s1(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||pf(t,e);let s=t.initialInputs;for(let a=r;a<i;a++){let c=n.data[a],l=pl(e,n,a,t);if(Ea(l,e),s!==null&&k1(e,a-r,l,c,t,s),br(c)){let h=In(t.index,e);h[St]=pl(e,n,a,t)}}}function N1(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,a=iC();try{Hi(s);for(let c=r;c<i;c++){let l=n.data[c],h=e[c];Yh(c),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&P1(l,h)}}finally{Hi(-1),Yh(a)}}function P1(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function L0(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];GO(e,s.selectors,!1)&&(r??=[],br(s)?r.unshift(s):r.push(s))}return r}function M1(n,e,t,r,i,s){let a=er(n,e);x1(e[qe],a,s,n.value,t,r,i)}function x1(n,e,t,r,i,s,a){if(s==null)n.removeAttribute(e,i,t);else{let c=a==null?ua(s):a(s,r||"",i);n.setAttribute(e,i,c,t)}}function k1(n,e,t,r,i,s){let a=s[e];if(a!==null)for(let c=0;c<a.length;c+=2){let l=a[c],h=a[c+1];J_(r,t,l,h)}}function O1(n,e,t,r,i){let s=on+t,a=e[ee],c=i(a,e,n,r,t);e[s]=c,ga(n,!0);let l=n.type===2;return l?(C0(e[qe],c,n),(GD()===0||ol(n))&&Ea(c,e),WD()):Ea(c,e),tf()&&(!l||!yv(n))&&Sv(a,e,c,n),n}function F1(n){let e=n;return w_()?ZD():(e=e.parent,ga(e,!1)),e}function V1(n,e){let t=n[ji];if(!t)return;let r;try{r=t.get(wn,null)}catch{r=null}r?.(e)}function Pv(n,e,t,r,i){let s=n.inputs?.[r],a=n.hostDirectiveInputs?.[r],c=!1;if(a)for(let l=0;l<a.length;l+=2){let h=a[l],p=a[l+1],_=e.data[h];J_(_,t[h],p,i),c=!0}if(s)for(let l of s){let h=t[l],p=e.data[l];J_(p,h,r,i),c=!0}return c}function L1(n,e){let t=In(e,n),r=t[ee];U1(r,t);let i=t[Xn];i!==null&&t[tl]===null&&(t[tl]=g0(i,t[ji])),Ve(18),Mv(r,t,t[St]),Ve(19,t[St])}function U1(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Mv(n,e,t){Xh(e);try{let r=n.viewQuery;r!==null&&Y_(1,r,t);let i=n.template;i!==null&&O0(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[wr]?.finishViewCreation(n),n.staticContentQueries&&m0(n,e),n.staticViewQueries&&Y_(2,n.viewQuery,t);let s=n.components;s!==null&&j1(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ne]&=-5,Zh()}}function j1(n,e){for(let t=0;t<e.length;t++)L1(n,e[t])}function B1(n,e,t,r){let i=ce(null);try{let s=e.tView,c=n[ne]&4096?4096:16,l=wv(n,s,t,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),h=n[e.index];l[Bi]=h;let p=n[wr];return p!==null&&(l[wr]=p.createEmbeddedView(s)),Mv(s,l,t),l}finally{ce(i)}}function NC(n,e){return!e||e.firstChild===null||a0(n)}function gl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(En(s)),Zn(s)&&U0(s,r);let a=t.type;if(a&8)gl(n,e,t.child,r);else if(a&32){let c=bv(t,e),l;for(;l=c();)r.push(l)}else if(a&16){let c=k0(e,t);if(Array.isArray(c))r.push(...c);else{let l=Fi(e[vn]);gl(l[ee],l,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function U0(n,e){for(let t=jt;t<n.length;t++){let r=n[t],i=r[ee].firstChild;i!==null&&gl(r[ee],r,i,e)}n[$i]!==n[Xn]&&e.push(n[$i])}function j0(n){if(n[Gh]!==null){for(let e of n[Gh])e.impl.addSequence(e);n[Gh].length=0}}var B0=[];function $1(n){return n[sn]??q1(n)}function q1(n){let e=B0.pop()??Object.create(z1);return e.lView=n,e}function H1(n){n.lView[sn]!==n&&(n.lView=null,B0.push(n))}var z1=fe(O({},Fu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{ul(n.lView)},consumerOnSignalRead(){this.lView[sn]=this}});function G1(n){let e=n[sn]??Object.create(W1);return e.lView=n,e}var W1=fe(O({},Fu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Fi(n.lView);for(;e&&!$0(e[ee]);)e=Fi(e);e&&m_(e)},consumerOnSignalRead(){this.lView[sn]=this}});function $0(n){return n.type!==2}function q0(n){if(n[rl]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[rl])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ne]&8192)}}var K1=100;function H0(n,e=0){let r=n[Ir].rendererFactory,i=!1;i||r.begin?.();try{Q1(n,e)}finally{i||r.end?.()}}function Q1(n,e){let t=T_();try{b_(!0),Z_(n,e);let r=0;for(;cl(n);){if(r===K1)throw new $(103,!1);r++,Z_(n,1)}}finally{b_(t)}}function Y1(n,e,t,r){if(no(e))return;let i=e[ne],s=!1,a=!1;Xh(e);let c=!0,l=null,h=null;s||($0(n)?(h=$1(e),l=Lu(h)):sh()===null?(c=!1,h=G1(e),l=Lu(h)):e[sn]&&(Uu(e[sn]),e[sn]=null));try{g_(e),eC(n.bindingStartIndex),t!==null&&O0(n,e,t,2,r);let p=(i&3)===3;if(!s)if(p){let C=n.preOrderCheckHooks;C!==null&&af(e,C,null)}else{let C=n.preOrderHooks;C!==null&&cf(e,C,0,null),O_(e,0)}if(a||J1(e),q0(e),z0(e,0),n.contentQueries!==null&&m0(n,e),!s)if(p){let C=n.contentCheckHooks;C!==null&&af(e,C)}else{let C=n.contentHooks;C!==null&&cf(e,C,1),O_(e,1)}Z1(n,e);let _=n.components;_!==null&&W0(e,_,0);let w=n.viewQuery;if(w!==null&&Y_(2,w,r),!s)if(p){let C=n.viewCheckHooks;C!==null&&af(e,C)}else{let C=n.viewHooks;C!==null&&cf(e,C,2),O_(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[zh]){for(let C of e[zh])C();e[zh]=null}s||(j0(e),e[ne]&=-73)}catch(p){throw s||ul(e),p}finally{h!==null&&(oh(h,l),c&&H1(h)),Zh()}}function z0(n,e){for(let t=u0(n);t!==null;t=l0(t))for(let r=jt;r<t.length;r++){let i=t[r];G0(i,e)}}function J1(n){for(let e=u0(n);e!==null;e=l0(e)){if(!(e[ne]&2))continue;let t=e[to];for(let r=0;r<t.length;r++){let i=t[r];m_(i)}}}function X1(n,e,t){Ve(18);let r=In(e,n);G0(r,t),Ve(19,r[St])}function G0(n,e){Kh(n)&&Z_(n,e)}function Z_(n,e){let r=n[ee],i=n[ne],s=n[sn],a=!!(e===0&&i&16);if(a||=!!(i&64&&e===0),a||=!!(i&1024),a||=!!(s?.dirty&&ah(s)),a||=!1,s&&(s.dirty=!1),n[ne]&=-9217,a)Y1(r,n,r.template,n[St]);else if(i&8192){let c=ce(null);try{q0(n),z0(n,1);let l=r.components;l!==null&&W0(n,l,1),j0(n)}finally{ce(c)}}}function W0(n,e,t){for(let r=0;r<e.length;r++)X1(n,e[r],t)}function Z1(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Hi(~i);else{let s=i,a=t[++r],c=t[++r];rC(a,s);let l=e[s];Ve(24,l),c(2,l),Ve(25,l)}}}finally{Hi(-1)}}function xv(n,e){let t=T_()?64:1088;for(n[Ir].changeDetectionScheduler?.notify(e);n;){n[ne]|=t;let r=Fi(n);if(pa(n)&&!r)return n;n=r}return null}function K0(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function eF(n,e,t,r=!0){let i=e[ee];if(tF(i,e,n,t),r){let a=X_(t,n),c=e[qe],l=c.parentNode(n[$i]);l!==null&&l1(i,n[_n],c,e,l,a)}let s=e[tl];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function ev(n,e){if(n.length<=jt)return;let t=jt+e,r=n[t];if(r){let i=r[Bi];i!==null&&i!==n&&Av(i,r),e>0&&(n[t-1][yn]=r[yn]);let s=Xu(n,jt+e);u1(r[ee],r);let a=s[wr];a!==null&&a.detachView(s[ee]),r[ht]=null,r[yn]=null,r[ne]&=-129}return r}function tF(n,e,t,r){let i=jt+r,s=t.length;r>0&&(t[i-1][yn]=e),r<s-jt?(e[yn]=t[i],n_(t,jt+r,e)):(t.push(e),e[yn]=null),e[ht]=t;let a=e[Bi];a!==null&&t!==a&&Q0(a,e);let c=e[wr];c!==null&&c.insertView(n),Qh(e),e[ne]|=128}function Q0(n,e){let t=n[to],r=e[ht];if(Tr(r))n[ne]|=2;else{let i=r[ht][vn];e[vn]!==i&&(n[ne]|=2)}t===null?n[to]=[e]:t.push(e)}var zi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[ee];return gl(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[St]}set context(e){this._lView[St]=e}get destroyed(){return no(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ht];if(Zn(e)){let t=e[sl],r=t?t.indexOf(this):-1;r>-1&&(ev(e,r),Xu(t,r))}this._attachedToViewContainer=!1}x0(this._lView[ee],this._lView)}onDestroy(e){y_(this._lView,e)}markForCheck(){xv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){Qh(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,H0(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=pa(this._lView),t=this._lView[Bi];t!==null&&!e&&Av(t,this._lView),M0(this._lView[ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e;let t=pa(this._lView),r=this._lView[Bi];r!==null&&!t&&Q0(r,this._lView),Qh(this._lView)}};var Gi=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=nF;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let s=B1(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new zi(s)}}return n})();function nF(){return kv($t(),ke())}function kv(n,e){return n.type&4?new Gi(e,n,Da(n,e)):null}function Ov(n,e,t,r,i){let s=n.data[e];if(s===null)s=rF(n,e,t,r,i),nC()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let a=XD();s.injectorIndex=a===null?-1:a.injectorIndex}return ga(s,!0),s}function rF(n,e,t,r,i){let s=I_(),a=w_(),c=a?s:s&&s.parent,l=n.data[e]=sF(n,c,t,e,r,i);return iF(n,l,s,a),l}function iF(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function sF(n,e,t,r,i,s){let a=e?e.injectorIndex:-1,c=0;return QD()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var oF=()=>null;function PC(n,e){return oF(n,e)}var Y0=class{},Pf=class{},tv=class{resolveComponentFactory(e){throw new $(917,!1)}},El=class{static NULL=new tv},oo=class{},Ki=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>aF()}return n})();function aF(){let n=ke(),e=$t(),t=In(e.index,n);return(Tr(t)?t:n)[qe]}var J0=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>null})}return n})();var lf={},nv=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,lf,r);return i!==lf||t===lf?i:this.parentInjector.get(e,t,r)}};function MC(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number")s=c;else if(s==1)i=Gy(i,c);else if(s==2){let l=c,h=e[++a];r=Gy(r,l+": "+h+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function re(n,e=0){let t=ke();if(t===null)return Z(n,e);let r=$t();return i0(r,t,Et(n),e)}function X0(n,e,t,r,i){let s=r===null?null:{"":-1},a=i(n,t);if(a!==null){let c=a,l=null,h=null;for(let p of a)if(p.resolveHostDirectives!==null){[c,l,h]=p.resolveHostDirectives(a);break}lF(n,e,t,c,s,l,h)}s!==null&&r!==null&&cF(t,r,s)}function cF(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new $(-301,!1);r.push(e[i],s)}}function uF(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function lF(n,e,t,r,i,s,a){let c=r.length,l=!1;for(let w=0;w<c;w++){let C=r[w];!l&&br(C)&&(l=!0,uF(n,t,w)),G_(pf(t,e),n,C.type)}mF(t,n.data.length,c);for(let w=0;w<c;w++){let C=r[w];C.providersResolver&&C.providersResolver(C)}let h=!1,p=!1,_=S0(n,e,c,null);c>0&&(t.directiveToIndex=new Map);for(let w=0;w<c;w++){let C=r[w];if(t.mergedAttrs=fl(t.mergedAttrs,C.hostAttrs),hF(n,t,e,_,C),gF(_,C,i),a!==null&&a.has(C)){let[N,R]=a.get(C);t.directiveToIndex.set(C.type,[_,N+t.directiveStart,R+t.directiveStart])}else(s===null||!s.has(C))&&t.directiveToIndex.set(C.type,_);C.contentQueries!==null&&(t.flags|=4),(C.hostBindings!==null||C.hostAttrs!==null||C.hostVars!==0)&&(t.flags|=64);let A=C.type.prototype;!h&&(A.ngOnChanges||A.ngOnInit||A.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),h=!0),!p&&(A.ngOnChanges||A.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),p=!0),_++}dF(n,t,s)}function dF(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))xC(0,e,i,r),xC(1,e,i,r),OC(e,r,!1);else{let s=t.get(i);kC(0,e,s,r),kC(1,e,s,r),OC(e,r,!0)}}}function xC(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let a;n===0?a=e.inputs??={}:a=e.outputs??={},a[s]??=[],a[s].push(r),Z0(e,s)}}function kC(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let a=i[s],c;n===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[a]??=[],c[a].push(r,s),Z0(e,a)}}function Z0(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function OC(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||Ev(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let a=null,c=0;for(;c<r.length;){let l=r[c];if(l===0){c+=4;continue}else if(l===5){c+=2;continue}else if(typeof l=="number")break;if(!t&&i.hasOwnProperty(l)){let h=i[l];for(let p of h)if(p===e){a??=[],a.push(l,r[c+1]);break}}else if(t&&s.hasOwnProperty(l)){let h=s[l];for(let p=0;p<h.length;p+=2)if(h[p]===e){a??=[],a.push(h[p+1],r[c+1]);break}}c+=2}n.initialInputs??=[],n.initialInputs.push(a)}function hF(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Ks(i.type,!0)),a=new so(s,br(i),re,null);n.blueprint[r]=a,t[r]=a,fF(n,e,r,S0(n,t,i.hostVars,yi),i)}function fF(n,e,t,r,i){let s=i.hostBindings;if(s){let a=n.hostBindingOpCodes;a===null&&(a=n.hostBindingOpCodes=[]);let c=~e.index;pF(a)!=c&&a.push(c),a.push(t,r,s)}}function pF(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function gF(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;br(e)&&(t[""]=n)}}function mF(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function eA(n,e,t,r,i,s,a,c){let l=e[ee],h=l.consts,p=al(h,a),_=Ov(l,n,t,r,p);return s&&X0(l,e,_,al(h,c),i),_.mergedAttrs=fl(_.mergedAttrs,_.attrs),_.attrs!==null&&MC(_,_.attrs,!1),_.mergedAttrs!==null&&MC(_,_.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,_),_}function tA(n,e){QC(n,e),f_(e)&&n.queries.elementEnd(e)}function Fv(n){return rA(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function nA(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function rA(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Ca(n,e,t){if(t===yi)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function L_(n,e,t){return function r(i){let s=qi(n)?In(n.index,e):e;xv(s,5);let a=e[St],c=FC(e,a,t,i),l=r.__ngNextListenerFn__;for(;l;)c=FC(e,a,l,i)&&c,l=l.__ngNextListenerFn__;return c}}function FC(n,e,t,r){let i=ce(null);try{return Ve(6,e,t),t(r)!==!1}catch(s){return V1(n,s),!1}finally{Ve(7,e,t),ce(i)}}function yF(n,e,t,r,i,s,a,c){let l=ol(n),h=!1,p=null;if(!r&&l&&(p=vF(e,t,s,n.index)),p!==null){let _=p.__ngLastListenerFn__||p;_.__ngNextListenerFn__=a,p.__ngLastListenerFn__=a,h=!0}else{let _=er(n,t),w=r?r(_):_;FO(t,w,s,c);let C=i.listen(w,s,c);if(!_F(s)){let A=r?N=>r(En(N[n.index])):n.index;iA(A,e,t,s,c,C,!1)}}return h}function _F(n){return n.startsWith("animation")||n.startsWith("transition")}function vF(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let a=i[s];if(a===t&&i[s+1]===r){let c=e[ha],l=i[s+2];return c&&c.length>l?c[l]:null}typeof a=="string"&&(s+=2)}return null}function iA(n,e,t,r,i,s,a){let c=e.firstCreatePass?v_(e):null,l=__(t),h=l.length;l.push(i,s),c&&c.push(r,n,h,(h+1)*(a?-1:1))}function VC(n,e,t,r,i,s){let a=e[t],c=e[ee],h=c.data[t].outputs[r],_=a[h].subscribe(s);iA(n.index,c,e,i,s,_,!0)}var rv=Symbol("BINDING");var _f=class extends El{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Ui(e);return new wa(t,this.ngModule)}};function EF(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&Rf.SignalBased)!==0};return i&&(s.transform=i),s})}function IF(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function wF(n,e,t){let r=e instanceof ct?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new nv(t,r):t}function TF(n){let e=n.get(oo,null);if(e===null)throw new $(407,!1);let t=n.get(J0,null),r=n.get(Js,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function bF(n,e){let t=sA(n);return b0(e,t,t==="svg"?UD:t==="math"?jD:null)}function sA(n){return(n.selectors[0][0]||"div").toLowerCase()}var wa=class extends Pf{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=EF(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=IF(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=YO(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,a){Ve(22);let c=ce(null);try{let l=this.componentDef,h=DF(r,l,a,s),p=wF(l,i||this.ngModule,e),_=TF(p),w=_.rendererFactory.createRenderer(null,l),C=r?T1(w,r,l.encapsulation,p):bF(l,w),A=a?.some(LC)||s?.some(x=>typeof x!="function"&&x.bindings.some(LC)),N=wv(null,h,null,512|A0(l),null,null,_,w,p,null,g0(C,p,!0));N[on]=C,Xh(N);let R=null;try{let x=eA(on,N,2,"#host",()=>h.directiveRegistry,!0,0);C0(w,C,x),Ea(C,N),Nv(h,N,x),y0(h,x,N),tA(h,x),t!==void 0&&AF(x,this.ngContentSelectors,t),R=In(x.index,N),N[St]=R[St],Mv(h,N,null)}catch(x){throw R!==null&&K_(R),K_(N),x}finally{Ve(23),Zh()}return new vf(this.componentType,N,!!A)}finally{ce(c)}}};function DF(n,e,t,r){let i=n?["ng-version","21.0.0"]:JO(e.selectors[0]),s=null,a=null,c=0;if(t)for(let p of t)c+=p[rv].requiredVars,p.create&&(p.targetIdx=0,(s??=[]).push(p)),p.update&&(p.targetIdx=0,(a??=[]).push(p));if(r)for(let p=0;p<r.length;p++){let _=r[p];if(typeof _!="function")for(let w of _.bindings){c+=w[rv].requiredVars;let C=p+1;w.create&&(w.targetIdx=C,(s??=[]).push(w)),w.update&&(w.targetIdx=C,(a??=[]).push(w))}}let l=[e];if(r)for(let p of r){let _=typeof p=="function"?p:p.type,w=o_(_);l.push(w)}return Iv(0,null,CF(s,a),1,c,l,null,null,null,[i],null)}function CF(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function LC(n){let e=n[rv].kind;return e==="input"||e==="twoWay"}var vf=class extends Y0{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Wh(t[ee],on),this.location=Da(this._tNode,t),this.instance=In(this._tNode.index,t)[St],this.hostView=this.changeDetectorRef=new zi(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=Pv(r,i[ee],i,e,t);this.previousInputValues.set(e,t);let a=In(r.index,i);xv(a,1)}get injector(){return new io(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function AF(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var _i=(()=>{class n{static __NG_ELEMENT_ID__=SF}return n})();function SF(){let n=$t();return aA(n,ke())}var RF=_i,oA=class extends RF{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Da(this._hostTNode,this._hostLView)}get injector(){return new io(this._hostTNode,this._hostLView)}get parentInjector(){let e=pv(this._hostTNode,this._hostLView);if(XC(e)){let t=ff(e,this._hostLView),r=hf(e),i=t[ee].data[r+8];return new io(i,t)}else return new io(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=UC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-jt}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let a=PC(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(t||{},s,a);return this.insertImpl(c,i,NC(this._hostTNode,a)),c}createComponent(e,t,r,i,s,a,c){let l=e&&!uO(e),h;if(l)h=t;else{let R=t||{};h=R.index,r=R.injector,i=R.projectableNodes,s=R.environmentInjector||R.ngModuleRef,a=R.directives,c=R.bindings}let p=l?e:new wa(Ui(e)),_=r||this.parentInjector;if(!s&&p.ngModule==null){let x=(l?_:this.parentInjector).get(ct,null);x&&(s=x)}let w=Ui(p.componentType??{}),C=PC(this._lContainer,w?.id??null),A=C?.firstChild??null,N=p.create(_,i,A,s,a,c);return this.insertImpl(N.hostView,h,NC(this._hostTNode,C)),N}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if($D(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let l=i[ht],h=new oA(l,l[_n],l[ht]);h.detach(h.indexOf(e))}}let s=this._adjustIndex(t),a=this._lContainer;return eF(a,i,s,r),e.attachToViewContainerRef(),n_(U_(a),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=UC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=ev(this._lContainer,t);r&&(Xu(U_(this._lContainer),t),x0(r[ee],r))}detach(e){let t=this._adjustIndex(e,-1),r=ev(this._lContainer,t);return r&&Xu(U_(this._lContainer),t)!=null?new zi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function UC(n){return n[sl]}function U_(n){return n[sl]||(n[sl]=[])}function aA(n,e){let t,r=e[n.index];return Zn(r)?t=r:(t=K0(r,e,null,n),e[n.index]=t,Tv(e,t)),PF(t,e,n,r),new oA(t,n,e)}function NF(n,e){let t=n[qe],r=t.createComment(""),i=er(e,n),s=t.parentNode(i);return yf(t,s,r,t.nextSibling(i),!1),r}var PF=kF,MF=()=>!1;function xF(n,e,t){return MF(n,e,t)}function kF(n,e,t,r){if(n[$i])return;let i;t.type&8?i=En(r):i=NF(e,t),n[$i]=i}var iv=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},sv=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let a=t.getByIndex(s),c=this.queries[a.indexInDeclarationView];i.push(c.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Vv(e,t).matches!==null&&this.queries[t].setDirty()}},ov=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=$F(e):this.predicate=e}},av=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},cv=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,OF(t,s)),this.matchTNodeWithReadOption(e,t,uf(t,e,s,!1,!1))}else r===Gi?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,uf(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Tn||i===_i||i===Gi&&t.type&4)this.addMatch(t.index,-2);else{let s=uf(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function OF(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function FF(n,e){return n.type&11?Da(n,e):n.type&4?kv(n,e):null}function VF(n,e,t,r){return t===-1?FF(e,n):t===-2?LF(n,e,r):pl(n,n[ee],t,e)}function LF(n,e,t){if(t===Tn)return Da(e,n);if(t===Gi)return kv(e,n);if(t===_i)return aA(e,n)}function cA(n,e,t,r){let i=e[wr].queries[r];if(i.matches===null){let s=n.data,a=t.matches,c=[];for(let l=0;a!==null&&l<a.length;l+=2){let h=a[l];if(h<0)c.push(null);else{let p=s[h];c.push(VF(e,p,a[l+1],t.metadata.read))}}i.matches=c}return i.matches}function uv(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let a=cA(n,e,i,t);for(let c=0;c<s.length;c+=2){let l=s[c];if(l>0)r.push(a[c/2]);else{let h=s[c+1],p=e[-l];for(let _=jt;_<p.length;_++){let w=p[_];w[Bi]===w[ht]&&uv(w[ee],w,h,r)}if(p[to]!==null){let _=p[to];for(let w=0;w<_.length;w++){let C=_[w];uv(C[ee],C,h,r)}}}}}return r}function UF(n,e){return n[wr].queries[e].queryList}function jF(n,e,t){let r=new gf((t&4)===4);return zD(n,e,r,r.destroy),(e[wr]??=new sv).queries.push(new iv(r))-1}function BF(n,e,t,r){let i=Bt();if(i.firstCreatePass){let s=$t();qF(i,new ov(e,t,r),s.index),HF(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return jF(i,ke(),t)}function $F(n){return n.split(",").map(e=>e.trim())}function qF(n,e,t){n.queries===null&&(n.queries=new av),n.queries.track(new cv(e,t))}function HF(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function Vv(n,e){return n.queries.getByIndex(e)}function zF(n,e){let t=n[ee],r=Vv(t,e);return r.crossesNgTemplate?uv(t,n,e,[]):cA(t,n,r,e)}var ao=class{},Mf=class{};var Ef=class extends ao{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new _f(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=s_(e);this._bootstrapComponents=w0(s.bootstrap),this._r3Injector=S_(e,t,[{provide:ao,useValue:this},{provide:El,useValue:this.componentFactoryResolver},...r],li(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},If=class extends Mf{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Ef(this.moduleType,e,[])}};var ml=class extends ao{injector;componentFactoryResolver=new _f(this);instance=null;constructor(e){super();let t=new Ys([...e.providers,{provide:ao,useValue:this},{provide:El,useValue:this.componentFactoryResolver}],e.parent||el(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Il(n,e,t=null){return new ml({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var GF=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=a_(!1,t.type),i=r.length>0?Il([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=q({token:n,providedIn:"environment",factory:()=>new n(Z(ct))})}return n})();function un(n){return ba(()=>{let e=uA(n),t=fe(O({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===gv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(GF).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||nr.Emulated,styles:n.styles||rn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Cv("NgStandalone"),lA(t);let r=n.dependencies;return t.directiveDefs=jC(r,WF),t.pipeDefs=jC(r,kD),t.id=YF(t),t})}function WF(n){return Ui(n)||o_(n)}function rr(n){return ba(()=>({type:n.type,bootstrap:n.bootstrap||rn,declarations:n.declarations||rn,imports:n.imports||rn,exports:n.exports||rn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function KF(n,e){if(n==null)return Li;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,a,c,l;Array.isArray(i)?(c=i[0],s=i[1],a=i[2]??s,l=i[3]||null):(s=i,a=i,c=Rf.None,l=null),t[s]=[r,c,l],e[s]=a}return t}function QF(n){if(n==null)return Li;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Rt(n){return ba(()=>{let e=uA(n);return lA(e),e})}function uA(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Li,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||rn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:KF(n.inputs,e),outputs:QF(n.outputs),debugInfo:null}}function lA(n){n.features?.forEach(e=>e(n))}function jC(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let s=e(i);s!==null&&r.push(s)}return r}:null}function YF(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function JF(n){return Object.getPrototypeOf(n.prototype).constructor}function Qi(n){let e=JF(n.type),t=!0,r=[n];for(;e;){let i;if(br(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let a=n;a.inputs=j_(n.inputs),a.declaredInputs=j_(n.declaredInputs),a.outputs=j_(n.outputs);let c=i.hostBindings;c&&nV(n,c);let l=i.viewQuery,h=i.contentQueries;if(l&&eV(n,l),h&&tV(n,h),XF(n,i),bD(n.outputs,i.outputs),br(i)&&i.data.animation){let p=n.data;p.animation=(p.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let a=0;a<s.length;a++){let c=s[a];c&&c.ngInherit&&c(n),c===Qi&&(t=!1)}}e=Object.getPrototypeOf(e)}ZF(r)}function XF(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function ZF(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=fl(i.hostAttrs,t=fl(t,i.hostAttrs))}}function j_(n){return n===Li?{}:n===rn?[]:n}function eV(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function tV(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function nV(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function rV(n,e,t,r,i,s,a,c){if(t.firstCreatePass){n.mergedAttrs=fl(n.mergedAttrs,n.attrs);let p=n.tView=Iv(2,n,i,s,a,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),p.queries=t.queries.embeddedTView(n))}c&&(n.flags|=c),ga(n,!1);let l=sV(t,e,n,r);tf()&&Sv(t,e,l,n),Ea(l,e);let h=K0(l,e,l,n);e[r+on]=h,Tv(e,h),xF(h,n,e)}function iV(n,e,t,r,i,s,a,c,l,h,p){let _=t+on,w;return e.firstCreatePass?(w=Ov(e,_,4,a||null,c||null),E_()&&X0(e,n,w,al(e.consts,h),L0),QC(e,w)):w=e.data[_],rV(w,n,e,t,r,i,s,l),ol(w)&&Nv(e,n,w),h!=null&&F0(n,w,p),w}function ir(n,e,t,r,i,s,a,c){let l=ke(),h=Bt(),p=al(h.consts,s);return iV(l,h,n,e,t,r,i,p,void 0,a,c),ir}var sV=oV;function oV(n,e,t,r){return nf(!0),e[qe].createComment("")}var Lv=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function dA(n){return typeof n=="function"&&n[Lt]!==void 0}function Uv(n){return dA(n)&&typeof n.set=="function"}var xf=new H(""),kf=new H(""),wl=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(t,r,i){this._ngZone=t,this.registry=r,l_()&&(this._destroyRef=M(fi,{optional:!0})??void 0),jv||(fA(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){let t=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),r=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{$e.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{t.unsubscribe(),r.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),t()},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static \u0275fac=function(r){return new(r||n)(Z($e),Z(hA),Z(kf))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),hA=(()=>{class n{_applications=new Map;registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return jv?.findTestabilityInTree(this,t,r)??null}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function fA(n){jv=n}var jv;function Yi(n){return!!n&&typeof n.then=="function"}function Bv(n){return!!n&&typeof n.subscribe=="function"}var pA=new H("");var $v=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=M(pA,{optional:!0})??[];injector=M(It);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=ut(this.injector,i);if(Yi(s))t.push(s);else if(Bv(s)){let a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});t.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Of=new H("");function gA(){cy(()=>{let n="";throw new $(600,n)})}function mA(n){return n.isBoundToModule}var aV=10;var Ji=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(wn);afterRenderManager=M(N0);zonelessEnabled=M(ll);rootEffectScheduler=M(k_);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Je;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=M(pi);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Le(t=>!t))}constructor(){M(vl,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=M(ct);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=It.NULL){return this._injector.get($e).run(()=>{Ve(10);let a=t instanceof Pf;if(!this._injector.get($v).done){let A="";throw new $(405,A)}let l;a?l=t:l=this._injector.get(El).resolveComponentFactory(t),this.componentTypes.push(l.componentType);let h=mA(l)?void 0:this._injector.get(ao),p=r||l.selector,_=l.create(i,[],p,h),w=_.location.nativeElement,C=_.injector.get(xf,null);return C?.registerApplication(w),_.onDestroy(()=>{this.detachView(_.hostView),hl(this.components,_),C?.unregisterApplication(w)}),this._loadComponent(_),Ve(11,_),_})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ve(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Dv.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new $(101,!1);let t=ce(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ce(t),this.afterTick.next(),Ve(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(oo,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<aV;)Ve(14),this.synchronizeOnce(),Ve(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!cl(i))continue;let s=r&&!this.zonelessEnabled?0:1;H0(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>cl(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;hl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Of,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>hl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new $(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Tl(n,e,t,r){let i=ke(),s=ma();if(Ca(i,s,e)){let a=Bt(),c=ef();M1(c,i,n,e,t,r)}return Tl}var B7=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function ft(n,e,t){let r=ke(),i=ma();if(Ca(r,i,e)){let s=Bt(),a=ef();V0(a,r,n,e,r[qe],t)}return ft}function BC(n,e,t,r,i){Pv(e,n,t,i?"class":"style",r)}function F(n,e,t,r){let i=ke(),s=i[ee],a=n+on,c=s.firstCreatePass?eA(a,i,2,e,L0,E_(),t,r):s.data[a];if(O1(c,i,n,e,cV),ol(c)){let l=i[ee];Nv(l,i,c),y0(l,c,i)}return r!=null&&F0(i,c),F}function V(){let n=Bt(),e=$t(),t=F1(e);return n.firstCreatePass&&tA(n,t),YD(t)&&JD(),KD(),t.classesWithoutHost!=null&&gO(t)&&BC(n,t,ke(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&mO(t)&&BC(n,t,ke(),t.stylesWithoutHost,!1),V}function bn(n,e,t,r){return F(n,e,t,r),V(),bn}var cV=(n,e,t,r,i)=>(nf(!0),b0(e[qe],r,lC()));function Xi(){return ke()}var bl="en-US";var uV=bl;function yA(n){typeof n=="string"&&(uV=n.toLowerCase().replace(/_/g,"-"))}function He(n,e,t){let r=ke(),i=Bt(),s=$t();return _A(i,r,r[qe],s,n,e,t),He}function _A(n,e,t,r,i,s,a){let c=!0,l=null;if((r.type&3||a)&&(l??=L_(r,e,s),yF(r,n,e,a,t,i,s,l)&&(c=!1)),c){let h=r.outputs?.[i],p=r.hostDirectiveOutputs?.[i];if(p&&p.length)for(let _=0;_<p.length;_+=2){let w=p[_],C=p[_+1];l??=L_(r,e,s),VC(r,e,w,C,i,l)}if(h&&h.length)for(let _ of h)l??=L_(r,e,s),VC(r,e,_,i,i,l)}}function Nt(n=1){return uC(n)}function qv(n,e,t,r){BF(n,e,t,r)}function Hv(n){let e=ke(),t=Bt(),r=D_();Jh(r+1);let i=Vv(t,r);if(n.dirty&&BD(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=zF(e,r);n.reset(s,RO),n.notifyOnChanges()}return!0}return!1}function zv(){return UF(ke(),D_())}function of(n,e){return n<<17|e<<2}function co(n){return n>>17&32767}function lV(n){return(n&2)==2}function dV(n,e){return n&131071|e<<17}function lv(n){return n|2}function Ta(n){return(n&131068)>>2}function B_(n,e){return n&-131069|e<<2}function hV(n){return(n&1)===1}function dv(n){return n|1}function fV(n,e,t,r,i,s){let a=s?e.classBindings:e.styleBindings,c=co(a),l=Ta(a);n[r]=t;let h=!1,p;if(Array.isArray(t)){let _=t;p=_[1],(p===null||la(_,p)>0)&&(h=!0)}else p=t;if(i)if(l!==0){let w=co(n[c+1]);n[r+1]=of(w,c),w!==0&&(n[w+1]=B_(n[w+1],r)),n[c+1]=dV(n[c+1],r)}else n[r+1]=of(c,0),c!==0&&(n[c+1]=B_(n[c+1],r)),c=r;else n[r+1]=of(l,0),c===0?c=r:n[l+1]=B_(n[l+1],r),l=r;h&&(n[r+1]=lv(n[r+1])),$C(n,p,r,!0),$C(n,p,r,!1),pV(e,p,n,r,s),a=of(c,l),s?e.classBindings=a:e.styleBindings=a}function pV(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&la(s,e)>=0&&(t[r+1]=dv(t[r+1]))}function $C(n,e,t,r){let i=n[t+1],s=e===null,a=r?co(i):Ta(i),c=!1;for(;a!==0&&(c===!1||s);){let l=n[a],h=n[a+1];gV(l,e)&&(c=!0,n[a+1]=r?dv(h):lv(h)),a=r?co(h):Ta(h)}c&&(n[t+1]=r?lv(i):dv(i))}function gV(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?la(n,e)>=0:!1}function Ff(n,e){return mV(n,e,null,!0),Ff}function mV(n,e,t,r){let i=ke(),s=Bt(),a=tC(2);if(s.firstUpdatePass&&_V(s,n,a,r),e!==yi&&Ca(i,a,e)){let c=s.data[ro()];TV(s,c,i,i[qe],n,i[a+1]=bV(e,t),r,a)}}function yV(n,e){return e>=n.expandoStartIndex}function _V(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[ro()],a=yV(n,t);DV(s,r)&&e===null&&!a&&(e=!1),e=vV(i,s,e,r),fV(i,s,e,t,a,r)}}function vV(n,e,t,r){let i=sC(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=$_(null,n,e,t,r),t=yl(t,e.attrs,r),s=null);else{let a=e.directiveStylingLast;if(a===-1||n[a]!==i)if(t=$_(i,n,e,t,r),s===null){let l=EV(n,e,r);l!==void 0&&Array.isArray(l)&&(l=$_(null,n,e,l[1],r),l=yl(l,e.attrs,r),IV(n,e,r,l))}else s=wV(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function EV(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ta(r)!==0)return n[co(r)]}function IV(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[co(i)]=r}function wV(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let a=n[s].hostAttrs;r=yl(r,a,t)}return yl(r,e.attrs,t)}function $_(n,e,t,r,i){let s=null,a=t.directiveEnd,c=t.directiveStylingLast;for(c===-1?c=t.directiveStart:c++;c<a&&(s=e[c],r=yl(r,s.hostAttrs,i),s!==n);)c++;return n!==null&&(t.directiveStylingLast=c),r}function yl(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];typeof a=="number"?i=a:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),xD(n,a,t?!0:e[++s]))}return n===void 0?null:n}function TV(n,e,t,r,i,s,a,c){if(!(e.type&3))return;let l=n.data,h=l[c+1],p=hV(h)?qC(l,e,t,i,Ta(h),a):void 0;if(!wf(p)){wf(s)||lV(h)&&(s=qC(l,null,t,i,c,a));let _=p_(ro(),t);w1(r,a,_,i,s)}}function qC(n,e,t,r,i,s){let a=e===null,c;for(;i>0;){let l=n[i],h=Array.isArray(l),p=h?l[1]:l,_=p===null,w=t[i+1];w===yi&&(w=_?rn:void 0);let C=_?qh(w,r):p===r?w:void 0;if(h&&!wf(C)&&(C=qh(l,r)),wf(C)&&(c=C,a))return c;let A=n[i+1];i=a?co(A):Ta(A)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(c=qh(l,r))}return c}function wf(n){return n!==void 0}function bV(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=li(Af(n)))),n}function DV(n,e){return(n.flags&(e?8:16))!==0}function W(n,e=""){let t=ke(),r=Bt(),i=n+on,s=r.firstCreatePass?Ov(r,i,1,e,null):r.data[i],a=CV(r,t,s,e,n);t[i]=a,tf()&&Sv(r,t,a,s),ga(s,!1)}var CV=(n,e,t,r,i)=>(nf(!0),XO(e[qe],r));function AV(n,e,t,r=""){return Ca(n,ma(),t)?e+ua(t)+r:yi}function Qt(n){return Ar("",n),Qt}function Ar(n,e,t){let r=ke(),i=AV(r,n,e,t);return i!==yi&&SV(r,ro(),i),Ar}function SV(n,e,t){let r=p_(e,n);ZO(n[qe],r,t)}function sr(n,e,t){Uv(e)&&(e=e());let r=ke(),i=ma();if(Ca(r,i,e)){let s=Bt(),a=ef();V0(a,r,n,e,r[qe],t)}return sr}function Sr(n,e){let t=Uv(n);return t&&n.set(e),t}function or(n,e){let t=ke(),r=Bt(),i=$t();return _A(r,t,t[qe],i,n,e),or}function Gv(n){return Ca(ke(),ma(),n)?ua(n):yi}function RV(n,e,t){let r=Bt();if(r.firstCreatePass){let i=br(n);hv(t,r.data,r.blueprint,i,!0),hv(e,r.data,r.blueprint,i,!1)}}function hv(n,e,t,r,i){if(n=Et(n),Array.isArray(n))for(let s=0;s<n.length;s++)hv(n[s],e,t,r,i);else{let s=Bt(),a=ke(),c=$t(),l=Qs(n)?n:Et(n.provide),h=u_(n),p=c.providerIndexes&1048575,_=c.directiveStart,w=c.providerIndexes>>20;if(Qs(n)||!n.multi){let C=new so(h,i,re,null),A=H_(l,e,i?p:p+w,_);A===-1?(G_(pf(c,a),s,l),q_(s,n,e.length),e.push(l),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(C),a.push(C)):(t[A]=C,a[A]=C)}else{let C=H_(l,e,p+w,_),A=H_(l,e,p,p+w),N=C>=0&&t[C],R=A>=0&&t[A];if(i&&!R||!i&&!N){G_(pf(c,a),s,l);let x=MV(i?PV:NV,t.length,i,r,h,n);!i&&R&&(t[A].providerFactory=x),q_(s,n,e.length,0),e.push(l),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(x),a.push(x)}else{let x=vA(t[i?A:C],h,!i&&r);q_(s,n,C>-1?C:A,x)}!i&&r&&R&&t[A].componentProviders++}}}function q_(n,e,t,r){let i=Qs(e),s=VD(e);if(i||s){let l=(s?Et(e.useClass):e).prototype.ngOnDestroy;if(l){let h=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let p=h.indexOf(t);p===-1?h.push(t,[r,l]):h[p+1].push(r,l)}else h.push(t,l)}}}function vA(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function H_(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function NV(n,e,t,r,i){return fv(this.multi,[])}function PV(n,e,t,r,i){let s=this.multi,a;if(this.providerFactory){let c=this.providerFactory.componentProviders,l=pl(r,r[ee],this.providerFactory.index,i);a=l.slice(0,c),fv(s,a);for(let h=c;h<l.length;h++)a.push(l[h])}else a=[],fv(s,a);return a}function fv(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function MV(n,e,t,r,i,s){let a=new so(n,t,re,null);return a.multi=[],a.index=e,a.componentProviders=0,vA(a,i,r&&!t),a}function Dl(n,e=[]){return t=>{t.providersResolver=(r,i)=>RV(r,i?i(n):n,e)}}var Tf=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Wv=(()=>{class n{compileModuleSync(t){return new If(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=s_(t),s=w0(i.declarations).reduce((a,c)=>{let l=Ui(c);return l&&a.push(new wa(l)),a},[]);return new Tf(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var EA=(()=>{class n{applicationErrorHandler=M(wn);appRef=M(Ji);taskService=M(pi);ngZone=M($e);zonelessEnabled=M(ll);tracing=M(vl,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ot;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Qu):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(x_,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?N_:R_;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Qu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,N_(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function IA(){return[{provide:Js,useExisting:EA},{provide:$e,useClass:Yu},{provide:ll,useValue:!0}]}function xV(){return typeof $localize<"u"&&$localize.locale||bl}var Vf=new H("",{factory:()=>M(Vf,{optional:!0,skipSelf:!0})||xV()});function Cl(n,e){return ch(n,e?.equal)}var CA=Symbol("InputSignalNode#UNSET"),KV=fe(O({},uh),{transformFn:void 0,applyValueToInputSignal(n,e){ju(n,e)}});function AA(n,e){let t=Object.create(KV);t.value=n,t.transformFn=e?.transform;function r(){if(Vu(t),t.value===CA){let i=null;throw new $(-950,i)}return t.value}return r[Lt]=t,r}var Uf=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>_l(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function wA(n,e){return AA(n,e)}function QV(n){return AA(CA,n)}var SA=(wA.required=QV,wA);var Kv=new H(""),YV=new H("");function Al(n){return!n.moduleRef}function JV(n){let e=Al(n)?n.r3Injector:n.moduleRef.injector,t=e.get($e);return t.run(()=>{Al(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(wn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Al(n)){let s=()=>e.destroy(),a=n.platformInjector.get(Kv);a.add(s),e.onDestroy(()=>{i.unsubscribe(),a.delete(s)})}else{let s=()=>n.moduleRef.destroy(),a=n.platformInjector.get(Kv);a.add(s),n.moduleRef.onDestroy(()=>{hl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),a.delete(s)})}return ZV(r,t,()=>{let s=e.get(pi),a=s.add(),c=e.get($v);return c.runInitializers(),c.donePromise.then(()=>{let l=e.get(Vf,bl);if(yA(l||bl),!e.get(YV,!0))return Al(n)?e.get(Ji):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Al(n)){let p=e.get(Ji);return n.rootComponent!==void 0&&p.bootstrap(n.rootComponent),p}else return XV?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(a))})})}var XV;function ZV(n,e,t){try{let r=t();return Yi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Lf=null;function eL(n=[],e){return It.create({name:e,providers:[{provide:Zu,useValue:"platform"},{provide:Kv,useValue:new Set([()=>Lf=null])},...n]})}function tL(n=[]){if(Lf)return Lf;let e=eL(n);return Lf=e,gA(),nL(e),e}function nL(n){let e=n.get(Df,null);ut(n,()=>{e?.forEach(t=>t())})}function Zv(){return!1}var ho=(()=>{class n{static __NG_ELEMENT_ID__=rL}return n})();function rL(n){return iL($t(),ke(),(n&16)===16)}function iL(n,e,t){if(qi(n)&&!t){let r=In(n.index,e);return new zi(r,r)}else if(n.type&175){let r=e[vn];return new zi(r,e)}return null}var Qv=class{constructor(){}supports(e){return Fv(e)}create(e){return new Yv(e)}},sL=(n,e)=>e,Yv=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||sL}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let a=!r||t&&t.currentIndex<TA(r,i,s)?t:r,c=TA(a,i,s),l=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(t=t._next,a.previousIndex==null)i++;else{s||(s=[]);let h=c-i,p=l-i;if(h!=p){for(let w=0;w<h;w++){let C=w<s.length?s[w]:s[w]=0,A=C+w;p<=A&&A<h&&(s[w]=C+1)}let _=a.previousIndex;s[_]=p-h}}c!==l&&e(a,c,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Fv(e))throw new $(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,a;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)s=e[c],a=this._trackByFn(c,s),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,s,a,c),r=!0):(r&&(t=this._verifyReinsertion(t,s,a,c)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,nA(e,c=>{a=this._trackByFn(i,c),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,c,a,i),r=!0):(r&&(t=this._verifyReinsertion(t,c,a,i)),Object.is(t.item,c)||this._addIdentityChange(t,c)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Jv(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new jf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new jf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Jv=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Xv=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},jf=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Xv,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function TA(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function bA(){return new eE([new Qv])}var eE=(()=>{class n{factories;static \u0275prov=q({token:n,providedIn:"root",factory:bA});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=M(n,{optional:!0,skipSelf:!0});return n.create(t,r||bA())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new $(901,!1)}}return n})();var RA=(()=>{class n{constructor(t){}static \u0275fac=function(r){return new(r||n)(Z(Ji))};static \u0275mod=rr({type:n});static \u0275inj=mn({})}return n})();function NA(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Ve(8);try{let s=i?.injector??tL(r),a=[IA(),pC,...t||[]],c=new ml({providers:a,parent:s,debugName:"",runEnvironmentInitializers:!1});return JV({r3Injector:c.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{Ve(9)}}function Aa(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var xA=null;function ln(){return xA}function tE(n){xA??=n}var Rl=class{},nE=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>M(kA),providedIn:"platform"})}return n})();var kA=(()=>{class n extends nE{_location;_history;_doc=M(qt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ln().getBaseHref(this._doc)}onPopState(t){let r=ln().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=ln().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function OA(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function PA(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Zi(n){return n&&n[0]!=="?"?`?${n}`:n}var Sa=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>M(VA),providedIn:"root"})}return n})(),FA=new H(""),VA=(()=>{class n extends Sa{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(qt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return OA(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Zi(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let a=this.prepareExternalUrl(i+Zi(s));this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,s){let a=this.prepareExternalUrl(i+Zi(s));this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Z(nE),Z(FA,8))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ra=(()=>{class n{_subject=new Je;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=cL(PA(MA(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Zi(r))}normalize(t){return n.stripTrailingSlash(aL(this._basePath,MA(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Zi(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Zi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Zi;static joinWithSlash=OA;static stripTrailingSlash=PA;static \u0275fac=function(r){return new(r||n)(Z(Sa))};static \u0275prov=q({token:n,factory:()=>oL(),providedIn:"root"})}return n})();function oL(){return new Ra(Z(Sa))}function aL(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function MA(n){return n.replace(/\/index.html$/,"")}function cL(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Bf=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},es=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,a)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Bf(i.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(s===null?void 0:s);else if(s!==null){let c=r.get(s);r.move(c,a),LA(c,i)}});for(let i=0,s=r.length;i<s;i++){let c=r.get(i).context;c.index=i,c.count=s,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);LA(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(re(_i),re(Gi),re(eE))};static \u0275dir=Rt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function LA(n,e){n.context.$implicit=e.item}var Nl=(()=>{class n{_viewContainer;_context=new $f;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){UA(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){UA(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(re(_i),re(Gi))};static \u0275dir=Rt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),$f=class{$implicit=null;ngIf=null};function UA(n,e){if(n&&!n.createEmbeddedView)throw new $(2020,!1)}var vi=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=rr({type:n});static \u0275inj=mn({})}return n})();function rE(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Pl=class{};var jA="browser";var Ml=class{_doc;constructor(e){this._doc=e}manager},Hf=(()=>{class n extends Ml{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(Z(qt))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),Wf=new H(""),aE=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(a=>{a.manager=this});let i=t.filter(a=>!(a instanceof Hf));this._plugins=i.slice().reverse();let s=t.find(a=>a instanceof Hf);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new $(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Z(Wf),Z($e))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),iE="ng-app-id";function BA(n){for(let e of n)e.remove()}function $A(n,e){let t=e.createElement("style");return t.textContent=n,t}function uL(n,e,t,r){let i=n.head?.querySelectorAll(`style[${iE}="${e}"],link[${iE}="${e}"]`);if(i)for(let s of i)s.removeAttribute(iE),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function oE(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var cE=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,uL(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,$A);r?.forEach(i=>this.addUsage(i,this.external,oE))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(BA(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])BA(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,$A(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,oE(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Z(qt),Z(bf),Z(Cf,8),Z(uo))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),sE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},uE=/%COMP%/g;var HA="%COMP%",lL=`_nghost-${HA}`,dL=`_ngcontent-${HA}`,hL=!0,fL=new H("",{factory:()=>hL});function pL(n){return dL.replace(uE,n)}function gL(n){return lL.replace(uE,n)}function zA(n,e){return e.map(t=>t.replace(uE,n))}var lE=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,a,c,l=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=a,this.ngZone=c,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new xl(t,a,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Gf?i.applyToHost(t):i instanceof kl&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,_=this.platformIsServer,w=this.tracingService;switch(r.encapsulation){case nr.Emulated:s=new Gf(l,h,r,this.appId,p,a,c,_,w);break;case nr.ShadowDom:return new zf(l,t,r,a,c,this.nonce,_,w,h);case nr.ExperimentalIsolatedShadowDom:return new zf(l,t,r,a,c,this.nonce,_,w);default:s=new kl(l,h,r,p,a,c,_,w);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Z(aE),Z(cE),Z(bf),Z(fL),Z(qt),Z($e),Z(Cf),Z(vl,8))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),xl=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(sE[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(qA(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(qA(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new $(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=sE[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=sE[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Cr.DashCase|Cr.Important)?e.style.setProperty(t,r,i&Cr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Cr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=ln().getGlobalEventTarget(this.doc,e),!e))throw new $(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function qA(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var zf=class extends xl{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,s,a,c,l,h){super(e,i,s,c,l),this.hostEl=t,this.sharedStylesHost=h,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let p=r.styles;p=zA(r.id,p);for(let w of p){let C=document.createElement("style");a&&C.setAttribute("nonce",a),C.textContent=w,this.shadowRoot.appendChild(C)}let _=r.getExternalStyles?.();if(_)for(let w of _){let C=oE(w,i);a&&C.setAttribute("nonce",a),this.shadowRoot.appendChild(C)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},kl=class extends xl{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,a,c,l,h){super(e,s,a,c,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let p=r.styles;this.styles=h?zA(h,p):p,this.styleUrls=r.getExternalStyles?.(h)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Ia.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Gf=class extends kl{contentAttr;hostAttr;constructor(e,t,r,i,s,a,c,l,h){let p=i+"-"+r.id;super(e,t,r,s,a,c,l,h,p),this.contentAttr=pL(p),this.hostAttr=gL(p)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Kf=class n extends Rl{supportsDOMEvents=!0;static makeCurrent(){tE(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=mL();return t==null?null:yL(t)}resetBaseElement(){Ol=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return rE(document.cookie,e)}},Ol=null;function mL(){return Ol=Ol||document.head.querySelector("base"),Ol?Ol.getAttribute("href"):null}function yL(n){return new URL(n,document.baseURI).pathname}var Qf=class{addToWindow(e){gn.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new $(5103,!1);return s},gn.getAllAngularTestabilities=()=>e.getAllTestabilities(),gn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=gn.getAllAngularTestabilities(),s=i.length,a=function(){s--,s==0&&r()};i.forEach(c=>{c.whenStable(a)})};gn.frameworkStabilizers||(gn.frameworkStabilizers=[]),gn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?ln().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},_L=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),GA=["alt","control","meta","shift"],vL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},EL={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},WA=(()=>{class n extends Ml{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ln().onAndCancel(t,a.domEventName,c,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),GA.forEach(h=>{let p=r.indexOf(h);p>-1&&(r.splice(p,1),a+=h+".")}),a+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=i,l.fullKey=a,l}static matchEventFullKeyCode(t,r){let i=vL[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),GA.forEach(a=>{if(a!==i){let c=EL[a];c(t)&&(s+=a+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Z(qt))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();function dE(n,e,t){let r=O({rootComponent:n,platformRef:t?.platformRef},IL(e));return NA(r)}function IL(n){return{appProviders:[...KA,...n?.providers??[]],platformProviders:DL}}function wL(){Kf.makeCurrent()}function TL(){return new di}function bL(){return mv(document),document}var DL=[{provide:uo,useValue:jA},{provide:Df,useValue:wL,multi:!0},{provide:qt,useFactory:bL}];var CL=[{provide:kf,useClass:Qf},{provide:xf,useClass:wl},{provide:wl,useClass:wl}],KA=[{provide:Zu,useValue:"root"},{provide:di,useFactory:TL},{provide:Wf,useClass:Hf,multi:!0},{provide:Wf,useClass:WA,multi:!0},lE,cE,aE,{provide:oo,useExisting:lE},{provide:Pl,useClass:_L},[]],hE=(()=>{class n{constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275mod=rr({type:n});static \u0275inj=mn({providers:[...KA,...CL],imports:[vi,RA]})}return n})();var QA=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Z(qt))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ie="primary",Kl=Symbol("RouteTitle"),yE=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function mo(n){return new yE(n)}function iS(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let a=r[s],c=n[s];if(a[0]===":")i[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function tp(n){return new Promise((e,t)=>{n.pipe(ci()).subscribe({next:r=>e(r),error:r=>t(r)})})}function SL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Rr(n[t],e[t]))return!1;return!0}function Rr(n,e){let t=n?_E(n):void 0,r=e?_E(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!sS(n[i],e[i]))return!1;return!0}function _E(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function sS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function oS(n){return n.length>0?n[n.length-1]:null}function _o(n){return Rh(n)?n:Yi(n)?Ke(Promise.resolve(n)):le(n)}function aS(n){return Rh(n)?tp(n):Promise.resolve(n)}var RL={exact:uS,subset:lS},cS={exact:NL,subset:PL,ignored:()=>!0};function YA(n,e,t){return RL[t.paths](n.root,e.root,t.matrixParams)&&cS[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function NL(n,e){return Rr(n,e)}function uS(n,e,t){if(!po(n.segments,e.segments)||!Xf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!uS(n.children[r],e.children[r],t))return!1;return!0}function PL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>sS(n[t],e[t]))}function lS(n,e,t){return dS(n,e,e.segments,t)}function dS(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!po(i,t)||e.hasChildren()||!Xf(i,t,r))}else if(n.segments.length===t.length){if(!po(n.segments,t)||!Xf(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!lS(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!po(n.segments,i)||!Xf(n.segments,i,r)||!n.children[ie]?!1:dS(n.children[ie],e,s,r)}}function Xf(n,e,t){return e.every((r,i)=>cS[t](n[i].parameters,r.parameters))}var cr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Se([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=mo(this.queryParams),this._queryParamMap}toString(){return kL.serialize(this)}},Se=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zf(this)}},ts=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=mo(this.parameters),this._parameterMap}toString(){return fS(this)}};function ML(n,e){return po(n,e)&&n.every((t,r)=>Rr(t.parameters,e[r].parameters))}function po(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function xL(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ie&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ie&&(t=t.concat(e(i,r)))}),t}var Ql=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>new ns,providedIn:"root"})}return n})(),ns=class{parse(e){let t=new EE(e);return new cr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Fl(e.root,!0)}`,r=VL(e.queryParams),i=typeof e.fragment=="string"?`#${OL(e.fragment)}`:"";return`${t}${r}${i}`}},kL=new ns;function Zf(n){return n.segments.map(e=>fS(e)).join("/")}function Fl(n,e){if(!n.hasChildren())return Zf(n);if(e){let t=n.children[ie]?Fl(n.children[ie],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==ie&&r.push(`${i}:${Fl(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=xL(n,(r,i)=>i===ie?[Fl(n.children[ie],!1)]:[`${i}:${Fl(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ie]!=null?`${Zf(n)}/${t[0]}`:`${Zf(n)}/(${t.join("//")})`}}function hS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yf(n){return hS(n).replace(/%3B/gi,";")}function OL(n){return encodeURI(n)}function vE(n){return hS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ep(n){return decodeURIComponent(n)}function JA(n){return ep(n.replace(/\+/g,"%20"))}function fS(n){return`${vE(n.path)}${FL(n.parameters)}`}function FL(n){return Object.entries(n).map(([e,t])=>`;${vE(e)}=${vE(t)}`).join("")}function VL(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Yf(t)}=${Yf(i)}`).join("&"):`${Yf(t)}=${Yf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var LL=/^[^\/()?;#]+/;function fE(n){let e=n.match(LL);return e?e[0]:""}var UL=/^[^\/()?;=#]+/;function jL(n){let e=n.match(UL);return e?e[0]:""}var BL=/^[^=?&#]+/;function $L(n){let e=n.match(BL);return e?e[0]:""}var qL=/^[^&#]+/;function HL(n){let e=n.match(qL);return e?e[0]:""}var EE=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Se([],{}):new Se([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ie]=new Se(e,t)),r}parseSegment(){let e=fE(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new ts(ep(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=jL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=fE(this.remaining);i&&(r=i,this.capture(r))}e[ep(t)]=ep(r)}parseQueryParam(e){let t=$L(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let a=HL(this.remaining);a&&(r=a,this.capture(r))}let i=JA(t),s=JA(r);if(e.hasOwnProperty(i)){let a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=fE(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new $(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ie);let a=this.parseChildren();t[s??ie]=Object.keys(a).length===1&&a[ie]?a[ie]:new Se([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}};function pS(n){return n.segments.length>0?new Se([],{[ie]:n}):n}function gS(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=gS(i);if(r===ie&&s.segments.length===0&&s.hasChildren())for(let[a,c]of Object.entries(s.children))e[a]=c;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Se(n.segments,e);return zL(t)}function zL(n){if(n.numberOfChildren===1&&n.children[ie]){let e=n.children[ie];return new Se(n.segments.concat(e.segments),e.children)}return n}function rs(n){return n instanceof cr}function mS(n,e,t=null,r=null,i=new ns){let s=yS(n);return _S(s,e,t,r,i)}function yS(n){let e;function t(s){let a={};for(let l of s.children){let h=t(l);a[l.outlet]=h}let c=new Se(s.url,a);return s===n&&(e=c),c}let r=t(n.root),i=pS(r);return e??i}function _S(n,e,t,r,i){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return pE(s,s,s,t,r,i);let a=GL(e);if(a.toRoot())return pE(s,s,new Se([],{}),t,r,i);let c=WL(a,s,n),l=c.processChildren?Ll(c.segmentGroup,c.index,a.commands):ES(c.segmentGroup,c.index,a.commands);return pE(s,c.segmentGroup,l,t,r,i)}function np(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Bl(n){return typeof n=="object"&&n!=null&&n.outlets}function XA(n,e,t){n||="\u0275";let r=new cr;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function pE(n,e,t,r,i,s){let a={};for(let[h,p]of Object.entries(r??{}))a[h]=Array.isArray(p)?p.map(_=>XA(h,_,s)):XA(h,p,s);let c;n===e?c=t:c=vS(n,e,t);let l=pS(gS(c));return new cr(l,a,i)}function vS(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=vS(s,e,t)}),new Se(n.segments,r)}var rp=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&np(r[0]))throw new $(4003,!1);let i=r.find(Bl);if(i&&i!==oS(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function GL(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new rp(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,a)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,h])=>{c[l]=typeof h=="string"?h.split("/"):h}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:a===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new rp(t,e,r)}var Pa=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function WL(n,e,t){if(n.isAbsolute)return new Pa(e,!0,0);if(!t)return new Pa(e,!1,NaN);if(t.parent===null)return new Pa(t,!0,0);let r=np(n.commands[0])?0:1,i=t.segments.length-1+r;return KL(t,i,n.numberOfDoubleDots)}function KL(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new $(4005,!1);i=r.segments.length}return new Pa(r,!1,i-s)}function QL(n){return Bl(n[0])?n[0].outlets:{[ie]:n}}function ES(n,e,t){if(n??=new Se([],{}),n.segments.length===0&&n.hasChildren())return Ll(n,e,t);let r=YL(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Se(n.segments.slice(0,r.pathIndex),{});return s.children[ie]=new Se(n.segments.slice(r.pathIndex),n.children),Ll(s,0,i)}else return r.match&&i.length===0?new Se(n.segments,{}):r.match&&!n.hasChildren()?IE(n,e,t):r.match?Ll(n,0,i):IE(n,e,t)}function Ll(n,e,t){if(t.length===0)return new Se(n.segments,{});{let r=QL(t),i={};if(Object.keys(r).some(s=>s!==ie)&&n.children[ie]&&n.numberOfChildren===1&&n.children[ie].segments.length===0){let s=Ll(n.children[ie],e,t);return new Se(n.segments,s.children)}return Object.entries(r).forEach(([s,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[s]=ES(n.children[s],e,a))}),Object.entries(n.children).forEach(([s,a])=>{r[s]===void 0&&(i[s]=a)}),new Se(n.segments,i)}}function YL(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let a=n.segments[i],c=t[r];if(Bl(c))break;let l=`${c}`,h=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&h&&typeof h=="object"&&h.outlets===void 0){if(!eS(l,h,a))return s;r+=2}else{if(!eS(l,{},a))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function IE(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Bl(s)){let l=JL(s.outlets);return new Se(r,l)}if(i===0&&np(t[0])){let l=n.segments[e];r.push(new ts(l.path,ZA(t[0]))),i++;continue}let a=Bl(s)?s.outlets[ie]:`${s}`,c=i<t.length-1?t[i+1]:null;a&&c&&np(c)?(r.push(new ts(a,ZA(c))),i+=2):(r.push(new ts(a,{})),i++)}return new Se(r,{})}function JL(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=IE(new Se([],{}),0,r))}),e}function ZA(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function eS(n,e,t){return n==t.path&&Rr(e,t.parameters)}var Ul="imperative",pt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(pt||{}),hn=class{id;url;constructor(e,t){this.id=e,this.url=t}},yo=class extends hn{type=pt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ur=class extends hn{urlAfterRedirects;type=pt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},zt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(zt||{}),$l=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})($l||{}),Nr=class extends hn{reason;code;type=pt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ei=class extends hn{reason;code;type=pt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},xa=class extends hn{error;target;type=pt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ql=class extends hn{urlAfterRedirects;state;type=pt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ip=class extends hn{urlAfterRedirects;state;type=pt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sp=class extends hn{urlAfterRedirects;state;shouldActivate;type=pt.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},op=class extends hn{urlAfterRedirects;state;type=pt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ap=class extends hn{urlAfterRedirects;state;type=pt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cp=class{route;type=pt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},up=class{route;type=pt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},lp=class{snapshot;type=pt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dp=class{snapshot;type=pt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hp=class{snapshot;type=pt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fp=class{snapshot;type=pt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Hl=class{},ka=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function XL(n){return!(n instanceof Hl)&&!(n instanceof ka)}function ZL(n,e){return n.providers&&!n._injector&&(n._injector=Il(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ar(n){return n.outlet||ie}function e2(n,e){let t=n.filter(r=>ar(r)===e);return t.push(...n.filter(r=>ar(r)!==e)),t}function Va(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var pp=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Va(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new La(this.rootInjector)}},La=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new pp(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Z(ct))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gp=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=wE(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=wE(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=TE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return TE(e,this._root).map(t=>t.value)}};function wE(n,e){if(n===e.value)return e;for(let t of e.children){let r=wE(n,t);if(r)return r}return null}function TE(n,e){if(n===e.value)return[e];for(let t of e.children){let r=TE(n,t);if(r.length)return r.unshift(e),r}return[]}var dn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Na(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var zl=class extends gp{snapshot;constructor(e,t){super(e),this.snapshot=t,RE(this,e)}toString(){return this.snapshot.toString()}};function IS(n){let e=t2(n),t=new at([new ts("",{})]),r=new at({}),i=new at({}),s=new at({}),a=new at(""),c=new Ii(t,r,s,a,i,ie,n,e.root);return c.snapshot=e.root,new zl(new dn(c,[]),e)}function t2(n){let e={},t={},r={},s=new go([],e,r,"",t,ie,n,null,{});return new Gl("",new dn(s,[]))}var Ii=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,a,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=a,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Le(h=>h[Kl]))??le(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Le(e=>mo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Le(e=>mo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function mp(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:O(O({},e.params),n.params),data:O(O({},e.data),n.data),resolve:O(O(O(O({},n.data),e.data),i?.data),n._resolvedData)}:r={params:O({},n.params),data:O({},n.data),resolve:O(O({},n.data),n._resolvedData??{})},i&&TS(i)&&(r.resolve[Kl]=i.title),r}var go=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Kl]}constructor(e,t,r,i,s,a,c,l,h){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=a,this.component=c,this.routeConfig=l,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=mo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=mo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Gl=class extends gp{url;constructor(e,t){super(t),this.url=e,RE(this,t)}toString(){return wS(this._root)}};function RE(n,e){e.value._routerState=n,e.children.forEach(t=>RE(n,t))}function wS(n){let e=n.children.length>0?` { ${n.children.map(wS).join(", ")} } `:"";return`${n.value}${e}`}function gE(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Rr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Rr(e.params,t.params)||n.paramsSubject.next(t.params),SL(e.url,t.url)||n.urlSubject.next(t.url),Rr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function bE(n,e){let t=Rr(n.params,e.params)&&ML(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||bE(n.parent,e.parent))}function TS(n){return typeof n.title=="string"||n.title===null}var bS=new H(""),Yl=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ie;activateEvents=new Ze;deactivateEvents=new Ze;attachEvents=new Ze;detachEvents=new Ze;routerOutletData=SA();parentContexts=M(La);location=M(_i);changeDetector=M(ho);inputBinder=M(Ep,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=t;let i=this.location,a=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new DE(t,c,i.injector,this.routerOutletData);this.activated=i.createComponent(a,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Rt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[mi]})}return n})(),DE=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Ii?this.route:e===La?this.childContexts:e===bS?this.outletData:this.parent.get(e,t)}},Ep=new H("");var NE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=un({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&bn(0,"router-outlet")},dependencies:[Yl],encapsulation:2})}return n})();function PE(n){let e=n.children&&n.children.map(PE),t=e?fe(O({},n),{children:e}):O({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ie&&(t.component=NE),t}function n2(n,e,t){let r=Wl(n,e._root,t?t._root:void 0);return new zl(r,e)}function Wl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=r2(n,e,t);return new dn(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let a=s.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(c=>Wl(n,c)),a}}let r=i2(e.value),i=e.children.map(s=>Wl(n,s));return new dn(r,i)}}function r2(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Wl(n,r,i);return Wl(n,r)})}function i2(n){return new Ii(new at(n.url),new at(n.params),new at(n.queryParams),new at(n.fragment),new at(n.data),n.outlet,n.component,n)}var Oa=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},DS="ngNavigationCancelingError";function yp(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=rs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=CS(!1,zt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function CS(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[DS]=!0,t.cancellationCode=e,t}function s2(n){return AS(n)&&rs(n.url)}function AS(n){return!!n&&n[DS]}var o2=(n,e,t,r)=>Le(i=>(new CE(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),CE=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),gE(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Na(t);e.children.forEach(s=>{let a=s.value.outlet;this.deactivateRoutes(s,i[a],r),delete i[a]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Na(e);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Na(e);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Na(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new fp(s.value.snapshot))}),e.children.length&&this.forwardEvent(new dp(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(gE(i),i===s)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),gE(c.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=i,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,r)}},_p=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ma=class{component;route;constructor(e,t){this.component=e,this.route=t}};function a2(n,e,t){let r=n._root,i=e?e._root:null;return Vl(r,i,t,[r.value])}function c2(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ua(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Ky(n)?n:e.get(n):r}function Vl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Na(e);return n.children.forEach(a=>{u2(a,s[a.value.outlet],t,r.concat([a.value]),i),delete s[a.value.outlet]}),Object.entries(s).forEach(([a,c])=>jl(c,t.getContext(a),i)),i}function u2(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,a=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){let l=l2(a,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new _p(r)):(s.data=a.data,s._resolvedData=a._resolvedData),s.component?Vl(n,e,c?c.children:null,r,i):Vl(n,e,t,r,i),l&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Ma(c.outlet.component,a))}else a&&jl(e,c,i),i.canActivateChecks.push(new _p(r)),s.component?Vl(n,null,c?c.children:null,r,i):Vl(n,null,t,r,i);return i}function l2(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!po(n.url,e.url);case"pathParamsOrQueryParamsChange":return!po(n.url,e.url)||!Rr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!bE(n,e)||!Rr(n.queryParams,e.queryParams);case"paramsChange":default:return!bE(n,e)}}function jl(n,e,t){let r=Na(n),i=n.value;Object.entries(r).forEach(([s,a])=>{i.component?e?jl(a,e.children.getContext(s),t):jl(a,null,t):jl(a,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ma(e.outlet.component,i)):t.canDeactivateChecks.push(new Ma(null,i)):t.canDeactivateChecks.push(new Ma(null,i))}function Jl(n){return typeof n=="function"}function d2(n){return typeof n=="boolean"}function h2(n){return n&&Jl(n.canLoad)}function f2(n){return n&&Jl(n.canActivate)}function p2(n){return n&&Jl(n.canActivateChild)}function g2(n){return n&&Jl(n.canDeactivate)}function m2(n){return n&&Jl(n.canMatch)}function SS(n){return n instanceof Hs||n?.name==="EmptyError"}var Jf=Symbol("INITIAL_VALUE");function Fa(){return vr(n=>by(n.map(e=>e.pipe(ai(1),Sy(Jf)))).pipe(Le(e=>{for(let t of e)if(t!==!0){if(t===Jf)return Jf;if(t===!1||y2(t))return t}return!0}),Jn(e=>e!==Jf),ai(1)))}function y2(n){return rs(n)||n instanceof Oa}function RS(n){return n.aborted?le(void 0).pipe(ai(1)):new ue(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function NS(n){return zu(RS(n))}function _2(n,e){return At(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:a}}=t;return a.length===0&&s.length===0?le(fe(O({},t),{guardsResult:!0})):v2(a,r,i,n).pipe(At(c=>c&&d2(c)?E2(r,s,n,e):le(c)),Le(c=>fe(O({},t),{guardsResult:c})))})}function v2(n,e,t,r){return Ke(n).pipe(At(i=>D2(i.component,i.route,t,e,r)),ci(i=>i!==!0,!0))}function E2(n,e,t,r){return Ke(e).pipe(Hu(i=>ia(w2(i.route.parent,r),I2(i.route,r),b2(n,i.path,t),T2(n,i.route,t))),ci(i=>i!==!0,!0))}function I2(n,e){return n!==null&&e&&e(new hp(n)),le(!0)}function w2(n,e){return n!==null&&e&&e(new lp(n)),le(!0)}function T2(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return le(!0);let i=r.map(s=>qu(()=>{let a=Va(e)??t,c=Ua(s,a),l=f2(c)?c.canActivate(e,n):ut(a,()=>c(e,n));return _o(l).pipe(ci())}));return le(i).pipe(Fa())}function b2(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(a=>c2(a)).filter(a=>a!==null).map(a=>qu(()=>{let c=a.guards.map(l=>{let h=Va(a.node)??t,p=Ua(l,h),_=p2(p)?p.canActivateChild(r,n):ut(h,()=>p(r,n));return _o(_).pipe(ci())});return le(c).pipe(Fa())}));return le(s).pipe(Fa())}function D2(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return le(!0);let a=s.map(c=>{let l=Va(e)??i,h=Ua(c,l),p=g2(h)?h.canDeactivate(n,e,t,r):ut(l,()=>h(n,e,t,r));return _o(p).pipe(ci())});return le(a).pipe(Fa())}function C2(n,e,t,r,i){let s=e.canLoad;if(s===void 0||s.length===0)return le(!0);let a=s.map(c=>{let l=Ua(c,n),h=h2(l)?l.canLoad(e,t):ut(n,()=>l(e,t)),p=_o(h);return i?p.pipe(NS(i)):p});return le(a).pipe(Fa(),PS(r))}function PS(n){return my(Ut(e=>{if(typeof e!="boolean")throw yp(n,e)}),Le(e=>e===!0))}function A2(n,e,t,r,i){let s=e.canMatch;if(!s||s.length===0)return le(!0);let a=s.map(c=>{let l=Ua(c,n),h=m2(l)?l.canMatch(e,t):ut(n,()=>l(e,t)),p=_o(h);return i?p.pipe(NS(i)):p});return le(a).pipe(Fa(),PS(r))}var fo=class MS extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,MS.prototype)}},AE=class xS extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,xS.prototype)}};function S2(n){throw new $(4e3,!1)}function R2(n){throw CS(!1,zt.GuardRejected)}var N2=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[ie])throw S2(`${e.redirectTo}`);i=i.children[ie]}}async applyRedirectCommands(e,t,r,i,s){let a=await P2(t,i,s);if(a instanceof cr)throw new AE(a);let c=this.applyRedirectCreateUrlTree(a,this.urlSerializer.parse(a),e,r);if(a[0]==="/")throw new AE(c);return c}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new cr(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);r[i]=t[c]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),a={};return Object.entries(t.children).forEach(([c,l])=>{a[c]=this.createSegmentGroup(e,l,r,i)}),new Se(s,a)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new $(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function P2(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:s,routeConfig:a,url:c,outlet:l,params:h,data:p,title:_}=e;return tp(_o(ut(t,()=>r({params:h,data:p,queryParams:i,fragment:s,routeConfig:a,url:c,outlet:l,title:_}))))}var SE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function M2(n,e,t,r,i,s){let a=kS(n,e,t);return a.matched?(r=ZL(e,r),A2(r,e,t,i,s).pipe(Le(c=>c===!0?a:O({},SE)))):le(a)}function kS(n,e,t){if(e.path==="**")return x2(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?O({},SE):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||iS)(t,n,e);if(!i)return O({},SE);let s={};Object.entries(i.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let a=i.consumed.length>0?O(O({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function x2(n){return{matched:!0,parameters:n.length>0?oS(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function tS(n,e,t,r){return t.length>0&&F2(n,t,r)?{segmentGroup:new Se(e,O2(r,new Se(t,n.children))),slicedSegments:[]}:t.length===0&&V2(n,t,r)?{segmentGroup:new Se(n.segments,k2(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Se(n.segments,n.children),slicedSegments:t}}function k2(n,e,t,r){let i={};for(let s of t)if(Ip(n,e,s)&&!r[ar(s)]){let a=new Se([],{});i[ar(s)]=a}return O(O({},r),i)}function O2(n,e){let t={};t[ie]=e;for(let r of n)if(r.path===""&&ar(r)!==ie){let i=new Se([],{});t[ar(r)]=i}return t}function F2(n,e,t){return t.some(r=>Ip(n,e,r)&&ar(r)!==ie)}function V2(n,e,t){return t.some(r=>Ip(n,e,r))}function Ip(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function L2(n,e,t){return e.length===0&&!n.children[t]}var U2=class{};async function j2(n,e,t,r,i,s,a="emptyOnly",c){return new $2(n,e,t,r,i,a,s,c).recognize()}var B2=31,$2=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,a,c,l){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=a,this.urlSerializer=c,this.abortSignal=l,this.applyRedirects=new N2(this.urlSerializer,this.urlTree)}noMatchError(e){return new $(4002,`'${e.segmentGroup}'`)}async recognize(){let e=tS(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new dn(r,t),s=new Gl("",i),a=mS(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(a),{state:s,tree:a}}async match(e){let t=new go([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ie,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,ie,t),rootSnapshot:t}}catch(r){if(r instanceof AE)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof fo?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,s){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,s);let a=await this.processSegment(e,t,r,r.segments,i,!0,s);return a instanceof dn?[a]:[]}async processChildren(e,t,r,i){let s=[];for(let l of Object.keys(r.children))l==="primary"?s.unshift(l):s.push(l);let a=[];for(let l of s){let h=r.children[l],p=e2(t,l),_=await this.processSegmentGroup(e,p,h,l,i);a.push(..._)}let c=OS(a);return q2(c),c}async processSegment(e,t,r,i,s,a,c){for(let l of t)try{return await this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,s,a,c)}catch(h){if(h instanceof fo||SS(h))continue;throw h}if(L2(r,i,s))return new U2;throw new fo(r)}async processSegmentAgainstRoute(e,t,r,i,s,a,c,l){if(ar(r)!==a&&(a===ie||!Ip(i,s,r)))throw new fo(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,s,a,l);if(this.allowRedirects&&c)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,a,l);throw new fo(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,a,c){let{matched:l,parameters:h,consumedSegments:p,positionalParamSegments:_,remainingSegments:w}=kS(t,i,s);if(!l)throw new fo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>B2&&(this.allowRedirects=!1));let C=new go(s,h,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,nS(i),ar(i),i.component??i._loadedComponent??null,i,rS(i)),A=mp(C,c,this.paramsInheritanceStrategy);if(C.params=Object.freeze(A.params),C.data=Object.freeze(A.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let N=await this.applyRedirects.applyRedirectCommands(p,i.redirectTo,_,C,e),R=await this.applyRedirects.lineralizeSegments(i,N);return this.processSegment(e,r,t,R.concat(w),a,!1,c)}async matchSegmentAgainstRoute(e,t,r,i,s,a){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let c=await tp(M2(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!c?.matched)throw new fo(t);e=r._injector??e;let{routes:l}=await this.getChildConfig(e,r,i),h=r._loadedInjector??e,{parameters:p,consumedSegments:_,remainingSegments:w}=c,C=new go(_,p,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,nS(r),ar(r),r.component??r._loadedComponent??null,r,rS(r)),A=mp(C,a,this.paramsInheritanceStrategy);C.params=Object.freeze(A.params),C.data=Object.freeze(A.data);let{segmentGroup:N,slicedSegments:R}=tS(t,_,w,l);if(R.length===0&&N.hasChildren()){let U=await this.processChildren(h,l,N,C);return new dn(C,U)}if(l.length===0&&R.length===0)return new dn(C,[]);let x=ar(r)===s,j=await this.processSegment(h,l,N,R,x?ie:s,!0,C);return new dn(C,j instanceof dn?[j]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await tp(C2(e,t,r,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=s.routes,t._loadedInjector=s.injector,s}throw R2(t)}return{routes:[],injector:e}}};function q2(n){n.sort((e,t)=>e.value.outlet===ie?-1:t.value.outlet===ie?1:e.value.outlet.localeCompare(t.value.outlet))}function H2(n){let e=n.value.routeConfig;return e&&e.path===""}function OS(n){let e=[],t=new Set;for(let r of n){if(!H2(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=OS(r.children);e.push(new dn(r.value,i))}return e.filter(r=>!t.has(r))}function nS(n){return n.data||{}}function rS(n){return n.resolve||{}}var z2=new H("",{factory:()=>j2});function G2(n,e,t,r,i,s,a){let c=n.get(z2);return At(l=>le(l).pipe(vr(h=>c(n,e,t,r,h.extractedUrl,i,s,a)),Le(({state:h,tree:p})=>fe(O({},l),{targetSnapshot:h,urlAfterRedirects:p}))))}function W2(n,e){return At(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return le(t);let s=new Set(i.map(l=>l.route)),a=new Set;for(let l of s)if(!a.has(l))for(let h of FS(l))a.add(h);let c=0;return Ke(a).pipe(Hu(l=>s.has(l)?K2(l,r,n,e):(l.data=mp(l,l.parent,n).resolve,le(void 0))),Ut(()=>c++),xh(1),At(l=>c===a.size?le(t):Wt))})}function FS(n){let e=n.children.map(t=>FS(t)).flat();return[n,...e]}function K2(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!TS(i)&&(s[Kl]=i.title),qu(()=>(n.data=mp(n,n.parent,t).resolve,Q2(s,n,e,r).pipe(Le(a=>(n._resolvedData=a,n.data=O(O({},n.data),a),null)))))}function Q2(n,e,t,r){let i=_E(n);if(i.length===0)return le({});let s={};return Ke(i).pipe(At(a=>Y2(n[a],e,t,r).pipe(ci(),Ut(c=>{if(c instanceof Oa)throw yp(new ns,c);s[a]=c}))),xh(1),Le(()=>s),sa(a=>SS(a)?Wt:Ty(a)))}function Y2(n,e,t,r){let i=Va(e)??r,s=Ua(n,i),a=s.resolve?s.resolve(e,t):ut(i,()=>s(e,t));return _o(a)}function mE(n){return vr(e=>{let t=n(e);return t?Ke(t).pipe(Le(()=>e)):le(e)})}var ME=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ie);return r}getResolvedTitleForRoute(t){return t.data[Kl]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>M(VS),providedIn:"root"})}return n})(),VS=(()=>{class n extends ME{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Z(QA))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ja=new H("",{factory:()=>({})}),Xl=new H(""),LS=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(Wv);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await aS(ut(t,()=>r.loadComponent())),a=await BS(jS(s));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=a,a}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await US(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=s.routes,r._loadedInjector=s.injector,s}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function US(n,e,t,r){let i=await aS(ut(t,()=>n.loadChildren())),s=await BS(jS(i)),a;s instanceof Mf||Array.isArray(s)?a=s:a=await e.compileModuleAsync(s),r&&r(n);let c,l,h=!1;return Array.isArray(a)?(l=a,h=!0):(c=a.create(t).injector,l=c.get(Xl,[],{optional:!0,self:!0}).flat()),{routes:l.map(PE),injector:c}}function J2(n){return n&&typeof n=="object"&&"default"in n}function jS(n){return J2(n)?n.default:n}async function BS(n){return n}var wp=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>M(X2),providedIn:"root"})}return n})(),X2=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$S=new H("");var Z2=()=>{},qS=new H(""),HS=(()=>{class n{currentNavigation=Ht(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Ht(null);events=new Je;transitionAbortWithErrorSubject=new Je;configLoader=M(LS);environmentInjector=M(ct);destroyRef=M(fi);urlSerializer=M(Ql);rootContexts=M(La);location=M(Ra);inputBindingEnabled=M(Ep,{optional:!0})!==null;titleStrategy=M(ME);options=M(ja,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M(wp);createViewTransition=M($S,{optional:!0});navigationErrorHandler=M(qS,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>le(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new cp(i)),r=i=>this.events.next(new up(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;lt(()=>{this.transitions?.next(fe(O({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new at(null),this.transitions.pipe(Jn(r=>r!==null),vr(r=>{let i=!1,s=new AbortController;return le(r).pipe(vr(a=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",zt.SupersededByNewNavigation),Wt;this.currentTransition=r;let c=this.lastSuccessfulNavigation();this.currentNavigation.set({id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:c?fe(O({},c),{previousNavigation:null}):null,abort:()=>s.abort()});let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=a.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload")return this.events.next(new Ei(a.id,this.urlSerializer.serialize(a.rawUrl),"",$l.IgnoredSameUrlNavigation)),a.resolve(!1),Wt;if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return le(a).pipe(vr(p=>(this.events.next(new yo(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),p.id!==this.navigationId?Wt:Promise.resolve(p))),G2(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),Ut(p=>{r.targetSnapshot=p.targetSnapshot,r.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation.update(w=>(w.finalUrl=p.urlAfterRedirects,w));let _=new ql(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(_)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:p,extractedUrl:_,source:w,restoredState:C,extras:A}=a,N=new yo(p,this.urlSerializer.serialize(_),w,C);this.events.next(N);let R=IS(this.rootComponentType).snapshot;return this.currentTransition=r=fe(O({},a),{targetSnapshot:R,urlAfterRedirects:_,extras:fe(O({},A),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(x=>(x.finalUrl=_,x)),le(r)}else return this.events.next(new Ei(a.id,this.urlSerializer.serialize(a.extractedUrl),"",$l.IgnoredByUrlHandlingStrategy)),a.resolve(!1),Wt}),Ut(a=>{let c=new ip(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Le(a=>(this.currentTransition=r=fe(O({},a),{guards:a2(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),r)),_2(this.environmentInjector,a=>this.events.next(a)),Ut(a=>{if(r.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw yp(this.urlSerializer,a.guardsResult);let c=new sp(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.events.next(c)}),Jn(a=>a.guardsResult?!0:(this.cancelNavigationTransition(a,"",zt.GuardRejected),!1)),mE(a=>{if(a.guards.canActivateChecks.length!==0)return le(a).pipe(Ut(c=>{let l=new op(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),vr(c=>{let l=!1;return le(c).pipe(W2(this.paramsInheritanceStrategy,this.environmentInjector),Ut({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(c,"",zt.NoDataFromResolver)}}))}),Ut(c=>{let l=new ap(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}))}),mE(a=>{let c=h=>{let p=[];if(h.routeConfig?._loadedComponent)h.component=h.routeConfig?._loadedComponent;else if(h.routeConfig?.loadComponent){let _=Va(h)??this.environmentInjector;p.push(this.configLoader.loadComponent(_,h.routeConfig).then(w=>{h.component=w}))}for(let _ of h.children)p.push(...c(_));return p},l=c(a.targetSnapshot.root);return l.length===0?le(a):Ke(Promise.all(l).then(()=>a))}),mE(()=>this.afterPreactivation()),vr(()=>{let{currentSnapshot:a,targetSnapshot:c}=r,l=this.createViewTransition?.(this.environmentInjector,a.root,c.root);return l?Ke(l).pipe(Le(()=>r)):le(r)}),Le(a=>{let c=n2(t.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return this.currentTransition=r=fe(O({},a),{targetRouterState:c}),this.currentNavigation.update(l=>(l.targetRouterState=c,l)),r}),Ut(()=>{this.events.next(new Hl)}),o2(this.rootContexts,t.routeReuseStrategy,a=>this.events.next(a),this.inputBindingEnabled),ai(1),zu(RS(s.signal).pipe(Jn(()=>!i&&!r.targetRouterState),Ut(()=>{this.cancelNavigationTransition(r,s.signal.reason+"",zt.Aborted)}))),Ut({next:a=>{i=!0,this.currentNavigation.update(c=>(c.abort=Z2,c)),this.lastSuccessfulNavigation.set(lt(this.currentNavigation)),this.events.next(new ur(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)},complete:()=>{i=!0}}),zu(this.transitionAbortWithErrorSubject.pipe(Ut(a=>{throw a}))),Ay(()=>{s.abort(),i||this.cancelNavigationTransition(r,"",zt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),sa(a=>{if(this.destroyed)return r.resolve(!1),Wt;if(i=!0,AS(a))this.events.next(new Nr(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode)),s2(a)?this.events.next(new ka(a.url,a.navigationBehaviorOptions)):r.resolve(!1);else{let c=new xa(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);try{let l=ut(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(l instanceof Oa){let{message:h,cancellationCode:p}=yp(this.urlSerializer,l);this.events.next(new Nr(r.id,this.urlSerializer.serialize(r.extractedUrl),h,p)),this.events.next(new ka(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(c),a}catch(l){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(l)}}return Wt}))}))}cancelNavigationTransition(t,r,i){let s=new Nr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=lt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function eU(n){return n!==Ul}var zS=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>M(tU),providedIn:"root"})}return n})(),vp=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},tU=(()=>{class n extends vp{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Wi(n)))(i||n)}})();static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xE=(()=>{class n{urlSerializer=M(Ql);options=M(ja,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=M(Ra);urlHandlingStrategy=M(wp);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new cr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,a=i??s;return a instanceof cr?this.urlSerializer.serialize(a):a}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=IS(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>M(GS),providedIn:"root"})}return n})(),GS=(()=>{class n extends xE{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof yo?this.updateStateMemento():t instanceof Ei?this.commitTransition(r):t instanceof ql?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Hl?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Nr&&t.code!==zt.SupersededByNewNavigation&&t.code!==zt.Redirect?this.restoreHistory(r):t instanceof xa?this.restoreHistory(r,!0):t instanceof ur&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:a}=r;if(this.location.isCurrentPathEqualTo(t)||s){let c=this.browserPageId,l=O(O({},a),this.generateNgRouterState(i,c));this.location.replaceState(t,"",l)}else{let c=O(O({},a),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",c)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Wi(n)))(i||n)}})();static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kE(n,e){n.events.pipe(Jn(t=>t instanceof ur||t instanceof Nr||t instanceof xa||t instanceof Ei),Le(t=>t instanceof ur||t instanceof Ei?0:(t instanceof Nr?t.code===zt.Redirect||t.code===zt.SupersededByNewNavigation:!1)?2:1),Jn(t=>t!==2),ai(1)).subscribe(()=>{e()})}var nU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},rU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ba=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M(Lv);stateManager=M(xE);options=M(ja,{optional:!0})||{};pendingTasks=M(pi);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(HS);urlSerializer=M(Ql);location=M(Ra);urlHandlingStrategy=M(wp);injector=M(ct);_events=new Je;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(zS);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(Xl,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(Ep,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ot;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=lt(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Nr&&r.code!==zt.Redirect&&r.code!==zt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ur)this.navigated=!0;else if(r instanceof ka){let a=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=O({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||eU(i.source)},a);this.scheduleNavigation(c,Ul,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}XL(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ul,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let l=O({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,a,s).catch(l=>{this.disposed||this.injector.get(wn)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return lt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(PE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=r,h=l?this.currentUrlTree.fragment:a,p=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":p=O(O({},this.currentUrlTree.queryParams),s);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}p!==null&&(p=this.removeEmptyProps(p));let _;try{let w=i?i.snapshot:this.routerState.snapshot.root;_=yS(w)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),_=this.currentUrlTree.root}return _S(_,t,p,h??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=rs(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Ul,null,r)}navigate(t,r={skipLocationChange:!1}){return iU(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(ca(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=O({},nU):r===!1?i=O({},rU):i=r,rs(t))return YA(this.currentUrlTree,t,i);let s=this.parseUrl(t);return YA(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,h;a?(c=a.resolve,l=a.reject,h=a.promise):h=new Promise((_,w)=>{c=_,l=w});let p=this.pendingTasks.add();return kE(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(_=>Promise.reject(_))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function iU(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new $(4008,!1)}var $a=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ht(null);get href(){return lt(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Je;applicationErrorHandler=M(wn);options=M(ja,{optional:!0});constructor(t,r,i,s,a,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=a,this.locationStrategy=c,this.reactiveHref.set(M(new Uf("href"),{optional:!0}));let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area"||!!(typeof customElements=="object"&&customElements.get(l)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof ur&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(rs(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(t!==0||r||i||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l)?.catch(h=>{this.applicationErrorHandler(h)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:rs(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(re(Ba),re(Ii),_l("tabindex"),re(Ki),re(Tn),re(Sa))};static \u0275dir=Rt({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&He("click",function(a){return i.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&Tl("href",i.reactiveHref(),vv)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Aa],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Aa],replaceUrl:[2,"replaceUrl","replaceUrl",Aa],routerLink:"routerLink"},features:[mi]})}return n})(),OE=(()=>{class n{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Ze;link=M($a,{optional:!0});constructor(t,r,i,s){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof ur&&this.update()})}ngAfterContentInit(){le(this.links.changes,le(null)).pipe(ra()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Ke(t).pipe(ra()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=oU(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let s=i.urlTree;return s?t.isActive(s,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(re(Ba),re(Tn),re(Ki),re(ho))};static \u0275dir=Rt({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(r&1&&qv(s,$a,5),r&2){let a;Hv(a=zv())&&(i.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[mi]})}return n})();function oU(n){return!!n.paths}var aU=new H("");function FE(n,...e){return hi([{provide:Xl,multi:!0,useValue:n},[],{provide:Ii,useFactory:cU},{provide:Of,multi:!0,useFactory:uU},e.map(t=>t.\u0275providers)])}function cU(){return M(Ba).routerState.root}function uU(){let n=M(It);return e=>{let t=n.get(Ji);if(e!==t.components[0])return;let r=n.get(Ba),i=n.get(lU);n.get(dU)===1&&r.initialNavigation(),n.get(hU,null,{optional:!0})?.setUpPreloading(),n.get(aU,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var lU=new H("",{factory:()=>new Je}),dU=new H("",{factory:()=>1});var hU=new H("");var is=class n{cartItems=new at([]);cartItems$=this.cartItems.asObservable();addToCart(e,t=1){let r=this.cartItems.value,i=r.find(s=>s.menuItem.id===e.id);if(i){if(i.quantity+=t,i.quantity<=0){e.id&&this.removeFromCart(e.id);return}i.totalPrice=i.menuItem.price*i.quantity}else t>0&&r.push({menuItem:e,quantity:t,totalPrice:e.price*t});this.cartItems.next([...r])}removeFromCart(e){let t=this.cartItems.value.filter(r=>r.menuItem.id!==e);this.cartItems.next([...t])}clearCart(){this.cartItems.next([])}getTotalAmount(){return this.cartItems.value.reduce((e,t)=>e+t.totalPrice,0)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};var KS=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},fU=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],a=n[t++],c=n[t++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},QS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],a=i+1<n.length,c=a?n[i+1]:0,l=i+2<n.length,h=l?n[i+2]:0,p=s>>2,_=(s&3)<<4|c>>4,w=(c&15)<<2|h>>6,C=h&63;l||(C=64,a||(w=64)),r.push(t[p],t[_],t[w],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(KS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):fU(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let h=i<n.length?t[n.charAt(i)]:64;++i;let _=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||h==null||_==null)throw new LE;let w=s<<2|c>>4;if(r.push(w),h!==64){let C=c<<4&240|h>>2;if(r.push(C),_!==64){let A=h<<6&192|_;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},LE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},pU=function(n){let e=KS(n);return QS.encodeByteArray(e,!0)},Zl=function(n){return pU(n).replace(/\./g,"")},gU=function(n){try{return QS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function mU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var yU=()=>mU().__FIREBASE_DEFAULTS__,_U=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},vU=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&gU(n[1]);return e&&JSON.parse(e)},UE=()=>{try{return yU()||_U()||vU()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},EU=n=>{var e,t;return(t=(e=UE())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},bp=n=>{let e=EU(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},jE=()=>{var n;return(n=UE())===null||n===void 0?void 0:n.config};var Tp=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Dp(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Zl(JSON.stringify(t)),Zl(JSON.stringify(a)),""].join(".")}function YS(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IU(){var n;let e=(n=UE())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JS(){return!IU()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function BE(){try{return typeof indexedDB=="object"}catch{return!1}}function XS(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var wU="FirebaseError",lr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=wU,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ed.prototype.create)}},ed=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?TU(s,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new lr(i,c,r)}};function TU(n,e){return n.replace(bU,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var bU=/\{\$([^}]+)}/g;function td(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],a=e[i];if(WS(s)&&WS(a)){if(!td(s,a))return!1}else if(s!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function WS(n){return n!==null&&typeof n=="object"}var bie=14400*1e3;function Yt(n){return n&&n._delegate?n._delegate:n}var dr=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var vo="[DEFAULT]";var $E=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Tp;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CU(e))try{this.getOrInitializeService({instanceIdentifier:vo})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=vo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vo){return this.instances.has(e)}getOptions(e=vo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,a]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:DU(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vo){return this.component?this.component.multipleInstances?e:vo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function DU(n){return n===vo?void 0:n}function CU(n){return n.instantiationMode==="EAGER"}var Cp=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new $E(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var AU=[],be=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(be||{}),SU={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},RU=be.INFO,NU={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},PU=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=NU[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},qa=class{constructor(e){this.name=e,this._logLevel=RU,this._logHandler=PU,this._userLogHandler=null,AU.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}};var MU=(n,e)=>e.some(t=>n instanceof t),ZS,eR;function xU(){return ZS||(ZS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kU(){return eR||(eR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var tR=new WeakMap,HE=new WeakMap,nR=new WeakMap,qE=new WeakMap,GE=new WeakMap;function OU(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Pr(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&tR.set(t,n)}).catch(()=>{}),GE.set(e,n),e}function FU(n){if(HE.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});HE.set(n,e)}var zE={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return HE.get(n);if(e==="objectStoreNames")return n.objectStoreNames||nR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Pr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function rR(n){zE=n(zE)}function VU(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Ap(this),e,...t);return nR.set(r,e.sort?e.sort():[e]),Pr(r)}:kU().includes(n)?function(...e){return n.apply(Ap(this),e),Pr(tR.get(this))}:function(...e){return Pr(n.apply(Ap(this),e))}}function LU(n){return typeof n=="function"?VU(n):(n instanceof IDBTransaction&&FU(n),MU(n,xU())?new Proxy(n,zE):n)}function Pr(n){if(n instanceof IDBRequest)return OU(n);if(qE.has(n))return qE.get(n);let e=LU(n);return e!==n&&(qE.set(n,e),GE.set(e,n)),e}var Ap=n=>GE.get(n);function Sp(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let a=indexedDB.open(n,e),c=Pr(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Pr(a.result),l.oldVersion,l.newVersion,Pr(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}var UU=["get","getKey","getAll","getAllKeys","count"],jU=["put","add","delete","clear"],WE=new Map;function iR(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(WE.get(e))return WE.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=jU.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||UU.includes(t)))return;let s=async function(a,...c){let l=this.transaction(a,i?"readwrite":"readonly"),h=l.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[t](...c),i&&l.done]))[0]};return WE.set(e,s),s}rR(n=>fe(O({},n),{get:(e,t,r)=>iR(e,t)||n.get(e,t,r),has:(e,t)=>!!iR(e,t)||n.has(e,t)}));var QE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(BU(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function BU(n){let e=n.getComponent();return e?.type==="VERSION"}var YE="@firebase/app",sR="0.10.13";var wi=new qa("@firebase/app"),$U="@firebase/app-compat",qU="@firebase/analytics-compat",HU="@firebase/analytics",zU="@firebase/app-check-compat",GU="@firebase/app-check",WU="@firebase/auth",KU="@firebase/auth-compat",QU="@firebase/database",YU="@firebase/data-connect",JU="@firebase/database-compat",XU="@firebase/functions",ZU="@firebase/functions-compat",ej="@firebase/installations",tj="@firebase/installations-compat",nj="@firebase/messaging",rj="@firebase/messaging-compat",ij="@firebase/performance",sj="@firebase/performance-compat",oj="@firebase/remote-config",aj="@firebase/remote-config-compat",cj="@firebase/storage",uj="@firebase/storage-compat",lj="@firebase/firestore",dj="@firebase/vertexai-preview",hj="@firebase/firestore-compat",fj="firebase",pj="10.14.1";var JE="[DEFAULT]",gj={[YE]:"fire-core",[$U]:"fire-core-compat",[HU]:"fire-analytics",[qU]:"fire-analytics-compat",[GU]:"fire-app-check",[zU]:"fire-app-check-compat",[WU]:"fire-auth",[KU]:"fire-auth-compat",[QU]:"fire-rtdb",[YU]:"fire-data-connect",[JU]:"fire-rtdb-compat",[XU]:"fire-fn",[ZU]:"fire-fn-compat",[ej]:"fire-iid",[tj]:"fire-iid-compat",[nj]:"fire-fcm",[rj]:"fire-fcm-compat",[ij]:"fire-perf",[sj]:"fire-perf-compat",[oj]:"fire-rc",[aj]:"fire-rc-compat",[cj]:"fire-gcs",[uj]:"fire-gcs-compat",[lj]:"fire-fst",[hj]:"fire-fst-compat",[dj]:"fire-vertex","fire-js":"fire-js",[fj]:"fire-js-all"};var Rp=new Map,mj=new Map,XE=new Map;function oR(n,e){try{n.container.addComponent(e)}catch(t){wi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Eo(n){let e=n.name;if(XE.has(e))return wi.debug(`There were multiple attempts to register component ${e}.`),!1;XE.set(e,n);for(let t of Rp.values())oR(t,n);for(let t of mj.values())oR(t,n);return!0}function Np(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}var yj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ss=new ed("app","Firebase",yj);var ZE=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new dr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ss.create("app-deleted",{appName:this._name})}};var Pp=pj;function nI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:JE,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ss.create("bad-app-name",{appName:String(i)});if(t||(t=jE()),!t)throw ss.create("no-options");let s=Rp.get(i);if(s){if(td(t,s.options)&&td(r,s.config))return s;throw ss.create("duplicate-app",{appName:i})}let a=new Cp(i);for(let l of XE.values())a.addComponent(l);let c=new ZE(t,r,a);return Rp.set(i,c),c}function Mp(n=JE){let e=Rp.get(n);if(!e&&n===JE&&jE())return nI();if(!e)throw ss.create("no-app",{appName:n});return e}function hr(n,e,t){var r;let i=(r=gj[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wi.warn(c.join(" "));return}Eo(new dr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var _j="firebase-heartbeat-database",vj=1,nd="firebase-heartbeat-store",KE=null;function lR(){return KE||(KE=Sp(_j,vj,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(nd)}catch(t){console.warn(t)}}}}).catch(n=>{throw ss.create("idb-open",{originalErrorMessage:n.message})})),KE}async function Ej(n){try{let t=(await lR()).transaction(nd),r=await t.objectStore(nd).get(dR(n));return await t.done,r}catch(e){if(e instanceof lr)wi.warn(e.message);else{let t=ss.create("idb-get",{originalErrorMessage:e?.message});wi.warn(t.message)}}}async function aR(n,e){try{let r=(await lR()).transaction(nd,"readwrite");await r.objectStore(nd).put(e,dR(n)),await r.done}catch(t){if(t instanceof lr)wi.warn(t.message);else{let r=ss.create("idb-set",{originalErrorMessage:t?.message});wi.warn(r.message)}}}function dR(n){return`${n.name}!${n.options.appId}`}var Ij=1024,wj=720*60*60*1e3,eI=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new tI(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=cR();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let c=new Date(a.date).valueOf();return Date.now()-c<=wj}),this._storage.overwrite(this._heartbeatsCache))}catch(r){wi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=cR(),{heartbeatsToSend:r,unsentEntries:i}=Tj(this._heartbeatsCache.heartbeats),s=Zl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return wi.warn(t),""}}};function cR(){return new Date().toISOString().substring(0,10)}function Tj(n,e=Ij){let t=[],r=n.slice();for(let i of n){let s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),uR(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),uR(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var tI=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BE()?XS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await Ej(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return aR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return aR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function uR(n){return Zl(JSON.stringify({version:2,heartbeats:n})).length}function bj(n){Eo(new dr("platform-logger",e=>new QE(e),"PRIVATE")),Eo(new dr("heartbeat",e=>new eI(e),"PRIVATE")),hr(YE,sR,n),hr(YE,sR,"esm2017"),hr("fire-js","")}bj("");var Dj="firebase",Cj="10.14.1";hr(Dj,Cj,"app");var hR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fR={};var os,rI;(function(){var n;function e(I,g){function y(){}y.prototype=g.prototype,I.D=g.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(v,E,b){for(var m=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)m[rt-2]=arguments[rt];return g.prototype[E].apply(v,m)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,g,y){y||(y=0);var v=Array(16);if(typeof g=="string")for(var E=0;16>E;++E)v[E]=g.charCodeAt(y++)|g.charCodeAt(y++)<<8|g.charCodeAt(y++)<<16|g.charCodeAt(y++)<<24;else for(E=0;16>E;++E)v[E]=g[y++]|g[y++]<<8|g[y++]<<16|g[y++]<<24;g=I.g[0],y=I.g[1],E=I.g[2];var b=I.g[3],m=g+(b^y&(E^b))+v[0]+3614090360&4294967295;g=y+(m<<7&4294967295|m>>>25),m=b+(E^g&(y^E))+v[1]+3905402710&4294967295,b=g+(m<<12&4294967295|m>>>20),m=E+(y^b&(g^y))+v[2]+606105819&4294967295,E=b+(m<<17&4294967295|m>>>15),m=y+(g^E&(b^g))+v[3]+3250441966&4294967295,y=E+(m<<22&4294967295|m>>>10),m=g+(b^y&(E^b))+v[4]+4118548399&4294967295,g=y+(m<<7&4294967295|m>>>25),m=b+(E^g&(y^E))+v[5]+1200080426&4294967295,b=g+(m<<12&4294967295|m>>>20),m=E+(y^b&(g^y))+v[6]+2821735955&4294967295,E=b+(m<<17&4294967295|m>>>15),m=y+(g^E&(b^g))+v[7]+4249261313&4294967295,y=E+(m<<22&4294967295|m>>>10),m=g+(b^y&(E^b))+v[8]+1770035416&4294967295,g=y+(m<<7&4294967295|m>>>25),m=b+(E^g&(y^E))+v[9]+2336552879&4294967295,b=g+(m<<12&4294967295|m>>>20),m=E+(y^b&(g^y))+v[10]+4294925233&4294967295,E=b+(m<<17&4294967295|m>>>15),m=y+(g^E&(b^g))+v[11]+2304563134&4294967295,y=E+(m<<22&4294967295|m>>>10),m=g+(b^y&(E^b))+v[12]+1804603682&4294967295,g=y+(m<<7&4294967295|m>>>25),m=b+(E^g&(y^E))+v[13]+4254626195&4294967295,b=g+(m<<12&4294967295|m>>>20),m=E+(y^b&(g^y))+v[14]+2792965006&4294967295,E=b+(m<<17&4294967295|m>>>15),m=y+(g^E&(b^g))+v[15]+1236535329&4294967295,y=E+(m<<22&4294967295|m>>>10),m=g+(E^b&(y^E))+v[1]+4129170786&4294967295,g=y+(m<<5&4294967295|m>>>27),m=b+(y^E&(g^y))+v[6]+3225465664&4294967295,b=g+(m<<9&4294967295|m>>>23),m=E+(g^y&(b^g))+v[11]+643717713&4294967295,E=b+(m<<14&4294967295|m>>>18),m=y+(b^g&(E^b))+v[0]+3921069994&4294967295,y=E+(m<<20&4294967295|m>>>12),m=g+(E^b&(y^E))+v[5]+3593408605&4294967295,g=y+(m<<5&4294967295|m>>>27),m=b+(y^E&(g^y))+v[10]+38016083&4294967295,b=g+(m<<9&4294967295|m>>>23),m=E+(g^y&(b^g))+v[15]+3634488961&4294967295,E=b+(m<<14&4294967295|m>>>18),m=y+(b^g&(E^b))+v[4]+3889429448&4294967295,y=E+(m<<20&4294967295|m>>>12),m=g+(E^b&(y^E))+v[9]+568446438&4294967295,g=y+(m<<5&4294967295|m>>>27),m=b+(y^E&(g^y))+v[14]+3275163606&4294967295,b=g+(m<<9&4294967295|m>>>23),m=E+(g^y&(b^g))+v[3]+4107603335&4294967295,E=b+(m<<14&4294967295|m>>>18),m=y+(b^g&(E^b))+v[8]+1163531501&4294967295,y=E+(m<<20&4294967295|m>>>12),m=g+(E^b&(y^E))+v[13]+2850285829&4294967295,g=y+(m<<5&4294967295|m>>>27),m=b+(y^E&(g^y))+v[2]+4243563512&4294967295,b=g+(m<<9&4294967295|m>>>23),m=E+(g^y&(b^g))+v[7]+1735328473&4294967295,E=b+(m<<14&4294967295|m>>>18),m=y+(b^g&(E^b))+v[12]+2368359562&4294967295,y=E+(m<<20&4294967295|m>>>12),m=g+(y^E^b)+v[5]+4294588738&4294967295,g=y+(m<<4&4294967295|m>>>28),m=b+(g^y^E)+v[8]+2272392833&4294967295,b=g+(m<<11&4294967295|m>>>21),m=E+(b^g^y)+v[11]+1839030562&4294967295,E=b+(m<<16&4294967295|m>>>16),m=y+(E^b^g)+v[14]+4259657740&4294967295,y=E+(m<<23&4294967295|m>>>9),m=g+(y^E^b)+v[1]+2763975236&4294967295,g=y+(m<<4&4294967295|m>>>28),m=b+(g^y^E)+v[4]+1272893353&4294967295,b=g+(m<<11&4294967295|m>>>21),m=E+(b^g^y)+v[7]+4139469664&4294967295,E=b+(m<<16&4294967295|m>>>16),m=y+(E^b^g)+v[10]+3200236656&4294967295,y=E+(m<<23&4294967295|m>>>9),m=g+(y^E^b)+v[13]+681279174&4294967295,g=y+(m<<4&4294967295|m>>>28),m=b+(g^y^E)+v[0]+3936430074&4294967295,b=g+(m<<11&4294967295|m>>>21),m=E+(b^g^y)+v[3]+3572445317&4294967295,E=b+(m<<16&4294967295|m>>>16),m=y+(E^b^g)+v[6]+76029189&4294967295,y=E+(m<<23&4294967295|m>>>9),m=g+(y^E^b)+v[9]+3654602809&4294967295,g=y+(m<<4&4294967295|m>>>28),m=b+(g^y^E)+v[12]+3873151461&4294967295,b=g+(m<<11&4294967295|m>>>21),m=E+(b^g^y)+v[15]+530742520&4294967295,E=b+(m<<16&4294967295|m>>>16),m=y+(E^b^g)+v[2]+3299628645&4294967295,y=E+(m<<23&4294967295|m>>>9),m=g+(E^(y|~b))+v[0]+4096336452&4294967295,g=y+(m<<6&4294967295|m>>>26),m=b+(y^(g|~E))+v[7]+1126891415&4294967295,b=g+(m<<10&4294967295|m>>>22),m=E+(g^(b|~y))+v[14]+2878612391&4294967295,E=b+(m<<15&4294967295|m>>>17),m=y+(b^(E|~g))+v[5]+4237533241&4294967295,y=E+(m<<21&4294967295|m>>>11),m=g+(E^(y|~b))+v[12]+1700485571&4294967295,g=y+(m<<6&4294967295|m>>>26),m=b+(y^(g|~E))+v[3]+2399980690&4294967295,b=g+(m<<10&4294967295|m>>>22),m=E+(g^(b|~y))+v[10]+4293915773&4294967295,E=b+(m<<15&4294967295|m>>>17),m=y+(b^(E|~g))+v[1]+2240044497&4294967295,y=E+(m<<21&4294967295|m>>>11),m=g+(E^(y|~b))+v[8]+1873313359&4294967295,g=y+(m<<6&4294967295|m>>>26),m=b+(y^(g|~E))+v[15]+4264355552&4294967295,b=g+(m<<10&4294967295|m>>>22),m=E+(g^(b|~y))+v[6]+2734768916&4294967295,E=b+(m<<15&4294967295|m>>>17),m=y+(b^(E|~g))+v[13]+1309151649&4294967295,y=E+(m<<21&4294967295|m>>>11),m=g+(E^(y|~b))+v[4]+4149444226&4294967295,g=y+(m<<6&4294967295|m>>>26),m=b+(y^(g|~E))+v[11]+3174756917&4294967295,b=g+(m<<10&4294967295|m>>>22),m=E+(g^(b|~y))+v[2]+718787259&4294967295,E=b+(m<<15&4294967295|m>>>17),m=y+(b^(E|~g))+v[9]+3951481745&4294967295,I.g[0]=I.g[0]+g&4294967295,I.g[1]=I.g[1]+(E+(m<<21&4294967295|m>>>11))&4294967295,I.g[2]=I.g[2]+E&4294967295,I.g[3]=I.g[3]+b&4294967295}r.prototype.u=function(I,g){g===void 0&&(g=I.length);for(var y=g-this.blockSize,v=this.B,E=this.h,b=0;b<g;){if(E==0)for(;b<=y;)i(this,I,b),b+=this.blockSize;if(typeof I=="string"){for(;b<g;)if(v[E++]=I.charCodeAt(b++),E==this.blockSize){i(this,v),E=0;break}}else for(;b<g;)if(v[E++]=I[b++],E==this.blockSize){i(this,v),E=0;break}}this.h=E,this.o+=g},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var g=1;g<I.length-8;++g)I[g]=0;var y=8*this.o;for(g=I.length-8;g<I.length;++g)I[g]=y&255,y/=256;for(this.u(I),I=Array(16),g=y=0;4>g;++g)for(var v=0;32>v;v+=8)I[y++]=this.g[g]>>>v&255;return I};function s(I,g){var y=c;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=g(I)}function a(I,g){this.h=g;for(var y=[],v=!0,E=I.length-1;0<=E;E--){var b=I[E]|0;v&&b==g||(y[E]=b,v=!1)}this.g=y}var c={};function l(I){return-128<=I&&128>I?s(I,function(g){return new a([g|0],0>g?-1:0)}):new a([I|0],0>I?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return _;if(0>I)return R(h(-I));for(var g=[],y=1,v=0;I>=y;v++)g[v]=I/y|0,y*=4294967296;return new a(g,0)}function p(I,g){if(I.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(I.charAt(0)=="-")return R(p(I.substring(1),g));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=h(Math.pow(g,8)),v=_,E=0;E<I.length;E+=8){var b=Math.min(8,I.length-E),m=parseInt(I.substring(E,E+b),g);8>b?(b=h(Math.pow(g,b)),v=v.j(b).add(h(m))):(v=v.j(y),v=v.add(h(m)))}return v}var _=l(0),w=l(1),C=l(16777216);n=a.prototype,n.m=function(){if(N(this))return-R(this).m();for(var I=0,g=1,y=0;y<this.g.length;y++){var v=this.i(y);I+=(0<=v?v:4294967296+v)*g,g*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(A(this))return"0";if(N(this))return"-"+R(this).toString(I);for(var g=h(Math.pow(I,6)),y=this,v="";;){var E=K(y,g).g;y=x(y,E.j(g));var b=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=E,A(y))return b+v;for(;6>b.length;)b="0"+b;v=b+v}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function A(I){if(I.h!=0)return!1;for(var g=0;g<I.g.length;g++)if(I.g[g]!=0)return!1;return!0}function N(I){return I.h==-1}n.l=function(I){return I=x(this,I),N(I)?-1:A(I)?0:1};function R(I){for(var g=I.g.length,y=[],v=0;v<g;v++)y[v]=~I.g[v];return new a(y,~I.h).add(w)}n.abs=function(){return N(this)?R(this):this},n.add=function(I){for(var g=Math.max(this.g.length,I.g.length),y=[],v=0,E=0;E<=g;E++){var b=v+(this.i(E)&65535)+(I.i(E)&65535),m=(b>>>16)+(this.i(E)>>>16)+(I.i(E)>>>16);v=m>>>16,b&=65535,m&=65535,y[E]=m<<16|b}return new a(y,y[y.length-1]&-2147483648?-1:0)};function x(I,g){return I.add(R(g))}n.j=function(I){if(A(this)||A(I))return _;if(N(this))return N(I)?R(this).j(R(I)):R(R(this).j(I));if(N(I))return R(this.j(R(I)));if(0>this.l(C)&&0>I.l(C))return h(this.m()*I.m());for(var g=this.g.length+I.g.length,y=[],v=0;v<2*g;v++)y[v]=0;for(v=0;v<this.g.length;v++)for(var E=0;E<I.g.length;E++){var b=this.i(v)>>>16,m=this.i(v)&65535,rt=I.i(E)>>>16,Nn=I.i(E)&65535;y[2*v+2*E]+=m*Nn,j(y,2*v+2*E),y[2*v+2*E+1]+=b*Nn,j(y,2*v+2*E+1),y[2*v+2*E+1]+=m*rt,j(y,2*v+2*E+1),y[2*v+2*E+2]+=b*rt,j(y,2*v+2*E+2)}for(v=0;v<g;v++)y[v]=y[2*v+1]<<16|y[2*v];for(v=g;v<2*g;v++)y[v]=0;return new a(y,0)};function j(I,g){for(;(I[g]&65535)!=I[g];)I[g+1]+=I[g]>>>16,I[g]&=65535,g++}function U(I,g){this.g=I,this.h=g}function K(I,g){if(A(g))throw Error("division by zero");if(A(I))return new U(_,_);if(N(I))return g=K(R(I),g),new U(R(g.g),R(g.h));if(N(g))return g=K(I,R(g)),new U(R(g.g),g.h);if(30<I.g.length){if(N(I)||N(g))throw Error("slowDivide_ only works with positive integers.");for(var y=w,v=g;0>=v.l(I);)y=Ue(y),v=Ue(v);var E=te(y,1),b=te(v,1);for(v=te(v,2),y=te(y,2);!A(v);){var m=b.add(v);0>=m.l(I)&&(E=E.add(y),b=m),v=te(v,1),y=te(y,1)}return g=x(I,E.j(g)),new U(E,g)}for(E=_;0<=I.l(g);){for(y=Math.max(1,Math.floor(I.m()/g.m())),v=Math.ceil(Math.log(y)/Math.LN2),v=48>=v?1:Math.pow(2,v-48),b=h(y),m=b.j(g);N(m)||0<m.l(I);)y-=v,b=h(y),m=b.j(g);A(b)&&(b=w),E=E.add(b),I=x(I,m)}return new U(E,I)}n.A=function(I){return K(this,I).h},n.and=function(I){for(var g=Math.max(this.g.length,I.g.length),y=[],v=0;v<g;v++)y[v]=this.i(v)&I.i(v);return new a(y,this.h&I.h)},n.or=function(I){for(var g=Math.max(this.g.length,I.g.length),y=[],v=0;v<g;v++)y[v]=this.i(v)|I.i(v);return new a(y,this.h|I.h)},n.xor=function(I){for(var g=Math.max(this.g.length,I.g.length),y=[],v=0;v<g;v++)y[v]=this.i(v)^I.i(v);return new a(y,this.h^I.h)};function Ue(I){for(var g=I.g.length+1,y=[],v=0;v<g;v++)y[v]=I.i(v)<<1|I.i(v-1)>>>31;return new a(y,I.h)}function te(I,g){var y=g>>5;g%=32;for(var v=I.g.length-y,E=[],b=0;b<v;b++)E[b]=0<g?I.i(b+y)>>>g|I.i(b+y+1)<<32-g:I.i(b+y);return new a(E,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,rI=fR.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=p,os=fR.Integer=a}).apply(typeof hR<"u"?hR:typeof self<"u"?self:typeof window<"u"?window:{});var xp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ti={};var iI,Aj,Ha,sI,rd,kp,oI,aI,cI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,d){return o==Array.prototype||o==Object.prototype||(o[u]=d.value),o};function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof xp=="object"&&xp];for(var u=0;u<o.length;++u){var d=o[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=t(this);function i(o,u){if(u)e:{var d=r;o=o.split(".");for(var f=0;f<o.length-1;f++){var T=o[f];if(!(T in d))break e;d=d[T]}o=o[o.length-1],f=d[o],u=u(f),u!=f&&u!=null&&e(d,o,{configurable:!0,writable:!0,value:u})}}function s(o,u){o instanceof String&&(o+="");var d=0,f=!1,T={next:function(){if(!f&&d<o.length){var D=d++;return{value:u(D,o[D]),done:!1}}return f=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(o){return o||function(){return s(this,function(u,d){return d})}});var a=a||{},c=this||self;function l(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function h(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function p(o,u,d){return o.call.apply(o.bind,arguments)}function _(o,u,d){if(!o)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,f),o.apply(u,T)}}return function(){return o.apply(u,arguments)}}function w(o,u,d){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:_,w.apply(null,arguments)}function C(o,u){var d=Array.prototype.slice.call(arguments,1);return function(){var f=d.slice();return f.push.apply(f,arguments),o.apply(this,f)}}function A(o,u){function d(){}d.prototype=u.prototype,o.aa=u.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(f,T,D){for(var S=Array(arguments.length-2),G=2;G<arguments.length;G++)S[G-2]=arguments[G];return u.prototype[T].apply(f,S)}}function N(o){let u=o.length;if(0<u){let d=Array(u);for(let f=0;f<u;f++)d[f]=o[f];return d}return[]}function R(o,u){for(let d=1;d<arguments.length;d++){let f=arguments[d];if(l(f)){let T=o.length||0,D=f.length||0;o.length=T+D;for(let S=0;S<D;S++)o[T+S]=f[S]}else o.push(f)}}class x{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function j(o){return/^[\s\xa0]*$/.test(o)}function U(){var o=c.navigator;return o&&(o=o.userAgent)?o:""}function K(o){return K[" "](o),o}K[" "]=function(){};var Ue=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function te(o,u,d){for(let f in o)u.call(d,o[f],f,o)}function I(o,u){for(let d in o)u.call(void 0,o[d],d,o)}function g(o){let u={};for(let d in o)u[d]=o[d];return u}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function v(o,u){let d,f;for(let T=1;T<arguments.length;T++){f=arguments[T];for(d in f)o[d]=f[d];for(let D=0;D<y.length;D++)d=y[D],Object.prototype.hasOwnProperty.call(f,d)&&(o[d]=f[d])}}function E(o){var u=1;o=o.split(":");let d=[];for(;0<u&&o.length;)d.push(o.shift()),u--;return o.length&&d.push(o.join(":")),d}function b(o){c.setTimeout(()=>{throw o},0)}function m(){var o=gs;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class rt{constructor(){this.h=this.g=null}add(u,d){let f=Nn.get();f.set(u,d),this.h?this.h.next=f:this.g=f,this.h=f}}var Nn=new x(()=>new _m,o=>o.reset());class _m{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let Pn,Mn=!1,gs=new rt,Oc=()=>{let o=c.Promise.resolve(void 0);Pn=()=>{o.then(vm)}};var vm=()=>{for(var o;o=m();){try{o.h.call(o.g)}catch(d){b(d)}var u=Nn;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}Mn=!1};function mt(){this.s=this.s,this.C=this.C}mt.prototype.s=!1,mt.prototype.ma=function(){this.s||(this.s=!0,this.N())},mt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var Em=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{let d=()=>{};c.addEventListener("test",d,u),c.removeEventListener("test",d,u)}catch{}return o})();function xn(o,u){if(Ee.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,f=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(Ue){e:{try{K(u.nodeName);var T=!0;break e}catch{}T=!1}T||(u=null)}}else d=="mouseover"?u=o.fromElement:d=="mouseout"&&(u=o.toElement);this.relatedTarget=u,f?(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Im[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&xn.aa.h.call(this)}}A(xn,Ee);var Im={2:"touch",3:"pen",4:"mouse"};xn.prototype.h=function(){xn.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var kn="closure_listenable_"+(1e6*Math.random()|0),wm=0;function Tm(o,u,d,f,T){this.listener=o,this.proxy=null,this.src=u,this.type=d,this.capture=!!f,this.ha=T,this.key=++wm,this.da=this.fa=!1}function Hr(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function zr(o){this.src=o,this.g={},this.h=0}zr.prototype.add=function(o,u,d,f,T){var D=o.toString();o=this.g[D],o||(o=this.g[D]=[],this.h++);var S=ys(o,u,f,T);return-1<S?(u=o[S],d||(u.fa=!1)):(u=new Tm(u,this.src,D,!!f,T),u.fa=d,o.push(u)),u};function ms(o,u){var d=u.type;if(d in o.g){var f=o.g[d],T=Array.prototype.indexOf.call(f,u,void 0),D;(D=0<=T)&&Array.prototype.splice.call(f,T,1),D&&(Hr(u),o.g[d].length==0&&(delete o.g[d],o.h--))}}function ys(o,u,d,f){for(var T=0;T<o.length;++T){var D=o[T];if(!D.da&&D.listener==u&&D.capture==!!d&&D.ha==f)return T}return-1}var _s="closure_lm_"+(1e6*Math.random()|0),vs={};function Fc(o,u,d,f,T){if(f&&f.once)return Lc(o,u,d,f,T);if(Array.isArray(u)){for(var D=0;D<u.length;D++)Fc(o,u[D],d,f,T);return null}return d=Ts(d),o&&o[kn]?o.K(u,d,h(f)?!!f.capture:!!f,T):Vc(o,u,d,!1,f,T)}function Vc(o,u,d,f,T,D){if(!u)throw Error("Invalid event type");var S=h(T)?!!T.capture:!!T,G=Is(o);if(G||(o[_s]=G=new zr(o)),d=G.add(u,d,f,S,D),d.proxy)return d;if(f=bm(),d.proxy=f,f.src=o,f.listener=d,o.addEventListener)Em||(T=S),T===void 0&&(T=!1),o.addEventListener(u.toString(),f,T);else if(o.attachEvent)o.attachEvent(jc(u.toString()),f);else if(o.addListener&&o.removeListener)o.addListener(f);else throw Error("addEventListener and attachEvent are unavailable.");return d}function bm(){function o(d){return u.call(o.src,o.listener,d)}let u=Dm;return o}function Lc(o,u,d,f,T){if(Array.isArray(u)){for(var D=0;D<u.length;D++)Lc(o,u[D],d,f,T);return null}return d=Ts(d),o&&o[kn]?o.L(u,d,h(f)?!!f.capture:!!f,T):Vc(o,u,d,!0,f,T)}function Uc(o,u,d,f,T){if(Array.isArray(u))for(var D=0;D<u.length;D++)Uc(o,u[D],d,f,T);else f=h(f)?!!f.capture:!!f,d=Ts(d),o&&o[kn]?(o=o.i,u=String(u).toString(),u in o.g&&(D=o.g[u],d=ys(D,d,f,T),-1<d&&(Hr(D[d]),Array.prototype.splice.call(D,d,1),D.length==0&&(delete o.g[u],o.h--)))):o&&(o=Is(o))&&(u=o.g[u.toString()],o=-1,u&&(o=ys(u,d,f,T)),(d=-1<o?u[o]:null)&&Es(d))}function Es(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[kn])ms(u.i,o);else{var d=o.type,f=o.proxy;u.removeEventListener?u.removeEventListener(d,f,o.capture):u.detachEvent?u.detachEvent(jc(d),f):u.addListener&&u.removeListener&&u.removeListener(f),(d=Is(u))?(ms(d,o),d.h==0&&(d.src=null,u[_s]=null)):Hr(o)}}}function jc(o){return o in vs?vs[o]:vs[o]="on"+o}function Dm(o,u){if(o.da)o=!0;else{u=new xn(u,this);var d=o.listener,f=o.ha||o.src;o.fa&&Es(o),o=d.call(f,u)}return o}function Is(o){return o=o[_s],o instanceof zr?o:null}var ws="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ts(o){return typeof o=="function"?o:(o[ws]||(o[ws]=function(u){return o.handleEvent(u)}),o[ws])}function Ie(){mt.call(this),this.i=new zr(this),this.M=this,this.F=null}A(Ie,mt),Ie.prototype[kn]=!0,Ie.prototype.removeEventListener=function(o,u,d,f){Uc(this,o,u,d,f)};function Ce(o,u){var d,f=o.F;if(f)for(d=[];f;f=f.F)d.push(f);if(o=o.M,f=u.type||u,typeof u=="string")u=new Ee(u,o);else if(u instanceof Ee)u.target=u.target||o;else{var T=u;u=new Ee(f,o),v(u,T)}if(T=!0,d)for(var D=d.length-1;0<=D;D--){var S=u.g=d[D];T=Gr(S,f,!0,u)&&T}if(S=u.g=o,T=Gr(S,f,!0,u)&&T,T=Gr(S,f,!1,u)&&T,d)for(D=0;D<d.length;D++)S=u.g=d[D],T=Gr(S,f,!1,u)&&T}Ie.prototype.N=function(){if(Ie.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var d=o.g[u],f=0;f<d.length;f++)Hr(d[f]);delete o.g[u],o.h--}}this.F=null},Ie.prototype.K=function(o,u,d,f){return this.i.add(String(o),u,!1,d,f)},Ie.prototype.L=function(o,u,d,f){return this.i.add(String(o),u,!0,d,f)};function Gr(o,u,d,f){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var T=!0,D=0;D<u.length;++D){var S=u[D];if(S&&!S.da&&S.capture==d){var G=S.listener,me=S.ha||S.src;S.fa&&ms(o.i,S),T=G.call(me,f)!==!1&&T}}return T&&!f.defaultPrevented}function Bc(o,u,d){if(typeof o=="function")d&&(o=w(o,d));else if(o&&typeof o.handleEvent=="function")o=w(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(o,u||0)}function $c(o){o.g=Bc(()=>{o.g=null,o.i&&(o.i=!1,$c(o))},o.l);let u=o.h;o.h=null,o.m.apply(null,u)}class Cm extends mt{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:$c(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function On(o){mt.call(this),this.h=o,this.g={}}A(On,mt);var qc=[];function Hc(o){te(o.g,function(u,d){this.g.hasOwnProperty(d)&&Es(u)},o),o.g={}}On.prototype.N=function(){On.aa.N.call(this),Hc(this)},On.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bs=c.JSON.stringify,Am=c.JSON.parse,Sm=class{stringify(o){return c.JSON.stringify(o,void 0)}parse(o){return c.JSON.parse(o,void 0)}};function Ds(){}Ds.prototype.h=null;function zc(o){return o.h||(o.h=o.i())}function Gc(){}var Fn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Cs(){Ee.call(this,"d")}A(Cs,Ee);function As(){Ee.call(this,"c")}A(As,Ee);var kt={},Wc=null;function Wr(){return Wc=Wc||new Ie}kt.La="serverreachability";function Kc(o){Ee.call(this,kt.La,o)}A(Kc,Ee);function Vn(o){let u=Wr();Ce(u,new Kc(u))}kt.STAT_EVENT="statevent";function Qc(o,u){Ee.call(this,kt.STAT_EVENT,o),this.stat=u}A(Qc,Ee);function Ae(o){let u=Wr();Ce(u,new Qc(u,o))}kt.Ma="timingevent";function Yc(o,u){Ee.call(this,kt.Ma,o),this.size=u}A(Yc,Ee);function Ln(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){o()},u)}function Un(){this.g=!0}Un.prototype.xa=function(){this.g=!1};function Rm(o,u,d,f,T,D){o.info(function(){if(o.g)if(D)for(var S="",G=D.split("&"),me=0;me<G.length;me++){var L=G[me].split("=");if(1<L.length){var we=L[0];L=L[1];var Te=we.split("_");S=2<=Te.length&&Te[1]=="type"?S+(we+"="+L+"&"):S+(we+"=redacted&")}}else S=null;else S=D;return"XMLHTTP REQ ("+f+") [attempt "+T+"]: "+u+`
`+d+`
`+S})}function Nm(o,u,d,f,T,D,S){o.info(function(){return"XMLHTTP RESP ("+f+") [ attempt "+T+"]: "+u+`
`+d+`
`+D+" "+S})}function Xt(o,u,d,f){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+Mm(o,d)+(f?" "+f:"")})}function Pm(o,u){o.info(function(){return"TIMEOUT: "+u})}Un.prototype.info=function(){};function Mm(o,u){if(!o.g)return u;if(!u)return null;try{var d=JSON.parse(u);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var f=d[o];if(!(2>f.length)){var T=f[1];if(Array.isArray(T)&&!(1>T.length)){var D=T[0];if(D!="noop"&&D!="stop"&&D!="close")for(var S=1;S<T.length;S++)T[S]=""}}}}return bs(d)}catch{return u}}var Kr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ss;function Qr(){}A(Qr,Ds),Qr.prototype.g=function(){return new XMLHttpRequest},Qr.prototype.i=function(){return{}},Ss=new Qr;function yt(o,u,d,f){this.j=o,this.i=u,this.l=d,this.R=f||1,this.U=new On(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xc}function Xc(){this.i=null,this.g="",this.h=!1}var Zc={},Rs={};function Ns(o,u,d){o.L=1,o.v=Zr(it(u)),o.m=d,o.P=!0,eu(o,null)}function eu(o,u){o.F=Date.now(),Yr(o),o.A=it(o.v);var d=o.A,f=o.R;Array.isArray(f)||(f=[String(f)]),pu(d.i,"t",f),o.C=0,d=o.j.J,o.h=new Xc,o.g=Mu(o.j,d?u:null,!o.m),0<o.O&&(o.M=new Cm(w(o.Y,o,o.g),o.O)),u=o.U,d=o.g,f=o.ca;var T="readystatechange";Array.isArray(T)||(T&&(qc[0]=T.toString()),T=qc);for(var D=0;D<T.length;D++){var S=Fc(d,T[D],f||u.handleEvent,!1,u.h||u);if(!S)break;u.g[S.key]=S}u=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),Vn(),Rm(o.i,o.u,o.A,o.l,o.R,o.m)}yt.prototype.ca=function(o){o=o.target;let u=this.M;u&&st(o)==3?u.j():this.Y(o)},yt.prototype.Y=function(o){try{if(o==this.g)e:{let Te=st(this.g);var u=this.g.Ba();let tn=this.g.Z();if(!(3>Te)&&(Te!=3||this.g&&(this.h.h||this.g.oa()||Iu(this.g)))){this.J||Te!=4||u==7||(u==8||0>=tn?Vn(3):Vn(2)),Ps(this);var d=this.g.Z();this.X=d;t:if(tu(this)){var f=Iu(this.g);o="";var T=f.length,D=st(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ot(this),jn(this);var S="";break t}this.h.i=new c.TextDecoder}for(u=0;u<T;u++)this.h.h=!0,o+=this.h.i.decode(f[u],{stream:!(D&&u==T-1)});f.length=0,this.h.g+=o,this.C=0,S=this.h.g}else S=this.g.oa();if(this.o=d==200,Nm(this.i,this.u,this.A,this.l,this.R,Te,d),this.o){if(this.T&&!this.K){t:{if(this.g){var G,me=this.g;if((G=me.g?me.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(G)){var L=G;break t}}L=null}if(d=L)Xt(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ms(this,d);else{this.o=!1,this.s=3,Ae(12),Ot(this),jn(this);break e}}if(this.P){d=!0;let Be;for(;!this.J&&this.C<S.length;)if(Be=xm(this,S),Be==Rs){Te==4&&(this.s=4,Ae(14),d=!1),Xt(this.i,this.l,null,"[Incomplete Response]");break}else if(Be==Zc){this.s=4,Ae(15),Xt(this.i,this.l,S,"[Invalid Chunk]"),d=!1;break}else Xt(this.i,this.l,Be,null),Ms(this,Be);if(tu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Te!=4||S.length!=0||this.h.h||(this.s=1,Ae(16),d=!1),this.o=this.o&&d,!d)Xt(this.i,this.l,S,"[Invalid Chunked Response]"),Ot(this),jn(this);else if(0<S.length&&!this.W){this.W=!0;var we=this.j;we.g==this&&we.ba&&!we.M&&(we.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),Ls(we),we.M=!0,Ae(11))}}else Xt(this.i,this.l,S,null),Ms(this,S);Te==4&&Ot(this),this.o&&!this.J&&(Te==4?Su(this.j,this):(this.o=!1,Yr(this)))}else Ym(this.g),d==400&&0<S.indexOf("Unknown SID")?(this.s=3,Ae(12)):(this.s=0,Ae(13)),Ot(this),jn(this)}}}catch{}finally{}};function tu(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function xm(o,u){var d=o.C,f=u.indexOf(`
`,d);return f==-1?Rs:(d=Number(u.substring(d,f)),isNaN(d)?Zc:(f+=1,f+d>u.length?Rs:(u=u.slice(f,f+d),o.C=f+d,u)))}yt.prototype.cancel=function(){this.J=!0,Ot(this)};function Yr(o){o.S=Date.now()+o.I,nu(o,o.I)}function nu(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Ln(w(o.ba,o),u)}function Ps(o){o.B&&(c.clearTimeout(o.B),o.B=null)}yt.prototype.ba=function(){this.B=null;let o=Date.now();0<=o-this.S?(Pm(this.i,this.A),this.L!=2&&(Vn(),Ae(17)),Ot(this),this.s=2,jn(this)):nu(this,this.S-o)};function jn(o){o.j.G==0||o.J||Su(o.j,o)}function Ot(o){Ps(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,Hc(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function Ms(o,u){try{var d=o.j;if(d.G!=0&&(d.g==o||xs(d.h,o))){if(!o.K&&xs(d.h,o)&&d.G==3){try{var f=d.Da.g.parse(u)}catch{f=null}if(Array.isArray(f)&&f.length==3){var T=f;if(T[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)ii(d),ni(d);else break e;Vs(d),Ae(18)}}else d.za=T[1],0<d.za-d.T&&37500>T[2]&&d.F&&d.v==0&&!d.C&&(d.C=Ln(w(d.Za,d),6e3));if(1>=su(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else Vt(d,11)}else if((o.K||d.g==o)&&ii(d),!j(u))for(T=d.Da.g.parse(u),u=0;u<T.length;u++){let L=T[u];if(d.T=L[0],L=L[1],d.G==2)if(L[0]=="c"){d.K=L[1],d.ia=L[2];let we=L[3];we!=null&&(d.la=we,d.j.info("VER="+d.la));let Te=L[4];Te!=null&&(d.Aa=Te,d.j.info("SVER="+d.Aa));let tn=L[5];tn!=null&&typeof tn=="number"&&0<tn&&(f=1.5*tn,d.L=f,d.j.info("backChannelRequestTimeoutMs_="+f)),f=d;let Be=o.g;if(Be){let oi=Be.g?Be.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oi){var D=f.h;D.g||oi.indexOf("spdy")==-1&&oi.indexOf("quic")==-1&&oi.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(ks(D,D.h),D.h=null))}if(f.D){let Us=Be.g?Be.g.getResponseHeader("X-HTTP-Session-Id"):null;Us&&(f.ya=Us,Q(f.I,f.D,Us))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),f=d;var S=o;if(f.qa=Pu(f,f.J?f.ia:null,f.W),S.K){ou(f.h,S);var G=S,me=f.L;me&&(G.I=me),G.B&&(Ps(G),Yr(G)),f.g=S}else Cu(f);0<d.i.length&&ri(d)}else L[0]!="stop"&&L[0]!="close"||Vt(d,7);else d.G==3&&(L[0]=="stop"||L[0]=="close"?L[0]=="stop"?Vt(d,7):Fs(d):L[0]!="noop"&&d.l&&d.l.ta(L),d.v=0)}}Vn(4)}catch{}}var km=class{constructor(o,u){this.g=o,this.map=u}};function ru(o){this.l=o||10,c.PerformanceNavigationTiming?(o=c.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function iu(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function su(o){return o.h?1:o.g?o.g.size:0}function xs(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function ks(o,u){o.g?o.g.add(u):o.h=u}function ou(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}ru.prototype.cancel=function(){if(this.i=au(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let o of this.g.values())o.cancel();this.g.clear()}};function au(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(let d of o.g.values())u=u.concat(d.D);return u}return N(o.i)}function Om(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(l(o)){for(var u=[],d=o.length,f=0;f<d;f++)u.push(o[f]);return u}u=[],d=0;for(f in o)u[d++]=o[f];return u}function Fm(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(l(o)||typeof o=="string"){var u=[];o=o.length;for(var d=0;d<o;d++)u.push(d);return u}u=[],d=0;for(let f in o)u[d++]=f;return u}}}function cu(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(l(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var d=Fm(o),f=Om(o),T=f.length,D=0;D<T;D++)u.call(void 0,f[D],d&&d[D],o)}var uu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vm(o,u){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var f=o[d].indexOf("="),T=null;if(0<=f){var D=o[d].substring(0,f);T=o[d].substring(f+1)}else D=o[d];u(D,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function Ft(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Ft){this.h=o.h,Jr(this,o.j),this.o=o.o,this.g=o.g,Xr(this,o.s),this.l=o.l;var u=o.i,d=new qn;d.i=u.i,u.g&&(d.g=new Map(u.g),d.h=u.h),lu(this,d),this.m=o.m}else o&&(u=String(o).match(uu))?(this.h=!1,Jr(this,u[1]||"",!0),this.o=Bn(u[2]||""),this.g=Bn(u[3]||"",!0),Xr(this,u[4]),this.l=Bn(u[5]||"",!0),lu(this,u[6]||"",!0),this.m=Bn(u[7]||"")):(this.h=!1,this.i=new qn(null,this.h))}Ft.prototype.toString=function(){var o=[],u=this.j;u&&o.push($n(u,du,!0),":");var d=this.g;return(d||u=="file")&&(o.push("//"),(u=this.o)&&o.push($n(u,du,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push($n(d,d.charAt(0)=="/"?jm:Um,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",$n(d,$m)),o.join("")};function it(o){return new Ft(o)}function Jr(o,u,d){o.j=d?Bn(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function Xr(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function lu(o,u,d){u instanceof qn?(o.i=u,qm(o.i,o.h)):(d||(u=$n(u,Bm)),o.i=new qn(u,o.h))}function Q(o,u,d){o.i.set(u,d)}function Zr(o){return Q(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Bn(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function $n(o,u,d){return typeof o=="string"?(o=encodeURI(o).replace(u,Lm),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Lm(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var du=/[#\/\?@]/g,Um=/[#\?:]/g,jm=/[#\?]/g,Bm=/[#\?@]/g,$m=/#/g;function qn(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function _t(o){o.g||(o.g=new Map,o.h=0,o.i&&Vm(o.i,function(u,d){o.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}n=qn.prototype,n.add=function(o,u){_t(this),this.i=null,o=Zt(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(u),this.h+=1,this};function hu(o,u){_t(o),u=Zt(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function fu(o,u){return _t(o),u=Zt(o,u),o.g.has(u)}n.forEach=function(o,u){_t(this),this.g.forEach(function(d,f){d.forEach(function(T){o.call(u,T,f,this)},this)},this)},n.na=function(){_t(this);let o=Array.from(this.g.values()),u=Array.from(this.g.keys()),d=[];for(let f=0;f<u.length;f++){let T=o[f];for(let D=0;D<T.length;D++)d.push(u[f])}return d},n.V=function(o){_t(this);let u=[];if(typeof o=="string")fu(this,o)&&(u=u.concat(this.g.get(Zt(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)u=u.concat(o[d])}return u},n.set=function(o,u){return _t(this),this.i=null,o=Zt(this,o),fu(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},n.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function pu(o,u,d){hu(o,u),0<d.length&&(o.i=null,o.g.set(Zt(o,u),N(d)),o.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let o=[],u=Array.from(this.g.keys());for(var d=0;d<u.length;d++){var f=u[d];let D=encodeURIComponent(String(f)),S=this.V(f);for(f=0;f<S.length;f++){var T=D;S[f]!==""&&(T+="="+encodeURIComponent(String(S[f]))),o.push(T)}}return this.i=o.join("&")};function Zt(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function qm(o,u){u&&!o.j&&(_t(o),o.i=null,o.g.forEach(function(d,f){var T=f.toLowerCase();f!=T&&(hu(this,f),pu(this,T,d))},o)),o.j=u}function Hm(o,u){let d=new Un;if(c.Image){let f=new Image;f.onload=C(vt,d,"TestLoadImage: loaded",!0,u,f),f.onerror=C(vt,d,"TestLoadImage: error",!1,u,f),f.onabort=C(vt,d,"TestLoadImage: abort",!1,u,f),f.ontimeout=C(vt,d,"TestLoadImage: timeout",!1,u,f),c.setTimeout(function(){f.ontimeout&&f.ontimeout()},1e4),f.src=o}else u(!1)}function zm(o,u){let d=new Un,f=new AbortController,T=setTimeout(()=>{f.abort(),vt(d,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:f.signal}).then(D=>{clearTimeout(T),D.ok?vt(d,"TestPingServer: ok",!0,u):vt(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(T),vt(d,"TestPingServer: error",!1,u)})}function vt(o,u,d,f,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),f(d)}catch{}}function Gm(){this.g=new Sm}function Wm(o,u,d){let f=d||"";try{cu(o,function(T,D){let S=T;h(T)&&(S=bs(T)),u.push(f+D+"="+encodeURIComponent(S))})}catch(T){throw u.push(f+"type="+encodeURIComponent("_badmap")),T}}function Hn(o){this.l=o.Ub||null,this.j=o.eb||!1}A(Hn,Ds),Hn.prototype.g=function(){return new ei(this.l,this.j)},Hn.prototype.i=(function(o){return function(){return o}})({});function ei(o,u){Ie.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(ei,Ie),n=ei.prototype,n.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,Gn(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zn(this)),this.readyState=0},n.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Gn(this)),this.g&&(this.readyState=3,Gn(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gu(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function gu(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}n.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?zn(this):Gn(this),this.readyState==3&&gu(this)}},n.Ra=function(o){this.g&&(this.response=this.responseText=o,zn(this))},n.Qa=function(o){this.g&&(this.response=o,zn(this))},n.ga=function(){this.g&&zn(this)};function zn(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Gn(o)}n.setRequestHeader=function(o,u){this.u.append(o,u)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let o=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=u.next();return o.join(`\r
`)};function Gn(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(ei.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function mu(o){let u="";return te(o,function(d,f){u+=f,u+=":",u+=d,u+=`\r
`}),u}function Os(o,u,d){e:{for(f in d){var f=!1;break e}f=!0}f||(d=mu(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):Q(o,u,d))}function X(o){Ie.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(X,Ie);var Km=/^https?$/i,Qm=["POST","PUT"];n=X.prototype,n.Ha=function(o){this.J=o},n.ea=function(o,u,d,f){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ss.g(),this.v=this.o?zc(this.o):zc(Ss),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(D){yu(this,D);return}if(o=d||"",d=new Map(this.headers),f)if(Object.getPrototypeOf(f)===Object.prototype)for(var T in f)d.set(T,f[T]);else if(typeof f.keys=="function"&&typeof f.get=="function")for(let D of f.keys())d.set(D,f.get(D));else throw Error("Unknown input type for opt_headers: "+String(f));f=Array.from(d.keys()).find(D=>D.toLowerCase()=="content-type"),T=c.FormData&&o instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Qm,u,void 0))||f||T||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[D,S]of d)this.g.setRequestHeader(D,S);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Eu(this),this.u=!0,this.g.send(o),this.u=!1}catch(D){yu(this,D)}};function yu(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,_u(o),ti(o)}function _u(o){o.A||(o.A=!0,Ce(o,"complete"),Ce(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Ce(this,"complete"),Ce(this,"abort"),ti(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ti(this,!0)),X.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?vu(this):this.bb())},n.bb=function(){vu(this)};function vu(o){if(o.h&&typeof a<"u"&&(!o.v[1]||st(o)!=4||o.Z()!=2)){if(o.u&&st(o)==4)Bc(o.Ea,0,o);else if(Ce(o,"readystatechange"),st(o)==4){o.h=!1;try{let S=o.Z();e:switch(S){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var d;if(!(d=u)){var f;if(f=S===0){var T=String(o.D).match(uu)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),f=!Km.test(T?T.toLowerCase():"")}d=f}if(d)Ce(o,"complete"),Ce(o,"success");else{o.m=6;try{var D=2<st(o)?o.g.statusText:""}catch{D=""}o.l=D+" ["+o.Z()+"]",_u(o)}}finally{ti(o)}}}}function ti(o,u){if(o.g){Eu(o);let d=o.g,f=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||Ce(o,"ready");try{d.onreadystatechange=f}catch{}}}function Eu(o){o.I&&(c.clearTimeout(o.I),o.I=null)}n.isActive=function(){return!!this.g};function st(o){return o.g?o.g.readyState:0}n.Z=function(){try{return 2<st(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),Am(u)}};function Iu(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Ym(o){let u={};o=(o.g&&2<=st(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let f=0;f<o.length;f++){if(j(o[f]))continue;var d=E(o[f]);let T=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();let D=u[T]||[];u[T]=D,D.push(d)}I(u,function(f){return f.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wn(o,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||u}function wu(o){this.Aa=0,this.i=[],this.j=new Un,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wn("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wn("baseRetryDelayMs",5e3,o),this.cb=Wn("retryDelaySeedMs",1e4,o),this.Wa=Wn("forwardChannelMaxRetries",2,o),this.wa=Wn("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new ru(o&&o.concurrentRequestLimit),this.Da=new Gm,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=wu.prototype,n.la=8,n.G=1,n.connect=function(o,u,d,f){Ae(0),this.W=o,this.H=u||{},d&&f!==void 0&&(this.H.OSID=d,this.H.OAID=f),this.F=this.X,this.I=Pu(this,null,this.W),ri(this)};function Fs(o){if(Tu(o),o.G==3){var u=o.U++,d=it(o.I);if(Q(d,"SID",o.K),Q(d,"RID",u),Q(d,"TYPE","terminate"),Kn(o,d),u=new yt(o,o.j,u),u.L=2,u.v=Zr(it(d)),d=!1,c.navigator&&c.navigator.sendBeacon)try{d=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!d&&c.Image&&(new Image().src=u.v,d=!0),d||(u.g=Mu(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Yr(u)}Nu(o)}function ni(o){o.g&&(Ls(o),o.g.cancel(),o.g=null)}function Tu(o){ni(o),o.u&&(c.clearTimeout(o.u),o.u=null),ii(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&c.clearTimeout(o.s),o.s=null)}function ri(o){if(!iu(o.h)&&!o.s){o.s=!0;var u=o.Ga;Pn||Oc(),Mn||(Pn(),Mn=!0),gs.add(u,o),o.B=0}}function Jm(o,u){return su(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Ln(w(o.Ga,o,u),Ru(o,o.B)),o.B++,!0)}n.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;let T=new yt(this,this.j,o),D=this.o;if(this.S&&(D?(D=g(D),v(D,this.S)):D=this.S),this.m!==null||this.O||(T.H=D,D=null),this.P)e:{for(var u=0,d=0;d<this.i.length;d++){t:{var f=this.i[d];if("__data__"in f.map&&(f=f.map.__data__,typeof f=="string")){f=f.length;break t}f=void 0}if(f===void 0)break;if(u+=f,4096<u){u=d;break e}if(u===4096||d===this.i.length-1){u=d+1;break e}}u=1e3}else u=1e3;u=Du(this,T,u),d=it(this.I),Q(d,"RID",o),Q(d,"CVER",22),this.D&&Q(d,"X-HTTP-Session-Id",this.D),Kn(this,d),D&&(this.O?u="headers="+encodeURIComponent(String(mu(D)))+"&"+u:this.m&&Os(d,this.m,D)),ks(this.h,T),this.Ua&&Q(d,"TYPE","init"),this.P?(Q(d,"$req",u),Q(d,"SID","null"),T.T=!0,Ns(T,d,null)):Ns(T,d,u),this.G=2}}else this.G==3&&(o?bu(this,o):this.i.length==0||iu(this.h)||bu(this))};function bu(o,u){var d;u?d=u.l:d=o.U++;let f=it(o.I);Q(f,"SID",o.K),Q(f,"RID",d),Q(f,"AID",o.T),Kn(o,f),o.m&&o.o&&Os(f,o.m,o.o),d=new yt(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),u&&(o.i=u.D.concat(o.i)),u=Du(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),ks(o.h,d),Ns(d,f,u)}function Kn(o,u){o.H&&te(o.H,function(d,f){Q(u,f,d)}),o.l&&cu({},function(d,f){Q(u,f,d)})}function Du(o,u,d){d=Math.min(o.i.length,d);var f=o.l?w(o.l.Na,o.l,o):null;e:{var T=o.i;let D=-1;for(;;){let S=["count="+d];D==-1?0<d?(D=T[0].g,S.push("ofs="+D)):D=0:S.push("ofs="+D);let G=!0;for(let me=0;me<d;me++){let L=T[me].g,we=T[me].map;if(L-=D,0>L)D=Math.max(0,T[me].g-100),G=!1;else try{Wm(we,S,"req"+L+"_")}catch{f&&f(we)}}if(G){f=S.join("&");break e}}}return o=o.i.splice(0,d),u.D=o,f}function Cu(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;Pn||Oc(),Mn||(Pn(),Mn=!0),gs.add(u,o),o.v=0}}function Vs(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Ln(w(o.Fa,o),Ru(o,o.v)),o.v++,!0)}n.Fa=function(){if(this.u=null,Au(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Ln(w(this.ab,this),o)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ae(10),ni(this),Au(this))};function Ls(o){o.A!=null&&(c.clearTimeout(o.A),o.A=null)}function Au(o){o.g=new yt(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=it(o.qa);Q(u,"RID","rpc"),Q(u,"SID",o.K),Q(u,"AID",o.T),Q(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&Q(u,"TO",o.ja),Q(u,"TYPE","xmlhttp"),Kn(o,u),o.m&&o.o&&Os(u,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=Zr(it(u)),d.m=null,d.P=!0,eu(d,o)}n.Za=function(){this.C!=null&&(this.C=null,ni(this),Vs(this),Ae(19))};function ii(o){o.C!=null&&(c.clearTimeout(o.C),o.C=null)}function Su(o,u){var d=null;if(o.g==u){ii(o),Ls(o),o.g=null;var f=2}else if(xs(o.h,u))d=u.D,ou(o.h,u),f=1;else return;if(o.G!=0){if(u.o)if(f==1){d=u.m?u.m.length:0,u=Date.now()-u.F;var T=o.B;f=Wr(),Ce(f,new Yc(f,d)),ri(o)}else Cu(o);else if(T=u.s,T==3||T==0&&0<u.X||!(f==1&&Jm(o,u)||f==2&&Vs(o)))switch(d&&0<d.length&&(u=o.h,u.i=u.i.concat(d)),T){case 1:Vt(o,5);break;case 4:Vt(o,10);break;case 3:Vt(o,6);break;default:Vt(o,2)}}}function Ru(o,u){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*u}function Vt(o,u){if(o.j.info("Error code "+u),u==2){var d=w(o.fb,o),f=o.Xa;let T=!f;f=new Ft(f||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Jr(f,"https"),Zr(f),T?Hm(f.toString(),d):zm(f.toString(),d)}else Ae(2);o.G=0,o.l&&o.l.sa(u),Nu(o),Tu(o)}n.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Ae(2)):(this.j.info("Failed to ping google.com"),Ae(1))};function Nu(o){if(o.G=0,o.ka=[],o.l){let u=au(o.h);(u.length!=0||o.i.length!=0)&&(R(o.ka,u),R(o.ka,o.i),o.h.i.length=0,N(o.i),o.i.length=0),o.l.ra()}}function Pu(o,u,d){var f=d instanceof Ft?it(d):new Ft(d);if(f.g!="")u&&(f.g=u+"."+f.g),Xr(f,f.s);else{var T=c.location;f=T.protocol,u=u?u+"."+T.hostname:T.hostname,T=+T.port;var D=new Ft(null);f&&Jr(D,f),u&&(D.g=u),T&&Xr(D,T),d&&(D.l=d),f=D}return d=o.D,u=o.ya,d&&u&&Q(f,d,u),Q(f,"VER",o.la),Kn(o,f),f}function Mu(o,u,d){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new X(new Hn({eb:d})):new X(o.pa),u.Ha(o.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function xu(){}n=xu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function si(){}si.prototype.g=function(o,u){return new Fe(o,u)};function Fe(o,u){Ie.call(this),this.g=new wu(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!j(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!j(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new en(this)}A(Fe,Ie),Fe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Fe.prototype.close=function(){Fs(this.g)},Fe.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=bs(o),o=d);u.i.push(new km(u.Ya++,o)),u.G==3&&ri(u)},Fe.prototype.N=function(){this.g.l=null,delete this.j,Fs(this.g),delete this.g,Fe.aa.N.call(this)};function ku(o){Cs.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(let d in u){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}A(ku,Cs);function Ou(){As.call(this),this.status=1}A(Ou,As);function en(o){this.g=o}A(en,xu),en.prototype.ua=function(){Ce(this.g,"a")},en.prototype.ta=function(o){Ce(this.g,new ku(o))},en.prototype.sa=function(o){Ce(this.g,new Ou)},en.prototype.ra=function(){Ce(this.g,"b")},si.prototype.createWebChannel=si.prototype.g,Fe.prototype.send=Fe.prototype.o,Fe.prototype.open=Fe.prototype.m,Fe.prototype.close=Fe.prototype.close,cI=Ti.createWebChannelTransport=function(){return new si},aI=Ti.getStatEventTarget=function(){return Wr()},oI=Ti.Event=kt,kp=Ti.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Kr.NO_ERROR=0,Kr.TIMEOUT=8,Kr.HTTP_ERROR=6,rd=Ti.ErrorCode=Kr,Jc.COMPLETE="complete",sI=Ti.EventType=Jc,Gc.EventType=Fn,Fn.OPEN="a",Fn.CLOSE="b",Fn.ERROR="c",Fn.MESSAGE="d",Ie.prototype.listen=Ie.prototype.K,Ha=Ti.WebChannel=Gc,Aj=Ti.FetchXmlHttpFactory=Hn,X.prototype.listenOnce=X.prototype.L,X.prototype.getLastError=X.prototype.Ka,X.prototype.getLastErrorCode=X.prototype.Ba,X.prototype.getStatus=X.prototype.Z,X.prototype.getResponseJson=X.prototype.Oa,X.prototype.getResponseText=X.prototype.oa,X.prototype.send=X.prototype.ea,X.prototype.setWithCredentials=X.prototype.Ha,iI=Ti.XhrIo=X}).apply(typeof xp<"u"?xp:typeof self<"u"?self:typeof window<"u"?window:{});var pR="@firebase/firestore";var gt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");var hc="10.14.0";var To=new qa("@firebase/firestore");function id(){return To.logLevel}function B(n,...e){if(To.logLevel<=be.DEBUG){let t=e.map(Gw);To.debug(`Firestore (${hc}): ${n}`,...t)}}function Di(n,...e){if(To.logLevel<=be.ERROR){let t=e.map(Gw);To.error(`Firestore (${hc}): ${n}`,...t)}}function Xa(n,...e){if(To.logLevel<=be.WARN){let t=e.map(Gw);To.warn(`Firestore (${hc}): ${n}`,...t)}}function Gw(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function J(n="Unexpected state"){let e=`FIRESTORE (${hc}) INTERNAL ASSERTION FAILED: `+n;throw Di(e),new Error(e)}function Oe(n,e){n||J()}function se(n,e){return n}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},z=class extends lr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var xr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Up=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},fI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(gt.UNAUTHENTICATED))}shutdown(){}},pI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},gI=class{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Oe(this.o===void 0);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),s=new xr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new xr,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},c=l=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new xr)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Oe(typeof r.accessToken=="string"),new Up(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string"),new gt(e)}},mI=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},yI=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new mI(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},_I=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},vI=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Oe(this.o===void 0);let r=s=>{s.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let a=s.token!==this.R;return this.R=s.token,B("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Oe(typeof t.token=="string"),this.R=t.token,new _I(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Sj(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var jp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Sj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function De(n,e){return n<e?-1:n>e?1:0}function Za(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Tt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new z(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new z(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new z(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ae=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Tt(0,0))}static max(){return new n(new Tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Bp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&J(),r===void 0?r=e.length-t:r>e.length-t&&J(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),a=t.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ze=class n extends Bp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new z(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Rj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,pn=class n extends Bp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Rj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new z(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new z(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new z(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new z(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Y=class n{constructor(e){this.path=e}static fromPath(e){return new n(ze.fromString(e))}static fromName(e){return new n(ze.fromString(e).popFirst(5))}static empty(){return new n(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ze.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ze(e.slice()))}};var EI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};EI.UNKNOWN_ID=-1;function Nj(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new Tt(t+1,0):new Tt(t,r));return new bo(i,Y.empty(),e)}function Pj(n){return new bo(n.readTime,n.key,-1)}var bo=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ae.min(),Y.empty(),-1)}static max(){return new n(ae.max(),Y.empty(),-1)}};function Mj(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Y.comparator(n.documentKey,e.documentKey),t!==0?t:De(n.largestBatchId,e.largestBatchId))}var xj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",II=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function wd(n){if(n.code!==P.FAILED_PRECONDITION||n.message!==xj)throw n;B("LocalStore","Unexpectedly lost primary lease")}var k=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++s,a&&s===i&&t()},l=>r(l))}),a=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,a=new Array(s),c=0;for(let l=0;l<s;l++){let h=l;t(e[h]).next(p=>{a[h]=p,++c,c===s&&r(a)},p=>i(p))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function kj(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Td(n){return n.name==="IndexedDbTransactionError"}var zR=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function pg(n){return n==null}function ld(n){return n===0&&1/n==-1/0}function Oj(n){return typeof n=="number"&&Number.isInteger(n)&&!ld(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Fj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ise=[...Fj,"documentOverlays"],Vj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Lj=Vj,Uj=[...Lj,"indexConfiguration","indexState","indexEntries"];var sse=[...Uj,"globals"];function gR(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Po(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function GR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ge=class n{constructor(e,t){this.comparator=e,this.root=t||kr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,kr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ka(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ka(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ka(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ka(this.root,e,this.comparator,!0)}},Ka=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},kr=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();let e=this.left.check();if(e!==this.right.check())throw J();return e+(this.isRed()?0:1)}};kr.EMPTY=null,kr.RED=!0,kr.BLACK=!1;kr.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(e,t,r,i,s){return this}insert(e,t,r){return new kr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Mt=class n{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $p(this.data.getIterator())}getIteratorFrom(e){return new $p(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},$p=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Dn=class n{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new n([])}unionWith(e){let t=new Mt(pn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Za(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var qp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var xt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new qp("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};xt.EMPTY_BYTE_STRING=new xt("");var jj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ci(n){if(Oe(!!n),typeof n=="string"){let e=0,t=jj.exec(n);if(Oe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(n.seconds),nanos:je(n.nanos)}}function je(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function cs(n){return typeof n=="string"?xt.fromBase64String(n):xt.fromUint8Array(n)}function Ww(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Kw(n){let e=n.mapValue.fields.__previous_value__;return Ww(e)?Kw(e):e}function dd(n){let e=Ci(n.mapValue.fields.__local_write_time__.timestampValue);return new Tt(e.seconds,e.nanos)}var wI=class{constructor(e,t,r,i,s,a,c,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=h}},Hp=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Op={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Do(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ww(n)?4:KR(n)?9007199254740991:WR(n)?10:11:J()}function Vr(n,e){if(n===e)return!0;let t=Do(n);if(t!==Do(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return dd(n).isEqual(dd(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let a=Ci(i.timestampValue),c=Ci(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return cs(i.bytesValue).isEqual(cs(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return je(i.geoPointValue.latitude)===je(s.geoPointValue.latitude)&&je(i.geoPointValue.longitude)===je(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return je(i.integerValue)===je(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let a=je(i.doubleValue),c=je(s.doubleValue);return a===c?ld(a)===ld(c):isNaN(a)&&isNaN(c)}return!1})(n,e);case 9:return Za(n.arrayValue.values||[],e.arrayValue.values||[],Vr);case 10:case 11:return(function(i,s){let a=i.mapValue.fields||{},c=s.mapValue.fields||{};if(gR(a)!==gR(c))return!1;for(let l in a)if(a.hasOwnProperty(l)&&(c[l]===void 0||!Vr(a[l],c[l])))return!1;return!0})(n,e);default:return J()}}function hd(n,e){return(n.values||[]).find(t=>Vr(t,e))!==void 0}function ec(n,e){if(n===e)return 0;let t=Do(n),r=Do(e);if(t!==r)return De(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(n.booleanValue,e.booleanValue);case 2:return(function(s,a){let c=je(s.integerValue||s.doubleValue),l=je(a.integerValue||a.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1})(n,e);case 3:return mR(n.timestampValue,e.timestampValue);case 4:return mR(dd(n),dd(e));case 5:return De(n.stringValue,e.stringValue);case 6:return(function(s,a){let c=cs(s),l=cs(a);return c.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(s,a){let c=s.split("/"),l=a.split("/");for(let h=0;h<c.length&&h<l.length;h++){let p=De(c[h],l[h]);if(p!==0)return p}return De(c.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,a){let c=De(je(s.latitude),je(a.latitude));return c!==0?c:De(je(s.longitude),je(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return yR(n.arrayValue,e.arrayValue);case 10:return(function(s,a){var c,l,h,p;let _=s.fields||{},w=a.fields||{},C=(c=_.value)===null||c===void 0?void 0:c.arrayValue,A=(l=w.value)===null||l===void 0?void 0:l.arrayValue,N=De(((h=C?.values)===null||h===void 0?void 0:h.length)||0,((p=A?.values)===null||p===void 0?void 0:p.length)||0);return N!==0?N:yR(C,A)})(n.mapValue,e.mapValue);case 11:return(function(s,a){if(s===Op.mapValue&&a===Op.mapValue)return 0;if(s===Op.mapValue)return 1;if(a===Op.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),h=a.fields||{},p=Object.keys(h);l.sort(),p.sort();for(let _=0;_<l.length&&_<p.length;++_){let w=De(l[_],p[_]);if(w!==0)return w;let C=ec(c[l[_]],h[p[_]]);if(C!==0)return C}return De(l.length,p.length)})(n.mapValue,e.mapValue);default:throw J()}}function mR(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return De(n,e);let t=Ci(n),r=Ci(e),i=De(t.seconds,r.seconds);return i!==0?i:De(t.nanos,r.nanos)}function yR(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=ec(t[i],r[i]);if(s)return s}return De(t.length,r.length)}function tc(n){return TI(n)}function TI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Ci(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return cs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Y.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=TI(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let a of r)s?s=!1:i+=",",i+=`${a}:${TI(t.fields[a])}`;return i+"}"})(n.mapValue):J()}function bI(n){return!!n&&"integerValue"in n}function Qw(n){return!!n&&"arrayValue"in n}function _R(n){return!!n&&"nullValue"in n}function vR(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vp(n){return!!n&&"mapValue"in n}function WR(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function od(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Po(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=od(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=od(n.arrayValue.values[t]);return e}return Object.assign({},n)}function KR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var fn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Vp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=od(t)}setAll(e){let t=pn.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=c.popLast()}a?r[c.lastSegment()]=od(a):i.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Vp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Vp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Po(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(od(this.value))}};function QR(n){let e=[];return Po(n.fields,(t,r)=>{let i=new pn([t]);if(Vp(r)){let s=QR(r.mapValue).fields;if(s.length===0)e.push(i);else for(let a of s)e.push(i.child(a))}else e.push(i)}),new Dn(e)}var fr=class n{constructor(e,t,r,i,s,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new n(e,0,ae.min(),ae.min(),ae.min(),fn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ae.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ae.min(),ae.min(),fn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ae.min(),ae.min(),fn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var nc=class{constructor(e,t){this.position=e,this.inclusive=t}};function ER(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],a=n.position[i];if(s.field.isKeyField()?r=Y.comparator(Y.fromName(a.referenceValue),t.key):r=ec(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function IR(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vr(n.position[t],e.position[t]))return!1;return!0}var rc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Bj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var zp=class{},dt=class n extends zp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new CI(e,t,r):t==="array-contains"?new RI(e,r):t==="in"?new NI(e,r):t==="not-in"?new PI(e,r):t==="array-contains-any"?new MI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new AI(e,r):new SI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ec(t,this.value)):t!==null&&Do(this.value)===Do(t)&&this.matchesComparison(ec(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Lr=class n extends zp{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return YR(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function YR(n){return n.op==="and"}function JR(n){return $j(n)&&YR(n)}function $j(n){for(let e of n.filters)if(e instanceof Lr)return!1;return!0}function DI(n){if(n instanceof dt)return n.field.canonicalString()+n.op.toString()+tc(n.value);if(JR(n))return n.filters.map(e=>DI(e)).join(",");{let e=n.filters.map(t=>DI(t)).join(",");return`${n.op}(${e})`}}function XR(n,e){return n instanceof dt?(function(r,i){return i instanceof dt&&r.op===i.op&&r.field.isEqual(i.field)&&Vr(r.value,i.value)})(n,e):n instanceof Lr?(function(r,i){return i instanceof Lr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,c)=>s&&XR(a,i.filters[c]),!0):!1})(n,e):void J()}function ZR(n){return n instanceof dt?(function(t){return`${t.field.canonicalString()} ${t.op} ${tc(t.value)}`})(n):n instanceof Lr?(function(t){return t.op.toString()+" {"+t.getFilters().map(ZR).join(" ,")+"}"})(n):"Filter"}var CI=class extends dt{constructor(e,t,r){super(e,t,r),this.key=Y.fromName(r.referenceValue)}matches(e){let t=Y.comparator(e.key,this.key);return this.matchesComparison(t)}},AI=class extends dt{constructor(e,t){super(e,"in",t),this.keys=eN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},SI=class extends dt{constructor(e,t){super(e,"not-in",t),this.keys=eN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function eN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Y.fromName(r.referenceValue))}var RI=class extends dt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Qw(t)&&hd(t.arrayValue,this.value)}},NI=class extends dt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&hd(this.value.arrayValue,t)}},PI=class extends dt{constructor(e,t){super(e,"not-in",t)}matches(e){if(hd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!hd(this.value.arrayValue,t)}},MI=class extends dt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Qw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>hd(this.value.arrayValue,r))}};var xI=class{constructor(e,t=null,r=[],i=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.ue=null}};function wR(n,e=null,t=[],r=[],i=null,s=null,a=null){return new xI(n,e,t,r,i,s,a)}function Yw(n){let e=se(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>DI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),pg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>tc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>tc(r)).join(",")),e.ue=t}return e.ue}function Jw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Bj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!XR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!IR(n.startAt,e.startAt)&&IR(n.endAt,e.endAt)}function kI(n){return Y.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ic=class{constructor(e,t=null,r=[],i=[],s=null,a="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function qj(n,e,t,r,i,s,a,c){return new ic(n,e,t,r,i,s,a,c)}function tN(n){return new ic(n)}function TR(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Hj(n){return n.collectionGroup!==null}function ad(n){let e=se(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Mt(pn.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new rc(s,r))}),t.has(pn.keyField().canonicalString())||e.ce.push(new rc(pn.keyField(),r))}return e.ce}function Or(n){let e=se(n);return e.le||(e.le=zj(e,ad(n))),e.le}function zj(n,e){if(n.limitType==="F")return wR(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new rc(i.field,s)});let t=n.endAt?new nc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new nc(n.startAt.position,n.startAt.inclusive):null;return wR(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function OI(n,e,t){return new ic(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gg(n,e){return Jw(Or(n),Or(e))&&n.limitType===e.limitType}function nN(n){return`${Yw(Or(n))}|lt:${n.limitType}`}function za(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>ZR(i)).join(", ")}]`),pg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>tc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>tc(i)).join(",")),`Target(${r})`})(Or(n))}; limitType=${n.limitType})`}function mg(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Y.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of ad(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,c,l){let h=ER(a,c,l);return a.inclusive?h<=0:h<0})(r.startAt,ad(r),i)||r.endAt&&!(function(a,c,l){let h=ER(a,c,l);return a.inclusive?h>=0:h>0})(r.endAt,ad(r),i))})(n,e)}function Gj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function rN(n){return(e,t)=>{let r=!1;for(let i of ad(n)){let s=Wj(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Wj(n,e,t){let r=n.field.isKeyField()?Y.comparator(e.key,t.key):(function(s,a,c){let l=a.data.field(s),h=c.data.field(s);return l!==null&&h!==null?ec(l,h):J()})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return J()}}var us=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Po(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return GR(this.inner)}size(){return this.innerSize}};var Kj=new Ge(Y.comparator);function Ai(){return Kj}var iN=new Ge(Y.comparator);function sd(...n){let e=iN;for(let t of n)e=e.insert(t.key,t);return e}function sN(n){let e=iN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Io(){return cd()}function oN(){return cd()}function cd(){return new us(n=>n.toString(),(n,e)=>n.isEqual(e))}var Qj=new Ge(Y.comparator),Yj=new Mt(Y.comparator);function pe(...n){let e=Yj;for(let t of n)e=e.add(t);return e}var Jj=new Mt(De);function Xj(){return Jj}function Xw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ld(e)?"-0":e}}function aN(n){return{integerValue:""+n}}function Zj(n,e){return Oj(e)?aN(e):Xw(n,e)}var sc=class{constructor(){this._=void 0}};function eB(n,e,t){return n instanceof oc?(function(i,s){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ww(s)&&(s=Kw(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}})(t,e):n instanceof Co?uN(n,e):n instanceof Ao?lN(n,e):(function(i,s){let a=cN(i,s),c=bR(a)+bR(i.Pe);return bI(a)&&bI(i.Pe)?aN(c):Xw(i.serializer,c)})(n,e)}function tB(n,e,t){return n instanceof Co?uN(n,e):n instanceof Ao?lN(n,e):t}function cN(n,e){return n instanceof ac?(function(r){return bI(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var oc=class extends sc{},Co=class extends sc{constructor(e){super(),this.elements=e}};function uN(n,e){let t=dN(e);for(let r of n.elements)t.some(i=>Vr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ao=class extends sc{constructor(e){super(),this.elements=e}};function lN(n,e){let t=dN(e);for(let r of n.elements)t=t.filter(i=>!Vr(i,r));return{arrayValue:{values:t}}}var ac=class extends sc{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function bR(n){return je(n.integerValue||n.doubleValue)}function dN(n){return Qw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function nB(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Co&&i instanceof Co||r instanceof Ao&&i instanceof Ao?Za(r.elements,i.elements,Vr):r instanceof ac&&i instanceof ac?Vr(r.Pe,i.Pe):r instanceof oc&&i instanceof oc})(n.transform,e.transform)}var FI=class{constructor(e,t){this.version=e,this.transformResults=t}},bi=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Lp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var cc=class{};function hN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new fd(n.key,bi.none()):new So(n.key,n.data,bi.none());{let t=n.data,r=fn.empty(),i=new Mt(pn.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Ur(n.key,r,new Dn(i.toArray()),bi.none())}}function rB(n,e,t){n instanceof So?(function(i,s,a){let c=i.value.clone(),l=CR(i.fieldTransforms,s,a.transformResults);c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(n,e,t):n instanceof Ur?(function(i,s,a){if(!Lp(i.precondition,s))return void s.convertToUnknownDocument(a.version);let c=CR(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(fN(i)),l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(n,e,t):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function ud(n,e,t,r){return n instanceof So?(function(s,a,c,l){if(!Lp(s.precondition,a))return c;let h=s.value.clone(),p=AR(s.fieldTransforms,l,a);return h.setAll(p),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null})(n,e,t,r):n instanceof Ur?(function(s,a,c,l){if(!Lp(s.precondition,a))return c;let h=AR(s.fieldTransforms,l,a),p=a.data;return p.setAll(fN(s)),p.setAll(h),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(_=>_.field))})(n,e,t,r):(function(s,a,c){return Lp(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c})(n,e,t)}function iB(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=cN(r.transform,i||null);s!=null&&(t===null&&(t=fn.empty()),t.set(r.field,s))}return t||null}function DR(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Za(r,i,(s,a)=>nB(s,a))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var So=class extends cc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Ur=class extends cc{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function fN(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function CR(n,e,t){let r=new Map;Oe(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],a=s.transform,c=e.data.field(s.field);r.set(s.field,tB(a,c,t[i]))}return r}function AR(n,e,t){let r=new Map;for(let i of n){let s=i.transform,a=t.data.field(i.field);r.set(i.field,eB(s,a,e))}return r}var fd=class extends cc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},VI=class extends cc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var LI=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&rB(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ud(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ud(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=oN();return this.mutations.forEach(i=>{let s=e.get(i.key),a=s.overlayedDocument,c=this.applyToLocalView(a,s.mutatedFields);c=t.has(i.key)?null:c;let l=hN(a,c);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),pe())}isEqual(e){return this.batchId===e.batchId&&Za(this.mutations,e.mutations,(t,r)=>DR(t,r))&&Za(this.baseMutations,e.baseMutations,(t,r)=>DR(t,r))}},UI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Oe(e.mutations.length===r.length);let i=(function(){return Qj})(),s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new n(e,t,r,i)}};var jI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var BI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var et,ye;function sB(n){switch(n){default:return J();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function pN(n){if(n===void 0)return Di("GRPC error has no .code"),P.UNKNOWN;switch(n){case et.OK:return P.OK;case et.CANCELLED:return P.CANCELLED;case et.UNKNOWN:return P.UNKNOWN;case et.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case et.INTERNAL:return P.INTERNAL;case et.UNAVAILABLE:return P.UNAVAILABLE;case et.UNAUTHENTICATED:return P.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case et.NOT_FOUND:return P.NOT_FOUND;case et.ALREADY_EXISTS:return P.ALREADY_EXISTS;case et.PERMISSION_DENIED:return P.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case et.ABORTED:return P.ABORTED;case et.OUT_OF_RANGE:return P.OUT_OF_RANGE;case et.UNIMPLEMENTED:return P.UNIMPLEMENTED;case et.DATA_LOSS:return P.DATA_LOSS;default:return J()}}(ye=et||(et={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var SR=null;function oB(){return new TextEncoder}var aB=new os([4294967295,4294967295],0);function RR(n){let e=oB().encode(n),t=new rI;return t.update(e),new Uint8Array(t.digest())}function NR(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new os([t,r],0),new os([i,s],0)]}var $I=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new wo(`Invalid padding: ${t}`);if(r<0)throw new wo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new wo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new wo(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=os.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(os.fromNumber(r)));return i.compare(aB)===1&&(i=new os([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=RR(e),[r,i]=NR(t);for(let s=0;s<this.hashCount;s++){let a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new n(s,i,t);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;let t=RR(e),[r,i]=NR(t);for(let s=0;s<this.hashCount;s++){let a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},wo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Gp=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,pd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ae.min(),i,new Ge(De),Ai(),pe())}},pd=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,pe(),pe(),pe())}};var Ya=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Wp=class{constructor(e,t){this.targetId=e,this.me=t}},Kp=class{constructor(e,t,r=xt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Qp=class{constructor(){this.fe=0,this.ge=MR(),this.pe=xt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=pe(),t=pe(),r=pe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:J()}}),new pd(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=MR()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},qI=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ai(),this.qe=PR(),this.Qe=new Ge(De)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:J()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(kI(s))if(r===0){let a=new Y(s.path);this.Ue(t,a,fr.newNoDocument(a,ae.min()))}else Oe(r===1);else{let a=this.Ye(t);if(a!==r){let c=this.Ze(e),l=c?this.Xe(c,e,a):1;if(l!==0){this.je(t);let h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,h)}SR?.et((function(p,_,w,C,A){var N,R,x,j,U,K;let Ue={localCacheCount:p,existenceFilterCount:_.count,databaseId:w.database,projectId:w.projectId},te=_.unchangedNames;return te&&(Ue.bloomFilter={applied:A===0,hashCount:(N=te?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(j=(x=(R=te?.bits)===null||R===void 0?void 0:R.bitmap)===null||x===void 0?void 0:x.length)!==null&&j!==void 0?j:0,padding:(K=(U=te?.bits)===null||U===void 0?void 0:U.padding)!==null&&K!==void 0?K:0,mightContain:I=>{var g;return(g=C?.mightContain(I))!==null&&g!==void 0&&g}}),Ue})(a,e.me,this.Le.tt(),c,l))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,a,c;try{a=cs(r).toUint8Array()}catch(l){if(l instanceof qp)return Xa("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new $I(a,i,s)}catch(l){return Xa(l instanceof wo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,a)=>{let c=this.Je(a);if(c){if(s.current&&kI(c.target)){let l=new Y(c.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,fr.newNoDocument(l,e))}s.be&&(t.set(a,s.ve()),s.Ce())}});let r=pe();this.qe.forEach((s,a)=>{let c=!0;a.forEachWhile(l=>{let h=this.Je(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));let i=new Gp(e,t,this.Qe,this.ke,r);return this.ke=Ai(),this.qe=PR(),this.Qe=new Ge(De),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Qp,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Mt(De),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||B("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Qp),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function PR(){return new Ge(Y.comparator)}function MR(){return new Ge(Y.comparator)}var cB={asc:"ASCENDING",desc:"DESCENDING"},uB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lB={and:"AND",or:"OR"},HI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function zI(n,e){return n.useProto3Json||pg(e)?e:{value:e}}function Yp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function dB(n,e){return Yp(n,e.toTimestamp())}function Fr(n){return Oe(!!n),ae.fromTimestamp((function(t){let r=Ci(t);return new Tt(r.seconds,r.nanos)})(n))}function Zw(n,e){return GI(n,e).canonicalString()}function GI(n,e){let t=(function(i){return new ze(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function mN(n){let e=ze.fromString(n);return Oe(IN(e)),e}function WI(n,e){return Zw(n.databaseId,e.path)}function uI(n,e){let t=mN(e);if(t.get(1)!==n.databaseId.projectId)throw new z(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new z(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Y(_N(t))}function yN(n,e){return Zw(n.databaseId,e)}function hB(n){let e=mN(n);return e.length===4?ze.emptyPath():_N(e)}function KI(n){return new ze(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _N(n){return Oe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function xR(n,e,t){return{name:WI(n,e),fields:t.value.mapValue.fields}}function fB(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:J()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(h,p){return h.useProto3Json?(Oe(p===void 0||typeof p=="string"),xt.fromBase64String(p||"")):(Oe(p===void 0||p instanceof Buffer||p instanceof Uint8Array),xt.fromUint8Array(p||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&(function(h){let p=h.code===void 0?P.UNKNOWN:pN(h.code);return new z(p,h.message||"")})(a);t=new Kp(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=uI(n,r.document.name),s=Fr(r.document.updateTime),a=r.document.createTime?Fr(r.document.createTime):ae.min(),c=new fn({mapValue:{fields:r.document.fields}}),l=fr.newFoundDocument(i,s,a,c),h=r.targetIds||[],p=r.removedTargetIds||[];t=new Ya(h,p,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=uI(n,r.document),s=r.readTime?Fr(r.readTime):ae.min(),a=fr.newNoDocument(i,s),c=r.removedTargetIds||[];t=new Ya([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=uI(n,r.document),s=r.removedTargetIds||[];t=new Ya([],s,i,null)}else{if(!("filter"in e))return J();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,a=new BI(i,s),c=r.targetId;t=new Wp(c,a)}}return t}function pB(n,e){let t;if(e instanceof So)t={update:xR(n,e.key,e.value)};else if(e instanceof fd)t={delete:WI(n,e.key)};else if(e instanceof Ur)t={update:xR(n,e.key,e.data),updateMask:TB(e.fieldMask)};else{if(!(e instanceof VI))return J();t={verify:WI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,a){let c=a.transform;if(c instanceof oc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Co)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ao)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ac)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw J()})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:dB(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:J()})(n,e.precondition)),t}function gB(n,e){return n&&n.length>0?(Oe(e!==void 0),n.map(t=>(function(i,s){let a=i.updateTime?Fr(i.updateTime):Fr(s);return a.isEqual(ae.min())&&(a=Fr(s)),new FI(a,i.transformResults||[])})(t,e))):[]}function mB(n,e){return{documents:[yN(n,e.path)]}}function yB(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=yN(n,i);let s=(function(h){if(h.length!==0)return EN(Lr.create(h,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let a=(function(h){if(h.length!==0)return h.map(p=>(function(w){return{field:Ga(w.field),direction:EB(w.dir)}})(p))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);let c=zI(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:t,parent:i}}function _B(n){let e=hB(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Oe(r===1);let p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=(function(_){let w=vN(_);return w instanceof Lr&&JR(w)?w.getFilters():[w]})(t.where));let a=[];t.orderBy&&(a=(function(_){return _.map(w=>(function(A){return new rc(Wa(A.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(w))})(t.orderBy));let c=null;t.limit&&(c=(function(_){let w;return w=typeof _=="object"?_.value:_,pg(w)?null:w})(t.limit));let l=null;t.startAt&&(l=(function(_){let w=!!_.before,C=_.values||[];return new nc(C,w)})(t.startAt));let h=null;return t.endAt&&(h=(function(_){let w=!_.before,C=_.values||[];return new nc(C,w)})(t.endAt)),qj(e,i,a,s,c,"F",l,h)}function vB(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function vN(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Wa(t.unaryFilter.field);return dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Wa(t.unaryFilter.field);return dt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Wa(t.unaryFilter.field);return dt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=Wa(t.unaryFilter.field);return dt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return J()}})(n):n.fieldFilter!==void 0?(function(t){return dt.create(Wa(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Lr.create(t.compositeFilter.filters.map(r=>vN(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return J()}})(t.compositeFilter.op))})(n):J()}function EB(n){return cB[n]}function IB(n){return uB[n]}function wB(n){return lB[n]}function Ga(n){return{fieldPath:n.canonicalString()}}function Wa(n){return pn.fromServerFormat(n.fieldPath)}function EN(n){return n instanceof dt?(function(t){if(t.op==="=="){if(vR(t.value))return{unaryFilter:{field:Ga(t.field),op:"IS_NAN"}};if(_R(t.value))return{unaryFilter:{field:Ga(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(vR(t.value))return{unaryFilter:{field:Ga(t.field),op:"IS_NOT_NAN"}};if(_R(t.value))return{unaryFilter:{field:Ga(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ga(t.field),op:IB(t.op),value:t.value}}})(n):n instanceof Lr?(function(t){let r=t.getFilters().map(i=>EN(i));return r.length===1?r[0]:{compositeFilter:{op:wB(t.op),filters:r}}})(n):J()}function TB(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function IN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var gd=class n{constructor(e,t,r,i,s=ae.min(),a=ae.min(),c=xt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var QI=class{constructor(e){this.ct=e}};function bB(n){let e=_B({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?OI(e,e.limit,"L"):e}var Jp=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(je(e.integerValue));else if("doubleValue"in e){let r=je(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),ld(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Ci(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(cs(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?KR(e)?this.dt(t,Number.MAX_SAFE_INTEGER):WR(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):J()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let a="value",c=((i=(r=s[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(je(c)),this.Vt(a,t),this.Tt(s[a],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Y.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Jp.vt=new Jp;var YI=class{constructor(){this.un=new JI}addToCollectionParentIndex(e,t){return this.un.add(t),k.resolve()}getCollectionParents(e,t){return k.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return k.resolve()}deleteFieldIndex(e,t){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,t){return k.resolve()}getDocumentsMatchingTarget(e,t){return k.resolve(null)}getIndexType(e,t){return k.resolve(0)}getFieldIndexes(e,t){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,t){return k.resolve(bo.min())}getMinOffsetFromCollectionGroup(e,t){return k.resolve(bo.min())}updateCollectionGroup(e,t,r){return k.resolve()}updateIndexEntries(e,t){return k.resolve()}},JI=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Mt(ze.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mt(ze.comparator)).toArray()}};var ase=new Uint8Array(0);var Mr=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Mr.DEFAULT_COLLECTION_PERCENTILE=10,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mr.DEFAULT=new Mr(41943040,Mr.DEFAULT_COLLECTION_PERCENTILE,Mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mr.DISABLED=new Mr(-1,0,0);var md=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var XI=class{constructor(){this.changes=new us(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?k.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var ZI=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var ew=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ud(r.mutation,i,Dn.empty(),Tt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=pe()){let i=Io();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=sd();return s.forEach((c,l)=>{a=a.insert(c,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let r=Io();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,pe()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,c)=>{t.set(a,c)})})}computeViews(e,t,r,i){let s=Ai(),a=cd(),c=(function(){return cd()})();return t.forEach((l,h)=>{let p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof Ur)?s=s.insert(h.key,h):p!==void 0?(a.set(h.key,p.mutation.getFieldMask()),ud(p.mutation,h,p.mutation.getFieldMask(),Tt.now())):a.set(h.key,Dn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((h,p)=>a.set(h,p)),t.forEach((h,p)=>{var _;return c.set(h,new ZI(p,(_=a.get(h))!==null&&_!==void 0?_:null))}),c))}recalculateAndSaveOverlays(e,t){let r=cd(),i=new Ge((a,c)=>a-c),s=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let c of a)c.keys().forEach(l=>{let h=t.get(l);if(h===null)return;let p=r.get(l)||Dn.empty();p=c.applyToLocalView(h,p),r.set(l,p);let _=(i.get(c.batchId)||pe()).add(l);i=i.insert(c.batchId,_)})}).next(()=>{let a=[],c=i.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),h=l.key,p=l.value,_=oN();p.forEach(w=>{if(!s.has(w)){let C=hN(t.get(w),r.get(w));C!==null&&_.set(w,C),s=s.add(w)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,_))}return k.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(a){return Y.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Hj(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):k.resolve(Io()),c=-1,l=s;return a.next(h=>k.forEach(h,(p,_)=>(c<_.largestBatchId&&(c=_.largestBatchId),s.get(p)?k.resolve():this.remoteDocumentCache.getEntry(e,p).next(w=>{l=l.insert(p,w)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,l,h,pe())).next(p=>({batchId:c,changes:sN(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Y(t)).next(r=>{let i=sd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,a=sd();return this.indexManager.getCollectionParents(e,s).next(c=>k.forEach(c,l=>{let h=(function(_,w){return new ic(w,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((_,w)=>{a=a.insert(_,w)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(a=>{s.forEach((l,h)=>{let p=h.getKey();a.get(p)===null&&(a=a.insert(p,fr.newInvalidDocument(p)))});let c=sd();return a.forEach((l,h)=>{let p=s.get(l);p!==void 0&&ud(p.mutation,h,Dn.empty(),Tt.now()),mg(t,h)&&(c=c.insert(l,h))}),c})}};var tw=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return k.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Fr(i.createTime)}})(t)),k.resolve()}getNamedQuery(e,t){return k.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(i){return{name:i.name,query:bB(i.bundledQuery),readTime:Fr(i.readTime)}})(t)),k.resolve()}};var nw=class{constructor(){this.overlays=new Ge(Y.comparator),this.Ir=new Map}getOverlay(e,t){return k.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Io();return k.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),k.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),k.resolve()}getOverlaysForCollection(e,t,r){let i=Io(),s=t.length+1,a=new Y(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){let l=c.getNext().value,h=l.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return k.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ge((h,p)=>h-p),a=this.overlays.getIterator();for(;a.hasNext();){let h=a.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=Io(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}let c=Io(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,p)=>c.set(h,p)),!(c.size()>=i)););return k.resolve(c)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new jI(t,r));let s=this.Ir.get(t);s===void 0&&(s=pe(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var rw=class{constructor(){this.sessionToken=xt.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,k.resolve()}};var yd=class{constructor(){this.Tr=new Mt(tt.Er),this.dr=new Mt(tt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new tt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new tt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new Y(new ze([])),r=new tt(t,e),i=new tt(t,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new Y(new ze([])),r=new tt(t,e),i=new tt(t,e+1),s=pe();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){let t=new tt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},tt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Y.comparator(e.key,t.key)||De(e.wr,t.wr)}static Ar(e,t){return De(e.wr,t.wr)||Y.comparator(e.key,t.key)}};var iw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Mt(tt.Er)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new LI(s,t,r,i);this.mutationQueue.push(a);for(let c of i)this.br=this.br.add(new tt(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return k.resolve(a)}lookupMutationBatch(e,t){return k.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return k.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new tt(t,0),i=new tt(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{let c=this.Dr(a.wr);s.push(c)}),k.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mt(De);return t.forEach(i=>{let s=new tt(i,0),a=new tt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],c=>{r=r.add(c.wr)})}),k.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;Y.isDocumentKey(s)||(s=s.child(""));let a=new tt(new Y(s),0),c=new Mt(De);return this.br.forEachWhile(l=>{let h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(c=c.add(l.wr)),!0)},a),k.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Oe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return k.forEach(t.mutations,i=>{let s=new tt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new tt(t,0),i=this.br.firstAfterOrEqual(r);return k.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var sw=class{constructor(e){this.Mr=e,this.docs=(function(){return new Ge(Y.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return k.resolve(r?r.document.mutableCopy():fr.newInvalidDocument(t))}getEntries(e,t){let r=Ai();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():fr.newInvalidDocument(i))}),k.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ai(),a=t.path,c=new Y(a.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:h,value:{document:p}}=l.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||Mj(Pj(p),r)<=0||(i.has(p.key)||mg(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return k.resolve(s)}getAllFromCollectionGroup(e,t,r,i){J()}Or(e,t){return k.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ow(this)}getSize(e){return k.resolve(this.size)}},ow=class extends XI{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),k.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var aw=class{constructor(e){this.persistence=e,this.Nr=new us(t=>Yw(t),Jw),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new yd,this.targetCount=0,this.kr=md.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),k.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new md(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,k.resolve()}updateTargetData(e,t){return this.Kn(t),k.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),k.waitFor(s).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return k.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),k.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),k.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),k.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return k.resolve(r)}containsKey(e,t){return k.resolve(this.Br.containsKey(t))}};var cw=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new zR(0),this.Kr=!1,this.Kr=!0,this.$r=new rw,this.referenceDelegate=e(this),this.Ur=new aw(this),this.indexManager=new YI,this.remoteDocumentCache=(function(i){return new sw(i)})(r=>this.referenceDelegate.Wr(r)),this.serializer=new QI(t),this.Gr=new tw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new iw(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){B("MemoryPersistence","Starting transaction:",e);let i=new uw(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return k.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},uw=class extends II{constructor(e){super(),this.currentSequenceNumber=e}},lw=class n{constructor(e){this.persistence=e,this.Jr=new yd,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw J()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),k.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),k.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Xr,r=>{let i=Y.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,ae.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return k.or([()=>k.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var dw=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=pe(),i=pe();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var hw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var fw=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return JS()?8:kj(YS())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;let a=new hw;return this.Xi(e,t,a).next(c=>{if(s.result=c,this.zi)return this.es(e,t,a,c.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(id()<=be.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",za(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),k.resolve()):(id()<=be.DEBUG&&B("QueryEngine","Query:",za(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(id()<=be.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",za(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Or(t))):k.resolve())}Yi(e,t){if(TR(t))return k.resolve(null);let r=Or(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=OI(t,null,"F"),r=Or(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let a=pe(...s);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(l=>{let h=this.ts(t,c);return this.ns(t,h,a,l.readTime)?this.Yi(e,OI(t,null,"F")):this.rs(e,h,t,l)}))})))}Zi(e,t,r,i){return TR(t)||i.isEqual(ae.min())?k.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let a=this.ts(t,s);return this.ns(t,a,r,i)?k.resolve(null):(id()<=be.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),za(t)),this.rs(e,a,t,Nj(i,-1)).next(c=>c))})}ts(e,t){let r=new Mt(rN(e));return t.forEach((i,s)=>{mg(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return id()<=be.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",za(t)),this.Ji.getDocumentsMatchingQuery(e,t,bo.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}};var pw=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ge(De),this._s=new us(s=>Yw(s),Jw),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ew(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function DB(n,e,t,r){return new pw(n,e,t,r)}async function wN(n,e){let t=se(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let a=[],c=[],l=pe();for(let h of i){a.push(h.batchId);for(let p of h.mutations)l=l.add(p.key)}for(let h of s){c.push(h.batchId);for(let p of h.mutations)l=l.add(p.key)}return t.localDocuments.getDocuments(r,l).next(h=>({hs:h,removedBatchIds:a,addedBatchIds:c}))})})}function CB(n,e){let t=se(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return(function(c,l,h,p){let _=h.batch,w=_.keys(),C=k.resolve();return w.forEach(A=>{C=C.next(()=>p.getEntry(l,A)).next(N=>{let R=h.docVersions.get(A);Oe(R!==null),N.version.compareTo(R)<0&&(_.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),p.addEntry(N)))})}),C.next(()=>c.mutationQueue.removeMutationBatch(l,_))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let l=pe();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(l=l.add(c.batch.mutations[h].key));return l})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function TN(n){let e=se(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function AB(n,e){let t=se(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let a=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let c=[];e.targetChanges.forEach((p,_)=>{let w=i.get(_);if(!w)return;c.push(t.Ur.removeMatchingKeys(s,p.removedDocuments,_).next(()=>t.Ur.addMatchingKeys(s,p.addedDocuments,_)));let C=w.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(_)!==null?C=C.withResumeToken(xt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):p.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(p.resumeToken,r)),i=i.insert(_,C),(function(N,R,x){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0})(w,C,p)&&c.push(t.Ur.updateTargetData(s,C))});let l=Ai(),h=pe();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,p))}),c.push(SB(s,a,e.documentUpdates).next(p=>{l=p.Ps,h=p.Is})),!r.isEqual(ae.min())){let p=t.Ur.getLastRemoteSnapshotVersion(s).next(_=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(p)}return k.waitFor(c).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,h)).next(()=>l)}).then(s=>(t.os=i,s))}function SB(n,e,t){let r=pe(),i=pe();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=Ai();return t.forEach((c,l)=>{let h=s.get(c);l.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(c)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(c,l.readTime),a=a.insert(c,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(l),a=a.insert(c,l)):B("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",l.version)}),{Ps:a,Is:i}})}function RB(n,e){let t=se(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function NB(n,e){let t=se(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,k.resolve(i)):t.Ur.allocateTargetId(r).next(a=>(i=new gd(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function gw(n,e,t){let r=se(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Td(a))throw a;B("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function kR(n,e,t){let r=se(n),i=ae.min(),s=pe();return r.persistence.runTransaction("Execute query","readwrite",a=>(function(l,h,p){let _=se(l),w=_._s.get(p);return w!==void 0?k.resolve(_.os.get(w)):_.Ur.getTargetData(h,p)})(r,a,Or(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,t?i:ae.min(),t?s:pe())).next(c=>(PB(r,Gj(e),c),{documents:c,Ts:s})))}function PB(n,e,t){let r=n.us.get(e)||ae.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var Xp=class{constructor(){this.activeTargetIds=Xj()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var mw=class{constructor(){this.so=new Xp,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Xp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var yw=class{_o(e){}shutdown(){}};var Zp=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){B("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){B("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Fp=null;function lI(){return Fp===null?Fp=(function(){return 268435456+Math.round(2147483648*Math.random())})():Fp++,"0x"+Fp.toString(16)}var MB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var _w=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Pt="WebChannelConnection",vw=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,a){let c=lI(),l=this.xo(t,r.toUriEncodedString());B("RestConnection",`Sending RPC '${t}' ${c}:`,l,i);let h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,a),this.No(t,l,h,i).then(p=>(B("RestConnection",`Received RPC '${t}' ${c}: `,p),p),p=>{throw Xa("RestConnection",`RPC '${t}' ${c} failed with error: `,p,"url: ",l,"request:",i),p})}Lo(t,r,i,s,a,c){return this.Mo(t,r,i,s,a)}Oo(t,r,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+hc})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>t[a]=s),i&&i.headers.forEach((s,a)=>t[a]=s)}xo(t,r){let i=MB[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=lI();return new Promise((a,c)=>{let l=new iI;l.setWithCredentials(!0),l.listenOnce(sI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case rd.NO_ERROR:let p=l.getResponseJson();B(Pt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case rd.TIMEOUT:B(Pt,`RPC '${e}' ${s} timed out`),c(new z(P.DEADLINE_EXCEEDED,"Request time out"));break;case rd.HTTP_ERROR:let _=l.getStatus();if(B(Pt,`RPC '${e}' ${s} failed with status:`,_,"response text:",l.getResponseText()),_>0){let w=l.getResponseJson();Array.isArray(w)&&(w=w[0]);let C=w?.error;if(C&&C.status&&C.message){let A=(function(R){let x=R.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(x)>=0?x:P.UNKNOWN})(C.status);c(new z(A,C.message))}else c(new z(P.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new z(P.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{B(Pt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);B(Pt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}Bo(e,t,r){let i=lI(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=cI(),c=aI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let p=s.join("");B(Pt,`Creating RPC '${e}' stream ${i}: ${p}`,l);let _=a.createWebChannel(p,l),w=!1,C=!1,A=new _w({Io:R=>{C?B(Pt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(w||(B(Pt,`Opening RPC '${e}' stream ${i} transport.`),_.open(),w=!0),B(Pt,`RPC '${e}' stream ${i} sending:`,R),_.send(R))},To:()=>_.close()}),N=(R,x,j)=>{R.listen(x,U=>{try{j(U)}catch(K){setTimeout(()=>{throw K},0)}})};return N(_,Ha.EventType.OPEN,()=>{C||(B(Pt,`RPC '${e}' stream ${i} transport opened.`),A.yo())}),N(_,Ha.EventType.CLOSE,()=>{C||(C=!0,B(Pt,`RPC '${e}' stream ${i} transport closed`),A.So())}),N(_,Ha.EventType.ERROR,R=>{C||(C=!0,Xa(Pt,`RPC '${e}' stream ${i} transport errored:`,R),A.So(new z(P.UNAVAILABLE,"The operation could not be completed")))}),N(_,Ha.EventType.MESSAGE,R=>{var x;if(!C){let j=R.data[0];Oe(!!j);let U=j,K=U.error||((x=U[0])===null||x===void 0?void 0:x.error);if(K){B(Pt,`RPC '${e}' stream ${i} received error:`,K);let Ue=K.status,te=(function(y){let v=et[y];if(v!==void 0)return pN(v)})(Ue),I=K.message;te===void 0&&(te=P.INTERNAL,I="Unknown error status: "+Ue+" with message "+K.message),C=!0,A.So(new z(te,I)),_.close()}else B(Pt,`RPC '${e}' stream ${i} received:`,j),A.bo(j)}}),N(c,oI.STAT_EVENT,R=>{R.stat===kp.PROXY?B(Pt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===kp.NOPROXY&&B(Pt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}};function dI(){return typeof document<"u"?document:null}function yg(n){return new HI(n,!0)}var eg=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var tg=class{constructor(e,t,r,i,s,a,c,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new eg(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===P.RESOURCE_EXHAUSTED?(Di(t.toString()),Di("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new z(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return B("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(B("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Ew=class extends tg{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=fB(this.serializer,e),r=(function(s){if(!("targetChange"in s))return ae.min();let a=s.targetChange;return a.targetIds&&a.targetIds.length?ae.min():a.readTime?Fr(a.readTime):ae.min()})(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=KI(this.serializer),t.addTarget=(function(s,a){let c,l=a.target;if(c=kI(l)?{documents:mB(s,l)}:{query:yB(s,l)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=gN(s,a.resumeToken);let h=zI(s,a.expectedCount);h!==null&&(c.expectedCount=h)}else if(a.snapshotVersion.compareTo(ae.min())>0){c.readTime=Yp(s,a.snapshotVersion.toTimestamp());let h=zI(s,a.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);let r=vB(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=KI(this.serializer),t.removeTarget=e,this.a_(t)}},Iw=class extends tg{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=gB(e.writeResults,e.commitTime),r=Fr(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=KI(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>pB(this.serializer,r))};this.a_(t)}};var ww=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new z(P.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,GI(t,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(P.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,GI(t,r),i,a,c,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new z(P.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Tw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Di(t),this.D_=!1):B("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var bw=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{Mo(this)&&(B("RemoteStore","Restarting streams for network reachability change."),await(async function(l){let h=se(l);h.L_.add(4),await bd(h),h.q_.set("Unknown"),h.L_.delete(4),await _g(h)})(this))})}),this.q_=new Tw(r,i)}};async function _g(n){if(Mo(n))for(let e of n.B_)await e(!0)}async function bd(n){for(let e of n.B_)await e(!1)}function bN(n,e){let t=se(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),rT(t)?nT(t):fc(t).r_()&&tT(t,e))}function eT(n,e){let t=se(n),r=fc(t);t.N_.delete(e),r.r_()&&DN(t,e),t.N_.size===0&&(r.r_()?r.o_():Mo(t)&&t.q_.set("Unknown"))}function tT(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fc(n).A_(e)}function DN(n,e){n.Q_.xe(e),fc(n).R_(e)}function nT(n){n.Q_=new qI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),fc(n).start(),n.q_.v_()}function rT(n){return Mo(n)&&!fc(n).n_()&&n.N_.size>0}function Mo(n){return se(n).L_.size===0}function CN(n){n.Q_=void 0}async function xB(n){n.q_.set("Online")}async function kB(n){n.N_.forEach((e,t)=>{tT(n,e)})}async function OB(n,e){CN(n),rT(n)?(n.q_.M_(e),nT(n)):n.q_.set("Unknown")}async function FB(n,e,t){if(n.q_.set("Online"),e instanceof Kp&&e.state===2&&e.cause)try{await(async function(i,s){let a=s.cause;for(let c of s.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,a),i.N_.delete(c),i.Q_.removeTarget(c))})(n,e)}catch(r){B("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ng(n,r)}else if(e instanceof Ya?n.Q_.Ke(e):e instanceof Wp?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ae.min()))try{let r=await TN(n.localStore);t.compareTo(r)>=0&&await(function(s,a){let c=s.Q_.rt(a);return c.targetChanges.forEach((l,h)=>{if(l.resumeToken.approximateByteSize()>0){let p=s.N_.get(h);p&&s.N_.set(h,p.withResumeToken(l.resumeToken,a))}}),c.targetMismatches.forEach((l,h)=>{let p=s.N_.get(l);if(!p)return;s.N_.set(l,p.withResumeToken(xt.EMPTY_BYTE_STRING,p.snapshotVersion)),DN(s,l);let _=new gd(p.target,l,h,p.sequenceNumber);tT(s,_)}),s.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){B("RemoteStore","Failed to raise snapshot:",r),await ng(n,r)}}async function ng(n,e,t){if(!Td(e))throw e;n.L_.add(1),await bd(n),n.q_.set("Offline"),t||(t=()=>TN(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{B("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await _g(n)})}function AN(n,e){return e().catch(t=>ng(n,t,e))}async function vg(n){let e=se(n),t=ls(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;VB(e);)try{let i=await RB(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,LB(e,i)}catch(i){await ng(e,i)}SN(e)&&RN(e)}function VB(n){return Mo(n)&&n.O_.length<10}function LB(n,e){n.O_.push(e);let t=ls(n);t.r_()&&t.V_&&t.m_(e.mutations)}function SN(n){return Mo(n)&&!ls(n).n_()&&n.O_.length>0}function RN(n){ls(n).start()}async function UB(n){ls(n).p_()}async function jB(n){let e=ls(n);for(let t of n.O_)e.m_(t.mutations)}async function BB(n,e,t){let r=n.O_.shift(),i=UI.from(r,e,t);await AN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await vg(n)}async function $B(n,e){e&&ls(n).V_&&await(async function(r,i){if((function(a){return sB(a)&&a!==P.ABORTED})(i.code)){let s=r.O_.shift();ls(r).s_(),await AN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await vg(r)}})(n,e),SN(n)&&RN(n)}async function OR(n,e){let t=se(n);t.asyncQueue.verifyOperationInProgress(),B("RemoteStore","RemoteStore received new credentials");let r=Mo(t);t.L_.add(3),await bd(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await _g(t)}async function qB(n,e){let t=se(n);e?(t.L_.delete(2),await _g(t)):e||(t.L_.add(2),await bd(t),t.q_.set("Unknown"))}function fc(n){return n.K_||(n.K_=(function(t,r,i){let s=se(t);return s.w_(),new Ew(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Eo:xB.bind(null,n),Ro:kB.bind(null,n),mo:OB.bind(null,n),d_:FB.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),rT(n)?nT(n):n.q_.set("Unknown")):(await n.K_.stop(),CN(n))})),n.K_}function ls(n){return n.U_||(n.U_=(function(t,r,i){let s=se(t);return s.w_(),new Iw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:UB.bind(null,n),mo:$B.bind(null,n),f_:jB.bind(null,n),g_:BB.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await vg(n)):(await n.U_.stop(),n.O_.length>0&&(B("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}var Dw=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let a=Date.now()+r,c=new n(e,t,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function iT(n,e){if(Di("AsyncQueue",`${e}: ${n}`),Td(n))return new z(P.UNAVAILABLE,`${e}: ${n}`);throw n}var rg=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Y.comparator(t.key,r.key):(t,r)=>Y.comparator(t.key,r.key),this.keyedMap=sd(),this.sortedSet=new Ge(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var ig=class{constructor(){this.W_=new Ge(Y.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):J():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},uc=class n{constructor(e,t,r,i,s,a,c,l,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,s){let a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new n(e,t,rg.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Cw=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Aw=class{constructor(){this.queries=FR(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=se(t),s=i.queries;i.queries=FR(),s.forEach((a,c)=>{for(let l of c.j_)l.onError(r)})})(this,new z(P.ABORTED,"Firestore shutting down"))}};function FR(){return new us(n=>nN(n),gg)}async function HB(n,e){let t=se(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Cw,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await t.onListen(i,!0);break;case 1:s.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){let c=iT(a,`Initialization of query '${za(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&sT(t)}async function zB(n,e){let t=se(n),r=e.query,i=3,s=t.queries.get(r);if(s){let a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function GB(n,e){let t=se(n),r=!1;for(let i of e){let s=i.query,a=t.queries.get(s);if(a){for(let c of a.j_)c.X_(i)&&(r=!0);a.z_=i}}r&&sT(t)}function WB(n,e,t){let r=se(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function sT(n){n.Y_.forEach(e=>{e.next()})}var Sw,VR;(VR=Sw||(Sw={})).ea="default",VR.Cache="cache";var Rw=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new uc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=uc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Sw.Cache}};var sg=class{constructor(e){this.key=e}},og=class{constructor(e){this.key=e}},Nw=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=pe(),this.mutatedKeys=pe(),this.Aa=rN(e),this.Ra=new rg(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new ig,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,a=i,c=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,_)=>{let w=i.get(p),C=mg(this.query,_)?_:null,A=!!w&&this.mutatedKeys.has(w.key),N=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations),R=!1;w&&C?w.data.isEqual(C.data)?A!==N&&(r.track({type:3,doc:C}),R=!0):this.ga(w,C)||(r.track({type:2,doc:C}),R=!0,(l&&this.Aa(C,l)>0||h&&this.Aa(C,h)<0)&&(c=!0)):!w&&C?(r.track({type:0,doc:C}),R=!0):w&&!C&&(r.track({type:1,doc:w}),R=!0,(l||h)&&(c=!0)),R&&(C?(a=a.add(C),s=N?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ra:a,fa:r,ns:c,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let a=e.fa.G_();a.sort((p,_)=>(function(C,A){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return N(C)-N(A)})(p.type,_.type)||this.Aa(p.doc,_.doc)),this.pa(r),i=i!=null&&i;let c=t&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,h=l!==this.Ea;return this.Ea=l,a.length!==0||h?{snapshot:new uc(this.query,e.Ra,s,a,e.mutatedKeys,l===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ig,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=pe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new og(r))}),this.da.forEach(r=>{e.has(r)||t.push(new sg(r))}),t}ba(e){this.Ta=e.Ts,this.da=pe();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return uc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Pw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Mw=class{constructor(e){this.key=e,this.va=!1}},xw=class{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new us(c=>nN(c),gg),this.Ma=new Map,this.xa=new Set,this.Oa=new Ge(Y.comparator),this.Na=new Map,this.La=new yd,this.Ba={},this.ka=new Map,this.qa=md.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};async function KB(n,e,t=!0){let r=ON(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await NN(r,e,t,!0),i}async function QB(n,e){let t=ON(n);await NN(t,e,!0,!1)}async function NN(n,e,t,r){let i=await NB(n.localStore,Or(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t),c;return r&&(c=await YB(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&bN(n.remoteStore,i),c}async function YB(n,e,t,r,i){n.Ka=(_,w,C)=>(async function(N,R,x,j){let U=R.view.ma(x);U.ns&&(U=await kR(N.localStore,R.query,!1).then(({documents:I})=>R.view.ma(I,U)));let K=j&&j.targetChanges.get(R.targetId),Ue=j&&j.targetMismatches.get(R.targetId)!=null,te=R.view.applyChanges(U,N.isPrimaryClient,K,Ue);return UR(N,R.targetId,te.wa),te.snapshot})(n,_,w,C);let s=await kR(n.localStore,e,!0),a=new Nw(e,s.Ts),c=a.ma(s.documents),l=pd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=a.applyChanges(c,n.isPrimaryClient,l);UR(n,t,h.wa);let p=new Pw(e,t,a);return n.Fa.set(e,p),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),h.snapshot}async function JB(n,e,t){let r=se(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!gg(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await gw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&eT(r.remoteStore,i.targetId),kw(r,i.targetId)}).catch(wd)):(kw(r,i.targetId),await gw(r.localStore,i.targetId,!0))}async function XB(n,e){let t=se(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),eT(t.remoteStore,r.targetId))}async function ZB(n,e,t){let r=o$(n);try{let i=await(function(a,c){let l=se(a),h=Tt.now(),p=c.reduce((C,A)=>C.add(A.key),pe()),_,w;return l.persistence.runTransaction("Locally write mutations","readwrite",C=>{let A=Ai(),N=pe();return l.cs.getEntries(C,p).next(R=>{A=R,A.forEach((x,j)=>{j.isValidDocument()||(N=N.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(C,A)).next(R=>{_=R;let x=[];for(let j of c){let U=iB(j,_.get(j.key).overlayedDocument);U!=null&&x.push(new Ur(j.key,U,QR(U.value.mapValue),bi.exists(!0)))}return l.mutationQueue.addMutationBatch(C,h,x,c)}).next(R=>{w=R;let x=R.applyToLocalDocumentSet(_,N);return l.documentOverlayCache.saveOverlays(C,R.batchId,x)})}).then(()=>({batchId:w.batchId,changes:sN(_)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,c,l){let h=a.Ba[a.currentUser.toKey()];h||(h=new Ge(De)),h=h.insert(c,l),a.Ba[a.currentUser.toKey()]=h})(r,i.batchId,t),await Dd(r,i.changes),await vg(r.remoteStore)}catch(i){let s=iT(i,"Failed to persist write");t.reject(s)}}async function PN(n,e){let t=se(n);try{let r=await AB(t.localStore,e);e.targetChanges.forEach((i,s)=>{let a=t.Na.get(s);a&&(Oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?Oe(a.va):i.removedDocuments.size>0&&(Oe(a.va),a.va=!1))}),await Dd(t,r,e)}catch(r){await wd(r)}}function LR(n,e,t){let r=se(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,a)=>{let c=a.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),(function(a,c){let l=se(a);l.onlineState=c;let h=!1;l.queries.forEach((p,_)=>{for(let w of _.j_)w.Z_(c)&&(h=!0)}),h&&sT(l)})(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function e$(n,e,t){let r=se(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let a=new Ge(Y.comparator);a=a.insert(s,fr.newNoDocument(s,ae.min()));let c=pe().add(s),l=new Gp(ae.min(),new Map,new Ge(De),a,c);await PN(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),oT(r)}else await gw(r.localStore,e,!1).then(()=>kw(r,e,t)).catch(wd)}async function t$(n,e){let t=se(n),r=e.batch.batchId;try{let i=await CB(t.localStore,e);xN(t,r,null),MN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Dd(t,i)}catch(i){await wd(i)}}async function n$(n,e,t){let r=se(n);try{let i=await(function(a,c){let l=se(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return l.mutationQueue.lookupMutationBatch(h,c).next(_=>(Oe(_!==null),p=_.keys(),l.mutationQueue.removeMutationBatch(h,_))).next(()=>l.mutationQueue.performConsistencyCheck(h)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(h,p,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>l.localDocuments.getDocuments(h,p))})})(r.localStore,e);xN(r,e,t),MN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Dd(r,i)}catch(i){await wd(i)}}function MN(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function xN(n,e,t){let r=se(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function kw(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||kN(n,r)})}function kN(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(eT(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),oT(n))}function UR(n,e,t){for(let r of t)r instanceof sg?(n.La.addReference(r.key,e),r$(n,r)):r instanceof og?(B("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||kN(n,r.key)):J()}function r$(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(B("SyncEngine","New document in limbo: "+t),n.xa.add(r),oT(n))}function oT(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new Y(ze.fromString(e)),r=n.qa.next();n.Na.set(r,new Mw(t)),n.Oa=n.Oa.insert(t,r),bN(n.remoteStore,new gd(Or(tN(t.path)),r,"TargetPurposeLimboResolution",zR.oe))}}async function Dd(n,e,t){let r=se(n),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,l)=>{a.push(r.Ka(l,e,t).then(h=>{var p;if((h||t)&&r.isPrimaryClient){let _=h?!h.fromCache:(p=t?.targetChanges.get(l.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(l.targetId,_?"current":"not-current")}if(h){i.push(h);let _=dw.Wi(l.targetId,h);s.push(_)}}))}),await Promise.all(a),r.Ca.d_(i),await(async function(l,h){let p=se(l);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>k.forEach(h,w=>k.forEach(w.$i,C=>p.persistence.referenceDelegate.addReference(_,w.targetId,C)).next(()=>k.forEach(w.Ui,C=>p.persistence.referenceDelegate.removeReference(_,w.targetId,C)))))}catch(_){if(!Td(_))throw _;B("LocalStore","Failed to update sequence numbers: "+_)}for(let _ of h){let w=_.targetId;if(!_.fromCache){let C=p.os.get(w),A=C.snapshotVersion,N=C.withLastLimboFreeSnapshotVersion(A);p.os=p.os.insert(w,N)}}})(r.localStore,s))}async function i$(n,e){let t=se(n);if(!t.currentUser.isEqual(e)){B("SyncEngine","User change. New user:",e.toKey());let r=await wN(t.localStore,e);t.currentUser=e,(function(s,a){s.ka.forEach(c=>{c.forEach(l=>{l.reject(new z(P.CANCELLED,a))})}),s.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Dd(t,r.hs)}}function s$(n,e){let t=se(n),r=t.Na.get(e);if(r&&r.va)return pe().add(r.key);{let i=pe(),s=t.Ma.get(e);if(!s)return i;for(let a of s){let c=t.Fa.get(a);i=i.unionWith(c.view.Va)}return i}}function ON(n){let e=se(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=PN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=s$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=e$.bind(null,e),e.Ca.d_=GB.bind(null,e.eventManager),e.Ca.$a=WB.bind(null,e.eventManager),e}function o$(n){let e=se(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=t$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=n$.bind(null,e),e}var jR=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=yg(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,r){return null}Ha(t,r){return null}za(t){return DB(this.persistence,new fw,t.initialUser,this.serializer)}Ga(t){return new cw(lw.Zr,this.serializer)}Wa(t){return new mw}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})();var a$=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>LR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=i$.bind(null,this.syncEngine),await qB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new Aw})()}createDatastore(t){let r=yg(t.databaseInfo.databaseId),i=(function(a){return new vw(a)})(t.databaseInfo);return(function(a,c,l,h){return new ww(a,c,l,h)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,a,c,l){return new bw(i,s,a,c,l)})(this.localStore,this.datastore,t.asyncQueue,r=>LR(this.syncEngine,r,0),(function(){return Zp.D()?new Zp:new yw})())}createSyncEngine(t,r){return(function(s,a,c,l,h,p,_){let w=new xw(s,a,c,l,h,p);return _&&(w.Qa=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await(async function(s){let a=se(s);B("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await bd(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var Ow=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Di("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Fw=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=gt.UNAUTHENTICATED,this.clientId=jp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{B("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(B("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=iT(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function hI(n,e){n.asyncQueue.verifyOperationInProgress(),B("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await wN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function BR(n,e){n.asyncQueue.verifyOperationInProgress();let t=await c$(n);B("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>OR(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>OR(e.remoteStore,i)),n._onlineComponents=e}async function c$(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){B("FirestoreClient","Using user provided OfflineComponentProvider");try{await hI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Xa("Error using user provided cache. Falling back to memory cache: "+t),await hI(n,new jR)}}else B("FirestoreClient","Using default OfflineComponentProvider"),await hI(n,new jR);return n._offlineComponents}async function FN(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(B("FirestoreClient","Using user provided OnlineComponentProvider"),await BR(n,n._uninitializedComponentsProvider._online)):(B("FirestoreClient","Using default OnlineComponentProvider"),await BR(n,new a$))),n._onlineComponents}function u$(n){return FN(n).then(e=>e.syncEngine)}async function l$(n){let e=await FN(n),t=e.eventManager;return t.onListen=KB.bind(null,e.syncEngine),t.onUnlisten=JB.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=QB.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=XB.bind(null,e.syncEngine),t}function d$(n,e,t={}){let r=new xr;return n.asyncQueue.enqueueAndForget(async()=>(function(s,a,c,l,h){let p=new Ow({next:w=>{p.Za(),a.enqueueAndForget(()=>zB(s,_)),w.fromCache&&l.source==="server"?h.reject(new z(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(w)},error:w=>h.reject(w)}),_=new Rw(c,p,{includeMetadataChanges:!0,_a:!0});return HB(s,_)})(await l$(n),n.asyncQueue,e,t,r)),r.promise}function VN(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var $R=new Map;function LN(n,e,t){if(!t)throw new z(P.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function h$(n,e,t,r){if(e===!0&&r===!0)throw new z(P.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qR(n){if(!Y.isDocumentKey(n))throw new z(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function HR(n){if(Y.isDocumentKey(n))throw new z(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function aT(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":J()}function Ro(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new z(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=aT(n);throw new z(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var ag=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new z(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new z(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}h$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new z(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new z(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new z(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},lc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ag({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ag(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new fI;switch(r.type){case"firstParty":return new yI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=$R.get(t);r&&(B("ComponentProvider","Removing Datastore"),$R.delete(t),r.terminate())})(this),Promise.resolve()}};function f$(n,e,t,r={}){var i;let s=(n=Ro(n,lc))._getSettings(),a=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&Xa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let c,l;if(typeof r.mockUserToken=="string")c=r.mockUserToken,l=gt.MOCK_USER;else{c=Dp(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new z(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new gt(h)}n._authCredentials=new pI(new Up(c,l))}}var cg=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Cn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new as(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},as=class n extends cg{constructor(e,t,r){super(e,t,tN(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Cn(this.firestore,null,new Y(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function cT(n,e,...t){if(n=Yt(n),LN("collection","path",e),n instanceof lc){let r=ze.fromString(e,...t);return HR(r),new as(n,null,r)}{if(!(n instanceof Cn||n instanceof as))throw new z(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ze.fromString(e,...t));return HR(r),new as(n.firestore,null,r)}}function Eg(n,e,...t){if(n=Yt(n),arguments.length===1&&(e=jp.newId()),LN("doc","path",e),n instanceof lc){let r=ze.fromString(e,...t);return qR(r),new Cn(n,null,new Y(r))}{if(!(n instanceof Cn||n instanceof as))throw new z(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ze.fromString(e,...t));return qR(r),new Cn(n.firestore,n instanceof as?n.converter:null,new Y(r))}}var ug=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new eg(this,"async_queue_retry"),this.Vu=()=>{let r=dI();r&&B("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=dI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=dI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new xr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Td(e))throw e;B("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=(function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c})(r);throw Di("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=Dw.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&J()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var No=class extends lc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ug,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new ug(e),this._firestoreClient=void 0,await e}}};function UN(n,e){let t=typeof n=="object"?n:Mp(),r=typeof n=="string"?n:e||"(default)",i=Np(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=bp("firestore");s&&f$(i,...s)}return i}function jN(n){if(n._terminated)throw new z(P.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||p$(n),n._firestoreClient}function p$(n){var e,t,r;let i=n._freezeSettings(),s=(function(c,l,h,p){return new wI(c,l,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,VN(p.experimentalLongPollingOptions),p.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Fw(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(c){let l=c?._online.build();return{_offline:c?._offline.build(l),_online:l}})(n._componentsProvider))}var _d=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(xt.fromBase64String(e))}catch(t){throw new z(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var dc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new z(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var vd=class{constructor(e){this._methodName=e}};var Ed=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new z(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new z(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}};var Id=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}};var g$=/^__.*__$/,Vw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ur(e,this.data,this.fieldMask,t,this.fieldTransforms):new So(e,this.data,t,this.fieldTransforms)}},lg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ur(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function BN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}var Lw=class n{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return hg(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(BN(this.Cu)&&g$.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Uw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||yg(e)}Qu(e,t,r,i=!1){return new Lw({Cu:e,methodName:t,qu:r,path:pn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function $N(n){let e=n._freezeSettings(),t=yg(n._databaseId);return new Uw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function m$(n,e,t,r,i,s={}){let a=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);uT("Data must be an object, but it was:",a,r);let c=qN(r,a),l,h;if(s.merge)l=new Dn(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){let p=[];for(let _ of s.mergeFields){let w=jw(e,_,t);if(!a.contains(w))throw new z(P.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);zN(p,w)||p.push(w)}l=new Dn(p),h=a.fieldTransforms.filter(_=>l.covers(_.field))}else l=null,h=a.fieldTransforms;return new Vw(new fn(c),l,h)}var dg=class n extends vd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function y$(n,e,t,r){let i=n.Qu(1,e,t);uT("Data must be an object, but it was:",i,r);let s=[],a=fn.empty();Po(r,(l,h)=>{let p=lT(e,l,t);h=Yt(h);let _=i.Nu(p);if(h instanceof dg)s.push(p);else{let w=Ig(h,_);w!=null&&(s.push(p),a.set(p,w))}});let c=new Dn(s);return new lg(a,c,i.fieldTransforms)}function _$(n,e,t,r,i,s){let a=n.Qu(1,e,t),c=[jw(e,r,t)],l=[i];if(s.length%2!=0)throw new z(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<s.length;w+=2)c.push(jw(e,s[w])),l.push(s[w+1]);let h=[],p=fn.empty();for(let w=c.length-1;w>=0;--w)if(!zN(h,c[w])){let C=c[w],A=l[w];A=Yt(A);let N=a.Nu(C);if(A instanceof dg)h.push(C);else{let R=Ig(A,N);R!=null&&(h.push(C),p.set(C,R))}}let _=new Dn(h);return new lg(p,_,a.fieldTransforms)}function Ig(n,e){if(HN(n=Yt(n)))return uT("Unsupported field value:",e,n),qN(n,e);if(n instanceof vd)return(function(r,i){if(!BN(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,i){let s=[],a=0;for(let c of r){let l=Ig(c,i.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=Yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Zj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Tt.fromDate(r);return{timestampValue:Yp(i.serializer,s)}}if(r instanceof Tt){let s=new Tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yp(i.serializer,s)}}if(r instanceof Ed)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _d)return{bytesValue:gN(i.serializer,r._byteString)};if(r instanceof Cn){let s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Zw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Id)return(function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw c.Bu("VectorValues must only contain numeric values.");return Xw(c.serializer,l)})}}}}}})(r,i);throw i.Bu(`Unsupported field value: ${aT(r)}`)})(n,e)}function qN(n,e){let t={};return GR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Po(n,(r,i)=>{let s=Ig(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function HN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Tt||n instanceof Ed||n instanceof _d||n instanceof Cn||n instanceof vd||n instanceof Id)}function uT(n,e,t){if(!HN(t)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(t)){let r=aT(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function jw(n,e,t){if((e=Yt(e))instanceof dc)return e._internalPath;if(typeof e=="string")return lT(n,e);throw hg("Field path arguments must be of type string or ",n,!1,void 0,t)}var v$=new RegExp("[~\\*/\\[\\]]");function lT(n,e,t){if(e.search(v$)>=0)throw hg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new dc(...e.split("."))._internalPath}catch{throw hg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function hg(n,e,t,r,i){let s=r&&!r.isEmpty(),a=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new z(P.INVALID_ARGUMENT,c+n+l)}function zN(n,e){return n.some(t=>t.isEqual(e))}var fg=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Bw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(GN("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Bw=class extends fg{data(){return super.data()}};function GN(n,e){return typeof e=="string"?lT(n,e):e instanceof dc?e._internalPath:e._delegate._internalPath}function E$(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new z(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var $w=class{convertValue(e,t="none"){switch(Do(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw J()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Po(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>je(a.doubleValue));return new Id(s)}convertGeoPoint(e){return new Ed(je(e.latitude),je(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Kw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(dd(e));default:return null}}convertTimestamp(e){let t=Ci(e);return new Tt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ze.fromString(e);Oe(IN(r));let i=new Hp(r.get(1),r.get(3)),s=new Y(r.popFirst(5));return i.isEqual(t)||Di(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function I$(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Qa=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},qw=class extends fg{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ja(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(GN("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Ja=class extends qw{data(e={}){return super.data(e)}},Hw=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Qa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ja(this._firestore,this._userDataWriter,r.key,r,new Qa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new z(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{let l=new Ja(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Qa(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new Ja(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Qa(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),h=-1,p=-1;return c.type!==0&&(h=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),p=a.indexOf(c.doc.key)),{type:w$(c.type),doc:l,oldIndex:h,newIndex:p}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function w$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}var zw=class extends $w{constructor(e){super(),this.firestore=e}convertBytes(e){return new _d(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Cn(this.firestore,null,t)}};function WN(n){n=Ro(n,cg);let e=Ro(n.firestore,No),t=jN(e),r=new zw(e);return E$(n._query),d$(t,n._query).then(i=>new Hw(e,r,n,i))}function KN(n,e,t,...r){n=Ro(n,Cn);let i=Ro(n.firestore,No),s=$N(i),a;return a=typeof(e=Yt(e))=="string"||e instanceof dc?_$(s,"updateDoc",n._key,e,t,r):y$(s,"updateDoc",n._key,e),dT(i,[a.toMutation(n._key,bi.exists(!0))])}function QN(n){return dT(Ro(n.firestore,No),[new fd(n._key,bi.none())])}function YN(n,e){let t=Ro(n.firestore,No),r=Eg(n),i=I$(n.converter,e);return dT(t,[m$($N(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,bi.exists(!1))]).then(()=>r)}function dT(n,e){return(function(r,i){let s=new xr;return r.asyncQueue.enqueueAndForget(async()=>ZB(await u$(r),i,s)),s.promise})(jN(n),e)}(function(e,t=!0){(function(i){hc=i})(Pp),Eo(new dr("firestore",(r,{instanceIdentifier:i,options:s})=>{let a=r.getProvider("app").getImmediate(),c=new No(new gI(r.getProvider("auth-internal")),new vI(r.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new z(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hp(h.options.projectId,p)})(a,i),a);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),hr(pR,"4.7.3",e),hr(pR,"4.7.3","esm2017")})();var rP="firebasestorage.googleapis.com",iP="storageBucket",T$=120*1e3,b$=600*1e3;var We=class n extends lr{constructor(e,t,r=0){super(hT(e),`Firebase Storage: ${t} (${hT(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return hT(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Qe=(function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n})(Qe||{});function hT(n){return"storage/"+n}function _T(){let n="An unknown error occurred, please check the error payload for server response.";return new We(Qe.UNKNOWN,n)}function D$(n){return new We(Qe.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function C$(n){return new We(Qe.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function A$(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new We(Qe.UNAUTHENTICATED,n)}function S$(){return new We(Qe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function R$(n){return new We(Qe.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function N$(){return new We(Qe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function P$(){return new We(Qe.CANCELED,"User canceled the upload/download.")}function M$(n){return new We(Qe.INVALID_URL,"Invalid URL '"+n+"'.")}function x$(n){return new We(Qe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function k$(){return new We(Qe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+iP+"' property when initializing the app?")}function O$(){return new We(Qe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function F$(){return new We(Qe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function V$(n){return new We(Qe.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function fT(n){return new We(Qe.INVALID_ARGUMENT,n)}function sP(){return new We(Qe.APP_DELETED,"The Firebase app was deleted.")}function L$(n){return new We(Qe.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ad(n,e){return new We(Qe.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Cd(n){throw new We(Qe.INTERNAL_ERROR,"Internal error: "+n)}var pr=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw x$(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(K){K.path.charAt(K.path.length-1)==="/"&&(K.path_=K.path_.slice(0,-1))}let a="(/(.*))?$",c=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function h(K){K.path_=decodeURIComponent(K.path)}let p="v[A-Za-z0-9_]+",_=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",C=new RegExp(`^https?://${_}/${p}/b/${i}/o${w}`,"i"),A={bucket:1,path:3},N=t===rP?"(?:storage.googleapis.com|storage.cloud.google.com)":t,R="([^?#]*)",x=new RegExp(`^https?://${N}/${i}/${R}`,"i"),U=[{regex:c,indices:l,postModify:s},{regex:C,indices:A,postModify:h},{regex:x,indices:{bucket:1,path:2},postModify:h}];for(let K=0;K<U.length;K++){let Ue=U[K],te=Ue.regex.exec(e);if(te){let I=te[Ue.indices.bucket],g=te[Ue.indices.path];g||(g=""),r=new n(I,g),Ue.postModify(r);break}}if(r==null)throw M$(e);return r}},pT=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function U$(n,e,t){let r=1,i=null,s=null,a=!1,c=0;function l(){return c===2}let h=!1;function p(...R){h||(h=!0,e.apply(null,R))}function _(R){i=setTimeout(()=>{i=null,n(C,l())},R)}function w(){s&&clearTimeout(s)}function C(R,...x){if(h){w();return}if(R){w(),p.call(null,R,...x);return}if(l()||a){w(),p.call(null,R,...x);return}r<64&&(r*=2);let U;c===1?(c=2,U=0):U=(r+Math.random())*1e3,_(U)}let A=!1;function N(R){A||(A=!0,w(),!h&&(i!==null?(R||(c=2),clearTimeout(i),_(0)):R||(c=1)))}return _(0),s=setTimeout(()=>{a=!0,N(!0)},t),N}function j$(n){n(!1)}function B$(n){return n!==void 0}function $$(n){return typeof n=="object"&&!Array.isArray(n)}function vT(n){return typeof n=="string"||n instanceof String}function JN(n){return ET()&&n instanceof Blob}function ET(){return typeof Blob<"u"}function XN(n,e,t,r){if(r<e)throw fT(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw fT(`Invalid value for '${n}'. Expected ${t} or less.`)}function IT(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function oP(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var gc=(function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n})(gc||{});function q$(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var gT=class{constructor(e,t,r,i,s,a,c,l,h,p,_,w=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=l,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=_,this.retry=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,A)=>{this.resolve_=C,this.reject_=A,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new pc(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let a=c=>{let l=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,h)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;let c=s.getErrorCode()===gc.NO_ERROR,l=s.getStatus();if(!c||q$(l,this.additionalRetryCodes_)&&this.retry){let p=s.getErrorCode()===gc.ABORT;r(!1,new pc(!1,null,p));return}let h=this.successCodes_.indexOf(l)!==-1;r(!0,new pc(h,s))})},t=(r,i)=>{let s=this.resolve_,a=this.reject_,c=i.connection;if(i.wasSuccessCode)try{let l=this.callback_(c,c.getResponse());B$(l)?s(l):s()}catch(l){a(l)}else if(c!==null){let l=_T();l.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,l)):a(l)}else if(i.canceled){let l=this.appDelete_?sP():P$();a(l)}else{let l=N$();a(l)}};this.canceled_?t(!1,new pc(!1,null,!0)):this.backoffId_=U$(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&j$(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},pc=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function H$(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function z$(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function G$(n,e){e&&(n["X-Firebase-GMPID"]=e)}function W$(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function K$(n,e,t,r,i,s,a=!0){let c=oP(n.urlParams),l=n.url+c,h=Object.assign({},n.headers);return G$(h,e),H$(h,t),z$(h,s),W$(h,r),new gT(l,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a)}function Q$(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Y$(...n){let e=Q$();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(ET())return new Blob(n);throw new We(Qe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function J$(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function X$(n){if(typeof atob>"u")throw V$("base-64");return atob(n)}var jr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Sd=class{constructor(e,t){this.data=e,this.contentType=t||null}};function Z$(n,e){switch(n){case jr.RAW:return new Sd(aP(e));case jr.BASE64:case jr.BASE64URL:return new Sd(cP(n,e));case jr.DATA_URL:return new Sd(t4(e),n4(e))}throw _T()}function aP(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let s=r,a=n.charCodeAt(++t);r=65536|(s&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function e4(n){let e;try{e=decodeURIComponent(n)}catch{throw Ad(jr.DATA_URL,"Malformed data URL.")}return aP(e)}function cP(n,e){switch(n){case jr.BASE64:{let i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Ad(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case jr.BASE64URL:{let i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Ad(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=X$(e)}catch(i){throw i.message.includes("polyfill")?i:Ad(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var Tg=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw Ad(jr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=r4(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function t4(n){let e=new Tg(n);return e.base64?cP(jr.BASE64,e.rest):e4(e.rest)}function n4(n){return new Tg(n).contentType}function r4(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var bg=class n{constructor(e,t){let r=0,i="";JN(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(JN(this.data_)){let r=this.data_,i=J$(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(ET()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(Y$.apply(null,t))}else{let t=e.map(a=>vT(a)?Z$(jr.RAW,a).data:a.data_),r=0;t.forEach(a=>{r+=a.byteLength});let i=new Uint8Array(r),s=0;return t.forEach(a=>{for(let c=0;c<a.length;c++)i[s++]=a[c]}),new n(i,!0)}}uploadData(){return this.data_}};function uP(n){let e;try{e=JSON.parse(n)}catch{return null}return $$(e)?e:null}function i4(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function s4(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function lP(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function o4(n,e){return e}var bt=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||o4}},wg=null;function a4(n){return!vT(n)||n.length<2?n:lP(n)}function dP(){if(wg)return wg;let n=[];n.push(new bt("bucket")),n.push(new bt("generation")),n.push(new bt("metageneration")),n.push(new bt("name","fullPath",!0));function e(s,a){return a4(a)}let t=new bt("name");t.xform=e,n.push(t);function r(s,a){return a!==void 0?Number(a):a}let i=new bt("size");return i.xform=r,n.push(i),n.push(new bt("timeCreated")),n.push(new bt("updated")),n.push(new bt("md5Hash",null,!0)),n.push(new bt("cacheControl",null,!0)),n.push(new bt("contentDisposition",null,!0)),n.push(new bt("contentEncoding",null,!0)),n.push(new bt("contentLanguage",null,!0)),n.push(new bt("contentType",null,!0)),n.push(new bt("metadata","customMetadata",!0)),wg=n,wg}function c4(n,e){function t(){let r=n.bucket,i=n.fullPath,s=new pr(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function u4(n,e,t){let r={};r.type="file";let i=t.length;for(let s=0;s<i;s++){let a=t[s];r[a.local]=a.xform(r,e[a.server])}return c4(r,n),r}function hP(n,e,t){let r=uP(e);return r===null?null:u4(n,r,t)}function l4(n,e,t,r){let i=uP(e);if(i===null||!vT(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let a=encodeURIComponent;return s.split(",").map(h=>{let p=n.bucket,_=n.fullPath,w="/b/"+a(p)+"/o/"+a(_),C=IT(w,t,r),A=oP({alt:"media",token:h});return C+A})[0]}function d4(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}var Dg=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function fP(n){if(!n)throw _T()}function h4(n,e){function t(r,i){let s=hP(n,i,e);return fP(s!==null),s}return t}function f4(n,e){function t(r,i){let s=hP(n,i,e);return fP(s!==null),l4(s,i,n.host,n._protocol)}return t}function pP(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=S$():i=A$():t.getStatus()===402?i=C$(n.bucket):t.getStatus()===403?i=R$(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function p4(n){let e=pP(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=D$(n.path)),s.serverResponse=i.serverResponse,s}return t}function g4(n,e,t){let r=e.fullServerUrl(),i=IT(r,n.host,n._protocol),s="GET",a=n.maxOperationRetryTime,c=new Dg(i,s,f4(n,t),a);return c.errorHandler=p4(e),c}function m4(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function y4(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=m4(null,e)),r}function _4(n,e,t,r,i){let s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){let U="";for(let K=0;K<2;K++)U=U+Math.random().toString().slice(2);return U}let l=c();a["Content-Type"]="multipart/related; boundary="+l;let h=y4(e,r,i),p=d4(h,t),_="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+l+`\r
Content-Type: `+h.contentType+`\r
\r
`,w=`\r
--`+l+"--",C=bg.getBlob(_,r,w);if(C===null)throw O$();let A={name:h.fullPath},N=IT(s,n.host,n._protocol),R="POST",x=n.maxUploadRetryTime,j=new Dg(N,R,h4(n,t),x);return j.urlParams=A,j.headers=a,j.body=C.uploadData(),j.errorHandler=pP(e),j}var mse=256*1024;var ZN=null,mT=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=gc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=gc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=gc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Cd("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(let s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Cd("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Cd("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Cd("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Cd("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},yT=class extends mT{initXhr(){this.xhr_.responseType="text"}};function gP(){return ZN?ZN():new yT}var mc=class n{constructor(e,t){this._service=e,t instanceof pr?this._location=t:this._location=pr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new pr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lP(this._location.path)}get storage(){return this._service}get parent(){let e=i4(this._location.path);if(e===null)return null;let t=new pr(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw L$(e)}};function v4(n,e,t){n._throwIfRoot("uploadBytes");let r=_4(n.storage,n._location,dP(),new bg(e,!0),t);return n.storage.makeRequestWithTokens(r,gP).then(i=>({metadata:i,ref:n}))}function E4(n){n._throwIfRoot("getDownloadURL");let e=g4(n.storage,n._location,dP());return n.storage.makeRequestWithTokens(e,gP).then(t=>{if(t===null)throw F$();return t})}function I4(n,e){let t=s4(n._location.path,e),r=new pr(n._location.bucket,t);return new mc(n.storage,r)}function w4(n){return/^[A-Za-z]+:\/\//.test(n)}function T4(n,e){return new mc(n,e)}function mP(n,e){if(n instanceof Rd){let t=n;if(t._bucket==null)throw k$();let r=new mc(t,t._bucket);return e!=null?mP(r,e):r}else return e!==void 0?I4(n,e):n}function b4(n,e){if(e&&w4(e)){if(n instanceof Rd)return T4(n,e);throw fT("To use ref(service, url), the first argument must be a Storage instance.")}else return mP(n,e)}function eP(n,e){let t=e?.[iP];return t==null?null:pr.makeFromBucketSpec(t,n)}function D4(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:Dp(i,n.app.options.projectId))}var Rd=class{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=rP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=T$,this._maxUploadRetryTime=b$,this._requests=new Set,i!=null?this._bucket=pr.makeFromBucketSpec(i,this._host):this._bucket=eP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=pr.makeFromBucketSpec(this._url,e):this._bucket=eP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){XN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){XN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new mc(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new pT(sP());{let a=K$(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){let[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}},tP="@firebase/storage",nP="0.13.2";var yP="storage";function _P(n,e,t){return n=Yt(n),v4(n,e,t)}function vP(n){return n=Yt(n),E4(n)}function EP(n,e){return n=Yt(n),b4(n,e)}function IP(n=Mp(),e){n=Yt(n);let r=Np(n,yP).getImmediate({identifier:e}),i=bp("storage");return i&&C4(r,...i),r}function C4(n,e,t,r={}){D4(n,e,t,r)}function A4(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Rd(t,r,i,e,Pp)}function S4(){Eo(new dr(yP,A4,"PUBLIC").setMultipleInstances(!0)),hr(tP,nP,""),hr(tP,nP,"esm2017")}S4();var R4={apiKey:"AIzaSyBVEG3n4-C4FVtbJ9Q1giz24zN9qOkIK2Q",authDomain:"chanmurarestaurantui.firebaseapp.com",projectId:"chanmurarestaurantui",storageBucket:"chanmurarestaurantui.firebasestorage.app",messagingSenderId:"31518285804",appId:"1:31518285804:web:5a2c2d2e146987d533eac9"},wP=nI(R4),Cg=UN(wP),N4=IP(wP),yc=class n{async uploadImage(e){let t=`menu-images/${Date.now()}-${e.name}`,r=EP(N4,t);return await _P(r,e),await vP(r)}async addMenuItem(e){await YN(cT(Cg,"menuItems"),e)}async getMenuItems(){return(await WN(cT(Cg,"menuItems"))).docs.map(t=>O({id:t.id},t.data()))}async updateMenuItem(e,t){let r=Eg(Cg,"menuItems",e);await KN(r,t)}async deleteMenuItem(e){let t=Eg(Cg,"menuItems",e);await QN(t),console.log("Menu item deleted:",e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};function P4(n,e){if(n&1){let t=Xi();F(0,"div",3)(1,"div",4),bn(2,"img",5),F(3,"div",6)(4,"h5",7),W(5),V(),F(6,"p",8),W(7),V(),F(8,"div",9)(9,"button",10),He("click",function(){let i=an(t).$implicit,s=Nt();return cn(s.decreaseQuantity(i))}),W(10,"-"),V(),F(11,"span"),W(12),V(),F(13,"button",11),He("click",function(){let i=an(t).$implicit,s=Nt();return cn(s.increaseQuantity(i))}),W(14,"+"),V()()()()()}if(n&2){let t=e.$implicit;he(2),ft("src","assets/images/"+t.imageUrl,lo)("alt",t.name),he(3),Qt(t.name),he(2),Ar("Price: \u20B9",t.price),he(5),Qt(t.quantity||0)}}var Ag=class n{constructor(e,t){this.cartService=e;this.firebaseService=t}menuItems=[{id:"1",name:"Paneer Tikka",imageUrl:"pannertikka.jpeg",description:"Spicy paneer",price:180,category:"Veg",isAvailable:!0,quantity:0,quantityAvailable:10},{id:"2",name:"Chicken Tikka",imageUrl:"chickentikka.jpeg",description:"Grilled chicken",price:250,category:"Non-Veg",isAvailable:!0,quantity:0,quantityAvailable:1},{id:"3",name:"Veg Biryani",imageUrl:"vegbiriyani.jpg",description:"Delicious biryani",price:150,category:"Veg",isAvailable:!0,quantity:0,quantityAvailable:1}];sub;loadMenuItems(){this.firebaseService.getMenuItems().then(e=>{this.menuItems=e})}increaseQuantity(e){e.quantity=(e.quantity||0)+1,this.cartService.addToCart(e,1)}decreaseQuantity(e){(e.quantity||0)<=0||(e.quantity=e.quantity-1,this.cartService.addToCart(e,-1))}static \u0275fac=function(t){return new(t||n)(re(is),re(yc))};static \u0275cmp=un({type:n,selectors:[["app-menu-list"]],decls:5,vars:1,consts:[[1,"container","mt-3"],[1,"row"],["class","col-md-4 mb-3",4,"ngFor","ngForOf"],[1,"col-md-4","mb-3"],[1,"card","h-100","p-2"],[1,"card-img-top",3,"src","alt"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"d-flex","align-items-center"],[1,"btn","btn-outline-secondary","btn-sm","me-2",3,"click"],[1,"btn","btn-outline-secondary","btn-sm","ms-2",3,"click"]],template:function(t,r){t&1&&(F(0,"div",0)(1,"h3"),W(2,"Menu"),V(),F(3,"div",1),ir(4,P4,15,5,"div",2),V()()),t&2&&(he(4),ft("ngForOf",r.menuItems))},dependencies:[vi,es],styles:[".card[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 2px 6px #0000001a}"]})};var _c=class n{orders=[];nextId=1;createOrder(e,t,r){let i=e.map(c=>({menuItem:c.menuItem,quantity:c.quantity,totalPrice:c.totalPrice})),s=i.reduce((c,l)=>c+l.totalPrice,0),a={id:this.nextId++,items:i,totalAmount:s,status:"Pending",tableNumber:t,customerName:r,orderTime:new Date};return this.orders.push(a),a}getOrders(){return this.orders}updateStatus(e,t){let r=this.orders.find(i=>i.id===e);r&&(r.status=t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};function M4(n,e){n&1&&(F(0,"div"),W(1,"Your cart is empty"),V())}function x4(n,e){if(n&1){let t=Xi();F(0,"tr")(1,"td"),W(2),V(),F(3,"td"),W(4),V(),F(5,"td"),W(6),V(),F(7,"td"),W(8),V(),F(9,"td")(10,"div",6)(11,"button",7),He("click",function(){let i=an(t).$implicit,s=Nt(2);return cn(s.decreaseQuantity(i.menuItem))}),W(12,"-"),V(),F(13,"span"),W(14),V(),F(15,"button",8),He("click",function(){let i=an(t).$implicit,s=Nt(2);return cn(s.increaseQuantity(i.menuItem))}),W(16,"+"),V()()(),F(17,"td")(18,"button",9),He("click",function(){let i=an(t).$implicit,s=Nt(2);return cn(s.remove(i))}),W(19,"Remove"),V()()()}if(n&2){let t=e.$implicit;he(2),Qt(t.menuItem.name),he(2),Qt(t.menuItem.price),he(2),Qt(t.quantity),he(2),Qt(t.totalPrice),he(6),Qt(t.quantity||0)}}function k4(n,e){if(n&1&&(F(0,"table",4)(1,"thead")(2,"tr")(3,"th"),W(4,"Name"),V(),F(5,"th"),W(6,"Price"),V(),F(7,"th"),W(8,"Quantity"),V(),F(9,"th"),W(10,"Total"),V(),F(11,"th"),W(12,"#"),V(),F(13,"th"),W(14,"Actions"),V()()(),F(15,"tbody"),ir(16,x4,20,5,"tr",5),V()()),n&2){let t=Nt();he(16),ft("ngForOf",t.cartItems)}}function O4(n,e){if(n&1&&(F(0,"h4"),W(1),V()),n&2){let t=Nt();he(),Ar("Total Amount: \u20B9",t.totalAmount)}}function F4(n,e){if(n&1){let t=Xi();F(0,"button",10),He("click",function(){an(t);let i=Nt();return cn(i.placeOrder())}),W(1,"Place Order"),V()}}var Sg=class n{constructor(e,t){this.cartService=e;this.orderService=t}cartItems=[];totalAmount=0;ngOnInit(){this.cartService.cartItems$.subscribe(e=>{this.cartItems=e,this.totalAmount=this.cartItems.reduce((t,r)=>t+r.totalPrice,0)})}remove(e){e.menuItem.id&&this.cartService.removeFromCart(e.menuItem.id)}placeOrder(){if(!this.cartItems.length){alert("Cart is empty");return}this.orderService.createOrder(this.cartItems),this.checkout(),this.cartService.clearCart()}increaseQuantity(e){e.quantity=(e.quantity||0)+1,this.cartService.addToCart(e,1)}decreaseQuantity(e){(e.quantity||0)<=0||(e.quantity=e.quantity-1,this.cartService.addToCart(e,-1))}checkout(){if(this.cartItems.length===0)return;let e={id:Date.now(),items:this.cartItems,totalAmount:this.totalAmount,status:"Pending",orderTime:new Date};console.log("Order:",e),this.cartService.clearCart(),this.printInvoice(e)}printInvoice(e){let t=window.open("","_blank","width=600,height=800");t.document.write(`
    <html>
    <head>
      <title>Invoice</title>
      <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
      </style>
    </head>
    <body>
      <h2>Naveen's Delhi Malai Chaap Resturant Invoice</h2>
      <p>Order ID: ${e.id}</p>
      <p>Order Time: ${e.orderTime}</p>
      <table>
        <thead>
          <tr>
            <th>Item</th>
            <th>Qty</th>
            <th>Price</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody>
          ${e.items.map(r=>`
            <tr>
              <td>${r.menuItem.name}</td>
              <td>${r.quantity}</td>
              <td>\u20B9${r.menuItem.price}</td>
              <td>\u20B9${r.totalPrice}</td>
            </tr>`).join("")}
        </tbody>
      </table>
      <h3>Total: \u20B9${e.totalAmount}</h3>
      <button onclick="window.print()">Print Invoice</button>
    </body>
    </html>
  `),t.document.close()}static \u0275fac=function(t){return new(t||n)(re(is),re(_c))};static \u0275cmp=un({type:n,selectors:[["app-cart"]],decls:6,vars:4,consts:[[1,"my-3"],[4,"ngIf"],["class","table table-striped",4,"ngIf"],["class","btn btn-success",3,"click",4,"ngIf"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],[1,"btn","btn-outline-secondary","btn-sm","me-2",3,"click"],[1,"btn","btn-outline-secondary","btn-sm","ms-2",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"btn","btn-success",3,"click"]],template:function(t,r){t&1&&(F(0,"h2",0),W(1,"Cart"),V(),ir(2,M4,2,0,"div",1)(3,k4,17,1,"table",2)(4,O4,2,1,"h4",1)(5,F4,2,0,"button",3)),t&2&&(he(2),ft("ngIf",r.cartItems.length===0),he(),ft("ngIf",r.cartItems.length>0),he(),ft("ngIf",r.cartItems.length>0),he(),ft("ngIf",r.cartItems.length>0))},dependencies:[vi,es,Nl],styles:[".table[_ngcontent-%COMP%]{margin-top:20px}"]})};var MP=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(re(Ki),re(Tn))};static \u0275dir=Rt({type:n})}return n})(),xP=(()=>{class n extends MP{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Wi(n)))(i||n)}})();static \u0275dir=Rt({type:n,features:[Qi]})}return n})(),AT=new H("");var V4={provide:AT,useExisting:Vi(()=>Ic),multi:!0};function L4(){let n=ln()?ln().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var U4=new H(""),Ic=(()=>{class n extends MP{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!L4())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(re(Ki),re(Tn),re(U4,8))};static \u0275dir=Rt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&He("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},standalone:!1,features:[Dl([V4]),Qi]})}return n})();var j4=new H(""),B4=new H("");function kP(n){return n!=null}function OP(n){return Yi(n)?Ke(n):n}function FP(n){let e={};return n.forEach(t=>{e=t!=null?O(O({},e),t):e}),Object.keys(e).length===0?null:e}function VP(n,e){return e.map(t=>t(n))}function $4(n){return!n.validate}function LP(n){return n.map(e=>$4(e)?e:t=>e.validate(t))}function q4(n){if(!n)return null;let e=n.filter(kP);return e.length==0?null:function(t){return FP(VP(t,e))}}function UP(n){return n!=null?q4(LP(n)):null}function H4(n){if(!n)return null;let e=n.filter(kP);return e.length==0?null:function(t){let r=VP(t,e).map(OP);return Dy(r).pipe(Le(FP))}}function jP(n){return n!=null?H4(LP(n)):null}function DP(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function z4(n){return n._rawValidators}function G4(n){return n._rawAsyncValidators}function wT(n){return n?Array.isArray(n)?n:[n]:[]}function Ng(n,e){return Array.isArray(n)?n.includes(e):n===e}function CP(n,e){let t=wT(e);return wT(n).forEach(i=>{Ng(t,i)||t.push(i)}),t}function AP(n,e){return wT(e).filter(t=>!Ng(n,t))}var Pg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=UP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=jP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},TT=class extends Pg{name;get formDirective(){return null}get path(){return null}},kd=class extends Pg{_parent=null;name=null;valueAccessor=null},bT=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var xg=(()=>{class n extends bT{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(re(kd,2))};static \u0275dir=Rt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ff("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Qi]})}return n})();var Nd="VALID",Rg="INVALID",vc="PENDING",Pd="DISABLED",xo=class{},Mg=class extends xo{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Md=class extends xo{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},xd=class extends xo{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Ec=class extends xo{status;source;constructor(e,t){super(),this.status=e,this.source=t}};var DT=class extends xo{source;constructor(e){super(),this.source=e}};function W4(n){return(kg(n)?n.validators:n)||null}function K4(n){return Array.isArray(n)?UP(n):n||null}function Q4(n,e){return(kg(e)?e.asyncValidators:n)||null}function Y4(n){return Array.isArray(n)?jP(n):n||null}function kg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var CT=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return lt(this.statusReactive)}set status(e){lt(()=>this.statusReactive.set(e))}_status=Cl(()=>this.statusReactive());statusReactive=Ht(void 0);get valid(){return this.status===Nd}get invalid(){return this.status===Rg}get pending(){return this.status==vc}get disabled(){return this.status===Pd}get enabled(){return this.status!==Pd}errors;get pristine(){return lt(this.pristineReactive)}set pristine(e){lt(()=>this.pristineReactive.set(e))}_pristine=Cl(()=>this.pristineReactive());pristineReactive=Ht(!0);get dirty(){return!this.pristine}get touched(){return lt(this.touchedReactive)}set touched(e){lt(()=>this.touchedReactive.set(e))}_touched=Cl(()=>this.touchedReactive());touchedReactive=Ht(!1);get untouched(){return!this.touched}_events=new Je;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(CP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(CP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(AP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(AP(e,this._rawAsyncValidators))}hasValidator(e){return Ng(this._rawValidators,e)}hasAsyncValidator(e){return Ng(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(fe(O({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new xd(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new xd(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(fe(O({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Md(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Md(!0,r))}markAsPending(e={}){this.status=vc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ec(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(fe(O({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Pd,this.errors=null,this._forEachChild(i=>{i.disable(fe(O({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Mg(this.value,r)),this._events.next(new Ec(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(fe(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Nd,this._forEachChild(r=>{r.enable(fe(O({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(fe(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Nd||this.status===vc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Mg(this.value,t)),this._events.next(new Ec(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(fe(O({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Pd:Nd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=vc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=OP(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ec(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ze,this.statusChanges=new Ze}_calculateStatus(){return this._allControlsDisabled()?Pd:this.errors?Rg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vc)?vc:this._anyControlsHaveStatus(Rg)?Rg:Nd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Md(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new xd(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){kg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=K4(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Y4(this._rawAsyncValidators)}};var BP=new H("",{factory:()=>ST}),ST="always";function J4(n,e){return[...e.path,n]}function X4(n,e,t=ST){eq(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),tq(n,e),rq(n,e),nq(n,e),Z4(n,e)}function SP(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Z4(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function eq(n,e){let t=z4(n);e.validator!==null?n.setValidators(DP(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=G4(n);e.asyncValidator!==null?n.setAsyncValidators(DP(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();SP(e._rawValidators,i),SP(e._rawAsyncValidators,i)}function tq(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&$P(n,e)})}function nq(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&$P(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function $P(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function rq(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function iq(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function sq(n){return Object.getPrototypeOf(n.constructor)===xP}function oq(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Ic?t=s:sq(s)?r=s:i=s}),i||r||t||null}function RP(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function NP(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var aq=class extends CT{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(W4(t),Q4(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),kg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(NP(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new DT(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){RP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){RP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){NP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var cq={provide:kd,useExisting:Vi(()=>Od)},PP=Promise.resolve(),Od=(()=>{class n extends kd{_changeDetectorRef;callSetDisabledState;control=new aq;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ze;constructor(t,r,i,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=oq(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),iq(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){X4(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){PP.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Aa(r);PP.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?J4(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(re(TT,9),re(j4,10),re(B4,10),re(AT,10),re(ho,8),re(BP,8))};static \u0275dir=Rt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Dl([cq]),Qi,mi]})}return n})();var uq={provide:AT,useExisting:Vi(()=>RT),multi:!0},RT=(()=>{class n extends xP{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Wi(n)))(i||n)}})();static \u0275dir=Rt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&He("input",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Dl([uq]),Qi]})}return n})();var lq=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=rr({type:n});static \u0275inj=mn({})}return n})();var wc=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:BP,useValue:t.callSetDisabledState??ST}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=rr({type:n});static \u0275inj=mn({imports:[lq]})}return n})();var Og=class n{constructor(e,t){this.cartService=e;this.orderService=t}tableNumber="";customerName="";placeTableOrder(){let e=this.cartService.cartItems.getValue();if(!e.length){alert("Cart is empty");return}this.orderService.createOrder(e,this.tableNumber,this.customerName),this.cartService.clearCart(),alert("Table order placed!"),this.tableNumber="",this.customerName=""}static \u0275fac=function(t){return new(t||n)(re(is),re(_c))};static \u0275cmp=un({type:n,selectors:[["app-table-order"]],decls:12,vars:2,consts:[[1,"my-3"],[1,"mb-3"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click"]],template:function(t,r){t&1&&(F(0,"h2",0),W(1,"Table Order"),V(),F(2,"div",1)(3,"label"),W(4,"Table Number"),V(),F(5,"input",2),or("ngModelChange",function(s){return Sr(r.tableNumber,s)||(r.tableNumber=s),s}),V()(),F(6,"div",1)(7,"label"),W(8,"Customer Name"),V(),F(9,"input",2),or("ngModelChange",function(s){return Sr(r.customerName,s)||(r.customerName=s),s}),V()(),F(10,"button",3),He("click",function(){return r.placeTableOrder()}),W(11,"Place Table Order"),V()),t&2&&(he(5),sr("ngModel",r.tableNumber),he(4),sr("ngModel",r.customerName))},dependencies:[wc,Ic,xg,Od],styles:["input[_ngcontent-%COMP%]{max-width:300px}"]})};function dq(n,e){if(n&1&&(F(0,"div",11)(1,"p",18),W(2,"Preview:"),V(),bn(3,"img",19),V()),n&2){let t=Nt();he(3),ft("src",t.previewImage,lo)}}function hq(n,e){if(n&1&&bn(0,"img",23),n&2){let t=Nt().$implicit;ft("alt",Gv(t.name))("src",t.imageUrl,lo)}}function fq(n,e){if(n&1){let t=Xi();F(0,"tr")(1,"td"),ir(2,hq,1,3,"img",20),V(),F(3,"td"),W(4),V(),F(5,"td"),W(6),V(),F(7,"td"),W(8),V(),F(9,"td")(10,"button",21),He("click",function(){let i=an(t).$implicit,s=Nt();return cn(s.decreaseStock(i,1))}),W(11,"-1"),V(),F(12,"button",22),He("click",function(){let i=an(t).$implicit,s=Nt();return cn(s.deleteItem(i))}),W(13,"Delete"),V()()()}if(n&2){let t=e.$implicit;he(2),ft("ngIf",t.imageUrl),he(2),Qt(t.name),he(2),Ar("\u20B9",t.price),he(2),Qt(t.quantityAvailable)}}var Fg=class n{constructor(e){this.firebaseService=e;this.loadItems()}menuItems=Ht([]);newItem={name:"",description:"",price:0,category:"",quantityAvailable:0,imageUrl:""};selectedFile=null;previewImage=null;loading=Ht(!1);async loadItems(){try{let e=await this.firebaseService.getMenuItems();this.menuItems.set(e)}catch(e){console.error("Load items error",e)}}onFileSelected(e){if(!e?.target?.files?.length)return;this.selectedFile=e.target.files[0];let t=new FileReader;t.onload=()=>{this.previewImage=t.result,this.newItem.imageUrl=this.previewImage},t.readAsDataURL(this.selectedFile)}async addMenuItem(){if(!this.newItem.name||!this.newItem.price||this.newItem.quantityAvailable==null){alert("Please fill name, price and quantity");return}this.loading.set(!0);try{let e=this.newItem.imageUrl||"";this.selectedFile&&(e=await this.firebaseService.uploadImage(this.selectedFile));let t={name:this.newItem.name,description:this.newItem.description||"",price:Number(this.newItem.price),category:this.newItem.category||"",imageUrl:e,quantityAvailable:Number(this.newItem.quantityAvailable),isAvailable:!0,quantity:0};await this.firebaseService.addMenuItem(t),this.newItem={name:"",description:"",price:0,category:"",quantityAvailable:0,imageUrl:""},this.selectedFile=null,this.previewImage=null,await this.loadItems()}catch(e){console.error("Add item error",e),alert("Failed to add item")}finally{this.loading.set(!1)}}async deleteItem(e){e.id&&confirm(`Delete "${e.name}"?`)&&(await this.firebaseService.deleteMenuItem(e.id),await this.loadItems())}async decreaseStock(e,t=1){if(!e.id)return;let r=Math.max(0,(e.quantityAvailable||0)-t);await this.firebaseService.updateMenuItem(e.id,{quantityAvailable:r}),await this.loadItems()}static \u0275fac=function(t){return new(t||n)(re(yc))};static \u0275cmp=un({type:n,selectors:[["app-admin-dashboard"]],decls:40,vars:9,consts:[[1,"admin","container","mt-4"],[1,"card","p-3","mb-4"],[1,"row","g-2"],[1,"col-md-4"],["name","name","placeholder","Name",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-2"],["type","number","name","price","placeholder","Price",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","qty","placeholder","Quantity",1,"form-control",3,"ngModelChange","ngModel"],["name","category","placeholder","Category",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-12","mt-2"],["name","desc","placeholder","Description",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-6","mt-2"],["type","file","accept","image/*",1,"form-control",3,"change"],["class","col-md-6 mt-2",4,"ngIf"],[1,"col-md-12","mt-3","text-end"],[1,"btn","btn-primary",3,"click","disabled"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"mb-1"],["alt","preview",1,"img-preview",3,"src"],["width","60",3,"src","alt",4,"ngIf"],[1,"btn","btn-sm","btn-warning","me-1",3,"click"],[1,"btn","btn-sm","btn-danger","me-1",3,"click"],["width","60",3,"src","alt"]],template:function(t,r){t&1&&(F(0,"div",0)(1,"h2"),W(2,"Admin Dashboard"),V(),F(3,"div",1)(4,"h5"),W(5,"Add / Upload Menu Item"),V(),F(6,"div",2)(7,"div",3)(8,"input",4),or("ngModelChange",function(s){return Sr(r.newItem.name,s)||(r.newItem.name=s),s}),V()(),F(9,"div",5)(10,"input",6),or("ngModelChange",function(s){return Sr(r.newItem.price,s)||(r.newItem.price=s),s}),V()(),F(11,"div",5)(12,"input",7),or("ngModelChange",function(s){return Sr(r.newItem.quantityAvailable,s)||(r.newItem.quantityAvailable=s),s}),V()(),F(13,"div",5)(14,"input",8),or("ngModelChange",function(s){return Sr(r.newItem.category,s)||(r.newItem.category=s),s}),V()(),F(15,"div",9)(16,"textarea",10),or("ngModelChange",function(s){return Sr(r.newItem.description,s)||(r.newItem.description=s),s}),V()(),F(17,"div",11)(18,"input",12),He("change",function(s){return r.onFileSelected(s)}),V()(),ir(19,dq,4,1,"div",13),F(20,"div",14)(21,"button",15),He("click",function(){return r.addMenuItem()}),W(22),V()()()(),F(23,"h5"),W(24,"Menu Items"),V(),F(25,"table",16)(26,"thead")(27,"tr")(28,"th"),W(29,"Image"),V(),F(30,"th"),W(31,"Name"),V(),F(32,"th"),W(33,"Price"),V(),F(34,"th"),W(35,"Qty"),V(),F(36,"th"),W(37,"Actions"),V()()(),F(38,"tbody"),ir(39,fq,14,4,"tr",17),V()()()),t&2&&(he(8),sr("ngModel",r.newItem.name),he(2),sr("ngModel",r.newItem.price),he(2),sr("ngModel",r.newItem.quantityAvailable),he(2),sr("ngModel",r.newItem.category),he(2),sr("ngModel",r.newItem.description),he(3),ft("ngIf",r.previewImage),he(2),ft("disabled",r.loading()),he(),Ar(" ",r.loading()?"Saving...":"Add Menu Item"," "),he(17),ft("ngForOf",r.menuItems()))},dependencies:[vi,es,Nl,wc,Ic,RT,xg,Od],styles:[".admin[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 2px 6px #0000000f}.img-preview[_ngcontent-%COMP%]{max-width:120px;border:1px solid #ddd;border-radius:6px;object-fit:cover}"]})};var HP=[{path:"",redirectTo:"menu",pathMatch:"full"},{path:"menu",component:Ag},{path:"cart",component:Sg},{path:"table-order",component:Og},{path:"admin",component:Fg},{path:"**",redirectTo:"menu"}];var Vg=class n{title="Chanmura";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=un({type:n,selectors:[["app-root"]],decls:19,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-primary"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto"],[1,"nav-item"],["routerLink","/menu","routerLinkActive","active",1,"nav-link"],["routerLink","/cart","routerLinkActive","active",1,"nav-link"],["routerLink","/admin","routerLinkActive","active",1,"nav-link"],[1,"container","mt-4"]],template:function(t,r){t&1&&(F(0,"nav",0)(1,"div",1)(2,"a",2),W(3,"Naveen's Delhi Malai Chaap Resturant"),V(),F(4,"button",3),bn(5,"span",4),V(),F(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),W(10,"Menu"),V()(),F(11,"li",7)(12,"a",9),W(13,"Cart"),V()(),F(14,"li",7)(15,"a",10),W(16,"Admin Dashboard"),V()()()()()(),F(17,"div",11),bn(18,"router-outlet"),V())},dependencies:[Yl,$a,OE],encapsulation:2})};var zP=()=>{};var KP=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},pq=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],a=n[t++],c=n[t++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},Lg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],a=i+1<n.length,c=a?n[i+1]:0,l=i+2<n.length,h=l?n[i+2]:0,p=s>>2,_=(s&3)<<4|c>>4,w=(c&15)<<2|h>>6,C=h&63;l||(C=64,a||(w=64)),r.push(t[p],t[_],t[w],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(KP(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):pq(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let h=i<n.length?t[n.charAt(i)]:64;++i;let _=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||h==null||_==null)throw new PT;let w=s<<2|c>>4;if(r.push(w),h!==64){let C=c<<4&240|h>>2;if(r.push(C),_!==64){let A=h<<6&192|_;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},PT=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},gq=function(n){let e=KP(n);return Lg.encodeByteArray(e,!0)},Vd=function(n){return gq(n).replace(/\./g,"")},Ug=function(n){try{return Lg.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function xT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var mq=()=>xT().__FIREBASE_DEFAULTS__,yq=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},_q=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Ug(n[1]);return e&&JSON.parse(e)},kT=()=>{try{return zP()||mq()||yq()||_q()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},QP=n=>{var e,t;return(t=(e=kT())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},YP=n=>{let e=QP(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},OT=()=>{var n;return(n=kT())===null||n===void 0?void 0:n.config},JP=n=>{var e;return(e=kT())===null||e===void 0?void 0:e[`_${n}`]};var ko=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Tc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function FT(n){return(await fetch(n,{credentials:"include"})).ok}function XP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Vd(JSON.stringify(t)),Vd(JSON.stringify(a)),""].join(".")}var Fd={};function vq(){let n={prod:[],emulator:[]};for(let e of Object.keys(Fd))Fd[e]?n.emulator.push(e):n.prod.push(e);return n}function Eq(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var GP=!1;function VT(n,e){if(typeof window>"u"||typeof document>"u"||!Tc(window.location.host)||Fd[n]===e||Fd[n]||GP)return;Fd[n]=e;function t(w){return`__firebase__banner__${w}`}let r="__firebase__banner",s=vq().prod.length>0;function a(){let w=document.getElementById(r);w&&w.remove()}function c(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function l(w,C){w.setAttribute("width","24"),w.setAttribute("id",C),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function h(){let w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{GP=!0,a()},w}function p(w,C){w.setAttribute("id",C),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function _(){let w=Eq(r),C=t("text"),A=document.getElementById(C)||document.createElement("span"),N=t("learnmore"),R=document.getElementById(N)||document.createElement("a"),x=t("preprendIcon"),j=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){let U=w.element;c(U),p(R,N);let K=h();l(j,x),U.append(j,A,R,K),document.body.appendChild(U)}s?(A.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}function Sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sn())}function eM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tM(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function nM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ld(){try{return typeof indexedDB=="object"}catch{return!1}}function rM(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var Iq="FirebaseError",An=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Iq,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gr.prototype.create)}},gr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?wq(s,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new An(i,c,r)}};function wq(n,e){return n.replace(Tq,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Tq=/\{\$([^}]+)}/g;function Oo(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],a=e[i];if(WP(s)&&WP(a)){if(!Oo(s,a))return!1}else if(s!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function WP(n){return n!==null&&typeof n=="object"}function LT(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function iM(n,e){let t=new MT(n,e);return t.subscribe.bind(t)}var MT=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");bq(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=NT),i.error===void 0&&(i.error=NT),i.complete===void 0&&(i.complete=NT);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function bq(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function NT(){}var aoe=14400*1e3;function Fo(n){return n&&n._delegate?n._delegate:n}var Gt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Vo="[DEFAULT]";var UT=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ko;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Cq(e))try{this.getOrInitializeService({instanceIdentifier:Vo})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Vo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vo){return this.instances.has(e)}getOptions(e=Vo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,a]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Dq(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Vo){return this.component?this.component.multipleInstances?e:Vo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Dq(n){return n===Vo?void 0:n}function Cq(n){return n.instantiationMode==="EAGER"}var jg=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new UT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Aq=[],Re=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Re||{}),Sq={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},Rq=Re.INFO,Nq={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},Pq=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Nq[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Br=class{constructor(e){this.name=e,this._logLevel=Rq,this._logHandler=Pq,this._userLogHandler=null,Aq.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Sq[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}};var BT=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Mq(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Mq(n){let e=n.getComponent();return e?.type==="VERSION"}var $T="@firebase/app",sM="0.13.2";var Si=new Br("@firebase/app"),xq="@firebase/app-compat",kq="@firebase/analytics-compat",Oq="@firebase/analytics",Fq="@firebase/app-check-compat",Vq="@firebase/app-check",Lq="@firebase/auth",Uq="@firebase/auth-compat",jq="@firebase/database",Bq="@firebase/data-connect",$q="@firebase/database-compat",qq="@firebase/functions",Hq="@firebase/functions-compat",zq="@firebase/installations",Gq="@firebase/installations-compat",Wq="@firebase/messaging",Kq="@firebase/messaging-compat",Qq="@firebase/performance",Yq="@firebase/performance-compat",Jq="@firebase/remote-config",Xq="@firebase/remote-config-compat",Zq="@firebase/storage",eH="@firebase/storage-compat",tH="@firebase/firestore",nH="@firebase/ai",rH="@firebase/firestore-compat",iH="firebase",sH="11.10.0";var qT="[DEFAULT]",oH={[$T]:"fire-core",[xq]:"fire-core-compat",[Oq]:"fire-analytics",[kq]:"fire-analytics-compat",[Vq]:"fire-app-check",[Fq]:"fire-app-check-compat",[Lq]:"fire-auth",[Uq]:"fire-auth-compat",[jq]:"fire-rtdb",[Bq]:"fire-data-connect",[$q]:"fire-rtdb-compat",[qq]:"fire-fn",[Hq]:"fire-fn-compat",[zq]:"fire-iid",[Gq]:"fire-iid-compat",[Wq]:"fire-fcm",[Kq]:"fire-fcm-compat",[Qq]:"fire-perf",[Yq]:"fire-perf-compat",[Jq]:"fire-rc",[Xq]:"fire-rc-compat",[Zq]:"fire-gcs",[eH]:"fire-gcs-compat",[tH]:"fire-fst",[rH]:"fire-fst-compat",[nH]:"fire-vertex","fire-js":"fire-js",[iH]:"fire-js-all"};var Ud=new Map,aH=new Map,HT=new Map;function oM(n,e){try{n.container.addComponent(e)}catch(t){Si.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function mr(n){let e=n.name;if(HT.has(e))return Si.debug(`There were multiple attempts to register component ${e}.`),!1;HT.set(e,n);for(let t of Ud.values())oM(t,n);for(let t of aH.values())oM(t,n);return!0}function Bg(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ri(n){return n==null?!1:n.settings!==void 0}var cH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ds=new gr("app","Firebase",cH);var zT=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ds.create("app-deleted",{appName:this._name})}};var bc=sH;function KT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:qT,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ds.create("bad-app-name",{appName:String(i)});if(t||(t=OT()),!t)throw ds.create("no-options");let s=Ud.get(i);if(s){if(Oo(t,s.options)&&Oo(r,s.config))return s;throw ds.create("duplicate-app",{appName:i})}let a=new jg(i);for(let l of HT.values())a.addComponent(l);let c=new zT(t,r,a);return Ud.set(i,c),c}function Dc(n=qT){let e=Ud.get(n);if(!e&&n===qT&&OT())return KT();if(!e)throw ds.create("no-app",{appName:n});return e}function $g(){return Array.from(Ud.values())}function Ye(n,e,t){var r;let i=(r=oH[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Si.warn(c.join(" "));return}mr(new Gt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var uH="firebase-heartbeat-database",lH=1,jd="firebase-heartbeat-store",jT=null;function lM(){return jT||(jT=Sp(uH,lH,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(jd)}catch(t){console.warn(t)}}}}).catch(n=>{throw ds.create("idb-open",{originalErrorMessage:n.message})})),jT}async function dH(n){try{let t=(await lM()).transaction(jd),r=await t.objectStore(jd).get(dM(n));return await t.done,r}catch(e){if(e instanceof An)Si.warn(e.message);else{let t=ds.create("idb-get",{originalErrorMessage:e?.message});Si.warn(t.message)}}}async function aM(n,e){try{let r=(await lM()).transaction(jd,"readwrite");await r.objectStore(jd).put(e,dM(n)),await r.done}catch(t){if(t instanceof An)Si.warn(t.message);else{let r=ds.create("idb-set",{originalErrorMessage:t?.message});Si.warn(r.message)}}}function dM(n){return`${n.name}!${n.options.appId}`}var hH=1024,fH=30,GT=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new WT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=cM();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>fH){let a=gH(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Si.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=cM(),{heartbeatsToSend:r,unsentEntries:i}=pH(this._heartbeatsCache.heartbeats),s=Vd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Si.warn(t),""}}};function cM(){return new Date().toISOString().substring(0,10)}function pH(n,e=hH){let t=[],r=n.slice();for(let i of n){let s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),uM(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),uM(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var WT=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ld()?rM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await dH(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return aM(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return aM(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function uM(n){return Vd(JSON.stringify({version:2,heartbeats:n})).length}function gH(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function mH(n){mr(new Gt("platform-logger",e=>new BT(e),"PRIVATE")),mr(new Gt("heartbeat",e=>new GT(e),"PRIVATE")),Ye($T,sM,n),Ye($T,sM,"esm2017"),Ye("fire-js","")}mH("");var yH="firebase",_H="11.10.0";Ye(yH,_H,"app");function hM(n){n===void 0&&(n=M(It));let e=n.get(ya);return t=>new ue(r=>{let i=e.add(),s=!1;function a(){s||(i(),s=!0)}let c=t.subscribe({next:l=>{r.next(l),a()},complete:()=>{r.complete(),a()},error:l=>{r.error(l),a()}});return c.add(()=>{r.unsubscribe(),a()}),c})}var Uo=new Gs("ANGULARFIRE2_VERSION");function Hg(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(a=>a.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ac=(n,e)=>{let t=e?[e]:$g(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},Cc=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Cc||{}),fM=Zv()&&typeof Zone<"u"?Cc.WARN:Cc.SILENT;var qg=class{zone;delegate;constructor(e,t=Iy){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(a){i?i.runGuarded(()=>{e.apply(this,[a])}):e.apply(this,[a])};return this.delegate.schedule(s,t,r)}},jo=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=M($e);this.outsideAngular=t.runOutsideAngular(()=>new qg(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new qg(typeof Zone>"u"?void 0:Zone.current,Ey))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pM=!1;function vH(n,e){!pM&&(fM>Cc.SILENT||Zv())&&(pM=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),fM>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function EH(n){let e=M($e,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Lo(n){let e=M($e,{optional:!0});return e?e.run(()=>n()):n()}var IH=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),ut(t,()=>Lo(()=>n.apply(void 0,r)))),Sc=(n,e,t)=>(t||=e?Cc.WARN:Cc.VERBOSE,function(){let r,i=arguments,s,a,c;try{s=M(jo),a=M(ya),c=M(ct)}catch{return vH(n,t),n.apply(this,i)}for(let h=0;h<arguments.length;h++)typeof i[h]=="function"&&(e&&(r||=Lo(()=>a.add())),i[h]=IH(i[h],r,c));let l=EH(()=>n.apply(this,i));return e?l instanceof ue?l.pipe(Oi(s.outsideAngular),ki(s.insideAngular),hM(c)):l instanceof Promise?Lo(()=>{let h=a.add();return new Promise((p,_)=>{l.then(w=>ut(c,()=>Lo(()=>p(w))),w=>ut(c,()=>Lo(()=>_(w)))).finally(h)})}):typeof l=="function"&&r?function(){return setTimeout(r,0),l.apply(this,arguments)}:Lo(()=>l):l instanceof ue?l.pipe(Oi(s.outsideAngular),ki(s.insideAngular)):Lo(()=>l)});var Bo=class{constructor(e){return e}},Bd=class{constructor(){return $g()}};function wH(n){return n&&n.length===1?n[0]:new Bo(Dc())}var QT=new H("angularfire2._apps"),TH={provide:Bo,useFactory:wH,deps:[[new gi,QT]]},bH={provide:Bd,deps:[[new gi,QT]]};function DH(n){return(e,t)=>{let r=t.get(uo);Ye("angularfire",Uo.full,"core"),Ye("angularfire",Uo.full,"app"),Ye("angular",zy.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Bo(i)}}function gM(n,...e){return hi([TH,bH,{provide:QT,useFactory:DH(n),multi:!0,deps:[$e,It,jo,...e]}])}var mM=Sc(KT,!0);var CH=new Map,AH={activated:!1,tokenObservers:[]},SH={initialized:!1,enabled:!1};function yr(n){return CH.get(n)||Object.assign({},AH)}function EM(){return SH}var RH="https://content-firebaseappcheck.googleapis.com/v1";var NH="exchangeDebugToken",yM={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},nae=1440*60*1e3;var XT=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new ko,this.pending.promise.catch(t=>{}),await PH(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new ko,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function PH(n){return new Promise(e=>{setTimeout(e,n)})}var MH={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},hs=new gr("appCheck","AppCheck",MH);function IM(n){if(!yr(n).activated)throw hs.create("use-before-activation",{appName:n.name})}async function wM({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let _=await i.getHeartbeatsHeader();_&&(r["X-Firebase-Client"]=_)}let s={method:"POST",body:JSON.stringify(e),headers:r},a;try{a=await fetch(n,s)}catch(_){throw hs.create("fetch-network-error",{originalErrorMessage:_?.message})}if(a.status!==200)throw hs.create("fetch-status-error",{httpStatus:a.status});let c;try{c=await a.json()}catch(_){throw hs.create("fetch-parse-error",{originalErrorMessage:_?.message})}let l=c.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw hs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let h=Number(l[1])*1e3,p=Date.now();return{token:c.token,expireTimeMillis:p+h,issuedAtTimeMillis:p}}function TM(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${RH}/projects/${t}/apps/${r}:${NH}?key=${i}`,body:{debug_token:e}}}var xH="firebase-app-check-database",kH=1,ZT="firebase-app-check-store";var zg=null;function OH(){return zg||(zg=new Promise((n,e)=>{try{let t=indexedDB.open(xH,kH);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(hs.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(ZT,{keyPath:"compositeKey"})}}}catch(t){e(hs.create("storage-open",{originalErrorMessage:t?.message}))}}),zg)}function FH(n,e){return VH(LH(n),e)}async function VH(n,e){let r=(await OH()).transaction(ZT,"readwrite"),s=r.objectStore(ZT).put({compositeKey:n,value:e});return new Promise((a,c)=>{s.onsuccess=l=>{a()},r.onerror=l=>{var h;c(hs.create("storage-set",{originalErrorMessage:(h=l.target.error)===null||h===void 0?void 0:h.message}))}})}function LH(n){return`${n.options.appId}-${n.name}`}var $d=new Br("@firebase/app-check");function YT(n,e){return Ld()?FH(n,e).catch(t=>{$d.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function bM(){return EM().enabled}async function DM(){let n=EM();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var UH={error:"UNKNOWN_ERROR"};function jH(n){return Lg.encodeString(JSON.stringify(n),!1)}async function eb(n,e=!1,t=!1){let r=n.app;IM(r);let i=yr(r),s=i.token,a;if(s&&!qd(s)&&(i.token=void 0,s=void 0),!s){let h=await i.cachedTokenPromise;h&&(qd(h)?s=h:await YT(r,void 0))}if(!e&&s&&qd(s))return{token:s.token};let c=!1;if(bM())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=wM(TM(r,await DM()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);let h=await i.exchangeTokenPromise;return await YT(r,h),i.token=h,{token:h.token}}catch(h){return h.code==="appCheck/throttled"||h.code==="appCheck/initial-throttle"?$d.warn(h.message):t&&$d.error(h),JT(h)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),s=await yr(r).exchangeTokenPromise}catch(h){h.code==="appCheck/throttled"||h.code==="appCheck/initial-throttle"?$d.warn(h.message):t&&$d.error(h),a=h}let l;return s?a?qd(s)?l={token:s.token,internalError:a}:l=JT(a):(l={token:s.token},i.token=s,await YT(r,s)):l=JT(a),c&&HH(r,l),l}async function BH(n){let e=n.app;IM(e);let{provider:t}=yr(e);if(bM()){let r=await DM(),{token:i}=await wM(TM(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function $H(n,e,t,r){let{app:i}=n,s=yr(i),a={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,a],s.token&&qd(s.token)){let c=s.token;Promise.resolve().then(()=>{t({token:c.token}),_M(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>_M(n))}function CM(n,e){let t=yr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function _M(n){let{app:e}=n,t=yr(e),r=t.tokenRefresher;r||(r=qH(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function qH(n){let{app:e}=n;return new XT(async()=>{let t=yr(e),r;if(t.token?r=await eb(n,!0):r=await eb(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=yr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},yM.RETRIAL_MIN_WAIT,yM.RETRIAL_MAX_WAIT)}function HH(n,e){let t=yr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function qd(n){return n.expireTimeMillis-Date.now()>0}function JT(n){return{token:jH(UH),error:n}}var tb=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=yr(this.app);for(let t of e)CM(this.app,t.next);return Promise.resolve()}};function zH(n,e){return new tb(n,e)}function GH(n){return{getToken:e=>eb(n,e),getLimitedUseToken:()=>BH(n),addTokenListener:e=>$H(n,"INTERNAL",e),removeTokenListener:e=>CM(n.app,e)}}var WH="@firebase/app-check",KH="0.10.1";var QH="app-check",vM="app-check-internal";function YH(){mr(new Gt(QH,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return zH(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(vM).initialize()})),mr(new Gt(vM,n=>{let e=n.getProvider("app-check").getImmediate();return GH(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ye(WH,KH)}YH();var JH="app-check";var Gg=class{constructor(){return Ac(JH)}};var XH=["localhost","0.0.0.0","127.0.0.1"],pae=typeof window<"u"&&XH.includes(window.location.hostname);function kM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var OM=kM,FM=new gr("auth","Firebase",kM());var Yg=new Br("@firebase/auth");function ZH(n,...e){Yg.logLevel<=Re.WARN&&Yg.warn(`Auth (${bc}): ${n}`,...e)}function Kg(n,...e){Yg.logLevel<=Re.ERROR&&Yg.error(`Auth (${bc}): ${n}`,...e)}function AM(n,...e){throw fb(n,...e)}function hb(n,...e){return fb(n,...e)}function VM(n,e,t){let r=Object.assign(Object.assign({},OM()),{[e]:t});return new gr("auth","Firebase",r).create(e,{appName:n.name})}function Qg(n){return VM(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fb(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return FM.create(n,...e)}function Ne(n,e,...t){if(!n)throw fb(e,...t)}function Hd(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Kg(e),new Error(e)}function Jg(n,e){n||Hd(e)}function ez(){return SM()==="http:"||SM()==="https:"}function SM(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function tz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ez()||tM()||"connection"in navigator)?navigator.onLine:!0}function nz(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ho=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Jg(t>e,"Short delay should be less than long delay!"),this.isMobile=ZP()||nM()}get(){return tz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function rz(n,e){Jg(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Xg=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hd("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hd("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hd("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var iz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var sz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oz=new Ho(3e4,6e4);function LM(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function rm(n,e,t,r,i={}){return UM(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});let c=LT(Object.assign({key:n.config.apiKey},a)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);let h=Object.assign({method:e,headers:l},s);return eM()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Tc(n.emulatorConfig.host)&&(h.credentials="include"),Xg.fetch()(await jM(n,n.config.apiHost,t,c),h)})}async function UM(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},iz),e);try{let i=new ib(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=await s.json();if("needConfirmation"in a)throw Wg(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{let c=s.ok?a.errorMessage:a.error.message,[l,h]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wg(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Wg(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw Wg(n,"user-disabled",a);let p=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw VM(n,p,h);AM(n,p)}}catch(i){if(i instanceof An)throw i;AM(n,"network-request-failed",{message:String(i)})}}async function jM(n,e,t,r){let i=`${e}${t}?${r}`,s=n,a=s.config.emulator?rz(n.config,i):`${n.config.apiScheme}://${i}`;return sz.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}var ib=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(hb(this.auth,"network-request-failed")),oz.get())})}};function Wg(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=hb(n,e,r);return i.customData._tokenResponse=t,i}async function az(n,e){return rm(n,"POST","/v1/accounts:delete",e)}async function Zg(n,e){return rm(n,"POST","/v1/accounts:lookup",e)}function zd(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pb(n,e=!1){let t=Fo(n),r=await t.getIdToken(e),i=BM(r);Ne(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:zd(nb(i.auth_time)),issuedAtTime:zd(nb(i.iat)),expirationTime:zd(nb(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function nb(n){return Number(n)*1e3}function BM(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Kg("JWT malformed, contained fewer than 3 sections"),null;try{let i=Ug(t);return i?JSON.parse(i):(Kg("Failed to decode base64 JWT payload"),null)}catch(i){return Kg("Caught error parsing JWT payload as JSON",i?.toString()),null}}function RM(n){let e=BM(n);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function sb(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof An&&cz(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function cz({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var ob=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Wd=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=zd(this.lastLoginAt),this.creationTime=zd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function em(n){var e;let t=n.auth,r=await n.getIdToken(),i=await sb(n,Zg(t,{idToken:r}));Ne(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?$M(s.providerUserInfo):[],c=uz(n.providerData,a),l=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!c?.length,p=l?h:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Wd(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,_)}async function gb(n){let e=Fo(n);await em(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uz(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function $M(n){return n.map(e=>{var{providerId:t}=e,r=wy(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function lz(n,e){let t=await UM(n,{},async()=>{let r=LT({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await jM(n,i,"/v1/token",`key=${s}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let l={method:"POST",headers:c,body:r};return n.emulatorConfig&&Tc(n.emulatorConfig.host)&&(l.credentials="include"),Xg.fetch()(a,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function dz(n,e){return rm(n,"POST","/v2/accounts:revokeToken",LM(n,e))}var Gd=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):RM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");let t=RM(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await lz(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new n;return r&&(Ne(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Ne(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Ne(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Hd("not implemented")}};function fs(n,e){Ne(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var $o=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=wy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ob(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Wd(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await sb(this,this.stsTokenManager.getToken(this.auth,e));return Ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return pb(this,e)}reload(){return gb(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await em(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ri(this.auth.app))return Promise.reject(Qg(this.auth));let e=await this.getIdToken();return await sb(this,az(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,c,l,h,p;let _=(r=t.displayName)!==null&&r!==void 0?r:void 0,w=(i=t.email)!==null&&i!==void 0?i:void 0,C=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,A=(a=t.photoURL)!==null&&a!==void 0?a:void 0,N=(c=t.tenantId)!==null&&c!==void 0?c:void 0,R=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,x=(h=t.createdAt)!==null&&h!==void 0?h:void 0,j=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:U,emailVerified:K,isAnonymous:Ue,providerData:te,stsTokenManager:I}=t;Ne(U&&I,e,"internal-error");let g=Gd.fromJSON(this.name,I);Ne(typeof U=="string",e,"internal-error"),fs(_,e.name),fs(w,e.name),Ne(typeof K=="boolean",e,"internal-error"),Ne(typeof Ue=="boolean",e,"internal-error"),fs(C,e.name),fs(A,e.name),fs(N,e.name),fs(R,e.name),fs(x,e.name),fs(j,e.name);let y=new n({uid:U,auth:e,email:w,emailVerified:K,displayName:_,isAnonymous:Ue,photoURL:A,phoneNumber:C,tenantId:N,stsTokenManager:g,createdAt:x,lastLoginAt:j});return te&&Array.isArray(te)&&(y.providerData=te.map(v=>Object.assign({},v))),R&&(y._redirectEventId=R),y}static async _fromIdTokenResponse(e,t,r=!1){let i=new Gd;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await em(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];Ne(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?$M(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,c=new Gd;c.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Wd(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,h),l}};var NM=new Map;function qo(n){Jg(n instanceof Function,"Expected a class definition");let e=NM.get(n);return e?(Jg(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,NM.set(n,e),e)}var hz=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),ab=hz;function rb(n,e,t){return`firebase:${n}:${e}:${t}`}var tm=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=rb(this.userKey,i.apiKey,s),this.fullPersistenceKey=rb("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await Zg(this.auth,{idToken:e}).catch(()=>{});return t?$o._fromGetAccountInfoResponse(this.auth,t,e):null}return $o._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(qo(ab),e,r);let i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h),s=i[0]||qo(ab),a=rb(r,e.config.apiKey,e.name),c=null;for(let h of t)try{let p=await h._get(a);if(p){let _;if(typeof p=="string"){let w=await Zg(e,{idToken:p}).catch(()=>{});if(!w)break;_=await $o._fromGetAccountInfoResponse(e,w,p)}else _=$o._fromJSON(e,p);h!==s&&(c=_),s=h;break}}catch{}let l=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new n(s,e,r):(s=l[0],c&&await s._set(a,c.toJSON()),await Promise.all(t.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new n(s,e,r))}};function PM(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mz(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fz(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_z(e))return"Blackberry";if(vz(e))return"Webos";if(pz(e))return"Safari";if((e.includes("chrome/")||gz(e))&&!e.includes("edge/"))return"Chrome";if(yz(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function fz(n=Sn()){return/firefox\//i.test(n)}function pz(n=Sn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gz(n=Sn()){return/crios\//i.test(n)}function mz(n=Sn()){return/iemobile/i.test(n)}function yz(n=Sn()){return/android/i.test(n)}function _z(n=Sn()){return/blackberry/i.test(n)}function vz(n=Sn()){return/webos/i.test(n)}function qM(n,e=[]){let t;switch(n){case"Browser":t=PM(Sn());break;case"Worker":t=`${PM(Sn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${bc}/${r}`}var cb=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((a,c)=>{try{let l=e(s);a(l)}catch(l){c(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function Ez(n,e={}){return rm(n,"GET","/v2/passwordPolicy",LM(n,e))}var Iz=6,ub=class{constructor(e){var t,r,i,s;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:Iz,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var lb=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nm(this),this.idTokenSubscription=new nm(this),this.beforeStateQueue=new cb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=qo(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await tm.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Zg(this,{idToken:e}),r=await $o._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ri(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===c)&&l?.user&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await em(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ri(this.app))return Promise.reject(Qg(this));let t=e?Fo(e):null;return t&&Ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ri(this.app)?Promise.reject(Qg(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ri(this.app)?Promise.reject(Qg(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await Ez(this),t=new ub(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await dz(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&qo(e)||this._popupRedirectResolver;Ne(t,this,"argument-error"),this.redirectPersistenceManager=await tm.create(this,[qo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),a=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{a=!0,l()}}else{let l=e.addObserver(t);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Ri(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&ZH(`Error while retrieving App Check token: ${t.error}`),t?.token}};function wz(n){return Fo(n)}var nm=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=iM(t=>this.observer=t)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Tz={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bz(n){Tz=n}function Dz(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Cz(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(qo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var Cae=Dz("rcb"),Aae=new Ho(3e4,6e4);var Sae=new Ho(2e3,1e4);var Rae=600*1e3;var Nae=new Ho(3e4,6e4);var Pae=new Ho(5e3,15e3);var Mae=encodeURIComponent("fac");var MM="@firebase/auth",xM="1.10.8";var db=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Az(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Sz(n){mr(new Gt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;Ne(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qM(n)},h=new lb(r,i,s,l);return Cz(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),mr(new Gt("auth-internal",e=>{let t=wz(e.getProvider("auth").getImmediate());return(r=>new db(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ye(MM,xM,Az(n)),Ye(MM,xM,"esm2017")}var Rz=300,xae=JP("authIdTokenMaxAge")||Rz;function Nz(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}bz({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=hb("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Nz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Sz("Browser");var S9="auth";var im=class{constructor(){return Ac(S9)}};var HM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zM={};var sm,GM;(function(){var n;function e(I,g){function y(){}y.prototype=g.prototype,I.D=g.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(v,E,b){for(var m=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)m[rt-2]=arguments[rt];return g.prototype[E].apply(v,m)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,g,y){y||(y=0);var v=Array(16);if(typeof g=="string")for(var E=0;16>E;++E)v[E]=g.charCodeAt(y++)|g.charCodeAt(y++)<<8|g.charCodeAt(y++)<<16|g.charCodeAt(y++)<<24;else for(E=0;16>E;++E)v[E]=g[y++]|g[y++]<<8|g[y++]<<16|g[y++]<<24;g=I.g[0],y=I.g[1],E=I.g[2];var b=I.g[3],m=g+(b^y&(E^b))+v[0]+3614090360&4294967295;g=y+(m<<7&4294967295|m>>>25),m=b+(E^g&(y^E))+v[1]+3905402710&4294967295,b=g+(m<<12&4294967295|m>>>20),m=E+(y^b&(g^y))+v[2]+606105819&4294967295,E=b+(m<<17&4294967295|m>>>15),m=y+(g^E&(b^g))+v[3]+3250441966&4294967295,y=E+(m<<22&4294967295|m>>>10),m=g+(b^y&(E^b))+v[4]+4118548399&4294967295,g=y+(m<<7&4294967295|m>>>25),m=b+(E^g&(y^E))+v[5]+1200080426&4294967295,b=g+(m<<12&4294967295|m>>>20),m=E+(y^b&(g^y))+v[6]+2821735955&4294967295,E=b+(m<<17&4294967295|m>>>15),m=y+(g^E&(b^g))+v[7]+4249261313&4294967295,y=E+(m<<22&4294967295|m>>>10),m=g+(b^y&(E^b))+v[8]+1770035416&4294967295,g=y+(m<<7&4294967295|m>>>25),m=b+(E^g&(y^E))+v[9]+2336552879&4294967295,b=g+(m<<12&4294967295|m>>>20),m=E+(y^b&(g^y))+v[10]+4294925233&4294967295,E=b+(m<<17&4294967295|m>>>15),m=y+(g^E&(b^g))+v[11]+2304563134&4294967295,y=E+(m<<22&4294967295|m>>>10),m=g+(b^y&(E^b))+v[12]+1804603682&4294967295,g=y+(m<<7&4294967295|m>>>25),m=b+(E^g&(y^E))+v[13]+4254626195&4294967295,b=g+(m<<12&4294967295|m>>>20),m=E+(y^b&(g^y))+v[14]+2792965006&4294967295,E=b+(m<<17&4294967295|m>>>15),m=y+(g^E&(b^g))+v[15]+1236535329&4294967295,y=E+(m<<22&4294967295|m>>>10),m=g+(E^b&(y^E))+v[1]+4129170786&4294967295,g=y+(m<<5&4294967295|m>>>27),m=b+(y^E&(g^y))+v[6]+3225465664&4294967295,b=g+(m<<9&4294967295|m>>>23),m=E+(g^y&(b^g))+v[11]+643717713&4294967295,E=b+(m<<14&4294967295|m>>>18),m=y+(b^g&(E^b))+v[0]+3921069994&4294967295,y=E+(m<<20&4294967295|m>>>12),m=g+(E^b&(y^E))+v[5]+3593408605&4294967295,g=y+(m<<5&4294967295|m>>>27),m=b+(y^E&(g^y))+v[10]+38016083&4294967295,b=g+(m<<9&4294967295|m>>>23),m=E+(g^y&(b^g))+v[15]+3634488961&4294967295,E=b+(m<<14&4294967295|m>>>18),m=y+(b^g&(E^b))+v[4]+3889429448&4294967295,y=E+(m<<20&4294967295|m>>>12),m=g+(E^b&(y^E))+v[9]+568446438&4294967295,g=y+(m<<5&4294967295|m>>>27),m=b+(y^E&(g^y))+v[14]+3275163606&4294967295,b=g+(m<<9&4294967295|m>>>23),m=E+(g^y&(b^g))+v[3]+4107603335&4294967295,E=b+(m<<14&4294967295|m>>>18),m=y+(b^g&(E^b))+v[8]+1163531501&4294967295,y=E+(m<<20&4294967295|m>>>12),m=g+(E^b&(y^E))+v[13]+2850285829&4294967295,g=y+(m<<5&4294967295|m>>>27),m=b+(y^E&(g^y))+v[2]+4243563512&4294967295,b=g+(m<<9&4294967295|m>>>23),m=E+(g^y&(b^g))+v[7]+1735328473&4294967295,E=b+(m<<14&4294967295|m>>>18),m=y+(b^g&(E^b))+v[12]+2368359562&4294967295,y=E+(m<<20&4294967295|m>>>12),m=g+(y^E^b)+v[5]+4294588738&4294967295,g=y+(m<<4&4294967295|m>>>28),m=b+(g^y^E)+v[8]+2272392833&4294967295,b=g+(m<<11&4294967295|m>>>21),m=E+(b^g^y)+v[11]+1839030562&4294967295,E=b+(m<<16&4294967295|m>>>16),m=y+(E^b^g)+v[14]+4259657740&4294967295,y=E+(m<<23&4294967295|m>>>9),m=g+(y^E^b)+v[1]+2763975236&4294967295,g=y+(m<<4&4294967295|m>>>28),m=b+(g^y^E)+v[4]+1272893353&4294967295,b=g+(m<<11&4294967295|m>>>21),m=E+(b^g^y)+v[7]+4139469664&4294967295,E=b+(m<<16&4294967295|m>>>16),m=y+(E^b^g)+v[10]+3200236656&4294967295,y=E+(m<<23&4294967295|m>>>9),m=g+(y^E^b)+v[13]+681279174&4294967295,g=y+(m<<4&4294967295|m>>>28),m=b+(g^y^E)+v[0]+3936430074&4294967295,b=g+(m<<11&4294967295|m>>>21),m=E+(b^g^y)+v[3]+3572445317&4294967295,E=b+(m<<16&4294967295|m>>>16),m=y+(E^b^g)+v[6]+76029189&4294967295,y=E+(m<<23&4294967295|m>>>9),m=g+(y^E^b)+v[9]+3654602809&4294967295,g=y+(m<<4&4294967295|m>>>28),m=b+(g^y^E)+v[12]+3873151461&4294967295,b=g+(m<<11&4294967295|m>>>21),m=E+(b^g^y)+v[15]+530742520&4294967295,E=b+(m<<16&4294967295|m>>>16),m=y+(E^b^g)+v[2]+3299628645&4294967295,y=E+(m<<23&4294967295|m>>>9),m=g+(E^(y|~b))+v[0]+4096336452&4294967295,g=y+(m<<6&4294967295|m>>>26),m=b+(y^(g|~E))+v[7]+1126891415&4294967295,b=g+(m<<10&4294967295|m>>>22),m=E+(g^(b|~y))+v[14]+2878612391&4294967295,E=b+(m<<15&4294967295|m>>>17),m=y+(b^(E|~g))+v[5]+4237533241&4294967295,y=E+(m<<21&4294967295|m>>>11),m=g+(E^(y|~b))+v[12]+1700485571&4294967295,g=y+(m<<6&4294967295|m>>>26),m=b+(y^(g|~E))+v[3]+2399980690&4294967295,b=g+(m<<10&4294967295|m>>>22),m=E+(g^(b|~y))+v[10]+4293915773&4294967295,E=b+(m<<15&4294967295|m>>>17),m=y+(b^(E|~g))+v[1]+2240044497&4294967295,y=E+(m<<21&4294967295|m>>>11),m=g+(E^(y|~b))+v[8]+1873313359&4294967295,g=y+(m<<6&4294967295|m>>>26),m=b+(y^(g|~E))+v[15]+4264355552&4294967295,b=g+(m<<10&4294967295|m>>>22),m=E+(g^(b|~y))+v[6]+2734768916&4294967295,E=b+(m<<15&4294967295|m>>>17),m=y+(b^(E|~g))+v[13]+1309151649&4294967295,y=E+(m<<21&4294967295|m>>>11),m=g+(E^(y|~b))+v[4]+4149444226&4294967295,g=y+(m<<6&4294967295|m>>>26),m=b+(y^(g|~E))+v[11]+3174756917&4294967295,b=g+(m<<10&4294967295|m>>>22),m=E+(g^(b|~y))+v[2]+718787259&4294967295,E=b+(m<<15&4294967295|m>>>17),m=y+(b^(E|~g))+v[9]+3951481745&4294967295,I.g[0]=I.g[0]+g&4294967295,I.g[1]=I.g[1]+(E+(m<<21&4294967295|m>>>11))&4294967295,I.g[2]=I.g[2]+E&4294967295,I.g[3]=I.g[3]+b&4294967295}r.prototype.u=function(I,g){g===void 0&&(g=I.length);for(var y=g-this.blockSize,v=this.B,E=this.h,b=0;b<g;){if(E==0)for(;b<=y;)i(this,I,b),b+=this.blockSize;if(typeof I=="string"){for(;b<g;)if(v[E++]=I.charCodeAt(b++),E==this.blockSize){i(this,v),E=0;break}}else for(;b<g;)if(v[E++]=I[b++],E==this.blockSize){i(this,v),E=0;break}}this.h=E,this.o+=g},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var g=1;g<I.length-8;++g)I[g]=0;var y=8*this.o;for(g=I.length-8;g<I.length;++g)I[g]=y&255,y/=256;for(this.u(I),I=Array(16),g=y=0;4>g;++g)for(var v=0;32>v;v+=8)I[y++]=this.g[g]>>>v&255;return I};function s(I,g){var y=c;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=g(I)}function a(I,g){this.h=g;for(var y=[],v=!0,E=I.length-1;0<=E;E--){var b=I[E]|0;v&&b==g||(y[E]=b,v=!1)}this.g=y}var c={};function l(I){return-128<=I&&128>I?s(I,function(g){return new a([g|0],0>g?-1:0)}):new a([I|0],0>I?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return _;if(0>I)return R(h(-I));for(var g=[],y=1,v=0;I>=y;v++)g[v]=I/y|0,y*=4294967296;return new a(g,0)}function p(I,g){if(I.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(I.charAt(0)=="-")return R(p(I.substring(1),g));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=h(Math.pow(g,8)),v=_,E=0;E<I.length;E+=8){var b=Math.min(8,I.length-E),m=parseInt(I.substring(E,E+b),g);8>b?(b=h(Math.pow(g,b)),v=v.j(b).add(h(m))):(v=v.j(y),v=v.add(h(m)))}return v}var _=l(0),w=l(1),C=l(16777216);n=a.prototype,n.m=function(){if(N(this))return-R(this).m();for(var I=0,g=1,y=0;y<this.g.length;y++){var v=this.i(y);I+=(0<=v?v:4294967296+v)*g,g*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(A(this))return"0";if(N(this))return"-"+R(this).toString(I);for(var g=h(Math.pow(I,6)),y=this,v="";;){var E=K(y,g).g;y=x(y,E.j(g));var b=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=E,A(y))return b+v;for(;6>b.length;)b="0"+b;v=b+v}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function A(I){if(I.h!=0)return!1;for(var g=0;g<I.g.length;g++)if(I.g[g]!=0)return!1;return!0}function N(I){return I.h==-1}n.l=function(I){return I=x(this,I),N(I)?-1:A(I)?0:1};function R(I){for(var g=I.g.length,y=[],v=0;v<g;v++)y[v]=~I.g[v];return new a(y,~I.h).add(w)}n.abs=function(){return N(this)?R(this):this},n.add=function(I){for(var g=Math.max(this.g.length,I.g.length),y=[],v=0,E=0;E<=g;E++){var b=v+(this.i(E)&65535)+(I.i(E)&65535),m=(b>>>16)+(this.i(E)>>>16)+(I.i(E)>>>16);v=m>>>16,b&=65535,m&=65535,y[E]=m<<16|b}return new a(y,y[y.length-1]&-2147483648?-1:0)};function x(I,g){return I.add(R(g))}n.j=function(I){if(A(this)||A(I))return _;if(N(this))return N(I)?R(this).j(R(I)):R(R(this).j(I));if(N(I))return R(this.j(R(I)));if(0>this.l(C)&&0>I.l(C))return h(this.m()*I.m());for(var g=this.g.length+I.g.length,y=[],v=0;v<2*g;v++)y[v]=0;for(v=0;v<this.g.length;v++)for(var E=0;E<I.g.length;E++){var b=this.i(v)>>>16,m=this.i(v)&65535,rt=I.i(E)>>>16,Nn=I.i(E)&65535;y[2*v+2*E]+=m*Nn,j(y,2*v+2*E),y[2*v+2*E+1]+=b*Nn,j(y,2*v+2*E+1),y[2*v+2*E+1]+=m*rt,j(y,2*v+2*E+1),y[2*v+2*E+2]+=b*rt,j(y,2*v+2*E+2)}for(v=0;v<g;v++)y[v]=y[2*v+1]<<16|y[2*v];for(v=g;v<2*g;v++)y[v]=0;return new a(y,0)};function j(I,g){for(;(I[g]&65535)!=I[g];)I[g+1]+=I[g]>>>16,I[g]&=65535,g++}function U(I,g){this.g=I,this.h=g}function K(I,g){if(A(g))throw Error("division by zero");if(A(I))return new U(_,_);if(N(I))return g=K(R(I),g),new U(R(g.g),R(g.h));if(N(g))return g=K(I,R(g)),new U(R(g.g),g.h);if(30<I.g.length){if(N(I)||N(g))throw Error("slowDivide_ only works with positive integers.");for(var y=w,v=g;0>=v.l(I);)y=Ue(y),v=Ue(v);var E=te(y,1),b=te(v,1);for(v=te(v,2),y=te(y,2);!A(v);){var m=b.add(v);0>=m.l(I)&&(E=E.add(y),b=m),v=te(v,1),y=te(y,1)}return g=x(I,E.j(g)),new U(E,g)}for(E=_;0<=I.l(g);){for(y=Math.max(1,Math.floor(I.m()/g.m())),v=Math.ceil(Math.log(y)/Math.LN2),v=48>=v?1:Math.pow(2,v-48),b=h(y),m=b.j(g);N(m)||0<m.l(I);)y-=v,b=h(y),m=b.j(g);A(b)&&(b=w),E=E.add(b),I=x(I,m)}return new U(E,I)}n.A=function(I){return K(this,I).h},n.and=function(I){for(var g=Math.max(this.g.length,I.g.length),y=[],v=0;v<g;v++)y[v]=this.i(v)&I.i(v);return new a(y,this.h&I.h)},n.or=function(I){for(var g=Math.max(this.g.length,I.g.length),y=[],v=0;v<g;v++)y[v]=this.i(v)|I.i(v);return new a(y,this.h|I.h)},n.xor=function(I){for(var g=Math.max(this.g.length,I.g.length),y=[],v=0;v<g;v++)y[v]=this.i(v)^I.i(v);return new a(y,this.h^I.h)};function Ue(I){for(var g=I.g.length+1,y=[],v=0;v<g;v++)y[v]=I.i(v)<<1|I.i(v-1)>>>31;return new a(y,I.h)}function te(I,g){var y=g>>5;g%=32;for(var v=I.g.length-y,E=[],b=0;b<v;b++)E[b]=0<g?I.i(b+y)>>>g|I.i(b+y+1)<<32-g:I.i(b+y);return new a(E,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,GM=zM.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=p,sm=zM.Integer=a}).apply(typeof HM<"u"?HM:typeof self<"u"?self:typeof window<"u"?window:{});var om=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ni={};var WM,R9,KM,QM,YM,JM,XM,ZM,ex;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,d){return o==Array.prototype||o==Object.prototype||(o[u]=d.value),o};function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof om=="object"&&om];for(var u=0;u<o.length;++u){var d=o[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=t(this);function i(o,u){if(u)e:{var d=r;o=o.split(".");for(var f=0;f<o.length-1;f++){var T=o[f];if(!(T in d))break e;d=d[T]}o=o[o.length-1],f=d[o],u=u(f),u!=f&&u!=null&&e(d,o,{configurable:!0,writable:!0,value:u})}}function s(o,u){o instanceof String&&(o+="");var d=0,f=!1,T={next:function(){if(!f&&d<o.length){var D=d++;return{value:u(D,o[D]),done:!1}}return f=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(o){return o||function(){return s(this,function(u,d){return d})}});var a=a||{},c=this||self;function l(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function h(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function p(o,u,d){return o.call.apply(o.bind,arguments)}function _(o,u,d){if(!o)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,f),o.apply(u,T)}}return function(){return o.apply(u,arguments)}}function w(o,u,d){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:_,w.apply(null,arguments)}function C(o,u){var d=Array.prototype.slice.call(arguments,1);return function(){var f=d.slice();return f.push.apply(f,arguments),o.apply(this,f)}}function A(o,u){function d(){}d.prototype=u.prototype,o.aa=u.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(f,T,D){for(var S=Array(arguments.length-2),G=2;G<arguments.length;G++)S[G-2]=arguments[G];return u.prototype[T].apply(f,S)}}function N(o){let u=o.length;if(0<u){let d=Array(u);for(let f=0;f<u;f++)d[f]=o[f];return d}return[]}function R(o,u){for(let d=1;d<arguments.length;d++){let f=arguments[d];if(l(f)){let T=o.length||0,D=f.length||0;o.length=T+D;for(let S=0;S<D;S++)o[T+S]=f[S]}else o.push(f)}}class x{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function j(o){return/^[\s\xa0]*$/.test(o)}function U(){var o=c.navigator;return o&&(o=o.userAgent)?o:""}function K(o){return K[" "](o),o}K[" "]=function(){};var Ue=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function te(o,u,d){for(let f in o)u.call(d,o[f],f,o)}function I(o,u){for(let d in o)u.call(void 0,o[d],d,o)}function g(o){let u={};for(let d in o)u[d]=o[d];return u}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function v(o,u){let d,f;for(let T=1;T<arguments.length;T++){f=arguments[T];for(d in f)o[d]=f[d];for(let D=0;D<y.length;D++)d=y[D],Object.prototype.hasOwnProperty.call(f,d)&&(o[d]=f[d])}}function E(o){var u=1;o=o.split(":");let d=[];for(;0<u&&o.length;)d.push(o.shift()),u--;return o.length&&d.push(o.join(":")),d}function b(o){c.setTimeout(()=>{throw o},0)}function m(){var o=gs;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class rt{constructor(){this.h=this.g=null}add(u,d){let f=Nn.get();f.set(u,d),this.h?this.h.next=f:this.g=f,this.h=f}}var Nn=new x(()=>new _m,o=>o.reset());class _m{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let Pn,Mn=!1,gs=new rt,Oc=()=>{let o=c.Promise.resolve(void 0);Pn=()=>{o.then(vm)}};var vm=()=>{for(var o;o=m();){try{o.h.call(o.g)}catch(d){b(d)}var u=Nn;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}Mn=!1};function mt(){this.s=this.s,this.C=this.C}mt.prototype.s=!1,mt.prototype.ma=function(){this.s||(this.s=!0,this.N())},mt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var Em=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{let d=()=>{};c.addEventListener("test",d,u),c.removeEventListener("test",d,u)}catch{}return o})();function xn(o,u){if(Ee.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,f=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(Ue){e:{try{K(u.nodeName);var T=!0;break e}catch{}T=!1}T||(u=null)}}else d=="mouseover"?u=o.fromElement:d=="mouseout"&&(u=o.toElement);this.relatedTarget=u,f?(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Im[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&xn.aa.h.call(this)}}A(xn,Ee);var Im={2:"touch",3:"pen",4:"mouse"};xn.prototype.h=function(){xn.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var kn="closure_listenable_"+(1e6*Math.random()|0),wm=0;function Tm(o,u,d,f,T){this.listener=o,this.proxy=null,this.src=u,this.type=d,this.capture=!!f,this.ha=T,this.key=++wm,this.da=this.fa=!1}function Hr(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function zr(o){this.src=o,this.g={},this.h=0}zr.prototype.add=function(o,u,d,f,T){var D=o.toString();o=this.g[D],o||(o=this.g[D]=[],this.h++);var S=ys(o,u,f,T);return-1<S?(u=o[S],d||(u.fa=!1)):(u=new Tm(u,this.src,D,!!f,T),u.fa=d,o.push(u)),u};function ms(o,u){var d=u.type;if(d in o.g){var f=o.g[d],T=Array.prototype.indexOf.call(f,u,void 0),D;(D=0<=T)&&Array.prototype.splice.call(f,T,1),D&&(Hr(u),o.g[d].length==0&&(delete o.g[d],o.h--))}}function ys(o,u,d,f){for(var T=0;T<o.length;++T){var D=o[T];if(!D.da&&D.listener==u&&D.capture==!!d&&D.ha==f)return T}return-1}var _s="closure_lm_"+(1e6*Math.random()|0),vs={};function Fc(o,u,d,f,T){if(f&&f.once)return Lc(o,u,d,f,T);if(Array.isArray(u)){for(var D=0;D<u.length;D++)Fc(o,u[D],d,f,T);return null}return d=Ts(d),o&&o[kn]?o.K(u,d,h(f)?!!f.capture:!!f,T):Vc(o,u,d,!1,f,T)}function Vc(o,u,d,f,T,D){if(!u)throw Error("Invalid event type");var S=h(T)?!!T.capture:!!T,G=Is(o);if(G||(o[_s]=G=new zr(o)),d=G.add(u,d,f,S,D),d.proxy)return d;if(f=bm(),d.proxy=f,f.src=o,f.listener=d,o.addEventListener)Em||(T=S),T===void 0&&(T=!1),o.addEventListener(u.toString(),f,T);else if(o.attachEvent)o.attachEvent(jc(u.toString()),f);else if(o.addListener&&o.removeListener)o.addListener(f);else throw Error("addEventListener and attachEvent are unavailable.");return d}function bm(){function o(d){return u.call(o.src,o.listener,d)}let u=Dm;return o}function Lc(o,u,d,f,T){if(Array.isArray(u)){for(var D=0;D<u.length;D++)Lc(o,u[D],d,f,T);return null}return d=Ts(d),o&&o[kn]?o.L(u,d,h(f)?!!f.capture:!!f,T):Vc(o,u,d,!0,f,T)}function Uc(o,u,d,f,T){if(Array.isArray(u))for(var D=0;D<u.length;D++)Uc(o,u[D],d,f,T);else f=h(f)?!!f.capture:!!f,d=Ts(d),o&&o[kn]?(o=o.i,u=String(u).toString(),u in o.g&&(D=o.g[u],d=ys(D,d,f,T),-1<d&&(Hr(D[d]),Array.prototype.splice.call(D,d,1),D.length==0&&(delete o.g[u],o.h--)))):o&&(o=Is(o))&&(u=o.g[u.toString()],o=-1,u&&(o=ys(u,d,f,T)),(d=-1<o?u[o]:null)&&Es(d))}function Es(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[kn])ms(u.i,o);else{var d=o.type,f=o.proxy;u.removeEventListener?u.removeEventListener(d,f,o.capture):u.detachEvent?u.detachEvent(jc(d),f):u.addListener&&u.removeListener&&u.removeListener(f),(d=Is(u))?(ms(d,o),d.h==0&&(d.src=null,u[_s]=null)):Hr(o)}}}function jc(o){return o in vs?vs[o]:vs[o]="on"+o}function Dm(o,u){if(o.da)o=!0;else{u=new xn(u,this);var d=o.listener,f=o.ha||o.src;o.fa&&Es(o),o=d.call(f,u)}return o}function Is(o){return o=o[_s],o instanceof zr?o:null}var ws="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ts(o){return typeof o=="function"?o:(o[ws]||(o[ws]=function(u){return o.handleEvent(u)}),o[ws])}function Ie(){mt.call(this),this.i=new zr(this),this.M=this,this.F=null}A(Ie,mt),Ie.prototype[kn]=!0,Ie.prototype.removeEventListener=function(o,u,d,f){Uc(this,o,u,d,f)};function Ce(o,u){var d,f=o.F;if(f)for(d=[];f;f=f.F)d.push(f);if(o=o.M,f=u.type||u,typeof u=="string")u=new Ee(u,o);else if(u instanceof Ee)u.target=u.target||o;else{var T=u;u=new Ee(f,o),v(u,T)}if(T=!0,d)for(var D=d.length-1;0<=D;D--){var S=u.g=d[D];T=Gr(S,f,!0,u)&&T}if(S=u.g=o,T=Gr(S,f,!0,u)&&T,T=Gr(S,f,!1,u)&&T,d)for(D=0;D<d.length;D++)S=u.g=d[D],T=Gr(S,f,!1,u)&&T}Ie.prototype.N=function(){if(Ie.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var d=o.g[u],f=0;f<d.length;f++)Hr(d[f]);delete o.g[u],o.h--}}this.F=null},Ie.prototype.K=function(o,u,d,f){return this.i.add(String(o),u,!1,d,f)},Ie.prototype.L=function(o,u,d,f){return this.i.add(String(o),u,!0,d,f)};function Gr(o,u,d,f){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var T=!0,D=0;D<u.length;++D){var S=u[D];if(S&&!S.da&&S.capture==d){var G=S.listener,me=S.ha||S.src;S.fa&&ms(o.i,S),T=G.call(me,f)!==!1&&T}}return T&&!f.defaultPrevented}function Bc(o,u,d){if(typeof o=="function")d&&(o=w(o,d));else if(o&&typeof o.handleEvent=="function")o=w(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(o,u||0)}function $c(o){o.g=Bc(()=>{o.g=null,o.i&&(o.i=!1,$c(o))},o.l);let u=o.h;o.h=null,o.m.apply(null,u)}class Cm extends mt{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:$c(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function On(o){mt.call(this),this.h=o,this.g={}}A(On,mt);var qc=[];function Hc(o){te(o.g,function(u,d){this.g.hasOwnProperty(d)&&Es(u)},o),o.g={}}On.prototype.N=function(){On.aa.N.call(this),Hc(this)},On.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bs=c.JSON.stringify,Am=c.JSON.parse,Sm=class{stringify(o){return c.JSON.stringify(o,void 0)}parse(o){return c.JSON.parse(o,void 0)}};function Ds(){}Ds.prototype.h=null;function zc(o){return o.h||(o.h=o.i())}function Gc(){}var Fn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Cs(){Ee.call(this,"d")}A(Cs,Ee);function As(){Ee.call(this,"c")}A(As,Ee);var kt={},Wc=null;function Wr(){return Wc=Wc||new Ie}kt.La="serverreachability";function Kc(o){Ee.call(this,kt.La,o)}A(Kc,Ee);function Vn(o){let u=Wr();Ce(u,new Kc(u))}kt.STAT_EVENT="statevent";function Qc(o,u){Ee.call(this,kt.STAT_EVENT,o),this.stat=u}A(Qc,Ee);function Ae(o){let u=Wr();Ce(u,new Qc(u,o))}kt.Ma="timingevent";function Yc(o,u){Ee.call(this,kt.Ma,o),this.size=u}A(Yc,Ee);function Ln(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){o()},u)}function Un(){this.g=!0}Un.prototype.xa=function(){this.g=!1};function Rm(o,u,d,f,T,D){o.info(function(){if(o.g)if(D)for(var S="",G=D.split("&"),me=0;me<G.length;me++){var L=G[me].split("=");if(1<L.length){var we=L[0];L=L[1];var Te=we.split("_");S=2<=Te.length&&Te[1]=="type"?S+(we+"="+L+"&"):S+(we+"=redacted&")}}else S=null;else S=D;return"XMLHTTP REQ ("+f+") [attempt "+T+"]: "+u+`
`+d+`
`+S})}function Nm(o,u,d,f,T,D,S){o.info(function(){return"XMLHTTP RESP ("+f+") [ attempt "+T+"]: "+u+`
`+d+`
`+D+" "+S})}function Xt(o,u,d,f){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+Mm(o,d)+(f?" "+f:"")})}function Pm(o,u){o.info(function(){return"TIMEOUT: "+u})}Un.prototype.info=function(){};function Mm(o,u){if(!o.g)return u;if(!u)return null;try{var d=JSON.parse(u);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var f=d[o];if(!(2>f.length)){var T=f[1];if(Array.isArray(T)&&!(1>T.length)){var D=T[0];if(D!="noop"&&D!="stop"&&D!="close")for(var S=1;S<T.length;S++)T[S]=""}}}}return bs(d)}catch{return u}}var Kr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ss;function Qr(){}A(Qr,Ds),Qr.prototype.g=function(){return new XMLHttpRequest},Qr.prototype.i=function(){return{}},Ss=new Qr;function yt(o,u,d,f){this.j=o,this.i=u,this.l=d,this.R=f||1,this.U=new On(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xc}function Xc(){this.i=null,this.g="",this.h=!1}var Zc={},Rs={};function Ns(o,u,d){o.L=1,o.v=Zr(it(u)),o.m=d,o.P=!0,eu(o,null)}function eu(o,u){o.F=Date.now(),Yr(o),o.A=it(o.v);var d=o.A,f=o.R;Array.isArray(f)||(f=[String(f)]),pu(d.i,"t",f),o.C=0,d=o.j.J,o.h=new Xc,o.g=Mu(o.j,d?u:null,!o.m),0<o.O&&(o.M=new Cm(w(o.Y,o,o.g),o.O)),u=o.U,d=o.g,f=o.ca;var T="readystatechange";Array.isArray(T)||(T&&(qc[0]=T.toString()),T=qc);for(var D=0;D<T.length;D++){var S=Fc(d,T[D],f||u.handleEvent,!1,u.h||u);if(!S)break;u.g[S.key]=S}u=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),Vn(),Rm(o.i,o.u,o.A,o.l,o.R,o.m)}yt.prototype.ca=function(o){o=o.target;let u=this.M;u&&st(o)==3?u.j():this.Y(o)},yt.prototype.Y=function(o){try{if(o==this.g)e:{let Te=st(this.g);var u=this.g.Ba();let tn=this.g.Z();if(!(3>Te)&&(Te!=3||this.g&&(this.h.h||this.g.oa()||Iu(this.g)))){this.J||Te!=4||u==7||(u==8||0>=tn?Vn(3):Vn(2)),Ps(this);var d=this.g.Z();this.X=d;t:if(tu(this)){var f=Iu(this.g);o="";var T=f.length,D=st(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ot(this),jn(this);var S="";break t}this.h.i=new c.TextDecoder}for(u=0;u<T;u++)this.h.h=!0,o+=this.h.i.decode(f[u],{stream:!(D&&u==T-1)});f.length=0,this.h.g+=o,this.C=0,S=this.h.g}else S=this.g.oa();if(this.o=d==200,Nm(this.i,this.u,this.A,this.l,this.R,Te,d),this.o){if(this.T&&!this.K){t:{if(this.g){var G,me=this.g;if((G=me.g?me.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(G)){var L=G;break t}}L=null}if(d=L)Xt(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ms(this,d);else{this.o=!1,this.s=3,Ae(12),Ot(this),jn(this);break e}}if(this.P){d=!0;let Be;for(;!this.J&&this.C<S.length;)if(Be=xm(this,S),Be==Rs){Te==4&&(this.s=4,Ae(14),d=!1),Xt(this.i,this.l,null,"[Incomplete Response]");break}else if(Be==Zc){this.s=4,Ae(15),Xt(this.i,this.l,S,"[Invalid Chunk]"),d=!1;break}else Xt(this.i,this.l,Be,null),Ms(this,Be);if(tu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Te!=4||S.length!=0||this.h.h||(this.s=1,Ae(16),d=!1),this.o=this.o&&d,!d)Xt(this.i,this.l,S,"[Invalid Chunked Response]"),Ot(this),jn(this);else if(0<S.length&&!this.W){this.W=!0;var we=this.j;we.g==this&&we.ba&&!we.M&&(we.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),Ls(we),we.M=!0,Ae(11))}}else Xt(this.i,this.l,S,null),Ms(this,S);Te==4&&Ot(this),this.o&&!this.J&&(Te==4?Su(this.j,this):(this.o=!1,Yr(this)))}else Ym(this.g),d==400&&0<S.indexOf("Unknown SID")?(this.s=3,Ae(12)):(this.s=0,Ae(13)),Ot(this),jn(this)}}}catch{}finally{}};function tu(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function xm(o,u){var d=o.C,f=u.indexOf(`
`,d);return f==-1?Rs:(d=Number(u.substring(d,f)),isNaN(d)?Zc:(f+=1,f+d>u.length?Rs:(u=u.slice(f,f+d),o.C=f+d,u)))}yt.prototype.cancel=function(){this.J=!0,Ot(this)};function Yr(o){o.S=Date.now()+o.I,nu(o,o.I)}function nu(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Ln(w(o.ba,o),u)}function Ps(o){o.B&&(c.clearTimeout(o.B),o.B=null)}yt.prototype.ba=function(){this.B=null;let o=Date.now();0<=o-this.S?(Pm(this.i,this.A),this.L!=2&&(Vn(),Ae(17)),Ot(this),this.s=2,jn(this)):nu(this,this.S-o)};function jn(o){o.j.G==0||o.J||Su(o.j,o)}function Ot(o){Ps(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,Hc(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function Ms(o,u){try{var d=o.j;if(d.G!=0&&(d.g==o||xs(d.h,o))){if(!o.K&&xs(d.h,o)&&d.G==3){try{var f=d.Da.g.parse(u)}catch{f=null}if(Array.isArray(f)&&f.length==3){var T=f;if(T[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)ii(d),ni(d);else break e;Vs(d),Ae(18)}}else d.za=T[1],0<d.za-d.T&&37500>T[2]&&d.F&&d.v==0&&!d.C&&(d.C=Ln(w(d.Za,d),6e3));if(1>=su(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else Vt(d,11)}else if((o.K||d.g==o)&&ii(d),!j(u))for(T=d.Da.g.parse(u),u=0;u<T.length;u++){let L=T[u];if(d.T=L[0],L=L[1],d.G==2)if(L[0]=="c"){d.K=L[1],d.ia=L[2];let we=L[3];we!=null&&(d.la=we,d.j.info("VER="+d.la));let Te=L[4];Te!=null&&(d.Aa=Te,d.j.info("SVER="+d.Aa));let tn=L[5];tn!=null&&typeof tn=="number"&&0<tn&&(f=1.5*tn,d.L=f,d.j.info("backChannelRequestTimeoutMs_="+f)),f=d;let Be=o.g;if(Be){let oi=Be.g?Be.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oi){var D=f.h;D.g||oi.indexOf("spdy")==-1&&oi.indexOf("quic")==-1&&oi.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(ks(D,D.h),D.h=null))}if(f.D){let Us=Be.g?Be.g.getResponseHeader("X-HTTP-Session-Id"):null;Us&&(f.ya=Us,Q(f.I,f.D,Us))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),f=d;var S=o;if(f.qa=Pu(f,f.J?f.ia:null,f.W),S.K){ou(f.h,S);var G=S,me=f.L;me&&(G.I=me),G.B&&(Ps(G),Yr(G)),f.g=S}else Cu(f);0<d.i.length&&ri(d)}else L[0]!="stop"&&L[0]!="close"||Vt(d,7);else d.G==3&&(L[0]=="stop"||L[0]=="close"?L[0]=="stop"?Vt(d,7):Fs(d):L[0]!="noop"&&d.l&&d.l.ta(L),d.v=0)}}Vn(4)}catch{}}var km=class{constructor(o,u){this.g=o,this.map=u}};function ru(o){this.l=o||10,c.PerformanceNavigationTiming?(o=c.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function iu(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function su(o){return o.h?1:o.g?o.g.size:0}function xs(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function ks(o,u){o.g?o.g.add(u):o.h=u}function ou(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}ru.prototype.cancel=function(){if(this.i=au(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let o of this.g.values())o.cancel();this.g.clear()}};function au(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(let d of o.g.values())u=u.concat(d.D);return u}return N(o.i)}function Om(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(l(o)){for(var u=[],d=o.length,f=0;f<d;f++)u.push(o[f]);return u}u=[],d=0;for(f in o)u[d++]=o[f];return u}function Fm(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(l(o)||typeof o=="string"){var u=[];o=o.length;for(var d=0;d<o;d++)u.push(d);return u}u=[],d=0;for(let f in o)u[d++]=f;return u}}}function cu(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(l(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var d=Fm(o),f=Om(o),T=f.length,D=0;D<T;D++)u.call(void 0,f[D],d&&d[D],o)}var uu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vm(o,u){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var f=o[d].indexOf("="),T=null;if(0<=f){var D=o[d].substring(0,f);T=o[d].substring(f+1)}else D=o[d];u(D,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function Ft(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Ft){this.h=o.h,Jr(this,o.j),this.o=o.o,this.g=o.g,Xr(this,o.s),this.l=o.l;var u=o.i,d=new qn;d.i=u.i,u.g&&(d.g=new Map(u.g),d.h=u.h),lu(this,d),this.m=o.m}else o&&(u=String(o).match(uu))?(this.h=!1,Jr(this,u[1]||"",!0),this.o=Bn(u[2]||""),this.g=Bn(u[3]||"",!0),Xr(this,u[4]),this.l=Bn(u[5]||"",!0),lu(this,u[6]||"",!0),this.m=Bn(u[7]||"")):(this.h=!1,this.i=new qn(null,this.h))}Ft.prototype.toString=function(){var o=[],u=this.j;u&&o.push($n(u,du,!0),":");var d=this.g;return(d||u=="file")&&(o.push("//"),(u=this.o)&&o.push($n(u,du,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push($n(d,d.charAt(0)=="/"?jm:Um,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",$n(d,$m)),o.join("")};function it(o){return new Ft(o)}function Jr(o,u,d){o.j=d?Bn(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function Xr(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function lu(o,u,d){u instanceof qn?(o.i=u,qm(o.i,o.h)):(d||(u=$n(u,Bm)),o.i=new qn(u,o.h))}function Q(o,u,d){o.i.set(u,d)}function Zr(o){return Q(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Bn(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function $n(o,u,d){return typeof o=="string"?(o=encodeURI(o).replace(u,Lm),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Lm(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var du=/[#\/\?@]/g,Um=/[#\?:]/g,jm=/[#\?]/g,Bm=/[#\?@]/g,$m=/#/g;function qn(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function _t(o){o.g||(o.g=new Map,o.h=0,o.i&&Vm(o.i,function(u,d){o.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}n=qn.prototype,n.add=function(o,u){_t(this),this.i=null,o=Zt(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(u),this.h+=1,this};function hu(o,u){_t(o),u=Zt(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function fu(o,u){return _t(o),u=Zt(o,u),o.g.has(u)}n.forEach=function(o,u){_t(this),this.g.forEach(function(d,f){d.forEach(function(T){o.call(u,T,f,this)},this)},this)},n.na=function(){_t(this);let o=Array.from(this.g.values()),u=Array.from(this.g.keys()),d=[];for(let f=0;f<u.length;f++){let T=o[f];for(let D=0;D<T.length;D++)d.push(u[f])}return d},n.V=function(o){_t(this);let u=[];if(typeof o=="string")fu(this,o)&&(u=u.concat(this.g.get(Zt(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)u=u.concat(o[d])}return u},n.set=function(o,u){return _t(this),this.i=null,o=Zt(this,o),fu(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},n.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function pu(o,u,d){hu(o,u),0<d.length&&(o.i=null,o.g.set(Zt(o,u),N(d)),o.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let o=[],u=Array.from(this.g.keys());for(var d=0;d<u.length;d++){var f=u[d];let D=encodeURIComponent(String(f)),S=this.V(f);for(f=0;f<S.length;f++){var T=D;S[f]!==""&&(T+="="+encodeURIComponent(String(S[f]))),o.push(T)}}return this.i=o.join("&")};function Zt(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function qm(o,u){u&&!o.j&&(_t(o),o.i=null,o.g.forEach(function(d,f){var T=f.toLowerCase();f!=T&&(hu(this,f),pu(this,T,d))},o)),o.j=u}function Hm(o,u){let d=new Un;if(c.Image){let f=new Image;f.onload=C(vt,d,"TestLoadImage: loaded",!0,u,f),f.onerror=C(vt,d,"TestLoadImage: error",!1,u,f),f.onabort=C(vt,d,"TestLoadImage: abort",!1,u,f),f.ontimeout=C(vt,d,"TestLoadImage: timeout",!1,u,f),c.setTimeout(function(){f.ontimeout&&f.ontimeout()},1e4),f.src=o}else u(!1)}function zm(o,u){let d=new Un,f=new AbortController,T=setTimeout(()=>{f.abort(),vt(d,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:f.signal}).then(D=>{clearTimeout(T),D.ok?vt(d,"TestPingServer: ok",!0,u):vt(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(T),vt(d,"TestPingServer: error",!1,u)})}function vt(o,u,d,f,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),f(d)}catch{}}function Gm(){this.g=new Sm}function Wm(o,u,d){let f=d||"";try{cu(o,function(T,D){let S=T;h(T)&&(S=bs(T)),u.push(f+D+"="+encodeURIComponent(S))})}catch(T){throw u.push(f+"type="+encodeURIComponent("_badmap")),T}}function Hn(o){this.l=o.Ub||null,this.j=o.eb||!1}A(Hn,Ds),Hn.prototype.g=function(){return new ei(this.l,this.j)},Hn.prototype.i=(function(o){return function(){return o}})({});function ei(o,u){Ie.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(ei,Ie),n=ei.prototype,n.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,Gn(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zn(this)),this.readyState=0},n.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Gn(this)),this.g&&(this.readyState=3,Gn(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gu(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function gu(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}n.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?zn(this):Gn(this),this.readyState==3&&gu(this)}},n.Ra=function(o){this.g&&(this.response=this.responseText=o,zn(this))},n.Qa=function(o){this.g&&(this.response=o,zn(this))},n.ga=function(){this.g&&zn(this)};function zn(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Gn(o)}n.setRequestHeader=function(o,u){this.u.append(o,u)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let o=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=u.next();return o.join(`\r
`)};function Gn(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(ei.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function mu(o){let u="";return te(o,function(d,f){u+=f,u+=":",u+=d,u+=`\r
`}),u}function Os(o,u,d){e:{for(f in d){var f=!1;break e}f=!0}f||(d=mu(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):Q(o,u,d))}function X(o){Ie.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(X,Ie);var Km=/^https?$/i,Qm=["POST","PUT"];n=X.prototype,n.Ha=function(o){this.J=o},n.ea=function(o,u,d,f){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ss.g(),this.v=this.o?zc(this.o):zc(Ss),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(D){yu(this,D);return}if(o=d||"",d=new Map(this.headers),f)if(Object.getPrototypeOf(f)===Object.prototype)for(var T in f)d.set(T,f[T]);else if(typeof f.keys=="function"&&typeof f.get=="function")for(let D of f.keys())d.set(D,f.get(D));else throw Error("Unknown input type for opt_headers: "+String(f));f=Array.from(d.keys()).find(D=>D.toLowerCase()=="content-type"),T=c.FormData&&o instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Qm,u,void 0))||f||T||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[D,S]of d)this.g.setRequestHeader(D,S);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Eu(this),this.u=!0,this.g.send(o),this.u=!1}catch(D){yu(this,D)}};function yu(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,_u(o),ti(o)}function _u(o){o.A||(o.A=!0,Ce(o,"complete"),Ce(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Ce(this,"complete"),Ce(this,"abort"),ti(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ti(this,!0)),X.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?vu(this):this.bb())},n.bb=function(){vu(this)};function vu(o){if(o.h&&typeof a<"u"&&(!o.v[1]||st(o)!=4||o.Z()!=2)){if(o.u&&st(o)==4)Bc(o.Ea,0,o);else if(Ce(o,"readystatechange"),st(o)==4){o.h=!1;try{let S=o.Z();e:switch(S){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var d;if(!(d=u)){var f;if(f=S===0){var T=String(o.D).match(uu)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),f=!Km.test(T?T.toLowerCase():"")}d=f}if(d)Ce(o,"complete"),Ce(o,"success");else{o.m=6;try{var D=2<st(o)?o.g.statusText:""}catch{D=""}o.l=D+" ["+o.Z()+"]",_u(o)}}finally{ti(o)}}}}function ti(o,u){if(o.g){Eu(o);let d=o.g,f=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||Ce(o,"ready");try{d.onreadystatechange=f}catch{}}}function Eu(o){o.I&&(c.clearTimeout(o.I),o.I=null)}n.isActive=function(){return!!this.g};function st(o){return o.g?o.g.readyState:0}n.Z=function(){try{return 2<st(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),Am(u)}};function Iu(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Ym(o){let u={};o=(o.g&&2<=st(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let f=0;f<o.length;f++){if(j(o[f]))continue;var d=E(o[f]);let T=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();let D=u[T]||[];u[T]=D,D.push(d)}I(u,function(f){return f.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wn(o,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||u}function wu(o){this.Aa=0,this.i=[],this.j=new Un,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wn("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wn("baseRetryDelayMs",5e3,o),this.cb=Wn("retryDelaySeedMs",1e4,o),this.Wa=Wn("forwardChannelMaxRetries",2,o),this.wa=Wn("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new ru(o&&o.concurrentRequestLimit),this.Da=new Gm,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=wu.prototype,n.la=8,n.G=1,n.connect=function(o,u,d,f){Ae(0),this.W=o,this.H=u||{},d&&f!==void 0&&(this.H.OSID=d,this.H.OAID=f),this.F=this.X,this.I=Pu(this,null,this.W),ri(this)};function Fs(o){if(Tu(o),o.G==3){var u=o.U++,d=it(o.I);if(Q(d,"SID",o.K),Q(d,"RID",u),Q(d,"TYPE","terminate"),Kn(o,d),u=new yt(o,o.j,u),u.L=2,u.v=Zr(it(d)),d=!1,c.navigator&&c.navigator.sendBeacon)try{d=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!d&&c.Image&&(new Image().src=u.v,d=!0),d||(u.g=Mu(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Yr(u)}Nu(o)}function ni(o){o.g&&(Ls(o),o.g.cancel(),o.g=null)}function Tu(o){ni(o),o.u&&(c.clearTimeout(o.u),o.u=null),ii(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&c.clearTimeout(o.s),o.s=null)}function ri(o){if(!iu(o.h)&&!o.s){o.s=!0;var u=o.Ga;Pn||Oc(),Mn||(Pn(),Mn=!0),gs.add(u,o),o.B=0}}function Jm(o,u){return su(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Ln(w(o.Ga,o,u),Ru(o,o.B)),o.B++,!0)}n.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;let T=new yt(this,this.j,o),D=this.o;if(this.S&&(D?(D=g(D),v(D,this.S)):D=this.S),this.m!==null||this.O||(T.H=D,D=null),this.P)e:{for(var u=0,d=0;d<this.i.length;d++){t:{var f=this.i[d];if("__data__"in f.map&&(f=f.map.__data__,typeof f=="string")){f=f.length;break t}f=void 0}if(f===void 0)break;if(u+=f,4096<u){u=d;break e}if(u===4096||d===this.i.length-1){u=d+1;break e}}u=1e3}else u=1e3;u=Du(this,T,u),d=it(this.I),Q(d,"RID",o),Q(d,"CVER",22),this.D&&Q(d,"X-HTTP-Session-Id",this.D),Kn(this,d),D&&(this.O?u="headers="+encodeURIComponent(String(mu(D)))+"&"+u:this.m&&Os(d,this.m,D)),ks(this.h,T),this.Ua&&Q(d,"TYPE","init"),this.P?(Q(d,"$req",u),Q(d,"SID","null"),T.T=!0,Ns(T,d,null)):Ns(T,d,u),this.G=2}}else this.G==3&&(o?bu(this,o):this.i.length==0||iu(this.h)||bu(this))};function bu(o,u){var d;u?d=u.l:d=o.U++;let f=it(o.I);Q(f,"SID",o.K),Q(f,"RID",d),Q(f,"AID",o.T),Kn(o,f),o.m&&o.o&&Os(f,o.m,o.o),d=new yt(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),u&&(o.i=u.D.concat(o.i)),u=Du(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),ks(o.h,d),Ns(d,f,u)}function Kn(o,u){o.H&&te(o.H,function(d,f){Q(u,f,d)}),o.l&&cu({},function(d,f){Q(u,f,d)})}function Du(o,u,d){d=Math.min(o.i.length,d);var f=o.l?w(o.l.Na,o.l,o):null;e:{var T=o.i;let D=-1;for(;;){let S=["count="+d];D==-1?0<d?(D=T[0].g,S.push("ofs="+D)):D=0:S.push("ofs="+D);let G=!0;for(let me=0;me<d;me++){let L=T[me].g,we=T[me].map;if(L-=D,0>L)D=Math.max(0,T[me].g-100),G=!1;else try{Wm(we,S,"req"+L+"_")}catch{f&&f(we)}}if(G){f=S.join("&");break e}}}return o=o.i.splice(0,d),u.D=o,f}function Cu(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;Pn||Oc(),Mn||(Pn(),Mn=!0),gs.add(u,o),o.v=0}}function Vs(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Ln(w(o.Fa,o),Ru(o,o.v)),o.v++,!0)}n.Fa=function(){if(this.u=null,Au(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Ln(w(this.ab,this),o)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ae(10),ni(this),Au(this))};function Ls(o){o.A!=null&&(c.clearTimeout(o.A),o.A=null)}function Au(o){o.g=new yt(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=it(o.qa);Q(u,"RID","rpc"),Q(u,"SID",o.K),Q(u,"AID",o.T),Q(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&Q(u,"TO",o.ja),Q(u,"TYPE","xmlhttp"),Kn(o,u),o.m&&o.o&&Os(u,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=Zr(it(u)),d.m=null,d.P=!0,eu(d,o)}n.Za=function(){this.C!=null&&(this.C=null,ni(this),Vs(this),Ae(19))};function ii(o){o.C!=null&&(c.clearTimeout(o.C),o.C=null)}function Su(o,u){var d=null;if(o.g==u){ii(o),Ls(o),o.g=null;var f=2}else if(xs(o.h,u))d=u.D,ou(o.h,u),f=1;else return;if(o.G!=0){if(u.o)if(f==1){d=u.m?u.m.length:0,u=Date.now()-u.F;var T=o.B;f=Wr(),Ce(f,new Yc(f,d)),ri(o)}else Cu(o);else if(T=u.s,T==3||T==0&&0<u.X||!(f==1&&Jm(o,u)||f==2&&Vs(o)))switch(d&&0<d.length&&(u=o.h,u.i=u.i.concat(d)),T){case 1:Vt(o,5);break;case 4:Vt(o,10);break;case 3:Vt(o,6);break;default:Vt(o,2)}}}function Ru(o,u){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*u}function Vt(o,u){if(o.j.info("Error code "+u),u==2){var d=w(o.fb,o),f=o.Xa;let T=!f;f=new Ft(f||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Jr(f,"https"),Zr(f),T?Hm(f.toString(),d):zm(f.toString(),d)}else Ae(2);o.G=0,o.l&&o.l.sa(u),Nu(o),Tu(o)}n.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Ae(2)):(this.j.info("Failed to ping google.com"),Ae(1))};function Nu(o){if(o.G=0,o.ka=[],o.l){let u=au(o.h);(u.length!=0||o.i.length!=0)&&(R(o.ka,u),R(o.ka,o.i),o.h.i.length=0,N(o.i),o.i.length=0),o.l.ra()}}function Pu(o,u,d){var f=d instanceof Ft?it(d):new Ft(d);if(f.g!="")u&&(f.g=u+"."+f.g),Xr(f,f.s);else{var T=c.location;f=T.protocol,u=u?u+"."+T.hostname:T.hostname,T=+T.port;var D=new Ft(null);f&&Jr(D,f),u&&(D.g=u),T&&Xr(D,T),d&&(D.l=d),f=D}return d=o.D,u=o.ya,d&&u&&Q(f,d,u),Q(f,"VER",o.la),Kn(o,f),f}function Mu(o,u,d){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new X(new Hn({eb:d})):new X(o.pa),u.Ha(o.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function xu(){}n=xu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function si(){}si.prototype.g=function(o,u){return new Fe(o,u)};function Fe(o,u){Ie.call(this),this.g=new wu(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!j(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!j(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new en(this)}A(Fe,Ie),Fe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Fe.prototype.close=function(){Fs(this.g)},Fe.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=bs(o),o=d);u.i.push(new km(u.Ya++,o)),u.G==3&&ri(u)},Fe.prototype.N=function(){this.g.l=null,delete this.j,Fs(this.g),delete this.g,Fe.aa.N.call(this)};function ku(o){Cs.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(let d in u){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}A(ku,Cs);function Ou(){As.call(this),this.status=1}A(Ou,As);function en(o){this.g=o}A(en,xu),en.prototype.ua=function(){Ce(this.g,"a")},en.prototype.ta=function(o){Ce(this.g,new ku(o))},en.prototype.sa=function(o){Ce(this.g,new Ou)},en.prototype.ra=function(){Ce(this.g,"b")},si.prototype.createWebChannel=si.prototype.g,Fe.prototype.send=Fe.prototype.o,Fe.prototype.open=Fe.prototype.m,Fe.prototype.close=Fe.prototype.close,ex=Ni.createWebChannelTransport=function(){return new si},ZM=Ni.getStatEventTarget=function(){return Wr()},XM=Ni.Event=kt,JM=Ni.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Kr.NO_ERROR=0,Kr.TIMEOUT=8,Kr.HTTP_ERROR=6,YM=Ni.ErrorCode=Kr,Jc.COMPLETE="complete",QM=Ni.EventType=Jc,Gc.EventType=Fn,Fn.OPEN="a",Fn.CLOSE="b",Fn.ERROR="c",Fn.MESSAGE="d",Ie.prototype.listen=Ie.prototype.K,KM=Ni.WebChannel=Gc,R9=Ni.FetchXmlHttpFactory=Hn,X.prototype.listenOnce=X.prototype.L,X.prototype.getLastError=X.prototype.Ka,X.prototype.getLastErrorCode=X.prototype.Ba,X.prototype.getStatus=X.prototype.Z,X.prototype.getResponseJson=X.prototype.Oa,X.prototype.getResponseText=X.prototype.oa,X.prototype.send=X.prototype.ea,X.prototype.setWithCredentials=X.prototype.Ha,WM=Ni.XhrIo=X}).apply(typeof om<"u"?om:typeof self<"u"?self:typeof window<"u"?window:{});var tx="@firebase/firestore",nx="4.8.0";var Dt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Dt.UNAUTHENTICATED=new Dt(null),Dt.GOOGLE_CREDENTIALS=new Dt("google-credentials-uid"),Dt.FIRST_PARTY=new Dt("first-party-uid"),Dt.MOCK_USER=new Dt("mock-user");var eh="11.10.0";var xc=new Br("@firebase/firestore");function _r(n,...e){if(xc.logLevel<=Re.DEBUG){let t=e.map(Fb);xc.debug(`Firestore (${eh}): ${n}`,...t)}}function gx(n,...e){if(xc.logLevel<=Re.ERROR){let t=e.map(Fb);xc.error(`Firestore (${eh}): ${n}`,...t)}}function N9(n,...e){if(xc.logLevel<=Re.WARN){let t=e.map(Fb);xc.warn(`Firestore (${eh}): ${n}`,...t)}}function Fb(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Jt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,mx(n,r,t)}function mx(n,e,t){let r=`FIRESTORE (${eh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw gx(r),new Error(r)}function zo(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||mx(e,i,r)}var ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ge=class extends An{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Go=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var am=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},yb=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Dt.UNAUTHENTICATED))}shutdown(){}},_b=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},vb=class{constructor(e){this.t=e,this.currentUser=Dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){zo(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),s=new Go;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Go,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},c=l=>{_r("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(_r("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Go)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(_r("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(zo(typeof r.accessToken=="string",31837,{l:r}),new am(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return zo(e===null||typeof e=="string",2055,{h:e}),new Dt(e)}},Eb=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Ib=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Eb(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},cm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},wb=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ri(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){zo(this.o===void 0,3512);let r=s=>{s.error!=null&&_r("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let a=s.token!==this.m;return this.m=s.token,_r("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{_r("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):_r("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new cm(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(zo(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new cm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function P9(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function M9(){return new TextEncoder}var Tb=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=P9(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Rn(n,e){return n<e?-1:n>e?1:0}function x9(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Rn(r,i);{let s=M9(),a=k9(s.encode(rx(n,t)),s.encode(rx(e,t)));return a!==0?a:Rn(r,i)}}t+=r>65535?2:1}return Rn(n.length,e.length)}function rx(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function k9(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Rn(n[t],e[t]);return Rn(n.length,e.length)}var ix="__name__",um=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Jt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Jt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Rn(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):x9(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return sm.fromString(e.substring(4,e.length-2))}},Pi=class n extends um{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ge(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},O9=/^[_a-zA-Z][_a-zA-Z0-9]*$/,bb=class n extends um{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return O9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ix}static keyField(){return new n([ix])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new ge(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new ge(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ge(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new ge(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Mi=class n{constructor(e){this.path=e}static fromPath(e){return new n(Pi.fromString(e))}static fromName(e){return new n(Pi.fromString(e).popFirst(5))}static empty(){return new n(Pi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pi.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Pi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Pi(e.slice()))}};function F9(n,e,t,r){if(e===!0&&r===!0)throw new ge(ve.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function V9(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function L9(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Jt(12329,{type:typeof n})}function U9(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=L9(n);throw new ge(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function nt(n,e){let t={typeString:n};return e&&(t.value=e),t}function th(n,e){if(!V9(n))throw new ge(ve.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new ge(ve.INVALID_ARGUMENT,t);return!0}var sx=-62135596800,ox=1e6,Kd=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*ox);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<sx)throw new ge(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ox}_compareTo(e){return this.seconds===e.seconds?Rn(this.nanoseconds,e.nanoseconds):Rn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(th(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-sx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Kd._jsonSchemaVersion="firestore/timestamp/1.0",Kd._jsonSchema={type:nt("string",Kd._jsonSchemaVersion),seconds:nt("number"),nanoseconds:nt("number")};var Db=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Db.UNKNOWN_ID=-1;function j9(n){return n.name==="IndexedDbTransactionError"}function B9(n){return n===0&&1/n==-1/0}var $9="remoteDocuments",yx="owner";var _x="mutationQueues";var vx="mutations";var Ex="documentMutations",q9="remoteDocumentsV14";var Ix="remoteDocumentGlobal";var wx="targets";var Tx="targetDocuments";var bx="targetGlobal",Dx="collectionParents";var Cx="clientMetadata";var Ax="bundles";var Sx="namedQueries";var H9="indexConfiguration";var z9="indexState";var G9="indexEntries";var Rx="documentOverlays";var W9="globals";var K9=[_x,vx,Ex,$9,wx,yx,bx,Tx,Cx,Ix,Dx,Ax,Sx],Vce=[...K9,Rx],Q9=[_x,vx,Ex,q9,wx,yx,bx,Tx,Cx,Ix,Dx,Ax,Sx,Rx],Y9=Q9,J9=[...Y9,H9,z9,G9];var Lce=[...J9,W9];var kc=class n{constructor(e,t){this.comparator=e,this.root=t||qr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rc(this.root,e,this.comparator,!0)}},Rc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},qr=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Jt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Jt(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Jt(27949);return e+(this.isRed()?0:1)}};qr.EMPTY=null,qr.RED=!0,qr.BLACK=!1;qr.EMPTY=new class{constructor(){this.size=0}get key(){throw Jt(57766)}get value(){throw Jt(16141)}get color(){throw Jt(16727)}get left(){throw Jt(29726)}get right(){throw Jt(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new qr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var lm=class n{constructor(e){this.comparator=e,this.data=new kc(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dm(this.data.getIterator())}getIteratorFrom(e){return new dm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},dm=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Cb=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ps=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Cb("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ps.EMPTY_BYTE_STRING=new ps("");var X9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Z9(n){if(zo(!!n,39018),typeof n=="string"){let e=0,t=X9.exec(n);if(zo(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qd(n.seconds),nanos:Qd(n.nanos)}}function Qd(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function e6(n){return typeof n=="string"?ps.fromBase64String(n):ps.fromUint8Array(n)}var Ab="(default)",Sb=class n{constructor(e,t){this.projectId=e,this.database=t||Ab}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Ab}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Nx="__type__",t6="__max__";var Px="__vector__",Mx="value";function n6(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Nx])===null||t===void 0?void 0:t.stringValue)===Px}function r6(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===t6}var jce={mapValue:{fields:{[Nx]:{stringValue:Px},[Mx]:{arrayValue:{}}}}};var Rb=class{constructor(e,t=null,r=[],i=[],s=null,a="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function i6(n){return new Rb(n)}var Bce=new kc(Mi.comparator);var $ce=new kc(Mi.comparator);var qce=new kc(Mi.comparator),Hce=new lm(Mi.comparator);var zce=new lm(Rn);var ax,_e;(_e=ax||(ax={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";var Gce=new sm([4294967295,4294967295],0);var hm=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Qd(e.integerValue));else if("doubleValue"in e){let r=Qd(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),B9(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Z9(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(e6(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?r6(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):n6(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Jt(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let s=e.fields||{};this.Ct(t,53);let a=Mx,c=((i=(r=s[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Qd(c)),this.xt(a,t),this.Dt(s[a],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),Mi.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};hm.Ut=new hm;var Wce=new Uint8Array(0);var xx=41943040,$r=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};$r.DEFAULT_COLLECTION_PERCENTILE=10,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$r.DEFAULT=new $r(xx,$r.DEFAULT_COLLECTION_PERCENTILE,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$r.DISABLED=new $r(-1,0,0);var s6=1048576;function mb(){return typeof document<"u"?document:null}var Nb=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&_r("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var Pb=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Go,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let a=Date.now()+r,c=new n(e,t,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var cx,ux;(ux=cx||(cx={})).Fa="default",ux.Cache="cache";function o6(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var lx=new Map;var kx="firestore.googleapis.com",dx=!0,fm=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kx,this.ssl=dx}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:dx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<s6)throw new ge(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}F9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=o6((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ge(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ge(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ge(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},pm=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new yb;switch(r.type){case"firstParty":return new Ib(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=lx.get(t);r&&(_r("ComponentProvider","Removing Datastore"),lx.delete(t),r.terminate())})(this),Promise.resolve()}};function Ox(n,e,t,r={}){var i;n=U9(n,pm);let s=Tc(e),a=n._getSettings(),c=Object.assign(Object.assign({},a),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;s&&(FT(`https://${l}`),VT("Firestore",!0)),a.host!==kx&&a.host!==l&&N9("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let h=Object.assign(Object.assign({},a),{host:l,ssl:s,emulatorOptions:r});if(!Oo(h,c)&&(n._setSettings(h),r.mockUserToken)){let p,_;if(typeof r.mockUserToken=="string")p=r.mockUserToken,_=Dt.MOCK_USER;else{p=XP(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new ge(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Dt(w)}n._authCredentials=new _b(new am(p,_))}}var Mb=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Wo=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xb(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(th(t,n._jsonSchema))return new n(e,r||null,new Mi(Pi.fromString(t.referencePath)))}};Wo._jsonSchemaVersion="firestore/documentReference/1.0",Wo._jsonSchema={type:nt("string",Wo._jsonSchemaVersion),referencePath:nt("string")};var xb=class n extends Mb{constructor(e,t,r){super(e,t,i6(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Wo(this.firestore,null,new Mi(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var hx="AsyncQueue",gm=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Nb(this,"async_queue_retry"),this.oc=()=>{let r=mb();r&&_r(hx,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=mb();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=mb();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Go;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!j9(e))throw e;_r(hx,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,gx("INTERNAL UNHANDLED ERROR: ",fx(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=Pb.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&Jt(47125,{hc:fx(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function fx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var kb=class extends pm{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new gm,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new gm(e),this._firestoreClient=void 0,await e}}};function Fx(n,e){let t=typeof n=="object"?n:Dc(),r=typeof n=="string"?n:e||Ab,i=Bg(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=YP("firestore");s&&Ox(i,...s)}return i}var Yd=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ps.fromBase64String(e))}catch(t){throw new ge(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ps.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(th(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Yd._jsonSchemaVersion="firestore/bytes/1.0",Yd._jsonSchema={type:nt("string",Yd._jsonSchemaVersion),bytes:nt("string")};var mm=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bb(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Jd=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Rn(this._lat,e._lat)||Rn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(th(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Jd._jsonSchemaVersion="firestore/geoPoint/1.0",Jd._jsonSchema={type:nt("string",Jd._jsonSchemaVersion),latitude:nt("number"),longitude:nt("number")};var Xd=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(th(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new ge(ve.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Xd._jsonSchemaVersion="firestore/vectorValue/1.0",Xd._jsonSchema={type:nt("string",Xd._jsonSchemaVersion),vectorValues:nt("object")};var a6=new RegExp("[~\\*/\\[\\]]");function c6(n,e,t){if(e.search(a6)>=0)throw px(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new mm(...e.split("."))._internalPath}catch{throw px(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function px(n,e,t,r,i){let s=r&&!r.isEmpty(),a=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new ge(ve.INVALID_ARGUMENT,c+n+l)}var ym=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Wo(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Ob(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Vx("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Ob=class extends ym{data(){return super.data()}};function Vx(n,e){return typeof e=="string"?c6(n,e):e instanceof mm?e._internalPath:e._delegate._internalPath}var Nc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Pc=class n extends ym{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Mc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Vx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ve.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Pc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Pc._jsonSchema={type:nt("string",Pc._jsonSchemaVersion),bundleSource:nt("string","DocumentSnapshot"),bundleName:nt("string"),bundle:nt("string")};var Mc=class extends Pc{data(e={}){return super.data(e)}},Zd=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Nc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Mc(this._firestore,this._userDataWriter,r.key,r,new Nc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{let l=new Mc(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Nc(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new Mc(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Nc(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),h=-1,p=-1;return c.type!==0&&(h=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),p=a.indexOf(c.doc.key)),{type:u6(c.type),doc:l,oldIndex:h,newIndex:p}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ve.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Tb.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function u6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Jt(61501,{type:n})}}Zd._jsonSchemaVersion="firestore/querySnapshot/1.0",Zd._jsonSchema={type:nt("string",Zd._jsonSchemaVersion),bundleSource:nt("string","QuerySnapshot"),bundleName:nt("string"),bundle:nt("string")};(function(e,t=!0){(function(i){eh=i})(bc),mr(new Gt("firestore",(r,{instanceIdentifier:i,options:s})=>{let a=r.getProvider("app").getImmediate(),c=new kb(new vb(r.getProvider("auth-internal")),new wb(a,r.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ge(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sb(h.options.projectId,p)})(a,i),a);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Ye(tx,nx,e),Ye(tx,nx,"esm2017")})();var nh=class{constructor(e){return e}},Lx="firestore",Vb=class{constructor(){return Ac(Lx)}};var Lb=new H("angularfire2.firestore-instances");function l6(n,e){let t=Hg(Lx,n,e);return t&&new nh(t)}function d6(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new nh(r)}}var h6={provide:Vb,deps:[[new gi,Lb]]},f6={provide:nh,useFactory:l6,deps:[[new gi,Lb],Bo]};function Ux(n,...e){return Ye("angularfire",Uo.full,"fst"),hi([f6,h6,{provide:Lb,useFactory:d6(n),multi:!0,deps:[$e,It,jo,Bd,[new gi,im],[new gi,Gg],...e]}])}var jx=Sc(Fx,!0);var Bx={production:!1,firebaseConfig:{apiKey:"AIzaSyBCEL0W095bO9QdRfWp68FzjIYbTVlu6fw",authDomain:"chanmuraresturantui.firebaseapp.com",projectId:"chanmuraresturantui",storageBucket:"chanmuraresturantui.firebasestorage.app",messagingSenderId:"396550554524",appId:"1:396550554524:web:9cf1983e2842dcb5b03e59"}};dE(Vg,{providers:[FE(HP),Hh(hE,wc),gM(()=>mM(Bx.firebaseConfig)),Ux(()=>jx())]});
