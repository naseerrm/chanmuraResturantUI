import{a as U}from"./chunk-DKTPNKVH.js";import"./chunk-Z7P27EYM.js";import"./chunk-AEGG3O7Y.js";import"./chunk-P7ZXRJB5.js";import{d as O}from"./chunk-AICMW4LS.js";import"./chunk-ER4RSQOA.js";import{b as P,c as L,f as R,h as F,o as j}from"./chunk-XHTFFY4H.js";import{j as k,k as A,o as N,r as B}from"./chunk-SIBEU5US.js";import{$a as M,Ca as v,Ha as V,Ma as E,T as p,U as c,Ua as y,Va as r,Wa as o,_a as S,ab as T,ba as W,db as x,eb as d,ib as a,jb as f,kb as D,m as w,mb as _,nb as g,ob as u,rb as C,sb as b,ta as l}from"./chunk-2JCYUYSE.js";import{a as I,b as H}from"./chunk-KAT7YFEL.js";var Y=["class","component"];function q(m,s){if(m&1){let n=T();S(0),r(1,"td"),a(2),o(),r(3,"td"),a(4),o(),r(5,"td"),a(6),o(),r(7,"td")(8,"button",13),x("click",function(){p(n);let t=d().$implicit,i=d(2);return c(i.editExpense(t))}),a(9,"Edit"),o(),a(10,"\xA0 "),r(11,"button",14),x("click",function(){p(n);let t=d().$implicit,i=d(2);return c(i.removeExpense(t.id))}),a(12,"Delete"),o()(),M()}if(m&2){let n=d().$implicit;l(2),f(n.title),l(2),D("\u20B9",n.amount),l(2),f(n.note)}}function z(m,s){if(m&1){let n=T();S(0),r(1,"td")(2,"input",15),u("ngModelChange",function(t){p(n);let i=d(3);return g(i.editingItem.title,t)||(i.editingItem.title=t),c(t)}),o()(),r(3,"td")(4,"input",16),u("ngModelChange",function(t){p(n);let i=d(3);return g(i.editingItem.amount,t)||(i.editingItem.amount=t),c(t)}),o()(),r(5,"td")(6,"input",15),u("ngModelChange",function(t){p(n);let i=d(3);return g(i.editingItem.note,t)||(i.editingItem.note=t),c(t)}),o()(),r(7,"td")(8,"button",17),x("click",function(){p(n);let t=d(3);return c(t.saveEdit())}),a(9,"Save"),o(),a(10,"\xA0 "),r(11,"button",18),x("click",function(){p(n);let t=d(3);return c(t.editingItem=null)}),a(12,"Cancel"),o()(),M()}if(m&2){let n=d(3);l(2),_("ngModel",n.editingItem.title),l(2),_("ngModel",n.editingItem.amount),l(2),_("ngModel",n.editingItem.note)}}function G(m,s){if(m&1&&(r(0,"tr"),E(1,q,13,3,"ng-container",12)(2,z,13,3,"ng-container",12),o()),m&2){let n=s.$implicit,e=d(2);l(),y("ngIf",(e.editingItem==null?null:e.editingItem.id)!==n.id),l(),y("ngIf",(e.editingItem==null?null:e.editingItem.id)===n.id)}}function J(m,s){if(m&1&&(r(0,"table",10)(1,"thead")(2,"tr")(3,"th"),a(4,"Title"),o(),r(5,"th"),a(6,"Amount"),o(),r(7,"th"),a(8,"Note"),o(),r(9,"th"),a(10,"Action"),o()()(),r(11,"tbody"),E(12,G,3,2,"tr",11),C(13,"async"),o()()),m&2){let n=d();l(12),y("ngForOf",b(13,1,n.expenses$))}}var h=class m{constructor(s,n){this.expensesService=s;this.router=n}selectedDate="";expenses$;totalExpense$;newExpense={title:"",amount:0,note:""};editingItem=null;loading=W(!1);ngOnInit(){this.selectedDate=new Date().toISOString().split("T")[0],this.loadExpenses()}loadExpenses(){if(!this.selectedDate)return;let s=this.expensesService.getExpensesByDate(this.selectedDate).pipe(w(n=>n.map(e=>H(I({},e),{createdAt:e.createdAt?.toDate?e.createdAt.toDate():new Date(e.createdAt),showItems:!1})).sort((e,t)=>Number(e.orderId)-Number(t.orderId))));this.expenses$=s,this.totalExpense$=s.pipe(w(n=>n.reduce((e,t)=>e+Number(t.amount||0),0)))}async addExpense(){this.loading.set(!0);let s={createdAt:new Date(this.selectedDate),title:this.newExpense.title,amount:this.newExpense.amount,note:this.newExpense.note};await this.expensesService.addExpense(s),this.newExpense={title:"",amount:0,note:""},this.loading.set(!1)}editExpense(s){this.editingItem=I({},s)}async saveEdit(){await this.expensesService.updateExpense(this.selectedDate,this.editingItem.id,this.editingItem),this.editingItem=null}async removeExpense(s){await this.expensesService.deleteExpense(this.selectedDate,s)}static \u0275fac=function(n){return new(n||m)(v(U),v(O))};static \u0275cmp=V({type:m,selectors:[["app-inventory-home",8,"component"]],attrs:Y,decls:21,vars:12,consts:[[1,"admin-layout"],[1,"container","mt-3"],[1,"mb-3"],["type","date",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"card","p-3","mb-3"],["type","text","placeholder","Expense Title",1,"form-control","mb-2",3,"ngModelChange","ngModel"],["type","number","placeholder","Amount",1,"form-control","mb-2",3,"ngModelChange","ngModel"],["placeholder","Note",1,"form-control","mb-2",3,"ngModelChange","ngModel"],[1,"btn","btn-success",3,"click","disabled"],["class","table",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"form-control",3,"ngModelChange","ngModel"],["type","number",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"btn","btn-sm","btn-secondary",3,"click"]],template:function(n,e){if(n&1&&(r(0,"div",0)(1,"div",1)(2,"h3",2),a(3,"Store Expenses"),o(),r(4,"div",2)(5,"label"),a(6,"Select Date:"),o(),r(7,"input",3),u("ngModelChange",function(i){return g(e.selectedDate,i)||(e.selectedDate=i),i}),x("change",function(){return e.loadExpenses()}),o()(),r(8,"div",4)(9,"h5"),a(10,"Add Expense"),o(),r(11,"input",5),u("ngModelChange",function(i){return g(e.newExpense.title,i)||(e.newExpense.title=i),i}),o(),r(12,"input",6),u("ngModelChange",function(i){return g(e.newExpense.amount,i)||(e.newExpense.amount=i),i}),o(),r(13,"textarea",7),u("ngModelChange",function(i){return g(e.newExpense.note,i)||(e.newExpense.note=i),i}),o(),r(14,"button",8),x("click",function(){return e.addExpense()}),a(15),o()(),r(16,"h5"),a(17),C(18,"async"),o(),E(19,J,14,3,"table",9),C(20,"async"),o()()),n&2){let t;l(7),_("ngModel",e.selectedDate),l(4),_("ngModel",e.newExpense.title),l(),_("ngModel",e.newExpense.amount),l(),_("ngModel",e.newExpense.note),l(),y("disabled",e.loading()),l(),f(e.loading()?"Saving...":"Add"),l(2),D("Total Expense: \u20B9",b(18,8,e.totalExpense$)),l(2),y("ngIf",(((t=b(20,10,e.expenses$))==null?null:t.length)??0)>0)}},dependencies:[B,k,A,j,P,F,L,R,N],encapsulation:2})};var de=[{path:"",component:h}];export{de as INVENTORY_ROUTES};
