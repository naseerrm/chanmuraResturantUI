import{J as s,K as u}from"./chunk-P7ZXRJB5.js";import{B as c,J as o,N as a,e as r,i as n}from"./chunk-2JCYUYSE.js";var l=class i{constructor(t,e){this.auth=t;this.cs=e;this.init()}userDetailSubject=new r(null);companySubject=new r(null);userDetail$=this.userDetailSubject.asObservable();company$=this.companySubject.asObservable();init(){this.auth.userUid$.pipe(c(t=>t?this.cs.getUserdetails(t):(this.userDetailSubject.next(null),this.companySubject.next(null),n(null)))).subscribe(t=>{this.userDetailSubject.next(t),t?.companyId?this.cs.getCompany(t.companyId).then(e=>this.companySubject.next(e)).catch(()=>this.companySubject.next(null)):this.companySubject.next(null)})}logout(){return this.auth.logout()}static \u0275fac=function(e){return new(e||i)(a(s),a(u))};static \u0275prov=o({token:i,factory:i.\u0275fac,providedIn:"root"})};export{l as a};
