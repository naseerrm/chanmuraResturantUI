var ik=Object.defineProperty,sk=Object.defineProperties;var ok=Object.getOwnPropertyDescriptors;var Yb=Object.getOwnPropertySymbols;var ak=Object.prototype.hasOwnProperty,ck=Object.prototype.propertyIsEnumerable;var Jb=(n,e,t)=>e in n?ik(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,V=(n,e)=>{for(var t in e||={})ak.call(e,t)&&Jb(n,t,e[t]);if(Yb)for(var t of Yb(e))ck.call(e,t)&&Jb(n,t,e[t]);return n},fe=(n,e)=>sk(n,ok(e));var xt=null,oh=!1,ly=1,uk=null,zt=Symbol("SIGNAL");function ue(n){let e=xt;return xt=n,e}function ch(){return xt}var Hu={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function zu(n){if(oh)throw new Error("");if(xt===null)return;xt.consumerOnSignalRead(n);let e=xt.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=xt.recomputing;if(r&&(t=e!==void 0?e.nextProducer:xt.producers,t!==void 0&&t.producer===n)){xt.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===xt&&(!r||dk(i,xt)))return;let s=na(xt),a={producer:n,consumer:xt,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};xt.producersTail=a,e!==void 0?e.nextProducer=a:xt.producers=a,s&&tD(n,a)}function Xb(){ly++}function dy(n){if(!(na(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===ly)){if(!n.producerMustRecompute(n)&&!lh(n)){uy(n);return}n.producerRecomputeValue(n),uy(n)}}function hy(n){if(n.consumers===void 0)return;let e=oh;oh=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||lk(r)}}finally{oh=e}}function fy(){return xt?.consumerAllowSignalWrites!==!1}function lk(n){n.dirty=!0,hy(n),n.consumerMarkedDirty?.(n)}function uy(n){n.dirty=!1,n.lastCleanEpoch=ly}function Gu(n){return n&&Zb(n),ue(n)}function Zb(n){n.producersTail=void 0,n.recomputing=!0}function uh(n,e){ue(e),n&&eD(n)}function eD(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(na(n))do t=py(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function lh(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(dy(t),r!==t.version))return!0}return!1}function Wu(n){if(na(n)){let e=n.producers;for(;e!==void 0;)e=py(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function tD(n,e){let t=n.consumersTail,r=na(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)tD(i.producer,i)}function py(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!na(e)){let s=e.producers;for(;s!==void 0;)s=py(s)}return t}function na(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function gy(n){uk?.(n)}function dk(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function my(n,e){return Object.is(n,e)}function dh(n,e){let t=Object.create(hk);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(dy(t),zu(t),t.value===ah)throw t.error;return t.value};return r[zt]=t,gy(t),r}var ay=Symbol("UNSET"),cy=Symbol("COMPUTING"),ah=Symbol("ERRORED"),hk=fe(V({},Hu),{value:ay,dirty:!0,error:null,equal:my,kind:"computed",producerMustRecompute(n){return n.value===ay||n.value===cy},producerRecomputeValue(n){if(n.value===cy)throw new Error("");let e=n.value;n.value=cy;let t=Gu(n),r,i=!1;try{r=n.computation(),ue(null),i=e!==ay&&e!==ah&&r!==ah&&n.equal(e,r)}catch(s){r=ah,n.error=s}finally{uh(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function fk(){throw new Error}var nD=fk;function rD(n){nD(n)}function yy(n){nD=n}var pk=null;function _y(n,e){let t=Object.create(hh);t.value=n,e!==void 0&&(t.equal=e);let r=()=>iD(t);return r[zt]=t,gy(t),[r,a=>Ku(t,a),a=>sD(t,a)]}function iD(n){return zu(n),n.value}function Ku(n,e){fy()||rD(n),n.equal(n.value,e)||(n.value=e,gk(n))}function sD(n,e){fy()||rD(n),Ku(n,e(n.value))}var hh=fe(V({},Hu),{equal:my,value:void 0,kind:"signal"});function gk(n){n.version++,Xb(),hy(n),pk?.(n)}function vy(n){let e=ue(null);try{return n()}finally{ue(e)}}function ae(n){return typeof n=="function"}function ra(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var fh=ra(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Gs(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ht=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ae(r))try{r()}catch(s){e=s instanceof fh?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{oD(s)}catch(a){e=e??[],a instanceof fh?e=[...e,...a.errors]:e.push(a)}}if(e)throw new fh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)oD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Gs(t,e)}remove(e){let{_finalizers:t}=this;t&&Gs(t,e),e instanceof n&&e._removeParent(this)}};ht.EMPTY=(()=>{let n=new ht;return n.closed=!0,n})();var Ey=ht.EMPTY;function ph(n){return n instanceof ht||n&&"closed"in n&&ae(n.remove)&&ae(n.add)&&ae(n.unsubscribe)}function oD(n){ae(n)?n():n.unsubscribe()}var rr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ia={setTimeout(n,e,...t){let{delegate:r}=ia;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ia;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function gh(n){ia.setTimeout(()=>{let{onUnhandledError:e}=rr;if(e)e(n);else throw n})}function Qu(){}var aD=Iy("C",void 0,void 0);function cD(n){return Iy("E",void 0,n)}function uD(n){return Iy("N",n,void 0)}function Iy(n,e,t){return{kind:n,value:e,error:t}}var Ws=null;function sa(n){if(rr.useDeprecatedSynchronousErrorHandling){let e=!Ws;if(e&&(Ws={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ws;if(Ws=null,t)throw r}}else n()}function lD(n){rr.useDeprecatedSynchronousErrorHandling&&Ws&&(Ws.errorThrown=!0,Ws.error=n)}var Ks=class extends ht{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ph(e)&&e.add(this)):this.destination=_k}static create(e,t,r){return new oa(e,t,r)}next(e){this.isStopped?Ty(uD(e),this):this._next(e)}error(e){this.isStopped?Ty(cD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ty(aD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},mk=Function.prototype.bind;function wy(n,e){return mk.call(n,e)}var by=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){mh(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){mh(r)}else mh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){mh(t)}}},oa=class extends Ks{constructor(e,t,r){super();let i;if(ae(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&rr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&wy(e.next,s),error:e.error&&wy(e.error,s),complete:e.complete&&wy(e.complete,s)}):i=e}this.destination=new by(i)}};function mh(n){rr.useDeprecatedSynchronousErrorHandling?lD(n):gh(n)}function yk(n){throw n}function Ty(n,e){let{onStoppedNotification:t}=rr;t&&ia.setTimeout(()=>t(n,e))}var _k={closed:!0,next:Qu,error:yk,complete:Qu};var aa=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ir(n){return n}function Dy(...n){return Cy(n)}function Cy(n){return n.length===0?ir:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var le=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=Ek(t)?t:new oa(t,r,i);return sa(()=>{let{operator:a,source:c}=this;s.add(a?a.call(s,c):c?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=dD(r),new r((i,s)=>{let a=new oa({next:c=>{try{t(c)}catch(l){s(l),a.unsubscribe()}},error:s,complete:i});this.subscribe(a)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[aa](){return this}pipe(...t){return Cy(t)(this)}toPromise(t){return t=dD(t),new t((r,i)=>{let s;this.subscribe(a=>s=a,a=>i(a),()=>r(s))})}}return n.create=e=>new n(e),n})();function dD(n){var e;return(e=n??rr.Promise)!==null&&e!==void 0?e:Promise}function vk(n){return n&&ae(n.next)&&ae(n.error)&&ae(n.complete)}function Ek(n){return n&&n instanceof Ks||vk(n)&&ph(n)}function Ik(n){return ae(n?.lift)}function Me(n){return e=>{if(Ik(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function xe(n,e,t,r,i){return new Ay(n,e,t,r,i)}var Ay=class extends Ks{constructor(e,t,r,i,s,a){super(e),this.onFinalize=s,this.shouldUnsubscribe=a,this._next=t?function(c){try{t(c)}catch(l){e.error(l)}}:super._next,this._error=i?function(c){try{i(c)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var hD=ra(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var nt=(()=>{class n extends le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new yh(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new hD}next(t){sa(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){sa(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){sa(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Ey:(this.currentObservers=null,s.push(t),new ht(()=>{this.currentObservers=null,Gs(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new le;return t.source=this,t}}return n.create=(e,t)=>new yh(e,t),n})(),yh=class extends nt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Ey}};var rt=class extends nt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Sy={now(){return(Sy.delegate||Date).now()},delegate:void 0};var _h=class extends ht{constructor(e,t){super()}schedule(e,t=0){return this}};var Yu={setInterval(n,e,...t){let{delegate:r}=Yu;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Yu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ca=class extends _h{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Yu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Yu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Gs(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ua=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ua.now=Sy.now;var la=class extends ua{constructor(e,t=ua.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Ry=new la(ca);var vh=class extends ca{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Eh=class extends la{};var Ny=new Eh(vh);var Zt=new le(n=>n.complete());function fD(n){return n&&ae(n.schedule)}function pD(n){return n[n.length-1]}function Ih(n){return ae(pD(n))?n.pop():void 0}function Bi(n){return fD(pD(n))?n.pop():void 0}function Py(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function mD(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function c(p){try{h(r.next(p))}catch(_){a(_)}}function l(p){try{h(r.throw(p))}catch(_){a(_)}}function h(p){p.done?s(p.value):i(p.value).then(c,l)}h((r=r.apply(n,e||[])).next())})}function gD(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qs(n){return this instanceof Qs?(this.v=n,this):new Qs(n)}function yD(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(C){return function(A){return Promise.resolve(A).then(C,_)}}function c(C,A){r[C]&&(i[C]=function(N){return new Promise(function(R,O){s.push([C,N,R,O])>1||l(C,N)})},A&&(i[C]=A(i[C])))}function l(C,A){try{h(r[C](A))}catch(N){w(s[0][3],N)}}function h(C){C.value instanceof Qs?Promise.resolve(C.value.v).then(p,_):w(s[0][2],C)}function p(C){l("next",C)}function _(C){l("throw",C)}function w(C,A){C(A),s.shift(),s.length&&l(s[0][0],s[0][1])}}function _D(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof gD=="function"?gD(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(a){return new Promise(function(c,l){a=n[s](a),i(c,l,a.done,a.value)})}}function i(s,a,c,l){Promise.resolve(l).then(function(h){s({value:h,done:c})},a)}}var wh=n=>n&&typeof n.length=="number"&&typeof n!="function";function Th(n){return ae(n?.then)}function bh(n){return ae(n[aa])}function Dh(n){return Symbol.asyncIterator&&ae(n?.[Symbol.asyncIterator])}function Ch(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function wk(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ah=wk();function Sh(n){return ae(n?.[Ah])}function Rh(n){return yD(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Qs(t.read());if(i)return yield Qs(void 0);yield yield Qs(r)}}finally{t.releaseLock()}})}function Nh(n){return ae(n?.getReader)}function it(n){if(n instanceof le)return n;if(n!=null){if(bh(n))return Tk(n);if(wh(n))return bk(n);if(Th(n))return Dk(n);if(Dh(n))return vD(n);if(Sh(n))return Ck(n);if(Nh(n))return Ak(n)}throw Ch(n)}function Tk(n){return new le(e=>{let t=n[aa]();if(ae(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function bk(n){return new le(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Dk(n){return new le(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,gh)})}function Ck(n){return new le(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function vD(n){return new le(e=>{Sk(n,e).catch(t=>e.error(t))})}function Ak(n){return vD(Rh(n))}function Sk(n,e){var t,r,i,s;return mD(this,void 0,void 0,function*(){try{for(t=_D(n);r=yield t.next(),!r.done;){let a=r.value;if(e.next(a),e.closed)return}}catch(a){i={error:a}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function en(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function $i(n,e=0){return Me((t,r)=>{t.subscribe(xe(r,i=>en(r,n,()=>r.next(i),e),()=>en(r,n,()=>r.complete(),e),i=>en(r,n,()=>r.error(i),e)))})}function qi(n,e=0){return Me((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function ED(n,e){return it(n).pipe(qi(e),$i(e))}function ID(n,e){return it(n).pipe(qi(e),$i(e))}function wD(n,e){return new le(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function TD(n,e){return new le(t=>{let r;return en(t,e,()=>{r=n[Ah](),en(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(a){t.error(a);return}s?t.complete():t.next(i)},0,!0)}),()=>ae(r?.return)&&r.return()})}function Ph(n,e){if(!n)throw new Error("Iterable cannot be null");return new le(t=>{en(t,e,()=>{let r=n[Symbol.asyncIterator]();en(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function bD(n,e){return Ph(Rh(n),e)}function DD(n,e){if(n!=null){if(bh(n))return ED(n,e);if(wh(n))return wD(n,e);if(Th(n))return ID(n,e);if(Dh(n))return Ph(n,e);if(Sh(n))return TD(n,e);if(Nh(n))return bD(n,e)}throw Ch(n)}function Ze(n,e){return e?DD(n,e):it(n)}function de(...n){let e=Bi(n);return Ze(n,e)}function My(n,e){let t=ae(n)?n:()=>n,r=i=>i.error(t());return new le(e?i=>e.schedule(r,0,i):r)}function Mh(n){return!!n&&(n instanceof le||ae(n.lift)&&ae(n.subscribe))}var Ys=ra(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Be(n,e){return Me((t,r)=>{let i=0;t.subscribe(xe(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:Rk}=Array;function Nk(n,e){return Rk(e)?n(...e):n(e)}function xh(n){return Be(e=>Nk(n,e))}var{isArray:Pk}=Array,{getPrototypeOf:Mk,prototype:xk,keys:kk}=Object;function kh(n){if(n.length===1){let e=n[0];if(Pk(e))return{args:e,keys:null};if(Ok(e)){let t=kk(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function Ok(n){return n&&typeof n=="object"&&Mk(n)===xk}function Oh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function xy(...n){let e=Bi(n),t=Ih(n),{args:r,keys:i}=kh(n);if(r.length===0)return Ze([],e);let s=new le(Fk(r,e,i?a=>Oh(i,a):ir));return t?s.pipe(xh(t)):s}function Fk(n,e,t=ir){return r=>{CD(e,()=>{let{length:i}=n,s=new Array(i),a=i,c=i;for(let l=0;l<i;l++)CD(e,()=>{let h=Ze(n[l],e),p=!1;h.subscribe(xe(r,_=>{s[l]=_,p||(p=!0,c--),c||r.next(t(s.slice()))},()=>{--a||r.complete()}))},r)},r)}}function CD(n,e,t){n?en(t,n,e):e()}function AD(n,e,t,r,i,s,a,c){let l=[],h=0,p=0,_=!1,w=()=>{_&&!l.length&&!h&&e.complete()},C=N=>h<r?A(N):l.push(N),A=N=>{s&&e.next(N),h++;let R=!1;it(t(N,p++)).subscribe(xe(e,O=>{i?.(O),s?C(O):e.next(O)},()=>{R=!0},void 0,()=>{if(R)try{for(h--;l.length&&h<r;){let O=l.shift();a?en(e,a,()=>A(O)):A(O)}w()}catch(O){e.error(O)}}))};return n.subscribe(xe(e,C,()=>{_=!0,w()})),()=>{c?.()}}function kt(n,e,t=1/0){return ae(e)?kt((r,i)=>Be((s,a)=>e(r,s,i,a))(it(n(r,i))),t):(typeof e=="number"&&(t=e),Me((r,i)=>AD(r,i,n,t)))}function da(n=1/0){return kt(ir,n)}function SD(){return da(1)}function ha(...n){return SD()(Ze(n,Bi(n)))}function Ju(n){return new le(e=>{it(n()).subscribe(e)})}function ky(...n){let e=Ih(n),{args:t,keys:r}=kh(n),i=new le(s=>{let{length:a}=t;if(!a){s.complete();return}let c=new Array(a),l=a,h=a;for(let p=0;p<a;p++){let _=!1;it(t[p]).subscribe(xe(s,w=>{_||(_=!0,h--),c[p]=w},()=>l--,void 0,()=>{(!l||!_)&&(h||s.next(r?Oh(r,c):c),s.complete())}))}});return e?i.pipe(xh(e)):i}function sr(n,e){return Me((t,r)=>{let i=0;t.subscribe(xe(r,s=>n.call(e,s,i++)&&r.next(s)))})}function fa(n){return Me((e,t)=>{let r=null,i=!1,s;r=e.subscribe(xe(t,void 0,void 0,a=>{s=it(n(a,fa(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Xu(n,e){return ae(e)?kt(n,e,1):kt(n,1)}function Oy(n){return Me((e,t)=>{let r=!1;e.subscribe(xe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function mi(n){return n<=0?()=>Zt:Me((e,t)=>{let r=0;e.subscribe(xe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function RD(n=Vk){return Me((e,t)=>{let r=!1;e.subscribe(xe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Vk(){return new Ys}function Fy(n){return Me((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function yi(n,e){let t=arguments.length>=2;return r=>r.pipe(n?sr((i,s)=>n(i,s,r)):ir,mi(1),t?Oy(e):RD(()=>new Ys))}function Fh(n){return n<=0?()=>Zt:Me((e,t)=>{let r=[];e.subscribe(xe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Vy(...n){let e=Bi(n);return Me((t,r)=>{(e?ha(n,t,e):ha(n,t)).subscribe(r)})}function Dr(n,e){return Me((t,r)=>{let i=null,s=0,a=!1,c=()=>a&&!i&&r.complete();t.subscribe(xe(r,l=>{i?.unsubscribe();let h=0,p=s++;it(n(l,p)).subscribe(i=xe(r,_=>r.next(e?e(l,_,p,h++):_),()=>{i=null,c()}))},()=>{a=!0,c()}))})}function Zu(n){return Me((e,t)=>{it(n).subscribe(xe(t,()=>t.complete(),Qu)),!t.closed&&e.subscribe(t)})}function Gt(n,e,t){let r=ae(n)||e||t?{next:n,error:e,complete:t}:n;return r?Me((i,s)=>{var a;(a=r.subscribe)===null||a===void 0||a.call(r);let c=!0;i.subscribe(xe(s,l=>{var h;(h=r.next)===null||h===void 0||h.call(r,l),s.next(l)},()=>{var l;c=!1,(l=r.complete)===null||l===void 0||l.call(r),s.complete()},l=>{var h;c=!1,(h=r.error)===null||h===void 0||h.call(r,l),s.error(l)},()=>{var l,h;c&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(h=r.finalize)===null||h===void 0||h.call(r)}))}):ir}var Ly;function Vh(){return Ly}function Cr(n){let e=Ly;return Ly=n,e}var ND=Symbol("NotFound");function pa(n){return n===ND||n?.name==="\u0275NotFound"}var Xs=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},e_=new Xs("21.0.0");var $h="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",H=class extends Error{code;constructor(e,t){super(ma(e,t)),this.code=e}};function jk(n){return`NG0${Math.abs(n)}`}function ma(n,e){return`${jk(n)}${e?": "+e:""}`}var In=globalThis;function ke(n){for(let e in n)if(n[e]===ke)return e;throw Error("")}function OD(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function vi(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(vi).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function t_(n,e){return n?e?`${n} ${e}`:n:e||""}var Bk=ke({__forward_ref__:ke});function wn(n){return n.__forward_ref__=wn,n.toString=function(){return vi(this())},n}function Dt(n){return n_(n)?n():n}function n_(n){return typeof n=="function"&&n.hasOwnProperty(Bk)&&n.__forward_ref__===wn}function q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Tn(n){return{providers:n.providers||[],imports:n.imports||[]}}function sl(n){return $k(n,qh)}function r_(n){return sl(n)!==null}function $k(n,e){return n.hasOwnProperty(e)&&n[e]||null}function qk(n){let e=n?.[qh]??null;return e||null}function jy(n){return n&&n.hasOwnProperty(Uh)?n[Uh]:null}var qh=ke({\u0275prov:ke}),Uh=ke({\u0275inj:ke}),z=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function i_(n){return n&&!!n.\u0275providers}var s_=ke({\u0275cmp:ke}),o_=ke({\u0275dir:ke}),a_=ke({\u0275pipe:ke}),c_=ke({\u0275mod:ke}),tl=ke({\u0275fac:ke}),ro=ke({__NG_ELEMENT_ID__:ke}),PD=ke({__NG_ENV_ID__:ke});function ya(n){return typeof n=="string"?n:n==null?"":String(n)}function FD(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ya(n)}var VD=ke({ngErrorCode:ke}),Hk=ke({ngErrorMessage:ke}),zk=ke({ngTokenPath:ke});function u_(n,e){return LD("",-200,e)}function Hh(n,e){throw new H(-201,!1)}function LD(n,e,t){let r=new H(e,n);return r[VD]=e,r[Hk]=n,t&&(r[zk]=t),r}function Gk(n){return n[VD]}var By;function UD(){return By}function un(n){let e=By;return By=n,e}function l_(n,e,t){let r=sl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Hh(n,"Injector")}var Wk={},Js=Wk,$y="__NG_DI_FLAG__",qy=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Zs(t)||0;try{return this.injector.get(e,r&8?null:Js,r)}catch(i){if(pa(i))return i;throw i}}};function Kk(n,e=0){let t=Vh();if(t===void 0)throw new H(-203,!1);if(t===null)return l_(n,void 0,e);{let r=Qk(e),i=t.retrieve(n,r);if(pa(i)){if(r.optional)return null;throw i}return i}}function te(n,e=0){return(UD()||Kk)(Dt(n),e)}function x(n,e){return te(n,Zs(e))}function Zs(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Qk(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Hy(n){let e=[];for(let t=0;t<n.length;t++){let r=Dt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new H(900,!1);let i,s=0;for(let a=0;a<r.length;a++){let c=r[a],l=Yk(c);typeof l=="number"?l===-1?i=c.token:s|=l:i=c}e.push(te(i,s))}else e.push(te(r))}return e}function jD(n,e){return n[$y]=e,n.prototype[$y]=e,n}function Yk(n){return n[$y]}function eo(n,e){let t=n.hasOwnProperty(tl);return t?n[tl]:null}function BD(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function $D(n){return n.flat(Number.POSITIVE_INFINITY)}function zh(n,e){n.forEach(t=>Array.isArray(t)?zh(t,e):e(t))}function d_(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ol(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function qD(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function HD(n,e,t){let r=_a(n,e);return r>=0?n[r|1]=t:(r=~r,qD(n,r,e,t)),r}function Gh(n,e){let t=_a(n,e);if(t>=0)return n[t|1]}function _a(n,e){return Jk(n,e,1)}function Jk(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),a=n[s<<t];if(e===a)return s<<t;a>e?i=s:r=s+1}return~(i<<t)}var Gi={},ln=[],va=new z(""),h_=new z("",-1),f_=new z(""),nl=class{get(e,t=Js){if(t===Js){let i=LD("",-201);throw i.name="\u0275NotFound",i}return t}};function p_(n){return n[c_]||null}function Wi(n){return n[s_]||null}function g_(n){return n[o_]||null}function zD(n){return n[a_]||null}function Ei(n){return{\u0275providers:n}}function Wh(...n){return{\u0275providers:m_(!0,n),\u0275fromNgModule:!0}}function m_(n,...e){let t=[],r=new Set,i,s=a=>{t.push(a)};return zh(e,a=>{let c=a;jh(c,s,[],r)&&(i||=[],i.push(c))}),i!==void 0&&GD(i,s),t}function GD(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];y_(i,s=>{e(s,r)})}}function jh(n,e,t,r){if(n=Dt(n),!n)return!1;let i=null,s=jy(n),a=!s&&Wi(n);if(!s&&!a){let l=n.ngModule;if(s=jy(l),s)i=l;else return!1}else{if(a&&!a.standalone)return!1;i=n}let c=r.has(i);if(a){if(c)return!1;if(r.add(i),a.dependencies){let l=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let h of l)jh(h,e,t,r)}}else if(s){if(s.imports!=null&&!c){r.add(i);let h;try{zh(s.imports,p=>{jh(p,e,t,r)&&(h||=[],h.push(p))})}finally{}h!==void 0&&GD(h,e)}if(!c){let h=eo(i)||(()=>new i);e({provide:i,useFactory:h,deps:ln},i),e({provide:f_,useValue:i,multi:!0},i),e({provide:va,useValue:()=>te(i),multi:!0},i)}let l=s.providers;if(l!=null&&!c){let h=n;y_(l,p=>{e(p,h)})}}else return!1;return i!==n&&n.providers!==void 0}function y_(n,e){for(let t of n)i_(t)&&(t=t.\u0275providers),Array.isArray(t)?y_(t,e):e(t)}var Xk=ke({provide:String,useValue:ke});function WD(n){return n!==null&&typeof n=="object"&&Xk in n}function Zk(n){return!!(n&&n.useExisting)}function e1(n){return!!(n&&n.useFactory)}function to(n){return typeof n=="function"}function KD(n){return!!n.useClass}var al=new z(""),Lh={},MD={},Uy;function cl(){return Uy===void 0&&(Uy=new nl),Uy}var ft=class{},no=class extends ft{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Gy(e,a=>this.processProvider(a)),this.records.set(h_,ga(void 0,this)),i.has("environment")&&this.records.set(ft,ga(void 0,this));let s=this.records.get(al);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(f_,ln,{self:!0}))}retrieve(e,t){let r=Zs(t)||0;try{return this.get(e,Js,r)}catch(i){if(pa(i))return i;throw i}}destroy(){el(this),this._destroyed=!0;let e=ue(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ue(e)}}onDestroy(e){return el(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){el(this);let t=Cr(this),r=un(void 0),i;try{return e()}finally{Cr(t),un(r)}}get(e,t=Js,r){if(el(this),e.hasOwnProperty(PD))return e[PD](this);let i=Zs(r),s,a=Cr(this),c=un(void 0);try{if(!(i&4)){let h=this.records.get(e);if(h===void 0){let p=s1(e)&&sl(e);p&&this.injectableDefInScope(p)?h=ga(zy(e),Lh):h=null,this.records.set(e,h)}if(h!=null)return this.hydrate(e,h,i)}let l=i&2?cl():this.parent;return t=i&8&&t===Js?null:t,l.get(e,t)}catch(l){let h=Gk(l);throw h===-200||h===-201?new H(h,null):l}finally{un(c),Cr(a)}}resolveInjectorInitializers(){let e=ue(null),t=Cr(this),r=un(void 0),i;try{let s=this.get(va,ln,{self:!0});for(let a of s)a()}finally{Cr(t),un(r),ue(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(vi(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Dt(e);let t=to(e)?e:Dt(e&&e.provide),r=n1(e);if(!to(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ga(void 0,Lh,!0),i.factory=()=>Hy(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=ue(null);try{if(t.value===MD)throw u_(vi(e));return t.value===Lh&&(t.value=MD,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&i1(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ue(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Dt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function zy(n){let e=sl(n),t=e!==null?e.factory:eo(n);if(t!==null)return t;if(n instanceof z)throw new H(204,!1);if(n instanceof Function)return t1(n);throw new H(204,!1)}function t1(n){if(n.length>0)throw new H(204,!1);let t=qk(n);return t!==null?()=>t.factory(n):()=>new n}function n1(n){if(WD(n))return ga(void 0,n.useValue);{let e=__(n);return ga(e,Lh)}}function __(n,e,t){let r;if(to(n)){let i=Dt(n);return eo(i)||zy(i)}else if(WD(n))r=()=>Dt(n.useValue);else if(e1(n))r=()=>n.useFactory(...Hy(n.deps||[]));else if(Zk(n))r=(i,s)=>te(Dt(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=Dt(n&&(n.useClass||n.provide));if(r1(n))r=()=>new i(...Hy(n.deps));else return eo(i)||zy(i)}return r}function el(n){if(n.destroyed)throw new H(205,!1)}function ga(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function r1(n){return!!n.deps}function i1(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function s1(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Gy(n,e){for(let t of n)Array.isArray(t)?Gy(t,e):t&&i_(t)?Gy(t.\u0275providers,e):e(t)}function pt(n,e){let t;n instanceof no?(el(n),t=n):t=new qy(n);let r,i=Cr(t),s=un(void 0);try{return e()}finally{Cr(i),un(s)}}function v_(){return UD()!==void 0||Vh()!=null}var or=0,re=1,ne=2,yt=3,bn=4,Dn=5,ul=6,Ea=7,Ot=8,Ki=9,Sr=10,Qe=11,Ia=12,E_=13,io=14,Cn=15,Qi=16,so=17,Rr=18,ll=19,I_=20,_i=21,Kh=22,dl=23,dn=24,oo=25,hl=26,hn=27,QD=1;var Yi=7,fl=8,ao=9,Wt=10;function Nr(n){return Array.isArray(n)&&typeof n[QD]=="object"}function ar(n){return Array.isArray(n)&&n[QD]===!0}function w_(n){return(n.flags&4)!==0}function Ji(n){return n.componentOffset>-1}function pl(n){return(n.flags&1)===1}function Pr(n){return!!n.template}function wa(n){return(n[ne]&512)!==0}function co(n){return(n[ne]&256)===256}var YD="svg",JD="math";function An(n){for(;Array.isArray(n);)n=n[or];return n}function T_(n,e){return An(e[n])}function cr(n,e){return An(e[n.index])}function Qh(n,e){return n.data[e]}function Sn(n,e){let t=e[n];return Nr(t)?t:t[or]}function XD(n){return(n[ne]&4)===4}function Yh(n){return(n[ne]&128)===128}function ZD(n){return ar(n[yt])}function gl(n,e){return e==null?null:n[e]}function b_(n){n[so]=0}function D_(n){n[ne]&1024||(n[ne]|=1024,Yh(n)&&Ta(n))}function e0(n,e){for(;n>0;)e=e[io],n--;return e}function ml(n){return!!(n[ne]&9216||n[dn]?.dirty)}function Jh(n){n[Sr].changeDetectionScheduler?.notify(8),n[ne]&64&&(n[ne]|=1024),ml(n)&&Ta(n)}function Ta(n){n[Sr].changeDetectionScheduler?.notify(0);let e=Hi(n);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!Yh(e)));)e=Hi(e)}function C_(n,e){if(co(n))throw new H(911,!1);n[_i]===null&&(n[_i]=[]),n[_i].push(e)}function t0(n,e){if(n[_i]===null)return;let t=n[_i].indexOf(e);t!==-1&&n[_i].splice(t,1)}function Hi(n){let e=n[yt];return ar(e)?e[yt]:e}function A_(n){return n[Ea]??=[]}function S_(n){return n.cleanup??=[]}function n0(n,e,t,r){let i=A_(e);i.push(t),n.firstCreatePass&&S_(n).push(r,i.length-1)}var he={lFrame:_0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Wy=!1;function r0(){return he.lFrame.elementDepthCount}function i0(){he.lFrame.elementDepthCount++}function s0(){he.lFrame.elementDepthCount--}function R_(){return he.bindingsEnabled}function o0(){return he.skipHydrationRootTNode!==null}function a0(n){return he.skipHydrationRootTNode===n}function c0(){he.skipHydrationRootTNode=null}function Se(){return he.lFrame.lView}function Kt(){return he.lFrame.tView}function He(n){return he.lFrame.contextLView=n,n[Ot]}function ze(n){return he.lFrame.contextLView=null,n}function Ft(){let n=N_();for(;n!==null&&n.type===64;)n=n.parent;return n}function N_(){return he.lFrame.currentTNode}function u0(){let n=he.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ba(n,e){let t=he.lFrame;t.currentTNode=n,t.isParent=e}function P_(){return he.lFrame.isParent}function l0(){he.lFrame.isParent=!1}function M_(){return Wy}function x_(n){let e=Wy;return Wy=n,e}function d0(n){return he.lFrame.bindingIndex=n}function Da(){return he.lFrame.bindingIndex++}function h0(n){let e=he.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function f0(){return he.lFrame.inI18n}function p0(n,e){let t=he.lFrame;t.bindingIndex=t.bindingRootIndex=n,Xh(e)}function g0(){return he.lFrame.currentDirectiveIndex}function Xh(n){he.lFrame.currentDirectiveIndex=n}function m0(n){let e=he.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function k_(){return he.lFrame.currentQueryIndex}function Zh(n){he.lFrame.currentQueryIndex=n}function o1(n){let e=n[re];return e.type===2?e.declTNode:e.type===1?n[Dn]:null}function O_(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=o1(s),i===null||(s=s[io],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=he.lFrame=y0();return r.currentTNode=e,r.lView=n,!0}function ef(n){let e=y0(),t=n[re];he.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function y0(){let n=he.lFrame,e=n===null?null:n.child;return e===null?_0(n):e}function _0(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function v0(){let n=he.lFrame;return he.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var F_=v0;function tf(){let n=v0();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function E0(n){return(he.lFrame.contextLView=e0(n,he.lFrame.contextLView))[Ot]}function uo(){return he.lFrame.selectedIndex}function Xi(n){he.lFrame.selectedIndex=n}function nf(){let n=he.lFrame;return Qh(n.tView,n.selectedIndex)}function I0(){return he.lFrame.currentNamespace}var w0=!0;function rf(){return w0}function sf(n){w0=n}function Ky(n,e=null,t=null,r){let i=V_(n,e,t,r);return i.resolveInjectorInitializers(),i}function V_(n,e=null,t=null,r,i=new Set){let s=[t||ln,Wh(n)];return r=r||(typeof n=="object"?void 0:vi(n)),new no(s,e||cl(),r||null,i)}var _t=class n{static THROW_IF_NOT_FOUND=Js;static NULL=new nl;static create(e,t){if(Array.isArray(e))return Ky({name:""},t,e,"");{let r=e.name??"";return Ky({name:r},e.parent,e.providers,r)}}static \u0275prov=q({token:n,providedIn:"any",factory:()=>te(h_)});static __NG_ELEMENT_ID__=-1},Qt=new z(""),ur=(()=>{class n{static __NG_ELEMENT_ID__=a1;static __NG_ENV_ID__=t=>t}return n})(),Qy=class extends ur{_lView;constructor(e){super(),this._lView=e}get destroyed(){return co(this._lView)}onDestroy(e){let t=this._lView;return C_(t,e),()=>t0(t,e)}};function a1(){return new Qy(Se())}var T0=!1,Ii=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new rt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new le(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),Yy=class extends nt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,v_()&&(this.destroyRef=x(ur,{optional:!0})??void 0,this.pendingTasks=x(Ii,{optional:!0})??void 0)}emit(e){let t=ue(null);try{super.next(e)}finally{ue(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),a=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),s=l.error?.bind(l),a=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),a&&(a=this.wrapInTimeout(a)));let c=super.subscribe({next:i,error:s,complete:a});return e instanceof ht&&e.add(c),c}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},st=Yy;function Bh(...n){}function L_(n){let e,t;function r(){n=Bh;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function U_(n){return queueMicrotask(()=>n()),()=>{n=Bh}}var j_="isAngularZone",rl=j_+"_ID",c1=0,qe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new st(!1);onMicrotaskEmpty=new st(!1);onStable=new st(!1);onError=new st(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=T0}=e;if(typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();let a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!i&&r,a.shouldCoalesceRunChangeDetection=i,a.callbackScheduled=!1,a.scheduleInRootZone=s,d1(a)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(j_)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new H(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,a=s.scheduleEventTask("NgZoneEvent: "+i,e,u1,Bh,Bh);try{return s.runTask(a,t,r)}finally{s.cancelTask(a)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},u1={};function B_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function l1(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){L_(()=>{n.callbackScheduled=!1,Jy(n),n.isCheckStableRunning=!0,B_(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Jy(n)}function d1(n){let e=()=>{l1(n)},t=c1++;n._inner=n._inner.fork({name:"angular",properties:{[j_]:!0,[rl]:t,[rl+t]:!0},onInvokeTask:(r,i,s,a,c,l)=>{if(h1(l))return r.invokeTask(s,a,c,l);try{return xD(n),r.invokeTask(s,a,c,l)}finally{(n.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),kD(n)}},onInvoke:(r,i,s,a,c,l,h)=>{try{return xD(n),r.invoke(s,a,c,l,h)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!f1(l)&&e(),kD(n)}},onHasTask:(r,i,s,a)=>{r.hasTask(s,a),i===s&&(a.change=="microTask"?(n._hasPendingMicrotasks=a.microTask,Jy(n),B_(n)):a.change=="macroTask"&&(n.hasPendingMacrotasks=a.macroTask))},onHandleError:(r,i,s,a)=>(r.handleError(s,a),n.runOutsideAngular(()=>n.onError.emit(a)),!1)})}function Jy(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function xD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function kD(n){n._nesting--,B_(n)}var il=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new st;onMicrotaskEmpty=new st;onStable=new st;onError=new st;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function h1(n){return b0(n,"__ignore_ng_zone__")}function f1(n){return b0(n,"__scheduler_tick__")}function b0(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Ar=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Rn=new z("",{factory:()=>{let n=x(qe),e=x(ft),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(Ar),t.handleError(r))})}}}),D0={provide:va,useValue:()=>{let n=x(Ar,{optional:!0})},multi:!0};function Ct(n,e){let[t,r,i]=_y(n,e?.equal),s=t,a=s[zt];return s.set=r,s.update=i,s.asReadonly=C0.bind(s),s}function C0(){let n=this[zt];if(n.readonlyFn===void 0){let e=()=>this();e[zt]=n,n.readonlyFn=e}return n.readonlyFn}var of=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=p1}return n})();function p1(){return new of(Se(),Ft())}var zi=class{},yl=new z("",{factory:()=>!0});var $_=new z(""),Ca=(()=>{class n{internalPendingTasks=x(Ii);scheduler=x(zi);errorHandler=x(Rn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),q_=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>new Xy})}return n})(),Xy=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},Zy=class{[zt];constructor(e){this[zt]=e}destroy(){this[zt].destroy()}};function gt(n){return vy(n)}function xa(n){return{toString:n}.toString()}var af="__parameters__";function T1(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function b1(n,e,t){return xa(()=>{let r=T1(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let a=new i(...s);return c.annotation=a,c;function c(l,h,p){let _=l.hasOwnProperty(af)?l[af]:Object.defineProperty(l,af,{value:[]})[af];for(;_.length<=p;)_.push(null);return(_[p]=_[p]||[]).push(a),l}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var wi=jD(b1("Optional"),8);function D1(n){return typeof n=="function"}function nC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var pf=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},kr=(()=>{let n=()=>rC;return n.ngInherit=!0,n})();function rC(n){return n.type.prototype.ngOnChanges&&(n.setInput=A1),C1}function C1(){let n=sC(this),e=n?.current;if(e){let t=n.previous;if(t===Gi)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function A1(n,e,t,r,i){let s=this.declaredInputs[r],a=sC(n)||S1(n,{previous:Gi,current:null}),c=a.current||(a.current={}),l=a.previous,h=l[s];c[s]=new pf(h&&h.currentValue,t,l===Gi),nC(n,e,i,t)}var iC="__ngSimpleChanges__";function sC(n){return n[iC]||null}function S1(n,e){return n[iC]=e}var A0=[];var Fe=function(n,e=null,t){for(let r=0;r<A0.length;r++){let i=A0[r];i(n,e,t)}};function R1(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let a=rC(e);(t.preOrderHooks??=[]).push(n,a),(t.preOrderCheckHooks??=[]).push(n,a)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function oC(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:c,ngAfterViewInit:l,ngAfterViewChecked:h,ngOnDestroy:p}=s;a&&(n.contentHooks??=[]).push(-t,a),c&&((n.contentHooks??=[]).push(t,c),(n.contentCheckHooks??=[]).push(t,c)),l&&(n.viewHooks??=[]).push(-t,l),h&&((n.viewHooks??=[]).push(t,h),(n.viewCheckHooks??=[]).push(t,h)),p!=null&&(n.destroyHooks??=[]).push(t,p)}}function lf(n,e,t){aC(n,e,3,t)}function df(n,e,t,r){(n[ne]&3)===t&&aC(n,e,t,r)}function H_(n,e){let t=n[ne];(t&3)===e&&(t&=16383,t+=1,n[ne]=t)}function aC(n,e,t,r){let i=r!==void 0?n[so]&65535:0,s=r??-1,a=e.length-1,c=0;for(let l=i;l<a;l++)if(typeof e[l+1]=="number"){if(c=e[l],r!=null&&c>=r)break}else e[l]<0&&(n[so]+=65536),(c<s||s==-1)&&(N1(n,t,e,l),n[so]=(n[so]&4294901760)+l+2),l++}function S0(n,e){Fe(4,n,e);let t=ue(null);try{e.call(n)}finally{ue(t),Fe(5,n,e)}}function N1(n,e,t,r){let i=t[r]<0,s=t[r+1],a=i?-t[r]:t[r],c=n[a];i?n[ne]>>14<n[so]>>16&&(n[ne]&3)===e&&(n[ne]+=16384,S0(c,s)):S0(c,s)}var Sa=-1,ho=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function P1(n){return(n.flags&8)!==0}function M1(n){return(n.flags&16)!==0}function x1(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],a=t[r++],c=t[r++];n.setAttribute(e,a,c,s)}else{let s=i,a=t[++r];k1(s)?n.setProperty(e,s,a):n.setAttribute(e,s,a),r++}}return r}function cC(n){return n===3||n===4||n===6}function k1(n){return n.charCodeAt(0)===64}function El(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?R0(n,t,i,null,e[++r]):R0(n,t,i,null,null))}}return n}function R0(n,e,t,r,i){let s=0,a=n.length;if(e===-1)a=-1;else for(;s<n.length;){let c=n[s++];if(typeof c=="number"){if(c===e){a=-1;break}else if(c>e){a=s-1;break}}}for(;s<n.length;){let c=n[s];if(typeof c=="number")break;if(c===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}a!==-1&&(n.splice(a,0,e),s=a+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function uC(n){return n!==Sa}function gf(n){return n&32767}function O1(n){return n>>16}function mf(n,e){let t=O1(n),r=e;for(;t>0;)r=r[io],t--;return r}var ev=!0;function N0(n){let e=ev;return ev=n,e}var F1=256,lC=F1-1,dC=5,V1=0,Mr={};function L1(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ro)&&(r=t[ro]),r==null&&(r=t[ro]=V1++);let i=r&lC,s=1<<i;e.data[n+(i>>dC)]|=s}function yf(n,e){let t=hC(n,e);if(t!==-1)return t;let r=e[re];r.firstCreatePass&&(n.injectorIndex=e.length,z_(r.data,n),z_(e,null),z_(r.blueprint,null));let i=Tv(n,e),s=n.injectorIndex;if(uC(i)){let a=gf(i),c=mf(i,e),l=c[re].data;for(let h=0;h<8;h++)e[s+h]=c[a+h]|l[a+h]}return e[s+8]=i,s}function z_(n,e){n.push(0,0,0,0,0,0,0,0,e)}function hC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Tv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=yC(i),r===null)return Sa;if(t++,i=i[io],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Sa}function tv(n,e,t){L1(n,e,t)}function U1(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(cC(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function fC(n,e,t){if(t&8||n!==void 0)return n;Hh(e,"NodeInjector")}function pC(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Ki],s=un(void 0);try{return i?i.get(e,r,t&8):l_(e,r,t&8)}finally{un(s)}}return fC(r,e,t)}function gC(n,e,t,r=0,i){if(n!==null){if(e[ne]&2048&&!(r&2)){let a=q1(n,e,t,r,Mr);if(a!==Mr)return a}let s=mC(n,e,t,r,Mr);if(s!==Mr)return s}return pC(e,t,r,i)}function mC(n,e,t,r,i){let s=B1(t);if(typeof s=="function"){if(!O_(e,n,r))return r&1?fC(i,t,r):pC(e,t,r,i);try{let a;if(a=s(r),a==null&&!(r&8))Hh(t);else return a}finally{F_()}}else if(typeof s=="number"){let a=null,c=hC(n,e),l=Sa,h=r&1?e[Cn][Dn]:null;for((c===-1||r&4)&&(l=c===-1?Tv(n,e):e[c+8],l===Sa||!M0(r,!1)?c=-1:(a=e[re],c=gf(l),e=mf(l,e)));c!==-1;){let p=e[re];if(P0(s,c,p.data)){let _=j1(c,e,t,a,r,h);if(_!==Mr)return _}l=e[c+8],l!==Sa&&M0(r,e[re].data[c+8]===h)&&P0(s,c,e)?(a=p,c=gf(l),e=mf(l,e)):c=-1}}return i}function j1(n,e,t,r,i,s){let a=e[re],c=a.data[n+8],l=r==null?Ji(c)&&ev:r!=a&&(c.type&3)!==0,h=i&1&&s===c,p=hf(c,a,t,l,h);return p!==null?Il(e,a,p,c,i):Mr}function hf(n,e,t,r,i){let s=n.providerIndexes,a=e.data,c=s&1048575,l=n.directiveStart,h=n.directiveEnd,p=s>>20,_=r?c:c+p,w=i?c+p:h;for(let C=_;C<w;C++){let A=a[C];if(C<l&&t===A||C>=l&&A.type===t)return C}if(i){let C=a[l];if(C&&Pr(C)&&C.type===t)return l}return null}function Il(n,e,t,r,i){let s=n[t],a=e.data;if(s instanceof ho){let c=s;if(c.resolving){let C=FD(a[t]);throw u_(C)}let l=N0(c.canSeeViewProviders);c.resolving=!0;let h=a[t].type||a[t],p,_=c.injectImpl?un(c.injectImpl):null,w=O_(n,r,0);try{s=n[t]=c.factory(void 0,i,a,n,r),e.firstCreatePass&&t>=r.directiveStart&&R1(t,a[t],e)}finally{_!==null&&un(_),N0(l),c.resolving=!1,F_()}}return s}function B1(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ro)?n[ro]:void 0;return typeof e=="number"?e>=0?e&lC:$1:e}function P0(n,e,t){let r=1<<n;return!!(t[e+(n>>dC)]&r)}function M0(n,e){return!(n&2)&&!(n&1&&e)}var lo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return gC(this._tNode,this._lView,e,Zs(r),t)}};function $1(){return new lo(Ft(),Se())}function Nn(n){return xa(()=>{let e=n.prototype.constructor,t=e[tl]||nv(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[tl]||nv(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function nv(n){return n_(n)?()=>{let e=nv(Dt(n));return e&&e()}:eo(n)}function q1(n,e,t,r,i){let s=n,a=e;for(;s!==null&&a!==null&&a[ne]&2048&&!wa(a);){let c=mC(s,a,t,r|2,Mr);if(c!==Mr)return c;let l=s.parent;if(!l){let h=a[I_];if(h){let p=h.get(t,Mr,r);if(p!==Mr)return p}l=yC(a),a=a[io]}s=l}return i}function yC(n){let e=n[re],t=e.type;return t===2?e.declTNode:t===1?n[Dn]:null}function Dl(n){return U1(Ft(),n)}function H1(){return ka(Ft(),Se())}function ka(n,e){return new tn(cr(n,e))}var tn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=H1}return n})();function z1(n){return n instanceof tn?n.nativeElement:n}function G1(){return this._results[Symbol.iterator]()}var _f=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new nt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=$D(e);(this._changesDetected=!BD(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=G1};function _C(n){return(n.flags&128)===128}var bv=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(bv||{}),vC=new Map,W1=0;function K1(){return W1++}function Q1(n){vC.set(n[ll],n)}function rv(n){vC.delete(n[ll])}var x0="__ngContext__";function Ra(n,e){Nr(e)?(n[x0]=e[ll],Q1(e)):n[x0]=e}function EC(n){return wC(n[Ia])}function IC(n){return wC(n[bn])}function wC(n){for(;n!==null&&!ar(n);)n=n[bn];return n}var iv;function Dv(n){iv=n}function TC(){if(iv!==void 0)return iv;if(typeof document<"u")return document;throw new H(210,!1)}var Sf=new z("",{factory:()=>Y1}),Y1="ng";var Rf=new z(""),mo=new z("",{providedIn:"platform",factory:()=>"unknown"});var Nf=new z("",{factory:()=>TC().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var bC=!1,DC=new z("",{factory:()=>bC});var J1=(n,e,t,r)=>{};function X1(n,e,t,r){J1(n,e,t,r)}function Cv(n){return(n.flags&32)===32}var Z1=()=>null;function CC(n,e,t=!1){return Z1(n,e,t)}function AC(n,e){let t=n.contentQueries;if(t!==null){let r=ue(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],a=t[i+1];if(a!==-1){let c=n.data[a];Zh(s),c.contentQueries(2,e[a],a)}}}finally{ue(r)}}}function sv(n,e,t){Zh(0);let r=ue(null);try{e(n,t)}finally{ue(r)}}function SC(n,e,t){if(w_(e)){let r=ue(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let a=i;a<s;a++){let c=n.data[a];if(c.contentQueries){let l=t[a];c.contentQueries(1,l,a)}}}finally{ue(r)}}}var dr=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(dr||{});var cf;function eO(){if(cf===void 0&&(cf=null,In.trustedTypes))try{cf=In.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return cf}function k0(n){return eO()?.createScriptURL(n)||n}var vf=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${$h})`}};function Pf(n){return n instanceof vf?n.changingThisBreaksApplicationSecurity:n}function Av(n,e){let t=RC(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${$h})`)}return t===e}function RC(n){return n instanceof vf&&n.getTypeName()||null}var tO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function NC(n){return n=String(n),n.match(tO)?n:"unsafe:"+n}var Mf=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Mf||{});function ts(n){let e=MC();return e?e.sanitize(Mf.URL,n)||"":Av(n,"URL")?Pf(n):NC(ya(n))}function PC(n){let e=MC();if(e)return k0(e.sanitize(Mf.RESOURCE_URL,n)||"");if(Av(n,"ResourceURL"))return k0(Pf(n));throw new H(904,!1)}function nO(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?PC:ts}function Sv(n,e,t){return nO(e,t)(n)}function MC(){let n=Se();return n&&n[Sr].sanitizer}function xC(n){return n instanceof Function?n():n}function rO(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var kC="ng-template";function iO(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&rO(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Rv(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Rv(n){return n.type===4&&n.value!==kC}function sO(n,e,t){let r=n.type===4&&!t?kC:n.value;return e===r}function oO(n,e,t){let r=4,i=n.attrs,s=i!==null?uO(i):0,a=!1;for(let c=0;c<e.length;c++){let l=e[c];if(typeof l=="number"){if(!a&&!lr(r)&&!lr(l))return!1;if(a&&lr(l))continue;a=!1,r=l|r&1;continue}if(!a)if(r&4){if(r=2|r&1,l!==""&&!sO(n,l,t)||l===""&&e.length===1){if(lr(r))return!1;a=!0}}else if(r&8){if(i===null||!iO(n,i,l,t)){if(lr(r))return!1;a=!0}}else{let h=e[++c],p=aO(l,i,Rv(n),t);if(p===-1){if(lr(r))return!1;a=!0;continue}if(h!==""){let _;if(p>s?_="":_=i[p+1].toLowerCase(),r&2&&h!==_){if(lr(r))return!1;a=!0}}}}return lr(r)||a}function lr(n){return(n&1)===0}function aO(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let a=e[i];if(a===n)return i;if(a===3||a===6)s=!0;else if(a===1||a===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(a===4)break;if(a===0){i+=4;continue}}i+=s?1:2}return-1}else return lO(e,n)}function cO(n,e,t=!1){for(let r=0;r<e.length;r++)if(oO(n,e[r],t))return!0;return!1}function uO(n){for(let e=0;e<n.length;e++){let t=n[e];if(cC(t))return e}return n.length}function lO(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function O0(n,e){return n?":not("+e.trim()+")":e}function dO(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let a=n[t];if(typeof a=="string")if(r&2){let c=n[++t];i+="["+a+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+a:r&4&&(i+=" "+a);else i!==""&&!lr(a)&&(e+=O0(s,i),i=""),r=a,s=s||!lr(r);t++}return i!==""&&(e+=O0(s,i)),e}function hO(n){return n.map(dO).join(",")}function fO(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!lr(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var Ti={};function pO(n,e){return n.createText(e)}function gO(n,e,t){n.setValue(e,t)}function OC(n,e,t){return n.createElement(e,t)}function Ef(n,e,t,r,i){n.insertBefore(e,t,r,i)}function FC(n,e,t){n.appendChild(e,t)}function F0(n,e,t,r,i){r!==null?Ef(n,e,t,r,i):FC(n,e,t)}function mO(n,e,t,r){n.removeChild(null,e,t,r)}function yO(n,e,t){n.setAttribute(e,"style",t)}function _O(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function VC(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&x1(n,e,r),i!==null&&_O(n,e,i),s!==null&&yO(n,e,s)}function Nv(n,e,t,r,i,s,a,c,l,h,p){let _=hn+r,w=_+i,C=vO(_,w),A=typeof h=="function"?h():h;return C[re]={type:n,blueprint:C,template:t,queries:null,viewQuery:c,declTNode:e,data:C.slice().fill(null,_),bindingStartIndex:_,expandoStartIndex:w,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:l,consts:A,incompleteFirstPass:!1,ssrId:p}}function vO(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ti);return t}function EO(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Nv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Pv(n,e,t,r,i,s,a,c,l,h,p){let _=e.blueprint.slice();return _[or]=i,_[ne]=r|4|128|8|64|1024,(h!==null||n&&n[ne]&2048)&&(_[ne]|=2048),b_(_),_[yt]=_[io]=n,_[Ot]=t,_[Sr]=a||n&&n[Sr],_[Qe]=c||n&&n[Qe],_[Ki]=l||n&&n[Ki]||null,_[Dn]=s,_[ll]=K1(),_[ul]=p,_[I_]=h,_[Cn]=e.type==2?n[Cn]:_,_}function IO(n,e,t){let r=cr(e,n),i=EO(t),s=n[Sr].rendererFactory,a=Mv(n,Pv(n,i,null,LC(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=a}function LC(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function UC(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Mv(n,e){return n[Ia]?n[E_][bn]=e:n[Ia]=e,n[E_]=e,e}function K(n=1){jC(Kt(),Se(),uo()+n,!1)}function jC(n,e,t,r){if(!r)if((e[ne]&3)===3){let s=n.preOrderCheckHooks;s!==null&&lf(e,s,t)}else{let s=n.preOrderHooks;s!==null&&df(e,s,0,t)}Xi(t)}var xf=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(xf||{});function ov(n,e,t,r){let i=ue(null);try{let[s,a,c]=n.inputs[t],l=null;(a&xf.SignalBased)!==0&&(l=e[s][zt]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):c!==null&&(r=c.call(e,r)),n.setInput!==null?n.setInput(e,l,r,t,s):nC(e,l,s,r)}finally{ue(i)}}var xr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(xr||{}),wO;function xv(n,e){return wO(n,e)}var Na=new Set,kf=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(kf||{}),yo=new z(""),V0=new Set;function Of(n){V0.has(n)||(V0.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var kv=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),BC=[0,1,2,3],$C=(()=>{class n{ngZone=x(qe);scheduler=x(zi);errorHandler=x(Ar,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){x(yo,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Fe(16),this.executing=!0;for(let r of BC)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Fe(17)}register(t){let{view:r}=t;r!==void 0?((r[oo]??=[]).push(t),Ta(r),r[ne]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(kf.AFTER_NEXT_RENDER,t):t()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),If=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,s,a=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=a,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[oo];e&&(this.view[oo]=e.filter(t=>t!==this))}};function Ff(n,e){let t=e?.injector??x(_t);return Of("NgAfterNextRender"),bO(n,t,e,!0)}function TO(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function bO(n,e,t,r){let i=e.get(kv);i.impl??=e.get($C);let s=e.get(yo,null,{optional:!0}),a=t?.manualCleanup!==!0?e.get(ur):null,c=e.get(of,null,{optional:!0}),l=new If(i.impl,TO(n),c?.view,r,a,s?.snapshot(null));return i.impl.register(l),l}var DO=new z("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function qC(n,e,t){let r=n.get(DO);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function CO(n,e){for(let[t,r]of e)qC(n,r.animateFns)}function L0(n,e,t,r){let i=n?.[hl]?.enter;e!==null&&i&&i.has(t.index)&&CO(r,i)}function Aa(n,e,t,r,i,s,a,c){if(i!=null){let l,h=!1;ar(i)?l=i:Nr(i)&&(h=!0,i=i[or]);let p=An(i);n===0&&r!==null?(L0(c,r,s,t),a==null?FC(e,r,p):Ef(e,r,p,a||null,!0)):n===1&&r!==null?(L0(c,r,s,t),Ef(e,r,p,a||null,!0)):n===2?U0(c,s,t,_=>{mO(e,p,h,_)}):n===3&&U0(c,s,t,()=>{e.destroyNode(p)}),l!=null&&UO(e,n,t,l,s,r,a)}}function AO(n,e){HC(n,e),e[or]=null,e[Dn]=null}function SO(n,e,t,r,i,s){r[or]=i,r[Dn]=e,Vf(n,r,t,1,i,s)}function HC(n,e){e[Sr].changeDetectionScheduler?.notify(9),Vf(n,e,e[Qe],2,null,null)}function RO(n){let e=n[Ia];if(!e)return G_(n[re],n);for(;e;){let t=null;if(Nr(e))t=e[Ia];else{let r=e[Wt];r&&(t=r)}if(!t){for(;e&&!e[bn]&&e!==n;)Nr(e)&&G_(e[re],e),e=e[yt];e===null&&(e=n),Nr(e)&&G_(e[re],e),t=e&&e[bn]}e=t}}function Ov(n,e){let t=n[ao],r=t.indexOf(e);t.splice(r,1)}function zC(n,e){if(co(e))return;let t=e[Qe];t.destroyNode&&Vf(n,e,t,3,null,null),RO(e)}function G_(n,e){if(co(e))return;let t=ue(null);try{e[ne]&=-129,e[ne]|=256,e[dn]&&Wu(e[dn]),MO(n,e),PO(n,e),e[re].type===1&&e[Qe].destroy();let r=e[Qi];if(r!==null&&ar(e[yt])){r!==e[yt]&&Ov(r,e);let i=e[Rr];i!==null&&i.detachView(n)}rv(e)}finally{ue(t)}}function U0(n,e,t,r){let i=n?.[hl];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Na.add(n),qC(t,()=>{if(i.leave&&i.leave.has(e.index)){let a=i.leave.get(e.index),c=[];if(a){for(let l=0;l<a.animateFns.length;l++){let h=a.animateFns[l],{promise:p}=h();c.push(p)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(c),NO(n,r)}else n&&Na.delete(n),r(!1)},i)}function NO(n,e){let t=n[hl]?.running;if(t){t.then(()=>{n[hl].running=void 0,Na.delete(n),e(!0)});return}e(!1)}function PO(n,e){let t=n.cleanup,r=e[Ea];if(t!==null)for(let a=0;a<t.length-1;a+=2)if(typeof t[a]=="string"){let c=t[a+3];c>=0?r[c]():r[-c].unsubscribe(),a+=2}else{let c=r[t[a+1]];t[a].call(c)}r!==null&&(e[Ea]=null);let i=e[_i];if(i!==null){e[_i]=null;for(let a=0;a<i.length;a++){let c=i[a];c()}}let s=e[dl];if(s!==null){e[dl]=null;for(let a of s)a.destroy()}}function MO(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ho)){let s=t[r+1];if(Array.isArray(s))for(let a=0;a<s.length;a+=2){let c=i[s[a]],l=s[a+1];Fe(4,c,l);try{l.call(c)}finally{Fe(5,c,l)}}else{Fe(4,i,s);try{s.call(i)}finally{Fe(5,i,s)}}}}}function xO(n,e,t){return kO(n,e.parent,t)}function kO(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[or];if(Ji(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===dr.None||i===dr.Emulated)return null}return cr(r,t)}function OO(n,e,t){return VO(n,e,t)}function FO(n,e,t){return n.type&40?cr(n,t):null}var VO=FO,j0;function Fv(n,e,t,r){let i=xO(n,r,e),s=e[Qe],a=r.parent||e[Dn],c=OO(a,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)F0(s,i,t[l],c,!1);else F0(s,i,t,c,!1);j0!==void 0&&j0(s,r,e,t,i)}function _l(n,e){if(e!==null){let t=e.type;if(t&3)return cr(e,n);if(t&4)return av(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return _l(n,r);{let i=n[e.index];return ar(i)?av(-1,i):An(i)}}else{if(t&128)return _l(n,e.next);if(t&32)return xv(e,n)()||An(n[e.index]);{let r=GC(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Hi(n[Cn]);return _l(i,r)}else return _l(n,e.next)}}}return null}function GC(n,e){if(e!==null){let r=n[Cn][Dn],i=e.projection;return r.projection[i]}return null}function av(n,e){let t=Wt+n+1;if(t<e.length){let r=e[t],i=r[re].firstChild;if(i!==null)return _l(r,i)}return e[Yi]}function Vv(n,e,t,r,i,s,a){for(;t!=null;){let c=r[Ki];if(t.type===128){t=t.next;continue}let l=r[t.index],h=t.type;if(a&&e===0&&(l&&Ra(An(l),r),t.flags|=2),!Cv(t))if(h&8)Vv(n,e,t.child,r,i,s,!1),Aa(e,n,c,i,l,t,s,r);else if(h&32){let p=xv(t,r),_;for(;_=p();)Aa(e,n,c,i,_,t,s,r);Aa(e,n,c,i,l,t,s,r)}else h&16?LO(n,e,r,t,i,s):Aa(e,n,c,i,l,t,s,r);t=a?t.projectionNext:t.next}}function Vf(n,e,t,r,i,s){Vv(t,r,n.firstChild,e,i,s,!1)}function LO(n,e,t,r,i,s){let a=t[Cn],l=a[Dn].projection[r.projection];if(Array.isArray(l))for(let h=0;h<l.length;h++){let p=l[h];Aa(e,n,t[Ki],i,p,r,s,t)}else{let h=l,p=a[yt];_C(r)&&(h.flags|=128),Vv(n,e,h,p,i,s,!0)}}function UO(n,e,t,r,i,s,a){let c=r[Yi],l=An(r);c!==l&&Aa(e,n,t,s,c,i,a);for(let h=Wt;h<r.length;h++){let p=r[h];Vf(p[re],p,n,e,s,c)}}function jO(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:xr.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=xr.Important),n.setStyle(t,r,i,s))}}function WC(n,e,t,r,i){let s=uo(),a=r&2;try{Xi(-1),a&&e.length>hn&&jC(n,e,hn,!1),Fe(a?2:0,i,t),t(r,i)}finally{Xi(s),Fe(a?3:1,i,t)}}function Lv(n,e,t){WO(n,e,t),(t.flags&64)===64&&KO(n,e,t)}function KC(n,e,t=cr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let a=r[s+1],c=a===-1?t(e,n):n[a];n[i++]=c}}}function BO(n,e,t,r){let s=r.get(DC,bC)||t===dr.ShadowDom||t===dr.ExperimentalIsolatedShadowDom,a=n.selectRootElement(e,s);return $O(a),a}function $O(n){qO(n)}var qO=()=>null;function HO(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function QC(n,e,t,r,i,s){let a=e[re];if(Uv(n,a,e,t,r)){Ji(n)&&GO(e,n.index);return}n.type&3&&(t=HO(t)),zO(n,e,t,r,i,s)}function zO(n,e,t,r,i,s){if(n.type&3){let a=cr(n,e);r=s!=null?s(r,n.value||"",t):r,i.setProperty(a,t,r)}else n.type&12}function GO(n,e){let t=Sn(e,n);t[ne]&16||(t[ne]|=64)}function WO(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Ji(t)&&IO(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||yf(t,e);let s=t.initialInputs;for(let a=r;a<i;a++){let c=n.data[a],l=Il(e,n,a,t);if(Ra(l,e),s!==null&&XO(e,a-r,l,c,t,s),Pr(c)){let h=Sn(t.index,e);h[Ot]=Il(e,n,a,t)}}}function KO(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,a=g0();try{Xi(s);for(let c=r;c<i;c++){let l=n.data[c],h=e[c];Xh(c),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&QO(l,h)}}finally{Xi(-1),Xh(a)}}function QO(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function YC(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];cO(e,s.selectors,!1)&&(r??=[],Pr(s)?r.unshift(s):r.push(s))}return r}function YO(n,e,t,r,i,s){let a=cr(n,e);JO(e[Qe],a,s,n.value,t,r,i)}function JO(n,e,t,r,i,s,a){if(s==null)n.removeAttribute(e,i,t);else{let c=a==null?ya(s):a(s,r||"",i);n.setAttribute(e,i,c,t)}}function XO(n,e,t,r,i,s){let a=s[e];if(a!==null)for(let c=0;c<a.length;c+=2){let l=a[c],h=a[c+1];ov(r,t,l,h)}}function ZO(n,e,t,r,i){let s=hn+t,a=e[re],c=i(a,e,n,r,t);e[s]=c,ba(n,!0);let l=n.type===2;return l?(VC(e[Qe],c,n),(r0()===0||pl(n))&&Ra(c,e),i0()):Ra(c,e),rf()&&(!l||!Cv(n))&&Fv(a,e,c,n),n}function eF(n){let e=n;return P_()?l0():(e=e.parent,ba(e,!1)),e}function tF(n,e){let t=n[Ki];if(!t)return;let r;try{r=t.get(Rn,null)}catch{r=null}r?.(e)}function Uv(n,e,t,r,i){let s=n.inputs?.[r],a=n.hostDirectiveInputs?.[r],c=!1;if(a)for(let l=0;l<a.length;l+=2){let h=a[l],p=a[l+1],_=e.data[h];ov(_,t[h],p,i),c=!0}if(s)for(let l of s){let h=t[l],p=e.data[l];ov(p,h,r,i),c=!0}return c}function nF(n,e){let t=Sn(e,n),r=t[re];rF(r,t);let i=t[or];i!==null&&t[ul]===null&&(t[ul]=CC(i,t[Ki])),Fe(18),jv(r,t,t[Ot]),Fe(19,t[Ot])}function rF(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function jv(n,e,t){ef(e);try{let r=n.viewQuery;r!==null&&sv(1,r,t);let i=n.template;i!==null&&WC(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Rr]?.finishViewCreation(n),n.staticContentQueries&&AC(n,e),n.staticViewQueries&&sv(2,n.viewQuery,t);let s=n.components;s!==null&&iF(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ne]&=-5,tf()}}function iF(n,e){for(let t=0;t<e.length;t++)nF(n,e[t])}function sF(n,e,t,r){let i=ue(null);try{let s=e.tView,c=n[ne]&4096?4096:16,l=Pv(n,s,t,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),h=n[e.index];l[Qi]=h;let p=n[Rr];return p!==null&&(l[Rr]=p.createEmbeddedView(s)),jv(s,l,t),l}finally{ue(i)}}function B0(n,e){return!e||e.firstChild===null||_C(n)}function wl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(An(s)),ar(s)&&JC(s,r);let a=t.type;if(a&8)wl(n,e,t.child,r);else if(a&32){let c=xv(t,e),l;for(;l=c();)r.push(l)}else if(a&16){let c=GC(e,t);if(Array.isArray(c))r.push(...c);else{let l=Hi(e[Cn]);wl(l[re],l,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function JC(n,e){for(let t=Wt;t<n.length;t++){let r=n[t],i=r[re].firstChild;i!==null&&wl(r[re],r,i,e)}n[Yi]!==n[or]&&e.push(n[Yi])}function XC(n){if(n[oo]!==null){for(let e of n[oo])e.impl.addSequence(e);n[oo].length=0}}var ZC=[];function oF(n){return n[dn]??aF(n)}function aF(n){let e=ZC.pop()??Object.create(uF);return e.lView=n,e}function cF(n){n.lView[dn]!==n&&(n.lView=null,ZC.push(n))}var uF=fe(V({},Hu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Ta(n.lView)},consumerOnSignalRead(){this.lView[dn]=this}});function lF(n){let e=n[dn]??Object.create(dF);return e.lView=n,e}var dF=fe(V({},Hu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Hi(n.lView);for(;e&&!eA(e[re]);)e=Hi(e);e&&D_(e)},consumerOnSignalRead(){this.lView[dn]=this}});function eA(n){return n.type!==2}function tA(n){if(n[dl]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[dl])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ne]&8192)}}var hF=100;function nA(n,e=0){let r=n[Sr].rendererFactory,i=!1;i||r.begin?.();try{fF(n,e)}finally{i||r.end?.()}}function fF(n,e){let t=M_();try{x_(!0),cv(n,e);let r=0;for(;ml(n);){if(r===hF)throw new H(103,!1);r++,cv(n,1)}}finally{x_(t)}}function pF(n,e,t,r){if(co(e))return;let i=e[ne],s=!1,a=!1;ef(e);let c=!0,l=null,h=null;s||(eA(n)?(h=oF(e),l=Gu(h)):ch()===null?(c=!1,h=lF(e),l=Gu(h)):e[dn]&&(Wu(e[dn]),e[dn]=null));try{b_(e),d0(n.bindingStartIndex),t!==null&&WC(n,e,t,2,r);let p=(i&3)===3;if(!s)if(p){let C=n.preOrderCheckHooks;C!==null&&lf(e,C,null)}else{let C=n.preOrderHooks;C!==null&&df(e,C,0,null),H_(e,0)}if(a||gF(e),tA(e),rA(e,0),n.contentQueries!==null&&AC(n,e),!s)if(p){let C=n.contentCheckHooks;C!==null&&lf(e,C)}else{let C=n.contentHooks;C!==null&&df(e,C,1),H_(e,1)}yF(n,e);let _=n.components;_!==null&&sA(e,_,0);let w=n.viewQuery;if(w!==null&&sv(2,w,r),!s)if(p){let C=n.viewCheckHooks;C!==null&&lf(e,C)}else{let C=n.viewHooks;C!==null&&df(e,C,2),H_(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Kh]){for(let C of e[Kh])C();e[Kh]=null}s||(XC(e),e[ne]&=-73)}catch(p){throw s||Ta(e),p}finally{h!==null&&(uh(h,l),c&&cF(h)),tf()}}function rA(n,e){for(let t=EC(n);t!==null;t=IC(t))for(let r=Wt;r<t.length;r++){let i=t[r];iA(i,e)}}function gF(n){for(let e=EC(n);e!==null;e=IC(e)){if(!(e[ne]&2))continue;let t=e[ao];for(let r=0;r<t.length;r++){let i=t[r];D_(i)}}}function mF(n,e,t){Fe(18);let r=Sn(e,n);iA(r,t),Fe(19,r[Ot])}function iA(n,e){Yh(n)&&cv(n,e)}function cv(n,e){let r=n[re],i=n[ne],s=n[dn],a=!!(e===0&&i&16);if(a||=!!(i&64&&e===0),a||=!!(i&1024),a||=!!(s?.dirty&&lh(s)),a||=!1,s&&(s.dirty=!1),n[ne]&=-9217,a)pF(r,n,r.template,n[Ot]);else if(i&8192){let c=ue(null);try{tA(n),rA(n,1);let l=r.components;l!==null&&sA(n,l,1),XC(n)}finally{ue(c)}}}function sA(n,e,t){for(let r=0;r<e.length;r++)mF(n,e[r],t)}function yF(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Xi(~i);else{let s=i,a=t[++r],c=t[++r];p0(a,s);let l=e[s];Fe(24,l),c(2,l),Fe(25,l)}}}finally{Xi(-1)}}function Bv(n,e){let t=M_()?64:1088;for(n[Sr].changeDetectionScheduler?.notify(e);n;){n[ne]|=t;let r=Hi(n);if(wa(n)&&!r)return n;n=r}return null}function oA(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function _F(n,e,t,r=!0){let i=e[re];if(vF(i,e,n,t),r){let a=av(t,n),c=e[Qe],l=c.parentNode(n[Yi]);l!==null&&SO(i,n[Dn],c,e,l,a)}let s=e[ul];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function uv(n,e){if(n.length<=Wt)return;let t=Wt+e,r=n[t];if(r){let i=r[Qi];i!==null&&i!==n&&Ov(i,r),e>0&&(n[t-1][bn]=r[bn]);let s=ol(n,Wt+e);AO(r[re],r);let a=s[Rr];a!==null&&a.detachView(s[re]),r[yt]=null,r[bn]=null,r[ne]&=-129}return r}function vF(n,e,t,r){let i=Wt+r,s=t.length;r>0&&(t[i-1][bn]=e),r<s-Wt?(e[bn]=t[i],d_(t,Wt+r,e)):(t.push(e),e[bn]=null),e[yt]=t;let a=e[Qi];a!==null&&t!==a&&aA(a,e);let c=e[Rr];c!==null&&c.insertView(n),Jh(e),e[ne]|=128}function aA(n,e){let t=n[ao],r=e[yt];if(Nr(r))n[ne]|=2;else{let i=r[yt][Cn];e[Cn]!==i&&(n[ne]|=2)}t===null?n[ao]=[e]:t.push(e)}var Zi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[re];return wl(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Ot]}set context(e){this._lView[Ot]=e}get destroyed(){return co(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[yt];if(ar(e)){let t=e[fl],r=t?t.indexOf(this):-1;r>-1&&(uv(e,r),ol(t,r))}this._attachedToViewContainer=!1}zC(this._lView[re],this._lView)}onDestroy(e){C_(this._lView,e)}markForCheck(){Bv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){Jh(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,nA(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=wa(this._lView),t=this._lView[Qi];t!==null&&!e&&Ov(t,this._lView),HC(this._lView[re],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e;let t=wa(this._lView),r=this._lView[Qi];r!==null&&!t&&aA(r,this._lView),Jh(this._lView)}};var es=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=EF;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let s=sF(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Zi(s)}}return n})();function EF(){return $v(Ft(),Se())}function $v(n,e){return n.type&4?new es(e,n,ka(n,e)):null}function qv(n,e,t,r,i){let s=n.data[e];if(s===null)s=IF(n,e,t,r,i),f0()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let a=u0();s.injectorIndex=a===null?-1:a.injectorIndex}return ba(s,!0),s}function IF(n,e,t,r,i){let s=N_(),a=P_(),c=a?s:s&&s.parent,l=n.data[e]=TF(n,c,t,e,r,i);return wF(n,l,s,a),l}function wF(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function TF(n,e,t,r,i,s){let a=e?e.injectorIndex:-1,c=0;return o0()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var bF=()=>null;function $0(n,e){return bF(n,e)}var cA=class{},Lf=class{},lv=class{resolveComponentFactory(e){throw new H(917,!1)}},Cl=class{static NULL=new lv},fo=class{},Or=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>DF()}return n})();function DF(){let n=Se(),e=Ft(),t=Sn(e.index,n);return(Nr(t)?t:n)[Qe]}var uA=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>null})}return n})();var ff={},dv=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,ff,r);return i!==ff||t===ff?i:this.parentInjector.get(e,t,r)}};function q0(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number")s=c;else if(s==1)i=t_(i,c);else if(s==2){let l=c,h=e[++a];r=t_(r,l+": "+h+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Q(n,e=0){let t=Se();if(t===null)return te(n,e);let r=Ft();return gC(r,t,Dt(n),e)}function lA(n,e,t,r,i){let s=r===null?null:{"":-1},a=i(n,t);if(a!==null){let c=a,l=null,h=null;for(let p of a)if(p.resolveHostDirectives!==null){[c,l,h]=p.resolveHostDirectives(a);break}SF(n,e,t,c,s,l,h)}s!==null&&r!==null&&CF(t,r,s)}function CF(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new H(-301,!1);r.push(e[i],s)}}function AF(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function SF(n,e,t,r,i,s,a){let c=r.length,l=!1;for(let w=0;w<c;w++){let C=r[w];!l&&Pr(C)&&(l=!0,AF(n,t,w)),tv(yf(t,e),n,C.type)}kF(t,n.data.length,c);for(let w=0;w<c;w++){let C=r[w];C.providersResolver&&C.providersResolver(C)}let h=!1,p=!1,_=UC(n,e,c,null);c>0&&(t.directiveToIndex=new Map);for(let w=0;w<c;w++){let C=r[w];if(t.mergedAttrs=El(t.mergedAttrs,C.hostAttrs),NF(n,t,e,_,C),xF(_,C,i),a!==null&&a.has(C)){let[N,R]=a.get(C);t.directiveToIndex.set(C.type,[_,N+t.directiveStart,R+t.directiveStart])}else(s===null||!s.has(C))&&t.directiveToIndex.set(C.type,_);C.contentQueries!==null&&(t.flags|=4),(C.hostBindings!==null||C.hostAttrs!==null||C.hostVars!==0)&&(t.flags|=64);let A=C.type.prototype;!h&&(A.ngOnChanges||A.ngOnInit||A.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),h=!0),!p&&(A.ngOnChanges||A.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),p=!0),_++}RF(n,t,s)}function RF(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))H0(0,e,i,r),H0(1,e,i,r),G0(e,r,!1);else{let s=t.get(i);z0(0,e,s,r),z0(1,e,s,r),G0(e,r,!0)}}}function H0(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let a;n===0?a=e.inputs??={}:a=e.outputs??={},a[s]??=[],a[s].push(r),dA(e,s)}}function z0(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let a=i[s],c;n===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[a]??=[],c[a].push(r,s),dA(e,a)}}function dA(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function G0(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||Rv(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let a=null,c=0;for(;c<r.length;){let l=r[c];if(l===0){c+=4;continue}else if(l===5){c+=2;continue}else if(typeof l=="number")break;if(!t&&i.hasOwnProperty(l)){let h=i[l];for(let p of h)if(p===e){a??=[],a.push(l,r[c+1]);break}}else if(t&&s.hasOwnProperty(l)){let h=s[l];for(let p=0;p<h.length;p+=2)if(h[p]===e){a??=[],a.push(h[p+1],r[c+1]);break}}c+=2}n.initialInputs??=[],n.initialInputs.push(a)}function NF(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=eo(i.type,!0)),a=new ho(s,Pr(i),Q,null);n.blueprint[r]=a,t[r]=a,PF(n,e,r,UC(n,t,i.hostVars,Ti),i)}function PF(n,e,t,r,i){let s=i.hostBindings;if(s){let a=n.hostBindingOpCodes;a===null&&(a=n.hostBindingOpCodes=[]);let c=~e.index;MF(a)!=c&&a.push(c),a.push(t,r,s)}}function MF(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function xF(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Pr(e)&&(t[""]=n)}}function kF(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function hA(n,e,t,r,i,s,a,c){let l=e[re],h=l.consts,p=gl(h,a),_=qv(l,n,t,r,p);return s&&lA(l,e,_,gl(h,c),i),_.mergedAttrs=El(_.mergedAttrs,_.attrs),_.attrs!==null&&q0(_,_.attrs,!1),_.mergedAttrs!==null&&q0(_,_.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,_),_}function fA(n,e){oC(n,e),w_(e)&&n.queries.elementEnd(e)}function Hv(n){return gA(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function pA(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function gA(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Oa(n,e,t){if(t===Ti)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function W_(n,e,t){return function r(i){let s=Ji(n)?Sn(n.index,e):e;Bv(s,5);let a=e[Ot],c=W0(e,a,t,i),l=r.__ngNextListenerFn__;for(;l;)c=W0(e,a,l,i)&&c,l=l.__ngNextListenerFn__;return c}}function W0(n,e,t,r){let i=ue(null);try{return Fe(6,e,t),t(r)!==!1}catch(s){return tF(n,s),!1}finally{Fe(7,e,t),ue(i)}}function OF(n,e,t,r,i,s,a,c){let l=pl(n),h=!1,p=null;if(!r&&l&&(p=VF(e,t,s,n.index)),p!==null){let _=p.__ngLastListenerFn__||p;_.__ngNextListenerFn__=a,p.__ngLastListenerFn__=a,h=!0}else{let _=cr(n,t),w=r?r(_):_;X1(t,w,s,c);let C=i.listen(w,s,c);if(!FF(s)){let A=r?N=>r(An(N[n.index])):n.index;mA(A,e,t,s,c,C,!1)}}return h}function FF(n){return n.startsWith("animation")||n.startsWith("transition")}function VF(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let a=i[s];if(a===t&&i[s+1]===r){let c=e[Ea],l=i[s+2];return c&&c.length>l?c[l]:null}typeof a=="string"&&(s+=2)}return null}function mA(n,e,t,r,i,s,a){let c=e.firstCreatePass?S_(e):null,l=A_(t),h=l.length;l.push(i,s),c&&c.push(r,n,h,(h+1)*(a?-1:1))}function K0(n,e,t,r,i,s){let a=e[t],c=e[re],h=c.data[t].outputs[r],_=a[h].subscribe(s);mA(n.index,c,e,i,s,_,!0)}var hv=Symbol("BINDING");var wf=class extends Cl{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Wi(e);return new Pa(t,this.ngModule)}};function LF(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&xf.SignalBased)!==0};return i&&(s.transform=i),s})}function UF(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function jF(n,e,t){let r=e instanceof ft?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new dv(t,r):t}function BF(n){let e=n.get(fo,null);if(e===null)throw new H(407,!1);let t=n.get(uA,null),r=n.get(zi,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function $F(n,e){let t=yA(n);return OC(e,t,t==="svg"?YD:t==="math"?JD:null)}function yA(n){return(n.selectors[0][0]||"div").toLowerCase()}var Pa=class extends Lf{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=LF(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=UF(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=hO(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,a){Fe(22);let c=ue(null);try{let l=this.componentDef,h=qF(r,l,a,s),p=jF(l,i||this.ngModule,e),_=BF(p),w=_.rendererFactory.createRenderer(null,l),C=r?BO(w,r,l.encapsulation,p):$F(l,w),A=a?.some(Q0)||s?.some(O=>typeof O!="function"&&O.bindings.some(Q0)),N=Pv(null,h,null,512|LC(l),null,null,_,w,p,null,CC(C,p,!0));N[hn]=C,ef(N);let R=null;try{let O=hA(hn,N,2,"#host",()=>h.directiveRegistry,!0,0);VC(w,C,O),Ra(C,N),Lv(h,N,O),SC(h,O,N),fA(h,O),t!==void 0&&zF(O,this.ngContentSelectors,t),R=Sn(O.index,N),N[Ot]=R[Ot],jv(h,N,null)}catch(O){throw R!==null&&rv(R),rv(N),O}finally{Fe(23),tf()}return new Tf(this.componentType,N,!!A)}finally{ue(c)}}};function qF(n,e,t,r){let i=n?["ng-version","21.0.0"]:fO(e.selectors[0]),s=null,a=null,c=0;if(t)for(let p of t)c+=p[hv].requiredVars,p.create&&(p.targetIdx=0,(s??=[]).push(p)),p.update&&(p.targetIdx=0,(a??=[]).push(p));if(r)for(let p=0;p<r.length;p++){let _=r[p];if(typeof _!="function")for(let w of _.bindings){c+=w[hv].requiredVars;let C=p+1;w.create&&(w.targetIdx=C,(s??=[]).push(w)),w.update&&(w.targetIdx=C,(a??=[]).push(w))}}let l=[e];if(r)for(let p of r){let _=typeof p=="function"?p:p.type,w=g_(_);l.push(w)}return Nv(0,null,HF(s,a),1,c,l,null,null,null,[i],null)}function HF(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function Q0(n){let e=n[hv].kind;return e==="input"||e==="twoWay"}var Tf=class extends cA{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Qh(t[re],hn),this.location=ka(this._tNode,t),this.instance=Sn(this._tNode.index,t)[Ot],this.hostView=this.changeDetectorRef=new Zi(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=Uv(r,i[re],i,e,t);this.previousInputValues.set(e,t);let a=Sn(r.index,i);Bv(a,1)}get injector(){return new lo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function zF(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var bi=(()=>{class n{static __NG_ELEMENT_ID__=GF}return n})();function GF(){let n=Ft();return vA(n,Se())}var WF=bi,_A=class extends WF{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ka(this._hostTNode,this._hostLView)}get injector(){return new lo(this._hostTNode,this._hostLView)}get parentInjector(){let e=Tv(this._hostTNode,this._hostLView);if(uC(e)){let t=mf(e,this._hostLView),r=gf(e),i=t[re].data[r+8];return new lo(i,t)}else return new lo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Y0(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Wt}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let a=$0(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(t||{},s,a);return this.insertImpl(c,i,B0(this._hostTNode,a)),c}createComponent(e,t,r,i,s,a,c){let l=e&&!D1(e),h;if(l)h=t;else{let R=t||{};h=R.index,r=R.injector,i=R.projectableNodes,s=R.environmentInjector||R.ngModuleRef,a=R.directives,c=R.bindings}let p=l?e:new Pa(Wi(e)),_=r||this.parentInjector;if(!s&&p.ngModule==null){let O=(l?_:this.parentInjector).get(ft,null);O&&(s=O)}let w=Wi(p.componentType??{}),C=$0(this._lContainer,w?.id??null),A=C?.firstChild??null,N=p.create(_,i,A,s,a,c);return this.insertImpl(N.hostView,h,B0(this._hostTNode,C)),N}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(ZD(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let l=i[yt],h=new _A(l,l[Dn],l[yt]);h.detach(h.indexOf(e))}}let s=this._adjustIndex(t),a=this._lContainer;return _F(a,i,s,r),e.attachToViewContainerRef(),d_(K_(a),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Y0(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=uv(this._lContainer,t);r&&(ol(K_(this._lContainer),t),zC(r[re],r))}detach(e){let t=this._adjustIndex(e,-1),r=uv(this._lContainer,t);return r&&ol(K_(this._lContainer),t)!=null?new Zi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Y0(n){return n[fl]}function K_(n){return n[fl]||(n[fl]=[])}function vA(n,e){let t,r=e[n.index];return ar(r)?t=r:(t=oA(r,e,null,n),e[n.index]=t,Mv(e,t)),QF(t,e,n,r),new _A(t,n,e)}function KF(n,e){let t=n[Qe],r=t.createComment(""),i=cr(e,n),s=t.parentNode(i);return Ef(t,s,r,t.nextSibling(i),!1),r}var QF=XF,YF=()=>!1;function JF(n,e,t){return YF(n,e,t)}function XF(n,e,t,r){if(n[Yi])return;let i;t.type&8?i=An(r):i=KF(e,t),n[Yi]=i}var fv=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},pv=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let a=t.getByIndex(s),c=this.queries[a.indexInDeclarationView];i.push(c.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)zv(e,t).matches!==null&&this.queries[t].setDirty()}},gv=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=oV(e):this.predicate=e}},mv=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},yv=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,ZF(t,s)),this.matchTNodeWithReadOption(e,t,hf(t,e,s,!1,!1))}else r===es?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,hf(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===tn||i===bi||i===es&&t.type&4)this.addMatch(t.index,-2);else{let s=hf(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function ZF(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function eV(n,e){return n.type&11?ka(n,e):n.type&4?$v(n,e):null}function tV(n,e,t,r){return t===-1?eV(e,n):t===-2?nV(n,e,r):Il(n,n[re],t,e)}function nV(n,e,t){if(t===tn)return ka(e,n);if(t===es)return $v(e,n);if(t===bi)return vA(e,n)}function EA(n,e,t,r){let i=e[Rr].queries[r];if(i.matches===null){let s=n.data,a=t.matches,c=[];for(let l=0;a!==null&&l<a.length;l+=2){let h=a[l];if(h<0)c.push(null);else{let p=s[h];c.push(tV(e,p,a[l+1],t.metadata.read))}}i.matches=c}return i.matches}function _v(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let a=EA(n,e,i,t);for(let c=0;c<s.length;c+=2){let l=s[c];if(l>0)r.push(a[c/2]);else{let h=s[c+1],p=e[-l];for(let _=Wt;_<p.length;_++){let w=p[_];w[Qi]===w[yt]&&_v(w[re],w,h,r)}if(p[ao]!==null){let _=p[ao];for(let w=0;w<_.length;w++){let C=_[w];_v(C[re],C,h,r)}}}}}return r}function rV(n,e){return n[Rr].queries[e].queryList}function iV(n,e,t){let r=new _f((t&4)===4);return n0(n,e,r,r.destroy),(e[Rr]??=new pv).queries.push(new fv(r))-1}function sV(n,e,t,r){let i=Kt();if(i.firstCreatePass){let s=Ft();aV(i,new gv(e,t,r),s.index),cV(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return iV(i,Se(),t)}function oV(n){return n.split(",").map(e=>e.trim())}function aV(n,e,t){n.queries===null&&(n.queries=new mv),n.queries.track(new yv(e,t))}function cV(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function zv(n,e){return n.queries.getByIndex(e)}function uV(n,e){let t=n[re],r=zv(t,e);return r.crossesNgTemplate?_v(t,n,e,[]):EA(t,n,r,e)}var po=class{},Uf=class{};var bf=class extends po{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new wf(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=p_(e);this._bootstrapComponents=xC(s.bootstrap),this._r3Injector=V_(e,t,[{provide:po,useValue:this},{provide:Cl,useValue:this.componentFactoryResolver},...r],vi(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Df=class extends Uf{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new bf(this.moduleType,e,[])}};var Tl=class extends po{injector;componentFactoryResolver=new wf(this);instance=null;constructor(e){super();let t=new no([...e.providers,{provide:po,useValue:this},{provide:Cl,useValue:this.componentFactoryResolver}],e.parent||cl(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Al(n,e,t=null){return new Tl({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var lV=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=m_(!1,t.type),i=r.length>0?Al([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=q({token:n,providedIn:"environment",factory:()=>new n(te(ft))})}return n})();function fn(n){return xa(()=>{let e=IA(n),t=fe(V({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===bv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(lV).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||dr.Emulated,styles:n.styles||ln,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Of("NgStandalone"),wA(t);let r=n.dependencies;return t.directiveDefs=J0(r,dV),t.pipeDefs=J0(r,zD),t.id=pV(t),t})}function dV(n){return Wi(n)||g_(n)}function hr(n){return xa(()=>({type:n.type,bootstrap:n.bootstrap||ln,declarations:n.declarations||ln,imports:n.imports||ln,exports:n.exports||ln,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function hV(n,e){if(n==null)return Gi;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,a,c,l;Array.isArray(i)?(c=i[0],s=i[1],a=i[2]??s,l=i[3]||null):(s=i,a=i,c=xf.None,l=null),t[s]=[r,c,l],e[s]=a}return t}function fV(n){if(n==null)return Gi;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Ke(n){return xa(()=>{let e=IA(n);return wA(e),e})}function IA(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Gi,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||ln,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:hV(n.inputs,e),outputs:fV(n.outputs),debugInfo:null}}function wA(n){n.features?.forEach(e=>e(n))}function J0(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let s=e(i);s!==null&&r.push(s)}return r}:null}function pV(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function gV(n){return Object.getPrototypeOf(n.prototype).constructor}function Pn(n){let e=gV(n.type),t=!0,r=[n];for(;e;){let i;if(Pr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new H(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let a=n;a.inputs=Q_(n.inputs),a.declaredInputs=Q_(n.declaredInputs),a.outputs=Q_(n.outputs);let c=i.hostBindings;c&&EV(n,c);let l=i.viewQuery,h=i.contentQueries;if(l&&_V(n,l),h&&vV(n,h),mV(n,i),OD(n.outputs,i.outputs),Pr(i)&&i.data.animation){let p=n.data;p.animation=(p.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let a=0;a<s.length;a++){let c=s[a];c&&c.ngInherit&&c(n),c===Pn&&(t=!1)}}e=Object.getPrototypeOf(e)}yV(r)}function mV(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function yV(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=El(i.hostAttrs,t=El(t,i.hostAttrs))}}function Q_(n){return n===Gi?{}:n===ln?[]:n}function _V(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function vV(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function EV(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function IV(n,e,t,r,i,s,a,c){if(t.firstCreatePass){n.mergedAttrs=El(n.mergedAttrs,n.attrs);let p=n.tView=Nv(2,n,i,s,a,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),p.queries=t.queries.embeddedTView(n))}c&&(n.flags|=c),ba(n,!1);let l=TV(t,e,n,r);rf()&&Fv(t,e,l,n),Ra(l,e);let h=oA(l,e,l,n);e[r+hn]=h,Mv(e,h),JF(h,n,e)}function wV(n,e,t,r,i,s,a,c,l,h,p){let _=t+hn,w;return e.firstCreatePass?(w=qv(e,_,4,a||null,c||null),R_()&&lA(e,n,w,gl(e.consts,h),YC),oC(e,w)):w=e.data[_],IV(w,n,e,t,r,i,s,l),pl(w)&&Lv(e,n,w),h!=null&&KC(n,w,p),w}function pn(n,e,t,r,i,s,a,c){let l=Se(),h=Kt(),p=gl(h.consts,s);return wV(l,h,n,e,t,r,i,p,void 0,a,c),pn}var TV=bV;function bV(n,e,t,r){return sf(!0),e[Qe].createComment("")}var Gv=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function TA(n){return typeof n=="function"&&n[zt]!==void 0}function Wv(n){return TA(n)&&typeof n.set=="function"}var jf=new z(""),Bf=new z(""),Sl=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(t,r,i){this._ngZone=t,this.registry=r,v_()&&(this._destroyRef=x(ur,{optional:!0})??void 0),Kv||(DA(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){let t=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),r=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{qe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{t.unsubscribe(),r.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),t()},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static \u0275fac=function(r){return new(r||n)(te(qe),te(bA),te(Bf))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),bA=(()=>{class n{_applications=new Map;registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Kv?.findTestabilityInTree(this,t,r)??null}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function DA(n){Kv=n}var Kv;function ns(n){return!!n&&typeof n.then=="function"}function Qv(n){return!!n&&typeof n.subscribe=="function"}var CA=new z("");var Yv=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=x(CA,{optional:!0})??[];injector=x(_t);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=pt(this.injector,i);if(ns(s))t.push(s);else if(Qv(s)){let a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});t.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$f=new z("");function AA(){yy(()=>{let n="";throw new H(600,n)})}function SA(n){return n.isBoundToModule}var DV=10;var Di=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=x(Rn);afterRenderManager=x(kv);zonelessEnabled=x(yl);rootEffectScheduler=x(q_);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new nt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=x(Ii);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Be(t=>!t))}constructor(){x(yo,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=x(ft);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=_t.NULL){return this._injector.get(qe).run(()=>{Fe(10);let a=t instanceof Lf;if(!this._injector.get(Yv).done){let A="";throw new H(405,A)}let l;a?l=t:l=this._injector.get(Cl).resolveComponentFactory(t),this.componentTypes.push(l.componentType);let h=SA(l)?void 0:this._injector.get(po),p=r||l.selector,_=l.create(i,[],p,h),w=_.location.nativeElement,C=_.injector.get(jf,null);return C?.registerApplication(w),_.onDestroy(()=>{this.detachView(_.hostView),vl(this.components,_),C?.unregisterApplication(w)}),this._loadComponent(_),Fe(11,_),_})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Fe(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(kf.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new H(101,!1);let t=ue(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ue(t),this.afterTick.next(),Fe(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(fo,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<DV;)Fe(14),this.synchronizeOnce(),Fe(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ml(i))continue;let s=r&&!this.zonelessEnabled?0:1;nA(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>ml(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;vl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get($f,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>vl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new H(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function _o(n,e,t,r){let i=Se(),s=Da();if(Oa(i,s,e)){let a=Kt(),c=nf();YO(c,i,n,e,t,r)}return _o}var yQ=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function Ue(n,e,t){let r=Se(),i=Da();if(Oa(r,i,e)){let s=Kt(),a=nf();QC(a,r,n,e,r[Qe],t)}return Ue}function X0(n,e,t,r,i){Uv(e,n,t,i?"class":"style",r)}function P(n,e,t,r){let i=Se(),s=i[re],a=n+hn,c=s.firstCreatePass?hA(a,i,2,e,YC,R_(),t,r):s.data[a];if(ZO(c,i,n,e,CV),pl(c)){let l=i[re];Lv(l,i,c),SC(l,c,i)}return r!=null&&KC(i,c),P}function M(){let n=Kt(),e=Ft(),t=eF(e);return n.firstCreatePass&&fA(n,t),a0(t)&&c0(),s0(),t.classesWithoutHost!=null&&P1(t)&&X0(n,t,Se(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&M1(t)&&X0(n,t,Se(),t.stylesWithoutHost,!1),M}function gn(n,e,t,r){return P(n,e,t,r),M(),gn}var CV=(n,e,t,r,i)=>(sf(!0),OC(e[Qe],r,I0()));function Fr(){return Se()}var Rl="en-US";var AV=Rl;function RA(n){typeof n=="string"&&(AV=n.toLowerCase().replace(/_/g,"-"))}function Oe(n,e,t){let r=Se(),i=Kt(),s=Ft();return NA(i,r,r[Qe],s,n,e,t),Oe}function NA(n,e,t,r,i,s,a){let c=!0,l=null;if((r.type&3||a)&&(l??=W_(r,e,s),OF(r,n,e,a,t,i,s,l)&&(c=!1)),c){let h=r.outputs?.[i],p=r.hostDirectiveOutputs?.[i];if(p&&p.length)for(let _=0;_<p.length;_+=2){let w=p[_],C=p[_+1];l??=W_(r,e,s),K0(r,e,w,C,i,l)}if(h&&h.length)for(let _ of h)l??=W_(r,e,s),K0(r,e,_,i,i,l)}}function Ve(n=1){return E0(n)}function Jv(n,e,t,r){sV(n,e,t,r)}function Xv(n){let e=Se(),t=Kt(),r=k_();Zh(r+1);let i=zv(t,r);if(n.dirty&&XD(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=uV(e,r);n.reset(s,z1),n.notifyOnChanges()}return!0}return!1}function Zv(){return rV(Se(),k_())}function uf(n,e){return n<<17|e<<2}function go(n){return n>>17&32767}function SV(n){return(n&2)==2}function RV(n,e){return n&131071|e<<17}function vv(n){return n|2}function Ma(n){return(n&131068)>>2}function Y_(n,e){return n&-131069|e<<2}function NV(n){return(n&1)===1}function Ev(n){return n|1}function PV(n,e,t,r,i,s){let a=s?e.classBindings:e.styleBindings,c=go(a),l=Ma(a);n[r]=t;let h=!1,p;if(Array.isArray(t)){let _=t;p=_[1],(p===null||_a(_,p)>0)&&(h=!0)}else p=t;if(i)if(l!==0){let w=go(n[c+1]);n[r+1]=uf(w,c),w!==0&&(n[w+1]=Y_(n[w+1],r)),n[c+1]=RV(n[c+1],r)}else n[r+1]=uf(c,0),c!==0&&(n[c+1]=Y_(n[c+1],r)),c=r;else n[r+1]=uf(l,0),c===0?c=r:n[l+1]=Y_(n[l+1],r),l=r;h&&(n[r+1]=vv(n[r+1])),Z0(n,p,r,!0),Z0(n,p,r,!1),MV(e,p,n,r,s),a=uf(c,l),s?e.classBindings=a:e.styleBindings=a}function MV(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&_a(s,e)>=0&&(t[r+1]=Ev(t[r+1]))}function Z0(n,e,t,r){let i=n[t+1],s=e===null,a=r?go(i):Ma(i),c=!1;for(;a!==0&&(c===!1||s);){let l=n[a],h=n[a+1];xV(l,e)&&(c=!0,n[a+1]=r?Ev(h):vv(h)),a=r?go(h):Ma(h)}c&&(n[t+1]=r?vv(i):Ev(i))}function xV(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?_a(n,e)>=0:!1}function qf(n,e){return kV(n,e,null,!0),qf}function kV(n,e,t,r){let i=Se(),s=Kt(),a=h0(2);if(s.firstUpdatePass&&FV(s,n,a,r),e!==Ti&&Oa(i,a,e)){let c=s.data[uo()];BV(s,c,i,i[Qe],n,i[a+1]=$V(e,t),r,a)}}function OV(n,e){return e>=n.expandoStartIndex}function FV(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[uo()],a=OV(n,t);qV(s,r)&&e===null&&!a&&(e=!1),e=VV(i,s,e,r),PV(i,s,e,t,a,r)}}function VV(n,e,t,r){let i=m0(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=J_(null,n,e,t,r),t=bl(t,e.attrs,r),s=null);else{let a=e.directiveStylingLast;if(a===-1||n[a]!==i)if(t=J_(i,n,e,t,r),s===null){let l=LV(n,e,r);l!==void 0&&Array.isArray(l)&&(l=J_(null,n,e,l[1],r),l=bl(l,e.attrs,r),UV(n,e,r,l))}else s=jV(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function LV(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ma(r)!==0)return n[go(r)]}function UV(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[go(i)]=r}function jV(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let a=n[s].hostAttrs;r=bl(r,a,t)}return bl(r,e.attrs,t)}function J_(n,e,t,r,i){let s=null,a=t.directiveEnd,c=t.directiveStylingLast;for(c===-1?c=t.directiveStart:c++;c<a&&(s=e[c],r=bl(r,s.hostAttrs,i),s!==n);)c++;return n!==null&&(t.directiveStylingLast=c),r}function bl(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];typeof a=="number"?i=a:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),HD(n,a,t?!0:e[++s]))}return n===void 0?null:n}function BV(n,e,t,r,i,s,a,c){if(!(e.type&3))return;let l=n.data,h=l[c+1],p=NV(h)?eC(l,e,t,i,Ma(h),a):void 0;if(!Cf(p)){Cf(s)||SV(h)&&(s=eC(l,null,t,i,c,a));let _=T_(uo(),t);jO(r,a,_,i,s)}}function eC(n,e,t,r,i,s){let a=e===null,c;for(;i>0;){let l=n[i],h=Array.isArray(l),p=h?l[1]:l,_=p===null,w=t[i+1];w===Ti&&(w=_?ln:void 0);let C=_?Gh(w,r):p===r?w:void 0;if(h&&!Cf(C)&&(C=Gh(l,r)),Cf(C)&&(c=C,a))return c;let A=n[i+1];i=a?go(A):Ma(A)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(c=Gh(l,r))}return c}function Cf(n){return n!==void 0}function $V(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=vi(Pf(n)))),n}function qV(n,e){return(n.flags&(e?8:16))!==0}function L(n,e=""){let t=Se(),r=Kt(),i=n+hn,s=r.firstCreatePass?qv(r,i,1,e,null):r.data[i],a=HV(r,t,s,e,n);t[i]=a,rf()&&Fv(r,t,a,s),ba(s,!1)}var HV=(n,e,t,r,i)=>(sf(!0),pO(e[Qe],r));function zV(n,e,t,r=""){return Oa(n,Da(),t)?e+ya(t)+r:Ti}function Yt(n){return Mn("",n),Yt}function Mn(n,e,t){let r=Se(),i=zV(r,n,e,t);return i!==Ti&&GV(r,uo(),i),Mn}function GV(n,e,t){let r=T_(e,n);gO(n[Qe],r,t)}function At(n,e,t){Wv(e)&&(e=e());let r=Se(),i=Da();if(Oa(r,i,e)){let s=Kt(),a=nf();QC(a,r,n,e,r[Qe],t)}return At}function Vt(n,e){let t=Wv(n);return t&&n.set(e),t}function St(n,e){let t=Se(),r=Kt(),i=Ft();return NA(r,t,t[Qe],i,n,e),St}function eE(n){return Oa(Se(),Da(),n)?ya(n):Ti}function WV(n,e,t){let r=Kt();if(r.firstCreatePass){let i=Pr(n);Iv(t,r.data,r.blueprint,i,!0),Iv(e,r.data,r.blueprint,i,!1)}}function Iv(n,e,t,r,i){if(n=Dt(n),Array.isArray(n))for(let s=0;s<n.length;s++)Iv(n[s],e,t,r,i);else{let s=Kt(),a=Se(),c=Ft(),l=to(n)?n:Dt(n.provide),h=__(n),p=c.providerIndexes&1048575,_=c.directiveStart,w=c.providerIndexes>>20;if(to(n)||!n.multi){let C=new ho(h,i,Q,null),A=Z_(l,e,i?p:p+w,_);A===-1?(tv(yf(c,a),s,l),X_(s,n,e.length),e.push(l),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(C),a.push(C)):(t[A]=C,a[A]=C)}else{let C=Z_(l,e,p+w,_),A=Z_(l,e,p,p+w),N=C>=0&&t[C],R=A>=0&&t[A];if(i&&!R||!i&&!N){tv(yf(c,a),s,l);let O=YV(i?QV:KV,t.length,i,r,h,n);!i&&R&&(t[A].providerFactory=O),X_(s,n,e.length,0),e.push(l),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(O),a.push(O)}else{let O=PA(t[i?A:C],h,!i&&r);X_(s,n,C>-1?C:A,O)}!i&&r&&R&&t[A].componentProviders++}}}function X_(n,e,t,r){let i=to(e),s=KD(e);if(i||s){let l=(s?Dt(e.useClass):e).prototype.ngOnDestroy;if(l){let h=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let p=h.indexOf(t);p===-1?h.push(t,[r,l]):h[p+1].push(r,l)}else h.push(t,l)}}}function PA(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Z_(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function KV(n,e,t,r,i){return wv(this.multi,[])}function QV(n,e,t,r,i){let s=this.multi,a;if(this.providerFactory){let c=this.providerFactory.componentProviders,l=Il(r,r[re],this.providerFactory.index,i);a=l.slice(0,c),wv(s,a);for(let h=c;h<l.length;h++)a.push(l[h])}else a=[],wv(s,a);return a}function wv(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function YV(n,e,t,r,i,s){let a=new ho(n,t,Q,null);return a.multi=[],a.index=e,a.componentProviders=0,PA(a,i,r&&!t),a}function Ci(n,e=[]){return t=>{t.providersResolver=(r,i)=>WV(r,i?i(n):n,e)}}var Af=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},tE=(()=>{class n{compileModuleSync(t){return new Df(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=p_(t),s=xC(i.declarations).reduce((a,c)=>{let l=Wi(c);return l&&a.push(new Pa(l)),a},[]);return new Af(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var MA=(()=>{class n{applicationErrorHandler=x(Rn);appRef=x(Di);taskService=x(Ii);ngZone=x(qe);zonelessEnabled=x(yl);tracing=x(yo,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ht;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(rl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(x($_,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?U_:L_;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(rl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,U_(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xA(){return[{provide:zi,useExisting:MA},{provide:qe,useClass:il},{provide:yl,useValue:!0}]}function JV(){return typeof $localize<"u"&&$localize.locale||Rl}var Hf=new z("",{factory:()=>x(Hf,{optional:!0,skipSelf:!0})||JV()});function Nl(n,e){return dh(n,e?.equal)}var VA=Symbol("InputSignalNode#UNSET"),hL=fe(V({},hh),{transformFn:void 0,applyValueToInputSignal(n,e){Ku(n,e)}});function LA(n,e){let t=Object.create(hL);t.value=n,t.transformFn=e?.transform;function r(){if(zu(t),t.value===VA){let i=null;throw new H(-950,i)}return t.value}return r[zt]=t,r}var Gf=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Dl(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function kA(n,e){return LA(n,e)}function fL(n){return LA(VA,n)}var UA=(kA.required=fL,kA);var nE=new z(""),pL=new z("");function Pl(n){return!n.moduleRef}function gL(n){let e=Pl(n)?n.r3Injector:n.moduleRef.injector,t=e.get(qe);return t.run(()=>{Pl(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Rn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Pl(n)){let s=()=>e.destroy(),a=n.platformInjector.get(nE);a.add(s),e.onDestroy(()=>{i.unsubscribe(),a.delete(s)})}else{let s=()=>n.moduleRef.destroy(),a=n.platformInjector.get(nE);a.add(s),n.moduleRef.onDestroy(()=>{vl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),a.delete(s)})}return yL(r,t,()=>{let s=e.get(Ii),a=s.add(),c=e.get(Yv);return c.runInitializers(),c.donePromise.then(()=>{let l=e.get(Hf,Rl);if(RA(l||Rl),!e.get(pL,!0))return Pl(n)?e.get(Di):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Pl(n)){let p=e.get(Di);return n.rootComponent!==void 0&&p.bootstrap(n.rootComponent),p}else return mL?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(a))})})}var mL;function yL(n,e,t){try{let r=t();return ns(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var zf=null;function _L(n=[],e){return _t.create({name:e,providers:[{provide:al,useValue:"platform"},{provide:nE,useValue:new Set([()=>zf=null])},...n]})}function vL(n=[]){if(zf)return zf;let e=_L(n);return zf=e,AA(),EL(e),e}function EL(n){let e=n.get(Rf,null);pt(n,()=>{e?.forEach(t=>t())})}function aE(){return!1}var rs=(()=>{class n{static __NG_ELEMENT_ID__=IL}return n})();function IL(n){return wL(Ft(),Se(),(n&16)===16)}function wL(n,e,t){if(Ji(n)&&!t){let r=Sn(n.index,e);return new Zi(r,r)}else if(n.type&175){let r=e[Cn];return new Zi(r,e)}return null}var rE=class{constructor(){}supports(e){return Hv(e)}create(e){return new iE(e)}},TL=(n,e)=>e,iE=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||TL}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let a=!r||t&&t.currentIndex<OA(r,i,s)?t:r,c=OA(a,i,s),l=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(t=t._next,a.previousIndex==null)i++;else{s||(s=[]);let h=c-i,p=l-i;if(h!=p){for(let w=0;w<h;w++){let C=w<s.length?s[w]:s[w]=0,A=C+w;p<=A&&A<h&&(s[w]=C+1)}let _=a.previousIndex;s[_]=p-h}}c!==l&&e(a,c,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Hv(e))throw new H(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,a;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)s=e[c],a=this._trackByFn(c,s),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,s,a,c),r=!0):(r&&(t=this._verifyReinsertion(t,s,a,c)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,pA(e,c=>{a=this._trackByFn(i,c),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,c,a,i),r=!0):(r&&(t=this._verifyReinsertion(t,c,a,i)),Object.is(t.item,c)||this._addIdentityChange(t,c)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new sE(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Wf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Wf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},sE=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},oE=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Wf=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new oE,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function OA(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function FA(){return new cE([new rE])}var cE=(()=>{class n{factories;static \u0275prov=q({token:n,providedIn:"root",factory:FA});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=x(n,{optional:!0,skipSelf:!0});return n.create(t,r||FA())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new H(901,!1)}}return n})();var jA=(()=>{class n{constructor(t){}static \u0275fac=function(r){return new(r||n)(te(Di))};static \u0275mod=hr({type:n});static \u0275inj=Tn({})}return n})();function BA(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Fe(8);try{let s=i?.injector??vL(r),a=[xA(),D0,...t||[]],c=new Tl({providers:a,parent:s,debugName:"",runEnvironmentInitializers:!1});return gL({r3Injector:c.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{Fe(9)}}function Fa(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var HA=null;function mn(){return HA}function uE(n){HA??=n}var xl=class{},lE=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>x(zA),providedIn:"platform"})}return n})();var zA=(()=>{class n extends lE{_location;_history;_doc=x(Qt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return mn().getBaseHref(this._doc)}onPopState(t){let r=mn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=mn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function GA(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function $A(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function is(n){return n&&n[0]!=="?"?`?${n}`:n}var Va=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>x(KA),providedIn:"root"})}return n})(),WA=new z(""),KA=(()=>{class n extends Va{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??x(Qt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return GA(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+is(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let a=this.prepareExternalUrl(i+is(s));this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,s){let a=this.prepareExternalUrl(i+is(s));this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(te(lE),te(WA,8))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),La=(()=>{class n{_subject=new nt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=CL($A(qA(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+is(r))}normalize(t){return n.stripTrailingSlash(DL(this._basePath,qA(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+is(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+is(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=is;static joinWithSlash=GA;static stripTrailingSlash=$A;static \u0275fac=function(r){return new(r||n)(te(Va))};static \u0275prov=q({token:n,factory:()=>bL(),providedIn:"root"})}return n})();function bL(){return new La(te(Va))}function DL(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function qA(n){return n.replace(/\/index.html$/,"")}function CL(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Kf=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ss=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,a)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Kf(i.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(s===null?void 0:s);else if(s!==null){let c=r.get(s);r.move(c,a),QA(c,i)}});for(let i=0,s=r.length;i<s;i++){let c=r.get(i).context;c.index=i,c.count=s,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);QA(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Q(bi),Q(es),Q(cE))};static \u0275dir=Ke({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function QA(n,e){n.context.$implicit=e.item}var vo=(()=>{class n{_viewContainer;_context=new Qf;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){YA(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){YA(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Q(bi),Q(es))};static \u0275dir=Ke({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Qf=class{$implicit=null;ngIf=null};function YA(n,e){if(n&&!n.createEmbeddedView)throw new H(2020,!1)}var Ai=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=hr({type:n});static \u0275inj=Tn({})}return n})();function dE(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var kl=class{};var JA="browser";var Ol=class{_doc;constructor(e){this._doc=e}manager},Jf=(()=>{class n extends Ol{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(te(Qt))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),ep=new z(""),gE=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(a=>{a.manager=this});let i=t.filter(a=>!(a instanceof Jf));this._plugins=i.slice().reverse();let s=t.find(a=>a instanceof Jf);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new H(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(te(ep),te(qe))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),hE="ng-app-id";function XA(n){for(let e of n)e.remove()}function ZA(n,e){let t=e.createElement("style");return t.textContent=n,t}function AL(n,e,t,r){let i=n.head?.querySelectorAll(`style[${hE}="${e}"],link[${hE}="${e}"]`);if(i)for(let s of i)s.removeAttribute(hE),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function pE(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var mE=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,AL(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,ZA);r?.forEach(i=>this.addUsage(i,this.external,pE))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(XA(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])XA(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,ZA(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,pE(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(te(Qt),te(Sf),te(Nf,8),te(mo))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),fE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},yE=/%COMP%/g;var tS="%COMP%",SL=`_nghost-${tS}`,RL=`_ngcontent-${tS}`,NL=!0,PL=new z("",{factory:()=>NL});function ML(n){return RL.replace(yE,n)}function xL(n){return SL.replace(yE,n)}function nS(n,e){return e.map(t=>t.replace(yE,n))}var _E=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,a,c,l=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=a,this.ngZone=c,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new Fl(t,a,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Zf?i.applyToHost(t):i instanceof Vl&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,_=this.platformIsServer,w=this.tracingService;switch(r.encapsulation){case dr.Emulated:s=new Zf(l,h,r,this.appId,p,a,c,_,w);break;case dr.ShadowDom:return new Xf(l,t,r,a,c,this.nonce,_,w,h);case dr.ExperimentalIsolatedShadowDom:return new Xf(l,t,r,a,c,this.nonce,_,w);default:s=new Vl(l,h,r,p,a,c,_,w);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(te(gE),te(mE),te(Sf),te(PL),te(Qt),te(qe),te(Nf),te(yo,8))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),Fl=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(fE[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(eS(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(eS(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new H(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=fE[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=fE[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(xr.DashCase|xr.Important)?e.style.setProperty(t,r,i&xr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&xr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=mn().getGlobalEventTarget(this.doc,e),!e))throw new H(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function eS(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Xf=class extends Fl{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,s,a,c,l,h){super(e,i,s,c,l),this.hostEl=t,this.sharedStylesHost=h,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let p=r.styles;p=nS(r.id,p);for(let w of p){let C=document.createElement("style");a&&C.setAttribute("nonce",a),C.textContent=w,this.shadowRoot.appendChild(C)}let _=r.getExternalStyles?.();if(_)for(let w of _){let C=pE(w,i);a&&C.setAttribute("nonce",a),this.shadowRoot.appendChild(C)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Vl=class extends Fl{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,a,c,l,h){super(e,s,a,c,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let p=r.styles;this.styles=h?nS(h,p):p,this.styleUrls=r.getExternalStyles?.(h)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Na.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Zf=class extends Vl{contentAttr;hostAttr;constructor(e,t,r,i,s,a,c,l,h){let p=i+"-"+r.id;super(e,t,r,s,a,c,l,h,p),this.contentAttr=ML(p),this.hostAttr=xL(p)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var tp=class n extends xl{supportsDOMEvents=!0;static makeCurrent(){uE(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=kL();return t==null?null:OL(t)}resetBaseElement(){Ll=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return dE(document.cookie,e)}},Ll=null;function kL(){return Ll=Ll||document.head.querySelector("base"),Ll?Ll.getAttribute("href"):null}function OL(n){return new URL(n,document.baseURI).pathname}var np=class{addToWindow(e){In.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new H(5103,!1);return s},In.getAllAngularTestabilities=()=>e.getAllTestabilities(),In.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=In.getAllAngularTestabilities(),s=i.length,a=function(){s--,s==0&&r()};i.forEach(c=>{c.whenStable(a)})};In.frameworkStabilizers||(In.frameworkStabilizers=[]),In.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?mn().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},FL=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),rS=["alt","control","meta","shift"],VL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},LL={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},iS=(()=>{class n extends Ol{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>mn().onAndCancel(t,a.domEventName,c,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),rS.forEach(h=>{let p=r.indexOf(h);p>-1&&(r.splice(p,1),a+=h+".")}),a+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=i,l.fullKey=a,l}static matchEventFullKeyCode(t,r){let i=VL[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),rS.forEach(a=>{if(a!==i){let c=LL[a];c(t)&&(s+=a+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(te(Qt))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();function vE(n,e,t){let r=V({rootComponent:n,platformRef:t?.platformRef},UL(e));return BA(r)}function UL(n){return{appProviders:[...sS,...n?.providers??[]],platformProviders:qL}}function jL(){tp.makeCurrent()}function BL(){return new Ar}function $L(){return Dv(document),document}var qL=[{provide:mo,useValue:JA},{provide:Rf,useValue:jL,multi:!0},{provide:Qt,useFactory:$L}];var HL=[{provide:Bf,useClass:np},{provide:jf,useClass:Sl},{provide:Sl,useClass:Sl}],sS=[{provide:al,useValue:"root"},{provide:Ar,useFactory:BL},{provide:ep,useClass:Jf,multi:!0},{provide:ep,useClass:iS,multi:!0},_E,mE,gE,{provide:fo,useExisting:_E},{provide:kl,useClass:FL},[]],EE=(()=>{class n{constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275mod=hr({type:n});static \u0275inj=Tn({providers:[...sS,...HL],imports:[Ai,jA]})}return n})();var oS=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(te(Qt))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var se="primary",Jl=Symbol("RouteTitle"),DE=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function To(n){return new DE(n)}function gS(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let a=r[s],c=n[s];if(a[0]===":")i[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function cp(n){return new Promise((e,t)=>{n.pipe(yi()).subscribe({next:r=>e(r),error:r=>t(r)})})}function GL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Vr(n[t],e[t]))return!1;return!0}function Vr(n,e){let t=n?CE(n):void 0,r=e?CE(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!mS(n[i],e[i]))return!1;return!0}function CE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function mS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function yS(n){return n.length>0?n[n.length-1]:null}function Do(n){return Mh(n)?n:ns(n)?Ze(Promise.resolve(n)):de(n)}function _S(n){return Mh(n)?cp(n):Promise.resolve(n)}var WL={exact:ES,subset:IS},vS={exact:KL,subset:QL,ignored:()=>!0};function aS(n,e,t){return WL[t.paths](n.root,e.root,t.matrixParams)&&vS[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function KL(n,e){return Vr(n,e)}function ES(n,e,t){if(!Io(n.segments,e.segments)||!sp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!ES(n.children[r],e.children[r],t))return!1;return!0}function QL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>mS(n[t],e[t]))}function IS(n,e,t){return wS(n,e,e.segments,t)}function wS(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Io(i,t)||e.hasChildren()||!sp(i,t,r))}else if(n.segments.length===t.length){if(!Io(n.segments,t)||!sp(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!IS(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Io(n.segments,i)||!sp(n.segments,i,r)||!n.children[se]?!1:wS(n.children[se],e,s,r)}}function sp(n,e,t){return e.every((r,i)=>vS[t](n[i].parameters,r.parameters))}var pr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Re([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=To(this.queryParams),this._queryParamMap}toString(){return XL.serialize(this)}},Re=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return op(this)}},os=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=To(this.parameters),this._parameterMap}toString(){return bS(this)}};function YL(n,e){return Io(n,e)&&n.every((t,r)=>Vr(t.parameters,e[r].parameters))}function Io(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function JL(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===se&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==se&&(t=t.concat(e(i,r)))}),t}var Xl=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>new as,providedIn:"root"})}return n})(),as=class{parse(e){let t=new SE(e);return new pr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ul(e.root,!0)}`,r=t2(e.queryParams),i=typeof e.fragment=="string"?`#${ZL(e.fragment)}`:"";return`${t}${r}${i}`}},XL=new as;function op(n){return n.segments.map(e=>bS(e)).join("/")}function Ul(n,e){if(!n.hasChildren())return op(n);if(e){let t=n.children[se]?Ul(n.children[se],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==se&&r.push(`${i}:${Ul(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=JL(n,(r,i)=>i===se?[Ul(n.children[se],!1)]:[`${i}:${Ul(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[se]!=null?`${op(n)}/${t[0]}`:`${op(n)}/(${t.join("//")})`}}function TS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function rp(n){return TS(n).replace(/%3B/gi,";")}function ZL(n){return encodeURI(n)}function AE(n){return TS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ap(n){return decodeURIComponent(n)}function cS(n){return ap(n.replace(/\+/g,"%20"))}function bS(n){return`${AE(n.path)}${e2(n.parameters)}`}function e2(n){return Object.entries(n).map(([e,t])=>`;${AE(e)}=${AE(t)}`).join("")}function t2(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${rp(t)}=${rp(i)}`).join("&"):`${rp(t)}=${rp(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var n2=/^[^\/()?;#]+/;function IE(n){let e=n.match(n2);return e?e[0]:""}var r2=/^[^\/()?;=#]+/;function i2(n){let e=n.match(r2);return e?e[0]:""}var s2=/^[^=?&#]+/;function o2(n){let e=n.match(s2);return e?e[0]:""}var a2=/^[^&#]+/;function c2(n){let e=n.match(a2);return e?e[0]:""}var SE=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Re([],{}):new Re([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[se]=new Re(e,t)),r}parseSegment(){let e=IE(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(e),new os(ap(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=i2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=IE(this.remaining);i&&(r=i,this.capture(r))}e[ap(t)]=ap(r)}parseQueryParam(e){let t=o2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let a=c2(this.remaining);a&&(r=a,this.capture(r))}let i=cS(t),s=cS(r);if(e.hasOwnProperty(i)){let a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=IE(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new H(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=se);let a=this.parseChildren();t[s??se]=Object.keys(a).length===1&&a[se]?a[se]:new Re([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new H(4011,!1)}};function DS(n){return n.segments.length>0?new Re([],{[se]:n}):n}function CS(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=CS(i);if(r===se&&s.segments.length===0&&s.hasChildren())for(let[a,c]of Object.entries(s.children))e[a]=c;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Re(n.segments,e);return u2(t)}function u2(n){if(n.numberOfChildren===1&&n.children[se]){let e=n.children[se];return new Re(n.segments.concat(e.segments),e.children)}return n}function cs(n){return n instanceof pr}function AS(n,e,t=null,r=null,i=new as){let s=SS(n);return RS(s,e,t,r,i)}function SS(n){let e;function t(s){let a={};for(let l of s.children){let h=t(l);a[l.outlet]=h}let c=new Re(s.url,a);return s===n&&(e=c),c}let r=t(n.root),i=DS(r);return e??i}function RS(n,e,t,r,i){let s=n;for(;s.parent;)s=s.parent;if(e.length===0)return wE(s,s,s,t,r,i);let a=l2(e);if(a.toRoot())return wE(s,s,new Re([],{}),t,r,i);let c=d2(a,s,n),l=c.processChildren?Bl(c.segmentGroup,c.index,a.commands):PS(c.segmentGroup,c.index,a.commands);return wE(s,c.segmentGroup,l,t,r,i)}function up(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Hl(n){return typeof n=="object"&&n!=null&&n.outlets}function uS(n,e,t){n||="\u0275";let r=new pr;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function wE(n,e,t,r,i,s){let a={};for(let[h,p]of Object.entries(r??{}))a[h]=Array.isArray(p)?p.map(_=>uS(h,_,s)):uS(h,p,s);let c;n===e?c=t:c=NS(n,e,t);let l=DS(CS(c));return new pr(l,a,i)}function NS(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=NS(s,e,t)}),new Re(n.segments,r)}var lp=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&up(r[0]))throw new H(4003,!1);let i=r.find(Hl);if(i&&i!==yS(r))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function l2(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new lp(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,a)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,h])=>{c[l]=typeof h=="string"?h.split("/"):h}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:a===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new lp(t,e,r)}var ja=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function d2(n,e,t){if(n.isAbsolute)return new ja(e,!0,0);if(!t)return new ja(e,!1,NaN);if(t.parent===null)return new ja(t,!0,0);let r=up(n.commands[0])?0:1,i=t.segments.length-1+r;return h2(t,i,n.numberOfDoubleDots)}function h2(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new ja(r,!1,i-s)}function f2(n){return Hl(n[0])?n[0].outlets:{[se]:n}}function PS(n,e,t){if(n??=new Re([],{}),n.segments.length===0&&n.hasChildren())return Bl(n,e,t);let r=p2(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Re(n.segments.slice(0,r.pathIndex),{});return s.children[se]=new Re(n.segments.slice(r.pathIndex),n.children),Bl(s,0,i)}else return r.match&&i.length===0?new Re(n.segments,{}):r.match&&!n.hasChildren()?RE(n,e,t):r.match?Bl(n,0,i):RE(n,e,t)}function Bl(n,e,t){if(t.length===0)return new Re(n.segments,{});{let r=f2(t),i={};if(Object.keys(r).some(s=>s!==se)&&n.children[se]&&n.numberOfChildren===1&&n.children[se].segments.length===0){let s=Bl(n.children[se],e,t);return new Re(n.segments,s.children)}return Object.entries(r).forEach(([s,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[s]=PS(n.children[s],e,a))}),Object.entries(n.children).forEach(([s,a])=>{r[s]===void 0&&(i[s]=a)}),new Re(n.segments,i)}}function p2(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let a=n.segments[i],c=t[r];if(Hl(c))break;let l=`${c}`,h=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&h&&typeof h=="object"&&h.outlets===void 0){if(!dS(l,h,a))return s;r+=2}else{if(!dS(l,{},a))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function RE(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Hl(s)){let l=g2(s.outlets);return new Re(r,l)}if(i===0&&up(t[0])){let l=n.segments[e];r.push(new os(l.path,lS(t[0]))),i++;continue}let a=Hl(s)?s.outlets[se]:`${s}`,c=i<t.length-1?t[i+1]:null;a&&c&&up(c)?(r.push(new os(a,lS(c))),i+=2):(r.push(new os(a,{})),i++)}return new Re(r,{})}function g2(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=RE(new Re([],{}),0,r))}),e}function lS(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function dS(n,e,t){return n==t.path&&Vr(e,t.parameters)}var $l="imperative",vt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(vt||{}),_n=class{id;url;constructor(e,t){this.id=e,this.url=t}},bo=class extends _n{type=vt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},gr=class extends _n{urlAfterRedirects;type=vt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Jt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Jt||{}),zl=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(zl||{}),Lr=class extends _n{reason;code;type=vt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Si=class extends _n{reason;code;type=vt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},$a=class extends _n{error;target;type=vt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Gl=class extends _n{urlAfterRedirects;state;type=vt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dp=class extends _n{urlAfterRedirects;state;type=vt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hp=class extends _n{urlAfterRedirects;state;shouldActivate;type=vt.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},fp=class extends _n{urlAfterRedirects;state;type=vt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pp=class extends _n{urlAfterRedirects;state;type=vt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gp=class{route;type=vt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},mp=class{route;type=vt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},yp=class{snapshot;type=vt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_p=class{snapshot;type=vt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vp=class{snapshot;type=vt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ep=class{snapshot;type=vt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Wl=class{},qa=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function m2(n){return!(n instanceof Wl)&&!(n instanceof qa)}function y2(n,e){return n.providers&&!n._injector&&(n._injector=Al(n.providers,e,`Route: ${n.path}`)),n._injector??e}function fr(n){return n.outlet||se}function _2(n,e){let t=n.filter(r=>fr(r)===e);return t.push(...n.filter(r=>fr(r)!==e)),t}function Ga(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ip=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ga(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Wa(this.rootInjector)}},Wa=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ip(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(te(ft))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wp=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=NE(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=NE(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=PE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return PE(e,this._root).map(t=>t.value)}};function NE(n,e){if(n===e.value)return e;for(let t of e.children){let r=NE(n,t);if(r)return r}return null}function PE(n,e){if(n===e.value)return[e];for(let t of e.children){let r=PE(n,t);if(r.length)return r.unshift(e),r}return[]}var yn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ua(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Kl=class extends wp{snapshot;constructor(e,t){super(e),this.snapshot=t,VE(this,e)}toString(){return this.snapshot.toString()}};function MS(n){let e=v2(n),t=new rt([new os("",{})]),r=new rt({}),i=new rt({}),s=new rt({}),a=new rt(""),c=new Ri(t,r,s,a,i,se,n,e.root);return c.snapshot=e.root,new Kl(new yn(c,[]),e)}function v2(n){let e={},t={},r={},s=new wo([],e,r,"",t,se,n,null,{});return new Ql("",new yn(s,[]))}var Ri=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,a,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=a,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Be(h=>h[Jl]))??de(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Be(e=>To(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Be(e=>To(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Tp(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&kS(i)&&(r.resolve[Jl]=i.title),r}var wo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Jl]}constructor(e,t,r,i,s,a,c,l,h){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=a,this.component=c,this.routeConfig=l,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=To(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=To(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Ql=class extends wp{url;constructor(e,t){super(t),this.url=e,VE(this,t)}toString(){return xS(this._root)}};function VE(n,e){e.value._routerState=n,e.children.forEach(t=>VE(n,t))}function xS(n){let e=n.children.length>0?` { ${n.children.map(xS).join(", ")} } `:"";return`${n.value}${e}`}function TE(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Vr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Vr(e.params,t.params)||n.paramsSubject.next(t.params),GL(e.url,t.url)||n.urlSubject.next(t.url),Vr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ME(n,e){let t=Vr(n.params,e.params)&&YL(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||ME(n.parent,e.parent))}function kS(n){return typeof n.title=="string"||n.title===null}var OS=new z(""),Zl=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=se;activateEvents=new st;deactivateEvents=new st;attachEvents=new st;detachEvents=new st;routerOutletData=UA();parentContexts=x(Wa);location=x(bi);changeDetector=x(rs);inputBinder=x(Ap,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=t;let i=this.location,a=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new xE(t,c,i.injector,this.routerOutletData);this.activated=i.createComponent(a,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ke({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[kr]})}return n})(),xE=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Ri?this.route:e===Wa?this.childContexts:e===OS?this.outletData:this.parent.get(e,t)}},Ap=new z("");var LE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=fn({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&gn(0,"router-outlet")},dependencies:[Zl],encapsulation:2})}return n})();function UE(n){let e=n.children&&n.children.map(UE),t=e?fe(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==se&&(t.component=LE),t}function E2(n,e,t){let r=Yl(n,e._root,t?t._root:void 0);return new Kl(r,e)}function Yl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=I2(n,e,t);return new yn(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let a=s.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(c=>Yl(n,c)),a}}let r=w2(e.value),i=e.children.map(s=>Yl(n,s));return new yn(r,i)}}function I2(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Yl(n,r,i);return Yl(n,r)})}function w2(n){return new Ri(new rt(n.url),new rt(n.params),new rt(n.queryParams),new rt(n.fragment),new rt(n.data),n.outlet,n.component,n)}var Ha=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},FS="ngNavigationCancelingError";function bp(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=cs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=VS(!1,Jt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function VS(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[FS]=!0,t.cancellationCode=e,t}function T2(n){return LS(n)&&cs(n.url)}function LS(n){return!!n&&n[FS]}var b2=(n,e,t,r)=>Be(i=>(new kE(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),kE=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),TE(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ua(t);e.children.forEach(s=>{let a=s.value.outlet;this.deactivateRoutes(s,i[a],r),delete i[a]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ua(e);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ua(e);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ua(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Ep(s.value.snapshot))}),e.children.length&&this.forwardEvent(new _p(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(TE(i),i===s)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),TE(c.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=i,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,r)}},Dp=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ba=class{component;route;constructor(e,t){this.component=e,this.route=t}};function D2(n,e,t){let r=n._root,i=e?e._root:null;return jl(r,i,t,[r.value])}function C2(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ka(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!r_(n)?n:e.get(n):r}function jl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ua(e);return n.children.forEach(a=>{A2(a,s[a.value.outlet],t,r.concat([a.value]),i),delete s[a.value.outlet]}),Object.entries(s).forEach(([a,c])=>ql(c,t.getContext(a),i)),i}function A2(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,a=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){let l=S2(a,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Dp(r)):(s.data=a.data,s._resolvedData=a._resolvedData),s.component?jl(n,e,c?c.children:null,r,i):jl(n,e,t,r,i),l&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Ba(c.outlet.component,a))}else a&&ql(e,c,i),i.canActivateChecks.push(new Dp(r)),s.component?jl(n,null,c?c.children:null,r,i):jl(n,null,t,r,i);return i}function S2(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Io(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Io(n.url,e.url)||!Vr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ME(n,e)||!Vr(n.queryParams,e.queryParams);case"paramsChange":default:return!ME(n,e)}}function ql(n,e,t){let r=Ua(n),i=n.value;Object.entries(r).forEach(([s,a])=>{i.component?e?ql(a,e.children.getContext(s),t):ql(a,null,t):ql(a,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ba(e.outlet.component,i)):t.canDeactivateChecks.push(new Ba(null,i)):t.canDeactivateChecks.push(new Ba(null,i))}function ed(n){return typeof n=="function"}function R2(n){return typeof n=="boolean"}function N2(n){return n&&ed(n.canLoad)}function P2(n){return n&&ed(n.canActivate)}function M2(n){return n&&ed(n.canActivateChild)}function x2(n){return n&&ed(n.canDeactivate)}function k2(n){return n&&ed(n.canMatch)}function US(n){return n instanceof Ys||n?.name==="EmptyError"}var ip=Symbol("INITIAL_VALUE");function za(){return Dr(n=>xy(n.map(e=>e.pipe(mi(1),Vy(ip)))).pipe(Be(e=>{for(let t of e)if(t!==!0){if(t===ip)return ip;if(t===!1||O2(t))return t}return!0}),sr(e=>e!==ip),mi(1)))}function O2(n){return cs(n)||n instanceof Ha}function jS(n){return n.aborted?de(void 0).pipe(mi(1)):new le(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function BS(n){return Zu(jS(n))}function F2(n,e){return kt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:a}}=t;return a.length===0&&s.length===0?de(fe(V({},t),{guardsResult:!0})):V2(a,r,i,n).pipe(kt(c=>c&&R2(c)?L2(r,s,n,e):de(c)),Be(c=>fe(V({},t),{guardsResult:c})))})}function V2(n,e,t,r){return Ze(n).pipe(kt(i=>q2(i.component,i.route,t,e,r)),yi(i=>i!==!0,!0))}function L2(n,e,t,r){return Ze(e).pipe(Xu(i=>ha(j2(i.route.parent,r),U2(i.route,r),$2(n,i.path,t),B2(n,i.route,t))),yi(i=>i!==!0,!0))}function U2(n,e){return n!==null&&e&&e(new vp(n)),de(!0)}function j2(n,e){return n!==null&&e&&e(new yp(n)),de(!0)}function B2(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return de(!0);let i=r.map(s=>Ju(()=>{let a=Ga(e)??t,c=Ka(s,a),l=P2(c)?c.canActivate(e,n):pt(a,()=>c(e,n));return Do(l).pipe(yi())}));return de(i).pipe(za())}function $2(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(a=>C2(a)).filter(a=>a!==null).map(a=>Ju(()=>{let c=a.guards.map(l=>{let h=Ga(a.node)??t,p=Ka(l,h),_=M2(p)?p.canActivateChild(r,n):pt(h,()=>p(r,n));return Do(_).pipe(yi())});return de(c).pipe(za())}));return de(s).pipe(za())}function q2(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return de(!0);let a=s.map(c=>{let l=Ga(e)??i,h=Ka(c,l),p=x2(h)?h.canDeactivate(n,e,t,r):pt(l,()=>h(n,e,t,r));return Do(p).pipe(yi())});return de(a).pipe(za())}function H2(n,e,t,r,i){let s=e.canLoad;if(s===void 0||s.length===0)return de(!0);let a=s.map(c=>{let l=Ka(c,n),h=N2(l)?l.canLoad(e,t):pt(n,()=>l(e,t)),p=Do(h);return i?p.pipe(BS(i)):p});return de(a).pipe(za(),$S(r))}function $S(n){return Dy(Gt(e=>{if(typeof e!="boolean")throw bp(n,e)}),Be(e=>e===!0))}function z2(n,e,t,r,i){let s=e.canMatch;if(!s||s.length===0)return de(!0);let a=s.map(c=>{let l=Ka(c,n),h=k2(l)?l.canMatch(e,t):pt(n,()=>l(e,t)),p=Do(h);return i?p.pipe(BS(i)):p});return de(a).pipe(za(),$S(r))}var Eo=class qS extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,qS.prototype)}},OE=class HS extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,HS.prototype)}};function G2(n){throw new H(4e3,!1)}function W2(n){throw VS(!1,Jt.GuardRejected)}var K2=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[se])throw G2(`${e.redirectTo}`);i=i.children[se]}}async applyRedirectCommands(e,t,r,i,s){let a=await Q2(t,i,s);if(a instanceof pr)throw new OE(a);let c=this.applyRedirectCreateUrlTree(a,this.urlSerializer.parse(a),e,r);if(a[0]==="/")throw new OE(c);return c}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new pr(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);r[i]=t[c]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),a={};return Object.entries(t.children).forEach(([c,l])=>{a[c]=this.createSegmentGroup(e,l,r,i)}),new Re(s,a)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function Q2(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:s,routeConfig:a,url:c,outlet:l,params:h,data:p,title:_}=e;return cp(Do(pt(t,()=>r({params:h,data:p,queryParams:i,fragment:s,routeConfig:a,url:c,outlet:l,title:_}))))}var FE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Y2(n,e,t,r,i,s){let a=zS(n,e,t);return a.matched?(r=y2(e,r),z2(r,e,t,i,s).pipe(Be(c=>c===!0?a:V({},FE)))):de(a)}function zS(n,e,t){if(e.path==="**")return J2(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},FE):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||gS)(t,n,e);if(!i)return V({},FE);let s={};Object.entries(i.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let a=i.consumed.length>0?V(V({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function J2(n){return{matched:!0,parameters:n.length>0?yS(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function hS(n,e,t,r){return t.length>0&&eU(n,t,r)?{segmentGroup:new Re(e,Z2(r,new Re(t,n.children))),slicedSegments:[]}:t.length===0&&tU(n,t,r)?{segmentGroup:new Re(n.segments,X2(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Re(n.segments,n.children),slicedSegments:t}}function X2(n,e,t,r){let i={};for(let s of t)if(Sp(n,e,s)&&!r[fr(s)]){let a=new Re([],{});i[fr(s)]=a}return V(V({},r),i)}function Z2(n,e){let t={};t[se]=e;for(let r of n)if(r.path===""&&fr(r)!==se){let i=new Re([],{});t[fr(r)]=i}return t}function eU(n,e,t){return t.some(r=>Sp(n,e,r)&&fr(r)!==se)}function tU(n,e,t){return t.some(r=>Sp(n,e,r))}function Sp(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function nU(n,e,t){return e.length===0&&!n.children[t]}var rU=class{};async function iU(n,e,t,r,i,s,a="emptyOnly",c){return new oU(n,e,t,r,i,a,s,c).recognize()}var sU=31,oU=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,a,c,l){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=a,this.urlSerializer=c,this.abortSignal=l,this.applyRedirects=new K2(this.urlSerializer,this.urlTree)}noMatchError(e){return new H(4002,`'${e.segmentGroup}'`)}async recognize(){let e=hS(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new yn(r,t),s=new Ql("",i),a=AS(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(a),{state:s,tree:a}}async match(e){let t=new wo([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),se,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,se,t),rootSnapshot:t}}catch(r){if(r instanceof OE)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Eo?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,s){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,s);let a=await this.processSegment(e,t,r,r.segments,i,!0,s);return a instanceof yn?[a]:[]}async processChildren(e,t,r,i){let s=[];for(let l of Object.keys(r.children))l==="primary"?s.unshift(l):s.push(l);let a=[];for(let l of s){let h=r.children[l],p=_2(t,l),_=await this.processSegmentGroup(e,p,h,l,i);a.push(..._)}let c=GS(a);return aU(c),c}async processSegment(e,t,r,i,s,a,c){for(let l of t)try{return await this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,s,a,c)}catch(h){if(h instanceof Eo||US(h))continue;throw h}if(nU(r,i,s))return new rU;throw new Eo(r)}async processSegmentAgainstRoute(e,t,r,i,s,a,c,l){if(fr(r)!==a&&(a===se||!Sp(i,s,r)))throw new Eo(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,s,a,l);if(this.allowRedirects&&c)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,a,l);throw new Eo(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,a,c){let{matched:l,parameters:h,consumedSegments:p,positionalParamSegments:_,remainingSegments:w}=zS(t,i,s);if(!l)throw new Eo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>sU&&(this.allowRedirects=!1));let C=new wo(s,h,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,fS(i),fr(i),i.component??i._loadedComponent??null,i,pS(i)),A=Tp(C,c,this.paramsInheritanceStrategy);if(C.params=Object.freeze(A.params),C.data=Object.freeze(A.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let N=await this.applyRedirects.applyRedirectCommands(p,i.redirectTo,_,C,e),R=await this.applyRedirects.lineralizeSegments(i,N);return this.processSegment(e,r,t,R.concat(w),a,!1,c)}async matchSegmentAgainstRoute(e,t,r,i,s,a){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let c=await cp(Y2(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!c?.matched)throw new Eo(t);e=r._injector??e;let{routes:l}=await this.getChildConfig(e,r,i),h=r._loadedInjector??e,{parameters:p,consumedSegments:_,remainingSegments:w}=c,C=new wo(_,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,fS(r),fr(r),r.component??r._loadedComponent??null,r,pS(r)),A=Tp(C,a,this.paramsInheritanceStrategy);C.params=Object.freeze(A.params),C.data=Object.freeze(A.data);let{segmentGroup:N,slicedSegments:R}=hS(t,_,w,l);if(R.length===0&&N.hasChildren()){let j=await this.processChildren(h,l,N,C);return new yn(C,j)}if(l.length===0&&R.length===0)return new yn(C,[]);let O=fr(r)===s,B=await this.processSegment(h,l,N,R,O?se:s,!0,C);return new yn(C,B instanceof yn?[B]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await cp(H2(e,t,r,this.urlSerializer,this.abortSignal))){let s=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=s.routes,t._loadedInjector=s.injector,s}throw W2(t)}return{routes:[],injector:e}}};function aU(n){n.sort((e,t)=>e.value.outlet===se?-1:t.value.outlet===se?1:e.value.outlet.localeCompare(t.value.outlet))}function cU(n){let e=n.value.routeConfig;return e&&e.path===""}function GS(n){let e=[],t=new Set;for(let r of n){if(!cU(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=GS(r.children);e.push(new yn(r.value,i))}return e.filter(r=>!t.has(r))}function fS(n){return n.data||{}}function pS(n){return n.resolve||{}}var uU=new z("",{factory:()=>iU});function lU(n,e,t,r,i,s,a){let c=n.get(uU);return kt(l=>de(l).pipe(Dr(h=>c(n,e,t,r,h.extractedUrl,i,s,a)),Be(({state:h,tree:p})=>fe(V({},l),{targetSnapshot:h,urlAfterRedirects:p}))))}function dU(n,e){return kt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return de(t);let s=new Set(i.map(l=>l.route)),a=new Set;for(let l of s)if(!a.has(l))for(let h of WS(l))a.add(h);let c=0;return Ze(a).pipe(Xu(l=>s.has(l)?hU(l,r,n,e):(l.data=Tp(l,l.parent,n).resolve,de(void 0))),Gt(()=>c++),Fh(1),kt(l=>c===a.size?de(t):Zt))})}function WS(n){let e=n.children.map(t=>WS(t)).flat();return[n,...e]}function hU(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!kS(i)&&(s[Jl]=i.title),Ju(()=>(n.data=Tp(n,n.parent,t).resolve,fU(s,n,e,r).pipe(Be(a=>(n._resolvedData=a,n.data=V(V({},n.data),a),null)))))}function fU(n,e,t,r){let i=CE(n);if(i.length===0)return de({});let s={};return Ze(i).pipe(kt(a=>pU(n[a],e,t,r).pipe(yi(),Gt(c=>{if(c instanceof Ha)throw bp(new as,c);s[a]=c}))),Fh(1),Be(()=>s),fa(a=>US(a)?Zt:My(a)))}function pU(n,e,t,r){let i=Ga(e)??r,s=Ka(n,i),a=s.resolve?s.resolve(e,t):pt(i,()=>s(e,t));return Do(a)}function bE(n){return Dr(e=>{let t=n(e);return t?Ze(t).pipe(Be(()=>e)):de(e)})}var jE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===se);return r}getResolvedTitleForRoute(t){return t.data[Jl]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>x(KS),providedIn:"root"})}return n})(),KS=(()=>{class n extends jE{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(te(oS))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Qa=new z("",{factory:()=>({})}),td=new z(""),QS=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=x(tE);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await _S(pt(t,()=>r.loadComponent())),a=await XS(JS(s));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=a,a}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let s=await YS(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=s.routes,r._loadedInjector=s.injector,s}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function YS(n,e,t,r){let i=await _S(pt(t,()=>n.loadChildren())),s=await XS(JS(i)),a;s instanceof Uf||Array.isArray(s)?a=s:a=await e.compileModuleAsync(s),r&&r(n);let c,l,h=!1;return Array.isArray(a)?(l=a,h=!0):(c=a.create(t).injector,l=c.get(td,[],{optional:!0,self:!0}).flat()),{routes:l.map(UE),injector:c}}function gU(n){return n&&typeof n=="object"&&"default"in n}function JS(n){return gU(n)?n.default:n}async function XS(n){return n}var Rp=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>x(mU),providedIn:"root"})}return n})(),mU=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ZS=new z("");var yU=()=>{},eR=new z(""),tR=(()=>{class n{currentNavigation=Ct(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Ct(null);events=new nt;transitionAbortWithErrorSubject=new nt;configLoader=x(QS);environmentInjector=x(ft);destroyRef=x(ur);urlSerializer=x(Xl);rootContexts=x(Wa);location=x(La);inputBindingEnabled=x(Ap,{optional:!0})!==null;titleStrategy=x(jE);options=x(Qa,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=x(Rp);createViewTransition=x(ZS,{optional:!0});navigationErrorHandler=x(eR,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>de(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new gp(i)),r=i=>this.events.next(new mp(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;gt(()=>{this.transitions?.next(fe(V({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new rt(null),this.transitions.pipe(sr(r=>r!==null),Dr(r=>{let i=!1,s=new AbortController;return de(r).pipe(Dr(a=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Jt.SupersededByNewNavigation),Zt;this.currentTransition=r;let c=this.lastSuccessfulNavigation();this.currentNavigation.set({id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:c?fe(V({},c),{previousNavigation:null}):null,abort:()=>s.abort()});let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=a.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload")return this.events.next(new Si(a.id,this.urlSerializer.serialize(a.rawUrl),"",zl.IgnoredSameUrlNavigation)),a.resolve(!1),Zt;if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return de(a).pipe(Dr(p=>(this.events.next(new bo(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),p.id!==this.navigationId?Zt:Promise.resolve(p))),lU(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,s.signal),Gt(p=>{r.targetSnapshot=p.targetSnapshot,r.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation.update(w=>(w.finalUrl=p.urlAfterRedirects,w));let _=new Gl(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(_)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:p,extractedUrl:_,source:w,restoredState:C,extras:A}=a,N=new bo(p,this.urlSerializer.serialize(_),w,C);this.events.next(N);let R=MS(this.rootComponentType).snapshot;return this.currentTransition=r=fe(V({},a),{targetSnapshot:R,urlAfterRedirects:_,extras:fe(V({},A),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(O=>(O.finalUrl=_,O)),de(r)}else return this.events.next(new Si(a.id,this.urlSerializer.serialize(a.extractedUrl),"",zl.IgnoredByUrlHandlingStrategy)),a.resolve(!1),Zt}),Gt(a=>{let c=new dp(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Be(a=>(this.currentTransition=r=fe(V({},a),{guards:D2(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),r)),F2(this.environmentInjector,a=>this.events.next(a)),Gt(a=>{if(r.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw bp(this.urlSerializer,a.guardsResult);let c=new hp(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.events.next(c)}),sr(a=>a.guardsResult?!0:(this.cancelNavigationTransition(a,"",Jt.GuardRejected),!1)),bE(a=>{if(a.guards.canActivateChecks.length!==0)return de(a).pipe(Gt(c=>{let l=new fp(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Dr(c=>{let l=!1;return de(c).pipe(dU(this.paramsInheritanceStrategy,this.environmentInjector),Gt({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(c,"",Jt.NoDataFromResolver)}}))}),Gt(c=>{let l=new pp(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}))}),bE(a=>{let c=h=>{let p=[];if(h.routeConfig?._loadedComponent)h.component=h.routeConfig?._loadedComponent;else if(h.routeConfig?.loadComponent){let _=Ga(h)??this.environmentInjector;p.push(this.configLoader.loadComponent(_,h.routeConfig).then(w=>{h.component=w}))}for(let _ of h.children)p.push(...c(_));return p},l=c(a.targetSnapshot.root);return l.length===0?de(a):Ze(Promise.all(l).then(()=>a))}),bE(()=>this.afterPreactivation()),Dr(()=>{let{currentSnapshot:a,targetSnapshot:c}=r,l=this.createViewTransition?.(this.environmentInjector,a.root,c.root);return l?Ze(l).pipe(Be(()=>r)):de(r)}),Be(a=>{let c=E2(t.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return this.currentTransition=r=fe(V({},a),{targetRouterState:c}),this.currentNavigation.update(l=>(l.targetRouterState=c,l)),r}),Gt(()=>{this.events.next(new Wl)}),b2(this.rootContexts,t.routeReuseStrategy,a=>this.events.next(a),this.inputBindingEnabled),mi(1),Zu(jS(s.signal).pipe(sr(()=>!i&&!r.targetRouterState),Gt(()=>{this.cancelNavigationTransition(r,s.signal.reason+"",Jt.Aborted)}))),Gt({next:a=>{i=!0,this.currentNavigation.update(c=>(c.abort=yU,c)),this.lastSuccessfulNavigation.set(gt(this.currentNavigation)),this.events.next(new gr(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)},complete:()=>{i=!0}}),Zu(this.transitionAbortWithErrorSubject.pipe(Gt(a=>{throw a}))),Fy(()=>{s.abort(),i||this.cancelNavigationTransition(r,"",Jt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),fa(a=>{if(this.destroyed)return r.resolve(!1),Zt;if(i=!0,LS(a))this.events.next(new Lr(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode)),T2(a)?this.events.next(new qa(a.url,a.navigationBehaviorOptions)):r.resolve(!1);else{let c=new $a(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);try{let l=pt(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(l instanceof Ha){let{message:h,cancellationCode:p}=bp(this.urlSerializer,l);this.events.next(new Lr(r.id,this.urlSerializer.serialize(r.extractedUrl),h,p)),this.events.next(new qa(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(c),a}catch(l){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(l)}}return Zt}))}))}cancelNavigationTransition(t,r,i){let s=new Lr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=gt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _U(n){return n!==$l}var nR=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>x(vU),providedIn:"root"})}return n})(),Cp=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},vU=(()=>{class n extends Cp{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Nn(n)))(i||n)}})();static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),BE=(()=>{class n{urlSerializer=x(Xl);options=x(Qa,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=x(La);urlHandlingStrategy=x(Rp);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new pr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,a=i??s;return a instanceof pr?this.urlSerializer.serialize(a):a}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=MS(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>x(rR),providedIn:"root"})}return n})(),rR=(()=>{class n extends BE{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof bo?this.updateStateMemento():t instanceof Si?this.commitTransition(r):t instanceof Gl?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Wl?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Lr&&t.code!==Jt.SupersededByNewNavigation&&t.code!==Jt.Redirect?this.restoreHistory(r):t instanceof $a?this.restoreHistory(r,!0):t instanceof gr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:a}=r;if(this.location.isCurrentPathEqualTo(t)||s){let c=this.browserPageId,l=V(V({},a),this.generateNgRouterState(i,c));this.location.replaceState(t,"",l)}else{let c=V(V({},a),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",c)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Nn(n)))(i||n)}})();static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $E(n,e){n.events.pipe(sr(t=>t instanceof gr||t instanceof Lr||t instanceof $a||t instanceof Si),Be(t=>t instanceof gr||t instanceof Si?0:(t instanceof Lr?t.code===Jt.Redirect||t.code===Jt.SupersededByNewNavigation:!1)?2:1),sr(t=>t!==2),mi(1)).subscribe(()=>{e()})}var EU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},IU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ya=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=x(Gv);stateManager=x(BE);options=x(Qa,{optional:!0})||{};pendingTasks=x(Ii);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=x(tR);urlSerializer=x(Xl);location=x(La);urlHandlingStrategy=x(Rp);injector=x(ft);_events=new nt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=x(nR);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=x(td,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!x(Ap,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ht;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=gt(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Lr&&r.code!==Jt.Redirect&&r.code!==Jt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof gr)this.navigated=!0;else if(r instanceof qa){let a=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||_U(i.source)},a);this.scheduleNavigation(c,$l,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}m2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),$l,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let l=V({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,a,s).catch(l=>{this.disposed||this.injector.get(Rn)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return gt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(UE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=r,h=l?this.currentUrlTree.fragment:a,p=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":p=V(V({},this.currentUrlTree.queryParams),s);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}p!==null&&(p=this.removeEmptyProps(p));let _;try{let w=i?i.snapshot:this.routerState.snapshot.root;_=SS(w)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),_=this.currentUrlTree.root}return RS(_,t,p,h??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=cs(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,$l,null,r)}navigate(t,r={skipLocationChange:!1}){return wU(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(ma(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},EU):r===!1?i=V({},IU):i=r,cs(t))return aS(this.currentUrlTree,t,i);let s=this.parseUrl(t);return aS(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,h;a?(c=a.resolve,l=a.reject,h=a.promise):h=new Promise((_,w)=>{c=_,l=w});let p=this.pendingTasks.add();return $E(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(_=>Promise.reject(_))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wU(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new H(4008,!1)}var Ja=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ct(null);get href(){return gt(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new nt;applicationErrorHandler=x(Rn);options=x(Qa,{optional:!0});constructor(t,r,i,s,a,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=a,this.locationStrategy=c,this.reactiveHref.set(x(new Gf("href"),{optional:!0}));let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area"||!!(typeof customElements=="object"&&customElements.get(l)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof gr&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(cs(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(t!==0||r||i||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l)?.catch(h=>{this.applicationErrorHandler(h)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:cs(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(Q(Ya),Q(Ri),Dl("tabindex"),Q(Or),Q(tn),Q(Va))};static \u0275dir=Ke({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Oe("click",function(a){return i.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&_o("href",i.reactiveHref(),Sv)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Fa],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Fa],replaceUrl:[2,"replaceUrl","replaceUrl",Fa],routerLink:"routerLink"},features:[kr]})}return n})(),qE=(()=>{class n{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new st;link=x(Ja,{optional:!0});constructor(t,r,i,s){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof gr&&this.update()})}ngAfterContentInit(){de(this.links.changes,de(null)).pipe(da()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Ze(t).pipe(da()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=bU(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let s=i.urlTree;return s?t.isActive(s,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(Q(Ya),Q(tn),Q(Or),Q(rs))};static \u0275dir=Ke({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(r&1&&Jv(s,Ja,5),r&2){let a;Xv(a=Zv())&&(i.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[kr]})}return n})();function bU(n){return!!n.paths}var DU=new z("");function HE(n,...e){return Ei([{provide:td,multi:!0,useValue:n},[],{provide:Ri,useFactory:CU},{provide:$f,multi:!0,useFactory:AU},e.map(t=>t.\u0275providers)])}function CU(){return x(Ya).routerState.root}function AU(){let n=x(_t);return e=>{let t=n.get(Di);if(e!==t.components[0])return;let r=n.get(Ya),i=n.get(SU);n.get(RU)===1&&r.initialNavigation(),n.get(NU,null,{optional:!0})?.setUpPreloading(),n.get(DU,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var SU=new z("",{factory:()=>new nt}),RU=new z("",{factory:()=>1});var NU=new z("");var Ur=class n{cartItems=new rt([]);cartCount=new rt(0);cartItems$=this.cartItems.asObservable();cartCount$=this.cartCount.asObservable();addToCart(e,t=1){let r=this.cartItems.value,i=r.find(s=>s.menuItem.id===e.id);if(i){if(i.quantity+=t,i.quantity<=0){this.removeFromCart(e.id);return}i.totalPrice=i.quantity*i.menuItem.price}else if(t>0){r.push({menuItem:e,quantity:t,totalPrice:e.price*t});let s=r.reduce((a,c)=>a+(c.quantity||0),0);this.cartCount.next(s)}this.cartItems.next([...r])}removeFromCart(e){let t=this.cartItems.value.filter(r=>r.menuItem.id!==e);this.cartItems.next([...t])}clearCart(){this.cartItems.next([])}getTotalAmount(){return this.cartItems.value.reduce((e,t)=>e+t.totalPrice,0)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};var sR=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},PU=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],a=n[t++],c=n[t++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},oR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],a=i+1<n.length,c=a?n[i+1]:0,l=i+2<n.length,h=l?n[i+2]:0,p=s>>2,_=(s&3)<<4|c>>4,w=(c&15)<<2|h>>6,C=h&63;l||(C=64,a||(w=64)),r.push(t[p],t[_],t[w],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(sR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):PU(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let h=i<n.length?t[n.charAt(i)]:64;++i;let _=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||h==null||_==null)throw new zE;let w=s<<2|c>>4;if(r.push(w),h!==64){let C=c<<4&240|h>>2;if(r.push(C),_!==64){let A=h<<6&192|_;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},zE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},MU=function(n){let e=sR(n);return oR.encodeByteArray(e,!0)},nd=function(n){return MU(n).replace(/\./g,"")},xU=function(n){try{return oR.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function kU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var OU=()=>kU().__FIREBASE_DEFAULTS__,FU=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},VU=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&xU(n[1]);return e&&JSON.parse(e)},GE=()=>{try{return OU()||FU()||VU()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},LU=n=>{var e,t;return(t=(e=GE())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Mp=n=>{let e=LU(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},WE=()=>{var n;return(n=GE())===null||n===void 0?void 0:n.config};var Pp=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function xp(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[nd(JSON.stringify(t)),nd(JSON.stringify(a)),""].join(".")}function aR(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UU(){var n;let e=(n=GE())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cR(){return!UU()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function KE(){try{return typeof indexedDB=="object"}catch{return!1}}function uR(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var jU="FirebaseError",mr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=jU,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rd.prototype.create)}},rd=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?BU(s,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new mr(i,c,r)}};function BU(n,e){return n.replace($U,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var $U=/\{\$([^}]+)}/g;function id(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],a=e[i];if(iR(s)&&iR(a)){if(!id(s,a))return!1}else if(s!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function iR(n){return n!==null&&typeof n=="object"}var Jie=14400*1e3;function nn(n){return n&&n._delegate?n._delegate:n}var yr=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Co="[DEFAULT]";var QE=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Pp;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HU(e))try{this.getOrInitializeService({instanceIdentifier:Co})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Co){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Co){return this.instances.has(e)}getOptions(e=Co){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,a]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qU(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Co){return this.component?this.component.multipleInstances?e:Co:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function qU(n){return n===Co?void 0:n}function HU(n){return n.instantiationMode==="EAGER"}var kp=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new QE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var zU=[],be=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(be||{}),GU={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},WU=be.INFO,KU={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},QU=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=KU[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Xa=class{constructor(e){this.name=e,this._logLevel=WU,this._logHandler=QU,this._userLogHandler=null,zU.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}};var YU=(n,e)=>e.some(t=>n instanceof t),lR,dR;function JU(){return lR||(lR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XU(){return dR||(dR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var hR=new WeakMap,JE=new WeakMap,fR=new WeakMap,YE=new WeakMap,ZE=new WeakMap;function ZU(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(jr(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&hR.set(t,n)}).catch(()=>{}),ZE.set(e,n),e}function ej(n){if(JE.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});JE.set(n,e)}var XE={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return JE.get(n);if(e==="objectStoreNames")return n.objectStoreNames||fR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return jr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function pR(n){XE=n(XE)}function tj(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Op(this),e,...t);return fR.set(r,e.sort?e.sort():[e]),jr(r)}:XU().includes(n)?function(...e){return n.apply(Op(this),e),jr(hR.get(this))}:function(...e){return jr(n.apply(Op(this),e))}}function nj(n){return typeof n=="function"?tj(n):(n instanceof IDBTransaction&&ej(n),YU(n,JU())?new Proxy(n,XE):n)}function jr(n){if(n instanceof IDBRequest)return ZU(n);if(YE.has(n))return YE.get(n);let e=nj(n);return e!==n&&(YE.set(n,e),ZE.set(e,n)),e}var Op=n=>ZE.get(n);function Fp(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let a=indexedDB.open(n,e),c=jr(a);return r&&a.addEventListener("upgradeneeded",l=>{r(jr(a.result),l.oldVersion,l.newVersion,jr(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}var rj=["get","getKey","getAll","getAllKeys","count"],ij=["put","add","delete","clear"],eI=new Map;function gR(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(eI.get(e))return eI.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=ij.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||rj.includes(t)))return;let s=async function(a,...c){let l=this.transaction(a,i?"readwrite":"readonly"),h=l.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[t](...c),i&&l.done]))[0]};return eI.set(e,s),s}pR(n=>fe(V({},n),{get:(e,t,r)=>gR(e,t)||n.get(e,t,r),has:(e,t)=>!!gR(e,t)||n.has(e,t)}));var nI=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(sj(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function sj(n){let e=n.getComponent();return e?.type==="VERSION"}var rI="@firebase/app",mR="0.10.13";var Ni=new Xa("@firebase/app"),oj="@firebase/app-compat",aj="@firebase/analytics-compat",cj="@firebase/analytics",uj="@firebase/app-check-compat",lj="@firebase/app-check",dj="@firebase/auth",hj="@firebase/auth-compat",fj="@firebase/database",pj="@firebase/data-connect",gj="@firebase/database-compat",mj="@firebase/functions",yj="@firebase/functions-compat",_j="@firebase/installations",vj="@firebase/installations-compat",Ej="@firebase/messaging",Ij="@firebase/messaging-compat",wj="@firebase/performance",Tj="@firebase/performance-compat",bj="@firebase/remote-config",Dj="@firebase/remote-config-compat",Cj="@firebase/storage",Aj="@firebase/storage-compat",Sj="@firebase/firestore",Rj="@firebase/vertexai-preview",Nj="@firebase/firestore-compat",Pj="firebase",Mj="10.14.1";var iI="[DEFAULT]",xj={[rI]:"fire-core",[oj]:"fire-core-compat",[cj]:"fire-analytics",[aj]:"fire-analytics-compat",[lj]:"fire-app-check",[uj]:"fire-app-check-compat",[dj]:"fire-auth",[hj]:"fire-auth-compat",[fj]:"fire-rtdb",[pj]:"fire-data-connect",[gj]:"fire-rtdb-compat",[mj]:"fire-fn",[yj]:"fire-fn-compat",[_j]:"fire-iid",[vj]:"fire-iid-compat",[Ej]:"fire-fcm",[Ij]:"fire-fcm-compat",[wj]:"fire-perf",[Tj]:"fire-perf-compat",[bj]:"fire-rc",[Dj]:"fire-rc-compat",[Cj]:"fire-gcs",[Aj]:"fire-gcs-compat",[Sj]:"fire-fst",[Nj]:"fire-fst-compat",[Rj]:"fire-vertex","fire-js":"fire-js",[Pj]:"fire-js-all"};var Vp=new Map,kj=new Map,sI=new Map;function yR(n,e){try{n.container.addComponent(e)}catch(t){Ni.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ao(n){let e=n.name;if(sI.has(e))return Ni.debug(`There were multiple attempts to register component ${e}.`),!1;sI.set(e,n);for(let t of Vp.values())yR(t,n);for(let t of kj.values())yR(t,n);return!0}function Lp(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}var Oj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},us=new rd("app","Firebase",Oj);var oI=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw us.create("app-deleted",{appName:this._name})}};var Up=Mj;function uI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:iI,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw us.create("bad-app-name",{appName:String(i)});if(t||(t=WE()),!t)throw us.create("no-options");let s=Vp.get(i);if(s){if(id(t,s.options)&&id(r,s.config))return s;throw us.create("duplicate-app",{appName:i})}let a=new kp(i);for(let l of sI.values())a.addComponent(l);let c=new oI(t,r,a);return Vp.set(i,c),c}function jp(n=iI){let e=Vp.get(n);if(!e&&n===iI&&WE())return uI();if(!e)throw us.create("no-app",{appName:n});return e}function _r(n,e,t){var r;let i=(r=xj[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ni.warn(c.join(" "));return}Ao(new yr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Fj="firebase-heartbeat-database",Vj=1,sd="firebase-heartbeat-store",tI=null;function IR(){return tI||(tI=Fp(Fj,Vj,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(sd)}catch(t){console.warn(t)}}}}).catch(n=>{throw us.create("idb-open",{originalErrorMessage:n.message})})),tI}async function Lj(n){try{let t=(await IR()).transaction(sd),r=await t.objectStore(sd).get(wR(n));return await t.done,r}catch(e){if(e instanceof mr)Ni.warn(e.message);else{let t=us.create("idb-get",{originalErrorMessage:e?.message});Ni.warn(t.message)}}}async function _R(n,e){try{let r=(await IR()).transaction(sd,"readwrite");await r.objectStore(sd).put(e,wR(n)),await r.done}catch(t){if(t instanceof mr)Ni.warn(t.message);else{let r=us.create("idb-set",{originalErrorMessage:t?.message});Ni.warn(r.message)}}}function wR(n){return`${n.name}!${n.options.appId}`}var Uj=1024,jj=720*60*60*1e3,aI=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new cI(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=vR();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let c=new Date(a.date).valueOf();return Date.now()-c<=jj}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ni.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=vR(),{heartbeatsToSend:r,unsentEntries:i}=Bj(this._heartbeatsCache.heartbeats),s=nd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Ni.warn(t),""}}};function vR(){return new Date().toISOString().substring(0,10)}function Bj(n,e=Uj){let t=[],r=n.slice();for(let i of n){let s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),ER(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),ER(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var cI=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return KE()?uR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await Lj(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return _R(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return _R(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function ER(n){return nd(JSON.stringify({version:2,heartbeats:n})).length}function $j(n){Ao(new yr("platform-logger",e=>new nI(e),"PRIVATE")),Ao(new yr("heartbeat",e=>new aI(e),"PRIVATE")),_r(rI,mR,n),_r(rI,mR,"esm2017"),_r("fire-js","")}$j("");var qj="firebase",Hj="10.14.1";_r(qj,Hj,"app");var TR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bR={};var ls,lI;(function(){var n;function e(I,g){function y(){}y.prototype=g.prototype,I.D=g.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(v,E,b){for(var m=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)m[ut-2]=arguments[ut];return g.prototype[E].apply(v,m)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,g,y){y||(y=0);var v=Array(16);if(typeof g=="string")for(var E=0;16>E;++E)v[E]=g.charCodeAt(y++)|g.charCodeAt(y++)<<8|g.charCodeAt(y++)<<16|g.charCodeAt(y++)<<24;else for(E=0;16>E;++E)v[E]=g[y++]|g[y++]<<8|g[y++]<<16|g[y++]<<24;g=I.g[0],y=I.g[1],E=I.g[2];var b=I.g[3],m=g+(b^y&(E^b))+v[0]+3614090360&4294967295;g=y+(m<<7&4294967295|m>>>25),m=b+(E^g&(y^E))+v[1]+3905402710&4294967295,b=g+(m<<12&4294967295|m>>>20),m=E+(y^b&(g^y))+v[2]+606105819&4294967295,E=b+(m<<17&4294967295|m>>>15),m=y+(g^E&(b^g))+v[3]+3250441966&4294967295,y=E+(m<<22&4294967295|m>>>10),m=g+(b^y&(E^b))+v[4]+4118548399&4294967295,g=y+(m<<7&4294967295|m>>>25),m=b+(E^g&(y^E))+v[5]+1200080426&4294967295,b=g+(m<<12&4294967295|m>>>20),m=E+(y^b&(g^y))+v[6]+2821735955&4294967295,E=b+(m<<17&4294967295|m>>>15),m=y+(g^E&(b^g))+v[7]+4249261313&4294967295,y=E+(m<<22&4294967295|m>>>10),m=g+(b^y&(E^b))+v[8]+1770035416&4294967295,g=y+(m<<7&4294967295|m>>>25),m=b+(E^g&(y^E))+v[9]+2336552879&4294967295,b=g+(m<<12&4294967295|m>>>20),m=E+(y^b&(g^y))+v[10]+4294925233&4294967295,E=b+(m<<17&4294967295|m>>>15),m=y+(g^E&(b^g))+v[11]+2304563134&4294967295,y=E+(m<<22&4294967295|m>>>10),m=g+(b^y&(E^b))+v[12]+1804603682&4294967295,g=y+(m<<7&4294967295|m>>>25),m=b+(E^g&(y^E))+v[13]+4254626195&4294967295,b=g+(m<<12&4294967295|m>>>20),m=E+(y^b&(g^y))+v[14]+2792965006&4294967295,E=b+(m<<17&4294967295|m>>>15),m=y+(g^E&(b^g))+v[15]+1236535329&4294967295,y=E+(m<<22&4294967295|m>>>10),m=g+(E^b&(y^E))+v[1]+4129170786&4294967295,g=y+(m<<5&4294967295|m>>>27),m=b+(y^E&(g^y))+v[6]+3225465664&4294967295,b=g+(m<<9&4294967295|m>>>23),m=E+(g^y&(b^g))+v[11]+643717713&4294967295,E=b+(m<<14&4294967295|m>>>18),m=y+(b^g&(E^b))+v[0]+3921069994&4294967295,y=E+(m<<20&4294967295|m>>>12),m=g+(E^b&(y^E))+v[5]+3593408605&4294967295,g=y+(m<<5&4294967295|m>>>27),m=b+(y^E&(g^y))+v[10]+38016083&4294967295,b=g+(m<<9&4294967295|m>>>23),m=E+(g^y&(b^g))+v[15]+3634488961&4294967295,E=b+(m<<14&4294967295|m>>>18),m=y+(b^g&(E^b))+v[4]+3889429448&4294967295,y=E+(m<<20&4294967295|m>>>12),m=g+(E^b&(y^E))+v[9]+568446438&4294967295,g=y+(m<<5&4294967295|m>>>27),m=b+(y^E&(g^y))+v[14]+3275163606&4294967295,b=g+(m<<9&4294967295|m>>>23),m=E+(g^y&(b^g))+v[3]+4107603335&4294967295,E=b+(m<<14&4294967295|m>>>18),m=y+(b^g&(E^b))+v[8]+1163531501&4294967295,y=E+(m<<20&4294967295|m>>>12),m=g+(E^b&(y^E))+v[13]+2850285829&4294967295,g=y+(m<<5&4294967295|m>>>27),m=b+(y^E&(g^y))+v[2]+4243563512&4294967295,b=g+(m<<9&4294967295|m>>>23),m=E+(g^y&(b^g))+v[7]+1735328473&4294967295,E=b+(m<<14&4294967295|m>>>18),m=y+(b^g&(E^b))+v[12]+2368359562&4294967295,y=E+(m<<20&4294967295|m>>>12),m=g+(y^E^b)+v[5]+4294588738&4294967295,g=y+(m<<4&4294967295|m>>>28),m=b+(g^y^E)+v[8]+2272392833&4294967295,b=g+(m<<11&4294967295|m>>>21),m=E+(b^g^y)+v[11]+1839030562&4294967295,E=b+(m<<16&4294967295|m>>>16),m=y+(E^b^g)+v[14]+4259657740&4294967295,y=E+(m<<23&4294967295|m>>>9),m=g+(y^E^b)+v[1]+2763975236&4294967295,g=y+(m<<4&4294967295|m>>>28),m=b+(g^y^E)+v[4]+1272893353&4294967295,b=g+(m<<11&4294967295|m>>>21),m=E+(b^g^y)+v[7]+4139469664&4294967295,E=b+(m<<16&4294967295|m>>>16),m=y+(E^b^g)+v[10]+3200236656&4294967295,y=E+(m<<23&4294967295|m>>>9),m=g+(y^E^b)+v[13]+681279174&4294967295,g=y+(m<<4&4294967295|m>>>28),m=b+(g^y^E)+v[0]+3936430074&4294967295,b=g+(m<<11&4294967295|m>>>21),m=E+(b^g^y)+v[3]+3572445317&4294967295,E=b+(m<<16&4294967295|m>>>16),m=y+(E^b^g)+v[6]+76029189&4294967295,y=E+(m<<23&4294967295|m>>>9),m=g+(y^E^b)+v[9]+3654602809&4294967295,g=y+(m<<4&4294967295|m>>>28),m=b+(g^y^E)+v[12]+3873151461&4294967295,b=g+(m<<11&4294967295|m>>>21),m=E+(b^g^y)+v[15]+530742520&4294967295,E=b+(m<<16&4294967295|m>>>16),m=y+(E^b^g)+v[2]+3299628645&4294967295,y=E+(m<<23&4294967295|m>>>9),m=g+(E^(y|~b))+v[0]+4096336452&4294967295,g=y+(m<<6&4294967295|m>>>26),m=b+(y^(g|~E))+v[7]+1126891415&4294967295,b=g+(m<<10&4294967295|m>>>22),m=E+(g^(b|~y))+v[14]+2878612391&4294967295,E=b+(m<<15&4294967295|m>>>17),m=y+(b^(E|~g))+v[5]+4237533241&4294967295,y=E+(m<<21&4294967295|m>>>11),m=g+(E^(y|~b))+v[12]+1700485571&4294967295,g=y+(m<<6&4294967295|m>>>26),m=b+(y^(g|~E))+v[3]+2399980690&4294967295,b=g+(m<<10&4294967295|m>>>22),m=E+(g^(b|~y))+v[10]+4293915773&4294967295,E=b+(m<<15&4294967295|m>>>17),m=y+(b^(E|~g))+v[1]+2240044497&4294967295,y=E+(m<<21&4294967295|m>>>11),m=g+(E^(y|~b))+v[8]+1873313359&4294967295,g=y+(m<<6&4294967295|m>>>26),m=b+(y^(g|~E))+v[15]+4264355552&4294967295,b=g+(m<<10&4294967295|m>>>22),m=E+(g^(b|~y))+v[6]+2734768916&4294967295,E=b+(m<<15&4294967295|m>>>17),m=y+(b^(E|~g))+v[13]+1309151649&4294967295,y=E+(m<<21&4294967295|m>>>11),m=g+(E^(y|~b))+v[4]+4149444226&4294967295,g=y+(m<<6&4294967295|m>>>26),m=b+(y^(g|~E))+v[11]+3174756917&4294967295,b=g+(m<<10&4294967295|m>>>22),m=E+(g^(b|~y))+v[2]+718787259&4294967295,E=b+(m<<15&4294967295|m>>>17),m=y+(b^(E|~g))+v[9]+3951481745&4294967295,I.g[0]=I.g[0]+g&4294967295,I.g[1]=I.g[1]+(E+(m<<21&4294967295|m>>>11))&4294967295,I.g[2]=I.g[2]+E&4294967295,I.g[3]=I.g[3]+b&4294967295}r.prototype.u=function(I,g){g===void 0&&(g=I.length);for(var y=g-this.blockSize,v=this.B,E=this.h,b=0;b<g;){if(E==0)for(;b<=y;)i(this,I,b),b+=this.blockSize;if(typeof I=="string"){for(;b<g;)if(v[E++]=I.charCodeAt(b++),E==this.blockSize){i(this,v),E=0;break}}else for(;b<g;)if(v[E++]=I[b++],E==this.blockSize){i(this,v),E=0;break}}this.h=E,this.o+=g},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var g=1;g<I.length-8;++g)I[g]=0;var y=8*this.o;for(g=I.length-8;g<I.length;++g)I[g]=y&255,y/=256;for(this.u(I),I=Array(16),g=y=0;4>g;++g)for(var v=0;32>v;v+=8)I[y++]=this.g[g]>>>v&255;return I};function s(I,g){var y=c;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=g(I)}function a(I,g){this.h=g;for(var y=[],v=!0,E=I.length-1;0<=E;E--){var b=I[E]|0;v&&b==g||(y[E]=b,v=!1)}this.g=y}var c={};function l(I){return-128<=I&&128>I?s(I,function(g){return new a([g|0],0>g?-1:0)}):new a([I|0],0>I?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return _;if(0>I)return R(h(-I));for(var g=[],y=1,v=0;I>=y;v++)g[v]=I/y|0,y*=4294967296;return new a(g,0)}function p(I,g){if(I.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(I.charAt(0)=="-")return R(p(I.substring(1),g));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=h(Math.pow(g,8)),v=_,E=0;E<I.length;E+=8){var b=Math.min(8,I.length-E),m=parseInt(I.substring(E,E+b),g);8>b?(b=h(Math.pow(g,b)),v=v.j(b).add(h(m))):(v=v.j(y),v=v.add(h(m)))}return v}var _=l(0),w=l(1),C=l(16777216);n=a.prototype,n.m=function(){if(N(this))return-R(this).m();for(var I=0,g=1,y=0;y<this.g.length;y++){var v=this.i(y);I+=(0<=v?v:4294967296+v)*g,g*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(A(this))return"0";if(N(this))return"-"+R(this).toString(I);for(var g=h(Math.pow(I,6)),y=this,v="";;){var E=Y(y,g).g;y=O(y,E.j(g));var b=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=E,A(y))return b+v;for(;6>b.length;)b="0"+b;v=b+v}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function A(I){if(I.h!=0)return!1;for(var g=0;g<I.g.length;g++)if(I.g[g]!=0)return!1;return!0}function N(I){return I.h==-1}n.l=function(I){return I=O(this,I),N(I)?-1:A(I)?0:1};function R(I){for(var g=I.g.length,y=[],v=0;v<g;v++)y[v]=~I.g[v];return new a(y,~I.h).add(w)}n.abs=function(){return N(this)?R(this):this},n.add=function(I){for(var g=Math.max(this.g.length,I.g.length),y=[],v=0,E=0;E<=g;E++){var b=v+(this.i(E)&65535)+(I.i(E)&65535),m=(b>>>16)+(this.i(E)>>>16)+(I.i(E)>>>16);v=m>>>16,b&=65535,m&=65535,y[E]=m<<16|b}return new a(y,y[y.length-1]&-2147483648?-1:0)};function O(I,g){return I.add(R(g))}n.j=function(I){if(A(this)||A(I))return _;if(N(this))return N(I)?R(this).j(R(I)):R(R(this).j(I));if(N(I))return R(this.j(R(I)));if(0>this.l(C)&&0>I.l(C))return h(this.m()*I.m());for(var g=this.g.length+I.g.length,y=[],v=0;v<2*g;v++)y[v]=0;for(v=0;v<this.g.length;v++)for(var E=0;E<I.g.length;E++){var b=this.i(v)>>>16,m=this.i(v)&65535,ut=I.i(E)>>>16,Ln=I.i(E)&65535;y[2*v+2*E]+=m*Ln,B(y,2*v+2*E),y[2*v+2*E+1]+=b*Ln,B(y,2*v+2*E+1),y[2*v+2*E+1]+=m*ut,B(y,2*v+2*E+1),y[2*v+2*E+2]+=b*ut,B(y,2*v+2*E+2)}for(v=0;v<g;v++)y[v]=y[2*v+1]<<16|y[2*v];for(v=g;v<2*g;v++)y[v]=0;return new a(y,0)};function B(I,g){for(;(I[g]&65535)!=I[g];)I[g+1]+=I[g]>>>16,I[g]&=65535,g++}function j(I,g){this.g=I,this.h=g}function Y(I,g){if(A(g))throw Error("division by zero");if(A(I))return new j(_,_);if(N(I))return g=Y(R(I),g),new j(R(g.g),R(g.h));if(N(g))return g=Y(I,R(g)),new j(R(g.g),g.h);if(30<I.g.length){if(N(I)||N(g))throw Error("slowDivide_ only works with positive integers.");for(var y=w,v=g;0>=v.l(I);)y=$e(y),v=$e(v);var E=ie(y,1),b=ie(v,1);for(v=ie(v,2),y=ie(y,2);!A(v);){var m=b.add(v);0>=m.l(I)&&(E=E.add(y),b=m),v=ie(v,1),y=ie(y,1)}return g=O(I,E.j(g)),new j(E,g)}for(E=_;0<=I.l(g);){for(y=Math.max(1,Math.floor(I.m()/g.m())),v=Math.ceil(Math.log(y)/Math.LN2),v=48>=v?1:Math.pow(2,v-48),b=h(y),m=b.j(g);N(m)||0<m.l(I);)y-=v,b=h(y),m=b.j(g);A(b)&&(b=w),E=E.add(b),I=O(I,m)}return new j(E,I)}n.A=function(I){return Y(this,I).h},n.and=function(I){for(var g=Math.max(this.g.length,I.g.length),y=[],v=0;v<g;v++)y[v]=this.i(v)&I.i(v);return new a(y,this.h&I.h)},n.or=function(I){for(var g=Math.max(this.g.length,I.g.length),y=[],v=0;v<g;v++)y[v]=this.i(v)|I.i(v);return new a(y,this.h|I.h)},n.xor=function(I){for(var g=Math.max(this.g.length,I.g.length),y=[],v=0;v<g;v++)y[v]=this.i(v)^I.i(v);return new a(y,this.h^I.h)};function $e(I){for(var g=I.g.length+1,y=[],v=0;v<g;v++)y[v]=I.i(v)<<1|I.i(v-1)>>>31;return new a(y,I.h)}function ie(I,g){var y=g>>5;g%=32;for(var v=I.g.length-y,E=[],b=0;b<v;b++)E[b]=0<g?I.i(b+y)>>>g|I.i(b+y+1)<<32-g:I.i(b+y);return new a(E,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,lI=bR.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=p,ls=bR.Integer=a}).apply(typeof TR<"u"?TR:typeof self<"u"?self:typeof window<"u"?window:{});var Bp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pi={};var dI,zj,Za,hI,od,$p,fI,pI,gI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,d){return o==Array.prototype||o==Object.prototype||(o[u]=d.value),o};function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bp=="object"&&Bp];for(var u=0;u<o.length;++u){var d=o[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=t(this);function i(o,u){if(u)e:{var d=r;o=o.split(".");for(var f=0;f<o.length-1;f++){var T=o[f];if(!(T in d))break e;d=d[T]}o=o[o.length-1],f=d[o],u=u(f),u!=f&&u!=null&&e(d,o,{configurable:!0,writable:!0,value:u})}}function s(o,u){o instanceof String&&(o+="");var d=0,f=!1,T={next:function(){if(!f&&d<o.length){var D=d++;return{value:u(D,o[D]),done:!1}}return f=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(o){return o||function(){return s(this,function(u,d){return d})}});var a=a||{},c=this||self;function l(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function h(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function p(o,u,d){return o.call.apply(o.bind,arguments)}function _(o,u,d){if(!o)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,f),o.apply(u,T)}}return function(){return o.apply(u,arguments)}}function w(o,u,d){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:_,w.apply(null,arguments)}function C(o,u){var d=Array.prototype.slice.call(arguments,1);return function(){var f=d.slice();return f.push.apply(f,arguments),o.apply(this,f)}}function A(o,u){function d(){}d.prototype=u.prototype,o.aa=u.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(f,T,D){for(var S=Array(arguments.length-2),W=2;W<arguments.length;W++)S[W-2]=arguments[W];return u.prototype[T].apply(f,S)}}function N(o){let u=o.length;if(0<u){let d=Array(u);for(let f=0;f<u;f++)d[f]=o[f];return d}return[]}function R(o,u){for(let d=1;d<arguments.length;d++){let f=arguments[d];if(l(f)){let T=o.length||0,D=f.length||0;o.length=T+D;for(let S=0;S<D;S++)o[T+S]=f[S]}else o.push(f)}}class O{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function B(o){return/^[\s\xa0]*$/.test(o)}function j(){var o=c.navigator;return o&&(o=o.userAgent)?o:""}function Y(o){return Y[" "](o),o}Y[" "]=function(){};var $e=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function ie(o,u,d){for(let f in o)u.call(d,o[f],f,o)}function I(o,u){for(let d in o)u.call(void 0,o[d],d,o)}function g(o){let u={};for(let d in o)u[d]=o[d];return u}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function v(o,u){let d,f;for(let T=1;T<arguments.length;T++){f=arguments[T];for(d in f)o[d]=f[d];for(let D=0;D<y.length;D++)d=y[D],Object.prototype.hasOwnProperty.call(f,d)&&(o[d]=f[d])}}function E(o){var u=1;o=o.split(":");let d=[];for(;0<u&&o.length;)d.push(o.shift()),u--;return o.length&&d.push(o.join(":")),d}function b(o){c.setTimeout(()=>{throw o},0)}function m(){var o=Is;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class ut{constructor(){this.h=this.g=null}add(u,d){let f=Ln.get();f.set(u,d),this.h?this.h.next=f:this.g=f,this.h=f}}var Ln=new O(()=>new Am,o=>o.reset());class Am{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let Un,jn=!1,Is=new ut,qc=()=>{let o=c.Promise.resolve(void 0);Un=()=>{o.then(Sm)}};var Sm=()=>{for(var o;o=m();){try{o.h.call(o.g)}catch(d){b(d)}var u=Ln;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}jn=!1};function It(){this.s=this.s,this.C=this.C}It.prototype.s=!1,It.prototype.ma=function(){this.s||(this.s=!0,this.N())},It.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var Rm=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{let d=()=>{};c.addEventListener("test",d,u),c.removeEventListener("test",d,u)}catch{}return o})();function Bn(o,u){if(Ee.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,f=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if($e){e:{try{Y(u.nodeName);var T=!0;break e}catch{}T=!1}T||(u=null)}}else d=="mouseover"?u=o.fromElement:d=="mouseout"&&(u=o.toElement);this.relatedTarget=u,f?(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Nm[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Bn.aa.h.call(this)}}A(Bn,Ee);var Nm={2:"touch",3:"pen",4:"mouse"};Bn.prototype.h=function(){Bn.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var $n="closure_listenable_"+(1e6*Math.random()|0),Pm=0;function Mm(o,u,d,f,T){this.listener=o,this.proxy=null,this.src=u,this.type=d,this.capture=!!f,this.ha=T,this.key=++Pm,this.da=this.fa=!1}function Zr(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function ei(o){this.src=o,this.g={},this.h=0}ei.prototype.add=function(o,u,d,f,T){var D=o.toString();o=this.g[D],o||(o=this.g[D]=[],this.h++);var S=Ts(o,u,f,T);return-1<S?(u=o[S],d||(u.fa=!1)):(u=new Mm(u,this.src,D,!!f,T),u.fa=d,o.push(u)),u};function ws(o,u){var d=u.type;if(d in o.g){var f=o.g[d],T=Array.prototype.indexOf.call(f,u,void 0),D;(D=0<=T)&&Array.prototype.splice.call(f,T,1),D&&(Zr(u),o.g[d].length==0&&(delete o.g[d],o.h--))}}function Ts(o,u,d,f){for(var T=0;T<o.length;++T){var D=o[T];if(!D.da&&D.listener==u&&D.capture==!!d&&D.ha==f)return T}return-1}var bs="closure_lm_"+(1e6*Math.random()|0),Ds={};function Hc(o,u,d,f,T){if(f&&f.once)return Gc(o,u,d,f,T);if(Array.isArray(u)){for(var D=0;D<u.length;D++)Hc(o,u[D],d,f,T);return null}return d=Rs(d),o&&o[$n]?o.K(u,d,h(f)?!!f.capture:!!f,T):zc(o,u,d,!1,f,T)}function zc(o,u,d,f,T,D){if(!u)throw Error("Invalid event type");var S=h(T)?!!T.capture:!!T,W=As(o);if(W||(o[bs]=W=new ei(o)),d=W.add(u,d,f,S,D),d.proxy)return d;if(f=xm(),d.proxy=f,f.src=o,f.listener=d,o.addEventListener)Rm||(T=S),T===void 0&&(T=!1),o.addEventListener(u.toString(),f,T);else if(o.attachEvent)o.attachEvent(Kc(u.toString()),f);else if(o.addListener&&o.removeListener)o.addListener(f);else throw Error("addEventListener and attachEvent are unavailable.");return d}function xm(){function o(d){return u.call(o.src,o.listener,d)}let u=km;return o}function Gc(o,u,d,f,T){if(Array.isArray(u)){for(var D=0;D<u.length;D++)Gc(o,u[D],d,f,T);return null}return d=Rs(d),o&&o[$n]?o.L(u,d,h(f)?!!f.capture:!!f,T):zc(o,u,d,!0,f,T)}function Wc(o,u,d,f,T){if(Array.isArray(u))for(var D=0;D<u.length;D++)Wc(o,u[D],d,f,T);else f=h(f)?!!f.capture:!!f,d=Rs(d),o&&o[$n]?(o=o.i,u=String(u).toString(),u in o.g&&(D=o.g[u],d=Ts(D,d,f,T),-1<d&&(Zr(D[d]),Array.prototype.splice.call(D,d,1),D.length==0&&(delete o.g[u],o.h--)))):o&&(o=As(o))&&(u=o.g[u.toString()],o=-1,u&&(o=Ts(u,d,f,T)),(d=-1<o?u[o]:null)&&Cs(d))}function Cs(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[$n])ws(u.i,o);else{var d=o.type,f=o.proxy;u.removeEventListener?u.removeEventListener(d,f,o.capture):u.detachEvent?u.detachEvent(Kc(d),f):u.addListener&&u.removeListener&&u.removeListener(f),(d=As(u))?(ws(d,o),d.h==0&&(d.src=null,u[bs]=null)):Zr(o)}}}function Kc(o){return o in Ds?Ds[o]:Ds[o]="on"+o}function km(o,u){if(o.da)o=!0;else{u=new Bn(u,this);var d=o.listener,f=o.ha||o.src;o.fa&&Cs(o),o=d.call(f,u)}return o}function As(o){return o=o[bs],o instanceof ei?o:null}var Ss="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rs(o){return typeof o=="function"?o:(o[Ss]||(o[Ss]=function(u){return o.handleEvent(u)}),o[Ss])}function Ie(){It.call(this),this.i=new ei(this),this.M=this,this.F=null}A(Ie,It),Ie.prototype[$n]=!0,Ie.prototype.removeEventListener=function(o,u,d,f){Wc(this,o,u,d,f)};function Ce(o,u){var d,f=o.F;if(f)for(d=[];f;f=f.F)d.push(f);if(o=o.M,f=u.type||u,typeof u=="string")u=new Ee(u,o);else if(u instanceof Ee)u.target=u.target||o;else{var T=u;u=new Ee(f,o),v(u,T)}if(T=!0,d)for(var D=d.length-1;0<=D;D--){var S=u.g=d[D];T=ti(S,f,!0,u)&&T}if(S=u.g=o,T=ti(S,f,!0,u)&&T,T=ti(S,f,!1,u)&&T,d)for(D=0;D<d.length;D++)S=u.g=d[D],T=ti(S,f,!1,u)&&T}Ie.prototype.N=function(){if(Ie.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var d=o.g[u],f=0;f<d.length;f++)Zr(d[f]);delete o.g[u],o.h--}}this.F=null},Ie.prototype.K=function(o,u,d,f){return this.i.add(String(o),u,!1,d,f)},Ie.prototype.L=function(o,u,d,f){return this.i.add(String(o),u,!0,d,f)};function ti(o,u,d,f){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var T=!0,D=0;D<u.length;++D){var S=u[D];if(S&&!S.da&&S.capture==d){var W=S.listener,me=S.ha||S.src;S.fa&&ws(o.i,S),T=W.call(me,f)!==!1&&T}}return T&&!f.defaultPrevented}function Qc(o,u,d){if(typeof o=="function")d&&(o=w(o,d));else if(o&&typeof o.handleEvent=="function")o=w(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(o,u||0)}function Yc(o){o.g=Qc(()=>{o.g=null,o.i&&(o.i=!1,Yc(o))},o.l);let u=o.h;o.h=null,o.m.apply(null,u)}class Om extends It{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Yc(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qn(o){It.call(this),this.h=o,this.g={}}A(qn,It);var Jc=[];function Xc(o){ie(o.g,function(u,d){this.g.hasOwnProperty(d)&&Cs(u)},o),o.g={}}qn.prototype.N=function(){qn.aa.N.call(this),Xc(this)},qn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ns=c.JSON.stringify,Fm=c.JSON.parse,Vm=class{stringify(o){return c.JSON.stringify(o,void 0)}parse(o){return c.JSON.parse(o,void 0)}};function Ps(){}Ps.prototype.h=null;function Zc(o){return o.h||(o.h=o.i())}function eu(){}var Hn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ms(){Ee.call(this,"d")}A(Ms,Ee);function xs(){Ee.call(this,"c")}A(xs,Ee);var Bt={},tu=null;function ni(){return tu=tu||new Ie}Bt.La="serverreachability";function nu(o){Ee.call(this,Bt.La,o)}A(nu,Ee);function zn(o){let u=ni();Ce(u,new nu(u))}Bt.STAT_EVENT="statevent";function ru(o,u){Ee.call(this,Bt.STAT_EVENT,o),this.stat=u}A(ru,Ee);function Ae(o){let u=ni();Ce(u,new ru(u,o))}Bt.Ma="timingevent";function iu(o,u){Ee.call(this,Bt.Ma,o),this.size=u}A(iu,Ee);function Gn(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){o()},u)}function Wn(){this.g=!0}Wn.prototype.xa=function(){this.g=!1};function Lm(o,u,d,f,T,D){o.info(function(){if(o.g)if(D)for(var S="",W=D.split("&"),me=0;me<W.length;me++){var U=W[me].split("=");if(1<U.length){var we=U[0];U=U[1];var Te=we.split("_");S=2<=Te.length&&Te[1]=="type"?S+(we+"="+U+"&"):S+(we+"=redacted&")}}else S=null;else S=D;return"XMLHTTP REQ ("+f+") [attempt "+T+"]: "+u+`
`+d+`
`+S})}function Um(o,u,d,f,T,D,S){o.info(function(){return"XMLHTTP RESP ("+f+") [ attempt "+T+"]: "+u+`
`+d+`
`+D+" "+S})}function sn(o,u,d,f){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+Bm(o,d)+(f?" "+f:"")})}function jm(o,u){o.info(function(){return"TIMEOUT: "+u})}Wn.prototype.info=function(){};function Bm(o,u){if(!o.g)return u;if(!u)return null;try{var d=JSON.parse(u);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var f=d[o];if(!(2>f.length)){var T=f[1];if(Array.isArray(T)&&!(1>T.length)){var D=T[0];if(D!="noop"&&D!="stop"&&D!="close")for(var S=1;S<T.length;S++)T[S]=""}}}}return Ns(d)}catch{return u}}var ri={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},su={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ks;function ii(){}A(ii,Ps),ii.prototype.g=function(){return new XMLHttpRequest},ii.prototype.i=function(){return{}},ks=new ii;function wt(o,u,d,f){this.j=o,this.i=u,this.l=d,this.R=f||1,this.U=new qn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ou}function ou(){this.i=null,this.g="",this.h=!1}var au={},Os={};function Fs(o,u,d){o.L=1,o.v=ci(lt(u)),o.m=d,o.P=!0,cu(o,null)}function cu(o,u){o.F=Date.now(),si(o),o.A=lt(o.v);var d=o.A,f=o.R;Array.isArray(f)||(f=[String(f)]),wu(d.i,"t",f),o.C=0,d=o.j.J,o.h=new ou,o.g=ju(o.j,d?u:null,!o.m),0<o.O&&(o.M=new Om(w(o.Y,o,o.g),o.O)),u=o.U,d=o.g,f=o.ca;var T="readystatechange";Array.isArray(T)||(T&&(Jc[0]=T.toString()),T=Jc);for(var D=0;D<T.length;D++){var S=Hc(d,T[D],f||u.handleEvent,!1,u.h||u);if(!S)break;u.g[S.key]=S}u=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),zn(),Lm(o.i,o.u,o.A,o.l,o.R,o.m)}wt.prototype.ca=function(o){o=o.target;let u=this.M;u&&dt(o)==3?u.j():this.Y(o)},wt.prototype.Y=function(o){try{if(o==this.g)e:{let Te=dt(this.g);var u=this.g.Ba();let cn=this.g.Z();if(!(3>Te)&&(Te!=3||this.g&&(this.h.h||this.g.oa()||Ru(this.g)))){this.J||Te!=4||u==7||(u==8||0>=cn?zn(3):zn(2)),Vs(this);var d=this.g.Z();this.X=d;t:if(uu(this)){var f=Ru(this.g);o="";var T=f.length,D=dt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$t(this),Kn(this);var S="";break t}this.h.i=new c.TextDecoder}for(u=0;u<T;u++)this.h.h=!0,o+=this.h.i.decode(f[u],{stream:!(D&&u==T-1)});f.length=0,this.h.g+=o,this.C=0,S=this.h.g}else S=this.g.oa();if(this.o=d==200,Um(this.i,this.u,this.A,this.l,this.R,Te,d),this.o){if(this.T&&!this.K){t:{if(this.g){var W,me=this.g;if((W=me.g?me.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(W)){var U=W;break t}}U=null}if(d=U)sn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ls(this,d);else{this.o=!1,this.s=3,Ae(12),$t(this),Kn(this);break e}}if(this.P){d=!0;let We;for(;!this.J&&this.C<S.length;)if(We=$m(this,S),We==Os){Te==4&&(this.s=4,Ae(14),d=!1),sn(this.i,this.l,null,"[Incomplete Response]");break}else if(We==au){this.s=4,Ae(15),sn(this.i,this.l,S,"[Invalid Chunk]"),d=!1;break}else sn(this.i,this.l,We,null),Ls(this,We);if(uu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Te!=4||S.length!=0||this.h.h||(this.s=1,Ae(16),d=!1),this.o=this.o&&d,!d)sn(this.i,this.l,S,"[Invalid Chunked Response]"),$t(this),Kn(this);else if(0<S.length&&!this.W){this.W=!0;var we=this.j;we.g==this&&we.ba&&!we.M&&(we.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),Hs(we),we.M=!0,Ae(11))}}else sn(this.i,this.l,S,null),Ls(this,S);Te==4&&$t(this),this.o&&!this.J&&(Te==4?Fu(this.j,this):(this.o=!1,si(this)))}else sy(this.g),d==400&&0<S.indexOf("Unknown SID")?(this.s=3,Ae(12)):(this.s=0,Ae(13)),$t(this),Kn(this)}}}catch{}finally{}};function uu(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function $m(o,u){var d=o.C,f=u.indexOf(`
`,d);return f==-1?Os:(d=Number(u.substring(d,f)),isNaN(d)?au:(f+=1,f+d>u.length?Os:(u=u.slice(f,f+d),o.C=f+d,u)))}wt.prototype.cancel=function(){this.J=!0,$t(this)};function si(o){o.S=Date.now()+o.I,lu(o,o.I)}function lu(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Gn(w(o.ba,o),u)}function Vs(o){o.B&&(c.clearTimeout(o.B),o.B=null)}wt.prototype.ba=function(){this.B=null;let o=Date.now();0<=o-this.S?(jm(this.i,this.A),this.L!=2&&(zn(),Ae(17)),$t(this),this.s=2,Kn(this)):lu(this,this.S-o)};function Kn(o){o.j.G==0||o.J||Fu(o.j,o)}function $t(o){Vs(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,Xc(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function Ls(o,u){try{var d=o.j;if(d.G!=0&&(d.g==o||Us(d.h,o))){if(!o.K&&Us(d.h,o)&&d.G==3){try{var f=d.Da.g.parse(u)}catch{f=null}if(Array.isArray(f)&&f.length==3){var T=f;if(T[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)fi(d),di(d);else break e;qs(d),Ae(18)}}else d.za=T[1],0<d.za-d.T&&37500>T[2]&&d.F&&d.v==0&&!d.C&&(d.C=Gn(w(d.Za,d),6e3));if(1>=fu(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else Ht(d,11)}else if((o.K||d.g==o)&&fi(d),!B(u))for(T=d.Da.g.parse(u),u=0;u<T.length;u++){let U=T[u];if(d.T=U[0],U=U[1],d.G==2)if(U[0]=="c"){d.K=U[1],d.ia=U[2];let we=U[3];we!=null&&(d.la=we,d.j.info("VER="+d.la));let Te=U[4];Te!=null&&(d.Aa=Te,d.j.info("SVER="+d.Aa));let cn=U[5];cn!=null&&typeof cn=="number"&&0<cn&&(f=1.5*cn,d.L=f,d.j.info("backChannelRequestTimeoutMs_="+f)),f=d;let We=o.g;if(We){let gi=We.g?We.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gi){var D=f.h;D.g||gi.indexOf("spdy")==-1&&gi.indexOf("quic")==-1&&gi.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(js(D,D.h),D.h=null))}if(f.D){let zs=We.g?We.g.getResponseHeader("X-HTTP-Session-Id"):null;zs&&(f.ya=zs,J(f.I,f.D,zs))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),f=d;var S=o;if(f.qa=Uu(f,f.J?f.ia:null,f.W),S.K){pu(f.h,S);var W=S,me=f.L;me&&(W.I=me),W.B&&(Vs(W),si(W)),f.g=S}else ku(f);0<d.i.length&&hi(d)}else U[0]!="stop"&&U[0]!="close"||Ht(d,7);else d.G==3&&(U[0]=="stop"||U[0]=="close"?U[0]=="stop"?Ht(d,7):$s(d):U[0]!="noop"&&d.l&&d.l.ta(U),d.v=0)}}zn(4)}catch{}}var qm=class{constructor(o,u){this.g=o,this.map=u}};function du(o){this.l=o||10,c.PerformanceNavigationTiming?(o=c.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hu(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function fu(o){return o.h?1:o.g?o.g.size:0}function Us(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function js(o,u){o.g?o.g.add(u):o.h=u}function pu(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}du.prototype.cancel=function(){if(this.i=gu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let o of this.g.values())o.cancel();this.g.clear()}};function gu(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(let d of o.g.values())u=u.concat(d.D);return u}return N(o.i)}function Hm(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(l(o)){for(var u=[],d=o.length,f=0;f<d;f++)u.push(o[f]);return u}u=[],d=0;for(f in o)u[d++]=o[f];return u}function zm(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(l(o)||typeof o=="string"){var u=[];o=o.length;for(var d=0;d<o;d++)u.push(d);return u}u=[],d=0;for(let f in o)u[d++]=f;return u}}}function mu(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(l(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var d=zm(o),f=Hm(o),T=f.length,D=0;D<T;D++)u.call(void 0,f[D],d&&d[D],o)}var yu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gm(o,u){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var f=o[d].indexOf("="),T=null;if(0<=f){var D=o[d].substring(0,f);T=o[d].substring(f+1)}else D=o[d];u(D,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function qt(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof qt){this.h=o.h,oi(this,o.j),this.o=o.o,this.g=o.g,ai(this,o.s),this.l=o.l;var u=o.i,d=new Jn;d.i=u.i,u.g&&(d.g=new Map(u.g),d.h=u.h),_u(this,d),this.m=o.m}else o&&(u=String(o).match(yu))?(this.h=!1,oi(this,u[1]||"",!0),this.o=Qn(u[2]||""),this.g=Qn(u[3]||"",!0),ai(this,u[4]),this.l=Qn(u[5]||"",!0),_u(this,u[6]||"",!0),this.m=Qn(u[7]||"")):(this.h=!1,this.i=new Jn(null,this.h))}qt.prototype.toString=function(){var o=[],u=this.j;u&&o.push(Yn(u,vu,!0),":");var d=this.g;return(d||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Yn(u,vu,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(Yn(d,d.charAt(0)=="/"?Qm:Km,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",Yn(d,Jm)),o.join("")};function lt(o){return new qt(o)}function oi(o,u,d){o.j=d?Qn(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function ai(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function _u(o,u,d){u instanceof Jn?(o.i=u,Xm(o.i,o.h)):(d||(u=Yn(u,Ym)),o.i=new Jn(u,o.h))}function J(o,u,d){o.i.set(u,d)}function ci(o){return J(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Qn(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Yn(o,u,d){return typeof o=="string"?(o=encodeURI(o).replace(u,Wm),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Wm(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var vu=/[#\/\?@]/g,Km=/[#\?:]/g,Qm=/[#\?]/g,Ym=/[#\?@]/g,Jm=/#/g;function Jn(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function Tt(o){o.g||(o.g=new Map,o.h=0,o.i&&Gm(o.i,function(u,d){o.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}n=Jn.prototype,n.add=function(o,u){Tt(this),this.i=null,o=on(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(u),this.h+=1,this};function Eu(o,u){Tt(o),u=on(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function Iu(o,u){return Tt(o),u=on(o,u),o.g.has(u)}n.forEach=function(o,u){Tt(this),this.g.forEach(function(d,f){d.forEach(function(T){o.call(u,T,f,this)},this)},this)},n.na=function(){Tt(this);let o=Array.from(this.g.values()),u=Array.from(this.g.keys()),d=[];for(let f=0;f<u.length;f++){let T=o[f];for(let D=0;D<T.length;D++)d.push(u[f])}return d},n.V=function(o){Tt(this);let u=[];if(typeof o=="string")Iu(this,o)&&(u=u.concat(this.g.get(on(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)u=u.concat(o[d])}return u},n.set=function(o,u){return Tt(this),this.i=null,o=on(this,o),Iu(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},n.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function wu(o,u,d){Eu(o,u),0<d.length&&(o.i=null,o.g.set(on(o,u),N(d)),o.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let o=[],u=Array.from(this.g.keys());for(var d=0;d<u.length;d++){var f=u[d];let D=encodeURIComponent(String(f)),S=this.V(f);for(f=0;f<S.length;f++){var T=D;S[f]!==""&&(T+="="+encodeURIComponent(String(S[f]))),o.push(T)}}return this.i=o.join("&")};function on(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function Xm(o,u){u&&!o.j&&(Tt(o),o.i=null,o.g.forEach(function(d,f){var T=f.toLowerCase();f!=T&&(Eu(this,f),wu(this,T,d))},o)),o.j=u}function Zm(o,u){let d=new Wn;if(c.Image){let f=new Image;f.onload=C(bt,d,"TestLoadImage: loaded",!0,u,f),f.onerror=C(bt,d,"TestLoadImage: error",!1,u,f),f.onabort=C(bt,d,"TestLoadImage: abort",!1,u,f),f.ontimeout=C(bt,d,"TestLoadImage: timeout",!1,u,f),c.setTimeout(function(){f.ontimeout&&f.ontimeout()},1e4),f.src=o}else u(!1)}function ey(o,u){let d=new Wn,f=new AbortController,T=setTimeout(()=>{f.abort(),bt(d,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:f.signal}).then(D=>{clearTimeout(T),D.ok?bt(d,"TestPingServer: ok",!0,u):bt(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(T),bt(d,"TestPingServer: error",!1,u)})}function bt(o,u,d,f,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),f(d)}catch{}}function ty(){this.g=new Vm}function ny(o,u,d){let f=d||"";try{mu(o,function(T,D){let S=T;h(T)&&(S=Ns(T)),u.push(f+D+"="+encodeURIComponent(S))})}catch(T){throw u.push(f+"type="+encodeURIComponent("_badmap")),T}}function Xn(o){this.l=o.Ub||null,this.j=o.eb||!1}A(Xn,Ps),Xn.prototype.g=function(){return new ui(this.l,this.j)},Xn.prototype.i=(function(o){return function(){return o}})({});function ui(o,u){Ie.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(ui,Ie),n=ui.prototype,n.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,er(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zn(this)),this.readyState=0},n.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,er(this)),this.g&&(this.readyState=3,er(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tu(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tu(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}n.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?Zn(this):er(this),this.readyState==3&&Tu(this)}},n.Ra=function(o){this.g&&(this.response=this.responseText=o,Zn(this))},n.Qa=function(o){this.g&&(this.response=o,Zn(this))},n.ga=function(){this.g&&Zn(this)};function Zn(o){o.readyState=4,o.l=null,o.j=null,o.v=null,er(o)}n.setRequestHeader=function(o,u){this.u.append(o,u)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let o=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=u.next();return o.join(`\r
`)};function er(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(ui.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function bu(o){let u="";return ie(o,function(d,f){u+=f,u+=":",u+=d,u+=`\r
`}),u}function Bs(o,u,d){e:{for(f in d){var f=!1;break e}f=!0}f||(d=bu(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):J(o,u,d))}function ee(o){Ie.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(ee,Ie);var ry=/^https?$/i,iy=["POST","PUT"];n=ee.prototype,n.Ha=function(o){this.J=o},n.ea=function(o,u,d,f){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ks.g(),this.v=this.o?Zc(this.o):Zc(ks),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(D){Du(this,D);return}if(o=d||"",d=new Map(this.headers),f)if(Object.getPrototypeOf(f)===Object.prototype)for(var T in f)d.set(T,f[T]);else if(typeof f.keys=="function"&&typeof f.get=="function")for(let D of f.keys())d.set(D,f.get(D));else throw Error("Unknown input type for opt_headers: "+String(f));f=Array.from(d.keys()).find(D=>D.toLowerCase()=="content-type"),T=c.FormData&&o instanceof c.FormData,!(0<=Array.prototype.indexOf.call(iy,u,void 0))||f||T||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[D,S]of d)this.g.setRequestHeader(D,S);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Su(this),this.u=!0,this.g.send(o),this.u=!1}catch(D){Du(this,D)}};function Du(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,Cu(o),li(o)}function Cu(o){o.A||(o.A=!0,Ce(o,"complete"),Ce(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Ce(this,"complete"),Ce(this,"abort"),li(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),li(this,!0)),ee.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Au(this):this.bb())},n.bb=function(){Au(this)};function Au(o){if(o.h&&typeof a<"u"&&(!o.v[1]||dt(o)!=4||o.Z()!=2)){if(o.u&&dt(o)==4)Qc(o.Ea,0,o);else if(Ce(o,"readystatechange"),dt(o)==4){o.h=!1;try{let S=o.Z();e:switch(S){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var d;if(!(d=u)){var f;if(f=S===0){var T=String(o.D).match(yu)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),f=!ry.test(T?T.toLowerCase():"")}d=f}if(d)Ce(o,"complete"),Ce(o,"success");else{o.m=6;try{var D=2<dt(o)?o.g.statusText:""}catch{D=""}o.l=D+" ["+o.Z()+"]",Cu(o)}}finally{li(o)}}}}function li(o,u){if(o.g){Su(o);let d=o.g,f=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||Ce(o,"ready");try{d.onreadystatechange=f}catch{}}}function Su(o){o.I&&(c.clearTimeout(o.I),o.I=null)}n.isActive=function(){return!!this.g};function dt(o){return o.g?o.g.readyState:0}n.Z=function(){try{return 2<dt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),Fm(u)}};function Ru(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function sy(o){let u={};o=(o.g&&2<=dt(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let f=0;f<o.length;f++){if(B(o[f]))continue;var d=E(o[f]);let T=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();let D=u[T]||[];u[T]=D,D.push(d)}I(u,function(f){return f.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function tr(o,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||u}function Nu(o){this.Aa=0,this.i=[],this.j=new Wn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tr("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tr("baseRetryDelayMs",5e3,o),this.cb=tr("retryDelaySeedMs",1e4,o),this.Wa=tr("forwardChannelMaxRetries",2,o),this.wa=tr("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new du(o&&o.concurrentRequestLimit),this.Da=new ty,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Nu.prototype,n.la=8,n.G=1,n.connect=function(o,u,d,f){Ae(0),this.W=o,this.H=u||{},d&&f!==void 0&&(this.H.OSID=d,this.H.OAID=f),this.F=this.X,this.I=Uu(this,null,this.W),hi(this)};function $s(o){if(Pu(o),o.G==3){var u=o.U++,d=lt(o.I);if(J(d,"SID",o.K),J(d,"RID",u),J(d,"TYPE","terminate"),nr(o,d),u=new wt(o,o.j,u),u.L=2,u.v=ci(lt(d)),d=!1,c.navigator&&c.navigator.sendBeacon)try{d=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!d&&c.Image&&(new Image().src=u.v,d=!0),d||(u.g=ju(u.j,null),u.g.ea(u.v)),u.F=Date.now(),si(u)}Lu(o)}function di(o){o.g&&(Hs(o),o.g.cancel(),o.g=null)}function Pu(o){di(o),o.u&&(c.clearTimeout(o.u),o.u=null),fi(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&c.clearTimeout(o.s),o.s=null)}function hi(o){if(!hu(o.h)&&!o.s){o.s=!0;var u=o.Ga;Un||qc(),jn||(Un(),jn=!0),Is.add(u,o),o.B=0}}function oy(o,u){return fu(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Gn(w(o.Ga,o,u),Vu(o,o.B)),o.B++,!0)}n.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;let T=new wt(this,this.j,o),D=this.o;if(this.S&&(D?(D=g(D),v(D,this.S)):D=this.S),this.m!==null||this.O||(T.H=D,D=null),this.P)e:{for(var u=0,d=0;d<this.i.length;d++){t:{var f=this.i[d];if("__data__"in f.map&&(f=f.map.__data__,typeof f=="string")){f=f.length;break t}f=void 0}if(f===void 0)break;if(u+=f,4096<u){u=d;break e}if(u===4096||d===this.i.length-1){u=d+1;break e}}u=1e3}else u=1e3;u=xu(this,T,u),d=lt(this.I),J(d,"RID",o),J(d,"CVER",22),this.D&&J(d,"X-HTTP-Session-Id",this.D),nr(this,d),D&&(this.O?u="headers="+encodeURIComponent(String(bu(D)))+"&"+u:this.m&&Bs(d,this.m,D)),js(this.h,T),this.Ua&&J(d,"TYPE","init"),this.P?(J(d,"$req",u),J(d,"SID","null"),T.T=!0,Fs(T,d,null)):Fs(T,d,u),this.G=2}}else this.G==3&&(o?Mu(this,o):this.i.length==0||hu(this.h)||Mu(this))};function Mu(o,u){var d;u?d=u.l:d=o.U++;let f=lt(o.I);J(f,"SID",o.K),J(f,"RID",d),J(f,"AID",o.T),nr(o,f),o.m&&o.o&&Bs(f,o.m,o.o),d=new wt(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),u&&(o.i=u.D.concat(o.i)),u=xu(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),js(o.h,d),Fs(d,f,u)}function nr(o,u){o.H&&ie(o.H,function(d,f){J(u,f,d)}),o.l&&mu({},function(d,f){J(u,f,d)})}function xu(o,u,d){d=Math.min(o.i.length,d);var f=o.l?w(o.l.Na,o.l,o):null;e:{var T=o.i;let D=-1;for(;;){let S=["count="+d];D==-1?0<d?(D=T[0].g,S.push("ofs="+D)):D=0:S.push("ofs="+D);let W=!0;for(let me=0;me<d;me++){let U=T[me].g,we=T[me].map;if(U-=D,0>U)D=Math.max(0,T[me].g-100),W=!1;else try{ny(we,S,"req"+U+"_")}catch{f&&f(we)}}if(W){f=S.join("&");break e}}}return o=o.i.splice(0,d),u.D=o,f}function ku(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;Un||qc(),jn||(Un(),jn=!0),Is.add(u,o),o.v=0}}function qs(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Gn(w(o.Fa,o),Vu(o,o.v)),o.v++,!0)}n.Fa=function(){if(this.u=null,Ou(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Gn(w(this.ab,this),o)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ae(10),di(this),Ou(this))};function Hs(o){o.A!=null&&(c.clearTimeout(o.A),o.A=null)}function Ou(o){o.g=new wt(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=lt(o.qa);J(u,"RID","rpc"),J(u,"SID",o.K),J(u,"AID",o.T),J(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&J(u,"TO",o.ja),J(u,"TYPE","xmlhttp"),nr(o,u),o.m&&o.o&&Bs(u,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=ci(lt(u)),d.m=null,d.P=!0,cu(d,o)}n.Za=function(){this.C!=null&&(this.C=null,di(this),qs(this),Ae(19))};function fi(o){o.C!=null&&(c.clearTimeout(o.C),o.C=null)}function Fu(o,u){var d=null;if(o.g==u){fi(o),Hs(o),o.g=null;var f=2}else if(Us(o.h,u))d=u.D,pu(o.h,u),f=1;else return;if(o.G!=0){if(u.o)if(f==1){d=u.m?u.m.length:0,u=Date.now()-u.F;var T=o.B;f=ni(),Ce(f,new iu(f,d)),hi(o)}else ku(o);else if(T=u.s,T==3||T==0&&0<u.X||!(f==1&&oy(o,u)||f==2&&qs(o)))switch(d&&0<d.length&&(u=o.h,u.i=u.i.concat(d)),T){case 1:Ht(o,5);break;case 4:Ht(o,10);break;case 3:Ht(o,6);break;default:Ht(o,2)}}}function Vu(o,u){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*u}function Ht(o,u){if(o.j.info("Error code "+u),u==2){var d=w(o.fb,o),f=o.Xa;let T=!f;f=new qt(f||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||oi(f,"https"),ci(f),T?Zm(f.toString(),d):ey(f.toString(),d)}else Ae(2);o.G=0,o.l&&o.l.sa(u),Lu(o),Pu(o)}n.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Ae(2)):(this.j.info("Failed to ping google.com"),Ae(1))};function Lu(o){if(o.G=0,o.ka=[],o.l){let u=gu(o.h);(u.length!=0||o.i.length!=0)&&(R(o.ka,u),R(o.ka,o.i),o.h.i.length=0,N(o.i),o.i.length=0),o.l.ra()}}function Uu(o,u,d){var f=d instanceof qt?lt(d):new qt(d);if(f.g!="")u&&(f.g=u+"."+f.g),ai(f,f.s);else{var T=c.location;f=T.protocol,u=u?u+"."+T.hostname:T.hostname,T=+T.port;var D=new qt(null);f&&oi(D,f),u&&(D.g=u),T&&ai(D,T),d&&(D.l=d),f=D}return d=o.D,u=o.ya,d&&u&&J(f,d,u),J(f,"VER",o.la),nr(o,f),f}function ju(o,u,d){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new ee(new Xn({eb:d})):new ee(o.pa),u.Ha(o.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bu(){}n=Bu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function pi(){}pi.prototype.g=function(o,u){return new je(o,u)};function je(o,u){Ie.call(this),this.g=new Nu(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!B(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!B(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new an(this)}A(je,Ie),je.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},je.prototype.close=function(){$s(this.g)},je.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=Ns(o),o=d);u.i.push(new qm(u.Ya++,o)),u.G==3&&hi(u)},je.prototype.N=function(){this.g.l=null,delete this.j,$s(this.g),delete this.g,je.aa.N.call(this)};function $u(o){Ms.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(let d in u){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}A($u,Ms);function qu(){xs.call(this),this.status=1}A(qu,xs);function an(o){this.g=o}A(an,Bu),an.prototype.ua=function(){Ce(this.g,"a")},an.prototype.ta=function(o){Ce(this.g,new $u(o))},an.prototype.sa=function(o){Ce(this.g,new qu)},an.prototype.ra=function(){Ce(this.g,"b")},pi.prototype.createWebChannel=pi.prototype.g,je.prototype.send=je.prototype.o,je.prototype.open=je.prototype.m,je.prototype.close=je.prototype.close,gI=Pi.createWebChannelTransport=function(){return new pi},pI=Pi.getStatEventTarget=function(){return ni()},fI=Pi.Event=Bt,$p=Pi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ri.NO_ERROR=0,ri.TIMEOUT=8,ri.HTTP_ERROR=6,od=Pi.ErrorCode=ri,su.COMPLETE="complete",hI=Pi.EventType=su,eu.EventType=Hn,Hn.OPEN="a",Hn.CLOSE="b",Hn.ERROR="c",Hn.MESSAGE="d",Ie.prototype.listen=Ie.prototype.K,Za=Pi.WebChannel=eu,zj=Pi.FetchXmlHttpFactory=Xn,ee.prototype.listenOnce=ee.prototype.L,ee.prototype.getLastError=ee.prototype.Ka,ee.prototype.getLastErrorCode=ee.prototype.Ba,ee.prototype.getStatus=ee.prototype.Z,ee.prototype.getResponseJson=ee.prototype.Oa,ee.prototype.getResponseText=ee.prototype.oa,ee.prototype.send=ee.prototype.ea,ee.prototype.setWithCredentials=ee.prototype.Ha,dI=Pi.XhrIo=ee}).apply(typeof Bp<"u"?Bp:typeof self<"u"?self:typeof window<"u"?window:{});var DR="@firebase/firestore";var Et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");var Ic="10.14.0";var No=new Xa("@firebase/firestore");function ad(){return No.logLevel}function $(n,...e){if(No.logLevel<=be.DEBUG){let t=e.map(Zw);No.debug(`Firestore (${Ic}): ${n}`,...t)}}function xi(n,...e){if(No.logLevel<=be.ERROR){let t=e.map(Zw);No.error(`Firestore (${Ic}): ${n}`,...t)}}function ac(n,...e){if(No.logLevel<=be.WARN){let t=e.map(Zw);No.warn(`Firestore (${Ic}): ${n}`,...t)}}function Zw(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Z(n="Unexpected state"){let e=`FIRESTORE (${Ic}) INTERNAL ASSERTION FAILED: `+n;throw xi(e),new Error(e)}function Le(n,e){n||Z()}function oe(n,e){return n}var k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends mr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var $r=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Wp=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},EI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Et.UNAUTHENTICATED))}shutdown(){}},II=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},wI=class{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Le(this.o===void 0);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),s=new $r;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new $r,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},c=l=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new $r)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Le(typeof r.accessToken=="string"),new Wp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string"),new Et(e)}},TI=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},bI=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new TI(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},DI=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},CI=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Le(this.o===void 0);let r=s=>{s.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let a=s.token!==this.R;return this.R=s.token,$("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Le(typeof t.token=="string"),this.R=t.token,new DI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Gj(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Kp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Gj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function De(n,e){return n<e?-1:n>e?1:0}function cc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Nt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new G(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new G(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new G(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ce=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Nt(0,0))}static max(){return new n(new Nt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Qp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Z(),r===void 0?r=e.length-t:r>e.length-t&&Z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),a=t.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ye=class n extends Qp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new G(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Wj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,En=class n extends Qp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Wj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new G(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new G(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new G(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var X=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ye.fromString(e))}static fromName(e){return new n(Ye.fromString(e).popFirst(5))}static empty(){return new n(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ye(e.slice()))}};var AI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};AI.UNKNOWN_ID=-1;function Kj(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ce.fromTimestamp(r===1e9?new Nt(t+1,0):new Nt(t,r));return new Po(i,X.empty(),e)}function Qj(n){return new Po(n.readTime,n.key,-1)}var Po=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ce.min(),X.empty(),-1)}static max(){return new n(ce.max(),X.empty(),-1)}};function Yj(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=X.comparator(n.documentKey,e.documentKey),t!==0?t:De(n.largestBatchId,e.largestBatchId))}var Jj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",SI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Dd(n){if(n.code!==k.FAILED_PRECONDITION||n.message!==Jj)throw n;$("LocalStore","Unexpectedly lost primary lease")}var F=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++s,a&&s===i&&t()},l=>r(l))}),a=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,a=new Array(s),c=0;for(let l=0;l<s;l++){let h=l;t(e[h]).next(p=>{a[h]=p,++c,c===s&&r(a)},p=>i(p))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function Xj(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Cd(n){return n.name==="IndexedDbTransactionError"}var nN=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function wg(n){return n==null}function fd(n){return n===0&&1/n==-1/0}function Zj(n){return typeof n=="number"&&Number.isInteger(n)&&!fd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var eB=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Pse=[...eB,"documentOverlays"],tB=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],nB=tB,rB=[...nB,"indexConfiguration","indexState","indexEntries"];var Mse=[...rB,"globals"];function CR(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Lo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function rN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Je=class n{constructor(e,t){this.comparator=e,this.root=t||qr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rc(this.root,e,this.comparator,!1)}getReverseIterator(){return new rc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rc(this.root,e,this.comparator,!0)}},rc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},qr=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();let e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}};qr.EMPTY=null,qr.RED=!0,qr.BLACK=!1;qr.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,t,r,i,s){return this}insert(e,t,r){return new qr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ut=class n{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Yp(this.data.getIterator())}getIteratorFrom(e){return new Yp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Yp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var xn=class n{constructor(e){this.fields=e,e.sort(En.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ut(En.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return cc(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Jp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var jt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Jp("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};jt.EMPTY_BYTE_STRING=new jt("");var iB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ki(n){if(Le(!!n),typeof n=="string"){let e=0,t=iB.exec(n);if(Le(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ge(n.seconds),nanos:Ge(n.nanos)}}function Ge(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function hs(n){return typeof n=="string"?jt.fromBase64String(n):jt.fromUint8Array(n)}function eT(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function tT(n){let e=n.mapValue.fields.__previous_value__;return eT(e)?tT(e):e}function pd(n){let e=ki(n.mapValue.fields.__local_write_time__.timestampValue);return new Nt(e.seconds,e.nanos)}var RI=class{constructor(e,t,r,i,s,a,c,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=h}},Xp=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var qp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Mo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?eT(n)?4:sN(n)?9007199254740991:iN(n)?10:11:Z()}function Gr(n,e){if(n===e)return!0;let t=Mo(n);if(t!==Mo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return pd(n).isEqual(pd(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let a=ki(i.timestampValue),c=ki(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return hs(i.bytesValue).isEqual(hs(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return Ge(i.geoPointValue.latitude)===Ge(s.geoPointValue.latitude)&&Ge(i.geoPointValue.longitude)===Ge(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Ge(i.integerValue)===Ge(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let a=Ge(i.doubleValue),c=Ge(s.doubleValue);return a===c?fd(a)===fd(c):isNaN(a)&&isNaN(c)}return!1})(n,e);case 9:return cc(n.arrayValue.values||[],e.arrayValue.values||[],Gr);case 10:case 11:return(function(i,s){let a=i.mapValue.fields||{},c=s.mapValue.fields||{};if(CR(a)!==CR(c))return!1;for(let l in a)if(a.hasOwnProperty(l)&&(c[l]===void 0||!Gr(a[l],c[l])))return!1;return!0})(n,e);default:return Z()}}function gd(n,e){return(n.values||[]).find(t=>Gr(t,e))!==void 0}function uc(n,e){if(n===e)return 0;let t=Mo(n),r=Mo(e);if(t!==r)return De(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(n.booleanValue,e.booleanValue);case 2:return(function(s,a){let c=Ge(s.integerValue||s.doubleValue),l=Ge(a.integerValue||a.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1})(n,e);case 3:return AR(n.timestampValue,e.timestampValue);case 4:return AR(pd(n),pd(e));case 5:return De(n.stringValue,e.stringValue);case 6:return(function(s,a){let c=hs(s),l=hs(a);return c.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(s,a){let c=s.split("/"),l=a.split("/");for(let h=0;h<c.length&&h<l.length;h++){let p=De(c[h],l[h]);if(p!==0)return p}return De(c.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,a){let c=De(Ge(s.latitude),Ge(a.latitude));return c!==0?c:De(Ge(s.longitude),Ge(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return SR(n.arrayValue,e.arrayValue);case 10:return(function(s,a){var c,l,h,p;let _=s.fields||{},w=a.fields||{},C=(c=_.value)===null||c===void 0?void 0:c.arrayValue,A=(l=w.value)===null||l===void 0?void 0:l.arrayValue,N=De(((h=C?.values)===null||h===void 0?void 0:h.length)||0,((p=A?.values)===null||p===void 0?void 0:p.length)||0);return N!==0?N:SR(C,A)})(n.mapValue,e.mapValue);case 11:return(function(s,a){if(s===qp.mapValue&&a===qp.mapValue)return 0;if(s===qp.mapValue)return 1;if(a===qp.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),h=a.fields||{},p=Object.keys(h);l.sort(),p.sort();for(let _=0;_<l.length&&_<p.length;++_){let w=De(l[_],p[_]);if(w!==0)return w;let C=uc(c[l[_]],h[p[_]]);if(C!==0)return C}return De(l.length,p.length)})(n.mapValue,e.mapValue);default:throw Z()}}function AR(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return De(n,e);let t=ki(n),r=ki(e),i=De(t.seconds,r.seconds);return i!==0?i:De(t.nanos,r.nanos)}function SR(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=uc(t[i],r[i]);if(s)return s}return De(t.length,r.length)}function lc(n){return NI(n)}function NI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=ki(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return hs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return X.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=NI(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let a of r)s?s=!1:i+=",",i+=`${a}:${NI(t.fields[a])}`;return i+"}"})(n.mapValue):Z()}function PI(n){return!!n&&"integerValue"in n}function nT(n){return!!n&&"arrayValue"in n}function RR(n){return!!n&&"nullValue"in n}function NR(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zp(n){return!!n&&"mapValue"in n}function iN(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ud(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Lo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ud(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ud(n.arrayValue.values[t]);return e}return Object.assign({},n)}function sN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var vn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!zp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ud(t)}setAll(e){let t=En.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=c.popLast()}a?r[c.lastSegment()]=ud(a):i.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());zp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];zp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Lo(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(ud(this.value))}};function oN(n){let e=[];return Lo(n.fields,(t,r)=>{let i=new En([t]);if(zp(r)){let s=oN(r.mapValue).fields;if(s.length===0)e.push(i);else for(let a of s)e.push(i.child(a))}else e.push(i)}),new xn(e)}var vr=class n{constructor(e,t,r,i,s,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new n(e,0,ce.min(),ce.min(),ce.min(),vn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ce.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ce.min(),ce.min(),vn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ce.min(),ce.min(),vn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var dc=class{constructor(e,t){this.position=e,this.inclusive=t}};function PR(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],a=n.position[i];if(s.field.isKeyField()?r=X.comparator(X.fromName(a.referenceValue),t.key):r=uc(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function MR(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gr(n.position[t],e.position[t]))return!1;return!0}var hc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function sB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Zp=class{},mt=class n extends Zp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new xI(e,t,r):t==="array-contains"?new FI(e,r):t==="in"?new VI(e,r):t==="not-in"?new LI(e,r):t==="array-contains-any"?new UI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new kI(e,r):new OI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(uc(t,this.value)):t!==null&&Mo(this.value)===Mo(t)&&this.matchesComparison(uc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Wr=class n extends Zp{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return aN(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function aN(n){return n.op==="and"}function cN(n){return oB(n)&&aN(n)}function oB(n){for(let e of n.filters)if(e instanceof Wr)return!1;return!0}function MI(n){if(n instanceof mt)return n.field.canonicalString()+n.op.toString()+lc(n.value);if(cN(n))return n.filters.map(e=>MI(e)).join(",");{let e=n.filters.map(t=>MI(t)).join(",");return`${n.op}(${e})`}}function uN(n,e){return n instanceof mt?(function(r,i){return i instanceof mt&&r.op===i.op&&r.field.isEqual(i.field)&&Gr(r.value,i.value)})(n,e):n instanceof Wr?(function(r,i){return i instanceof Wr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,c)=>s&&uN(a,i.filters[c]),!0):!1})(n,e):void Z()}function lN(n){return n instanceof mt?(function(t){return`${t.field.canonicalString()} ${t.op} ${lc(t.value)}`})(n):n instanceof Wr?(function(t){return t.op.toString()+" {"+t.getFilters().map(lN).join(" ,")+"}"})(n):"Filter"}var xI=class extends mt{constructor(e,t,r){super(e,t,r),this.key=X.fromName(r.referenceValue)}matches(e){let t=X.comparator(e.key,this.key);return this.matchesComparison(t)}},kI=class extends mt{constructor(e,t){super(e,"in",t),this.keys=dN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},OI=class extends mt{constructor(e,t){super(e,"not-in",t),this.keys=dN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function dN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>X.fromName(r.referenceValue))}var FI=class extends mt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return nT(t)&&gd(t.arrayValue,this.value)}},VI=class extends mt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&gd(this.value.arrayValue,t)}},LI=class extends mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(gd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!gd(this.value.arrayValue,t)}},UI=class extends mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!nT(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>gd(this.value.arrayValue,r))}};var jI=class{constructor(e,t=null,r=[],i=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.ue=null}};function xR(n,e=null,t=[],r=[],i=null,s=null,a=null){return new jI(n,e,t,r,i,s,a)}function rT(n){let e=oe(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>MI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),wg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>lc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>lc(r)).join(",")),e.ue=t}return e.ue}function iT(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!sB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!uN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!MR(n.startAt,e.startAt)&&MR(n.endAt,e.endAt)}function BI(n){return X.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var fc=class{constructor(e,t=null,r=[],i=[],s=null,a="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function aB(n,e,t,r,i,s,a,c){return new fc(n,e,t,r,i,s,a,c)}function hN(n){return new fc(n)}function kR(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function cB(n){return n.collectionGroup!==null}function ld(n){let e=oe(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Ut(En.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new hc(s,r))}),t.has(En.keyField().canonicalString())||e.ce.push(new hc(En.keyField(),r))}return e.ce}function Hr(n){let e=oe(n);return e.le||(e.le=uB(e,ld(n))),e.le}function uB(n,e){if(n.limitType==="F")return xR(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new hc(i.field,s)});let t=n.endAt?new dc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new dc(n.startAt.position,n.startAt.inclusive):null;return xR(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function $I(n,e,t){return new fc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Tg(n,e){return iT(Hr(n),Hr(e))&&n.limitType===e.limitType}function fN(n){return`${rT(Hr(n))}|lt:${n.limitType}`}function ec(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>lN(i)).join(", ")}]`),wg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>lc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>lc(i)).join(",")),`Target(${r})`})(Hr(n))}; limitType=${n.limitType})`}function bg(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):X.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of ld(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,c,l){let h=PR(a,c,l);return a.inclusive?h<=0:h<0})(r.startAt,ld(r),i)||r.endAt&&!(function(a,c,l){let h=PR(a,c,l);return a.inclusive?h>=0:h>0})(r.endAt,ld(r),i))})(n,e)}function lB(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function pN(n){return(e,t)=>{let r=!1;for(let i of ld(n)){let s=dB(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function dB(n,e,t){let r=n.field.isKeyField()?X.comparator(e.key,t.key):(function(s,a,c){let l=a.data.field(s),h=c.data.field(s);return l!==null&&h!==null?uc(l,h):Z()})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}var fs=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Lo(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return rN(this.inner)}size(){return this.innerSize}};var hB=new Je(X.comparator);function Oi(){return hB}var gN=new Je(X.comparator);function cd(...n){let e=gN;for(let t of n)e=e.insert(t.key,t);return e}function mN(n){let e=gN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function So(){return dd()}function yN(){return dd()}function dd(){return new fs(n=>n.toString(),(n,e)=>n.isEqual(e))}var fB=new Je(X.comparator),pB=new Ut(X.comparator);function pe(...n){let e=pB;for(let t of n)e=e.add(t);return e}var gB=new Ut(De);function mB(){return gB}function sT(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fd(e)?"-0":e}}function _N(n){return{integerValue:""+n}}function yB(n,e){return Zj(e)?_N(e):sT(n,e)}var pc=class{constructor(){this._=void 0}};function _B(n,e,t){return n instanceof gc?(function(i,s){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&eT(s)&&(s=tT(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}})(t,e):n instanceof xo?EN(n,e):n instanceof ko?IN(n,e):(function(i,s){let a=vN(i,s),c=OR(a)+OR(i.Pe);return PI(a)&&PI(i.Pe)?_N(c):sT(i.serializer,c)})(n,e)}function vB(n,e,t){return n instanceof xo?EN(n,e):n instanceof ko?IN(n,e):t}function vN(n,e){return n instanceof mc?(function(r){return PI(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var gc=class extends pc{},xo=class extends pc{constructor(e){super(),this.elements=e}};function EN(n,e){let t=wN(e);for(let r of n.elements)t.some(i=>Gr(i,r))||t.push(r);return{arrayValue:{values:t}}}var ko=class extends pc{constructor(e){super(),this.elements=e}};function IN(n,e){let t=wN(e);for(let r of n.elements)t=t.filter(i=>!Gr(i,r));return{arrayValue:{values:t}}}var mc=class extends pc{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function OR(n){return Ge(n.integerValue||n.doubleValue)}function wN(n){return nT(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function EB(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof xo&&i instanceof xo||r instanceof ko&&i instanceof ko?cc(r.elements,i.elements,Gr):r instanceof mc&&i instanceof mc?Gr(r.Pe,i.Pe):r instanceof gc&&i instanceof gc})(n.transform,e.transform)}var qI=class{constructor(e,t){this.version=e,this.transformResults=t}},Mi=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Gp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var yc=class{};function TN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new md(n.key,Mi.none()):new Oo(n.key,n.data,Mi.none());{let t=n.data,r=vn.empty(),i=new Ut(En.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Kr(n.key,r,new xn(i.toArray()),Mi.none())}}function IB(n,e,t){n instanceof Oo?(function(i,s,a){let c=i.value.clone(),l=VR(i.fieldTransforms,s,a.transformResults);c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(n,e,t):n instanceof Kr?(function(i,s,a){if(!Gp(i.precondition,s))return void s.convertToUnknownDocument(a.version);let c=VR(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(bN(i)),l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(n,e,t):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function hd(n,e,t,r){return n instanceof Oo?(function(s,a,c,l){if(!Gp(s.precondition,a))return c;let h=s.value.clone(),p=LR(s.fieldTransforms,l,a);return h.setAll(p),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null})(n,e,t,r):n instanceof Kr?(function(s,a,c,l){if(!Gp(s.precondition,a))return c;let h=LR(s.fieldTransforms,l,a),p=a.data;return p.setAll(bN(s)),p.setAll(h),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(_=>_.field))})(n,e,t,r):(function(s,a,c){return Gp(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c})(n,e,t)}function wB(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=vN(r.transform,i||null);s!=null&&(t===null&&(t=vn.empty()),t.set(r.field,s))}return t||null}function FR(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&cc(r,i,(s,a)=>EB(s,a))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Oo=class extends yc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Kr=class extends yc{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function bN(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function VR(n,e,t){let r=new Map;Le(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],a=s.transform,c=e.data.field(s.field);r.set(s.field,vB(a,c,t[i]))}return r}function LR(n,e,t){let r=new Map;for(let i of n){let s=i.transform,a=t.data.field(i.field);r.set(i.field,_B(s,a,e))}return r}var md=class extends yc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},HI=class extends yc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var zI=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&IB(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=hd(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=hd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=yN();return this.mutations.forEach(i=>{let s=e.get(i.key),a=s.overlayedDocument,c=this.applyToLocalView(a,s.mutatedFields);c=t.has(i.key)?null:c;let l=TN(a,c);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),pe())}isEqual(e){return this.batchId===e.batchId&&cc(this.mutations,e.mutations,(t,r)=>FR(t,r))&&cc(this.baseMutations,e.baseMutations,(t,r)=>FR(t,r))}},GI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Le(e.mutations.length===r.length);let i=(function(){return fB})(),s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new n(e,t,r,i)}};var WI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var KI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ot,ye;function TB(n){switch(n){default:return Z();case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0}}function DN(n){if(n===void 0)return xi("GRPC error has no .code"),k.UNKNOWN;switch(n){case ot.OK:return k.OK;case ot.CANCELLED:return k.CANCELLED;case ot.UNKNOWN:return k.UNKNOWN;case ot.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case ot.INTERNAL:return k.INTERNAL;case ot.UNAVAILABLE:return k.UNAVAILABLE;case ot.UNAUTHENTICATED:return k.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case ot.NOT_FOUND:return k.NOT_FOUND;case ot.ALREADY_EXISTS:return k.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return k.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case ot.ABORTED:return k.ABORTED;case ot.OUT_OF_RANGE:return k.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return k.UNIMPLEMENTED;case ot.DATA_LOSS:return k.DATA_LOSS;default:return Z()}}(ye=ot||(ot={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var UR=null;function bB(){return new TextEncoder}var DB=new ls([4294967295,4294967295],0);function jR(n){let e=bB().encode(n),t=new lI;return t.update(e),new Uint8Array(t.digest())}function BR(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ls([t,r],0),new ls([i,s],0)]}var QI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ro(`Invalid padding: ${t}`);if(r<0)throw new Ro(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ro(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ro(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ls.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(ls.fromNumber(r)));return i.compare(DB)===1&&(i=new ls([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=jR(e),[r,i]=BR(t);for(let s=0;s<this.hashCount;s++){let a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new n(s,i,t);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;let t=jR(e),[r,i]=BR(t);for(let s=0;s<this.hashCount;s++){let a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ro=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var eg=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,yd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ce.min(),i,new Je(De),Oi(),pe())}},yd=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,pe(),pe(),pe())}};var sc=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},tg=class{constructor(e,t){this.targetId=e,this.me=t}},ng=class{constructor(e,t,r=jt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},rg=class{constructor(){this.fe=0,this.ge=qR(),this.pe=jt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=pe(),t=pe(),r=pe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Z()}}),new yd(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=qR()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},YI=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Oi(),this.qe=$R(),this.Qe=new Je(De)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(BI(s))if(r===0){let a=new X(s.path);this.Ue(t,a,vr.newNoDocument(a,ce.min()))}else Le(r===1);else{let a=this.Ye(t);if(a!==r){let c=this.Ze(e),l=c?this.Xe(c,e,a):1;if(l!==0){this.je(t);let h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,h)}UR?.et((function(p,_,w,C,A){var N,R,O,B,j,Y;let $e={localCacheCount:p,existenceFilterCount:_.count,databaseId:w.database,projectId:w.projectId},ie=_.unchangedNames;return ie&&($e.bloomFilter={applied:A===0,hashCount:(N=ie?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(B=(O=(R=ie?.bits)===null||R===void 0?void 0:R.bitmap)===null||O===void 0?void 0:O.length)!==null&&B!==void 0?B:0,padding:(Y=(j=ie?.bits)===null||j===void 0?void 0:j.padding)!==null&&Y!==void 0?Y:0,mightContain:I=>{var g;return(g=C?.mightContain(I))!==null&&g!==void 0&&g}}),$e})(a,e.me,this.Le.tt(),c,l))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,a,c;try{a=hs(r).toUint8Array()}catch(l){if(l instanceof Jp)return ac("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new QI(a,i,s)}catch(l){return ac(l instanceof Ro?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,a)=>{let c=this.Je(a);if(c){if(s.current&&BI(c.target)){let l=new X(c.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,vr.newNoDocument(l,e))}s.be&&(t.set(a,s.ve()),s.Ce())}});let r=pe();this.qe.forEach((s,a)=>{let c=!0;a.forEachWhile(l=>{let h=this.Je(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));let i=new eg(e,t,this.Qe,this.ke,r);return this.ke=Oi(),this.qe=$R(),this.Qe=new Je(De),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new rg,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ut(De),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||$("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new rg),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function $R(){return new Je(X.comparator)}function qR(){return new Je(X.comparator)}var CB={asc:"ASCENDING",desc:"DESCENDING"},AB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SB={and:"AND",or:"OR"},JI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function XI(n,e){return n.useProto3Json||wg(e)?e:{value:e}}function ig(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function RB(n,e){return ig(n,e.toTimestamp())}function zr(n){return Le(!!n),ce.fromTimestamp((function(t){let r=ki(t);return new Nt(r.seconds,r.nanos)})(n))}function oT(n,e){return ZI(n,e).canonicalString()}function ZI(n,e){let t=(function(i){return new Ye(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function AN(n){let e=Ye.fromString(n);return Le(MN(e)),e}function ew(n,e){return oT(n.databaseId,e.path)}function mI(n,e){let t=AN(e);if(t.get(1)!==n.databaseId.projectId)throw new G(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new G(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new X(RN(t))}function SN(n,e){return oT(n.databaseId,e)}function NB(n){let e=AN(n);return e.length===4?Ye.emptyPath():RN(e)}function tw(n){return new Ye(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function RN(n){return Le(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function HR(n,e,t){return{name:ew(n,e),fields:t.value.mapValue.fields}}function PB(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Z()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(h,p){return h.useProto3Json?(Le(p===void 0||typeof p=="string"),jt.fromBase64String(p||"")):(Le(p===void 0||p instanceof Buffer||p instanceof Uint8Array),jt.fromUint8Array(p||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&(function(h){let p=h.code===void 0?k.UNKNOWN:DN(h.code);return new G(p,h.message||"")})(a);t=new ng(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=mI(n,r.document.name),s=zr(r.document.updateTime),a=r.document.createTime?zr(r.document.createTime):ce.min(),c=new vn({mapValue:{fields:r.document.fields}}),l=vr.newFoundDocument(i,s,a,c),h=r.targetIds||[],p=r.removedTargetIds||[];t=new sc(h,p,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=mI(n,r.document),s=r.readTime?zr(r.readTime):ce.min(),a=vr.newNoDocument(i,s),c=r.removedTargetIds||[];t=new sc([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=mI(n,r.document),s=r.removedTargetIds||[];t=new sc([],s,i,null)}else{if(!("filter"in e))return Z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,a=new KI(i,s),c=r.targetId;t=new tg(c,a)}}return t}function MB(n,e){let t;if(e instanceof Oo)t={update:HR(n,e.key,e.value)};else if(e instanceof md)t={delete:ew(n,e.key)};else if(e instanceof Kr)t={update:HR(n,e.key,e.data),updateMask:BB(e.fieldMask)};else{if(!(e instanceof HI))return Z();t={verify:ew(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,a){let c=a.transform;if(c instanceof gc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof xo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ko)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof mc)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw Z()})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:RB(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Z()})(n,e.precondition)),t}function xB(n,e){return n&&n.length>0?(Le(e!==void 0),n.map(t=>(function(i,s){let a=i.updateTime?zr(i.updateTime):zr(s);return a.isEqual(ce.min())&&(a=zr(s)),new qI(a,i.transformResults||[])})(t,e))):[]}function kB(n,e){return{documents:[SN(n,e.path)]}}function OB(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=SN(n,i);let s=(function(h){if(h.length!==0)return PN(Wr.create(h,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let a=(function(h){if(h.length!==0)return h.map(p=>(function(w){return{field:tc(w.field),direction:LB(w.dir)}})(p))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);let c=XI(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:t,parent:i}}function FB(n){let e=NB(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Le(r===1);let p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=(function(_){let w=NN(_);return w instanceof Wr&&cN(w)?w.getFilters():[w]})(t.where));let a=[];t.orderBy&&(a=(function(_){return _.map(w=>(function(A){return new hc(nc(A.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(w))})(t.orderBy));let c=null;t.limit&&(c=(function(_){let w;return w=typeof _=="object"?_.value:_,wg(w)?null:w})(t.limit));let l=null;t.startAt&&(l=(function(_){let w=!!_.before,C=_.values||[];return new dc(C,w)})(t.startAt));let h=null;return t.endAt&&(h=(function(_){let w=!_.before,C=_.values||[];return new dc(C,w)})(t.endAt)),aB(e,i,a,s,c,"F",l,h)}function VB(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function NN(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=nc(t.unaryFilter.field);return mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=nc(t.unaryFilter.field);return mt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=nc(t.unaryFilter.field);return mt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=nc(t.unaryFilter.field);return mt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Z()}})(n):n.fieldFilter!==void 0?(function(t){return mt.create(nc(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Wr.create(t.compositeFilter.filters.map(r=>NN(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z()}})(t.compositeFilter.op))})(n):Z()}function LB(n){return CB[n]}function UB(n){return AB[n]}function jB(n){return SB[n]}function tc(n){return{fieldPath:n.canonicalString()}}function nc(n){return En.fromServerFormat(n.fieldPath)}function PN(n){return n instanceof mt?(function(t){if(t.op==="=="){if(NR(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NAN"}};if(RR(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(NR(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NOT_NAN"}};if(RR(t.value))return{unaryFilter:{field:tc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tc(t.field),op:UB(t.op),value:t.value}}})(n):n instanceof Wr?(function(t){let r=t.getFilters().map(i=>PN(i));return r.length===1?r[0]:{compositeFilter:{op:jB(t.op),filters:r}}})(n):Z()}function BB(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function MN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var _d=class n{constructor(e,t,r,i,s=ce.min(),a=ce.min(),c=jt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var nw=class{constructor(e){this.ct=e}};function $B(n){let e=FB({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?$I(e,e.limit,"L"):e}var sg=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ge(e.integerValue));else if("doubleValue"in e){let r=Ge(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),fd(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=ki(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(hs(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?sN(e)?this.dt(t,Number.MAX_SAFE_INTEGER):iN(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let a="value",c=((i=(r=s[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Ge(c)),this.Vt(a,t),this.Tt(s[a],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),X.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};sg.vt=new sg;var rw=class{constructor(){this.un=new iw}addToCollectionParentIndex(e,t){return this.un.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(Po.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(Po.min())}updateCollectionGroup(e,t,r){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}},iw=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ut(Ye.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ut(Ye.comparator)).toArray()}};var kse=new Uint8Array(0);var Br=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Br.DEFAULT_COLLECTION_PERCENTILE=10,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Br.DEFAULT=new Br(41943040,Br.DEFAULT_COLLECTION_PERCENTILE,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Br.DISABLED=new Br(-1,0,0);var vd=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var sw=class{constructor(){this.changes=new fs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?F.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var ow=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var aw=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&hd(r.mutation,i,xn.empty(),Nt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=pe()){let i=So();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=cd();return s.forEach((c,l)=>{a=a.insert(c,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let r=So();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,pe()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,c)=>{t.set(a,c)})})}computeViews(e,t,r,i){let s=Oi(),a=dd(),c=(function(){return dd()})();return t.forEach((l,h)=>{let p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof Kr)?s=s.insert(h.key,h):p!==void 0?(a.set(h.key,p.mutation.getFieldMask()),hd(p.mutation,h,p.mutation.getFieldMask(),Nt.now())):a.set(h.key,xn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((h,p)=>a.set(h,p)),t.forEach((h,p)=>{var _;return c.set(h,new ow(p,(_=a.get(h))!==null&&_!==void 0?_:null))}),c))}recalculateAndSaveOverlays(e,t){let r=dd(),i=new Je((a,c)=>a-c),s=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let c of a)c.keys().forEach(l=>{let h=t.get(l);if(h===null)return;let p=r.get(l)||xn.empty();p=c.applyToLocalView(h,p),r.set(l,p);let _=(i.get(c.batchId)||pe()).add(l);i=i.insert(c.batchId,_)})}).next(()=>{let a=[],c=i.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),h=l.key,p=l.value,_=yN();p.forEach(w=>{if(!s.has(w)){let C=TN(t.get(w),r.get(w));C!==null&&_.set(w,C),s=s.add(w)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,_))}return F.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(a){return X.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cB(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):F.resolve(So()),c=-1,l=s;return a.next(h=>F.forEach(h,(p,_)=>(c<_.largestBatchId&&(c=_.largestBatchId),s.get(p)?F.resolve():this.remoteDocumentCache.getEntry(e,p).next(w=>{l=l.insert(p,w)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,l,h,pe())).next(p=>({batchId:c,changes:mN(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new X(t)).next(r=>{let i=cd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,a=cd();return this.indexManager.getCollectionParents(e,s).next(c=>F.forEach(c,l=>{let h=(function(_,w){return new fc(w,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((_,w)=>{a=a.insert(_,w)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(a=>{s.forEach((l,h)=>{let p=h.getKey();a.get(p)===null&&(a=a.insert(p,vr.newInvalidDocument(p)))});let c=cd();return a.forEach((l,h)=>{let p=s.get(l);p!==void 0&&hd(p.mutation,h,xn.empty(),Nt.now()),bg(t,h)&&(c=c.insert(l,h))}),c})}};var cw=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return F.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:zr(i.createTime)}})(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(i){return{name:i.name,query:$B(i.bundledQuery),readTime:zr(i.readTime)}})(t)),F.resolve()}};var uw=class{constructor(){this.overlays=new Je(X.comparator),this.Ir=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){let r=So();return F.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),F.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,t,r){let i=So(),s=t.length+1,a=new X(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){let l=c.getNext().value,h=l.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return F.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Je((h,p)=>h-p),a=this.overlays.getIterator();for(;a.hasNext();){let h=a.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=So(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}let c=So(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,p)=>c.set(h,p)),!(c.size()>=i)););return F.resolve(c)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new WI(t,r));let s=this.Ir.get(t);s===void 0&&(s=pe(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var lw=class{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}};var Ed=class{constructor(){this.Tr=new Ut(at.Er),this.dr=new Ut(at.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new at(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new at(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new X(new Ye([])),r=new at(t,e),i=new at(t,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new X(new Ye([])),r=new at(t,e),i=new at(t,e+1),s=pe();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){let t=new at(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},at=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return X.comparator(e.key,t.key)||De(e.wr,t.wr)}static Ar(e,t){return De(e.wr,t.wr)||X.comparator(e.key,t.key)}};var dw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ut(at.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new zI(s,t,r,i);this.mutationQueue.push(a);for(let c of i)this.br=this.br.add(new at(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return F.resolve(a)}lookupMutationBatch(e,t){return F.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new at(t,0),i=new at(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{let c=this.Dr(a.wr);s.push(c)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ut(De);return t.forEach(i=>{let s=new at(i,0),a=new at(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],c=>{r=r.add(c.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;X.isDocumentKey(s)||(s=s.child(""));let a=new at(new X(s),0),c=new Ut(De);return this.br.forEachWhile(l=>{let h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(c=c.add(l.wr)),!0)},a),F.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Le(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(t.mutations,i=>{let s=new at(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new at(t,0),i=this.br.firstAfterOrEqual(r);return F.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var hw=class{constructor(e){this.Mr=e,this.docs=(function(){return new Je(X.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return F.resolve(r?r.document.mutableCopy():vr.newInvalidDocument(t))}getEntries(e,t){let r=Oi();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():vr.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Oi(),a=t.path,c=new X(a.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:h,value:{document:p}}=l.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||Yj(Qj(p),r)<=0||(i.has(p.key)||bg(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Z()}Or(e,t){return F.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new fw(this)}getSize(e){return F.resolve(this.size)}},fw=class extends sw{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),F.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var pw=class{constructor(e){this.persistence=e,this.Nr=new fs(t=>rT(t),iT),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ed,this.targetCount=0,this.kr=vd.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),F.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new vd(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.Kn(t),F.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),F.waitFor(s).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return F.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),F.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),F.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return F.resolve(r)}containsKey(e,t){return F.resolve(this.Br.containsKey(t))}};var gw=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new nN(0),this.Kr=!1,this.Kr=!0,this.$r=new lw,this.referenceDelegate=e(this),this.Ur=new pw(this),this.indexManager=new rw,this.remoteDocumentCache=(function(i){return new hw(i)})(r=>this.referenceDelegate.Wr(r)),this.serializer=new nw(t),this.Gr=new cw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new uw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new dw(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){$("MemoryPersistence","Starting transaction:",e);let i=new mw(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},mw=class extends SI{constructor(e){super(),this.currentSequenceNumber=e}},yw=class n{constructor(e){this.persistence=e,this.Jr=new Ed,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),F.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{let i=X.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,ce.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return F.or([()=>F.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var _w=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=pe(),i=pe();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var vw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Ew=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return cR()?8:Xj(aR())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;let a=new vw;return this.Xi(e,t,a).next(c=>{if(s.result=c,this.zi)return this.es(e,t,a,c.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(ad()<=be.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",ec(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(ad()<=be.DEBUG&&$("QueryEngine","Query:",ec(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ad()<=be.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",ec(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hr(t))):F.resolve())}Yi(e,t){if(kR(t))return F.resolve(null);let r=Hr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=$I(t,null,"F"),r=Hr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let a=pe(...s);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(l=>{let h=this.ts(t,c);return this.ns(t,h,a,l.readTime)?this.Yi(e,$I(t,null,"F")):this.rs(e,h,t,l)}))})))}Zi(e,t,r,i){return kR(t)||i.isEqual(ce.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let a=this.ts(t,s);return this.ns(t,a,r,i)?F.resolve(null):(ad()<=be.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ec(t)),this.rs(e,a,t,Kj(i,-1)).next(c=>c))})}ts(e,t){let r=new Ut(pN(e));return t.forEach((i,s)=>{bg(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return ad()<=be.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",ec(t)),this.Ji.getDocumentsMatchingQuery(e,t,Po.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}};var Iw=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Je(De),this._s=new fs(s=>rT(s),iT),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aw(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function qB(n,e,t,r){return new Iw(n,e,t,r)}async function xN(n,e){let t=oe(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let a=[],c=[],l=pe();for(let h of i){a.push(h.batchId);for(let p of h.mutations)l=l.add(p.key)}for(let h of s){c.push(h.batchId);for(let p of h.mutations)l=l.add(p.key)}return t.localDocuments.getDocuments(r,l).next(h=>({hs:h,removedBatchIds:a,addedBatchIds:c}))})})}function HB(n,e){let t=oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return(function(c,l,h,p){let _=h.batch,w=_.keys(),C=F.resolve();return w.forEach(A=>{C=C.next(()=>p.getEntry(l,A)).next(N=>{let R=h.docVersions.get(A);Le(R!==null),N.version.compareTo(R)<0&&(_.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),p.addEntry(N)))})}),C.next(()=>c.mutationQueue.removeMutationBatch(l,_))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let l=pe();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(l=l.add(c.batch.mutations[h].key));return l})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function kN(n){let e=oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function zB(n,e){let t=oe(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let a=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let c=[];e.targetChanges.forEach((p,_)=>{let w=i.get(_);if(!w)return;c.push(t.Ur.removeMatchingKeys(s,p.removedDocuments,_).next(()=>t.Ur.addMatchingKeys(s,p.addedDocuments,_)));let C=w.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(_)!==null?C=C.withResumeToken(jt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):p.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(p.resumeToken,r)),i=i.insert(_,C),(function(N,R,O){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(w,C,p)&&c.push(t.Ur.updateTargetData(s,C))});let l=Oi(),h=pe();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,p))}),c.push(GB(s,a,e.documentUpdates).next(p=>{l=p.Ps,h=p.Is})),!r.isEqual(ce.min())){let p=t.Ur.getLastRemoteSnapshotVersion(s).next(_=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(p)}return F.waitFor(c).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,h)).next(()=>l)}).then(s=>(t.os=i,s))}function GB(n,e,t){let r=pe(),i=pe();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=Oi();return t.forEach((c,l)=>{let h=s.get(c);l.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(c)),l.isNoDocument()&&l.version.isEqual(ce.min())?(e.removeEntry(c,l.readTime),a=a.insert(c,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(l),a=a.insert(c,l)):$("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",l.version)}),{Ps:a,Is:i}})}function WB(n,e){let t=oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function KB(n,e){let t=oe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,F.resolve(i)):t.Ur.allocateTargetId(r).next(a=>(i=new _d(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function ww(n,e,t){let r=oe(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Cd(a))throw a;$("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function zR(n,e,t){let r=oe(n),i=ce.min(),s=pe();return r.persistence.runTransaction("Execute query","readwrite",a=>(function(l,h,p){let _=oe(l),w=_._s.get(p);return w!==void 0?F.resolve(_.os.get(w)):_.Ur.getTargetData(h,p)})(r,a,Hr(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,t?i:ce.min(),t?s:pe())).next(c=>(QB(r,lB(e),c),{documents:c,Ts:s})))}function QB(n,e,t){let r=n.us.get(e)||ce.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var og=class{constructor(){this.activeTargetIds=mB()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Tw=class{constructor(){this.so=new og,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new og,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var bw=class{_o(e){}shutdown(){}};var ag=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){$("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){$("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Hp=null;function yI(){return Hp===null?Hp=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hp++,"0x"+Hp.toString(16)}var YB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Dw=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Lt="WebChannelConnection",Cw=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,a){let c=yI(),l=this.xo(t,r.toUriEncodedString());$("RestConnection",`Sending RPC '${t}' ${c}:`,l,i);let h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,a),this.No(t,l,h,i).then(p=>($("RestConnection",`Received RPC '${t}' ${c}: `,p),p),p=>{throw ac("RestConnection",`RPC '${t}' ${c} failed with error: `,p,"url: ",l,"request:",i),p})}Lo(t,r,i,s,a,c){return this.Mo(t,r,i,s,a)}Oo(t,r,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ic})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>t[a]=s),i&&i.headers.forEach((s,a)=>t[a]=s)}xo(t,r){let i=YB[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=yI();return new Promise((a,c)=>{let l=new dI;l.setWithCredentials(!0),l.listenOnce(hI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case od.NO_ERROR:let p=l.getResponseJson();$(Lt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case od.TIMEOUT:$(Lt,`RPC '${e}' ${s} timed out`),c(new G(k.DEADLINE_EXCEEDED,"Request time out"));break;case od.HTTP_ERROR:let _=l.getStatus();if($(Lt,`RPC '${e}' ${s} failed with status:`,_,"response text:",l.getResponseText()),_>0){let w=l.getResponseJson();Array.isArray(w)&&(w=w[0]);let C=w?.error;if(C&&C.status&&C.message){let A=(function(R){let O=R.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(O)>=0?O:k.UNKNOWN})(C.status);c(new G(A,C.message))}else c(new G(k.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new G(k.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{$(Lt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);$(Lt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}Bo(e,t,r){let i=yI(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=gI(),c=pI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let p=s.join("");$(Lt,`Creating RPC '${e}' stream ${i}: ${p}`,l);let _=a.createWebChannel(p,l),w=!1,C=!1,A=new Dw({Io:R=>{C?$(Lt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(w||($(Lt,`Opening RPC '${e}' stream ${i} transport.`),_.open(),w=!0),$(Lt,`RPC '${e}' stream ${i} sending:`,R),_.send(R))},To:()=>_.close()}),N=(R,O,B)=>{R.listen(O,j=>{try{B(j)}catch(Y){setTimeout(()=>{throw Y},0)}})};return N(_,Za.EventType.OPEN,()=>{C||($(Lt,`RPC '${e}' stream ${i} transport opened.`),A.yo())}),N(_,Za.EventType.CLOSE,()=>{C||(C=!0,$(Lt,`RPC '${e}' stream ${i} transport closed`),A.So())}),N(_,Za.EventType.ERROR,R=>{C||(C=!0,ac(Lt,`RPC '${e}' stream ${i} transport errored:`,R),A.So(new G(k.UNAVAILABLE,"The operation could not be completed")))}),N(_,Za.EventType.MESSAGE,R=>{var O;if(!C){let B=R.data[0];Le(!!B);let j=B,Y=j.error||((O=j[0])===null||O===void 0?void 0:O.error);if(Y){$(Lt,`RPC '${e}' stream ${i} received error:`,Y);let $e=Y.status,ie=(function(y){let v=ot[y];if(v!==void 0)return DN(v)})($e),I=Y.message;ie===void 0&&(ie=k.INTERNAL,I="Unknown error status: "+$e+" with message "+Y.message),C=!0,A.So(new G(ie,I)),_.close()}else $(Lt,`RPC '${e}' stream ${i} received:`,B),A.bo(B)}}),N(c,fI.STAT_EVENT,R=>{R.stat===$p.PROXY?$(Lt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===$p.NOPROXY&&$(Lt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}};function _I(){return typeof document<"u"?document:null}function Dg(n){return new JI(n,!0)}var cg=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var ug=class{constructor(e,t,r,i,s,a,c,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new cg(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===k.RESOURCE_EXHAUSTED?(xi(t.toString()),xi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new G(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return $("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():($("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Aw=class extends ug{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=PB(this.serializer,e),r=(function(s){if(!("targetChange"in s))return ce.min();let a=s.targetChange;return a.targetIds&&a.targetIds.length?ce.min():a.readTime?zr(a.readTime):ce.min()})(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=tw(this.serializer),t.addTarget=(function(s,a){let c,l=a.target;if(c=BI(l)?{documents:kB(s,l)}:{query:OB(s,l)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=CN(s,a.resumeToken);let h=XI(s,a.expectedCount);h!==null&&(c.expectedCount=h)}else if(a.snapshotVersion.compareTo(ce.min())>0){c.readTime=ig(s,a.snapshotVersion.toTimestamp());let h=XI(s,a.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);let r=VB(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=tw(this.serializer),t.removeTarget=e,this.a_(t)}},Sw=class extends ug{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Le(!!e.streamToken),this.lastStreamToken=e.streamToken,Le(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=xB(e.writeResults,e.commitTime),r=zr(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=tw(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>MB(this.serializer,r))};this.a_(t)}};var Rw=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new G(k.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,ZI(t,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(k.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,ZI(t,r),i,a,c,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new G(k.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Nw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(xi(t),this.D_=!1):$("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Pw=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{Uo(this)&&($("RemoteStore","Restarting streams for network reachability change."),await(async function(l){let h=oe(l);h.L_.add(4),await Ad(h),h.q_.set("Unknown"),h.L_.delete(4),await Cg(h)})(this))})}),this.q_=new Nw(r,i)}};async function Cg(n){if(Uo(n))for(let e of n.B_)await e(!0)}async function Ad(n){for(let e of n.B_)await e(!1)}function ON(n,e){let t=oe(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),lT(t)?uT(t):wc(t).r_()&&cT(t,e))}function aT(n,e){let t=oe(n),r=wc(t);t.N_.delete(e),r.r_()&&FN(t,e),t.N_.size===0&&(r.r_()?r.o_():Uo(t)&&t.q_.set("Unknown"))}function cT(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wc(n).A_(e)}function FN(n,e){n.Q_.xe(e),wc(n).R_(e)}function uT(n){n.Q_=new YI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),wc(n).start(),n.q_.v_()}function lT(n){return Uo(n)&&!wc(n).n_()&&n.N_.size>0}function Uo(n){return oe(n).L_.size===0}function VN(n){n.Q_=void 0}async function JB(n){n.q_.set("Online")}async function XB(n){n.N_.forEach((e,t)=>{cT(n,e)})}async function ZB(n,e){VN(n),lT(n)?(n.q_.M_(e),uT(n)):n.q_.set("Unknown")}async function e$(n,e,t){if(n.q_.set("Online"),e instanceof ng&&e.state===2&&e.cause)try{await(async function(i,s){let a=s.cause;for(let c of s.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,a),i.N_.delete(c),i.Q_.removeTarget(c))})(n,e)}catch(r){$("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lg(n,r)}else if(e instanceof sc?n.Q_.Ke(e):e instanceof tg?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ce.min()))try{let r=await kN(n.localStore);t.compareTo(r)>=0&&await(function(s,a){let c=s.Q_.rt(a);return c.targetChanges.forEach((l,h)=>{if(l.resumeToken.approximateByteSize()>0){let p=s.N_.get(h);p&&s.N_.set(h,p.withResumeToken(l.resumeToken,a))}}),c.targetMismatches.forEach((l,h)=>{let p=s.N_.get(l);if(!p)return;s.N_.set(l,p.withResumeToken(jt.EMPTY_BYTE_STRING,p.snapshotVersion)),FN(s,l);let _=new _d(p.target,l,h,p.sequenceNumber);cT(s,_)}),s.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){$("RemoteStore","Failed to raise snapshot:",r),await lg(n,r)}}async function lg(n,e,t){if(!Cd(e))throw e;n.L_.add(1),await Ad(n),n.q_.set("Offline"),t||(t=()=>kN(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{$("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await Cg(n)})}function LN(n,e){return e().catch(t=>lg(n,t,e))}async function Ag(n){let e=oe(n),t=ps(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;t$(e);)try{let i=await WB(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,n$(e,i)}catch(i){await lg(e,i)}UN(e)&&jN(e)}function t$(n){return Uo(n)&&n.O_.length<10}function n$(n,e){n.O_.push(e);let t=ps(n);t.r_()&&t.V_&&t.m_(e.mutations)}function UN(n){return Uo(n)&&!ps(n).n_()&&n.O_.length>0}function jN(n){ps(n).start()}async function r$(n){ps(n).p_()}async function i$(n){let e=ps(n);for(let t of n.O_)e.m_(t.mutations)}async function s$(n,e,t){let r=n.O_.shift(),i=GI.from(r,e,t);await LN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Ag(n)}async function o$(n,e){e&&ps(n).V_&&await(async function(r,i){if((function(a){return TB(a)&&a!==k.ABORTED})(i.code)){let s=r.O_.shift();ps(r).s_(),await LN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ag(r)}})(n,e),UN(n)&&jN(n)}async function GR(n,e){let t=oe(n);t.asyncQueue.verifyOperationInProgress(),$("RemoteStore","RemoteStore received new credentials");let r=Uo(t);t.L_.add(3),await Ad(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Cg(t)}async function a$(n,e){let t=oe(n);e?(t.L_.delete(2),await Cg(t)):e||(t.L_.add(2),await Ad(t),t.q_.set("Unknown"))}function wc(n){return n.K_||(n.K_=(function(t,r,i){let s=oe(t);return s.w_(),new Aw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Eo:JB.bind(null,n),Ro:XB.bind(null,n),mo:ZB.bind(null,n),d_:e$.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),lT(n)?uT(n):n.q_.set("Unknown")):(await n.K_.stop(),VN(n))})),n.K_}function ps(n){return n.U_||(n.U_=(function(t,r,i){let s=oe(t);return s.w_(),new Sw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:r$.bind(null,n),mo:o$.bind(null,n),f_:i$.bind(null,n),g_:s$.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await Ag(n)):(await n.U_.stop(),n.O_.length>0&&($("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}var Mw=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new $r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let a=Date.now()+r,c=new n(e,t,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function dT(n,e){if(xi("AsyncQueue",`${e}: ${n}`),Cd(n))return new G(k.UNAVAILABLE,`${e}: ${n}`);throw n}var dg=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||X.comparator(t.key,r.key):(t,r)=>X.comparator(t.key,r.key),this.keyedMap=cd(),this.sortedSet=new Je(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var hg=class{constructor(){this.W_=new Je(X.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},_c=class n{constructor(e,t,r,i,s,a,c,l,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,s){let a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new n(e,t,dg.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var xw=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},kw=class{constructor(){this.queries=WR(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=oe(t),s=i.queries;i.queries=WR(),s.forEach((a,c)=>{for(let l of c.j_)l.onError(r)})})(this,new G(k.ABORTED,"Firestore shutting down"))}};function WR(){return new fs(n=>fN(n),Tg)}async function c$(n,e){let t=oe(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new xw,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await t.onListen(i,!0);break;case 1:s.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){let c=dT(a,`Initialization of query '${ec(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&hT(t)}async function u$(n,e){let t=oe(n),r=e.query,i=3,s=t.queries.get(r);if(s){let a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function l$(n,e){let t=oe(n),r=!1;for(let i of e){let s=i.query,a=t.queries.get(s);if(a){for(let c of a.j_)c.X_(i)&&(r=!0);a.z_=i}}r&&hT(t)}function d$(n,e,t){let r=oe(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function hT(n){n.Y_.forEach(e=>{e.next()})}var Ow,KR;(KR=Ow||(Ow={})).ea="default",KR.Cache="cache";var Fw=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new _c(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=_c.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ow.Cache}};var fg=class{constructor(e){this.key=e}},pg=class{constructor(e){this.key=e}},Vw=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=pe(),this.mutatedKeys=pe(),this.Aa=pN(e),this.Ra=new dg(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new hg,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,a=i,c=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,_)=>{let w=i.get(p),C=bg(this.query,_)?_:null,A=!!w&&this.mutatedKeys.has(w.key),N=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations),R=!1;w&&C?w.data.isEqual(C.data)?A!==N&&(r.track({type:3,doc:C}),R=!0):this.ga(w,C)||(r.track({type:2,doc:C}),R=!0,(l&&this.Aa(C,l)>0||h&&this.Aa(C,h)<0)&&(c=!0)):!w&&C?(r.track({type:0,doc:C}),R=!0):w&&!C&&(r.track({type:1,doc:w}),R=!0,(l||h)&&(c=!0)),R&&(C?(a=a.add(C),s=N?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ra:a,fa:r,ns:c,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let a=e.fa.G_();a.sort((p,_)=>(function(C,A){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return N(C)-N(A)})(p.type,_.type)||this.Aa(p.doc,_.doc)),this.pa(r),i=i!=null&&i;let c=t&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,h=l!==this.Ea;return this.Ea=l,a.length!==0||h?{snapshot:new _c(this.query,e.Ra,s,a,e.mutatedKeys,l===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new hg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=pe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new pg(r))}),this.da.forEach(r=>{e.has(r)||t.push(new fg(r))}),t}ba(e){this.Ta=e.Ts,this.da=pe();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return _c.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Lw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Uw=class{constructor(e){this.key=e,this.va=!1}},jw=class{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new fs(c=>fN(c),Tg),this.Ma=new Map,this.xa=new Set,this.Oa=new Je(X.comparator),this.Na=new Map,this.La=new Ed,this.Ba={},this.ka=new Map,this.qa=vd.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};async function h$(n,e,t=!0){let r=GN(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await BN(r,e,t,!0),i}async function f$(n,e){let t=GN(n);await BN(t,e,!0,!1)}async function BN(n,e,t,r){let i=await KB(n.localStore,Hr(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t),c;return r&&(c=await p$(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&ON(n.remoteStore,i),c}async function p$(n,e,t,r,i){n.Ka=(_,w,C)=>(async function(N,R,O,B){let j=R.view.ma(O);j.ns&&(j=await zR(N.localStore,R.query,!1).then(({documents:I})=>R.view.ma(I,j)));let Y=B&&B.targetChanges.get(R.targetId),$e=B&&B.targetMismatches.get(R.targetId)!=null,ie=R.view.applyChanges(j,N.isPrimaryClient,Y,$e);return YR(N,R.targetId,ie.wa),ie.snapshot})(n,_,w,C);let s=await zR(n.localStore,e,!0),a=new Vw(e,s.Ts),c=a.ma(s.documents),l=yd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=a.applyChanges(c,n.isPrimaryClient,l);YR(n,t,h.wa);let p=new Lw(e,t,a);return n.Fa.set(e,p),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),h.snapshot}async function g$(n,e,t){let r=oe(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!Tg(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ww(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&aT(r.remoteStore,i.targetId),Bw(r,i.targetId)}).catch(Dd)):(Bw(r,i.targetId),await ww(r.localStore,i.targetId,!0))}async function m$(n,e){let t=oe(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),aT(t.remoteStore,r.targetId))}async function y$(n,e,t){let r=b$(n);try{let i=await(function(a,c){let l=oe(a),h=Nt.now(),p=c.reduce((C,A)=>C.add(A.key),pe()),_,w;return l.persistence.runTransaction("Locally write mutations","readwrite",C=>{let A=Oi(),N=pe();return l.cs.getEntries(C,p).next(R=>{A=R,A.forEach((O,B)=>{B.isValidDocument()||(N=N.add(O))})}).next(()=>l.localDocuments.getOverlayedDocuments(C,A)).next(R=>{_=R;let O=[];for(let B of c){let j=wB(B,_.get(B.key).overlayedDocument);j!=null&&O.push(new Kr(B.key,j,oN(j.value.mapValue),Mi.exists(!0)))}return l.mutationQueue.addMutationBatch(C,h,O,c)}).next(R=>{w=R;let O=R.applyToLocalDocumentSet(_,N);return l.documentOverlayCache.saveOverlays(C,R.batchId,O)})}).then(()=>({batchId:w.batchId,changes:mN(_)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,c,l){let h=a.Ba[a.currentUser.toKey()];h||(h=new Je(De)),h=h.insert(c,l),a.Ba[a.currentUser.toKey()]=h})(r,i.batchId,t),await Sd(r,i.changes),await Ag(r.remoteStore)}catch(i){let s=dT(i,"Failed to persist write");t.reject(s)}}async function $N(n,e){let t=oe(n);try{let r=await zB(t.localStore,e);e.targetChanges.forEach((i,s)=>{let a=t.Na.get(s);a&&(Le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?Le(a.va):i.removedDocuments.size>0&&(Le(a.va),a.va=!1))}),await Sd(t,r,e)}catch(r){await Dd(r)}}function QR(n,e,t){let r=oe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,a)=>{let c=a.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),(function(a,c){let l=oe(a);l.onlineState=c;let h=!1;l.queries.forEach((p,_)=>{for(let w of _.j_)w.Z_(c)&&(h=!0)}),h&&hT(l)})(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _$(n,e,t){let r=oe(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let a=new Je(X.comparator);a=a.insert(s,vr.newNoDocument(s,ce.min()));let c=pe().add(s),l=new eg(ce.min(),new Map,new Je(De),a,c);await $N(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),fT(r)}else await ww(r.localStore,e,!1).then(()=>Bw(r,e,t)).catch(Dd)}async function v$(n,e){let t=oe(n),r=e.batch.batchId;try{let i=await HB(t.localStore,e);HN(t,r,null),qN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Sd(t,i)}catch(i){await Dd(i)}}async function E$(n,e,t){let r=oe(n);try{let i=await(function(a,c){let l=oe(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return l.mutationQueue.lookupMutationBatch(h,c).next(_=>(Le(_!==null),p=_.keys(),l.mutationQueue.removeMutationBatch(h,_))).next(()=>l.mutationQueue.performConsistencyCheck(h)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(h,p,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>l.localDocuments.getDocuments(h,p))})})(r.localStore,e);HN(r,e,t),qN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Sd(r,i)}catch(i){await Dd(i)}}function qN(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function HN(n,e,t){let r=oe(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Bw(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||zN(n,r)})}function zN(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(aT(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),fT(n))}function YR(n,e,t){for(let r of t)r instanceof fg?(n.La.addReference(r.key,e),I$(n,r)):r instanceof pg?($("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||zN(n,r.key)):Z()}function I$(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||($("SyncEngine","New document in limbo: "+t),n.xa.add(r),fT(n))}function fT(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new X(Ye.fromString(e)),r=n.qa.next();n.Na.set(r,new Uw(t)),n.Oa=n.Oa.insert(t,r),ON(n.remoteStore,new _d(Hr(hN(t.path)),r,"TargetPurposeLimboResolution",nN.oe))}}async function Sd(n,e,t){let r=oe(n),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,l)=>{a.push(r.Ka(l,e,t).then(h=>{var p;if((h||t)&&r.isPrimaryClient){let _=h?!h.fromCache:(p=t?.targetChanges.get(l.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(l.targetId,_?"current":"not-current")}if(h){i.push(h);let _=_w.Wi(l.targetId,h);s.push(_)}}))}),await Promise.all(a),r.Ca.d_(i),await(async function(l,h){let p=oe(l);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>F.forEach(h,w=>F.forEach(w.$i,C=>p.persistence.referenceDelegate.addReference(_,w.targetId,C)).next(()=>F.forEach(w.Ui,C=>p.persistence.referenceDelegate.removeReference(_,w.targetId,C)))))}catch(_){if(!Cd(_))throw _;$("LocalStore","Failed to update sequence numbers: "+_)}for(let _ of h){let w=_.targetId;if(!_.fromCache){let C=p.os.get(w),A=C.snapshotVersion,N=C.withLastLimboFreeSnapshotVersion(A);p.os=p.os.insert(w,N)}}})(r.localStore,s))}async function w$(n,e){let t=oe(n);if(!t.currentUser.isEqual(e)){$("SyncEngine","User change. New user:",e.toKey());let r=await xN(t.localStore,e);t.currentUser=e,(function(s,a){s.ka.forEach(c=>{c.forEach(l=>{l.reject(new G(k.CANCELLED,a))})}),s.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Sd(t,r.hs)}}function T$(n,e){let t=oe(n),r=t.Na.get(e);if(r&&r.va)return pe().add(r.key);{let i=pe(),s=t.Ma.get(e);if(!s)return i;for(let a of s){let c=t.Fa.get(a);i=i.unionWith(c.view.Va)}return i}}function GN(n){let e=oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$N.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=T$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_$.bind(null,e),e.Ca.d_=l$.bind(null,e.eventManager),e.Ca.$a=d$.bind(null,e.eventManager),e}function b$(n){let e=oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=v$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=E$.bind(null,e),e}var JR=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Dg(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,r){return null}Ha(t,r){return null}za(t){return qB(this.persistence,new Ew,t.initialUser,this.serializer)}Ga(t){return new gw(yw.Zr,this.serializer)}Wa(t){return new Tw}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})();var D$=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>QR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=w$.bind(null,this.syncEngine),await a$(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new kw})()}createDatastore(t){let r=Dg(t.databaseInfo.databaseId),i=(function(a){return new Cw(a)})(t.databaseInfo);return(function(a,c,l,h){return new Rw(a,c,l,h)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,a,c,l){return new Pw(i,s,a,c,l)})(this.localStore,this.datastore,t.asyncQueue,r=>QR(this.syncEngine,r,0),(function(){return ag.D()?new ag:new bw})())}createSyncEngine(t,r){return(function(s,a,c,l,h,p,_){let w=new jw(s,a,c,l,h,p);return _&&(w.Qa=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await(async function(s){let a=oe(s);$("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Ad(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var $w=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):xi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var qw=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Et.UNAUTHENTICATED,this.clientId=Kp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{$("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>($("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new $r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=dT(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function vI(n,e){n.asyncQueue.verifyOperationInProgress(),$("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await xN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function XR(n,e){n.asyncQueue.verifyOperationInProgress();let t=await C$(n);$("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>GR(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>GR(e.remoteStore,i)),n._onlineComponents=e}async function C$(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){$("FirestoreClient","Using user provided OfflineComponentProvider");try{await vI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===k.FAILED_PRECONDITION||i.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;ac("Error using user provided cache. Falling back to memory cache: "+t),await vI(n,new JR)}}else $("FirestoreClient","Using default OfflineComponentProvider"),await vI(n,new JR);return n._offlineComponents}async function WN(n){return n._onlineComponents||(n._uninitializedComponentsProvider?($("FirestoreClient","Using user provided OnlineComponentProvider"),await XR(n,n._uninitializedComponentsProvider._online)):($("FirestoreClient","Using default OnlineComponentProvider"),await XR(n,new D$))),n._onlineComponents}function A$(n){return WN(n).then(e=>e.syncEngine)}async function S$(n){let e=await WN(n),t=e.eventManager;return t.onListen=h$.bind(null,e.syncEngine),t.onUnlisten=g$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=f$.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=m$.bind(null,e.syncEngine),t}function R$(n,e,t={}){let r=new $r;return n.asyncQueue.enqueueAndForget(async()=>(function(s,a,c,l,h){let p=new $w({next:w=>{p.Za(),a.enqueueAndForget(()=>u$(s,_)),w.fromCache&&l.source==="server"?h.reject(new G(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(w)},error:w=>h.reject(w)}),_=new Fw(c,p,{includeMetadataChanges:!0,_a:!0});return c$(s,_)})(await S$(n),n.asyncQueue,e,t,r)),r.promise}function KN(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var ZR=new Map;function QN(n,e,t){if(!t)throw new G(k.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function N$(n,e,t,r){if(e===!0&&r===!0)throw new G(k.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function eN(n){if(!X.isDocumentKey(n))throw new G(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function tN(n){if(X.isDocumentKey(n))throw new G(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function pT(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Z()}function Fo(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new G(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=pT(n);throw new G(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var gg=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}N$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new G(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new G(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new G(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},vc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gg(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new EI;switch(r.type){case"firstParty":return new bI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=ZR.get(t);r&&($("ComponentProvider","Removing Datastore"),ZR.delete(t),r.terminate())})(this),Promise.resolve()}};function P$(n,e,t,r={}){var i;let s=(n=Fo(n,vc))._getSettings(),a=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&ac("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let c,l;if(typeof r.mockUserToken=="string")c=r.mockUserToken,l=Et.MOCK_USER;else{c=xp(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new G(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Et(h)}n._authCredentials=new II(new Wp(c,l))}}var mg=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},kn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ds(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},ds=class n extends mg{constructor(e,t,r){super(e,t,hN(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new kn(this.firestore,null,new X(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function gT(n,e,...t){if(n=nn(n),QN("collection","path",e),n instanceof vc){let r=Ye.fromString(e,...t);return tN(r),new ds(n,null,r)}{if(!(n instanceof kn||n instanceof ds))throw new G(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ye.fromString(e,...t));return tN(r),new ds(n.firestore,null,r)}}function Sg(n,e,...t){if(n=nn(n),arguments.length===1&&(e=Kp.newId()),QN("doc","path",e),n instanceof vc){let r=Ye.fromString(e,...t);return eN(r),new kn(n,null,new X(r))}{if(!(n instanceof kn||n instanceof ds))throw new G(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ye.fromString(e,...t));return eN(r),new kn(n.firestore,n instanceof ds?n.converter:null,new X(r))}}var yg=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new cg(this,"async_queue_retry"),this.Vu=()=>{let r=_I();r&&$("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=_I();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=_I();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new $r;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Cd(e))throw e;$("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=(function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c})(r);throw xi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=Mw.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Z()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var Vo=class extends vc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new yg,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new yg(e),this._firestoreClient=void 0,await e}}};function YN(n,e){let t=typeof n=="object"?n:jp(),r=typeof n=="string"?n:e||"(default)",i=Lp(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Mp("firestore");s&&P$(i,...s)}return i}function JN(n){if(n._terminated)throw new G(k.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||M$(n),n._firestoreClient}function M$(n){var e,t,r;let i=n._freezeSettings(),s=(function(c,l,h,p){return new RI(c,l,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,KN(p.experimentalLongPollingOptions),p.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new qw(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(c){let l=c?._online.build();return{_offline:c?._offline.build(l),_online:l}})(n._componentsProvider))}var Id=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(jt.fromBase64String(e))}catch(t){throw new G(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ec=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new G(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new En(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var wd=class{constructor(e){this._methodName=e}};var Td=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new G(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new G(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}};var bd=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}};var x$=/^__.*__$/,Hw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Kr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Oo(e,this.data,t,this.fieldTransforms)}},_g=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Kr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function XN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}var zw=class n{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Eg(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(XN(this.Cu)&&x$.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Gw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Dg(e)}Qu(e,t,r,i=!1){return new zw({Cu:e,methodName:t,qu:r,path:En.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ZN(n){let e=n._freezeSettings(),t=Dg(n._databaseId);return new Gw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function k$(n,e,t,r,i,s={}){let a=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);mT("Data must be an object, but it was:",a,r);let c=eP(r,a),l,h;if(s.merge)l=new xn(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){let p=[];for(let _ of s.mergeFields){let w=Ww(e,_,t);if(!a.contains(w))throw new G(k.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);nP(p,w)||p.push(w)}l=new xn(p),h=a.fieldTransforms.filter(_=>l.covers(_.field))}else l=null,h=a.fieldTransforms;return new Hw(new vn(c),l,h)}var vg=class n extends wd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function O$(n,e,t,r){let i=n.Qu(1,e,t);mT("Data must be an object, but it was:",i,r);let s=[],a=vn.empty();Lo(r,(l,h)=>{let p=yT(e,l,t);h=nn(h);let _=i.Nu(p);if(h instanceof vg)s.push(p);else{let w=Rg(h,_);w!=null&&(s.push(p),a.set(p,w))}});let c=new xn(s);return new _g(a,c,i.fieldTransforms)}function F$(n,e,t,r,i,s){let a=n.Qu(1,e,t),c=[Ww(e,r,t)],l=[i];if(s.length%2!=0)throw new G(k.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<s.length;w+=2)c.push(Ww(e,s[w])),l.push(s[w+1]);let h=[],p=vn.empty();for(let w=c.length-1;w>=0;--w)if(!nP(h,c[w])){let C=c[w],A=l[w];A=nn(A);let N=a.Nu(C);if(A instanceof vg)h.push(C);else{let R=Rg(A,N);R!=null&&(h.push(C),p.set(C,R))}}let _=new xn(h);return new _g(p,_,a.fieldTransforms)}function Rg(n,e){if(tP(n=nn(n)))return mT("Unsupported field value:",e,n),eP(n,e);if(n instanceof wd)return(function(r,i){if(!XN(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,i){let s=[],a=0;for(let c of r){let l=Rg(c,i.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=nn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return yB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Nt.fromDate(r);return{timestampValue:ig(i.serializer,s)}}if(r instanceof Nt){let s=new Nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ig(i.serializer,s)}}if(r instanceof Td)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Id)return{bytesValue:CN(i.serializer,r._byteString)};if(r instanceof kn){let s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:oT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof bd)return(function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw c.Bu("VectorValues must only contain numeric values.");return sT(c.serializer,l)})}}}}}})(r,i);throw i.Bu(`Unsupported field value: ${pT(r)}`)})(n,e)}function eP(n,e){let t={};return rN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lo(n,(r,i)=>{let s=Rg(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function tP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Nt||n instanceof Td||n instanceof Id||n instanceof kn||n instanceof wd||n instanceof bd)}function mT(n,e,t){if(!tP(t)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(t)){let r=pT(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Ww(n,e,t){if((e=nn(e))instanceof Ec)return e._internalPath;if(typeof e=="string")return yT(n,e);throw Eg("Field path arguments must be of type string or ",n,!1,void 0,t)}var V$=new RegExp("[~\\*/\\[\\]]");function yT(n,e,t){if(e.search(V$)>=0)throw Eg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ec(...e.split("."))._internalPath}catch{throw Eg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Eg(n,e,t,r,i){let s=r&&!r.isEmpty(),a=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new G(k.INVALID_ARGUMENT,c+n+l)}function nP(n,e){return n.some(t=>t.isEqual(e))}var Ig=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new kn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Kw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(rP("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Kw=class extends Ig{data(){return super.data()}};function rP(n,e){return typeof e=="string"?yT(n,e):e instanceof Ec?e._internalPath:e._delegate._internalPath}function L$(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new G(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Qw=class{convertValue(e,t="none"){switch(Mo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Lo(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>Ge(a.doubleValue));return new bd(s)}convertGeoPoint(e){return new Td(Ge(e.latitude),Ge(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=tT(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(pd(e));default:return null}}convertTimestamp(e){let t=ki(e);return new Nt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ye.fromString(e);Le(MN(r));let i=new Xp(r.get(1),r.get(3)),s=new X(r.popFirst(5));return i.isEqual(t)||xi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function U$(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var ic=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Yw=class extends Ig{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new oc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(rP("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},oc=class extends Yw{data(e={}){return super.data(e)}},Jw=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ic(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new oc(this._firestore,this._userDataWriter,r.key,r,new ic(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new G(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{let l=new oc(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ic(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new oc(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ic(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),h=-1,p=-1;return c.type!==0&&(h=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),p=a.indexOf(c.doc.key)),{type:j$(c.type),doc:l,oldIndex:h,newIndex:p}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function j$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}var Xw=class extends Qw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Id(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,t)}};function iP(n){n=Fo(n,mg);let e=Fo(n.firestore,Vo),t=JN(e),r=new Xw(e);return L$(n._query),R$(t,n._query).then(i=>new Jw(e,r,n,i))}function sP(n,e,t,...r){n=Fo(n,kn);let i=Fo(n.firestore,Vo),s=ZN(i),a;return a=typeof(e=nn(e))=="string"||e instanceof Ec?F$(s,"updateDoc",n._key,e,t,r):O$(s,"updateDoc",n._key,e),_T(i,[a.toMutation(n._key,Mi.exists(!0))])}function oP(n){return _T(Fo(n.firestore,Vo),[new md(n._key,Mi.none())])}function aP(n,e){let t=Fo(n.firestore,Vo),r=Sg(n),i=U$(n.converter,e);return _T(t,[k$(ZN(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Mi.exists(!1))]).then(()=>r)}function _T(n,e){return(function(r,i){let s=new $r;return r.asyncQueue.enqueueAndForget(async()=>y$(await A$(r),i,s)),s.promise})(JN(n),e)}(function(e,t=!0){(function(i){Ic=i})(Up),Ao(new yr("firestore",(r,{instanceIdentifier:i,options:s})=>{let a=r.getProvider("app").getImmediate(),c=new Vo(new wI(r.getProvider("auth-internal")),new CI(r.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new G(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xp(h.options.projectId,p)})(a,i),a);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),_r(DR,"4.7.3",e),_r(DR,"4.7.3","esm2017")})();var pP="firebasestorage.googleapis.com",gP="storageBucket",B$=120*1e3,$$=600*1e3;var Xe=class n extends mr{constructor(e,t,r=0){super(vT(e),`Firebase Storage: ${t} (${vT(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return vT(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},et=(function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n})(et||{});function vT(n){return"storage/"+n}function DT(){let n="An unknown error occurred, please check the error payload for server response.";return new Xe(et.UNKNOWN,n)}function q$(n){return new Xe(et.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function H$(n){return new Xe(et.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function z$(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Xe(et.UNAUTHENTICATED,n)}function G$(){return new Xe(et.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function W$(n){return new Xe(et.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function K$(){return new Xe(et.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Q$(){return new Xe(et.CANCELED,"User canceled the upload/download.")}function Y$(n){return new Xe(et.INVALID_URL,"Invalid URL '"+n+"'.")}function J$(n){return new Xe(et.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function X$(){return new Xe(et.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+gP+"' property when initializing the app?")}function Z$(){return new Xe(et.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function e4(){return new Xe(et.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function t4(n){return new Xe(et.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ET(n){return new Xe(et.INVALID_ARGUMENT,n)}function mP(){return new Xe(et.APP_DELETED,"The Firebase app was deleted.")}function n4(n){return new Xe(et.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Nd(n,e){return new Xe(et.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Rd(n){throw new Xe(et.INTERNAL_ERROR,"Internal error: "+n)}var Er=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw J$(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(Y){Y.path.charAt(Y.path.length-1)==="/"&&(Y.path_=Y.path_.slice(0,-1))}let a="(/(.*))?$",c=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function h(Y){Y.path_=decodeURIComponent(Y.path)}let p="v[A-Za-z0-9_]+",_=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",C=new RegExp(`^https?://${_}/${p}/b/${i}/o${w}`,"i"),A={bucket:1,path:3},N=t===pP?"(?:storage.googleapis.com|storage.cloud.google.com)":t,R="([^?#]*)",O=new RegExp(`^https?://${N}/${i}/${R}`,"i"),j=[{regex:c,indices:l,postModify:s},{regex:C,indices:A,postModify:h},{regex:O,indices:{bucket:1,path:2},postModify:h}];for(let Y=0;Y<j.length;Y++){let $e=j[Y],ie=$e.regex.exec(e);if(ie){let I=ie[$e.indices.bucket],g=ie[$e.indices.path];g||(g=""),r=new n(I,g),$e.postModify(r);break}}if(r==null)throw Y$(e);return r}},IT=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function r4(n,e,t){let r=1,i=null,s=null,a=!1,c=0;function l(){return c===2}let h=!1;function p(...R){h||(h=!0,e.apply(null,R))}function _(R){i=setTimeout(()=>{i=null,n(C,l())},R)}function w(){s&&clearTimeout(s)}function C(R,...O){if(h){w();return}if(R){w(),p.call(null,R,...O);return}if(l()||a){w(),p.call(null,R,...O);return}r<64&&(r*=2);let j;c===1?(c=2,j=0):j=(r+Math.random())*1e3,_(j)}let A=!1;function N(R){A||(A=!0,w(),!h&&(i!==null?(R||(c=2),clearTimeout(i),_(0)):R||(c=1)))}return _(0),s=setTimeout(()=>{a=!0,N(!0)},t),N}function i4(n){n(!1)}function s4(n){return n!==void 0}function o4(n){return typeof n=="object"&&!Array.isArray(n)}function CT(n){return typeof n=="string"||n instanceof String}function cP(n){return AT()&&n instanceof Blob}function AT(){return typeof Blob<"u"}function uP(n,e,t,r){if(r<e)throw ET(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw ET(`Invalid value for '${n}'. Expected ${t} or less.`)}function ST(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function yP(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var bc=(function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n})(bc||{});function a4(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var wT=class{constructor(e,t,r,i,s,a,c,l,h,p,_,w=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=l,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=_,this.retry=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,A)=>{this.resolve_=C,this.reject_=A,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Tc(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let a=c=>{let l=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,h)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;let c=s.getErrorCode()===bc.NO_ERROR,l=s.getStatus();if(!c||a4(l,this.additionalRetryCodes_)&&this.retry){let p=s.getErrorCode()===bc.ABORT;r(!1,new Tc(!1,null,p));return}let h=this.successCodes_.indexOf(l)!==-1;r(!0,new Tc(h,s))})},t=(r,i)=>{let s=this.resolve_,a=this.reject_,c=i.connection;if(i.wasSuccessCode)try{let l=this.callback_(c,c.getResponse());s4(l)?s(l):s()}catch(l){a(l)}else if(c!==null){let l=DT();l.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,l)):a(l)}else if(i.canceled){let l=this.appDelete_?mP():Q$();a(l)}else{let l=K$();a(l)}};this.canceled_?t(!1,new Tc(!1,null,!0)):this.backoffId_=r4(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&i4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Tc=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function c4(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function u4(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function l4(n,e){e&&(n["X-Firebase-GMPID"]=e)}function d4(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function h4(n,e,t,r,i,s,a=!0){let c=yP(n.urlParams),l=n.url+c,h=Object.assign({},n.headers);return l4(h,e),c4(h,t),u4(h,s),d4(h,r),new wT(l,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a)}function f4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function p4(...n){let e=f4();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(AT())return new Blob(n);throw new Xe(et.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function g4(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function m4(n){if(typeof atob>"u")throw t4("base-64");return atob(n)}var Qr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Pd=class{constructor(e,t){this.data=e,this.contentType=t||null}};function y4(n,e){switch(n){case Qr.RAW:return new Pd(_P(e));case Qr.BASE64:case Qr.BASE64URL:return new Pd(vP(n,e));case Qr.DATA_URL:return new Pd(v4(e),E4(e))}throw DT()}function _P(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let s=r,a=n.charCodeAt(++t);r=65536|(s&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function _4(n){let e;try{e=decodeURIComponent(n)}catch{throw Nd(Qr.DATA_URL,"Malformed data URL.")}return _P(e)}function vP(n,e){switch(n){case Qr.BASE64:{let i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Nd(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Qr.BASE64URL:{let i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Nd(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=m4(e)}catch(i){throw i.message.includes("polyfill")?i:Nd(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var Pg=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw Nd(Qr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=I4(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function v4(n){let e=new Pg(n);return e.base64?vP(Qr.BASE64,e.rest):_4(e.rest)}function E4(n){return new Pg(n).contentType}function I4(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var Mg=class n{constructor(e,t){let r=0,i="";cP(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(cP(this.data_)){let r=this.data_,i=g4(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(AT()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(p4.apply(null,t))}else{let t=e.map(a=>CT(a)?y4(Qr.RAW,a).data:a.data_),r=0;t.forEach(a=>{r+=a.byteLength});let i=new Uint8Array(r),s=0;return t.forEach(a=>{for(let c=0;c<a.length;c++)i[s++]=a[c]}),new n(i,!0)}}uploadData(){return this.data_}};function EP(n){let e;try{e=JSON.parse(n)}catch{return null}return o4(e)?e:null}function w4(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function T4(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function IP(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function b4(n,e){return e}var Pt=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||b4}},Ng=null;function D4(n){return!CT(n)||n.length<2?n:IP(n)}function wP(){if(Ng)return Ng;let n=[];n.push(new Pt("bucket")),n.push(new Pt("generation")),n.push(new Pt("metageneration")),n.push(new Pt("name","fullPath",!0));function e(s,a){return D4(a)}let t=new Pt("name");t.xform=e,n.push(t);function r(s,a){return a!==void 0?Number(a):a}let i=new Pt("size");return i.xform=r,n.push(i),n.push(new Pt("timeCreated")),n.push(new Pt("updated")),n.push(new Pt("md5Hash",null,!0)),n.push(new Pt("cacheControl",null,!0)),n.push(new Pt("contentDisposition",null,!0)),n.push(new Pt("contentEncoding",null,!0)),n.push(new Pt("contentLanguage",null,!0)),n.push(new Pt("contentType",null,!0)),n.push(new Pt("metadata","customMetadata",!0)),Ng=n,Ng}function C4(n,e){function t(){let r=n.bucket,i=n.fullPath,s=new Er(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function A4(n,e,t){let r={};r.type="file";let i=t.length;for(let s=0;s<i;s++){let a=t[s];r[a.local]=a.xform(r,e[a.server])}return C4(r,n),r}function TP(n,e,t){let r=EP(e);return r===null?null:A4(n,r,t)}function S4(n,e,t,r){let i=EP(e);if(i===null||!CT(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let a=encodeURIComponent;return s.split(",").map(h=>{let p=n.bucket,_=n.fullPath,w="/b/"+a(p)+"/o/"+a(_),C=ST(w,t,r),A=yP({alt:"media",token:h});return C+A})[0]}function R4(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}var xg=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function bP(n){if(!n)throw DT()}function N4(n,e){function t(r,i){let s=TP(n,i,e);return bP(s!==null),s}return t}function P4(n,e){function t(r,i){let s=TP(n,i,e);return bP(s!==null),S4(s,i,n.host,n._protocol)}return t}function DP(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=G$():i=z$():t.getStatus()===402?i=H$(n.bucket):t.getStatus()===403?i=W$(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function M4(n){let e=DP(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=q$(n.path)),s.serverResponse=i.serverResponse,s}return t}function x4(n,e,t){let r=e.fullServerUrl(),i=ST(r,n.host,n._protocol),s="GET",a=n.maxOperationRetryTime,c=new xg(i,s,P4(n,t),a);return c.errorHandler=M4(e),c}function k4(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function O4(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=k4(null,e)),r}function F4(n,e,t,r,i){let s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){let j="";for(let Y=0;Y<2;Y++)j=j+Math.random().toString().slice(2);return j}let l=c();a["Content-Type"]="multipart/related; boundary="+l;let h=O4(e,r,i),p=R4(h,t),_="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+l+`\r
Content-Type: `+h.contentType+`\r
\r
`,w=`\r
--`+l+"--",C=Mg.getBlob(_,r,w);if(C===null)throw Z$();let A={name:h.fullPath},N=ST(s,n.host,n._protocol),R="POST",O=n.maxUploadRetryTime,B=new xg(N,R,N4(n,t),O);return B.urlParams=A,B.headers=a,B.body=C.uploadData(),B.errorHandler=DP(e),B}var qse=256*1024;var lP=null,TT=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=bc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=bc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=bc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Rd("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(let s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Rd("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Rd("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Rd("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Rd("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},bT=class extends TT{initXhr(){this.xhr_.responseType="text"}};function CP(){return lP?lP():new bT}var Dc=class n{constructor(e,t){this._service=e,t instanceof Er?this._location=t:this._location=Er.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new Er(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return IP(this._location.path)}get storage(){return this._service}get parent(){let e=w4(this._location.path);if(e===null)return null;let t=new Er(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw n4(e)}};function V4(n,e,t){n._throwIfRoot("uploadBytes");let r=F4(n.storage,n._location,wP(),new Mg(e,!0),t);return n.storage.makeRequestWithTokens(r,CP).then(i=>({metadata:i,ref:n}))}function L4(n){n._throwIfRoot("getDownloadURL");let e=x4(n.storage,n._location,wP());return n.storage.makeRequestWithTokens(e,CP).then(t=>{if(t===null)throw e4();return t})}function U4(n,e){let t=T4(n._location.path,e),r=new Er(n._location.bucket,t);return new Dc(n.storage,r)}function j4(n){return/^[A-Za-z]+:\/\//.test(n)}function B4(n,e){return new Dc(n,e)}function AP(n,e){if(n instanceof Md){let t=n;if(t._bucket==null)throw X$();let r=new Dc(t,t._bucket);return e!=null?AP(r,e):r}else return e!==void 0?U4(n,e):n}function $4(n,e){if(e&&j4(e)){if(n instanceof Md)return B4(n,e);throw ET("To use ref(service, url), the first argument must be a Storage instance.")}else return AP(n,e)}function dP(n,e){let t=e?.[gP];return t==null?null:Er.makeFromBucketSpec(t,n)}function q4(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:xp(i,n.app.options.projectId))}var Md=class{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=pP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=B$,this._maxUploadRetryTime=$$,this._requests=new Set,i!=null?this._bucket=Er.makeFromBucketSpec(i,this._host):this._bucket=dP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Er.makeFromBucketSpec(this._url,e):this._bucket=dP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){uP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){uP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Dc(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new IT(mP());{let a=h4(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){let[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}},hP="@firebase/storage",fP="0.13.2";var SP="storage";function RP(n,e,t){return n=nn(n),V4(n,e,t)}function NP(n){return n=nn(n),L4(n)}function PP(n,e){return n=nn(n),$4(n,e)}function MP(n=jp(),e){n=nn(n);let r=Lp(n,SP).getImmediate({identifier:e}),i=Mp("storage");return i&&H4(r,...i),r}function H4(n,e,t,r={}){q4(n,e,t,r)}function z4(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Md(t,r,i,e,Up)}function G4(){Ao(new yr(SP,z4,"PUBLIC").setMultipleInstances(!0)),_r(hP,fP,""),_r(hP,fP,"esm2017")}G4();var W4={apiKey:"AIzaSyBVEG3n4-C4FVtbJ9Q1giz24zN9qOkIK2Q",authDomain:"chanmurarestaurantui.firebaseapp.com",projectId:"chanmurarestaurantui",storageBucket:"chanmurarestaurantui.firebasestorage.app",messagingSenderId:"31518285804",appId:"1:31518285804:web:5a2c2d2e146987d533eac9"},xP=uI(W4),kg=YN(xP),K4=MP(xP),Cc=class n{async uploadImage(e){let t=`menu-images/${Date.now()}-${e.name}`,r=PP(K4,t);return await RP(r,e),await NP(r)}async addMenuItem(e){await aP(gT(kg,"menuItems"),e)}async getMenuItems(){return(await iP(gT(kg,"menuItems"))).docs.map(t=>V({id:t.id},t.data()))}async updateMenuItem(e,t){let r=Sg(kg,"menuItems",e);await sP(r,t)}async deleteMenuItem(e){let t=Sg(kg,"menuItems",e);await oP(t),console.log("Menu item deleted:",e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};function Q4(n,e){n&1&&(P(0,"p",13),L(1,"Out of Stock"),M())}function Y4(n,e){if(n&1){let t=Fr();P(0,"div",3)(1,"div",4),gn(2,"img",5),P(3,"div",6)(4,"h5",7),L(5),M(),P(6,"p",8),L(7),M(),P(8,"div",9)(9,"button",10),Oe("click",function(){let i=He(t).$implicit,s=Ve();return ze(s.decreaseQuantity(i))}),L(10,"-"),M(),P(11,"span"),L(12),M(),P(13,"button",11),Oe("click",function(){let i=He(t).$implicit,s=Ve();return ze(s.increaseQuantity(i))}),L(14,"+"),M()(),pn(15,Q4,2,0,"p",12),M()()()}if(n&2){let t=e.$implicit;K(2),Ue("src",t.imageUrl,ts)("alt",t.name),K(3),Yt(t.name),K(2),Mn("Price: \u20B9",t.price),K(2),Ue("disabled",(t.quantityAvailable||0)===0),K(3),Yt(t.quantity||0),K(),Ue("disabled",(t.quantityAvailable||0)===0),K(2),Ue("ngIf",t.quantityAvailable===0)}}var Og=class n{constructor(e,t){this.cartService=e;this.firebaseService=t}menuItems=Ct([]);async ngOnInit(){try{let e=await this.firebaseService.getMenuItems();this.menuItems.set(e)}catch(e){console.error("Load items error",e)}}increaseQuantity(e){e.quantity=(e.quantity||0)+1,this.cartService.addToCart(e,1)}decreaseQuantity(e){(e.quantity||0)<=0||(e.quantity=e.quantity-1,this.cartService.addToCart(e,-1))}static \u0275fac=function(t){return new(t||n)(Q(Ur),Q(Cc))};static \u0275cmp=fn({type:n,selectors:[["app-menu-list"]],decls:5,vars:1,consts:[[1,"container","mt-3"],[1,"row"],["class","col-md-4 mb-3",4,"ngFor","ngForOf"],[1,"col-md-4","mb-3"],[1,"card","h-100","p-2"],[1,"card-img-top",3,"src","alt"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"d-flex","align-items-center"],[1,"btn","btn-outline-secondary","btn-sm","me-2",3,"click","disabled"],[1,"btn","btn-outline-secondary","btn-sm","ms-2",3,"click","disabled"],["class","card-text outofStock",4,"ngIf"],[1,"card-text","outofStock"]],template:function(t,r){t&1&&(P(0,"div",0)(1,"h3"),L(2,"Menu"),M(),P(3,"div",1),pn(4,Y4,16,8,"div",2),M()()),t&2&&(K(4),Ue("ngForOf",r.menuItems()))},dependencies:[Ai,ss,vo],styles:[".card[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 2px 6px #0000001a}.outofStock[_ngcontent-%COMP%]{color:red;font-weight:700}"]})};var qP=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(Q(Or),Q(tn))};static \u0275dir=Ke({type:n})}return n})(),jg=(()=>{class n extends qP{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Nn(n)))(i||n)}})();static \u0275dir=Ke({type:n,features:[Pn]})}return n})(),Ld=new z("");var J4={provide:Ld,useExisting:wn(()=>gs),multi:!0};function X4(){let n=mn()?mn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Z4=new z(""),gs=(()=>{class n extends qP{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!X4())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(Q(Or),Q(tn),Q(Z4,8))};static \u0275dir=Ke({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Oe("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},standalone:!1,features:[Ci([J4]),Pn]})}return n})();function eq(n){return n==null||HP(n)===0}function HP(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var OT=new z(""),tq=new z("");function nq(n){return e=>{let t=e.value?.length??HP(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function rq(n){if(!n)return RT;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(eq(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function RT(n){return null}function zP(n){return n!=null}function GP(n){return ns(n)?Ze(n):n}function WP(n){let e={};return n.forEach(t=>{e=t!=null?V(V({},e),t):e}),Object.keys(e).length===0?null:e}function KP(n,e){return e.map(t=>t(n))}function iq(n){return!n.validate}function QP(n){return n.map(e=>iq(e)?e:t=>e.validate(t))}function sq(n){if(!n)return null;let e=n.filter(zP);return e.length==0?null:function(t){return WP(KP(t,e))}}function YP(n){return n!=null?sq(QP(n)):null}function oq(n){if(!n)return null;let e=n.filter(zP);return e.length==0?null:function(t){let r=KP(t,e).map(GP);return ky(r).pipe(Be(WP))}}function JP(n){return n!=null?oq(QP(n)):null}function OP(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function aq(n){return n._rawValidators}function cq(n){return n._rawAsyncValidators}function NT(n){return n?Array.isArray(n)?n:[n]:[]}function Vg(n,e){return Array.isArray(n)?n.includes(e):n===e}function FP(n,e){let t=NT(e);return NT(n).forEach(i=>{Vg(t,i)||t.push(i)}),t}function VP(n,e){return NT(e).filter(t=>!Vg(n,t))}var Lg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=YP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=JP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},PT=class extends Lg{name;get formDirective(){return null}get path(){return null}},Vd=class extends Lg{_parent=null;name=null;valueAccessor=null},MT=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var Rc=(()=>{class n extends MT{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Q(Vd,2))};static \u0275dir=Ke({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&qf("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Pn]})}return n})();var xd="VALID",Fg="INVALID",Ac="PENDING",kd="DISABLED",jo=class{},Ug=class extends jo{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Od=class extends jo{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Fd=class extends jo{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Sc=class extends jo{status;source;constructor(e,t){super(),this.status=e,this.source=t}};var xT=class extends jo{source;constructor(e){super(),this.source=e}};function uq(n){return(Bg(n)?n.validators:n)||null}function lq(n){return Array.isArray(n)?YP(n):n||null}function dq(n,e){return(Bg(e)?e.asyncValidators:n)||null}function hq(n){return Array.isArray(n)?JP(n):n||null}function Bg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var kT=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return gt(this.statusReactive)}set status(e){gt(()=>this.statusReactive.set(e))}_status=Nl(()=>this.statusReactive());statusReactive=Ct(void 0);get valid(){return this.status===xd}get invalid(){return this.status===Fg}get pending(){return this.status==Ac}get disabled(){return this.status===kd}get enabled(){return this.status!==kd}errors;get pristine(){return gt(this.pristineReactive)}set pristine(e){gt(()=>this.pristineReactive.set(e))}_pristine=Nl(()=>this.pristineReactive());pristineReactive=Ct(!0);get dirty(){return!this.pristine}get touched(){return gt(this.touchedReactive)}set touched(e){gt(()=>this.touchedReactive.set(e))}_touched=Nl(()=>this.touchedReactive());touchedReactive=Ct(!1);get untouched(){return!this.touched}_events=new nt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(FP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(FP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(VP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(VP(e,this._rawAsyncValidators))}hasValidator(e){return Vg(this._rawValidators,e)}hasAsyncValidator(e){return Vg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(fe(V({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Fd(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Fd(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(fe(V({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Od(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Od(!0,r))}markAsPending(e={}){this.status=Ac;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Sc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(fe(V({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=kd,this.errors=null,this._forEachChild(i=>{i.disable(fe(V({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ug(this.value,r)),this._events.next(new Sc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(fe(V({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=xd,this._forEachChild(r=>{r.enable(fe(V({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(fe(V({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===xd||this.status===Ac)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ug(this.value,t)),this._events.next(new Sc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(fe(V({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?kd:xd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ac,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=GP(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Sc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new st,this.statusChanges=new st}_calculateStatus(){return this._allControlsDisabled()?kd:this.errors?Fg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ac)?Ac:this._anyControlsHaveStatus(Fg)?Fg:xd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Od(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Fd(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Bg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=lq(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=hq(this._rawAsyncValidators)}};var XP=new z("",{factory:()=>FT}),FT="always";function fq(n,e){return[...e.path,n]}function pq(n,e,t=FT){mq(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),yq(n,e),vq(n,e),_q(n,e),gq(n,e)}function LP(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function gq(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function mq(n,e){let t=aq(n);e.validator!==null?n.setValidators(OP(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=cq(n);e.asyncValidator!==null?n.setAsyncValidators(OP(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();LP(e._rawValidators,i),LP(e._rawAsyncValidators,i)}function yq(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&ZP(n,e)})}function _q(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&ZP(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function ZP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function vq(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Eq(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Iq(n){return Object.getPrototypeOf(n.constructor)===jg}function wq(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===gs?t=s:Iq(s)?r=s:i=s}),i||r||t||null}function UP(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function jP(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Tq=class extends kT{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(uq(t),dq(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Bg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(jP(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new xT(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){UP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){UP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){jP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var bq={provide:Vd,useExisting:wn(()=>Bo)},BP=Promise.resolve(),Bo=(()=>{class n extends Vd{_changeDetectorRef;callSetDisabledState;control=new Tq;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new st;constructor(t,r,i,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=wq(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Eq(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){pq(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){BP.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Fa(r);BP.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?fq(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(Q(PT,9),Q(OT,10),Q(tq,10),Q(Ld,10),Q(rs,8),Q(XP,8))};static \u0275dir=Ke({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Ci([bq]),Pn,kr]})}return n})();var Dq={provide:Ld,useExisting:wn(()=>VT),multi:!0},VT=(()=>{class n extends jg{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Nn(n)))(i||n)}})();static \u0275dir=Ke({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Oe("input",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Ci([Dq]),Pn]})}return n})();var Cq={provide:Ld,useExisting:wn(()=>$g),multi:!0};function eM(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Aq(n){return n.split(":")[0]}var $g=(()=>{class n extends jg{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=x(Di).injector;destroyRef=x(ur);cdr=x(rs);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Ff({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=eM(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=Aq(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Nn(n)))(i||n)}})();static \u0275dir=Ke({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Oe("change",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ci([Cq]),Pn]})}return n})(),tM=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(eM(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(Q(tn),Q(Or),Q($g,9))};static \u0275dir=Ke({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),Sq={provide:Ld,useExisting:wn(()=>nM),multi:!0};function $P(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Rq(n){return n.split(":")[0]}var nM=(()=>{class n extends jg{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,a)=>{s._setSelected(i.indexOf(a.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let a=s;for(let c=0;c<a.length;c++){let l=a[c],h=this._getOptionValue(l.value);i.push(h)}}else{let a=r.options;for(let c=0;c<a.length;c++){let l=a[c];if(l.selected){let h=this._getOptionValue(l.value);i.push(h)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=Rq(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Nn(n)))(i||n)}})();static \u0275dir=Ke({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Oe("change",function(a){return i.onChange(a.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ci([Sq]),Pn]})}return n})(),rM=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue($P(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue($P(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(Q(tn),Q(Or),Q(nM,9))};static \u0275dir=Ke({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function Nq(n){return typeof n=="number"?n:parseInt(n,10)}var iM=(()=>{class n{_validator=RT;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):RT,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ke({type:n,features:[kr]})}return n})();var Pq={provide:OT,useExisting:wn(()=>LT),multi:!0},LT=(()=>{class n extends iM{maxlength;inputName="maxlength";normalizeInput=t=>Nq(t);createValidator=t=>nq(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Nn(n)))(i||n)}})();static \u0275dir=Ke({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&_o("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[Ci([Pq]),Pn]})}return n})(),Mq={provide:OT,useExisting:wn(()=>UT),multi:!0},UT=(()=>{class n extends iM{pattern;inputName="pattern";normalizeInput=t=>t;createValidator=t=>rq(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Nn(n)))(i||n)}})();static \u0275dir=Ke({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&_o("pattern",i._enabled?i.pattern:null)},inputs:{pattern:"pattern"},standalone:!1,features:[Ci([Mq]),Pn]})}return n})();var xq=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=hr({type:n});static \u0275inj=Tn({})}return n})();var ms=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:XP,useValue:t.callSetDisabledState??FT}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=hr({type:n});static \u0275inj=Tn({imports:[xq]})}return n})();var Nc=class n{orders=[];nextId=1;createOrder(e,t,r){let i=e.map(c=>({menuItem:c.menuItem,quantity:c.quantity,totalPrice:c.totalPrice})),s=i.reduce((c,l)=>c+l.totalPrice,0),a={id:this.nextId++,items:i,totalAmount:s,status:"Pending",tableNumber:t,customerName:r,orderTime:new Date};return this.orders.push(a),a}getOrders(){return this.orders}updateStatus(e,t){let r=this.orders.find(i=>i.id===e);r&&(r.status=t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};function kq(n,e){n&1&&(P(0,"div"),L(1,"Your cart is empty"),M())}function Oq(n,e){if(n&1){let t=Fr();P(0,"tr")(1,"td"),L(2),M(),P(3,"td"),L(4),M(),P(5,"td"),L(6),M(),P(7,"td"),L(8),M(),P(9,"td")(10,"div",6)(11,"button",7),Oe("click",function(){let i=He(t).$implicit,s=Ve(2);return ze(s.decreaseQuantity(i.menuItem))}),L(12,"-"),M(),P(13,"span"),L(14),M(),P(15,"button",8),Oe("click",function(){let i=He(t).$implicit,s=Ve(2);return ze(s.increaseQuantity(i.menuItem))}),L(16,"+"),M()()(),P(17,"td")(18,"button",9),Oe("click",function(){let i=He(t).$implicit,s=Ve(2);return ze(s.remove(i))}),L(19,"Remove"),M()()()}if(n&2){let t=e.$implicit;K(2),Yt(t.menuItem.name),K(2),Yt(t.menuItem.price),K(2),Yt(t.quantity),K(2),Yt(t.totalPrice),K(6),Yt(t.quantity||0)}}function Fq(n,e){if(n&1&&(P(0,"table",4)(1,"thead")(2,"tr")(3,"th"),L(4,"Name"),M(),P(5,"th"),L(6,"Price"),M(),P(7,"th"),L(8,"Quantity"),M(),P(9,"th"),L(10,"Total"),M(),P(11,"th"),L(12,"#"),M(),P(13,"th"),L(14,"Actions"),M()()(),P(15,"tbody"),pn(16,Oq,20,5,"tr",5),M()()),n&2){let t=Ve();K(16),Ue("ngForOf",t.cartItems)}}function Vq(n,e){if(n&1&&(P(0,"h4"),L(1),M()),n&2){let t=Ve();K(),Mn("Total Amount: \u20B9",t.totalAmount)}}function Lq(n,e){if(n&1){let t=Fr();P(0,"div")(1,"label"),L(2,"Purchaser Name : "),M(),P(3,"input",10),St("ngModelChange",function(i){He(t);let s=Ve();return Vt(s.purchaserName,i)||(s.purchaserName=i),ze(i)}),M(),P(4,"label"),L(5,"Mobile Number : "),M(),P(6,"input",11),St("ngModelChange",function(i){He(t);let s=Ve();return Vt(s.mobileNumber,i)||(s.mobileNumber=i),ze(i)}),M()()}if(n&2){let t=Ve();K(3),At("ngModel",t.purchaserName),K(3),At("ngModel",t.mobileNumber)}}function Uq(n,e){if(n&1){let t=Fr();P(0,"button",12),Oe("click",function(){He(t);let i=Ve();return ze(i.placeOrder())}),L(1,"Place Order"),M()}}var qg=class n{constructor(e,t){this.cartService=e;this.orderService=t}cartItems=[];purchaserName="";mobileNumber="";totalAmount=0;ngOnInit(){this.cartService.cartItems$.subscribe(e=>{this.cartItems=e,this.totalAmount=this.cartItems.reduce((t,r)=>t+r.totalPrice,0)})}remove(e){e.menuItem.id&&this.cartService.removeFromCart(e.menuItem.id)}placeOrder(){if(!this.cartItems.length){alert("Cart is empty");return}this.orderService.createOrder(this.cartItems),this.checkout(),this.cartService.clearCart()}increaseQuantity(e){e.quantity=(e.quantity||0)+1,this.cartService.addToCart(e,1)}decreaseQuantity(e){(e.quantity||0)<=0||(e.quantity=e.quantity-1,this.cartService.addToCart(e,-1))}checkout(){if(this.cartItems.length===0)return;let e={id:Date.now(),items:this.cartItems,totalAmount:this.totalAmount,status:"Pending",orderTime:new Date};console.log("Order:",e),this.cartService.clearCart(),this.purchaserName="",this.mobileNumber="",this.printInvoice(e)}printInvoice(e){let t=window.open("","_blank","width=600,height=800");t.document.write(`
    <html>
    <head>
      <title>Invoice</title>
      <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
      </style>
    </head>
    <body>
      <h2>Naveen's Delhi Malai Chaap Resturant Invoice</h2>
       <p>Purchaser Name: ${this.purchaserName}</p>
        <p>Mobile Number: ${this.mobileNumber}</p>
      <p>Order ID: ${e.id}</p>
      <p>Order Time: ${e.orderTime}</p>
      <table>
        <thead>
          <tr>
            <th>Item</th>
            <th>Qty</th>
            <th>Price</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody>
          ${e.items.map(r=>`
            <tr>
              <td>${r.menuItem.name}</td>
              <td>${r.quantity}</td>
              <td>\u20B9${r.menuItem.price}</td>
              <td>\u20B9${r.totalPrice}</td>
            </tr>`).join("")}
        </tbody>
      </table>
      <h3>Total: \u20B9${e.totalAmount}</h3>
      <button onclick="window.print()">Print Invoice</button>
    </body>
    </html>
  `),t.document.close()}static \u0275fac=function(t){return new(t||n)(Q(Ur),Q(Nc))};static \u0275cmp=fn({type:n,selectors:[["app-cart"]],decls:7,vars:5,consts:[[1,"my-3"],[4,"ngIf"],["class","table table-striped",4,"ngIf"],["class","btn btn-success",3,"click",4,"ngIf"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],[1,"btn","btn-outline-secondary","btn-sm","me-2",3,"click"],[1,"btn","btn-outline-secondary","btn-sm","ms-2",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click"],["type","text","placeholder","Enter purchaser Name",1,"form-control","w-25","mb-3",3,"ngModelChange","ngModel"],["type","tel","maxlength","10","pattern","[0-9]{10}","placeholder","Enter mobile number",1,"form-control","w-25","mb-3",3,"ngModelChange","ngModel"],[1,"btn","btn-success",3,"click"]],template:function(t,r){t&1&&(P(0,"h2",0),L(1,"Cart"),M(),pn(2,kq,2,0,"div",1)(3,Fq,17,1,"table",2)(4,Vq,2,1,"h4",1)(5,Lq,7,2,"div",1)(6,Uq,2,0,"button",3)),t&2&&(K(2),Ue("ngIf",r.cartItems.length===0),K(),Ue("ngIf",r.cartItems.length>0),K(),Ue("ngIf",r.cartItems.length>0),K(),Ue("ngIf",r.cartItems.length>0),K(),Ue("ngIf",r.cartItems.length>0))},dependencies:[Ai,ss,vo,ms,gs,Rc,LT,UT,Bo],styles:[".table[_ngcontent-%COMP%]{margin-top:20px}"]})};var Hg=class n{constructor(e,t){this.cartService=e;this.orderService=t}tableNumber="";customerName="";placeTableOrder(){let e=this.cartService.cartItems.getValue();if(!e.length){alert("Cart is empty");return}this.orderService.createOrder(e,this.tableNumber,this.customerName),this.cartService.clearCart(),alert("Table order placed!"),this.tableNumber="",this.customerName=""}static \u0275fac=function(t){return new(t||n)(Q(Ur),Q(Nc))};static \u0275cmp=fn({type:n,selectors:[["app-table-order"]],decls:12,vars:2,consts:[[1,"my-3"],[1,"mb-3"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click"]],template:function(t,r){t&1&&(P(0,"h2",0),L(1,"Table Order"),M(),P(2,"div",1)(3,"label"),L(4,"Table Number"),M(),P(5,"input",2),St("ngModelChange",function(s){return Vt(r.tableNumber,s)||(r.tableNumber=s),s}),M()(),P(6,"div",1)(7,"label"),L(8,"Customer Name"),M(),P(9,"input",2),St("ngModelChange",function(s){return Vt(r.customerName,s)||(r.customerName=s),s}),M()(),P(10,"button",3),Oe("click",function(){return r.placeTableOrder()}),L(11,"Place Table Order"),M()),t&2&&(K(5),At("ngModel",r.tableNumber),K(4),At("ngModel",r.customerName))},dependencies:[ms,gs,Rc,Bo],styles:["input[_ngcontent-%COMP%]{max-width:300px}"]})};function jq(n,e){if(n&1&&(P(0,"div",14)(1,"p",22),L(2,"Preview:"),M(),gn(3,"img",23),M()),n&2){let t=Ve();K(3),Ue("src",t.previewImage,ts)}}function Bq(n,e){if(n&1&&gn(0,"img",28),n&2){let t=Ve().$implicit;Ue("alt",eE(t.name))("src",t.imageUrl,ts)}}function $q(n,e){if(n&1){let t=Fr();P(0,"tr")(1,"td"),pn(2,Bq,1,3,"img",24),M(),P(3,"td"),L(4),M(),P(5,"td"),L(6),M(),P(7,"td"),L(8),M(),P(9,"td"),L(10),M(),P(11,"td")(12,"button",25),Oe("click",function(){let i=He(t).$implicit,s=Ve();return ze(s.decreaseStock(i,1))}),L(13,"-1"),M(),P(14,"button",26),Oe("click",function(){let i=He(t).$implicit,s=Ve();return ze(s.editItem(i))}),L(15,"Edit"),M(),P(16,"button",27),Oe("click",function(){let i=He(t).$implicit,s=Ve();return ze(s.deleteItem(i))}),L(17,"Delete"),M()()()}if(n&2){let t=e.$implicit;K(2),Ue("ngIf",t.imageUrl),K(2),Yt(t.name),K(2),Mn("\u20B9",t.price),K(2),Yt(t.quantityAvailable),K(2),Yt(t.category)}}function qq(n,e){if(n&1){let t=Fr();P(0,"div",29)(1,"div",30)(2,"h4"),L(3,"Edit Item"),M(),P(4,"div",31)(5,"label"),L(6,"Name"),M(),P(7,"input",32),St("ngModelChange",function(i){He(t);let s=Ve();return Vt(s.selectedItem.name,i)||(s.selectedItem.name=i),ze(i)}),M()(),P(8,"div",31)(9,"label"),L(10,"Price"),M(),P(11,"input",33),St("ngModelChange",function(i){He(t);let s=Ve();return Vt(s.selectedItem.price,i)||(s.selectedItem.price=i),ze(i)}),M()(),P(12,"div",31)(13,"label"),L(14,"Quantity Available"),M(),P(15,"input",33),St("ngModelChange",function(i){He(t);let s=Ve();return Vt(s.selectedItem.quantityAvailable,i)||(s.selectedItem.quantityAvailable=i),ze(i)}),M()(),P(16,"div",31)(17,"input",15),Oe("change",function(i){He(t);let s=Ve();return ze(s.onFileSelected(i))}),M()(),P(18,"div",31)(19,"p",22),L(20,"Preview:"),M(),gn(21,"img",23),M(),P(22,"div",31)(23,"label"),L(24,"Category"),M(),P(25,"select",34),St("ngModelChange",function(i){He(t);let s=Ve();return Vt(s.selectedItem.category,i)||(s.selectedItem.category=i),ze(i)}),P(26,"option",10),L(27,"Veg"),M(),P(28,"option",11),L(29,"Non-Veg"),M()()(),P(30,"div",31)(31,"label"),L(32,"Availability"),M(),P(33,"select",34),St("ngModelChange",function(i){He(t);let s=Ve();return Vt(s.selectedItem.isAvailable,i)||(s.selectedItem.isAvailable=i),ze(i)}),P(34,"option",35),L(35,"Available"),M(),P(36,"option",35),L(37,"Not Available"),M()()(),P(38,"button",36),Oe("click",function(){He(t);let i=Ve();return ze(i.updateItem())}),L(39,"Update"),M(),P(40,"button",37),Oe("click",function(){He(t);let i=Ve();return ze(i.cancelEdit())}),L(41,"Cancel"),M()()()}if(n&2){let t=Ve();K(7),At("ngModel",t.selectedItem.name),K(4),At("ngModel",t.selectedItem.price),K(4),At("ngModel",t.selectedItem.quantityAvailable),K(6),Ue("src",t.selectedItem.imageUrl,ts),K(4),At("ngModel",t.selectedItem.category),K(8),At("ngModel",t.selectedItem.isAvailable),K(),Ue("value",!0),K(2),Ue("value",!1)}}var zg=class n{constructor(e){this.firebaseService=e;this.loadItems()}menuItems=Ct([]);selectedItem=null;newItem={name:"",description:"",price:0,category:"",quantityAvailable:0,imageUrl:""};selectedFile=null;previewImage=null;loading=Ct(!1);async loadItems(){try{let e=await this.firebaseService.getMenuItems();this.menuItems.set(e)}catch(e){console.error("Load items error",e)}}onFileSelected(e){if(!e?.target?.files?.length)return;this.selectedFile=e.target.files[0];let t=new FileReader;t.onload=()=>{this.previewImage=t.result,this.newItem.imageUrl=this.previewImage},t.readAsDataURL(this.selectedFile)}async addMenuItem(){if(!this.newItem.name||!this.newItem.price||this.newItem.quantityAvailable==null){alert("Please fill name, price and quantity");return}this.loading.set(!0);try{let e=this.newItem.imageUrl||"";console.log("Image URL:",e);let t={name:this.newItem.name,description:this.newItem.description||"",price:Number(this.newItem.price),category:this.newItem.category||"",imageUrl:e,quantityAvailable:Number(this.newItem.quantityAvailable),isAvailable:!0,quantity:0};await this.firebaseService.addMenuItem(t),this.newItem={name:"",description:"",price:0,category:"",quantityAvailable:0,imageUrl:""},this.selectedFile=null,this.previewImage=null,await this.loadItems()}catch(e){console.error("Add item error",e),alert("Failed to add item")}finally{this.loading.set(!1)}}async deleteItem(e){e.id&&confirm(`Delete "${e.name}"?`)&&(await this.firebaseService.deleteMenuItem(e.id),await this.loadItems())}editItem(e){this.selectedItem=V({},e)}cancelEdit(){this.selectedItem=null,this.previewImage=null}async updateItem(){!this.selectedItem||!this.selectedItem.id||(this.newItem.imageUrl&&(this.selectedItem.imageUrl=this.newItem.imageUrl),await this.firebaseService.updateMenuItem(this.selectedItem.id,this.selectedItem),alert("Item updated successfully!"),this.selectedItem=null,this.newItem={name:"",description:"",price:0,category:"",quantityAvailable:0,imageUrl:""},this.selectedFile=null,this.previewImage=null,this.loadItems())}async decreaseStock(e,t=1){if(!e.id)return;let r=Math.max(0,(e.quantityAvailable||0)-t);await this.firebaseService.updateMenuItem(e.id,{quantityAvailable:r}),await this.loadItems()}static \u0275fac=function(t){return new(t||n)(Q(Cc))};static \u0275cmp=fn({type:n,selectors:[["app-admin-dashboard"]],decls:49,vars:10,consts:[[1,"admin","container","mt-4"],[1,"card","p-3","mb-4"],[1,"row","g-2"],[1,"col-md-4"],["name","name","placeholder","Name",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-2"],["type","number","placeholder","Enter Price","name","price",1,"form-control",3,"ngModelChange","ngModel"],["type","number","placeholder","Enter Quantity","name","quantityAvailable",1,"form-control",3,"ngModelChange","ngModel"],["name","category",1,"form-control",3,"ngModelChange","ngModel"],["value","","disabled",""],["value","Veg"],["value","Non-Veg"],[1,"col-md-12","mt-2"],["name","desc","placeholder","Description",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-6","mt-2"],["type","file","accept","image/*",1,"form-control",3,"change"],["class","col-md-6 mt-2",4,"ngIf"],[1,"col-md-12","mt-3","text-end"],[1,"btn","btn-primary",3,"click","disabled"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],["class","card mt-3",4,"ngIf"],[1,"mb-1"],["alt","preview",1,"img-preview",3,"src"],["width","60",3,"src","alt",4,"ngIf"],[1,"btn","btn-sm","btn-warning","me-1",3,"click"],[1,"btn","btn-sm","btn-primary","me-1",3,"click"],[1,"btn","btn-sm","btn-danger","me-1",3,"click"],["width","60",3,"src","alt"],[1,"card","mt-3"],[1,"card-body"],[1,"mb-2"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["type","number",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],[3,"value"],[1,"btn","btn-success","me-2",3,"click"],[1,"btn","btn-secondary",3,"click"]],template:function(t,r){t&1&&(P(0,"div",0)(1,"h2"),L(2,"Admin Dashboard"),M(),P(3,"div",1)(4,"h5"),L(5,"Add / Upload Menu Item"),M(),P(6,"div",2)(7,"div",3)(8,"input",4),St("ngModelChange",function(s){return Vt(r.newItem.name,s)||(r.newItem.name=s),s}),M()(),P(9,"div",5)(10,"input",6),Oe("ngModelChange",function(s){return r.newItem.price=s}),M()(),P(11,"div",5)(12,"input",7),Oe("ngModelChange",function(s){return r.newItem.quantityAvailable=s}),M()(),P(13,"div",5)(14,"select",8),St("ngModelChange",function(s){return Vt(r.newItem.category,s)||(r.newItem.category=s),s}),P(15,"option",9),L(16,"Select Category"),M(),P(17,"option",10),L(18,"Veg"),M(),P(19,"option",11),L(20,"Non-Veg"),M()()(),P(21,"div",12)(22,"textarea",13),St("ngModelChange",function(s){return Vt(r.newItem.description,s)||(r.newItem.description=s),s}),M()(),P(23,"div",14)(24,"input",15),Oe("change",function(s){return r.onFileSelected(s)}),M()(),pn(25,jq,4,1,"div",16),P(26,"div",17)(27,"button",18),Oe("click",function(){return r.addMenuItem()}),L(28),M()()()(),P(29,"h5"),L(30,"Menu Items"),M(),P(31,"table",19)(32,"thead")(33,"tr")(34,"th"),L(35,"Image"),M(),P(36,"th"),L(37,"Name"),M(),P(38,"th"),L(39,"Price"),M(),P(40,"th"),L(41,"Qty"),M(),P(42,"th"),L(43,"Category"),M(),P(44,"th"),L(45,"Actions"),M()()(),P(46,"tbody"),pn(47,$q,18,5,"tr",20),M()()(),pn(48,qq,42,8,"div",21)),t&2&&(K(8),At("ngModel",r.newItem.name),K(2),Ue("ngModel",r.newItem.price===0?"":r.newItem.price),K(2),Ue("ngModel",r.newItem.quantityAvailable===0?"":r.newItem.quantityAvailable),K(2),At("ngModel",r.newItem.category),K(8),At("ngModel",r.newItem.description),K(3),Ue("ngIf",r.previewImage),K(2),Ue("disabled",r.loading()),K(),Mn(" ",r.loading()?"Saving...":"Add Menu Item"," "),K(19),Ue("ngForOf",r.menuItems()),K(),Ue("ngIf",r.selectedItem))},dependencies:[Ai,ss,vo,ms,tM,rM,gs,VT,$g,Rc,Bo],styles:[".admin[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 2px 6px #0000000f}.img-preview[_ngcontent-%COMP%]{max-width:120px;border:1px solid #ddd;border-radius:6px;object-fit:cover}input[type=number][_ngcontent-%COMP%]::placeholder{opacity:1!important}"]})};var oM=[{path:"",redirectTo:"menu",pathMatch:"full"},{path:"menu",component:Og},{path:"cart",component:qg},{path:"table-order",component:Hg},{path:"admin",component:zg},{path:"**",redirectTo:"menu"}];var Gg=class n{constructor(e){this.cartService=e}title="Chanmura";cartCount=0;ngOnInit(){this.cartService.cartCount$.subscribe(e=>{this.cartCount=e})}static \u0275fac=function(t){return new(t||n)(Q(Ur))};static \u0275cmp=fn({type:n,selectors:[["app-root"]],decls:21,vars:1,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-primary"],[1,"container-fluid"],["routerLink","/",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto"],[1,"nav-item"],["routerLink","/menu","routerLinkActive","active",1,"nav-link"],["routerLink","/cart","routerLinkActive","active",1,"nav-link"],[1,"badge","bg-danger","ms-1"],["routerLink","/admin","routerLinkActive","active",1,"nav-link"],[1,"container","mt-4"]],template:function(t,r){t&1&&(P(0,"nav",0)(1,"div",1)(2,"a",2),L(3,"Naveen's Delhi Malai Chaap Resturant"),M(),P(4,"button",3),gn(5,"span",4),M(),P(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),L(10,"Menu"),M()(),P(11,"li",7)(12,"a",9),L(13," Cart "),P(14,"span",10),L(15),M()()(),P(16,"li",7)(17,"a",11),L(18,"Admin Dashboard"),M()()()()()(),P(19,"div",12),gn(20,"router-outlet"),M()),t&2&&(K(15),Mn(" ",r.cartCount," "))},dependencies:[Zl,Ja,qE],encapsulation:2})};var aM=()=>{};var lM=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Hq=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],a=n[t++],c=n[t++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},Wg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],a=i+1<n.length,c=a?n[i+1]:0,l=i+2<n.length,h=l?n[i+2]:0,p=s>>2,_=(s&3)<<4|c>>4,w=(c&15)<<2|h>>6,C=h&63;l||(C=64,a||(w=64)),r.push(t[p],t[_],t[w],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(lM(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Hq(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let h=i<n.length?t[n.charAt(i)]:64;++i;let _=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||h==null||_==null)throw new $T;let w=s<<2|c>>4;if(r.push(w),h!==64){let C=c<<4&240|h>>2;if(r.push(C),_!==64){let A=h<<6&192|_;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},$T=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},zq=function(n){let e=lM(n);return Wg.encodeByteArray(e,!0)},jd=function(n){return zq(n).replace(/\./g,"")},Kg=function(n){try{return Wg.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function HT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Gq=()=>HT().__FIREBASE_DEFAULTS__,Wq=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Kq=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Kg(n[1]);return e&&JSON.parse(e)},zT=()=>{try{return aM()||Gq()||Wq()||Kq()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},dM=n=>{var e,t;return(t=(e=zT())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},hM=n=>{let e=dM(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},GT=()=>{var n;return(n=zT())===null||n===void 0?void 0:n.config},fM=n=>{var e;return(e=zT())===null||e===void 0?void 0:e[`_${n}`]};var $o=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Pc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function WT(n){return(await fetch(n,{credentials:"include"})).ok}function pM(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[jd(JSON.stringify(t)),jd(JSON.stringify(a)),""].join(".")}var Ud={};function Qq(){let n={prod:[],emulator:[]};for(let e of Object.keys(Ud))Ud[e]?n.emulator.push(e):n.prod.push(e);return n}function Yq(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var cM=!1;function KT(n,e){if(typeof window>"u"||typeof document>"u"||!Pc(window.location.host)||Ud[n]===e||Ud[n]||cM)return;Ud[n]=e;function t(w){return`__firebase__banner__${w}`}let r="__firebase__banner",s=Qq().prod.length>0;function a(){let w=document.getElementById(r);w&&w.remove()}function c(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function l(w,C){w.setAttribute("width","24"),w.setAttribute("id",C),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function h(){let w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{cM=!0,a()},w}function p(w,C){w.setAttribute("id",C),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function _(){let w=Yq(r),C=t("text"),A=document.getElementById(C)||document.createElement("span"),N=t("learnmore"),R=document.getElementById(N)||document.createElement("a"),O=t("preprendIcon"),B=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){let j=w.element;c(j),p(R,N);let Y=h();l(B,O),j.append(B,A,R,Y),document.body.appendChild(j)}s?(A.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}function Fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fn())}function mM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yM(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function _M(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Bd(){try{return typeof indexedDB=="object"}catch{return!1}}function vM(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var Jq="FirebaseError",On=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Jq,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ir.prototype.create)}},Ir=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?Xq(s,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new On(i,c,r)}};function Xq(n,e){return n.replace(Zq,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Zq=/\{\$([^}]+)}/g;function qo(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],a=e[i];if(uM(s)&&uM(a)){if(!qo(s,a))return!1}else if(s!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function uM(n){return n!==null&&typeof n=="object"}function QT(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function EM(n,e){let t=new qT(n,e);return t.subscribe.bind(t)}var qT=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");eH(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=BT),i.error===void 0&&(i.error=BT),i.complete===void 0&&(i.complete=BT);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function eH(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function BT(){}var Uoe=14400*1e3;function Ho(n){return n&&n._delegate?n._delegate:n}var Xt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var zo="[DEFAULT]";var YT=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new $o;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nH(e))try{this.getOrInitializeService({instanceIdentifier:zo})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=zo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zo){return this.instances.has(e)}getOptions(e=zo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,a]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tH(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zo){return this.component?this.component.multipleInstances?e:zo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function tH(n){return n===zo?void 0:n}function nH(n){return n.instantiationMode==="EAGER"}var Qg=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new YT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var rH=[],Ne=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Ne||{}),iH={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},sH=Ne.INFO,oH={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},aH=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=oH[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Yr=class{constructor(e){this.name=e,this._logLevel=sH,this._logHandler=aH,this._userLogHandler=null,rH.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}};var XT=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(cH(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function cH(n){let e=n.getComponent();return e?.type==="VERSION"}var ZT="@firebase/app",IM="0.13.2";var Fi=new Yr("@firebase/app"),uH="@firebase/app-compat",lH="@firebase/analytics-compat",dH="@firebase/analytics",hH="@firebase/app-check-compat",fH="@firebase/app-check",pH="@firebase/auth",gH="@firebase/auth-compat",mH="@firebase/database",yH="@firebase/data-connect",_H="@firebase/database-compat",vH="@firebase/functions",EH="@firebase/functions-compat",IH="@firebase/installations",wH="@firebase/installations-compat",TH="@firebase/messaging",bH="@firebase/messaging-compat",DH="@firebase/performance",CH="@firebase/performance-compat",AH="@firebase/remote-config",SH="@firebase/remote-config-compat",RH="@firebase/storage",NH="@firebase/storage-compat",PH="@firebase/firestore",MH="@firebase/ai",xH="@firebase/firestore-compat",kH="firebase",OH="11.10.0";var eb="[DEFAULT]",FH={[ZT]:"fire-core",[uH]:"fire-core-compat",[dH]:"fire-analytics",[lH]:"fire-analytics-compat",[fH]:"fire-app-check",[hH]:"fire-app-check-compat",[pH]:"fire-auth",[gH]:"fire-auth-compat",[mH]:"fire-rtdb",[yH]:"fire-data-connect",[_H]:"fire-rtdb-compat",[vH]:"fire-fn",[EH]:"fire-fn-compat",[IH]:"fire-iid",[wH]:"fire-iid-compat",[TH]:"fire-fcm",[bH]:"fire-fcm-compat",[DH]:"fire-perf",[CH]:"fire-perf-compat",[AH]:"fire-rc",[SH]:"fire-rc-compat",[RH]:"fire-gcs",[NH]:"fire-gcs-compat",[PH]:"fire-fst",[xH]:"fire-fst-compat",[MH]:"fire-vertex","fire-js":"fire-js",[kH]:"fire-js-all"};var $d=new Map,VH=new Map,tb=new Map;function wM(n,e){try{n.container.addComponent(e)}catch(t){Fi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function wr(n){let e=n.name;if(tb.has(e))return Fi.debug(`There were multiple attempts to register component ${e}.`),!1;tb.set(e,n);for(let t of $d.values())wM(t,n);for(let t of VH.values())wM(t,n);return!0}function Yg(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Vi(n){return n==null?!1:n.settings!==void 0}var LH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ys=new Ir("app","Firebase",LH);var nb=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}};var Mc=OH;function sb(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:eb,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ys.create("bad-app-name",{appName:String(i)});if(t||(t=GT()),!t)throw ys.create("no-options");let s=$d.get(i);if(s){if(qo(t,s.options)&&qo(r,s.config))return s;throw ys.create("duplicate-app",{appName:i})}let a=new Qg(i);for(let l of tb.values())a.addComponent(l);let c=new nb(t,r,a);return $d.set(i,c),c}function xc(n=eb){let e=$d.get(n);if(!e&&n===eb&&GT())return sb();if(!e)throw ys.create("no-app",{appName:n});return e}function Jg(){return Array.from($d.values())}function tt(n,e,t){var r;let i=(r=FH[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fi.warn(c.join(" "));return}wr(new Xt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var UH="firebase-heartbeat-database",jH=1,qd="firebase-heartbeat-store",JT=null;function CM(){return JT||(JT=Fp(UH,jH,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(qd)}catch(t){console.warn(t)}}}}).catch(n=>{throw ys.create("idb-open",{originalErrorMessage:n.message})})),JT}async function BH(n){try{let t=(await CM()).transaction(qd),r=await t.objectStore(qd).get(AM(n));return await t.done,r}catch(e){if(e instanceof On)Fi.warn(e.message);else{let t=ys.create("idb-get",{originalErrorMessage:e?.message});Fi.warn(t.message)}}}async function TM(n,e){try{let r=(await CM()).transaction(qd,"readwrite");await r.objectStore(qd).put(e,AM(n)),await r.done}catch(t){if(t instanceof On)Fi.warn(t.message);else{let r=ys.create("idb-set",{originalErrorMessage:t?.message});Fi.warn(r.message)}}}function AM(n){return`${n.name}!${n.options.appId}`}var $H=1024,qH=30,rb=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new ib(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=bM();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>qH){let a=zH(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Fi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=bM(),{heartbeatsToSend:r,unsentEntries:i}=HH(this._heartbeatsCache.heartbeats),s=jd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Fi.warn(t),""}}};function bM(){return new Date().toISOString().substring(0,10)}function HH(n,e=$H){let t=[],r=n.slice();for(let i of n){let s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),DM(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),DM(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var ib=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Bd()?vM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await BH(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return TM(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return TM(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function DM(n){return jd(JSON.stringify({version:2,heartbeats:n})).length}function zH(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function GH(n){wr(new Xt("platform-logger",e=>new XT(e),"PRIVATE")),wr(new Xt("heartbeat",e=>new rb(e),"PRIVATE")),tt(ZT,IM,n),tt(ZT,IM,"esm2017"),tt("fire-js","")}GH("");var WH="firebase",KH="11.10.0";tt(WH,KH,"app");function SM(n){n===void 0&&(n=x(_t));let e=n.get(Ca);return t=>new le(r=>{let i=e.add(),s=!1;function a(){s||(i(),s=!0)}let c=t.subscribe({next:l=>{r.next(l),a()},complete:()=>{r.complete(),a()},error:l=>{r.error(l),a()}});return c.add(()=>{r.unsubscribe(),a()}),c})}var Wo=new Xs("ANGULARFIRE2_VERSION");function Zg(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(a=>a.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Oc=(n,e)=>{let t=e?[e]:Jg(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},kc=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(kc||{}),RM=aE()&&typeof Zone<"u"?kc.WARN:kc.SILENT;var Xg=class{zone;delegate;constructor(e,t=Ny){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(a){i?i.runGuarded(()=>{e.apply(this,[a])}):e.apply(this,[a])};return this.delegate.schedule(s,t,r)}},Ko=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=x(qe);this.outsideAngular=t.runOutsideAngular(()=>new Xg(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Xg(typeof Zone>"u"?void 0:Zone.current,Ry))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),NM=!1;function QH(n,e){!NM&&(RM>kc.SILENT||aE())&&(NM=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),RM>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function YH(n){let e=x(qe,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Go(n){let e=x(qe,{optional:!0});return e?e.run(()=>n()):n()}var JH=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),pt(t,()=>Go(()=>n.apply(void 0,r)))),Fc=(n,e,t)=>(t||=e?kc.WARN:kc.VERBOSE,function(){let r,i=arguments,s,a,c;try{s=x(Ko),a=x(Ca),c=x(ft)}catch{return QH(n,t),n.apply(this,i)}for(let h=0;h<arguments.length;h++)typeof i[h]=="function"&&(e&&(r||=Go(()=>a.add())),i[h]=JH(i[h],r,c));let l=YH(()=>n.apply(this,i));return e?l instanceof le?l.pipe(qi(s.outsideAngular),$i(s.insideAngular),SM(c)):l instanceof Promise?Go(()=>{let h=a.add();return new Promise((p,_)=>{l.then(w=>pt(c,()=>Go(()=>p(w))),w=>pt(c,()=>Go(()=>_(w)))).finally(h)})}):typeof l=="function"&&r?function(){return setTimeout(r,0),l.apply(this,arguments)}:Go(()=>l):l instanceof le?l.pipe(qi(s.outsideAngular),$i(s.insideAngular)):Go(()=>l)});var Qo=class{constructor(e){return e}},Hd=class{constructor(){return Jg()}};function XH(n){return n&&n.length===1?n[0]:new Qo(xc())}var ob=new z("angularfire2._apps"),ZH={provide:Qo,useFactory:XH,deps:[[new wi,ob]]},ez={provide:Hd,deps:[[new wi,ob]]};function tz(n){return(e,t)=>{let r=t.get(mo);tt("angularfire",Wo.full,"core"),tt("angularfire",Wo.full,"app"),tt("angular",e_.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Qo(i)}}function PM(n,...e){return Ei([ZH,ez,{provide:ob,useFactory:tz(n),multi:!0,deps:[qe,_t,Ko,...e]}])}var MM=Fc(sb,!0);var nz=new Map,rz={activated:!1,tokenObservers:[]},iz={initialized:!1,enabled:!1};function Tr(n){return nz.get(n)||Object.assign({},rz)}function FM(){return iz}var sz="https://content-firebaseappcheck.googleapis.com/v1";var oz="exchangeDebugToken",xM={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},kae=1440*60*1e3;var ub=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new $o,this.pending.promise.catch(t=>{}),await az(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new $o,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function az(n){return new Promise(e=>{setTimeout(e,n)})}var cz={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},_s=new Ir("appCheck","AppCheck",cz);function VM(n){if(!Tr(n).activated)throw _s.create("use-before-activation",{appName:n.name})}async function LM({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let _=await i.getHeartbeatsHeader();_&&(r["X-Firebase-Client"]=_)}let s={method:"POST",body:JSON.stringify(e),headers:r},a;try{a=await fetch(n,s)}catch(_){throw _s.create("fetch-network-error",{originalErrorMessage:_?.message})}if(a.status!==200)throw _s.create("fetch-status-error",{httpStatus:a.status});let c;try{c=await a.json()}catch(_){throw _s.create("fetch-parse-error",{originalErrorMessage:_?.message})}let l=c.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw _s.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let h=Number(l[1])*1e3,p=Date.now();return{token:c.token,expireTimeMillis:p+h,issuedAtTimeMillis:p}}function UM(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${sz}/projects/${t}/apps/${r}:${oz}?key=${i}`,body:{debug_token:e}}}var uz="firebase-app-check-database",lz=1,lb="firebase-app-check-store";var em=null;function dz(){return em||(em=new Promise((n,e)=>{try{let t=indexedDB.open(uz,lz);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(_s.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(lb,{keyPath:"compositeKey"})}}}catch(t){e(_s.create("storage-open",{originalErrorMessage:t?.message}))}}),em)}function hz(n,e){return fz(pz(n),e)}async function fz(n,e){let r=(await dz()).transaction(lb,"readwrite"),s=r.objectStore(lb).put({compositeKey:n,value:e});return new Promise((a,c)=>{s.onsuccess=l=>{a()},r.onerror=l=>{var h;c(_s.create("storage-set",{originalErrorMessage:(h=l.target.error)===null||h===void 0?void 0:h.message}))}})}function pz(n){return`${n.options.appId}-${n.name}`}var zd=new Yr("@firebase/app-check");function ab(n,e){return Bd()?hz(n,e).catch(t=>{zd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function jM(){return FM().enabled}async function BM(){let n=FM();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var gz={error:"UNKNOWN_ERROR"};function mz(n){return Wg.encodeString(JSON.stringify(n),!1)}async function db(n,e=!1,t=!1){let r=n.app;VM(r);let i=Tr(r),s=i.token,a;if(s&&!Gd(s)&&(i.token=void 0,s=void 0),!s){let h=await i.cachedTokenPromise;h&&(Gd(h)?s=h:await ab(r,void 0))}if(!e&&s&&Gd(s))return{token:s.token};let c=!1;if(jM())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=LM(UM(r,await BM()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);let h=await i.exchangeTokenPromise;return await ab(r,h),i.token=h,{token:h.token}}catch(h){return h.code==="appCheck/throttled"||h.code==="appCheck/initial-throttle"?zd.warn(h.message):t&&zd.error(h),cb(h)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),s=await Tr(r).exchangeTokenPromise}catch(h){h.code==="appCheck/throttled"||h.code==="appCheck/initial-throttle"?zd.warn(h.message):t&&zd.error(h),a=h}let l;return s?a?Gd(s)?l={token:s.token,internalError:a}:l=cb(a):(l={token:s.token},i.token=s,await ab(r,s)):l=cb(a),c&&Ez(r,l),l}async function yz(n){let e=n.app;VM(e);let{provider:t}=Tr(e);if(jM()){let r=await BM(),{token:i}=await LM(UM(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function _z(n,e,t,r){let{app:i}=n,s=Tr(i),a={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,a],s.token&&Gd(s.token)){let c=s.token;Promise.resolve().then(()=>{t({token:c.token}),kM(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>kM(n))}function $M(n,e){let t=Tr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function kM(n){let{app:e}=n,t=Tr(e),r=t.tokenRefresher;r||(r=vz(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function vz(n){let{app:e}=n;return new ub(async()=>{let t=Tr(e),r;if(t.token?r=await db(n,!0):r=await db(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=Tr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},xM.RETRIAL_MIN_WAIT,xM.RETRIAL_MAX_WAIT)}function Ez(n,e){let t=Tr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Gd(n){return n.expireTimeMillis-Date.now()>0}function cb(n){return{token:mz(gz),error:n}}var hb=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Tr(this.app);for(let t of e)$M(this.app,t.next);return Promise.resolve()}};function Iz(n,e){return new hb(n,e)}function wz(n){return{getToken:e=>db(n,e),getLimitedUseToken:()=>yz(n),addTokenListener:e=>_z(n,"INTERNAL",e),removeTokenListener:e=>$M(n.app,e)}}var Tz="@firebase/app-check",bz="0.10.1";var Dz="app-check",OM="app-check-internal";function Cz(){wr(new Xt(Dz,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Iz(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(OM).initialize()})),wr(new Xt(OM,n=>{let e=n.getProvider("app-check").getImmediate();return wz(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),tt(Tz,bz)}Cz();var Az="app-check";var tm=class{constructor(){return Oc(Az)}};var Sz=["localhost","0.0.0.0","127.0.0.1"],Gae=typeof window<"u"&&Sz.includes(window.location.hostname);function YM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var JM=YM,XM=new Ir("auth","Firebase",YM());var sm=new Yr("@firebase/auth");function Rz(n,...e){sm.logLevel<=Ne.WARN&&sm.warn(`Auth (${Mc}): ${n}`,...e)}function rm(n,...e){sm.logLevel<=Ne.ERROR&&sm.error(`Auth (${Mc}): ${n}`,...e)}function qM(n,...e){throw bb(n,...e)}function Tb(n,...e){return bb(n,...e)}function ZM(n,e,t){let r=Object.assign(Object.assign({},JM()),{[e]:t});return new Ir("auth","Firebase",r).create(e,{appName:n.name})}function im(n){return ZM(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bb(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return XM.create(n,...e)}function Pe(n,e,...t){if(!n)throw bb(e,...t)}function Wd(n){let e="INTERNAL ASSERTION FAILED: "+n;throw rm(e),new Error(e)}function om(n,e){n||Wd(e)}function Nz(){return HM()==="http:"||HM()==="https:"}function HM(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Pz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Nz()||yM()||"connection"in navigator)?navigator.onLine:!0}function Mz(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Xo=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,om(t>e,"Short delay should be less than long delay!"),this.isMobile=gM()||_M()}get(){return Pz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function xz(n,e){om(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var am=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wd("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wd("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wd("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var kz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Oz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Fz=new Xo(3e4,6e4);function ex(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function hm(n,e,t,r,i={}){return tx(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});let c=QT(Object.assign({key:n.config.apiKey},a)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);let h=Object.assign({method:e,headers:l},s);return mM()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Pc(n.emulatorConfig.host)&&(h.credentials="include"),am.fetch()(await nx(n,n.config.apiHost,t,c),h)})}async function tx(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},kz),e);try{let i=new gb(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=await s.json();if("needConfirmation"in a)throw nm(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{let c=s.ok?a.errorMessage:a.error.message,[l,h]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw nm(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw nm(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw nm(n,"user-disabled",a);let p=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw ZM(n,p,h);qM(n,p)}}catch(i){if(i instanceof On)throw i;qM(n,"network-request-failed",{message:String(i)})}}async function nx(n,e,t,r){let i=`${e}${t}?${r}`,s=n,a=s.config.emulator?xz(n.config,i):`${n.config.apiScheme}://${i}`;return Oz.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}var gb=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Tb(this.auth,"network-request-failed")),Fz.get())})}};function nm(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Tb(n,e,r);return i.customData._tokenResponse=t,i}async function Vz(n,e){return hm(n,"POST","/v1/accounts:delete",e)}async function cm(n,e){return hm(n,"POST","/v1/accounts:lookup",e)}function Kd(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Db(n,e=!1){let t=Ho(n),r=await t.getIdToken(e),i=rx(r);Pe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:Kd(fb(i.auth_time)),issuedAtTime:Kd(fb(i.iat)),expirationTime:Kd(fb(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function fb(n){return Number(n)*1e3}function rx(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return rm("JWT malformed, contained fewer than 3 sections"),null;try{let i=Kg(t);return i?JSON.parse(i):(rm("Failed to decode base64 JWT payload"),null)}catch(i){return rm("Caught error parsing JWT payload as JSON",i?.toString()),null}}function zM(n){let e=rx(n);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function mb(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof On&&Lz(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Lz({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var yb=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Yd=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kd(this.lastLoginAt),this.creationTime=Kd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function um(n){var e;let t=n.auth,r=await n.getIdToken(),i=await mb(n,cm(t,{idToken:r}));Pe(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?ix(s.providerUserInfo):[],c=Uz(n.providerData,a),l=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!c?.length,p=l?h:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Yd(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,_)}async function Cb(n){let e=Ho(n);await um(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Uz(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ix(n){return n.map(e=>{var{providerId:t}=e,r=Py(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function jz(n,e){let t=await tx(n,{},async()=>{let r=QT({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await nx(n,i,"/v1/token",`key=${s}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let l={method:"POST",headers:c,body:r};return n.emulatorConfig&&Pc(n.emulatorConfig.host)&&(l.credentials="include"),am.fetch()(a,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Bz(n,e){return hm(n,"POST","/v2/accounts:revokeToken",ex(n,e))}var Qd=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");let t=zM(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await jz(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new n;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Pe(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Pe(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Wd("not implemented")}};function vs(n,e){Pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Yo=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Py(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Yd(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await mb(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Db(this,e)}reload(){return Cb(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await um(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vi(this.auth.app))return Promise.reject(im(this.auth));let e=await this.getIdToken();return await mb(this,Vz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,c,l,h,p;let _=(r=t.displayName)!==null&&r!==void 0?r:void 0,w=(i=t.email)!==null&&i!==void 0?i:void 0,C=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,A=(a=t.photoURL)!==null&&a!==void 0?a:void 0,N=(c=t.tenantId)!==null&&c!==void 0?c:void 0,R=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,O=(h=t.createdAt)!==null&&h!==void 0?h:void 0,B=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:j,emailVerified:Y,isAnonymous:$e,providerData:ie,stsTokenManager:I}=t;Pe(j&&I,e,"internal-error");let g=Qd.fromJSON(this.name,I);Pe(typeof j=="string",e,"internal-error"),vs(_,e.name),vs(w,e.name),Pe(typeof Y=="boolean",e,"internal-error"),Pe(typeof $e=="boolean",e,"internal-error"),vs(C,e.name),vs(A,e.name),vs(N,e.name),vs(R,e.name),vs(O,e.name),vs(B,e.name);let y=new n({uid:j,auth:e,email:w,emailVerified:Y,displayName:_,isAnonymous:$e,photoURL:A,phoneNumber:C,tenantId:N,stsTokenManager:g,createdAt:O,lastLoginAt:B});return ie&&Array.isArray(ie)&&(y.providerData=ie.map(v=>Object.assign({},v))),R&&(y._redirectEventId=R),y}static async _fromIdTokenResponse(e,t,r=!1){let i=new Qd;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await um(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];Pe(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?ix(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,c=new Qd;c.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Yd(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,h),l}};var GM=new Map;function Jo(n){om(n instanceof Function,"Expected a class definition");let e=GM.get(n);return e?(om(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,GM.set(n,e),e)}var $z=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),_b=$z;function pb(n,e,t){return`firebase:${n}:${e}:${t}`}var lm=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=pb(this.userKey,i.apiKey,s),this.fullPersistenceKey=pb("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await cm(this.auth,{idToken:e}).catch(()=>{});return t?Yo._fromGetAccountInfoResponse(this.auth,t,e):null}return Yo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Jo(_b),e,r);let i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h),s=i[0]||Jo(_b),a=pb(r,e.config.apiKey,e.name),c=null;for(let h of t)try{let p=await h._get(a);if(p){let _;if(typeof p=="string"){let w=await cm(e,{idToken:p}).catch(()=>{});if(!w)break;_=await Yo._fromGetAccountInfoResponse(e,w,p)}else _=Yo._fromJSON(e,p);h!==s&&(c=_),s=h;break}}catch{}let l=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new n(s,e,r):(s=l[0],c&&await s._set(a,c.toJSON()),await Promise.all(t.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new n(s,e,r))}};function WM(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Gz(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qz(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Kz(e))return"Blackberry";if(Qz(e))return"Webos";if(Hz(e))return"Safari";if((e.includes("chrome/")||zz(e))&&!e.includes("edge/"))return"Chrome";if(Wz(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function qz(n=Fn()){return/firefox\//i.test(n)}function Hz(n=Fn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zz(n=Fn()){return/crios\//i.test(n)}function Gz(n=Fn()){return/iemobile/i.test(n)}function Wz(n=Fn()){return/android/i.test(n)}function Kz(n=Fn()){return/blackberry/i.test(n)}function Qz(n=Fn()){return/webos/i.test(n)}function sx(n,e=[]){let t;switch(n){case"Browser":t=WM(Fn());break;case"Worker":t=`${WM(Fn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Mc}/${r}`}var vb=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((a,c)=>{try{let l=e(s);a(l)}catch(l){c(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function Yz(n,e={}){return hm(n,"GET","/v2/passwordPolicy",ex(n,e))}var Jz=6,Eb=class{constructor(e){var t,r,i,s;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:Jz,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Ib=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dm(this),this.idTokenSubscription=new dm(this),this.beforeStateQueue=new vb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Jo(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await lm.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await cm(this,{idToken:e}),r=await Yo._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Vi(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===c)&&l?.user&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await um(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Mz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vi(this.app))return Promise.reject(im(this));let t=e?Ho(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vi(this.app)?Promise.reject(im(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vi(this.app)?Promise.reject(im(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await Yz(this),t=new Eb(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ir("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Bz(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Jo(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=await lm.create(this,[Jo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),a=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{a=!0,l()}}else{let l=e.addObserver(t);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Vi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&Rz(`Error while retrieving App Check token: ${t.error}`),t?.token}};function Xz(n){return Ho(n)}var dm=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=EM(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Zz={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function e6(n){Zz=n}function t6(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function n6(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Jo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var ice=t6("rcb"),sce=new Xo(3e4,6e4);var oce=new Xo(2e3,1e4);var ace=600*1e3;var cce=new Xo(3e4,6e4);var uce=new Xo(5e3,15e3);var lce=encodeURIComponent("fac");var KM="@firebase/auth",QM="1.10.8";var wb=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function r6(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function i6(n){wr(new Xt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;Pe(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sx(n)},h=new Ib(r,i,s,l);return n6(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),wr(new Xt("auth-internal",e=>{let t=Xz(e.getProvider("auth").getImmediate());return(r=>new wb(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),tt(KM,QM,r6(n)),tt(KM,QM,"esm2017")}var s6=300,dce=fM("authIdTokenMaxAge")||s6;function o6(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}e6({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Tb("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",o6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});i6("Browser");var i9="auth";var fm=class{constructor(){return Oc(i9)}};var ox=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ax={};var pm,cx;(function(){var n;function e(I,g){function y(){}y.prototype=g.prototype,I.D=g.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(v,E,b){for(var m=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)m[ut-2]=arguments[ut];return g.prototype[E].apply(v,m)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,g,y){y||(y=0);var v=Array(16);if(typeof g=="string")for(var E=0;16>E;++E)v[E]=g.charCodeAt(y++)|g.charCodeAt(y++)<<8|g.charCodeAt(y++)<<16|g.charCodeAt(y++)<<24;else for(E=0;16>E;++E)v[E]=g[y++]|g[y++]<<8|g[y++]<<16|g[y++]<<24;g=I.g[0],y=I.g[1],E=I.g[2];var b=I.g[3],m=g+(b^y&(E^b))+v[0]+3614090360&4294967295;g=y+(m<<7&4294967295|m>>>25),m=b+(E^g&(y^E))+v[1]+3905402710&4294967295,b=g+(m<<12&4294967295|m>>>20),m=E+(y^b&(g^y))+v[2]+606105819&4294967295,E=b+(m<<17&4294967295|m>>>15),m=y+(g^E&(b^g))+v[3]+3250441966&4294967295,y=E+(m<<22&4294967295|m>>>10),m=g+(b^y&(E^b))+v[4]+4118548399&4294967295,g=y+(m<<7&4294967295|m>>>25),m=b+(E^g&(y^E))+v[5]+1200080426&4294967295,b=g+(m<<12&4294967295|m>>>20),m=E+(y^b&(g^y))+v[6]+2821735955&4294967295,E=b+(m<<17&4294967295|m>>>15),m=y+(g^E&(b^g))+v[7]+4249261313&4294967295,y=E+(m<<22&4294967295|m>>>10),m=g+(b^y&(E^b))+v[8]+1770035416&4294967295,g=y+(m<<7&4294967295|m>>>25),m=b+(E^g&(y^E))+v[9]+2336552879&4294967295,b=g+(m<<12&4294967295|m>>>20),m=E+(y^b&(g^y))+v[10]+4294925233&4294967295,E=b+(m<<17&4294967295|m>>>15),m=y+(g^E&(b^g))+v[11]+2304563134&4294967295,y=E+(m<<22&4294967295|m>>>10),m=g+(b^y&(E^b))+v[12]+1804603682&4294967295,g=y+(m<<7&4294967295|m>>>25),m=b+(E^g&(y^E))+v[13]+4254626195&4294967295,b=g+(m<<12&4294967295|m>>>20),m=E+(y^b&(g^y))+v[14]+2792965006&4294967295,E=b+(m<<17&4294967295|m>>>15),m=y+(g^E&(b^g))+v[15]+1236535329&4294967295,y=E+(m<<22&4294967295|m>>>10),m=g+(E^b&(y^E))+v[1]+4129170786&4294967295,g=y+(m<<5&4294967295|m>>>27),m=b+(y^E&(g^y))+v[6]+3225465664&4294967295,b=g+(m<<9&4294967295|m>>>23),m=E+(g^y&(b^g))+v[11]+643717713&4294967295,E=b+(m<<14&4294967295|m>>>18),m=y+(b^g&(E^b))+v[0]+3921069994&4294967295,y=E+(m<<20&4294967295|m>>>12),m=g+(E^b&(y^E))+v[5]+3593408605&4294967295,g=y+(m<<5&4294967295|m>>>27),m=b+(y^E&(g^y))+v[10]+38016083&4294967295,b=g+(m<<9&4294967295|m>>>23),m=E+(g^y&(b^g))+v[15]+3634488961&4294967295,E=b+(m<<14&4294967295|m>>>18),m=y+(b^g&(E^b))+v[4]+3889429448&4294967295,y=E+(m<<20&4294967295|m>>>12),m=g+(E^b&(y^E))+v[9]+568446438&4294967295,g=y+(m<<5&4294967295|m>>>27),m=b+(y^E&(g^y))+v[14]+3275163606&4294967295,b=g+(m<<9&4294967295|m>>>23),m=E+(g^y&(b^g))+v[3]+4107603335&4294967295,E=b+(m<<14&4294967295|m>>>18),m=y+(b^g&(E^b))+v[8]+1163531501&4294967295,y=E+(m<<20&4294967295|m>>>12),m=g+(E^b&(y^E))+v[13]+2850285829&4294967295,g=y+(m<<5&4294967295|m>>>27),m=b+(y^E&(g^y))+v[2]+4243563512&4294967295,b=g+(m<<9&4294967295|m>>>23),m=E+(g^y&(b^g))+v[7]+1735328473&4294967295,E=b+(m<<14&4294967295|m>>>18),m=y+(b^g&(E^b))+v[12]+2368359562&4294967295,y=E+(m<<20&4294967295|m>>>12),m=g+(y^E^b)+v[5]+4294588738&4294967295,g=y+(m<<4&4294967295|m>>>28),m=b+(g^y^E)+v[8]+2272392833&4294967295,b=g+(m<<11&4294967295|m>>>21),m=E+(b^g^y)+v[11]+1839030562&4294967295,E=b+(m<<16&4294967295|m>>>16),m=y+(E^b^g)+v[14]+4259657740&4294967295,y=E+(m<<23&4294967295|m>>>9),m=g+(y^E^b)+v[1]+2763975236&4294967295,g=y+(m<<4&4294967295|m>>>28),m=b+(g^y^E)+v[4]+1272893353&4294967295,b=g+(m<<11&4294967295|m>>>21),m=E+(b^g^y)+v[7]+4139469664&4294967295,E=b+(m<<16&4294967295|m>>>16),m=y+(E^b^g)+v[10]+3200236656&4294967295,y=E+(m<<23&4294967295|m>>>9),m=g+(y^E^b)+v[13]+681279174&4294967295,g=y+(m<<4&4294967295|m>>>28),m=b+(g^y^E)+v[0]+3936430074&4294967295,b=g+(m<<11&4294967295|m>>>21),m=E+(b^g^y)+v[3]+3572445317&4294967295,E=b+(m<<16&4294967295|m>>>16),m=y+(E^b^g)+v[6]+76029189&4294967295,y=E+(m<<23&4294967295|m>>>9),m=g+(y^E^b)+v[9]+3654602809&4294967295,g=y+(m<<4&4294967295|m>>>28),m=b+(g^y^E)+v[12]+3873151461&4294967295,b=g+(m<<11&4294967295|m>>>21),m=E+(b^g^y)+v[15]+530742520&4294967295,E=b+(m<<16&4294967295|m>>>16),m=y+(E^b^g)+v[2]+3299628645&4294967295,y=E+(m<<23&4294967295|m>>>9),m=g+(E^(y|~b))+v[0]+4096336452&4294967295,g=y+(m<<6&4294967295|m>>>26),m=b+(y^(g|~E))+v[7]+1126891415&4294967295,b=g+(m<<10&4294967295|m>>>22),m=E+(g^(b|~y))+v[14]+2878612391&4294967295,E=b+(m<<15&4294967295|m>>>17),m=y+(b^(E|~g))+v[5]+4237533241&4294967295,y=E+(m<<21&4294967295|m>>>11),m=g+(E^(y|~b))+v[12]+1700485571&4294967295,g=y+(m<<6&4294967295|m>>>26),m=b+(y^(g|~E))+v[3]+2399980690&4294967295,b=g+(m<<10&4294967295|m>>>22),m=E+(g^(b|~y))+v[10]+4293915773&4294967295,E=b+(m<<15&4294967295|m>>>17),m=y+(b^(E|~g))+v[1]+2240044497&4294967295,y=E+(m<<21&4294967295|m>>>11),m=g+(E^(y|~b))+v[8]+1873313359&4294967295,g=y+(m<<6&4294967295|m>>>26),m=b+(y^(g|~E))+v[15]+4264355552&4294967295,b=g+(m<<10&4294967295|m>>>22),m=E+(g^(b|~y))+v[6]+2734768916&4294967295,E=b+(m<<15&4294967295|m>>>17),m=y+(b^(E|~g))+v[13]+1309151649&4294967295,y=E+(m<<21&4294967295|m>>>11),m=g+(E^(y|~b))+v[4]+4149444226&4294967295,g=y+(m<<6&4294967295|m>>>26),m=b+(y^(g|~E))+v[11]+3174756917&4294967295,b=g+(m<<10&4294967295|m>>>22),m=E+(g^(b|~y))+v[2]+718787259&4294967295,E=b+(m<<15&4294967295|m>>>17),m=y+(b^(E|~g))+v[9]+3951481745&4294967295,I.g[0]=I.g[0]+g&4294967295,I.g[1]=I.g[1]+(E+(m<<21&4294967295|m>>>11))&4294967295,I.g[2]=I.g[2]+E&4294967295,I.g[3]=I.g[3]+b&4294967295}r.prototype.u=function(I,g){g===void 0&&(g=I.length);for(var y=g-this.blockSize,v=this.B,E=this.h,b=0;b<g;){if(E==0)for(;b<=y;)i(this,I,b),b+=this.blockSize;if(typeof I=="string"){for(;b<g;)if(v[E++]=I.charCodeAt(b++),E==this.blockSize){i(this,v),E=0;break}}else for(;b<g;)if(v[E++]=I[b++],E==this.blockSize){i(this,v),E=0;break}}this.h=E,this.o+=g},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var g=1;g<I.length-8;++g)I[g]=0;var y=8*this.o;for(g=I.length-8;g<I.length;++g)I[g]=y&255,y/=256;for(this.u(I),I=Array(16),g=y=0;4>g;++g)for(var v=0;32>v;v+=8)I[y++]=this.g[g]>>>v&255;return I};function s(I,g){var y=c;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=g(I)}function a(I,g){this.h=g;for(var y=[],v=!0,E=I.length-1;0<=E;E--){var b=I[E]|0;v&&b==g||(y[E]=b,v=!1)}this.g=y}var c={};function l(I){return-128<=I&&128>I?s(I,function(g){return new a([g|0],0>g?-1:0)}):new a([I|0],0>I?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return _;if(0>I)return R(h(-I));for(var g=[],y=1,v=0;I>=y;v++)g[v]=I/y|0,y*=4294967296;return new a(g,0)}function p(I,g){if(I.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(I.charAt(0)=="-")return R(p(I.substring(1),g));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=h(Math.pow(g,8)),v=_,E=0;E<I.length;E+=8){var b=Math.min(8,I.length-E),m=parseInt(I.substring(E,E+b),g);8>b?(b=h(Math.pow(g,b)),v=v.j(b).add(h(m))):(v=v.j(y),v=v.add(h(m)))}return v}var _=l(0),w=l(1),C=l(16777216);n=a.prototype,n.m=function(){if(N(this))return-R(this).m();for(var I=0,g=1,y=0;y<this.g.length;y++){var v=this.i(y);I+=(0<=v?v:4294967296+v)*g,g*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(A(this))return"0";if(N(this))return"-"+R(this).toString(I);for(var g=h(Math.pow(I,6)),y=this,v="";;){var E=Y(y,g).g;y=O(y,E.j(g));var b=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=E,A(y))return b+v;for(;6>b.length;)b="0"+b;v=b+v}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function A(I){if(I.h!=0)return!1;for(var g=0;g<I.g.length;g++)if(I.g[g]!=0)return!1;return!0}function N(I){return I.h==-1}n.l=function(I){return I=O(this,I),N(I)?-1:A(I)?0:1};function R(I){for(var g=I.g.length,y=[],v=0;v<g;v++)y[v]=~I.g[v];return new a(y,~I.h).add(w)}n.abs=function(){return N(this)?R(this):this},n.add=function(I){for(var g=Math.max(this.g.length,I.g.length),y=[],v=0,E=0;E<=g;E++){var b=v+(this.i(E)&65535)+(I.i(E)&65535),m=(b>>>16)+(this.i(E)>>>16)+(I.i(E)>>>16);v=m>>>16,b&=65535,m&=65535,y[E]=m<<16|b}return new a(y,y[y.length-1]&-2147483648?-1:0)};function O(I,g){return I.add(R(g))}n.j=function(I){if(A(this)||A(I))return _;if(N(this))return N(I)?R(this).j(R(I)):R(R(this).j(I));if(N(I))return R(this.j(R(I)));if(0>this.l(C)&&0>I.l(C))return h(this.m()*I.m());for(var g=this.g.length+I.g.length,y=[],v=0;v<2*g;v++)y[v]=0;for(v=0;v<this.g.length;v++)for(var E=0;E<I.g.length;E++){var b=this.i(v)>>>16,m=this.i(v)&65535,ut=I.i(E)>>>16,Ln=I.i(E)&65535;y[2*v+2*E]+=m*Ln,B(y,2*v+2*E),y[2*v+2*E+1]+=b*Ln,B(y,2*v+2*E+1),y[2*v+2*E+1]+=m*ut,B(y,2*v+2*E+1),y[2*v+2*E+2]+=b*ut,B(y,2*v+2*E+2)}for(v=0;v<g;v++)y[v]=y[2*v+1]<<16|y[2*v];for(v=g;v<2*g;v++)y[v]=0;return new a(y,0)};function B(I,g){for(;(I[g]&65535)!=I[g];)I[g+1]+=I[g]>>>16,I[g]&=65535,g++}function j(I,g){this.g=I,this.h=g}function Y(I,g){if(A(g))throw Error("division by zero");if(A(I))return new j(_,_);if(N(I))return g=Y(R(I),g),new j(R(g.g),R(g.h));if(N(g))return g=Y(I,R(g)),new j(R(g.g),g.h);if(30<I.g.length){if(N(I)||N(g))throw Error("slowDivide_ only works with positive integers.");for(var y=w,v=g;0>=v.l(I);)y=$e(y),v=$e(v);var E=ie(y,1),b=ie(v,1);for(v=ie(v,2),y=ie(y,2);!A(v);){var m=b.add(v);0>=m.l(I)&&(E=E.add(y),b=m),v=ie(v,1),y=ie(y,1)}return g=O(I,E.j(g)),new j(E,g)}for(E=_;0<=I.l(g);){for(y=Math.max(1,Math.floor(I.m()/g.m())),v=Math.ceil(Math.log(y)/Math.LN2),v=48>=v?1:Math.pow(2,v-48),b=h(y),m=b.j(g);N(m)||0<m.l(I);)y-=v,b=h(y),m=b.j(g);A(b)&&(b=w),E=E.add(b),I=O(I,m)}return new j(E,I)}n.A=function(I){return Y(this,I).h},n.and=function(I){for(var g=Math.max(this.g.length,I.g.length),y=[],v=0;v<g;v++)y[v]=this.i(v)&I.i(v);return new a(y,this.h&I.h)},n.or=function(I){for(var g=Math.max(this.g.length,I.g.length),y=[],v=0;v<g;v++)y[v]=this.i(v)|I.i(v);return new a(y,this.h|I.h)},n.xor=function(I){for(var g=Math.max(this.g.length,I.g.length),y=[],v=0;v<g;v++)y[v]=this.i(v)^I.i(v);return new a(y,this.h^I.h)};function $e(I){for(var g=I.g.length+1,y=[],v=0;v<g;v++)y[v]=I.i(v)<<1|I.i(v-1)>>>31;return new a(y,I.h)}function ie(I,g){var y=g>>5;g%=32;for(var v=I.g.length-y,E=[],b=0;b<v;b++)E[b]=0<g?I.i(b+y)>>>g|I.i(b+y+1)<<32-g:I.i(b+y);return new a(E,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,cx=ax.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=p,pm=ax.Integer=a}).apply(typeof ox<"u"?ox:typeof self<"u"?self:typeof window<"u"?window:{});var gm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Li={};var ux,s9,lx,dx,hx,fx,px,gx,mx;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,d){return o==Array.prototype||o==Object.prototype||(o[u]=d.value),o};function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof gm=="object"&&gm];for(var u=0;u<o.length;++u){var d=o[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=t(this);function i(o,u){if(u)e:{var d=r;o=o.split(".");for(var f=0;f<o.length-1;f++){var T=o[f];if(!(T in d))break e;d=d[T]}o=o[o.length-1],f=d[o],u=u(f),u!=f&&u!=null&&e(d,o,{configurable:!0,writable:!0,value:u})}}function s(o,u){o instanceof String&&(o+="");var d=0,f=!1,T={next:function(){if(!f&&d<o.length){var D=d++;return{value:u(D,o[D]),done:!1}}return f=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(o){return o||function(){return s(this,function(u,d){return d})}});var a=a||{},c=this||self;function l(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function h(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function p(o,u,d){return o.call.apply(o.bind,arguments)}function _(o,u,d){if(!o)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,f),o.apply(u,T)}}return function(){return o.apply(u,arguments)}}function w(o,u,d){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:_,w.apply(null,arguments)}function C(o,u){var d=Array.prototype.slice.call(arguments,1);return function(){var f=d.slice();return f.push.apply(f,arguments),o.apply(this,f)}}function A(o,u){function d(){}d.prototype=u.prototype,o.aa=u.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(f,T,D){for(var S=Array(arguments.length-2),W=2;W<arguments.length;W++)S[W-2]=arguments[W];return u.prototype[T].apply(f,S)}}function N(o){let u=o.length;if(0<u){let d=Array(u);for(let f=0;f<u;f++)d[f]=o[f];return d}return[]}function R(o,u){for(let d=1;d<arguments.length;d++){let f=arguments[d];if(l(f)){let T=o.length||0,D=f.length||0;o.length=T+D;for(let S=0;S<D;S++)o[T+S]=f[S]}else o.push(f)}}class O{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function B(o){return/^[\s\xa0]*$/.test(o)}function j(){var o=c.navigator;return o&&(o=o.userAgent)?o:""}function Y(o){return Y[" "](o),o}Y[" "]=function(){};var $e=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function ie(o,u,d){for(let f in o)u.call(d,o[f],f,o)}function I(o,u){for(let d in o)u.call(void 0,o[d],d,o)}function g(o){let u={};for(let d in o)u[d]=o[d];return u}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function v(o,u){let d,f;for(let T=1;T<arguments.length;T++){f=arguments[T];for(d in f)o[d]=f[d];for(let D=0;D<y.length;D++)d=y[D],Object.prototype.hasOwnProperty.call(f,d)&&(o[d]=f[d])}}function E(o){var u=1;o=o.split(":");let d=[];for(;0<u&&o.length;)d.push(o.shift()),u--;return o.length&&d.push(o.join(":")),d}function b(o){c.setTimeout(()=>{throw o},0)}function m(){var o=Is;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class ut{constructor(){this.h=this.g=null}add(u,d){let f=Ln.get();f.set(u,d),this.h?this.h.next=f:this.g=f,this.h=f}}var Ln=new O(()=>new Am,o=>o.reset());class Am{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let Un,jn=!1,Is=new ut,qc=()=>{let o=c.Promise.resolve(void 0);Un=()=>{o.then(Sm)}};var Sm=()=>{for(var o;o=m();){try{o.h.call(o.g)}catch(d){b(d)}var u=Ln;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}jn=!1};function It(){this.s=this.s,this.C=this.C}It.prototype.s=!1,It.prototype.ma=function(){this.s||(this.s=!0,this.N())},It.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var Rm=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{let d=()=>{};c.addEventListener("test",d,u),c.removeEventListener("test",d,u)}catch{}return o})();function Bn(o,u){if(Ee.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,f=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if($e){e:{try{Y(u.nodeName);var T=!0;break e}catch{}T=!1}T||(u=null)}}else d=="mouseover"?u=o.fromElement:d=="mouseout"&&(u=o.toElement);this.relatedTarget=u,f?(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Nm[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Bn.aa.h.call(this)}}A(Bn,Ee);var Nm={2:"touch",3:"pen",4:"mouse"};Bn.prototype.h=function(){Bn.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var $n="closure_listenable_"+(1e6*Math.random()|0),Pm=0;function Mm(o,u,d,f,T){this.listener=o,this.proxy=null,this.src=u,this.type=d,this.capture=!!f,this.ha=T,this.key=++Pm,this.da=this.fa=!1}function Zr(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function ei(o){this.src=o,this.g={},this.h=0}ei.prototype.add=function(o,u,d,f,T){var D=o.toString();o=this.g[D],o||(o=this.g[D]=[],this.h++);var S=Ts(o,u,f,T);return-1<S?(u=o[S],d||(u.fa=!1)):(u=new Mm(u,this.src,D,!!f,T),u.fa=d,o.push(u)),u};function ws(o,u){var d=u.type;if(d in o.g){var f=o.g[d],T=Array.prototype.indexOf.call(f,u,void 0),D;(D=0<=T)&&Array.prototype.splice.call(f,T,1),D&&(Zr(u),o.g[d].length==0&&(delete o.g[d],o.h--))}}function Ts(o,u,d,f){for(var T=0;T<o.length;++T){var D=o[T];if(!D.da&&D.listener==u&&D.capture==!!d&&D.ha==f)return T}return-1}var bs="closure_lm_"+(1e6*Math.random()|0),Ds={};function Hc(o,u,d,f,T){if(f&&f.once)return Gc(o,u,d,f,T);if(Array.isArray(u)){for(var D=0;D<u.length;D++)Hc(o,u[D],d,f,T);return null}return d=Rs(d),o&&o[$n]?o.K(u,d,h(f)?!!f.capture:!!f,T):zc(o,u,d,!1,f,T)}function zc(o,u,d,f,T,D){if(!u)throw Error("Invalid event type");var S=h(T)?!!T.capture:!!T,W=As(o);if(W||(o[bs]=W=new ei(o)),d=W.add(u,d,f,S,D),d.proxy)return d;if(f=xm(),d.proxy=f,f.src=o,f.listener=d,o.addEventListener)Rm||(T=S),T===void 0&&(T=!1),o.addEventListener(u.toString(),f,T);else if(o.attachEvent)o.attachEvent(Kc(u.toString()),f);else if(o.addListener&&o.removeListener)o.addListener(f);else throw Error("addEventListener and attachEvent are unavailable.");return d}function xm(){function o(d){return u.call(o.src,o.listener,d)}let u=km;return o}function Gc(o,u,d,f,T){if(Array.isArray(u)){for(var D=0;D<u.length;D++)Gc(o,u[D],d,f,T);return null}return d=Rs(d),o&&o[$n]?o.L(u,d,h(f)?!!f.capture:!!f,T):zc(o,u,d,!0,f,T)}function Wc(o,u,d,f,T){if(Array.isArray(u))for(var D=0;D<u.length;D++)Wc(o,u[D],d,f,T);else f=h(f)?!!f.capture:!!f,d=Rs(d),o&&o[$n]?(o=o.i,u=String(u).toString(),u in o.g&&(D=o.g[u],d=Ts(D,d,f,T),-1<d&&(Zr(D[d]),Array.prototype.splice.call(D,d,1),D.length==0&&(delete o.g[u],o.h--)))):o&&(o=As(o))&&(u=o.g[u.toString()],o=-1,u&&(o=Ts(u,d,f,T)),(d=-1<o?u[o]:null)&&Cs(d))}function Cs(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[$n])ws(u.i,o);else{var d=o.type,f=o.proxy;u.removeEventListener?u.removeEventListener(d,f,o.capture):u.detachEvent?u.detachEvent(Kc(d),f):u.addListener&&u.removeListener&&u.removeListener(f),(d=As(u))?(ws(d,o),d.h==0&&(d.src=null,u[bs]=null)):Zr(o)}}}function Kc(o){return o in Ds?Ds[o]:Ds[o]="on"+o}function km(o,u){if(o.da)o=!0;else{u=new Bn(u,this);var d=o.listener,f=o.ha||o.src;o.fa&&Cs(o),o=d.call(f,u)}return o}function As(o){return o=o[bs],o instanceof ei?o:null}var Ss="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rs(o){return typeof o=="function"?o:(o[Ss]||(o[Ss]=function(u){return o.handleEvent(u)}),o[Ss])}function Ie(){It.call(this),this.i=new ei(this),this.M=this,this.F=null}A(Ie,It),Ie.prototype[$n]=!0,Ie.prototype.removeEventListener=function(o,u,d,f){Wc(this,o,u,d,f)};function Ce(o,u){var d,f=o.F;if(f)for(d=[];f;f=f.F)d.push(f);if(o=o.M,f=u.type||u,typeof u=="string")u=new Ee(u,o);else if(u instanceof Ee)u.target=u.target||o;else{var T=u;u=new Ee(f,o),v(u,T)}if(T=!0,d)for(var D=d.length-1;0<=D;D--){var S=u.g=d[D];T=ti(S,f,!0,u)&&T}if(S=u.g=o,T=ti(S,f,!0,u)&&T,T=ti(S,f,!1,u)&&T,d)for(D=0;D<d.length;D++)S=u.g=d[D],T=ti(S,f,!1,u)&&T}Ie.prototype.N=function(){if(Ie.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var d=o.g[u],f=0;f<d.length;f++)Zr(d[f]);delete o.g[u],o.h--}}this.F=null},Ie.prototype.K=function(o,u,d,f){return this.i.add(String(o),u,!1,d,f)},Ie.prototype.L=function(o,u,d,f){return this.i.add(String(o),u,!0,d,f)};function ti(o,u,d,f){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var T=!0,D=0;D<u.length;++D){var S=u[D];if(S&&!S.da&&S.capture==d){var W=S.listener,me=S.ha||S.src;S.fa&&ws(o.i,S),T=W.call(me,f)!==!1&&T}}return T&&!f.defaultPrevented}function Qc(o,u,d){if(typeof o=="function")d&&(o=w(o,d));else if(o&&typeof o.handleEvent=="function")o=w(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(o,u||0)}function Yc(o){o.g=Qc(()=>{o.g=null,o.i&&(o.i=!1,Yc(o))},o.l);let u=o.h;o.h=null,o.m.apply(null,u)}class Om extends It{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Yc(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qn(o){It.call(this),this.h=o,this.g={}}A(qn,It);var Jc=[];function Xc(o){ie(o.g,function(u,d){this.g.hasOwnProperty(d)&&Cs(u)},o),o.g={}}qn.prototype.N=function(){qn.aa.N.call(this),Xc(this)},qn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ns=c.JSON.stringify,Fm=c.JSON.parse,Vm=class{stringify(o){return c.JSON.stringify(o,void 0)}parse(o){return c.JSON.parse(o,void 0)}};function Ps(){}Ps.prototype.h=null;function Zc(o){return o.h||(o.h=o.i())}function eu(){}var Hn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ms(){Ee.call(this,"d")}A(Ms,Ee);function xs(){Ee.call(this,"c")}A(xs,Ee);var Bt={},tu=null;function ni(){return tu=tu||new Ie}Bt.La="serverreachability";function nu(o){Ee.call(this,Bt.La,o)}A(nu,Ee);function zn(o){let u=ni();Ce(u,new nu(u))}Bt.STAT_EVENT="statevent";function ru(o,u){Ee.call(this,Bt.STAT_EVENT,o),this.stat=u}A(ru,Ee);function Ae(o){let u=ni();Ce(u,new ru(u,o))}Bt.Ma="timingevent";function iu(o,u){Ee.call(this,Bt.Ma,o),this.size=u}A(iu,Ee);function Gn(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){o()},u)}function Wn(){this.g=!0}Wn.prototype.xa=function(){this.g=!1};function Lm(o,u,d,f,T,D){o.info(function(){if(o.g)if(D)for(var S="",W=D.split("&"),me=0;me<W.length;me++){var U=W[me].split("=");if(1<U.length){var we=U[0];U=U[1];var Te=we.split("_");S=2<=Te.length&&Te[1]=="type"?S+(we+"="+U+"&"):S+(we+"=redacted&")}}else S=null;else S=D;return"XMLHTTP REQ ("+f+") [attempt "+T+"]: "+u+`
`+d+`
`+S})}function Um(o,u,d,f,T,D,S){o.info(function(){return"XMLHTTP RESP ("+f+") [ attempt "+T+"]: "+u+`
`+d+`
`+D+" "+S})}function sn(o,u,d,f){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+Bm(o,d)+(f?" "+f:"")})}function jm(o,u){o.info(function(){return"TIMEOUT: "+u})}Wn.prototype.info=function(){};function Bm(o,u){if(!o.g)return u;if(!u)return null;try{var d=JSON.parse(u);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var f=d[o];if(!(2>f.length)){var T=f[1];if(Array.isArray(T)&&!(1>T.length)){var D=T[0];if(D!="noop"&&D!="stop"&&D!="close")for(var S=1;S<T.length;S++)T[S]=""}}}}return Ns(d)}catch{return u}}var ri={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},su={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ks;function ii(){}A(ii,Ps),ii.prototype.g=function(){return new XMLHttpRequest},ii.prototype.i=function(){return{}},ks=new ii;function wt(o,u,d,f){this.j=o,this.i=u,this.l=d,this.R=f||1,this.U=new qn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ou}function ou(){this.i=null,this.g="",this.h=!1}var au={},Os={};function Fs(o,u,d){o.L=1,o.v=ci(lt(u)),o.m=d,o.P=!0,cu(o,null)}function cu(o,u){o.F=Date.now(),si(o),o.A=lt(o.v);var d=o.A,f=o.R;Array.isArray(f)||(f=[String(f)]),wu(d.i,"t",f),o.C=0,d=o.j.J,o.h=new ou,o.g=ju(o.j,d?u:null,!o.m),0<o.O&&(o.M=new Om(w(o.Y,o,o.g),o.O)),u=o.U,d=o.g,f=o.ca;var T="readystatechange";Array.isArray(T)||(T&&(Jc[0]=T.toString()),T=Jc);for(var D=0;D<T.length;D++){var S=Hc(d,T[D],f||u.handleEvent,!1,u.h||u);if(!S)break;u.g[S.key]=S}u=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),zn(),Lm(o.i,o.u,o.A,o.l,o.R,o.m)}wt.prototype.ca=function(o){o=o.target;let u=this.M;u&&dt(o)==3?u.j():this.Y(o)},wt.prototype.Y=function(o){try{if(o==this.g)e:{let Te=dt(this.g);var u=this.g.Ba();let cn=this.g.Z();if(!(3>Te)&&(Te!=3||this.g&&(this.h.h||this.g.oa()||Ru(this.g)))){this.J||Te!=4||u==7||(u==8||0>=cn?zn(3):zn(2)),Vs(this);var d=this.g.Z();this.X=d;t:if(uu(this)){var f=Ru(this.g);o="";var T=f.length,D=dt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$t(this),Kn(this);var S="";break t}this.h.i=new c.TextDecoder}for(u=0;u<T;u++)this.h.h=!0,o+=this.h.i.decode(f[u],{stream:!(D&&u==T-1)});f.length=0,this.h.g+=o,this.C=0,S=this.h.g}else S=this.g.oa();if(this.o=d==200,Um(this.i,this.u,this.A,this.l,this.R,Te,d),this.o){if(this.T&&!this.K){t:{if(this.g){var W,me=this.g;if((W=me.g?me.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(W)){var U=W;break t}}U=null}if(d=U)sn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ls(this,d);else{this.o=!1,this.s=3,Ae(12),$t(this),Kn(this);break e}}if(this.P){d=!0;let We;for(;!this.J&&this.C<S.length;)if(We=$m(this,S),We==Os){Te==4&&(this.s=4,Ae(14),d=!1),sn(this.i,this.l,null,"[Incomplete Response]");break}else if(We==au){this.s=4,Ae(15),sn(this.i,this.l,S,"[Invalid Chunk]"),d=!1;break}else sn(this.i,this.l,We,null),Ls(this,We);if(uu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Te!=4||S.length!=0||this.h.h||(this.s=1,Ae(16),d=!1),this.o=this.o&&d,!d)sn(this.i,this.l,S,"[Invalid Chunked Response]"),$t(this),Kn(this);else if(0<S.length&&!this.W){this.W=!0;var we=this.j;we.g==this&&we.ba&&!we.M&&(we.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),Hs(we),we.M=!0,Ae(11))}}else sn(this.i,this.l,S,null),Ls(this,S);Te==4&&$t(this),this.o&&!this.J&&(Te==4?Fu(this.j,this):(this.o=!1,si(this)))}else sy(this.g),d==400&&0<S.indexOf("Unknown SID")?(this.s=3,Ae(12)):(this.s=0,Ae(13)),$t(this),Kn(this)}}}catch{}finally{}};function uu(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function $m(o,u){var d=o.C,f=u.indexOf(`
`,d);return f==-1?Os:(d=Number(u.substring(d,f)),isNaN(d)?au:(f+=1,f+d>u.length?Os:(u=u.slice(f,f+d),o.C=f+d,u)))}wt.prototype.cancel=function(){this.J=!0,$t(this)};function si(o){o.S=Date.now()+o.I,lu(o,o.I)}function lu(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Gn(w(o.ba,o),u)}function Vs(o){o.B&&(c.clearTimeout(o.B),o.B=null)}wt.prototype.ba=function(){this.B=null;let o=Date.now();0<=o-this.S?(jm(this.i,this.A),this.L!=2&&(zn(),Ae(17)),$t(this),this.s=2,Kn(this)):lu(this,this.S-o)};function Kn(o){o.j.G==0||o.J||Fu(o.j,o)}function $t(o){Vs(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,Xc(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function Ls(o,u){try{var d=o.j;if(d.G!=0&&(d.g==o||Us(d.h,o))){if(!o.K&&Us(d.h,o)&&d.G==3){try{var f=d.Da.g.parse(u)}catch{f=null}if(Array.isArray(f)&&f.length==3){var T=f;if(T[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)fi(d),di(d);else break e;qs(d),Ae(18)}}else d.za=T[1],0<d.za-d.T&&37500>T[2]&&d.F&&d.v==0&&!d.C&&(d.C=Gn(w(d.Za,d),6e3));if(1>=fu(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else Ht(d,11)}else if((o.K||d.g==o)&&fi(d),!B(u))for(T=d.Da.g.parse(u),u=0;u<T.length;u++){let U=T[u];if(d.T=U[0],U=U[1],d.G==2)if(U[0]=="c"){d.K=U[1],d.ia=U[2];let we=U[3];we!=null&&(d.la=we,d.j.info("VER="+d.la));let Te=U[4];Te!=null&&(d.Aa=Te,d.j.info("SVER="+d.Aa));let cn=U[5];cn!=null&&typeof cn=="number"&&0<cn&&(f=1.5*cn,d.L=f,d.j.info("backChannelRequestTimeoutMs_="+f)),f=d;let We=o.g;if(We){let gi=We.g?We.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gi){var D=f.h;D.g||gi.indexOf("spdy")==-1&&gi.indexOf("quic")==-1&&gi.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(js(D,D.h),D.h=null))}if(f.D){let zs=We.g?We.g.getResponseHeader("X-HTTP-Session-Id"):null;zs&&(f.ya=zs,J(f.I,f.D,zs))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),f=d;var S=o;if(f.qa=Uu(f,f.J?f.ia:null,f.W),S.K){pu(f.h,S);var W=S,me=f.L;me&&(W.I=me),W.B&&(Vs(W),si(W)),f.g=S}else ku(f);0<d.i.length&&hi(d)}else U[0]!="stop"&&U[0]!="close"||Ht(d,7);else d.G==3&&(U[0]=="stop"||U[0]=="close"?U[0]=="stop"?Ht(d,7):$s(d):U[0]!="noop"&&d.l&&d.l.ta(U),d.v=0)}}zn(4)}catch{}}var qm=class{constructor(o,u){this.g=o,this.map=u}};function du(o){this.l=o||10,c.PerformanceNavigationTiming?(o=c.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hu(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function fu(o){return o.h?1:o.g?o.g.size:0}function Us(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function js(o,u){o.g?o.g.add(u):o.h=u}function pu(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}du.prototype.cancel=function(){if(this.i=gu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let o of this.g.values())o.cancel();this.g.clear()}};function gu(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(let d of o.g.values())u=u.concat(d.D);return u}return N(o.i)}function Hm(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(l(o)){for(var u=[],d=o.length,f=0;f<d;f++)u.push(o[f]);return u}u=[],d=0;for(f in o)u[d++]=o[f];return u}function zm(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(l(o)||typeof o=="string"){var u=[];o=o.length;for(var d=0;d<o;d++)u.push(d);return u}u=[],d=0;for(let f in o)u[d++]=f;return u}}}function mu(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(l(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var d=zm(o),f=Hm(o),T=f.length,D=0;D<T;D++)u.call(void 0,f[D],d&&d[D],o)}var yu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gm(o,u){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var f=o[d].indexOf("="),T=null;if(0<=f){var D=o[d].substring(0,f);T=o[d].substring(f+1)}else D=o[d];u(D,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function qt(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof qt){this.h=o.h,oi(this,o.j),this.o=o.o,this.g=o.g,ai(this,o.s),this.l=o.l;var u=o.i,d=new Jn;d.i=u.i,u.g&&(d.g=new Map(u.g),d.h=u.h),_u(this,d),this.m=o.m}else o&&(u=String(o).match(yu))?(this.h=!1,oi(this,u[1]||"",!0),this.o=Qn(u[2]||""),this.g=Qn(u[3]||"",!0),ai(this,u[4]),this.l=Qn(u[5]||"",!0),_u(this,u[6]||"",!0),this.m=Qn(u[7]||"")):(this.h=!1,this.i=new Jn(null,this.h))}qt.prototype.toString=function(){var o=[],u=this.j;u&&o.push(Yn(u,vu,!0),":");var d=this.g;return(d||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Yn(u,vu,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(Yn(d,d.charAt(0)=="/"?Qm:Km,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",Yn(d,Jm)),o.join("")};function lt(o){return new qt(o)}function oi(o,u,d){o.j=d?Qn(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function ai(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function _u(o,u,d){u instanceof Jn?(o.i=u,Xm(o.i,o.h)):(d||(u=Yn(u,Ym)),o.i=new Jn(u,o.h))}function J(o,u,d){o.i.set(u,d)}function ci(o){return J(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Qn(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Yn(o,u,d){return typeof o=="string"?(o=encodeURI(o).replace(u,Wm),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Wm(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var vu=/[#\/\?@]/g,Km=/[#\?:]/g,Qm=/[#\?]/g,Ym=/[#\?@]/g,Jm=/#/g;function Jn(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function Tt(o){o.g||(o.g=new Map,o.h=0,o.i&&Gm(o.i,function(u,d){o.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}n=Jn.prototype,n.add=function(o,u){Tt(this),this.i=null,o=on(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(u),this.h+=1,this};function Eu(o,u){Tt(o),u=on(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function Iu(o,u){return Tt(o),u=on(o,u),o.g.has(u)}n.forEach=function(o,u){Tt(this),this.g.forEach(function(d,f){d.forEach(function(T){o.call(u,T,f,this)},this)},this)},n.na=function(){Tt(this);let o=Array.from(this.g.values()),u=Array.from(this.g.keys()),d=[];for(let f=0;f<u.length;f++){let T=o[f];for(let D=0;D<T.length;D++)d.push(u[f])}return d},n.V=function(o){Tt(this);let u=[];if(typeof o=="string")Iu(this,o)&&(u=u.concat(this.g.get(on(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)u=u.concat(o[d])}return u},n.set=function(o,u){return Tt(this),this.i=null,o=on(this,o),Iu(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},n.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function wu(o,u,d){Eu(o,u),0<d.length&&(o.i=null,o.g.set(on(o,u),N(d)),o.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let o=[],u=Array.from(this.g.keys());for(var d=0;d<u.length;d++){var f=u[d];let D=encodeURIComponent(String(f)),S=this.V(f);for(f=0;f<S.length;f++){var T=D;S[f]!==""&&(T+="="+encodeURIComponent(String(S[f]))),o.push(T)}}return this.i=o.join("&")};function on(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function Xm(o,u){u&&!o.j&&(Tt(o),o.i=null,o.g.forEach(function(d,f){var T=f.toLowerCase();f!=T&&(Eu(this,f),wu(this,T,d))},o)),o.j=u}function Zm(o,u){let d=new Wn;if(c.Image){let f=new Image;f.onload=C(bt,d,"TestLoadImage: loaded",!0,u,f),f.onerror=C(bt,d,"TestLoadImage: error",!1,u,f),f.onabort=C(bt,d,"TestLoadImage: abort",!1,u,f),f.ontimeout=C(bt,d,"TestLoadImage: timeout",!1,u,f),c.setTimeout(function(){f.ontimeout&&f.ontimeout()},1e4),f.src=o}else u(!1)}function ey(o,u){let d=new Wn,f=new AbortController,T=setTimeout(()=>{f.abort(),bt(d,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:f.signal}).then(D=>{clearTimeout(T),D.ok?bt(d,"TestPingServer: ok",!0,u):bt(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(T),bt(d,"TestPingServer: error",!1,u)})}function bt(o,u,d,f,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),f(d)}catch{}}function ty(){this.g=new Vm}function ny(o,u,d){let f=d||"";try{mu(o,function(T,D){let S=T;h(T)&&(S=Ns(T)),u.push(f+D+"="+encodeURIComponent(S))})}catch(T){throw u.push(f+"type="+encodeURIComponent("_badmap")),T}}function Xn(o){this.l=o.Ub||null,this.j=o.eb||!1}A(Xn,Ps),Xn.prototype.g=function(){return new ui(this.l,this.j)},Xn.prototype.i=(function(o){return function(){return o}})({});function ui(o,u){Ie.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(ui,Ie),n=ui.prototype,n.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,er(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zn(this)),this.readyState=0},n.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,er(this)),this.g&&(this.readyState=3,er(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tu(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tu(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}n.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?Zn(this):er(this),this.readyState==3&&Tu(this)}},n.Ra=function(o){this.g&&(this.response=this.responseText=o,Zn(this))},n.Qa=function(o){this.g&&(this.response=o,Zn(this))},n.ga=function(){this.g&&Zn(this)};function Zn(o){o.readyState=4,o.l=null,o.j=null,o.v=null,er(o)}n.setRequestHeader=function(o,u){this.u.append(o,u)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let o=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=u.next();return o.join(`\r
`)};function er(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(ui.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function bu(o){let u="";return ie(o,function(d,f){u+=f,u+=":",u+=d,u+=`\r
`}),u}function Bs(o,u,d){e:{for(f in d){var f=!1;break e}f=!0}f||(d=bu(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):J(o,u,d))}function ee(o){Ie.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(ee,Ie);var ry=/^https?$/i,iy=["POST","PUT"];n=ee.prototype,n.Ha=function(o){this.J=o},n.ea=function(o,u,d,f){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ks.g(),this.v=this.o?Zc(this.o):Zc(ks),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(D){Du(this,D);return}if(o=d||"",d=new Map(this.headers),f)if(Object.getPrototypeOf(f)===Object.prototype)for(var T in f)d.set(T,f[T]);else if(typeof f.keys=="function"&&typeof f.get=="function")for(let D of f.keys())d.set(D,f.get(D));else throw Error("Unknown input type for opt_headers: "+String(f));f=Array.from(d.keys()).find(D=>D.toLowerCase()=="content-type"),T=c.FormData&&o instanceof c.FormData,!(0<=Array.prototype.indexOf.call(iy,u,void 0))||f||T||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[D,S]of d)this.g.setRequestHeader(D,S);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Su(this),this.u=!0,this.g.send(o),this.u=!1}catch(D){Du(this,D)}};function Du(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,Cu(o),li(o)}function Cu(o){o.A||(o.A=!0,Ce(o,"complete"),Ce(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Ce(this,"complete"),Ce(this,"abort"),li(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),li(this,!0)),ee.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Au(this):this.bb())},n.bb=function(){Au(this)};function Au(o){if(o.h&&typeof a<"u"&&(!o.v[1]||dt(o)!=4||o.Z()!=2)){if(o.u&&dt(o)==4)Qc(o.Ea,0,o);else if(Ce(o,"readystatechange"),dt(o)==4){o.h=!1;try{let S=o.Z();e:switch(S){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var d;if(!(d=u)){var f;if(f=S===0){var T=String(o.D).match(yu)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),f=!ry.test(T?T.toLowerCase():"")}d=f}if(d)Ce(o,"complete"),Ce(o,"success");else{o.m=6;try{var D=2<dt(o)?o.g.statusText:""}catch{D=""}o.l=D+" ["+o.Z()+"]",Cu(o)}}finally{li(o)}}}}function li(o,u){if(o.g){Su(o);let d=o.g,f=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||Ce(o,"ready");try{d.onreadystatechange=f}catch{}}}function Su(o){o.I&&(c.clearTimeout(o.I),o.I=null)}n.isActive=function(){return!!this.g};function dt(o){return o.g?o.g.readyState:0}n.Z=function(){try{return 2<dt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),Fm(u)}};function Ru(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function sy(o){let u={};o=(o.g&&2<=dt(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let f=0;f<o.length;f++){if(B(o[f]))continue;var d=E(o[f]);let T=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();let D=u[T]||[];u[T]=D,D.push(d)}I(u,function(f){return f.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function tr(o,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||u}function Nu(o){this.Aa=0,this.i=[],this.j=new Wn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tr("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tr("baseRetryDelayMs",5e3,o),this.cb=tr("retryDelaySeedMs",1e4,o),this.Wa=tr("forwardChannelMaxRetries",2,o),this.wa=tr("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new du(o&&o.concurrentRequestLimit),this.Da=new ty,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Nu.prototype,n.la=8,n.G=1,n.connect=function(o,u,d,f){Ae(0),this.W=o,this.H=u||{},d&&f!==void 0&&(this.H.OSID=d,this.H.OAID=f),this.F=this.X,this.I=Uu(this,null,this.W),hi(this)};function $s(o){if(Pu(o),o.G==3){var u=o.U++,d=lt(o.I);if(J(d,"SID",o.K),J(d,"RID",u),J(d,"TYPE","terminate"),nr(o,d),u=new wt(o,o.j,u),u.L=2,u.v=ci(lt(d)),d=!1,c.navigator&&c.navigator.sendBeacon)try{d=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!d&&c.Image&&(new Image().src=u.v,d=!0),d||(u.g=ju(u.j,null),u.g.ea(u.v)),u.F=Date.now(),si(u)}Lu(o)}function di(o){o.g&&(Hs(o),o.g.cancel(),o.g=null)}function Pu(o){di(o),o.u&&(c.clearTimeout(o.u),o.u=null),fi(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&c.clearTimeout(o.s),o.s=null)}function hi(o){if(!hu(o.h)&&!o.s){o.s=!0;var u=o.Ga;Un||qc(),jn||(Un(),jn=!0),Is.add(u,o),o.B=0}}function oy(o,u){return fu(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Gn(w(o.Ga,o,u),Vu(o,o.B)),o.B++,!0)}n.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;let T=new wt(this,this.j,o),D=this.o;if(this.S&&(D?(D=g(D),v(D,this.S)):D=this.S),this.m!==null||this.O||(T.H=D,D=null),this.P)e:{for(var u=0,d=0;d<this.i.length;d++){t:{var f=this.i[d];if("__data__"in f.map&&(f=f.map.__data__,typeof f=="string")){f=f.length;break t}f=void 0}if(f===void 0)break;if(u+=f,4096<u){u=d;break e}if(u===4096||d===this.i.length-1){u=d+1;break e}}u=1e3}else u=1e3;u=xu(this,T,u),d=lt(this.I),J(d,"RID",o),J(d,"CVER",22),this.D&&J(d,"X-HTTP-Session-Id",this.D),nr(this,d),D&&(this.O?u="headers="+encodeURIComponent(String(bu(D)))+"&"+u:this.m&&Bs(d,this.m,D)),js(this.h,T),this.Ua&&J(d,"TYPE","init"),this.P?(J(d,"$req",u),J(d,"SID","null"),T.T=!0,Fs(T,d,null)):Fs(T,d,u),this.G=2}}else this.G==3&&(o?Mu(this,o):this.i.length==0||hu(this.h)||Mu(this))};function Mu(o,u){var d;u?d=u.l:d=o.U++;let f=lt(o.I);J(f,"SID",o.K),J(f,"RID",d),J(f,"AID",o.T),nr(o,f),o.m&&o.o&&Bs(f,o.m,o.o),d=new wt(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),u&&(o.i=u.D.concat(o.i)),u=xu(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),js(o.h,d),Fs(d,f,u)}function nr(o,u){o.H&&ie(o.H,function(d,f){J(u,f,d)}),o.l&&mu({},function(d,f){J(u,f,d)})}function xu(o,u,d){d=Math.min(o.i.length,d);var f=o.l?w(o.l.Na,o.l,o):null;e:{var T=o.i;let D=-1;for(;;){let S=["count="+d];D==-1?0<d?(D=T[0].g,S.push("ofs="+D)):D=0:S.push("ofs="+D);let W=!0;for(let me=0;me<d;me++){let U=T[me].g,we=T[me].map;if(U-=D,0>U)D=Math.max(0,T[me].g-100),W=!1;else try{ny(we,S,"req"+U+"_")}catch{f&&f(we)}}if(W){f=S.join("&");break e}}}return o=o.i.splice(0,d),u.D=o,f}function ku(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;Un||qc(),jn||(Un(),jn=!0),Is.add(u,o),o.v=0}}function qs(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Gn(w(o.Fa,o),Vu(o,o.v)),o.v++,!0)}n.Fa=function(){if(this.u=null,Ou(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Gn(w(this.ab,this),o)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ae(10),di(this),Ou(this))};function Hs(o){o.A!=null&&(c.clearTimeout(o.A),o.A=null)}function Ou(o){o.g=new wt(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=lt(o.qa);J(u,"RID","rpc"),J(u,"SID",o.K),J(u,"AID",o.T),J(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&J(u,"TO",o.ja),J(u,"TYPE","xmlhttp"),nr(o,u),o.m&&o.o&&Bs(u,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=ci(lt(u)),d.m=null,d.P=!0,cu(d,o)}n.Za=function(){this.C!=null&&(this.C=null,di(this),qs(this),Ae(19))};function fi(o){o.C!=null&&(c.clearTimeout(o.C),o.C=null)}function Fu(o,u){var d=null;if(o.g==u){fi(o),Hs(o),o.g=null;var f=2}else if(Us(o.h,u))d=u.D,pu(o.h,u),f=1;else return;if(o.G!=0){if(u.o)if(f==1){d=u.m?u.m.length:0,u=Date.now()-u.F;var T=o.B;f=ni(),Ce(f,new iu(f,d)),hi(o)}else ku(o);else if(T=u.s,T==3||T==0&&0<u.X||!(f==1&&oy(o,u)||f==2&&qs(o)))switch(d&&0<d.length&&(u=o.h,u.i=u.i.concat(d)),T){case 1:Ht(o,5);break;case 4:Ht(o,10);break;case 3:Ht(o,6);break;default:Ht(o,2)}}}function Vu(o,u){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*u}function Ht(o,u){if(o.j.info("Error code "+u),u==2){var d=w(o.fb,o),f=o.Xa;let T=!f;f=new qt(f||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||oi(f,"https"),ci(f),T?Zm(f.toString(),d):ey(f.toString(),d)}else Ae(2);o.G=0,o.l&&o.l.sa(u),Lu(o),Pu(o)}n.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Ae(2)):(this.j.info("Failed to ping google.com"),Ae(1))};function Lu(o){if(o.G=0,o.ka=[],o.l){let u=gu(o.h);(u.length!=0||o.i.length!=0)&&(R(o.ka,u),R(o.ka,o.i),o.h.i.length=0,N(o.i),o.i.length=0),o.l.ra()}}function Uu(o,u,d){var f=d instanceof qt?lt(d):new qt(d);if(f.g!="")u&&(f.g=u+"."+f.g),ai(f,f.s);else{var T=c.location;f=T.protocol,u=u?u+"."+T.hostname:T.hostname,T=+T.port;var D=new qt(null);f&&oi(D,f),u&&(D.g=u),T&&ai(D,T),d&&(D.l=d),f=D}return d=o.D,u=o.ya,d&&u&&J(f,d,u),J(f,"VER",o.la),nr(o,f),f}function ju(o,u,d){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new ee(new Xn({eb:d})):new ee(o.pa),u.Ha(o.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bu(){}n=Bu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function pi(){}pi.prototype.g=function(o,u){return new je(o,u)};function je(o,u){Ie.call(this),this.g=new Nu(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!B(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!B(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new an(this)}A(je,Ie),je.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},je.prototype.close=function(){$s(this.g)},je.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=Ns(o),o=d);u.i.push(new qm(u.Ya++,o)),u.G==3&&hi(u)},je.prototype.N=function(){this.g.l=null,delete this.j,$s(this.g),delete this.g,je.aa.N.call(this)};function $u(o){Ms.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(let d in u){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}A($u,Ms);function qu(){xs.call(this),this.status=1}A(qu,xs);function an(o){this.g=o}A(an,Bu),an.prototype.ua=function(){Ce(this.g,"a")},an.prototype.ta=function(o){Ce(this.g,new $u(o))},an.prototype.sa=function(o){Ce(this.g,new qu)},an.prototype.ra=function(){Ce(this.g,"b")},pi.prototype.createWebChannel=pi.prototype.g,je.prototype.send=je.prototype.o,je.prototype.open=je.prototype.m,je.prototype.close=je.prototype.close,mx=Li.createWebChannelTransport=function(){return new pi},gx=Li.getStatEventTarget=function(){return ni()},px=Li.Event=Bt,fx=Li.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ri.NO_ERROR=0,ri.TIMEOUT=8,ri.HTTP_ERROR=6,hx=Li.ErrorCode=ri,su.COMPLETE="complete",dx=Li.EventType=su,eu.EventType=Hn,Hn.OPEN="a",Hn.CLOSE="b",Hn.ERROR="c",Hn.MESSAGE="d",Ie.prototype.listen=Ie.prototype.K,lx=Li.WebChannel=eu,s9=Li.FetchXmlHttpFactory=Xn,ee.prototype.listenOnce=ee.prototype.L,ee.prototype.getLastError=ee.prototype.Ka,ee.prototype.getLastErrorCode=ee.prototype.Ba,ee.prototype.getStatus=ee.prototype.Z,ee.prototype.getResponseJson=ee.prototype.Oa,ee.prototype.getResponseText=ee.prototype.oa,ee.prototype.send=ee.prototype.ea,ee.prototype.setWithCredentials=ee.prototype.Ha,ux=Li.XhrIo=ee}).apply(typeof gm<"u"?gm:typeof self<"u"?self:typeof window<"u"?window:{});var yx="@firebase/firestore",_x="4.8.0";var Mt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");var rh="11.10.0";var Bc=new Yr("@firebase/firestore");function br(n,...e){if(Bc.logLevel<=Ne.DEBUG){let t=e.map(Wb);Bc.debug(`Firestore (${rh}): ${n}`,...t)}}function Px(n,...e){if(Bc.logLevel<=Ne.ERROR){let t=e.map(Wb);Bc.error(`Firestore (${rh}): ${n}`,...t)}}function o9(n,...e){if(Bc.logLevel<=Ne.WARN){let t=e.map(Wb);Bc.warn(`Firestore (${rh}): ${n}`,...t)}}function Wb(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function rn(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Mx(n,r,t)}function Mx(n,e,t){let r=`FIRESTORE (${rh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Px(r),new Error(r)}function Zo(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Mx(e,i,r)}var ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ge=class extends On{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ea=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var mm=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Sb=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Mt.UNAUTHENTICATED))}shutdown(){}},Rb=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Nb=class{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Zo(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),s=new ea;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ea,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},c=l=>{br("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(br("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ea)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(br("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Zo(typeof r.accessToken=="string",31837,{l:r}),new mm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Zo(e===null||typeof e=="string",2055,{h:e}),new Mt(e)}},Pb=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Mb=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Pb(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ym=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},xb=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Zo(this.o===void 0,3512);let r=s=>{s.error!=null&&br("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let a=s.token!==this.m;return this.m=s.token,br("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{br("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):br("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ym(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Zo(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ym(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function a9(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function c9(){return new TextEncoder}var kb=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=a9(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Vn(n,e){return n<e?-1:n>e?1:0}function u9(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Vn(r,i);{let s=c9(),a=l9(s.encode(vx(n,t)),s.encode(vx(e,t)));return a!==0?a:Vn(r,i)}}t+=r>65535?2:1}return Vn(n.length,e.length)}function vx(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function l9(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Vn(n[t],e[t]);return Vn(n.length,e.length)}var Ex="__name__",_m=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&rn(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&rn(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Vn(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):u9(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return pm.fromString(e.substring(4,e.length-2))}},Ui=class n extends _m{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ge(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},d9=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ob=class n extends _m{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return d9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ex}static keyField(){return new n([Ex])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new ge(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new ge(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ge(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new ge(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ji=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ui.fromString(e))}static fromName(e){return new n(Ui.fromString(e).popFirst(5))}static empty(){return new n(Ui.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ui.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ui.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ui(e.slice()))}};function h9(n,e,t,r){if(e===!0&&r===!0)throw new ge(ve.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function f9(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function p9(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":rn(12329,{type:typeof n})}function g9(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=p9(n);throw new ge(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ct(n,e){let t={typeString:n};return e&&(t.value=e),t}function ih(n,e){if(!f9(n))throw new ge(ve.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new ge(ve.INVALID_ARGUMENT,t);return!0}var Ix=-62135596800,wx=1e6,Jd=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*wx);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ix)throw new ge(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wx}_compareTo(e){return this.seconds===e.seconds?Vn(this.nanoseconds,e.nanoseconds):Vn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ih(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-Ix;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Jd._jsonSchemaVersion="firestore/timestamp/1.0",Jd._jsonSchema={type:ct("string",Jd._jsonSchemaVersion),seconds:ct("number"),nanoseconds:ct("number")};var Fb=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Fb.UNKNOWN_ID=-1;function m9(n){return n.name==="IndexedDbTransactionError"}function y9(n){return n===0&&1/n==-1/0}var _9="remoteDocuments",xx="owner";var kx="mutationQueues";var Ox="mutations";var Fx="documentMutations",v9="remoteDocumentsV14";var Vx="remoteDocumentGlobal";var Lx="targets";var Ux="targetDocuments";var jx="targetGlobal",Bx="collectionParents";var $x="clientMetadata";var qx="bundles";var Hx="namedQueries";var E9="indexConfiguration";var I9="indexState";var w9="indexEntries";var zx="documentOverlays";var T9="globals";var b9=[kx,Ox,Fx,_9,Lx,xx,jx,Ux,$x,Vx,Bx,qx,Hx],gue=[...b9,zx],D9=[kx,Ox,Fx,v9,Lx,xx,jx,Ux,$x,Vx,Bx,qx,Hx,zx],C9=D9,A9=[...C9,E9,I9,w9];var mue=[...A9,T9];var $c=class n{constructor(e,t){this.comparator=e,this.root=t||Xr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vc(this.root,e,this.comparator,!0)}},Vc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Xr=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw rn(43730,{key:this.key,value:this.value});if(this.right.isRed())throw rn(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw rn(27949);return e+(this.isRed()?0:1)}};Xr.EMPTY=null,Xr.RED=!0,Xr.BLACK=!1;Xr.EMPTY=new class{constructor(){this.size=0}get key(){throw rn(57766)}get value(){throw rn(16141)}get color(){throw rn(16727)}get left(){throw rn(29726)}get right(){throw rn(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Xr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var vm=class n{constructor(e){this.comparator=e,this.data=new $c(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Em(this.data.getIterator())}getIteratorFrom(e){return new Em(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Em=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Vb=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Es=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Vb("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Es.EMPTY_BYTE_STRING=new Es("");var S9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function R9(n){if(Zo(!!n,39018),typeof n=="string"){let e=0,t=S9.exec(n);if(Zo(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xd(n.seconds),nanos:Xd(n.nanos)}}function Xd(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function N9(n){return typeof n=="string"?Es.fromBase64String(n):Es.fromUint8Array(n)}var Lb="(default)",Ub=class n{constructor(e,t){this.projectId=e,this.database=t||Lb}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Lb}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Gx="__type__",P9="__max__";var Wx="__vector__",Kx="value";function M9(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Gx])===null||t===void 0?void 0:t.stringValue)===Wx}function x9(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===P9}var _ue={mapValue:{fields:{[Gx]:{stringValue:Wx},[Kx]:{arrayValue:{}}}}};var jb=class{constructor(e,t=null,r=[],i=[],s=null,a="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function k9(n){return new jb(n)}var vue=new $c(ji.comparator);var Eue=new $c(ji.comparator);var Iue=new $c(ji.comparator),wue=new vm(ji.comparator);var Tue=new vm(Vn);var Tx,_e;(_e=Tx||(Tx={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";var bue=new pm([4294967295,4294967295],0);var Im=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Xd(e.integerValue));else if("doubleValue"in e){let r=Xd(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),y9(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=R9(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(N9(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?x9(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):M9(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):rn(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let s=e.fields||{};this.Ct(t,53);let a=Kx,c=((i=(r=s[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Xd(c)),this.xt(a,t),this.Dt(s[a],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),ji.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Im.Ut=new Im;var Due=new Uint8Array(0);var Qx=41943040,Jr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Jr.DEFAULT_COLLECTION_PERCENTILE=10,Jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jr.DEFAULT=new Jr(Qx,Jr.DEFAULT_COLLECTION_PERCENTILE,Jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jr.DISABLED=new Jr(-1,0,0);var O9=1048576;function Ab(){return typeof document<"u"?document:null}var Bb=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&br("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var $b=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ea,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let a=Date.now()+r,c=new n(e,t,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var bx,Dx;(Dx=bx||(bx={})).Fa="default",Dx.Cache="cache";function F9(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Cx=new Map;var Yx="firestore.googleapis.com",Ax=!0,wm=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Yx,this.ssl=Ax}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Ax;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Qx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<O9)throw new ge(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}h9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=F9((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ge(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ge(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ge(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Tm=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Sb;switch(r.type){case"firstParty":return new Mb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=Cx.get(t);r&&(br("ComponentProvider","Removing Datastore"),Cx.delete(t),r.terminate())})(this),Promise.resolve()}};function Jx(n,e,t,r={}){var i;n=g9(n,Tm);let s=Pc(e),a=n._getSettings(),c=Object.assign(Object.assign({},a),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;s&&(WT(`https://${l}`),KT("Firestore",!0)),a.host!==Yx&&a.host!==l&&o9("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let h=Object.assign(Object.assign({},a),{host:l,ssl:s,emulatorOptions:r});if(!qo(h,c)&&(n._setSettings(h),r.mockUserToken)){let p,_;if(typeof r.mockUserToken=="string")p=r.mockUserToken,_=Mt.MOCK_USER;else{p=pM(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new ge(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Mt(w)}n._authCredentials=new Rb(new mm(p,_))}}var qb=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},ta=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hb(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ih(t,n._jsonSchema))return new n(e,r||null,new ji(Ui.fromString(t.referencePath)))}};ta._jsonSchemaVersion="firestore/documentReference/1.0",ta._jsonSchema={type:ct("string",ta._jsonSchemaVersion),referencePath:ct("string")};var Hb=class n extends qb{constructor(e,t,r){super(e,t,k9(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ta(this.firestore,null,new ji(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var Sx="AsyncQueue",bm=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Bb(this,"async_queue_retry"),this.oc=()=>{let r=Ab();r&&br(Sx,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=Ab();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=Ab();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new ea;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!m9(e))throw e;br(Sx,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Px("INTERNAL UNHANDLED ERROR: ",Rx(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=$b.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&rn(47125,{hc:Rx(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function Rx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var zb=class extends Tm{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new bm,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new bm(e),this._firestoreClient=void 0,await e}}};function Xx(n,e){let t=typeof n=="object"?n:xc(),r=typeof n=="string"?n:e||Lb,i=Yg(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=hM("firestore");s&&Jx(i,...s)}return i}var Zd=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Es.fromBase64String(e))}catch(t){throw new ge(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Es.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ih(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Zd._jsonSchemaVersion="firestore/bytes/1.0",Zd._jsonSchema={type:ct("string",Zd._jsonSchemaVersion),bytes:ct("string")};var Dm=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ob(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var eh=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Vn(this._lat,e._lat)||Vn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(ih(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};eh._jsonSchemaVersion="firestore/geoPoint/1.0",eh._jsonSchema={type:ct("string",eh._jsonSchemaVersion),latitude:ct("number"),longitude:ct("number")};var th=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ih(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new ge(ve.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};th._jsonSchemaVersion="firestore/vectorValue/1.0",th._jsonSchema={type:ct("string",th._jsonSchemaVersion),vectorValues:ct("object")};var V9=new RegExp("[~\\*/\\[\\]]");function L9(n,e,t){if(e.search(V9)>=0)throw Nx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Dm(...e.split("."))._internalPath}catch{throw Nx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Nx(n,e,t,r,i){let s=r&&!r.isEmpty(),a=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new ge(ve.INVALID_ARGUMENT,c+n+l)}var Cm=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ta(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Gb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Zx("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Gb=class extends Cm{data(){return super.data()}};function Zx(n,e){return typeof e=="string"?L9(n,e):e instanceof Dm?e._internalPath:e._delegate._internalPath}var Lc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Uc=class n extends Cm{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new jc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Zx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ve.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Uc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Uc._jsonSchema={type:ct("string",Uc._jsonSchemaVersion),bundleSource:ct("string","DocumentSnapshot"),bundleName:ct("string"),bundle:ct("string")};var jc=class extends Uc{data(e={}){return super.data(e)}},nh=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Lc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new jc(this._firestore,this._userDataWriter,r.key,r,new Lc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{let l=new jc(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Lc(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new jc(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Lc(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),h=-1,p=-1;return c.type!==0&&(h=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),p=a.indexOf(c.doc.key)),{type:U9(c.type),doc:l,oldIndex:h,newIndex:p}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ve.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=kb.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function U9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rn(61501,{type:n})}}nh._jsonSchemaVersion="firestore/querySnapshot/1.0",nh._jsonSchema={type:ct("string",nh._jsonSchemaVersion),bundleSource:ct("string","QuerySnapshot"),bundleName:ct("string"),bundle:ct("string")};(function(e,t=!0){(function(i){rh=i})(Mc),wr(new Xt("firestore",(r,{instanceIdentifier:i,options:s})=>{let a=r.getProvider("app").getImmediate(),c=new zb(new Nb(r.getProvider("auth-internal")),new xb(a,r.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ge(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ub(h.options.projectId,p)})(a,i),a);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),tt(yx,_x,e),tt(yx,_x,"esm2017")})();var sh=class{constructor(e){return e}},ek="firestore",Kb=class{constructor(){return Oc(ek)}};var Qb=new z("angularfire2.firestore-instances");function j9(n,e){let t=Zg(ek,n,e);return t&&new sh(t)}function B9(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new sh(r)}}var $9={provide:Kb,deps:[[new wi,Qb]]},q9={provide:sh,useFactory:j9,deps:[[new wi,Qb],Qo]};function tk(n,...e){return tt("angularfire",Wo.full,"fst"),Ei([q9,$9,{provide:Qb,useFactory:B9(n),multi:!0,deps:[qe,_t,Ko,Hd,[new wi,fm],[new wi,tm],...e]}])}var nk=Fc(Xx,!0);var rk={production:!1,firebaseConfig:{apiKey:"AIzaSyBCEL0W095bO9QdRfWp68FzjIYbTVlu6fw",authDomain:"chanmuraresturantui.firebaseapp.com",projectId:"chanmuraresturantui",storageBucket:"chanmuraresturantui.firebasestorage.app",messagingSenderId:"396550554524",appId:"1:396550554524:web:9cf1983e2842dcb5b03e59"}};vE(Gg,{providers:[HE(oM),Wh(EE,ms),PM(()=>MM(rk.firebaseConfig)),tk(()=>nk())]});
